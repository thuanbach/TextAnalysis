/*! For license information please see api.js.LICENSE.txt */
(()=>{var __webpack_modules__={89471:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=navigator.userAgent.toLowerCase(),r=n.match(/(opera|ie|edge|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],i=r[1],o=parseInt(r[2],10),a="ie"===i&&o<8&&/trident/i.test(n),s=!!n.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),l=!!n.match(/applewebkit/),u=/^((?!android|chrome).)*safari/i.test(navigator.userAgent),c=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest)),d=!!navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,f=n.match(/(iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;n.match(/trident.*rv[ :]*11\./)&&(i="ie",o=11),n.match(/edge/)&&(i="edge"),"version"===i&&(i=r[3]);var p={browser:i,version:o,compatibilityMode:a,isMobile:s,isChromeApp:c,isAppleWebKit:l,isValidDOCTYPE:function(e){return!(!e||!e.doctype||"html"!==e.doctype.name)},isIOS:d,isIPad:f,isMicrosoft:"ie"===i||"edge"===i,isWindows:!(!window.navigator||!window.navigator.platform)&&["Windows","Win32","Win64","WinCE"].indexOf(window.navigator.platform)>-1,isSafari:u};t.default=p},88798:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.URI_SAFE_ATTRIBUTES=t.DATA_URI_UNSAFE_ATTRIBUTES=t.DATA_URI_SAFE_TAGS=t.ATTR_WHITESPACE=void 0;var n=["audio","video","img","source","image","track"];t.DATA_URI_SAFE_TAGS=n;var r=["href","xlink:href","src","data"];t.DATA_URI_UNSAFE_ATTRIBUTES=r;var i=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"];t.URI_SAFE_ATTRIBUTES=i;var o=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);t.ATTR_WHITESPACE=o;var a={mimeType:"text/html",imageText:" - image - ",imageWithAltText:" - image with description: ",blackListedTags:["script","style","textarea"],blackListedAttributes:["seeksegmenttime","fscommand","display"],blackListedRegex:/^on/i,blackListedContent:{javascript_keyword:["javascript:","javascript&colon;"]},ATTR_WHITESPACE:o,URI_SAFE_ATTRIBUTES:i,DATA_URI_SAFE_TAGS:n,DATA_URI_UNSAFE_ATTRIBUTES:r};t.default=a},68055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(7324))&&r.__esModule?r:{default:r};function o(e){var t=e.parentElement.querySelector("head").childNodes,n="";return t.length&&i.default.each(t,(function(e){3===e.nodeType&&(n+=e.textContent),1===e.nodeType&&"META"!==e.tagName&&(n+=e.innerHTML)})),n}var a={removeElement:function(e){e.parentNode.removeChild(e)},getElementAttributes:function(e){for(var t=e.attributes,n=t.length,r=[],i=0;i<n;i++)r.push(t[i].name);return r},processElements:function(e,t){i.default.forEach(e,(function(e){return t(e),e}))},getParsableData:function(e,t){var n=(new DOMParser).parseFromString(e,"text/html"),r=i.default.isString(t)?t:"*",o=n.querySelectorAll(r);return!(function(e){return e.getElementsByTagName("parsererror").length>0}(n)||!function(e){return e.length>0}(o))&&{elements:o,dom:n}},mergeTempDomContent:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?o(e.head)+e.body.innerHTML:e.head.innerText+e.body.innerText}};t.default=a},88184:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Z=void 0;var i=l(n(7324)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(88798)),a=l(n(68055));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return a.default.getParsableData(e,"*:not(body):not(head):not(html)")}function c(e){var t=a.default.getElementAttributes(e);t.length&&i.default.each(t,(function(t){!function(e,t){o.default.blackListedRegex.test(t)&&e.removeAttribute(t)}(e,t),function(e,t){i.default.contains(o.default.blackListedAttributes,t.toLowerCase())&&e.removeAttribute(t)}(e,t)}))}function d(e){var t=u(e);return t?(a.default.processElements(t.elements,(function(e){"a"===e.tagName.toLowerCase()&&(e.insertAdjacentHTML("afterEnd",e.innerHTML),a.default.removeElement(e))})),a.default.mergeTempDomContent(t.dom)):e}function f(e,t){var n=u(e);return n?(a.default.processElements(n.elements,(function(e){t.forEach((function(t){e.removeAttribute(t)}))})),a.default.mergeTempDomContent(n.dom)):e}function p(e){!function(e){i.default.contains(o.default.blackListedTags,e.nodeName.toLowerCase())&&(e.insertAdjacentHTML("afterEnd",e.innerText),a.default.removeElement(e))}(e),c(e),function(e){var t=o.default.blackListedContent.javascript_keyword;a.default.getElementAttributes(e).forEach((function(n){if(!i.default.contains(o.default.URI_SAFE_ATTRIBUTES,n)){var r=(e.getAttribute(n)||"").replace(/\s/g,"").toLowerCase();!r||-1!==r.indexOf("data:image/svg+xml,")||-1===r.indexOf(t[0])&&-1===r.indexOf(encodeURIComponent(t[0]).toLowerCase())||e.removeAttribute(n)}}))}(e),function(e){i.default.contains(o.DATA_URI_SAFE_TAGS,e.nodeName.toLowerCase())||a.default.getElementAttributes(e).forEach((function(t){if(i.default.contains(o.DATA_URI_UNSAFE_ATTRIBUTES,t)){var n=/;base64/,r=e.getAttribute(t),a=r&&r.replace(/\s/g,"").toLowerCase(),s=a&&0===a.indexOf("data:"),l=a&&n.test(a);if(s){var u=a.slice(0,a.indexOf(",")),c=r.slice(r.indexOf(",")+1),d="";l&&(-1!==c.indexOf("#")&&(d=c.slice(c.indexOf("#")),c=c.slice(0,c.indexOf("#"))),c=atob(c));var f=v(c).replace(/"/g,"'");l&&(u=u.replace(n,"")),e.setAttribute(t,"".concat(u,",").concat(f).concat(d))}}}))}(e)}function h(e,t){var n=u(e);return n?(a.default.processElements(n.elements,(function(e){var n=e.tagName.toLowerCase();i.default.contains(t,n)||(e.insertAdjacentHTML("afterEnd",e.innerText),a.default.removeElement(e))})),a.default.mergeTempDomContent(n.dom)):e}function m(e,t){var n=u(e);return n?(a.default.processElements(n.elements,(function(e){var n=e.tagName.toLowerCase();(e.id.indexOf("MathJax")>-1||e.classList.contains("MathJax"))&&function(e,t){t.shouldStrip||e.insertAdjacentText("afterEnd",t.warning),a.default.removeElement(e)}(e,t.externalMath),"img"===n&&function(e,t){t.shouldStrip?a.default.removeElement(e):(e.setAttribute("src","#"),e.setAttribute("alt",t.warning))}(e,t.externalImages)})),a.default.mergeTempDomContent(n.dom)):e}function g(e){var t;t=e.hasAttribute("alt")&&""!==e.alt?"".concat(o.default.imageWithAltText).concat(e.alt," - "):o.default.imageText,e.insertAdjacentHTML("afterEnd",t)}function y(e,t){return!!e&&(a.default.processElements(e.elements,t),a.default.mergeTempDomContent(e.dom))}function v(e){var t=y(u(e),p);return t||e}var b={sanitizeHTML:v,sanitizeAttributesWithBlackList:f,sanitizeElementsWithWhiteList:h,sanitizePastedContent:function(e,t){var n=t.attributesBlackList,r=void 0===n?[]:n,a=t.elementsWhiteList;return e=m(e=d(e),t),i.default.isArray(a)&&(e=h(e,a)),e=v(e=f(e,i.default.union(r,o.default.blackListedAttributes)))},removeLinks:d,stripHTML:function(e,t){var n=t?i.default.unescape(e):e,r=a.default.getParsableData(n),o=r?a.default.mergeTempDomContent(r.dom,!1):e;return t?i.default.escape(o):o},createImageDescriptions:function(e){var t=y(a.default.getParsableData(e,"img"),g);return t||e}};t.Z=b},51739:(e,t,n)=>{"use strict";t.jm=function(e){var t,n,i=e,o=new r.default;return a(e),n=o.build(i),t=n.toHTML(),{definition:i,content:t}},Object.defineProperty(t,"LR",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"NB",{enumerable:!0,get:function(){return i.default}});var r=o(n(11618)),i=o(n(70679));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e;if(!(new r.default).isDefinitionValid(t))throw"Passed definition is invalid: "+JSON.stringify(e)}},70679:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(7324)),i=c(n(23237)),o=c(n(84584)),a=c(n(95631)),s=c(n(74055)),l=c(n(13475)),u=c(n(70493));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){this._initialize(e,t)}r.default.extend(d.prototype,{_initialize:function(e,t){this._regionJSON=e,this._type=this._regionJSON.type||"root",this._id=t,this._regionJSON.widgets?this._widgets=this._regionJSON.widgets:this._widgets=[],"tab"===this._type&&(this._label=this._regionJSON.label),this._regions=[],d._addPropertiesIfDefined({originalObject:this._regionJSON,targetObject:this,propertyKeys:["scroll","vertical_divider","width"],functionToModifyKey:d._addUnderscoreToKey})},_isSingleColumn:function(){if(!this._regions||1!==this._regions.length)return!1;var e=this._regions[0];return"column"===e._type&&0===e._regions.length&&!e._scroll},addRegion:function(e){this._regions.push(e),e._parent=this},toJSON:function(){return this._toJSON()},_toJSON:function(e){var t={},n=[],i=["_scroll","_vertical_divider","_width"];if(r.default.isArray(e)&&(i=i.concat(e)),"root"===this._type&&(t.template="dynamic"),this._widgets.length&&(t.widgets=this._widgets),"tab"===this._type&&(t.label=this._label),r.default.each(this._regions,(function(t){n.push(t._toJSON(e))})),n.length&&(t.regions=n),d._addPropertiesIfDefined({originalObject:this,targetObject:t,propertyKeys:i,functionToModifyKey:d._removeUnderscoreFromKey}),"root"===this._type&&this._isSingleColumn()){var o=t.scroll;t={widgets:t.regions[0].widgets,template:t.template},o&&(t.scroll=o)}else t.type=this._type;return t},toHTML:function(e){var t,n,r,a,s="",l="";for(e||(e=this._scroll&&this._scroll.enabled),t=0;t<this._widgets.length;t++)r={reference:this._widgets[t].reference},this._widgets[t].widget_type?r.widget_type=this._widgets[t].widget_type:r.widget_type="response","response"===r.widget_type?r.prefix="question":r.prefix="feature",s+=(0,i.default)(r);if("tabs"===this._type&&this._regions.length>0&&this._setActiveTab(),this._regions.length)for(t=0;t<this._regions.length;t++)l+=this._regions[t].toHTML(e);else"root"===this._type&&(s=(0,o.default)({content:s,width:12}));return"tabs"===this._type&&this._regions.length>0?this._getTabsHtml(l,e):(a=s+l,n=this._getTemplate(),r={content:a,region:this._id},"tab"===this._type&&(r.scroll=e,this._isActive&&(r.isActive=this._isActive)),"column"===this._type&&(this._width&&d.COLUMN_WIDTHS[this._width]?r.width=d.COLUMN_WIDTHS[this._width]:r.width=d.COLUMN_WIDTHS[100],this.hasSubRegions("tabs")||(r.scroll=e)),"root"===this._type&&(r.vertical_divider=this._vertical_divider),n(r))},_getTabsHtml:function(e,t){var n={tabData:this._getTabData(t),content:e,region:this._id};return(0,u.default)(n)},_getTemplate:function(e){switch(e||this._type){case"root":return a.default;case"column":return o.default;case"tab":return l.default;case"tabs":return u.default;default:return s.default}},_setActiveTab:function(){var e=r.default.findWhere(this._regions,{_isActive:!0});this._regions.forEach((function(e){e._isActive=!1})),e?e._isActive=!0:this._regions[0]._isActive=!0},_getTabData:function(e){for(var t=[],n=0;n<this._regions.length;n++)t.push({id:this._regions[n]._id,label:this._regions[n]._label,isActive:this._regions[n]._isActive,scroll:e});return t},hasSubRegions:function(e){if(r.default.isString(e)){for(var t=0;t<this._regions.length;t++)if(this._regions[t]._type===e)return!0}else if(this._regions.length)return!0;return!1}}),d.isRegionJsonValid=function(e){var t,n,i,o;if(!r.default.isObject(e))throw"`json` must be an object. Passed arguments: "+JSON.stringify(arguments);if(e.type){if(n=e.type,!r.default.isString(n))throw"`type` must be as string. Passed arguments: "+JSON.stringify(arguments)}else n="root";for(t in o=d.REGION_REQUIRED_FIELDS["*"],d.REGION_REQUIRED_FIELDS[n]&&(o=r.default.extend({},o,d.REGION_REQUIRED_FIELDS[n])),o)if(o.hasOwnProperty(t)&&o[t]&&!e[t])throw"`"+t+"` is a required field for `"+n+"` regions. Passed arguments: "+JSON.stringify(arguments);for(t in e)if(e.hasOwnProperty(t)&&(i=void 0,r.default.isObject(d.REGION_FIELDS_VALIDATION_FUNCTIONS[n])&&r.default.isFunction(d.REGION_FIELDS_VALIDATION_FUNCTIONS[n][t])?i=d.REGION_FIELDS_VALIDATION_FUNCTIONS[n][t]:r.default.isObject(d.REGION_FIELDS_VALIDATION_FUNCTIONS["*"])&&r.default.isFunction(d.REGION_FIELDS_VALIDATION_FUNCTIONS["*"][t])&&(i=d.REGION_FIELDS_VALIDATION_FUNCTIONS["*"][t]),i&&!i(e[t],e)))throw"`"+t+"` is not valid (validation function failed). Passed arguments: "+JSON.stringify(arguments);if(!d.checkWidgetReferences(e))throw"There are existing and duplicated widget references in the passed JSON definition. Passed arguments: "+JSON.stringify(arguments);return!0},d.checkWidgetReferences=function(e){var t=[],n={};!function e(n){if(r.default.isArray(n.widgets))for(var i=0;i<n.widgets.length;i++)t.push(n.widgets[i].reference);if(r.default.isArray(n.regions))for(var o=0;o<n.regions.length;o++)e(n.regions[o])}(e);for(var i=0;i<t.length;i++){if(n[t[i]])return!1;n[t[i]]=!0}return!0},d.COLUMN_WIDTHS={30:4,40:5,50:6,60:7,70:8,100:12},d.ALLOWED_TYPES=["root","row","column","tab","tabs"],d.REGION_REQUIRED_FIELDS={"*":{type:!1,regions:!1,widgets:!1,vertical_divider:!1,scroll:!1},row:{type:!0},column:{type:!0},tab:{type:!0,label:!1,isActive:!1}},d.REGION_FIELDS_VALIDATION_FUNCTIONS={"*":{type:function(e){if(!r.default.isString(e)||-1===d.ALLOWED_TYPES.indexOf(e))throw"Type must be a string. Passed value "+JSON.stringify(e);return!0},regions:function(e){var t;if(!r.default.isArray(e))throw"Regions must be an array. Passed value "+JSON.stringify(e);for(var n=0;n<e.length;n++){if(!d.isRegionJsonValid(e[n]))throw"Regions JSON must be valid. Passed value "+JSON.stringify(e);if(t&&t!==e[n].type)throw"All regions must have the same type. Passed value "+JSON.stringify(e);t=e[n].type}return!0},widgets:function(e){var t=["feature","response"];if(!r.default.isArray(e))throw"Widgets must be an array. Passed value "+e;for(var n=0;n<e.length;n++){if(!r.default.isObject(e[n])||!r.default.isString(e[n].reference))throw"Widget must be an object and reference property should be a string. Passed value "+JSON.stringify(e);if(e[n].widget_type&&-1===t.indexOf(e[n].widget_type))throw'Widget type must be either "response" or "feature". Passed value '+JSON.stringify(e)}return!0},label:function(e){return r.default.isString(e)}}},d._addPropertiesIfDefined=function(e){e.propertyKeys.forEach((function(t){var n=t;e.functionToModifyKey&&(n=e.functionToModifyKey(t)),e.originalObject[t]&&(e.targetObject[n]=e.originalObject[t])}))},d._addUnderscoreToKey=function(e){return"_"+e},d._removeUnderscoreFromKey=function(e){return e.slice(1)};var f=d;t.default=f},11618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(7324)),i=o(n(70679));function o(e){return e&&e.__esModule?e:{default:e}}function a(){this._nodeClass=i.default}r.default.extend(a.prototype,{build:function(e){var t=this,n=0,i=this._transformRootNodeWithSingleRow(e);return!!this.isDefinitionValid(i)&&function e(i){var o=new t._nodeClass(i,n++);if(r.default.isArray(i.regions))for(var a=0;a<i.regions.length;a++)o.addRegion(e(i.regions[a]));return o}(i)},_transformRootNodeWithSingleRow:function(e){var t=JSON.parse(JSON.stringify(e));return"root"!==(t.type||"root")||t.regions&&t.regions.length||(t.regions=[{type:"column",width:100,widgets:t.widgets||[]}],t.widgets=[]),t},isDefinitionValid:function(e){return this._nodeClass.isRegionJsonValid(e)}});var s=a;t.default=s},84584:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e.width)||"",n=(0,i.default)(e.scroll)||"",o=e.content||"";return(0,r.default)('\n        <div class="col-xs-'.concat(t,'">\n            ').concat(n&&'<div class="learnosity-feature" data-type="scrollablepassage" data-height="100%">',"\n                ").concat(o,"\n            ").concat(n&&"</div>","\n        </div>\n    "))};var r=o(n(62474)),i=o(n(11108));function o(e){return e&&e.__esModule?e:{default:e}}},95631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e.vertical_divider)||"",n=e.content||"";return(0,r.default)('\n        <div class="row'.concat(t&&" col-separator",'">\n            ').concat(n,"\n        </div>\n    "))};var r=o(n(62474)),i=o(n(11108));function o(e){return e&&e.__esModule?e:{default:e}}},74055:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.content||"";return(0,i.default)('\n        <div class="lrn-row">\n            '.concat(t,"\n        </div>\n    "))};var r,i=(r=n(62474))&&r.__esModule?r:{default:r}},13475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.content||"",n=(0,i.default)(e.isActive)||"",o=(0,i.default)(e.scroll)||"",a=(0,i.default)(e.region)||"";return(0,r.default)('\n        <div class="tab-pane'.concat(n&&" active",'"').concat(a&&' data-tab-id="'.concat(a,'"'),">\n            ").concat(o&&'<div class="learnosity-feature" data-type="scrollablepassage" data-height="100%" data-subtract-height="60">',"\n                ").concat(t,"\n            ").concat(o&&"</div>","\n        </div>\n    "))};var r=o(n(62474)),i=o(n(11108));function o(e){return e&&e.__esModule?e:{default:e}}},70493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.content||"",n=e.tabData||[];return(0,r.default)('\n        <div class="tabs">\n            <ul class="nav nav-tabs" role="tablist">\n                '.concat(n.map(a).join(""),'\n            </ul>\n            <div class="tab-content">\n                ').concat(t,"\n            </div>\n        </div>\n    "))};var r=o(n(62474)),i=o(n(11108));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,i.default)(e.isActive)||"",n=(0,i.default)(e.label)||"",r=(0,i.default)(e.id)||"";return'\n        <li role="tab"'.concat(t&&' class="active" aria-selected="true"','>\n            <a href="#" aria-label="').concat(n,'" data-tab-target="[data-tab-id=\'').concat(r,'\']" data-toggle="tab">\n                ').concat(n,"\n            </a>\n        </li>\n    ")}},23237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e.widget_type)||"",n=(0,i.default)(e.prefix)||"",r=(0,i.default)(e.reference)||"";return'<span class="learnosity-'.concat(t," ").concat(n,"-").concat(r,'"></span>')};var r,i=(r=n(11108))&&r.__esModule?r:{default:r}},11108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("string"==typeof e||e&&"function"==typeof e.toString)return"string"!=typeof e&&(e=e.toString()),n.test(e)?e.replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&quot;").replace(s,"&#39;"):e;return e};var n=/[&<>"']/,r=/&/g,i=/</g,o=/>/g,a=/\"/g,s=/\'/g},62474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/^\s*/gm,"").replace(/\s*$/gm,"").replace(/\r*/gm,"").replace(/\n*/gm,"")}},47792:(e,t,n)=>{"use strict";t.Z=l;var r=a(n(2784)),i=a(n(13980)),o=a(n(72779));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){var t=e.className,n=e.hidden,i=e.icon,a=e.focusable,l=e.size,u=s(e,["className","hidden","icon","focusable","size"]),c=(0,o.default)("lds-icon",t,{"lds-icon-hide":n},"lds-icon--".concat(l)),d=i&&"#".concat(i.id)||u.xlinkHref;return r.default.createElement("svg",{className:c,"aria-hidden":u["aria-hidden"],focusable:a},r.default.createElement("use",{className:"lds-icon-i",xlinkHref:d}))}l.propTypes={className:i.default.string,hidden:i.default.bool,icon:i.default.any,"aria-hidden":i.default.bool,focusable:i.default.bool,xlinkHref:i.default.string,size:i.default.oneOf(["small","medium","large","x-large"])},l.defaultProps={className:"",hidden:!1,icon:null,"aria-hidden":!0,focusable:!1,xlinkHref:"",size:"small"}},53802:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(82304))&&r.__esModule?r:{default:r}).default;t.default=i},45798:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(22736))&&r.__esModule?r:{default:r}).default;t.default=i},23092:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(23444))&&r.__esModule?r:{default:r}).default;t.default=i},9909:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(43450))&&r.__esModule?r:{default:r}).default;t.default=i},49810:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(70561))&&r.__esModule?r:{default:r}).default;t.default=i},82165:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(23184))&&r.__esModule?r:{default:r}).default;t.default=i},63951:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(82228))&&r.__esModule?r:{default:r}).default;t.default=i},38665:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(21708))&&r.__esModule?r:{default:r}).default;t.default=i},52497:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(45608))&&r.__esModule?r:{default:r}).default;t.default=i},68102:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(30016))&&r.__esModule?r:{default:r}).default;t.default=i},57428:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(46491))&&r.__esModule?r:{default:r}).default;t.default=i},34346:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(59831))&&r.__esModule?r:{default:r}).default;t.default=i},67521:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(16083))&&r.__esModule?r:{default:r}).default;t.default=i},97623:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(3299))&&r.__esModule?r:{default:r}).default;t.default=i},2899:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(9203))&&r.__esModule?r:{default:r}).default;t.default=i},71450:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(88304))&&r.__esModule?r:{default:r}).default;t.default=i},10232:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(69153))&&r.__esModule?r:{default:r}).default;t.default=i},95205:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(69862))&&r.__esModule?r:{default:r}).default;t.default=i},59808:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(53817))&&r.__esModule?r:{default:r}).default;t.default=i},70761:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(29578))&&r.__esModule?r:{default:r}).default;t.default=i},3020:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(3412))&&r.__esModule?r:{default:r}).default;t.default=i},58731:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(64882))&&r.__esModule?r:{default:r}).default;t.default=i},40470:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(35376))&&r.__esModule?r:{default:r}).default;t.default=i},31295:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(98856))&&r.__esModule?r:{default:r}).default;t.default=i},56366:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(94325))&&r.__esModule?r:{default:r}).default;t.default=i},71195:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(88429))&&r.__esModule?r:{default:r}).default;t.default=i},23750:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(45450))&&r.__esModule?r:{default:r}).default;t.default=i},2969:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2784))&&r.__esModule?r:{default:r},o=n(86026);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={};["alert","accordion-item","accordion-header","accordion-body","accordion-button","accordion-collapse","accordion","badge","breadcrumb","btn","btn-group","btn-check","btn-toolbar","card","card-columns","card-deck","card-group","card-img","carousel","carousel-caption","carousel-item","col","container","custom","custom-control","custom-control-input","custom-control-label","custom-file-input","custom-file-label","dropdown","dropdown-item","dropdown-menu","dropdown-toggle","fade","figure","figure-caption","figure-img","form","form-check","form-check-input","form-check-label","form-control","form-control-file","form-file-label","form-group","form-label","form-text","img","input-group","jumbotron","list-group","list-group-item","media","modal","modal-body","modal-footer","modal-header","modal-title","nav","navbar","navbar-brand","navbar-collapse","navbar-toggler","nav-item","nav-link","pagination","popover","popover-body","popover-header","progress","row","spinner","tab-content","table","tab-pane","toast","toast-body","toast-header","tooltip"].map((function(e){s[e]="".concat("lds","-").concat(e)}));var l=i.default.forwardRef((function(e,t){var n=a({},e);return i.default.createElement(o.ThemeProvider,a({},n,{prefixes:s,ref:t}))}));t.default=l},77543:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(19701))&&r.__esModule?r:{default:r}).default;t.default=i},76905:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(56562))&&r.__esModule?r:{default:r}).default;t.default=i},15867:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(80408))&&r.__esModule?r:{default:r}).default;t.default=i},93406:(e,t,n)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((r=n(31071))&&r.__esModule?r:{default:r}).default;t.default=i},64711:(e,t,n)=>{"use strict";Object.defineProperty(t,"zx",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"f6",{enumerable:!0,get:function(){return r.default}});var r=N(n(2969)),i=N(n(45798)),o=N(n(53802)),a=N(n(23092)),s=N(n(9909)),l=N(n(49810)),u=N(n(63951)),c=N(n(82165)),d=N(n(38665)),f=N(n(52497)),p=N(n(68102)),h=N(n(57428)),m=N(n(34346)),g=N(n(67521)),y=N(n(2899)),v=N(n(97623)),b=N(n(71450)),_=N(n(10232)),w=N(n(95205)),E=N(n(59808)),S=N(n(70761)),x=N(n(3020)),k=N(n(58731)),T=N(n(40470)),O=N(n(31295)),C=N(n(56366)),A=N(n(23750)),P=N(n(71195)),M=N(n(76905)),D=N(n(15867)),R=N(n(93406)),L=N(n(77543));function N(e){return e&&e.__esModule?e:{default:e}}},73212:(e,t,n)=>{"use strict";t.Z=function(e,t){var n=document.activeElement,r=function(t){if(9===t.keyCode){var n=a(e.querySelectorAll(o)),r=n[0],i=n[n.length-1];t.shiftKey?document.activeElement===r&&(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),r.focus())}},s=a(e.querySelectorAll(o)),l=s[0];if(!s.length)return;(!!t&&!!t.focus?t:l).focus(),e.addEventListener("keydown",r),e.setAttribute("role","dialog"),i.default.isSafari||e.setAttribute("aria-modal","true");return function(t){e.removeEventListener("keydown",r),e.removeAttribute("role"),e.removeAttribute("aria-modal"),(t&&t.focus?t:n).focus()}};var r,i=(r=n(89471))&&r.__esModule?r:{default:r};var o=["a[href]",'input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","area[href]","iframe","object","embed"].join();function a(e){for(var t=[],n=0;n<e.length;n++){e[n].offsetHeight>0&&t.push(e[n])}return t}},14267:(e,t,n)=>{"use strict";n.d(t,{HK:()=>a,gP:()=>l});var r=n(2784);const i={prefix:String(Math.round(1e10*Math.random())),current:0},o=r.createContext(i);function a(e){let t=(0,r.useContext)(o),n=(0,r.useMemo)((()=>({prefix:t===i?"":t.prefix+"-"+ ++t.current,current:0})),[t]);return r.createElement(o.Provider,{value:n},e.children)}let s=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement);function l(e){let t=(0,r.useContext)(o);return t!==i||s||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,r.useMemo)((()=>e||"react-aria"+t.prefix+"-"+ ++t.current),[e])}},33335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);function i(){return(0,r.useState)(null)}},90759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);const i=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t}},27452:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2784),i=n(90759);function o(e){var t=(0,i.Z)(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},71054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2784),i=n(27452);function o(e,t,n,o){void 0===o&&(o=!1);var a=(0,i.Z)(n);(0,r.useEffect)((function(){var n="function"==typeof e?e():e;return n.addEventListener(t,a,o),function(){return n.removeEventListener(t,a,o)}}),[e])}},18919:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);function i(){return(0,r.useReducer)((function(e){return!e}),!1)[1]}},34868:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2784),i=void 0!==n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;const o="undefined"!=typeof document||i?r.useLayoutEffect:r.useEffect},25879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2784),i=function(e){return e&&"function"!=typeof e?function(t){e.current=t}:e};const o=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=i(e),r=i(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])}},56876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);function i(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),t.current}},83679:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);function i(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current=e})),t.current}},50616:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(2784),i=n(56876),o=n(22364),a=Math.pow(2,31)-1;function s(e,t,n){var r=n-Date.now();e.current=r<=a?setTimeout(t,r):setTimeout((function(){return s(e,t,n)}),a)}function l(){var e=(0,i.Z)(),t=(0,r.useRef)();return(0,o.Z)((function(){return clearTimeout(t.current)})),(0,r.useMemo)((function(){var n=function(){return clearTimeout(t.current)};return{set:function(r,i){void 0===i&&(i=0),e()&&(n(),i<=a?t.current=setTimeout(r,i):s(t,r,Date.now()+i))},clear:n}}),[])}},22364:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);function i(e){var t,n,i=(t=e,(n=(0,r.useRef)(t)).current=t,n);(0,r.useEffect)((function(){return function(){return i.current()}}),[])}},9959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(2784),i=(n(33335),n(90759),n(27452));n(71054);n(56876),n(83679);n(34868),new WeakMap;var o=n(47830),a=n(52322);const s=["onKeyDown"];const l=r.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,s);const[l]=(0,o.FT)(Object.assign({tagName:"a"},r)),u=(0,i.Z)((e=>{l.onKeyDown(e),null==n||n(e)}));return((c=r.href)&&"#"!==c.trim()||r.role)&&"button"!==r.role?(0,a.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,a.jsx)("a",Object.assign({ref:t},r,l,{onKeyDown:u}));var c}));l.displayName="Anchor";const u=l},47830:(e,t,n)=>{"use strict";n.d(t,{FT:()=>a,ZP:()=>l});var r=n(2784),i=n(52322);const o=["as","disabled"];function a({tagName:e,disabled:t,href:n,target:r,rel:i,onClick:o,tabIndex:a=0,type:s}){e||(e=null!=n||null!=r||null!=i?"a":"button");const l={tagName:e};if("button"===e)return[{type:s||"button",disabled:t},l];const u=r=>{(t||"a"===e&&function(e){return!e||"#"===e.trim()}(n))&&r.preventDefault(),t?r.stopPropagation():null==o||o(r)};return[{role:"button",disabled:void 0,tabIndex:t?void 0:a,href:"a"===e&&t?void 0:n,target:"a"===e?r:void 0,"aria-disabled":t||void 0,rel:"a"===e?i:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},l]}const s=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,o);const[l,{tagName:u}]=a(Object.assign({tagName:n,disabled:r},s));return(0,i.jsx)(u,Object.assign({},s,l,{ref:t}))}));s.displayName="Button";const l=s},3428:(e,t,n)=>{"use strict";n.d(t,{$F:()=>i,PB:()=>r});function r(e){return`data-rr-ui-${e}`}function i(e){return`rrUi${e}`}},29979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2784).createContext(null)},72758:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h,d:()=>f});var r=n(2784),i=n(33335),o=n(29979),a=n(76051),s=n(76909),l=n(48273),u=n(52322);const c=["children"];const d=()=>{};function f(e={}){const t=(0,r.useContext)(o.Z),[n,u]=(0,i.Z)(),c=(0,r.useRef)(!1),{flip:f,offset:p,rootCloseEvent:h,fixed:m=!1,placement:g,popperConfig:y={},enableEventListeners:v=!0,usePopper:b=!!t}=e,_=null==(null==t?void 0:t.show)?!!e.show:t.show;_&&!c.current&&(c.current=!0);const{placement:w,setMenu:E,menuElement:S,toggleElement:x}=t||{},k=(0,a.Z)(x,S,(0,l.ZP)({placement:g||w||"bottom-start",enabled:b,enableEvents:null==v?_:v,offset:p,flip:f,fixed:m,arrowElement:n,popperConfig:y})),T=Object.assign({ref:E||d,"aria-labelledby":null==x?void 0:x.id},k.attributes.popper,{style:k.styles.popper}),O={show:_,placement:w,hasShown:c.current,toggle:null==t?void 0:t.toggle,popper:b?k:null,arrowProps:b?Object.assign({ref:u},k.attributes.arrow,{style:k.styles.arrow}):{}};return(0,s.Z)(S,(e=>{null==t||t.toggle(!1,e)}),{clickTrigger:h,disabled:!_}),[T,O]}function p(e){let{children:t}=e,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,c);const[r,i]=f(n);return(0,u.jsx)(u.Fragment,{children:t(r,i)})}p.displayName="DropdownMenu",p.defaultProps={usePopper:!0};const h=p},97749:(e,t,n)=>{"use strict";n.d(t,{Jr:()=>u,ZP:()=>d,bt:()=>s});var r=n(2784),i=n(14267),o=n(29979),a=n(52322);const s=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},l=()=>{};function u(){const e=(0,i.gP)(),{show:t=!1,toggle:n=l,setToggle:a,menuElement:u}=(0,r.useContext)(o.Z)||{},c=(0,r.useCallback)((e=>{n(!t,e)}),[t,n]),d={id:e,ref:a||l,onClick:c,"aria-expanded":!!t};return u&&s(u)&&(d["aria-haspopup"]=!0),[d,{show:t,toggle:n}]}function c({children:e}){const[t,n]=u();return(0,a.jsx)(a.Fragment,{children:e(t,n)})}c.displayName="DropdownToggle";const d=c},74111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(48968);function i(e){void 0===e&&(e=(0,r.Z)());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(t){return e.body}}var o=n(18786),a=n(37101),s=n(72487),l=n(2784),u=n(28316),c=n(56876),d=n(22364),f=n(83679),p=n(27452),h=n(86095),m=n(28474),g=n(18204),y=n(52322);const v=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let b;function _(e){const t=(0,g.Z)(),n=e||function(e){return b||(b=new h.Z({ownerDocument:null==e?void 0:e.document})),b}(t),r=(0,l.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,l.useCallback)((e=>{r.current.dialog=e}),[]),setBackdropRef:(0,l.useCallback)((e=>{r.current.backdrop=e}),[])})}const w=(0,l.forwardRef)(((e,t)=>{let{show:n=!1,role:r="dialog",className:h,style:g,children:b,backdrop:w=!0,keyboard:E=!0,onBackdropClick:S,onEscapeKeyDown:x,transition:k,backdropTransition:T,autoFocus:O=!0,enforceFocus:C=!0,restoreFocus:A=!0,restoreFocusOptions:P,renderDialog:M,renderBackdrop:D=(e=>(0,y.jsx)("div",Object.assign({},e))),manager:R,container:L,onShow:N,onHide:I=(()=>{}),onExit:j,onExited:B,onExiting:F,onEnter:Y,onEntering:H,onEntered:V}=e,q=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,v);const U=(0,m.Z)(L),W=_(R),z=(0,c.Z)(),G=(0,f.Z)(n),[$,K]=(0,l.useState)(!n),Z=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,(()=>W),[W]),a.Z&&!G&&n&&(Z.current=i()),k||n||$?n&&$&&K(!1):K(!0);const J=(0,p.Z)((()=>{if(W.add(),re.current=(0,s.Z)(document,"keydown",te),ne.current=(0,s.Z)(document,"focus",(()=>setTimeout(X)),!0),N&&N(),O){const e=i(document);W.dialog&&e&&!(0,o.Z)(W.dialog,e)&&(Z.current=e,W.dialog.focus())}})),Q=(0,p.Z)((()=>{var e;(W.remove(),null==re.current||re.current(),null==ne.current||ne.current(),A)&&(null==(e=Z.current)||null==e.focus||e.focus(P),Z.current=null)}));(0,l.useEffect)((()=>{n&&U&&J()}),[n,U,J]),(0,l.useEffect)((()=>{$&&Q()}),[$,Q]),(0,d.Z)((()=>{Q()}));const X=(0,p.Z)((()=>{if(!C||!z()||!W.isTopModal())return;const e=i();W.dialog&&e&&!(0,o.Z)(W.dialog,e)&&W.dialog.focus()})),ee=(0,p.Z)((e=>{e.target===e.currentTarget&&(null==S||S(e),!0===w&&I())})),te=(0,p.Z)((e=>{E&&27===e.keyCode&&W.isTopModal()&&(null==x||x(e),e.defaultPrevented||I())})),ne=(0,l.useRef)(),re=(0,l.useRef)(),ie=(...e)=>{K(!0),null==B||B(...e)},oe=k;if(!U||!(n||oe&&!$))return null;const ae=Object.assign({role:r,ref:W.setDialogRef,"aria-modal":"dialog"===r||void 0},q,{style:g,className:h,tabIndex:-1});let se=M?M(ae):(0,y.jsx)("div",Object.assign({},ae,{children:l.cloneElement(b,{role:"document"})}));oe&&(se=(0,y.jsx)(oe,{appear:!0,unmountOnExit:!0,in:!!n,onExit:j,onExiting:F,onExited:ie,onEnter:Y,onEntering:H,onEntered:V,children:se}));let le=null;if(w){const e=T;le=D({ref:W.setBackdropRef,onClick:ee}),e&&(le=(0,y.jsx)(e,{appear:!0,in:!!n,children:le}))}return(0,y.jsx)(y.Fragment,{children:u.createPortal((0,y.jsxs)(y.Fragment,{children:[le,se]}),U)})}));w.displayName="Modal";const E=Object.assign(w,{Manager:h.Z})},86095:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8258);const i=(0,n(3428).PB)("modal-open");const o=class{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}={}){this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();e.style={overflow:o.style.overflow,[n]:o.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt((0,r.Z)(o,n)||"0",10)+e.scrollBarWidth}px`),o.setAttribute(i,""),(0,r.Z)(o,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(i),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}},53154:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(58092),i=n(2784),o=n(18919),a=n(25879),s=n(99311),l=n(65590),u=n(90593),c=n(3428),d=n(21528),f=n(52322);const p=["as","onSelect","activeKey","role","onKeyDown"];const h=()=>{},m=(0,c.PB)("event-key"),g=i.forwardRef(((e,t)=>{let{as:n="div",onSelect:d,activeKey:g,role:y,onKeyDown:v}=e,b=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,p);const _=(0,o.Z)(),w=(0,i.useRef)(!1),E=(0,i.useContext)(l.Z),S=(0,i.useContext)(u.Z);let x,k;S&&(y=y||"tablist",g=S.activeKey,x=S.getControlledId,k=S.getControllerId);const T=(0,i.useRef)(null),O=e=>{const t=T.current;if(!t)return null;const n=(0,r.Z)(t,`[${m}]:not([aria-disabled=true])`),i=t.querySelector("[aria-selected=true]");if(!i)return null;const o=n.indexOf(i);if(-1===o)return null;let a=o+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},C=(e,t)=>{null!=e&&(null==d||d(e,t),null==E||E(e,t))};(0,i.useEffect)((()=>{if(T.current&&w.current){const e=T.current.querySelector(`[${m}][aria-selected=true]`);null==e||e.focus()}w.current=!1}));const A=(0,a.Z)(t,T);return(0,f.jsx)(l.Z.Provider,{value:C,children:(0,f.jsx)(s.Z.Provider,{value:{role:y,activeKey:(0,l.h)(g),getControlledId:x||h,getControllerId:k||h},children:(0,f.jsx)(n,Object.assign({},b,{onKeyDown:e=>{if(null==v||v(e),!S)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=O(-1);break;case"ArrowRight":case"ArrowDown":t=O(1);break;default:return}t&&(e.preventDefault(),C(t.dataset[(0,c.$F)("EventKey")]||null,e),w.current=!0,_())},ref:A,role:y}))})})}));g.displayName="Nav";const y=Object.assign(g,{Item:d.Z})},99311:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext(null);r.displayName="NavContext";const i=r},21528:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p,v:()=>d});var r=n(2784),i=n(27452),o=n(99311),a=n(65590),s=n(47830),l=n(3428),u=n(52322);const c=["as","active","eventKey"];function d({key:e,onClick:t,active:n,id:s,role:u,disabled:c}){const d=(0,r.useContext)(a.Z),f=(0,r.useContext)(o.Z);let p=n;const h={role:u};if(f){u||"tablist"!==f.role||(h.role="tab");const t=f.getControllerId(null!=e?e:null),r=f.getControlledId(null!=e?e:null);h[(0,l.PB)("event-key")]=e,h.id=t||s,h["aria-controls"]=r,p=null==n&&null!=e?f.activeKey===e:n}return"tab"===h.role&&(c&&(h.tabIndex=-1,h["aria-disabled"]=!0),p?h["aria-selected"]=p:h.tabIndex=-1),h.onClick=(0,i.Z)((n=>{c||(null==t||t(n),null!=e&&d&&!n.isPropagationStopped()&&d(e,n))})),[h,{isActive:p}]}const f=r.forwardRef(((e,t)=>{let{as:n=s.ZP,active:r,eventKey:i}=e,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,c);const[f,p]=d(Object.assign({key:(0,a.h)(i,o.href),active:r},o));return f[(0,l.PB)("active")]=p.isActive,(0,u.jsx)(n,Object.assign({},o,f,{ref:t}))}));f.displayName="NavItem";const p=f},74135:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2784);const i=function({children:e,in:t,mountOnEnter:n,unmountOnExit:i}){const o=(0,r.useRef)(t);return(0,r.useEffect)((()=>{t&&(o.current=!0)}),[t]),t?e:i||!o.current&&n?null:e}},65590:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,h:()=>i});var r=n(2784);const i=(e,t=null)=>null!=e?String(e):t||null,o=r.createContext(null)},90593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2784).createContext(null)},21371:(e,t,n)=>{"use strict";n.d(t,{W:()=>f,Z:()=>h});var r=n(2784),i=n(90593),o=n(65590),a=n(74135),s=n(52322);const l=["active","eventKey","mountOnEnter","transition","unmountOnExit"],u=["activeKey","getControlledId","getControllerId"],c=["as"];function d(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function f(e){let{active:t,eventKey:n,mountOnEnter:a,transition:s,unmountOnExit:c}=e,f=d(e,l);const p=(0,r.useContext)(i.Z);if(!p)return[f,{eventKey:n,isActive:t,mountOnEnter:a,transition:s,unmountOnExit:c}];const{activeKey:h,getControlledId:m,getControllerId:g}=p,y=d(p,u),v=(0,o.h)(n);return[Object.assign({},f,{id:m(n),"aria-labelledby":g(n)}),{eventKey:n,isActive:null==t&&null!=v?(0,o.h)(h)===v:t,transition:s||y.transition,mountOnEnter:null!=a?a:y.mountOnEnter,unmountOnExit:null!=c?c:y.unmountOnExit}]}const p=r.forwardRef(((e,t)=>{let{as:n="div"}=e,r=d(e,c);const[l,{isActive:u,onEnter:p,onEntering:h,onEntered:m,onExit:g,onExiting:y,onExited:v,mountOnEnter:b,unmountOnExit:_,transition:w=a.Z}]=f(r);return(0,s.jsx)(i.Z.Provider,{value:null,children:(0,s.jsx)(o.Z.Provider,{value:null,children:(0,s.jsx)(w,{in:u,onEnter:p,onEntering:h,onEntered:m,onExit:g,onExiting:y,onExited:v,mountOnEnter:b,unmountOnExit:_,children:(0,s.jsx)(n,Object.assign({},l,{ref:t,role:"tabpanel",hidden:!u,"aria-hidden":!u}))})})})}));p.displayName="TabPanel";const h=p},48983:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(2784),i=n(20267),o=n(14267),a=n(90593),s=n(65590),l=n(21371),u=n(52322);const c=e=>{const{id:t,generateChildId:n,onSelect:l,activeKey:c,defaultActiveKey:d,transition:f,mountOnEnter:p,unmountOnExit:h,children:m}=e,[g,y]=(0,i.$c)(c,d,l),v=(0,o.gP)(t),b=(0,r.useMemo)((()=>n||((e,t)=>v?`${v}-${t}-${e}`:null)),[v,n]),_=(0,r.useMemo)((()=>({onSelect:y,activeKey:g,transition:f,mountOnEnter:p||!1,unmountOnExit:h||!1,getControlledId:e=>b(e,"tabpane"),getControllerId:e=>b(e,"tab")})),[y,g,f,p,h,b]);return(0,u.jsx)(a.Z.Provider,{value:_,children:(0,u.jsx)(s.Z.Provider,{value:y||null,children:m})})};c.Panel=l.Z;const d=c},48273:(e,t,n)=>{"use strict";function r(e={}){return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function i({enabled:e,enableEvents:t,placement:n,flip:i,offset:o,fixed:a,containerPadding:s,arrowElement:l,popperConfig:u={}}){var c,d,f,p;const h=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(u.modifiers);return Object.assign({},u,{placement:n,enabled:e,strategy:a?"fixed":u.strategy,modifiers:r(Object.assign({},h,{eventListeners:{enabled:t},preventOverflow:Object.assign({},h.preventOverflow,{options:s?Object.assign({padding:s},null==(c=h.preventOverflow)?void 0:c.options):null==(d=h.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:o},null==(f=h.offset)?void 0:f.options)},arrow:Object.assign({},h.arrow,{enabled:!!l,options:Object.assign({},null==(p=h.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!i},h.flip)}))})}n.d(t,{ZP:()=>i})},76051:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_e});var r=n(2784),i=Object.prototype.hasOwnProperty;function o(e,t,n){for(n of e.keys())if(a(n,t))return n}function a(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&a(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"==typeof s&&!(s=o(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"==typeof s&&!(s=o(t,s)))return!1;if(!a(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(i.call(e,n)&&++r&&!i.call(t,n))return!1;if(!(n in t)||!a(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}var s=n(56876);const l=function(e){var t=(0,s.Z)();return[e[0],(0,r.useCallback)((function(n){if(t())return e[1](n)}),[t,e[1]])]};function u(e){return e.split("-")[0]}function c(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function d(e){return e instanceof c(e).Element||e instanceof Element}function f(e){return e instanceof c(e).HTMLElement||e instanceof HTMLElement}function p(e){return"undefined"!=typeof ShadowRoot&&(e instanceof c(e).ShadowRoot||e instanceof ShadowRoot)}var h=Math.max,m=Math.min,g=Math.round;function y(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;if(f(e)&&t){var o=e.offsetHeight,a=e.offsetWidth;a>0&&(r=g(n.width)/a||1),o>0&&(i=g(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function v(e){var t=y(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function b(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&p(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _(e){return e?(e.nodeName||"").toLowerCase():null}function w(e){return c(e).getComputedStyle(e)}function E(e){return["table","td","th"].indexOf(_(e))>=0}function S(e){return((d(e)?e.ownerDocument:e.document)||window.document).documentElement}function x(e){return"html"===_(e)?e:e.assignedSlot||e.parentNode||(p(e)?e.host:null)||S(e)}function k(e){return f(e)&&"fixed"!==w(e).position?e.offsetParent:null}function T(e){for(var t=c(e),n=k(e);n&&E(n)&&"static"===w(n).position;)n=k(n);return n&&("html"===_(n)||"body"===_(n)&&"static"===w(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&f(e)&&"fixed"===w(e).position)return null;for(var n=x(e);f(n)&&["html","body"].indexOf(_(n))<0;){var r=w(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function O(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function C(e,t,n){return h(e,m(t,n))}function A(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function P(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var M="top",D="bottom",R="right",L="left",N="auto",I=[M,D,R,L],j="start",B="end",F="viewport",Y="popper",H=I.reduce((function(e,t){return e.concat([t+"-"+j,t+"-"+B])}),[]),V=[].concat(I,[N]).reduce((function(e,t){return e.concat([t,t+"-"+j,t+"-"+B])}),[]),q=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function U(e){return e.split("-")[1]}var W={top:"auto",right:"auto",bottom:"auto",left:"auto"};function z(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,f=e.isFixed,p=a.x,h=void 0===p?0:p,m=a.y,y=void 0===m?0:m,v="function"==typeof d?d({x:h,y}):{x:h,y};h=v.x,y=v.y;var b=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),E=L,x=M,k=window;if(u){var O=T(n),C="clientHeight",A="clientWidth";if(O===c(n)&&"static"!==w(O=S(n)).position&&"absolute"===s&&(C="scrollHeight",A="scrollWidth"),O=O,i===M||(i===L||i===R)&&o===B)x=D,y-=(f&&k.visualViewport?k.visualViewport.height:O[C])-r.height,y*=l?1:-1;if(i===L||(i===M||i===D)&&o===B)E=R,h-=(f&&k.visualViewport?k.visualViewport.width:O[A])-r.width,h*=l?1:-1}var P,N=Object.assign({position:s},u&&W),I=!0===d?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:g(t*r)/r||0,y:g(n*r)/r||0}}({x:h,y}):{x:h,y};return h=I.x,y=I.y,l?Object.assign({},N,((P={})[x]=_?"0":"",P[E]=b?"0":"",P.transform=(k.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",P)):Object.assign({},N,((t={})[x]=_?y+"px":"",t[E]=b?h+"px":"",t.transform="",t))}var G={passive:!0};var $={left:"right",right:"left",bottom:"top",top:"bottom"};function K(e){return e.replace(/left|right|bottom|top/g,(function(e){return $[e]}))}var Z={start:"end",end:"start"};function J(e){return e.replace(/start|end/g,(function(e){return Z[e]}))}function Q(e){var t=c(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function X(e){return y(S(e)).left+Q(e).scrollLeft}function ee(e){var t=w(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function te(e){return["html","body","#document"].indexOf(_(e))>=0?e.ownerDocument.body:f(e)&&ee(e)?e:te(x(e))}function ne(e,t){var n;void 0===t&&(t=[]);var r=te(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=c(r),a=i?[o].concat(o.visualViewport||[],ee(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(ne(x(a)))}function re(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ie(e,t){return t===F?re(function(e){var t=c(e),n=S(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+X(e),y:s}}(e)):d(t)?function(e){var t=y(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):re(function(e){var t,n=S(e),r=Q(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=h(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=h(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+X(e),l=-r.scrollTop;return"rtl"===w(i||n).direction&&(s+=h(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(S(e)))}function oe(e,t,n){var r="clippingParents"===t?function(e){var t=ne(x(e)),n=["absolute","fixed"].indexOf(w(e).position)>=0&&f(e)?T(e):e;return d(n)?t.filter((function(e){return d(e)&&b(e,n)&&"body"!==_(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=ie(e,n);return t.top=h(r.top,t.top),t.right=m(r.right,t.right),t.bottom=m(r.bottom,t.bottom),t.left=h(r.left,t.left),t}),ie(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ae(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?u(i):null,a=i?U(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case M:t={x:s,y:n.y-r.height};break;case D:t={x:s,y:n.y+n.height};break;case R:t={x:n.x+n.width,y:l};break;case L:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?O(o):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case j:t[c]=t[c]-(n[d]/2-r[d]/2);break;case B:t[c]=t[c]+(n[d]/2-r[d]/2)}}return t}function se(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,l=void 0===s?F:s,u=n.elementContext,c=void 0===u?Y:u,f=n.altBoundary,p=void 0!==f&&f,h=n.padding,m=void 0===h?0:h,g=A("number"!=typeof m?m:P(m,I)),v=c===Y?"reference":Y,b=e.rects.popper,_=e.elements[p?v:c],w=oe(d(_)?_:_.contextElement||S(e.elements.popper),a,l),E=y(e.elements.reference),x=ae({reference:E,element:b,strategy:"absolute",placement:i}),k=re(Object.assign({},b,x)),T=c===Y?k:E,O={top:w.top-T.top+g.top,bottom:T.bottom-w.bottom+g.bottom,left:w.left-T.left+g.left,right:T.right-w.right+g.right},C=e.modifiersData.offset;if(c===Y&&C){var L=C[i];Object.keys(O).forEach((function(e){var t=[R,D].indexOf(e)>=0?1:-1,n=[M,D].indexOf(e)>=0?"y":"x";O[e]+=L[n]*t}))}return O}function le(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ue(e){return[M,R,D,L].some((function(t){return e[t]>=0}))}function ce(e,t,n){void 0===n&&(n=!1);var r,i,o=f(t),a=f(t)&&function(e){var t=e.getBoundingClientRect(),n=g(t.width)/e.offsetWidth||1,r=g(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=S(t),l=y(e,a),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!n)&&(("body"!==_(t)||ee(s))&&(u=(r=t)!==c(r)&&f(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:Q(r)),f(t)?((d=y(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):s&&(d.x=X(s))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function de(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var fe={placement:"bottom",modifiers:[],strategy:"absolute"};function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function he(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?fe:i;return function(e,t,n){void 0===n&&(n=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},fe,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],u=!1,c={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;f(),s.options=Object.assign({},o,s.options,i),s.scrollParents={reference:d(e)?ne(e):e.contextElement?ne(e.contextElement):[],popper:ne(t)};var a=function(e){var t=de(e);return q.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=a.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:s,name:t,instance:c,options:r}),a=function(){};l.push(o||a)}})),c.update()},forceUpdate:function(){if(!u){var e=s.elements,t=e.reference,n=e.popper;if(pe(t,n)){s.rects={reference:ce(t,T(n),"fixed"===s.options.strategy),popper:v(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],o=i.fn,a=i.options,l=void 0===a?{}:a,d=i.name;"function"==typeof o&&(s=o({state:s,options:l,name:d,instance:c})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){c.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(i())}))}))),a}),destroy:function(){f(),u=!0}};if(!pe(e,t))return c;function f(){l.forEach((function(e){return e()})),l=[]}return c.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),c}}const me=he({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=se(t,{elementContext:"reference"}),s=se(t,{altBoundary:!0}),l=le(a,r),u=le(s,i,o),c=ue(l),d=ue(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ae({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:u(t.placement),variation:U(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,z(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,z(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=c(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,G)})),s&&l.addEventListener("resize",n.update,G),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,G)})),s&&l.removeEventListener("resize",n.update,G)}},data:{}},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=V.reduce((function(e,n){return e[n]=function(e,t,n){var r=u(e),i=[L,M].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[L,R].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,f=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,m=void 0===h||h,g=n.allowedAutoPlacements,y=t.options.placement,v=u(y),b=l||(v===y||!m?[K(y)]:function(e){if(u(e)===N)return[];var t=K(e);return[J(e),t,J(t)]}(y)),_=[y].concat(b).reduce((function(e,n){return e.concat(u(n)===N?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?V:l,d=U(r),f=d?s?H:H.filter((function(e){return U(e)===d})):I,p=f.filter((function(e){return c.indexOf(e)>=0}));0===p.length&&(p=f);var h=p.reduce((function(t,n){return t[n]=se(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[u(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:d,rootBoundary:f,padding:c,flipVariations:m,allowedAutoPlacements:g}):n)}),[]),w=t.rects.reference,E=t.rects.popper,S=new Map,x=!0,k=_[0],T=0;T<_.length;T++){var O=_[T],C=u(O),A=U(O)===j,P=[M,D].indexOf(C)>=0,B=P?"width":"height",F=se(t,{placement:O,boundary:d,rootBoundary:f,altBoundary:p,padding:c}),Y=P?A?R:L:A?D:M;w[B]>E[B]&&(Y=K(Y));var q=K(Y),W=[];if(o&&W.push(F[C]<=0),s&&W.push(F[Y]<=0,F[q]<=0),W.every((function(e){return e}))){k=O,x=!1;break}S.set(O,W)}if(x)for(var z=function(e){var t=_.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},G=m?3:1;G>0;G--){if("break"===z(G))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,f=n.padding,p=n.tether,g=void 0===p||p,y=n.tetherOffset,b=void 0===y?0:y,_=se(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),w=u(t.placement),E=U(t.placement),S=!E,x=O(w),k="x"===x?"y":"x",A=t.modifiersData.popperOffsets,P=t.rects.reference,N=t.rects.popper,I="function"==typeof b?b(Object.assign({},t.rects,{placement:t.placement})):b,B="number"==typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Y={x:0,y:0};if(A){if(o){var H,V="y"===x?M:L,q="y"===x?D:R,W="y"===x?"height":"width",z=A[x],G=z+_[V],$=z-_[q],K=g?-N[W]/2:0,Z=E===j?P[W]:N[W],J=E===j?-N[W]:-P[W],Q=t.elements.arrow,X=g&&Q?v(Q):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[V],ne=ee[q],re=C(0,P[W],X[W]),ie=S?P[W]/2-K-re-te-B.mainAxis:Z-re-te-B.mainAxis,oe=S?-P[W]/2+K+re+ne+B.mainAxis:J+re+ne+B.mainAxis,ae=t.elements.arrow&&T(t.elements.arrow),le=ae?"y"===x?ae.clientTop||0:ae.clientLeft||0:0,ue=null!=(H=null==F?void 0:F[x])?H:0,ce=z+oe-ue,de=C(g?m(G,z+ie-ue-le):G,z,g?h($,ce):$);A[x]=de,Y[x]=de-z}if(s){var fe,pe="x"===x?M:L,he="x"===x?D:R,me=A[k],ge="y"===k?"height":"width",ye=me+_[pe],ve=me-_[he],be=-1!==[M,L].indexOf(w),_e=null!=(fe=null==F?void 0:F[k])?fe:0,we=be?ye:me-P[ge]-N[ge]-_e+B.altAxis,Ee=be?me+P[ge]+N[ge]-_e-B.altAxis:ve,Se=g&&be?function(e,t,n){var r=C(e,t,n);return r>n?n:r}(we,me,Ee):C(g?we:ye,me,g?Ee:ve);A[k]=Se,Y[k]=Se-me}t.modifiersData[r]=Y}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=u(n.placement),l=O(s),c=[L,R].indexOf(s)>=0?"height":"width";if(o&&a){var d=function(e,t){return A("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:P(e,I))}(i.padding,n),f=v(o),p="y"===l?M:L,h="y"===l?D:R,m=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],g=a[l]-n.rects.reference[l],y=T(o),b=y?"y"===l?y.clientHeight||0:y.clientWidth||0:0,_=m/2-g/2,w=d[p],E=b-f[c]-d[h],S=b/2-f[c]/2+_,x=C(w,S,E),k=l;n.modifiersData[r]=((t={})[k]=x,t.centerOffset=x-S,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&b(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}]}),ge=["enabled","placement","strategy","modifiers"];const ye={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ve={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const e=(t.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));e.length?t.setAttribute("aria-describedby",e.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===i&&"setAttribute"in r){const e=r.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(n.id))return;r.setAttribute("aria-describedby",e?`${e},${n.id}`:n.id)}}},be=[];const _e=function(e,t,n={}){let{enabled:i=!0,placement:o="bottom",strategy:s="absolute",modifiers:u=be}=n,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,ge);const d=(0,r.useRef)(u),f=(0,r.useRef)(),p=(0,r.useCallback)((()=>{var e;null==(e=f.current)||e.update()}),[]),h=(0,r.useCallback)((()=>{var e;null==(e=f.current)||e.forceUpdate()}),[]),[m,g]=l((0,r.useState)({placement:o,update:p,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),y=(0,r.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:e})=>{const t={},n={};Object.keys(e.elements).forEach((r=>{t[r]=e.styles[r],n[r]=e.attributes[r]})),g({state:e,styles:t,attributes:n,update:p,forceUpdate:h,placement:e.placement})}})),[p,h,g]),v=(0,r.useMemo)((()=>(a(d.current,u)||(d.current=u),d.current)),[u]);return(0,r.useEffect)((()=>{f.current&&i&&f.current.setOptions({placement:o,strategy:s,modifiers:[...v,y,ye]})}),[s,o,y,i,v]),(0,r.useEffect)((()=>{if(i&&null!=e&&null!=t)return f.current=me(e,t,Object.assign({},c,{placement:o,strategy:s,modifiers:[...v,ve,y]})),()=>{null!=f.current&&(f.current.destroy(),f.current=void 0,g((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),m}},76909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(18786),i=n(72487),o=n(48968),a=n(2784),s=n(27452),l=n(45982),u=n.n(l);const c=()=>{};const d=e=>e&&("current"in e?e.current:e);const f=function(e,t,{disabled:n,clickTrigger:l="click"}={}){const f=(0,a.useRef)(!1),p=t||c,h=(0,a.useCallback)((t=>{const n=d(e);var i;u()(!!n,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),f.current=!(n&&(i=t,!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey))&&function(e){return 0===e.button}(t)&&!(0,r.Z)(n,t.target))}),[e]),m=(0,s.Z)((e=>{f.current||p(e)})),g=(0,s.Z)((e=>{27===e.keyCode&&p(e)}));(0,a.useEffect)((()=>{if(n||null==e)return;const t=(0,o.Z)(d(e));let r=(t.defaultView||window).event;const a=(0,i.Z)(t,l,h,!0),s=(0,i.Z)(t,l,(e=>{e!==r?m(e):r=void 0})),u=(0,i.Z)(t,"keyup",(e=>{e!==r?g(e):r=void 0}));let f=[];return"ontouchstart"in t.documentElement&&(f=[].slice.call(t.body.children).map((e=>(0,i.Z)(e,"mousemove",c)))),()=>{a(),s(),u(),f.forEach((e=>e()))}}),[e,n,l,h,m,g])}},28474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(48968),i=n(37101),o=n(2784),a=n(18204);const s=(e,t)=>{var n;return i.Z?null==e?(t||(0,r.Z)()).body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};function l(e,t){const n=(0,a.Z)(),[r,i]=(0,o.useState)((()=>s(e,null==n?void 0:n.document)));if(!r){const t=s(e);t&&i(t)}return(0,o.useEffect)((()=>{t&&r&&t(r)}),[t,r]),(0,o.useEffect)((()=>{const t=s(e);t!==r&&i(t)}),[e,r]),r}},18204:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(2784),i=n(37101);const o=(0,r.createContext)(i.Z?window:void 0);o.Provider;function a(){return(0,r.useContext)(o)}},86640:e=>{e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},21778:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li id="').f(t.get(["itemId"],!1),t,"h").w('"><div class="lrn-list-view-item lrn-flyout-wrapper"><div class="lrn-list-view-item-overlay" data-authorapi-selector="item-overlay"></div><div class="lrn-list-view-col lrn-col-xs-2 lrn-col-md-1 lrn-list-view-col-first lrn-author-ui-no-preview"><div class="lrn-list-view-col lrn-col-xs-5 lrn-list-view-col-number"><div class="lrn-check-box-wrapper"><span data-authorapi-selector="activity-item-number">').f(t.get(["number"],!1),t,"h").w('</span>.</div></div><div class="lrn-list-view-col lrn-col-xs-7 lrn-check-box-wrapper"><input type="checkbox" ').x(t.get(["selected"],!1),t,{block:n},{}).w(' class="lrn-check-box-input" name="item-select-for-activity" data-authorapi-selector="select-item-input"><span class="lrn-i-tick lrn-check-box-span" data-authorapi-selector="select-item"></span></div></div><div class="lrn-col-xs-10 lrn-col-md-11 lrn-author-ui-no-preview lrn-list-details"><div class="lrn-list-view-col lrn-col-xs-12 lrn-col-sm-9 lrn-list-view-contracted lrn-author-ui-no-preview"><div class="lrn-row lrn-row-narrow"><div class="lrn-col-xs-3 lrn-col-sm-2 lrn-col-md-2 lrn-col-lg-1 lrn-activity-preview-toggle"><div class="lrn-col-xs-5 lrn-col-md-5 lrn-col-lg-6 lrn-author-inline"><span class="lrn-i lrn-i-drag lrn-i-size-xs"></span></div><div data-authorapi-selector="tooltipped" class="lrn-tooltip-wrapper lrn-col-xs-7 lrn-col-md-7 lrn-col-lg-6 lrn-author-inline"><button type="button" data-authorapi-selector="open-item-preview" class="lrn-btn lrn-btn-default lrn-btn-lg"><span class="lrn-i-preview"></span></button><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"itemPreviewHeading"},"h").w('</p></div></div></div><div class="lrn-col-xs-3 lrn-col-sm-2 lrn-col-md-2 lrn-col-lg-1 lrn-activity-preview-toggle lrn-hide"><div class="lrn-col-xs-4 lrn-col-md-5 lrn-col-lg-6 lrn-author-inline" ></div><div data-authorapi-selector="tooltipped" class="lrn-tooltip-wrapper lrn-col-xs-8 lrn-col-md-7 lrn-col-lg-6 lrn-author-inline"><button type="button" data-authorapi-selector="close-item-preview" class="lrn-btn lrn-btn-default lrn-btn-lg lrn-close-preview"><span class="lrn-i-cross"></span><span class="lrn-spinner-save"></span></button><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"itemClosePreviewHeading"},"h").w('</p></div></div></div><div class="lrn-col-xs-9 lrn-col-md-10 lrn-col-lg-11"><div class="lrn-list-view-heading-wrapper"><div class="lrn-h3 lrn-list-view-heading lrn-ellipses" style="width: 100%;">').f(t.get(["reference"],!1),t,"h").w("</div></div>").x(t.get(["display_content"],!1),t,{block:r},{}).w('<ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["questions"],!1),t,{block:i},{}).w('</ul><div class="lrn-flyout lrn-flyout-left lrn-col-xs-3" data-authorapi-selector="questions-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator lrn-bubble-indicator-background lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" data-authorapi-selector="item-tags-toggle"><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton"},"h").w('</span></button><ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["allQuestions"],!1),t,{block:s},{}).w('</ul></div><ul class="lrn-list-view-labels lrn-list-view-features lrn-list-unstyled">').s(t.get(["features"],!1),t,{block:c},{}).w('</ul><ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').x(t.get(["exceedQuestions"],!1),t,{block:d},{}).w('</ul></div></div></div><div class="lrn-list-view-col lrn-col-xs-none lrn-col-sm-3 lrn-list-view-contracted lrn-author-ui-no-preview"><div class="lrn-list-view-meta"><button type="button" class="lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:h,block:m},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:g,block:y},{}).w('><span class="lrn-i-tag"></span><span>').x(t.get(["noTags"],!1),t,{else:v,block:b},{}).w('</span></button><ul class="lrn-list-unstyled lrn-text-small">').s(t.get(["tags"],!1),t,{block:_},{}).w('</ul></div><div class="lrn-flyout lrn-flyout-right lrn-col-xs-3" data-authorapi-selector="tags-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:k,block:T},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:O,block:C},{}).w('><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton"},"h").w('</span></button><div class="lrn-eq-height-horizontal">').s(t.get(["tagColumns"],!1),t,{block:A},{}).w('</div></div></div></div></div><div class="lrn-list-view-col lrn-col-xs-12 lrn-col-xs-full-width lrn-list-view-extended"><div class="lrn-row lrn-row-narrow"><div class="lrn-col-xs-2 lrn-col-lg-1"></div><div class="lrn-col-xs-10 lrn-col-lg-11"><div data-authorapi-selector="lrn-question-wrapper" class="lrn-question-wrapper"></div></div></div></div></li>')}function n(e,t){return e.w("checked")}function r(e,t){return e.w('<div class="lrn-list-view-desc lrn-ellipses">   ').f(t.get(["display_content"],!1),t,"h").w("</div>")}function i(e,t){return e.w('<li class="lrn-activity-info-label">').h("i18n",t,{},{id:o,defaultValue:a},"h").w("</li>")}function o(e,t){return e.f(t.get(["name"],!1),t,"h")}function a(e,t){return e.f(t.get(["name"],!1),t,"h")}function s(e,t){return e.w('<li class="lrn-activity-info-label">').h("i18n",t,{},{id:l,defaultValue:u},"h").w("</li>")}function l(e,t){return e.f(t.get(["name"],!1),t,"h")}function u(e,t){return e.f(t.get(["name"],!1),t,"h")}function c(e,t){return e.w('<li class="lrn-activity-info-label" aria-label="').f(t.get(["name"],!1),t,"h").w('" title="').f(t.get(["name"],!1),t,"h").w('" data-authorapi-selector="tooltipped"><span class="lrn-i-').f(t.get(["type"],!1),t,"h").w('"></span></li>')}function d(e,t){return e.w('<li><button class="lrn-btn lrn-btn-default lrn-btn-lg lrn-label-action" type="button" data-authorapi-selector="item-questions-toggle">+').h("i18n",t,{},{id:f,defaultValue:p},"h").w("</button></li>")}function f(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function p(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function h(e,t){return e.w(" lrn-bubble-indicator-background ")}function m(e,t){return e.w(" ")}function g(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function y(e,t){return e.w(" disabled ")}function v(e,t){return e.w("<span class='lrn-col-xs-none'>").h("i18n",t,{},{id:"viewAllTagsButton"},"h").w("</span> (").f(t.get(["tagsCount"],!1),t,"h").w(") ")}function b(e,t){return e.w(" ").h("i18n",t,{},{id:"noTagsPlaceholder"},"h").w(" ")}function _(e,t){return e.w('<li class="lrn-text-word-wrap lrn-ellipses"><span class="lrn-text-color-light">').h("i18n",t,{},{id:w,defaultValue:E},"h").w(':</span> <span class="lrn-text-weight-500">').h("i18n",t,{},{id:S,defaultValue:x},"h").w("</span></li>")}function w(e,t){return e.f(t.get(["type"],!1),t,"h")}function E(e,t){return e.f(t.get(["type"],!1),t,"h")}function S(e,t){return e.f(t.get(["name"],!1),t,"h")}function x(e,t){return e.f(t.get(["name"],!1),t,"h")}function k(e,t){return e.w(" lrn-bubble-indicator-background ")}function T(e,t){return e.w(" ")}function O(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function C(e,t){return e.w(" disabled ")}function A(e,t){return e.x(t.get(["column1"],!1),t,{block:P},{}).x(t.get(["column2"],!1),t,{block:I},{}).x(t.get(["column3"],!1),t,{block:V},{})}function P(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column1"],!1),t,{block:M},{}).w("</ol>")}function M(e,t){return e.w("<li>").h("i18n",t,{},{id:D,defaultValue:R},"h").w(": <strong>").h("i18n",t,{},{id:L,defaultValue:N},"h").w("</strong></li>")}function D(e,t){return e.f(t.get(["type"],!1),t,"h")}function R(e,t){return e.f(t.get(["type"],!1),t,"h")}function L(e,t){return e.f(t.get(["name"],!1),t,"h")}function N(e,t){return e.f(t.get(["name"],!1),t,"h")}function I(e,t){return e.w('<ol class="lrn-eq-height-col-horizontal lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column2"],!1),t,{block:j},{}).w("</ol>")}function j(e,t){return e.w("<li>").h("i18n",t,{},{id:B,defaultValue:F},"h").w(": <strong>").h("i18n",t,{},{id:Y,defaultValue:H},"h").w("</strong></li>")}function B(e,t){return e.f(t.get(["type"],!1),t,"h")}function F(e,t){return e.f(t.get(["type"],!1),t,"h")}function Y(e,t){return e.f(t.get(["name"],!1),t,"h")}function H(e,t){return e.f(t.get(["name"],!1),t,"h")}function V(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column3"],!1),t,{block:q},{}).w("</ol>")}function q(e,t){return e.w("<li>").h("i18n",t,{},{id:U,defaultValue:W},"h").w(": <strong>").h("i18n",t,{},{id:z,defaultValue:G},"h").w("</strong></li>")}function U(e,t){return e.f(t.get(["type"],!1),t,"h")}function W(e,t){return e.f(t.get(["type"],!1),t,"h")}function z(e,t){return e.f(t.get(["name"],!1),t,"h")}function G(e,t){return e.f(t.get(["name"],!1),t,"h")}return e.register("activityEdit/activityItem",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,w.__dustBody=!0,E.__dustBody=!0,S.__dustBody=!0,x.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,O.__dustBody=!0,C.__dustBody=!0,A.__dustBody=!0,P.__dustBody=!0,M.__dustBody=!0,D.__dustBody=!0,R.__dustBody=!0,L.__dustBody=!0,N.__dustBody=!0,I.__dustBody=!0,j.__dustBody=!0,B.__dustBody=!0,F.__dustBody=!0,Y.__dustBody=!0,H.__dustBody=!0,V.__dustBody=!0,q.__dustBody=!0,U.__dustBody=!0,W.__dustBody=!0,z.__dustBody=!0,G.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},24863:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<section class="lrn-item-list lrn-item-for-activity-list lrn-author-ui">').x(t.get(["showNavbar"],!1),t,{block:n},{}).x(t.get(["itemBankList"],!1),t,{block:r},{}).x(t.get(["search"],!1),t,{block:i},{}).w('<div data-authorapi-view="pagination-1" class="lrn-item-for-activity-pagination-top lrn-author-ui-no-preview"></div>').x(t.get(["showMessage"],!1),t,{block:o},{}).w('<div data-authorapi-view="items"></div><div data-authorapi-view="pagination-2" class="lrn-author-ui-no-preview"></div></section>')}function n(e,t){return e.w('<div class="lrn-author-ui-no-preview">').p("partials/nav",t,t,{}).w("</div>")}function r(e,t){return e.w('<div class="lrn-tool-panel-itembank-list lrn-tool-panel" data-authorapi-view="itembank-list"></div>')}function i(e,t){return e.w('<div data-authorapi-view="toolbar" class="lrn-author-ui-no-preview"></div>')}function o(e,t){return e.w('<div class="lrn-author-item-picker-message-wrapper" data-authorapi-selector="item-picker-message-wrapper"></div>')}return e.register("activityEdit/itemListForActivityList",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},478:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w("<div>").x(t.get(["hasItems"],!1),t,{else:n,block:a},{}).p("partials/spinner",t,t,{}).w("</div>")}function n(e,t){return e.x(t.get(["hasError"],!1),t,{else:r,block:o},{})}function r(e,t){return e.w('<div class="lrn-list-view-empty lrn-author-ui-no-preview"><span class="lrn-list-view-empty-label">').h("i18n",t,{},{id:"itemListEmptyState"},"h").w('</span><div class="lrn-list-view-empty-img"').x(t.get(["hasCustomEmptyStateImage"],!1),t,{block:i},{}).w("></div></div>")}function i(e,t){return e.w(" style=\"background-image: url('").h("i18n",t,{},{id:"itemListEmptyStateImageURL"},"h").w("')\"")}function o(e,t){return e.w('<div class="lrn-list-view-empty"><div class="lrn-i-exclamation-circle lrn-i-size-xl"></div><div class="lrn-list-view-error-label">').h("i18n",t,{},{id:"itemListErrorState"},"h").w("</div></div>")}function a(e,t){return e.x(t.get(["showHeader"],!1),t,{block:s},{}).w('<ul class="lrn-list-view lrn-list-unstyled lrn-list-divider" data-authorapi-view="item-list"></ul>')}function s(e,t){return e.w('<ul class="lrn-list-view lrn-list-unstyled lrn-list-divider lrn-author-ui-no-preview"><li class="lrn-list-view-item lrn-flyout-wrapper lrn-list-view-item-with-border"><div class="lrn-list-view-col lrn-list-view-select-col"><div class="lrn-check-box-wrapper"><input type="checkbox" class="lrn-check-box-input" ').x(t.get(["allSelected"],!1),t,{block:l},{}).w(' name="item-select-for-activity" data-authorapi-selector="select-all-items-for-activity-input"><span class="lrn-i-tick lrn-check-box-span" data-authorapi-selector="select-all-items-for-activity"></span></div></div><div class="lrn-list-view-col lrn-thin-padding-row"><button type="button" data-authorapi-selector="add-items-to-activity" ').f(t.get(["disabled"],!1),t,"h").w(' class="lrn-btn lrn-btn-primary lrn-btn-lg"><span>').f(t.get(["addItems"],!1),t,"h").w('</span></button></div><div class="lrn-list-view-col lrn-col-xs-full-width lrn-col-xs-12 lrn-success-message-wrapper lrn-thin-padding-row"><div class="lrn-success-message lrn-ellipses" data-authorapi-selector="success-message"><button class="success-message-dummy-button" data-authorapi-selector="success-message-dummy-button"></button><span class="lrn-i-tick"></span><span data-authorapi-selector="success-message-text"></span></div></div></li></ul>')}function l(e,t){return e.w("checked")}return e.register("activityEdit/items",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},66636:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li class="lrn-list-view-item lrn-flyout-wrapper"><div class="lrn-list-view-item-overlay" data-authorapi-selector="item-overlay"></div><div class="lrn-list-view-col ').x(t.get(["multiSelect"],!1),t,{else:n,block:r},{}).w('">').x(t.get(["multiSelect"],!1),t,{else:i,block:l},{}).w('</div><div class="lrn-list-view-item-offset lrn-col-xs-12 lrn-author-flex"><div class="lrn-list-view-col lrn-col-xs-2 lrn-col-sm-2 lrn-col-md-1 lrn-text-align-center lrn-author-ui-no-preview lrn-author-item-picker-preview-toggle-wrapper"><div class="lrn-hide lrn-activity-preview-toggle"><button type="button" data-authorapi-selector="close-item-preview" class="lrn-btn lrn-btn-default lrn-btn-lg lrn-close-preview lrn-btn-save lrn-btn-saving" ').x(t.get(["disablePreviewFlag"],!1),t,{block:c},{}).w('><div data-authorapi-selector="tooltipped"><span class="lrn-i-cross"></span><span class="lrn-spinner-save"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"itemClosePreviewHeading"},"h").w('</p></div></div></button></div><div class="lrn-activity-preview-toggle"><button type="button" data-authorapi-selector="open-item-preview" class="lrn-btn lrn-btn-default lrn-btn-lg"><div data-authorapi-selector="tooltipped"><span class="lrn-i-preview"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"itemPreviewHeading"},"h").w('</p></div></div></button></div></div><div class="lrn-list-view-col lrn-col-xs-10 lrn-col-sm-7 lrn-col-md-8"><div class="lrn-list-view-heading-wrapper lrn-ellipses lrn-reference-for-item-preview"><span class="lrn-h3 lrn-list-view-heading lrn-ellipses">').f(t.get(["itemName"],!1),t,"h").w('</span></div><div class="lrn-list-view-contracted lrn-author-ui-no-preview">').x(t.get(["display_content"],!1),t,{block:d},{}).w('<ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["questions"],!1),t,{block:f},{}).w('</ul><ul class="lrn-list-view-labels lrn-list-view-features lrn-list-unstyled">').s(t.get(["features"],!1),t,{block:m},{}).w("</ul>").x(t.get(["showReference"],!1),t,{block:g},{}).w('<ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').x(t.get(["exceedQuestions"],!1),t,{block:y},{}).w('</ul></div><div class="lrn-list-view-col lrn-col-xs-12 lrn-list-view-extended"><div data-authorapi-selector="lrn-question-wrapper" class="lrn-question-wrapper"></div></div></div><div class="lrn-list-view-col lrn-col-xs-none lrn-col-sm-3 lrn-col-md-3 lrn-list-view-contracted lrn-author-ui-no-preview"><div class="lrn-list-view-meta"><button type="button" class="lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:_,block:w},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:E,block:S},{}).w('><span class="lrn-i-tag"></span><span>').x(t.get(["noTags"],!1),t,{else:x,block:k},{}).w('</span></button><ul class="lrn-list-unstyled lrn-text-small lrn-col-xs-none">').s(t.get(["tags"],!1),t,{block:T},{}).w('</ul></div><div class="lrn-flyout lrn-flyout-right lrn-col-xs-3" data-authorapi-selector="tags-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:M,block:D},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:R,block:L},{}).w('><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton"},"h").w('</span></button><div class="lrn-eq-height-horizontal">').s(t.get(["tagColumns"],!1),t,{block:N},{}).w('</div></div></div></div><div class="lrn-author-ui-no-preview"><div class="lrn-flyout lrn-flyout-left lrn-col-xs-3" data-authorapi-selector="questions-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator lrn-bubble-indicator-background lrn-text-left" aria-label="Number of tags" data-authorapi-selector="item-tags-toggle"><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">Close</span></button><ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["allQuestions"],!1),t,{block:ee},{}).w("</ul></div></div></li>")}function n(e,t){return e.w("lrn-author-margin-left-sm")}function r(e,t){return e.w("lrn-list-view-select-col")}function i(e,t){return e.w('<button type="button" data-authorapi-selector="select-item" class="lrn-btn lrn-btn-primary lrn-btn-lg lrn-question-wrapper-large lrn-author-activity-button" ').x(t.get(["alreadyAdded"],!1),t,{block:o},{}).w('><span class="lrn-i lrn-i-select lrn-i-size-sm lrn-i-top-none"></span><span class="lrn-author-button-text"> ').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w('</span></button><button type="button" data-authorapi-selector="select-item" class="lrn-btn lrn-btn-primary lrn-btn-lg lrn-question-wrapper-md lrn-author-activity-button lrn-tooltip-wrapper" ').x(t.get(["alreadyAdded"],!1),t,{block:a},{}).w('><div data-authorapi-selector="tooltipped"><span class="lrn-i-select"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w('</p></div></div></button><button type="button" data-authorapi-selector="select-item" class="lrn-btn lrn-btn-primary lrn-btn-lg lrn-question-wrapper-sm lrn-author-activity-button lrn-tooltip-wrapper" ').x(t.get(["alreadyAdded"],!1),t,{block:s},{}).w('><div data-authorapi-selector="tooltipped"><span class="lrn-i-select"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w("</p></div></div></button>")}function o(e,t){return e.w("disabled")}function a(e,t){return e.w("disabled")}function s(e,t){return e.w("disabled")}function l(e,t){return e.w('<div class="lrn-check-box-wrapper"><input type="checkbox" ').x(t.get(["selected"],!1),t,{block:u},{}).w(' class="lrn-check-box-input" name="item-select-for-activity" data-authorapi-selector="select-item-input"/><span class="lrn-i-tick lrn-check-box-span" data-authorapi-selector="select-item"></span></div>')}function u(e,t){return e.w("checked")}function c(e,t){return e.w("disabled")}function d(e,t){return e.w('<div class="lrn-list-view-heading-wrapper lrn-text-small"><div class="lrn-list-view-desc lrn-ellipses">').f(t.get(["display_content"],!1),t,"h").w("</div></div>")}function f(e,t){return e.w('<li class="lrn-activity-info-label">').h("i18n",t,{},{id:p,defaultValue:h},"h").w("</li>")}function p(e,t){return e.f(t.get(["name"],!1),t,"h")}function h(e,t){return e.f(t.get(["name"],!1),t,"h")}function m(e,t){return e.w('<li class="lrn-activity-info-label" aria-label="').f(t.get(["name"],!1),t,"h").w('" title="').f(t.get(["name"],!1),t,"h").w('" data-authorapi-selector="tooltipped"><span class="lrn-i-').f(t.get(["type"],!1),t,"h").w('"></span></li>')}function g(e,t){return e.w('<div class="lrn-list-view-heading-wrapper lrn-text-small"><div class="lrn-ellipses" data-authorapi-selector="tooltipped"><div class="lrn-list-view-alternative-reference lrn-ellipses">').f(t.get(["reference"],!1),t,"h").w('</div><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p class="lrn-list-view-alternative-reference-tooltip">').f(t.get(["itemReferenceTooltip"],!1),t,"h").w("</p></div></div></div>")}function y(e,t){return e.w('<li><button class="lrn-btn lrn-btn-default lrn-btn-lg lrn-label-action" type="button" data-authorapi-selector="item-questions-toggle">+').h("i18n",t,{},{id:v,defaultValue:b},"h").w("</button></li>")}function v(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function b(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function _(e,t){return e.w(" lrn-bubble-indicator-background ")}function w(e,t){return e.w(" ")}function E(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function S(e,t){return e.w(" disabled ")}function x(e,t){return e.w("<span class='lrn-col-xs-none'>").h("i18n",t,{},{id:"viewAllTagsButton"},"h").w("</span> (").f(t.get(["tagsCount"],!1),t,"h").w(") ")}function k(e,t){return e.w(" ").h("i18n",t,{},{id:"noTagsPlaceholder"},"h").w(" ")}function T(e,t){return e.w('<li class="lrn-text-word-wrap lrn-ellipses"><span class="lrn-text-color-light">').h("i18n",t,{},{id:O,defaultValue:C},"h").w(':</span> <span class="lrn-text-weight-500">').h("i18n",t,{},{id:A,defaultValue:P},"h").w("</span></li>")}function O(e,t){return e.f(t.get(["type"],!1),t,"h")}function C(e,t){return e.f(t.get(["type"],!1),t,"h")}function A(e,t){return e.f(t.get(["name"],!1),t,"h")}function P(e,t){return e.f(t.get(["name"],!1),t,"h")}function M(e,t){return e.w(" lrn-bubble-indicator-background ")}function D(e,t){return e.w(" ")}function R(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function L(e,t){return e.w(" disabled ")}function N(e,t){return e.x(t.get(["column1"],!1),t,{block:I},{}).x(t.get(["column2"],!1),t,{block:V},{}).x(t.get(["column3"],!1),t,{block:$},{})}function I(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column1"],!1),t,{block:j},{}).w("</ol>")}function j(e,t){return e.w("<li>").h("i18n",t,{},{id:B,defaultValue:F},"h").w(": <strong>").h("i18n",t,{},{id:Y,defaultValue:H},"h").w("</strong></li>")}function B(e,t){return e.f(t.get(["type"],!1),t,"h")}function F(e,t){return e.f(t.get(["type"],!1),t,"h")}function Y(e,t){return e.f(t.get(["name"],!1),t,"h")}function H(e,t){return e.f(t.get(["name"],!1),t,"h")}function V(e,t){return e.w('<ol class="lrn-eq-height-col-horizontal lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column2"],!1),t,{block:q},{}).w("</ol>")}function q(e,t){return e.w("<li>").h("i18n",t,{},{id:U,defaultValue:W},"h").w(": <strong>").h("i18n",t,{},{id:z,defaultValue:G},"h").w("</strong></li>")}function U(e,t){return e.f(t.get(["type"],!1),t,"h")}function W(e,t){return e.f(t.get(["type"],!1),t,"h")}function z(e,t){return e.f(t.get(["name"],!1),t,"h")}function G(e,t){return e.f(t.get(["name"],!1),t,"h")}function $(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column3"],!1),t,{block:K},{}).w("</ol>")}function K(e,t){return e.w("<li>").h("i18n",t,{},{id:Z,defaultValue:J},"h").w(": <strong>").h("i18n",t,{},{id:Q,defaultValue:X},"h").w("</strong></li>")}function Z(e,t){return e.f(t.get(["type"],!1),t,"h")}function J(e,t){return e.f(t.get(["type"],!1),t,"h")}function Q(e,t){return e.f(t.get(["name"],!1),t,"h")}function X(e,t){return e.f(t.get(["name"],!1),t,"h")}function ee(e,t){return e.w('<li class="lrn-activity-info-label">').h("i18n",t,{},{id:te,defaultValue:ne},"h").w("</li>")}function te(e,t){return e.f(t.get(["name"],!1),t,"h")}function ne(e,t){return e.f(t.get(["name"],!1),t,"h")}return e.register("activityEdit/pickerItem",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,w.__dustBody=!0,E.__dustBody=!0,S.__dustBody=!0,x.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,O.__dustBody=!0,C.__dustBody=!0,A.__dustBody=!0,P.__dustBody=!0,M.__dustBody=!0,D.__dustBody=!0,R.__dustBody=!0,L.__dustBody=!0,N.__dustBody=!0,I.__dustBody=!0,j.__dustBody=!0,B.__dustBody=!0,F.__dustBody=!0,Y.__dustBody=!0,H.__dustBody=!0,V.__dustBody=!0,q.__dustBody=!0,U.__dustBody=!0,W.__dustBody=!0,z.__dustBody=!0,G.__dustBody=!0,$.__dustBody=!0,K.__dustBody=!0,Z.__dustBody=!0,J.__dustBody=!0,Q.__dustBody=!0,X.__dustBody=!0,ee.__dustBody=!0,te.__dustBody=!0,ne.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},28129:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-item-bank-list-wrapper lrn-tool-panel"><div><label for="').f(t.get(["viewId"],!1),t,"h").w('_item_bank_list"><span class="lrn-item-bank-list-label">').f(t.get(["label"],!1),t,"h").w('</span></label></div><div class="lrn-item-bank-list-select" data-authorapi-selector="itembank-list-select"><div class="lrn-selected-item-bank" data-authorapi-selector="selected-item-bank"><span data-authorapi-selector="selected-item-bank-span">').f(t.get(["selectedItemBank"],!1),t,"h").w('</span><span class="lrn-i-arrow-small"</span></div><div class="lrn-item-bank-list-popup" data-authorapi-selector="item-list-popup"><span class="lrn-item-bank-list-switch-label">').f(t.get(["switchLabel"],!1),t,"h").w("</span>").s(t.get(["itemBankList"],!1),t,{block:n},{}).w("</div></div></div>")}function n(e,t){return e.w('<div class="lrn-item-bank-list-item ').x(t.get(["isSelected"],!1),t,{block:r},{}).w('" data-name="').f(t.get(["name"],!1),t,"h").w('" data-value="').f(t.get(["index"],!1),t,"h").w('" data-authorapi-selector="item-list-element"><span class="lrn-i-tick"></span>').f(t.get(["name"],!1),t,"h").w("</div>")}function r(e,t){return e.w("lrn-item-bank-list-item-active")}return e.register("activityEdit/toolbar/itemBankList",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},69238:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w("<div>").x(t.get(["hasActivities"],!1),t,{else:n,block:i},{}).w("</div>")}function n(e,t){return e.w('<div class="lrn-list-view-empty"><span class="lrn-list-view-empty-label">').h("i18n",t,{},{id:"activityListEmptyState"},"h").w('</span><div class="lrn-list-view-empty-img"').x(t.get(["hasCustomEmptyStateImage"],!1),t,{block:r},{}).w("></div></div>")}function r(e,t){return e.w(" style=\"background-image: url('").h("i18n",t,{},{id:"activityListEmptyStateImageURL"},"h").w("')\"")}function i(e,t){return e.w('<ul class="lrn-list-view lrn-list-unstyled lrn-list-striped lrn-list-divider" data-authorapi-view="activity-list"></ul>')}return e.register("activityList/activities",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},77318:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li class="lrn-list-view-item lrn-flyout-wrapper" data-authorapi-reference="').f(t.get(["reference"],!1),t,"h").w('"><div class="lrn-list-view-col lrn-col-xs-8 lrn-col-sm-6 lrn-col-lg-8"><div class="lrn-list-view-heading-wrapper lrn-ellipses"><a ').x(t.get(["href"],!1),t,{block:n},{}).w(' type="button" class="lrn-h3 lrn-list-view-heading lrn-ellipses" data-authorapi-selector="open-activity">').f(t.get(["activityName"],!1),t,"h").w('<span class="lrn-i-next"></span></a></div><div class="lrn-list-view-heading-wrapper lrn-text-small">').x(t.get(["description"],!1),t,{block:r},{}).w('</div><ul class="lrn-list-view-labels lrn-list-unstyled"><li><div class="lrn-activity-info-label"><span class="lrn-i-items"></span>').x(t.get(["noItems"],!1),t,{else:i,block:s},{}).w("</div></li><li>").x(t.get(["maxTime"],!1),t,{block:l},{}).w("</li></ul>").x(t.get(["showReference"],!1),t,{block:u},{}).w('</div><div class="lrn-list-view-col lrn-col-xs-none lrn-col-sm-3 lrn-col-lg-2"><div class="lrn-list-view-heading-wrapper-end"><div class="lrn-list-view-time lrn-text-small"><span class="lrn-list-view-modified-time" data-authorapi-selector="tooltipped"><time class="lrn-label lrn-label-action" data-authorapi-selector="activity-utc-time" datetime="').f(t.get(["utcDatetime"],!1),t,"h").w('" data-authorapi-datetime-type="livestamp">').f(t.get(["utcDatetime"],!1),t,"h").w('</time><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p class="lrn-updated-by">').h("i18n",t,{},{id:"itemListAuthorPrep"},"h").w(" ").f(t.get(["user_name"],!1),t,"h").w('</p><time data-authorapi-selector="activity-utc-time" datetime="').f(t.get(["utcDatetime"],!1),t,"h").w('">').f(t.get(["utcDatetime"],!1),t,"h").w("</time></div></span></div>").x(t.get(["showStatus"],!1),t,{block:c},{}).w('</div></div><div class="lrn-list-view-col lrn-col-xs-4 lrn-col-sm-3 lrn-col-lg-2"><div class="lrn-list-view-meta"><button type="button" class="lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:d,block:f},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:p,block:h},{}).w('><span class="lrn-i-tag"></span><span>').x(t.get(["noTags"],!1),t,{else:m,block:g},{}).w('</span></button><ul class="lrn-list-unstyled lrn-text-small">').s(t.get(["tags"],!1),t,{block:y},{}).w('</ul></div><div class="lrn-flyout lrn-flyout-right lrn-col-xs-3" data-authorapi-selector="activity-tags-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:E,block:S},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:x,block:k},{}).w('><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton"},"h").w('</span></button><div class="lrn-eq-height-horizontal">').s(t.get(["tagColumns"],!1),t,{block:T},{}).w("</div></div></div></li>")}function n(e,t){return e.w('href="').f(t.get(["href"],!1),t,"h").w('"')}function r(e,t){return e.w('<div class="lrn-list-view-desc lrn-ellipses">').f(t.get(["description"],!1),t,"h").w("</div>")}function i(e,t){return e.w(" ").f(t.getPath(!1,["data","items","length"]),t,"h").w(" ").x(t.get(["containsOnlyOneItem"],!1),t,{else:o,block:a},{}).w(" ")}function o(e,t){return e.h("i18n",t,{},{id:"activityListPluralItemCounter"},"h")}function a(e,t){return e.h("i18n",t,{},{id:"activityListSingleItemCounter"},"h")}function s(e,t){return e.w(" ").h("i18n",t,{},{id:"activityListEmptyItemCounter"},"h").w(" ")}function l(e,t){return e.w('<div class="lrn-activity-info-label"><span class="lrn-i-time"></span> ').f(t.get(["maxTime"],!1),t,"h").w(" ").h("i18n",t,{},{id:"activityListMinutesCounter"},"h").w("</div>")}function u(e,t){return e.w('<div class="lrn-list-view-heading-wrapper lrn-text-small"><div class="lrn-ellipses" data-authorapi-selector="tooltipped"><div class="lrn-list-view-alternative-reference lrn-ellipses">').f(t.get(["reference"],!1),t,"h").w('</div><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p class="lrn-list-view-alternative-reference-tooltip">').f(t.get(["activityReferenceTooltip"],!1),t,"h").w("</p></div></div></div>")}function c(e,t){return e.w('<div class="lrn-list-view-status"><span class="lrn-badge-round lrn-badge-round-').f(t.getPath(!1,["status","value"]),t,"h").w('" aria-label="').f(t.getPath(!1,["status","value"]),t,"h").w('" data-authorapi-selector="tooltipped" title="').f(t.getPath(!1,["status","label"]),t,"h").w('"><span class="lrn-i-').f(t.getPath(!1,["status","value"]),t,"h").w('"></span></span></div>')}function d(e,t){return e.w(" lrn-bubble-indicator-background ")}function f(e,t){return e.w(" ")}function p(e,t){return e.w(' data-authorapi-selector="activity-tags-toggle"  ')}function h(e,t){return e.w(" disabled ")}function m(e,t){return e.w("<span class='lrn-col-xs-none'>").h("i18n",t,{},{id:"viewAllTagsButton"},"h").w("</span> (").f(t.get(["tagsCount"],!1),t,"h").w(") ")}function g(e,t){return e.w(" ").h("i18n",t,{},{id:"noTagsPlaceholder"},"h").w(" ")}function y(e,t){return e.w('<li class="lrn-text-word-wrap lrn-ellipses"><span class="lrn-text-color-light">').h("i18n",t,{},{id:v,defaultValue:b},"h").w(':</span> <span class="lrn-text-weight-500">').h("i18n",t,{},{id:_,defaultValue:w},"h").w("</span></li>")}function v(e,t){return e.f(t.get(["type"],!1),t,"h")}function b(e,t){return e.f(t.get(["type"],!1),t,"h")}function _(e,t){return e.f(t.get(["name"],!1),t,"h")}function w(e,t){return e.f(t.get(["name"],!1),t,"h")}function E(e,t){return e.w(" lrn-bubble-indicator-background ")}function S(e,t){return e.w(" ")}function x(e,t){return e.w(' data-authorapi-selector="activity-tags-toggle"  ')}function k(e,t){return e.w(" disabled ")}function T(e,t){return e.x(t.get(["column1"],!1),t,{block:O},{}).x(t.get(["column2"],!1),t,{block:R},{}).x(t.get(["column3"],!1),t,{block:F},{})}function O(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column1"],!1),t,{block:C},{}).w("</ol>")}function C(e,t){return e.w("<li>").h("i18n",t,{},{id:A,defaultValue:P},"h").w(": <strong>").h("i18n",t,{},{id:M,defaultValue:D},"h").w("</strong></li>")}function A(e,t){return e.f(t.get(["type"],!1),t,"h")}function P(e,t){return e.f(t.get(["type"],!1),t,"h")}function M(e,t){return e.f(t.get(["name"],!1),t,"h")}function D(e,t){return e.f(t.get(["name"],!1),t,"h")}function R(e,t){return e.w('<ol class="lrn-eq-height-col-horizontal lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column2"],!1),t,{block:L},{}).w("</ol>")}function L(e,t){return e.w("<li>").h("i18n",t,{},{id:N,defaultValue:I},"h").w(": <strong>").h("i18n",t,{},{id:j,defaultValue:B},"h").w("</strong></li>")}function N(e,t){return e.f(t.get(["type"],!1),t,"h")}function I(e,t){return e.f(t.get(["type"],!1),t,"h")}function j(e,t){return e.f(t.get(["name"],!1),t,"h")}function B(e,t){return e.f(t.get(["name"],!1),t,"h")}function F(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column3"],!1),t,{block:Y},{}).w("</ol>")}function Y(e,t){return e.w("<li>").h("i18n",t,{},{id:H,defaultValue:V},"h").w(": <strong>").h("i18n",t,{},{id:q,defaultValue:U},"h").w("</strong></li>")}function H(e,t){return e.f(t.get(["type"],!1),t,"h")}function V(e,t){return e.f(t.get(["type"],!1),t,"h")}function q(e,t){return e.f(t.get(["name"],!1),t,"h")}function U(e,t){return e.f(t.get(["name"],!1),t,"h")}return e.register("activityList/activity",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,w.__dustBody=!0,E.__dustBody=!0,S.__dustBody=!0,x.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,O.__dustBody=!0,C.__dustBody=!0,A.__dustBody=!0,P.__dustBody=!0,M.__dustBody=!0,D.__dustBody=!0,R.__dustBody=!0,L.__dustBody=!0,N.__dustBody=!0,I.__dustBody=!0,j.__dustBody=!0,B.__dustBody=!0,F.__dustBody=!0,Y.__dustBody=!0,H.__dustBody=!0,V.__dustBody=!0,q.__dustBody=!0,U.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},97525:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<section class="lrn-activity-list lrn-author-ui lrn-author-ui-no-preview"><div data-authorapi-view="activity-list-toolbar"></div><div data-authorapi-view="activity-list-pagination-1"></div><div data-authorapi-view="activities"></div><div data-authorapi-view="activity-list-pagination-2"></div></section>')}return e.register("activityList/activityList",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},36605:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-tool-panel"><div class="lrn-tool-panel-search"><div data-authorapi-view="activity-list-search"></div><div data-authorapi-view="activity-list-state"></div></div></div>')}return e.register("activityList/toolbar",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},19358:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<button class="lrn-popup-close lrn-i-cross" type="button" data-authorapi-selector="hide-advanced" data-authorapi-target="search-advanced" aria-label="Close advanced search"></button><div class="lrn-form-group"><label for="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref_adv"><span class="lrn-form-label-name">').f(t.get(["searchStringName"],!1),t,"h").w(':</span></label><div class="lrn-form-control-wrapper"><input id="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref_adv"type="text"placeholder="').h("i18n",t,{},{id:"searchPlaceholder"},"h").w('"name="').x(t.get(["showTitle"],!1),t,{else:n,block:r},{}).w('"class="lrn-form-control"data-authorapi-selector="search-basic-input"value="').x(t.get(["showTitle"],!1),t,{else:i,block:o},{}).w('"maxlength="250" /></div></div>')}function n(e,t){return e.w("referenceOrDescription")}function r(e,t){return e.w("titleOrReferenceOrDescription")}function i(e,t){return e.f(t.get(["referenceOrDescription"],!1),t,"h")}function o(e,t){return e.f(t.get(["titleOrReferenceOrDescription"],!1),t,"h")}return e.register("activityList/toolbar/basicSearch",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},23805:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<form action="#" class="lrn-form lrn-form-list-search"><div class="lrn-row lrn-row-narrow">').s(t.get(["largeViewport"],!1),t,{block:n},{}).s(t.get(["mediumViewport"],!1),t,{block:c},{}).s(t.get(["smallViewport"],!1),t,{block:g},{}).w('<div class="').x(t.get(["add"],!1),t,{else:x,block:k},{}).w(' lrn-tag-search-large">').x(t.get(["search"],!1),t,{block:T},{}).w('</div><div class="').x(t.get(["add"],!1),t,{else:C,block:A},{}).w('">').p("partials/searchAndNewButton",t,t,{}).w("</div></div></form>")}function n(e,t){return e.w('<div class="').x(t.get(["add"],!1),t,{else:r,block:i},{}).w(' lrn-search-large" data-authorapi-selector="activity-search">').x(t.get(["search"],!1),t,{block:o},{}).w("</div>")}function r(e,t){return e.w(" lrn-col-xs-5 ")}function i(e,t){return e.w("lrn-col-xs-4 ")}function o(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').f(t.get(["searchStringName"],!1),t,"h").w(':</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div class="lrn-input-group lrn-input-group-lg"><input id="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref"type="text"placeholder="').h("i18n",t,{},{id:"searchPlaceholder"},"h").w('"name="').x(t.get(["showTitle"],!1),t,{else:a,block:s},{}).w('"class="lrn-form-control-padded"data-authorapi-selector="search-basic-input"value="').x(t.get(["showTitle"],!1),t,{else:l,block:u},{}).w('"maxlength="250" /><button class="lrn-input-group-btn"type="button"data-authorapi-selector="expand-advanced"data-authorapi-target="search-advanced"aria-label="Show advanced search"><span class="lrn-i-arrow-small"></span></button></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="search-advanced">').p("activityList/toolbar/basicSearch",t,t,{}).p("partials/toolbar/searchStatus",t,t,{}).w('<div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-i-search lrn-col-xs-2"></button></div></div></div></div>')}function a(e,t){return e.w("referenceOrDescription")}function s(e,t){return e.w("titleOrReferenceOrDescription")}function l(e,t){return e.f(t.get(["referenceOrDescription"],!1),t,"h")}function u(e,t){return e.f(t.get(["titleOrReferenceOrDescription"],!1),t,"h")}function c(e,t){return e.w('<div class="lrn-col-xs-8 lrn-search-medium" data-authorapi-selector="activity-search">').x(t.get(["search"],!1),t,{block:d},{}).w("</div>")}function d(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').f(t.get(["searchStringName"],!1),t,"h").w(':</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div class="lrn-input-group lrn-input-group-lg"><input id="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref"type="text"placeholder="').h("i18n",t,{},{id:"searchPlaceholder"},"h").w('"name="').x(t.get(["showTitle"],!1),t,{else:f,block:p},{}).w('"class="lrn-form-control-padded"data-authorapi-selector="search-basic-input"value="').x(t.get(["showTitle"],!1),t,{else:h,block:m},{}).w('"maxlength="250"><button class="lrn-input-group-btn"type="button"data-authorapi-selector="expand-advanced"data-authorapi-target="search-advanced"aria-label="Show advanced search"><span class="lrn-i-arrow-small"></span></button></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="search-advanced">').p("activityList/toolbar/basicSearch",t,t,{}).p("partials/tagSearch",t,t,{}).p("partials/toolbar/searchStatus",t,t,{}).w('<div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-i-search lrn-col-xs-2"></button></div></div></div></div>')}function f(e,t){return e.w("referenceOrDescription")}function p(e,t){return e.w("titleOrReferenceOrDescription")}function h(e,t){return e.f(t.get(["referenceOrDescription"],!1),t,"h")}function m(e,t){return e.f(t.get(["titleOrReferenceOrDescription"],!1),t,"h")}function g(e,t){return e.w('<div class="').x(t.get(["add"],!1),t,{else:y,block:v},{}).w(' lrn-search-small" data-authorapi-selector="activity-search">').x(t.get(["search"],!1),t,{block:b},{}).w("</div>")}function y(e,t){return e.w("lrn-col-xs-8 lrn-col-sm-8")}function v(e,t){return e.w("lrn-col-xs-6 lrn-col-sm-8")}function b(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').f(t.get(["searchStringName"],!1),t,"h").w(':</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div class="lrn-input-group lrn-input-group-lg"><input id="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-ref"type="text"placeholder="').h("i18n",t,{},{id:"searchPlaceholder"},"h").w('"name="').x(t.get(["showTitle"],!1),t,{else:_,block:w},{}).w('"class="lrn-form-control-padded"data-authorapi-selector="search-basic-input"value="').x(t.get(["showTitle"],!1),t,{else:E,block:S},{}).w('"maxlength="250"><button class="lrn-input-group-btn"type="button"data-authorapi-selector="expand-advanced"data-authorapi-target="search-advanced"aria-label="Show advanced search"><span class="lrn-i-arrow-small"></span></button></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="search-advanced">').p("activityList/toolbar/basicSearch",t,t,{}).p("partials/tagSearch",t,t,{}).p("partials/toolbar/searchStatus",t,t,{}).w('<div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-i-search lrn-col-xs-4 lrn-col-sm-2"></button></div></div></div></div>')}function _(e,t){return e.w("referenceOrDescription")}function w(e,t){return e.w("titleOrReferenceOrDescription")}function E(e,t){return e.f(t.get(["referenceOrDescription"],!1),t,"h")}function S(e,t){return e.f(t.get(["titleOrReferenceOrDescription"],!1),t,"h")}function x(e,t){return e.w("lrn-col-xs-4 lrn-col-lg-5")}function k(e,t){return e.w("lrn-col-xs-4 lrn-col-lg-4")}function T(e,t){return e.w('<div class="lrn-form-group"><label class="lrn-form-label lrn-form-label-item-list-toolbar" for="').f(t.get(["basicTagsId"],!1),t,"h").w('"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchTags"},"h").w('</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div data-authorapi-view="tags-all" data-authorapi-tag-search="basic"></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="tags-advanced"><button class="lrn-popup-close lrn-i-cross" type="button" data-authorapi-selector="hide-advanced" data-authorapi-target="tags-advanced" aria-label="Close tag advanced search"></button>').s(t.get(["largeViewport"],!1),t,{block:O},{}).w('<div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-i-search lrn-col-xs-2"></button></div></div></div></div>')}function O(e,t){return e.p("partials/tagSearch",t,t,{})}function C(e,t){return e.w(" lrn-col-xs-4 lrn-col-sm-4 lrn-col-lg-2 ")}function A(e,t){return e.w(" lrn-col-xs-6 lrn-col-sm-4 lrn-col-lg-4 ")}return e.register("activityList/toolbar/search",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,w.__dustBody=!0,E.__dustBody=!0,S.__dustBody=!0,x.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,O.__dustBody=!0,C.__dustBody=!0,A.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},33613:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-author-loading-panel lrn-hide">').p("partials/spinner",t,t,{}).w("</div>")}return e.register("components/loadingPanel",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},24029:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-author-modal-wrapper"><div class="lrn-modal" data-authorapi-selector="modal"><div class="lrn-modal-dialog" data-authorapi-selector="modal-dialog"><div class="lrn-author-ui lrn-author-ui-no-preview"><div class="lrn-modal-header lrn-author-flex lrn-author-flex-center lrn-author-align-items-center">').x(t.get(["modalTitle"],!1),t,{block:n},{}).w('<button type="button" class="lrn-button lrn-modal-button-close" data-authorapi-action="modal-close"><span class="lrn-sr-only">').h("i18n",t,{},{id:"modalClose"},"h").w('</span><span aria-role="presentation" class="lrn-i-cross"></span></button></div></div><div class="lrn-modal-outlet ').x(t.get(["addUiClassToModalOutlet"],!1),t,{block:r},{}).w('" data-authorapi-selector="modal-outlet"></div></div></div><div class="lrn-modal-overlay" data-authorapi-selector="modal-overlay"></div></div>')}function n(e,t){return e.w('<div class="lrn-text-center lrn-h4 lrn-section-header lrn-author-padding-top-sm">').f(t.get(["modalTitle"],!1),t,"h").w("</div>")}function r(e,t){return e.w("lrn-author-ui lrn-author-ui-no-preview")}return e.register("components/modal",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},84330:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li class="lrn-list-view-item lrn-flyout-wrapper">').x(t.get(["selectEnabled"],!1),t,{block:n},{}).w('<div class="lrn-list-view-col lrn-col-xs-8 lrn-col-sm-6 lrn-col-lg-8"><div class="lrn-list-view-heading-wrapper"><a ').x(t.get(["href"],!1),t,{block:i},{}).w(' type="button" class="lrn-h3 lrn-list-view-heading lrn-ellipses" data-authorapi-selector="open-item">').f(t.get(["itemName"],!1),t,"h").w('<span class="lrn-i-next"></span></a></div><div class="lrn-list-view-heading-wrapper lrn-text-small">').x(t.get(["display_content"],!1),t,{block:o},{}).w('</div><ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["questions"],!1),t,{block:a},{}).x(t.get(["exceedQuestions"],!1),t,{block:u},{}).w('</ul><ul class="lrn-list-view-labels lrn-list-unstyled lrn-list-view-features">').s(t.get(["features"],!1),t,{block:f},{}).w("</ul>").x(t.get(["showReference"],!1),t,{block:p},{}).w('</div><div class="lrn-list-view-col lrn-col-xs-none lrn-col-sm-3 lrn-col-lg-2"><div class="lrn-list-view-heading-wrapper-end"><span class="lrn-list-view-modified-time" data-authorapi-selector="tooltipped"><time class="lrn-label lrn-label-action" data-authorapi-selector="utc-time" datetime="').f(t.get(["utcDatetime"],!1),t,"h").w('" data-authorapi-datetime-type="livestamp">').f(t.get(["utcDatetime"],!1),t,"h").w('</time><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p class="lrn-updated-by">').h("i18n",t,{},{id:"itemListAuthorPrep"},"h").w(" ").f(t.get(["user_name"],!1),t,"h").w('</p><time data-authorapi-selector="utc-time" datetime="').f(t.get(["utcDatetime"],!1),t,"h").w('">').f(t.get(["utcDatetime"],!1),t,"h").w("</time></div></span>").x(t.getPath(!1,["config","status"]),t,{block:h},{}).w("</div>").x(t.get(["workflowState"],!1),t,{block:m},{}).w('</div><div class="lrn-list-view-col lrn-col-xs-4 lrn-col-sm-3 lrn-col-lg-2"><div class="lrn-list-view-meta"><button type="button" class="lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:g,block:y},{}).w(' lrn-text-left" aria-label="Number of tags" ').x(t.get(["noTags"],!1),t,{else:v,block:b},{}).w('><span class="lrn-i-tag"></span><span>').x(t.get(["noTags"],!1),t,{else:_,block:w},{}).w('</span></button><ul class="lrn-list-unstyled lrn-text-small">').s(t.get(["tags"],!1),t,{block:E},{}).w('</ul></div><div class="lrn-flyout lrn-flyout-right lrn-col-xs-3" data-authorapi-selector="tags-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator ').x(t.get(["noTags"],!1),t,{else:O,block:C},{}).w(' lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel",defaultValue:"Number of tags"},"h").w('" ').x(t.get(["noTags"],!1),t,{else:A,block:P},{}).w('><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton",defaultValue:"Close"},"h").w('</span></button><div class="lrn-eq-height-horizontal">').s(t.get(["tagColumns"],!1),t,{block:M},{}).w("</div></div></div>").x(t.get(["selectEnabled"],!1),t,{block:Z},{}).w('<div class="lrn-flyout lrn-flyout-left lrn-col-xs-3" data-authorapi-selector="questions-flyout"><button type="button" class="lrn-btn-full-width lrn-bubble-indicator lrn-bubble-indicator-background lrn-text-left" aria-label="').h("i18n",t,{},{id:"tagCountAriaLabel",defaultValue:"Number of tags"},"h").w('" data-authorapi-selector="item-tags-toggle"><span class="lrn-i-cross lrn-text-align-right"></span><span class="lrn-text-align-left">').h("i18n",t,{},{id:"tagFlyoutCloseButton",defaultValue:"Close"},"h").w('</span></button><ul class="lrn-list-view-labels lrn-list-unstyled lrn-text-small">').s(t.get(["allQuestions"],!1),t,{block:J},{}).w("</ul></div></li>")}function n(e,t){return e.w('<div class="lrn-list-view-col lrn-list-view-select-col"><div class="lrn-check-box-wrapper"><input type="checkbox" ').x(t.get(["selected"],!1),t,{block:r},{}).w(' class="lrn-check-box-input" name="item-select-for-item-list" data-authorapi-selector="select-item-input"/><span class="lrn-i-tick lrn-check-box-span" data-authorapi-selector="select-item"></span></div></div><div class="lrn-list-view-item-offset lrn-col-xs-12 lrn-author-flex">')}function r(e,t){return e.w("checked")}function i(e,t){return e.w('href="').f(t.get(["href"],!1),t,"h").w('"')}function o(e,t){return e.w('<div class="lrn-list-view-desc lrn-ellipses">').f(t.get(["display_content"],!1),t,"h").w("</div>")}function a(e,t){return e.w('<li class="lrn-list-info-label">').h("i18n",t,{},{id:s,defaultValue:l},"h").w("</li>")}function s(e,t){return e.f(t.get(["name"],!1),t,"h")}function l(e,t){return e.f(t.get(["name"],!1),t,"h")}function u(e,t){return e.w('<li><button class="lrn-list-info-label lrn-label-action" type="button" data-authorapi-selector="item-questions-toggle">+ ').h("i18n",t,{},{id:c,defaultValue:d},"h").w("</button></li>")}function c(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function d(e,t){return e.f(t.get(["exceedQuestions"],!1),t,"h")}function f(e,t){return e.w('<li class="lrn-list-info-label lrn-label-action" aria-label="').f(t.get(["name"],!1),t,"h").w('" title="').f(t.get(["name"],!1),t,"h").w('" data-authorapi-selector="tooltipped"><span class="lrn-i-').f(t.get(["type"],!1),t,"h").w('"></span></li>')}function p(e,t){return e.w('<div class="lrn-list-view-heading-wrapper lrn-text-small"><div class="lrn-ellipses" data-authorapi-selector="tooltipped"><div class="lrn-list-view-alternative-reference lrn-ellipses">').f(t.get(["reference"],!1),t,"h").w('</div><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p class="lrn-list-view-alternative-reference-tooltip">').f(t.get(["itemReferenceTooltip"],!1),t,"h").w("</p></div></div></div>")}function h(e,t){return e.w('<div class="lrn-list-view-status"><span class="lrn-badge-round lrn-badge-round-').f(t.getPath(!1,["status","value"]),t,"h").w('" aria-label="').f(t.getPath(!1,["status","value"]),t,"h").w('" data-authorapi-selector="tooltipped" title="').f(t.getPath(!1,["status","label"]),t,"h").w('"><span class="lrn-i-').f(t.getPath(!1,["status","value"]),t,"h").w('"></span></span></div>')}function m(e,t){return e.w('<div class="lrn-list-view-heading-wrapper-end"><span class="lrn-list-view-workflow-state lrn-col-xs-none"><span class="lrn-label lrn-text-no-wrap lrn-ellipses lrn-text-small">').f(t.get(["workflowState"],!1),t,"h").w("</span></span></div>")}function g(e,t){return e.w(" lrn-bubble-indicator-background ")}function y(e,t){return e.w(" ")}function v(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function b(e,t){return e.w(" disabled ")}function _(e,t){return e.w("<span class='lrn-col-xs-none'>").h("i18n",t,{},{id:"viewAllTagsButton",defaultValue:"All Tags"},"h").w("</span> (").f(t.get(["tagsCount"],!1),t,"h").w(")")}function w(e,t){return e.h("i18n",t,{},{id:"noTagsPlaceholder",defaultValue:"No Tags"},"h")}function E(e,t){return e.w('<li class="lrn-text-word-wrap lrn-ellipses"><span class="lrn-text-color-light">').h("i18n",t,{},{id:S,defaultValue:x},"h").w(':</span> <span class="lrn-text-weight-500">').h("i18n",t,{},{id:k,defaultValue:T},"h").w("</span></li>")}function S(e,t){return e.f(t.get(["type"],!1),t,"h")}function x(e,t){return e.f(t.get(["type"],!1),t,"h")}function k(e,t){return e.f(t.get(["name"],!1),t,"h")}function T(e,t){return e.f(t.get(["name"],!1),t,"h")}function O(e,t){return e.w(" lrn-bubble-indicator-background ")}function C(e,t){return e.w(" ")}function A(e,t){return e.w(' data-authorapi-selector="item-tags-toggle"  ')}function P(e,t){return e.w(" disabled ")}function M(e,t){return e.x(t.get(["column1"],!1),t,{block:D},{}).x(t.get(["column2"],!1),t,{block:B},{}).x(t.get(["column3"],!1),t,{block:U},{})}function D(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column1"],!1),t,{block:R},{}).w("</ol>")}function R(e,t){return e.w("<li>").h("i18n",t,{},{id:L,defaultValue:N},"h").w(": <strong>").h("i18n",t,{},{id:I,defaultValue:j},"h").w("</strong></li>")}function L(e,t){return e.f(t.get(["type"],!1),t,"h")}function N(e,t){return e.f(t.get(["type"],!1),t,"h")}function I(e,t){return e.f(t.get(["name"],!1),t,"h")}function j(e,t){return e.f(t.get(["name"],!1),t,"h")}function B(e,t){return e.w('<ol class="lrn-eq-height-col-horizontal lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column2"],!1),t,{block:F},{}).w("</ol>")}function F(e,t){return e.w("<li>").h("i18n",t,{},{id:Y,defaultValue:H},"h").w(": <strong>").h("i18n",t,{},{id:V,defaultValue:q},"h").w("</strong></li>")}function Y(e,t){return e.f(t.get(["type"],!1),t,"h")}function H(e,t){return e.f(t.get(["type"],!1),t,"h")}function V(e,t){return e.f(t.get(["name"],!1),t,"h")}function q(e,t){return e.f(t.get(["name"],!1),t,"h")}function U(e,t){return e.w('<ol class="lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12">').s(t.get(["column3"],!1),t,{block:W},{}).w("</ol>")}function W(e,t){return e.w("<li>").h("i18n",t,{},{id:z,defaultValue:G},"h").w(": <strong>").h("i18n",t,{},{id:$,defaultValue:K},"h").w("</strong></li>")}function z(e,t){return e.f(t.get(["type"],!1),t,"h")}function G(e,t){return e.f(t.get(["type"],!1),t,"h")}function $(e,t){return e.f(t.get(["name"],!1),t,"h")}function K(e,t){return e.f(t.get(["name"],!1),t,"h")}function Z(e,t){return e.w("</div>")}function J(e,t){return e.w('<li class="lrn-list-info-label">').h("i18n",t,{},{id:Q,defaultValue:X},"h").w("</li>")}function Q(e,t){return e.f(t.get(["name"],!1),t,"h")}function X(e,t){return e.f(t.get(["name"],!1),t,"h")}return e.register("itemList/item",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,w.__dustBody=!0,E.__dustBody=!0,S.__dustBody=!0,x.__dustBody=!0,k.__dustBody=!0,T.__dustBody=!0,O.__dustBody=!0,C.__dustBody=!0,A.__dustBody=!0,P.__dustBody=!0,M.__dustBody=!0,D.__dustBody=!0,R.__dustBody=!0,L.__dustBody=!0,N.__dustBody=!0,I.__dustBody=!0,j.__dustBody=!0,B.__dustBody=!0,F.__dustBody=!0,Y.__dustBody=!0,H.__dustBody=!0,V.__dustBody=!0,q.__dustBody=!0,U.__dustBody=!0,W.__dustBody=!0,z.__dustBody=!0,G.__dustBody=!0,$.__dustBody=!0,K.__dustBody=!0,Z.__dustBody=!0,J.__dustBody=!0,Q.__dustBody=!0,X.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},79791:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<section class="lrn-item-list lrn-author-ui lrn-author-ui-no-preview"><div data-authorapi-view="toolbar"></div><div data-authorapi-view="pagination-1"></div><div data-authorapi-view="items"></div><div data-authorapi-view="pagination-2"></div></section>')}return e.register("itemList/itemList",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},86935:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w("<div>").x(t.get(["hasItems"],!1),t,{else:n,block:a},{}).p("partials/spinner",t,t,{}).w("</div>")}function n(e,t){return e.x(t.get(["hasError"],!1),t,{else:r,block:o},{})}function r(e,t){return e.w('<div class="lrn-list-view-empty"><span class="lrn-list-view-empty-label">').h("i18n",t,{},{id:"itemListEmptyState"},"h").w('</span><div class="lrn-list-view-empty-img"').x(t.get(["hasCustomEmptyStateImage"],!1),t,{block:i},{}).w("></div></div>")}function i(e,t){return e.w(" style=\"background-image: url('").h("i18n",t,{},{id:"itemListEmptyStateImageURL"},"h").w("')\"")}function o(e,t){return e.w('<div class="lrn-list-view-empty"><div class="lrn-i-exclamation-circle lrn-i-size-xl"></div><div class="lrn-list-view-error-label">').h("i18n",t,{},{id:"itemListErrorState"},"h").w("</div></div>")}function a(e,t){return e.w('<ul class="lrn-list-view lrn-list-unstyled lrn-list-striped lrn-list-divider" data-authorapi-view="item-list"></ul>')}return e.register("itemList/items",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},10836:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-tool-panel"><div class="lrn-tool-panel-search"><div data-authorapi-view="search"></div><div data-authorapi-view="state"></div></div>').x(t.get(["add"],!1),t,{block:n},{}).w("</div>")}function n(e,t){return e.w('<div class="lrn-tool-panel-new"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-full-width" data-authorapi-selector="toolbar-new-item-btn"><span class="lrn-i-plus-small"></span>').h("i18n",t,{},{id:"itemListNewItemButton"},"h").w("</button></div>")}return e.register("itemList/toolbar",t),t.__dustBody=!0,n.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},24970:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchHierarchy"},"h").w(':</span></label><div data-authorapi-selector="hierarchy-dropdown-wrapper"></div></div><div class="lrn-hierarchy-tags" data-authorapi-selector="hierarchy-tags-wrapper"></div><div data-authorapi-selector="hierarchy-tags-spinner"></div>')}return e.register("itemList/toolbar/hierarchySelect",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},55681:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('-tag-select"><span class="lrn-form-label-name">').f(t.get(["type"],!1),t,"h").w('</span></label><div data-authorapi-selector="dropdown-wrapper"></div></div><div data-authorapi-selector="hierarchy-tags-wrapper"></div><div data-authorapi-selector="hierarchy-tags-spinner"></div>')}return e.register("itemList/toolbar/hierarchyTagSelect",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},54712:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-search-hierarchy-spinner">').p("partials/spinner",t,t,{}).w("</div>")}return e.register("itemList/toolbar/hierarchyTagSpinner",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},75711:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<form action="#" class="lrn-form lrn-form-list-search"><div class="lrn-author-flex-toolbar">').x(t.get(["showStandardsButton"],!1),t,{block:n},{}).x(t.get(["showHierarchy"],!1),t,{block:r},{}).x(t.get(["showGeneralSearch"],!1),t,{block:i},{}).x(t.get(["showTagSearch"],!1),t,{block:o},{}).x(t.get(["search"],!1),t,{block:a},{}).x(t.get(["add"],!1),t,{block:s},{}).w("</div></form>")}function n(e,t){return e.w('<div class="lrn-author-standards-button-wrapper lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-sm" data-authorapi-selector="standards-button-wrapper"></div>')}function r(e,t){return e.w('<div class="lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-lg lrn-author-flex-toolbar-item-expand">').p("partials/toolbar/searchHierarchy",t,t,{}).w("</div>")}function i(e,t){return e.w('<div class="lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-lg" data-authorapi-selector="general-search">').p("partials/toolbar/searchGeneral",t,t,{}).w("</div>")}function o(e,t){return e.w('<div class="lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-lg lrn-col-lg-only">').p("partials/toolbar/searchTags",t,t,{}).w("</div>")}function a(e,t){return e.w('<div class="lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-sm"><button type="submit" class="lrn-btn lrn-btn-sec lrn-btn-full-width lrn-btn-lg lrn-main-search-button" data-authorapi-selector="search-button"><span class="lrn-i-search"></span><span class="lrn-search-txt">').h("i18n",t,{},{id:"searchButton"},"h").w(" </span></button></div>")}function s(e,t){return e.w('<div class="lrn-author-flex-toolbar-item lrn-author-flex-toolbar-item-sm"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-full-width lrn-btn-lg" data-authorapi-selector="toolbar-new-item-btn"><span class="lrn-i-plus-small"></span><span class="lrn-item">').h("i18n",t,{},{id:"activityListItemButton"},"h").w("</span></button></div>")}return e.register("itemList/toolbar/search",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},6173:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('-supplementary-tag-select"><span class="lrn-form-label-name">').f(t.get(["label"],!1),t,"h").w('</span></label><div data-authorapi-selector="dropdown-wrapper"></div></div>')}return e.register("itemList/toolbar/supplementaryTagSelect",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},38147:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<button class="lrn-popup-close lrn-i-cross" type="button" data-authorapi-selector="hide-advanced" data-authorapi-target="search-advanced" aria-label="Close advanced search"></button>').s(t.get(["controls"],!1),t,{block:n},{}).x(t.get(["showWidgetSearch"],!1),t,{block:s},{}).x(t.get(["showWorkflowSearch"],!1),t,{block:g},{}).x(t.get(["showStatusSearch"],!1),t,{block:y},{})}function n(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w("_").f(t.get(["name"],!1),t,"h").w('_adv"><span class="lrn-form-label-name">').f(t.get(["i18nLabel"],!1),t,"h").w(":</span></label>").x(t.get(["showInfoToggler"],!1),t,{block:r},{}).w('<div class="lrn-form-control-wrapper"><input type="text" id="').f(t.get(["viewId"],!1),t,"h").w("_").f(t.get(["name"],!1),t,"h").w('_adv" name="').f(t.get(["name"],!1),t,"h").w('" class="lrn-form-control" value="').f(t.get(["currentValue"],!1),t,"h").w('" placeholder="').f(t.get(["i18nPlaceholder"],!1),t,"h").w('" maxlength="250">').x(t.get(["showCheckbox"],!1),t,{block:i},{}).w("</div>").x(t.get(["showInfoToggler"],!1),t,{block:a},{}).w("</div>")}function r(e,t){return e.w('<span class="lrn-badge-round" aria-label="').f(t.get(["i18nFieldTogglerInfo"],!1),t,"h").w('" data-authorapi-selector="info-field-toggler-').f(t.get(["infoName"],!1),t,"h").w('" title="').f(t.get(["i18nFieldTogglerInfo"],!1),t,"h").w('"><span class="lrn-i-help"></span></span>')}function i(e,t){return e.w('<div class="lrn-author-checkbox-container"><input type="checkbox" id="').f(t.get(["viewId"],!1),t,"h").w("_").f(t.get(["name"],!1),t,"h").w('_checkbox_input" name="').f(t.get(["checkboxName"],!1),t,"h").w('" value="').f(t.get(["value"],!1),t,"h").w('" ').x(t.get(["selected"],!1),t,{block:o},{}).w(' data-authorapi-selector="search-control-checkbox-input" class="lrn-author-checkbox" tabindex="-1"/><label id="').f(t.get(["viewId"],!1),t,"h").w("_").f(t.get(["name"],!1),t,"h").w('_checkbox" data-authorapi-selector="search-control-checkbox-label" class="lrn-author-checkbox-label" role="checkbox" tabindex="0">').f(t.get(["i18nCheckboxLabel"],!1),t,"h").w("</label><div class='lrn-author-checkbox-info lrn-i-exclamation-circle'>").f(t.get(["i18nCheckboxText"],!1),t,"h").w("</div></div>")}function o(e,t){return e.w("checked")}function a(e,t){return e.w('<div class="lrn-author-checkbox-container"><div data-authorapi-selector="show-info-field-').f(t.get(["infoName"],!1),t,"h").w("\" class='lrn-author-field-info lrn-i-help lrn-hide'>").f(t.get(["i18nInfoText"],!1),t,"h").w("</div></div>")}function s(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_q_adv"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchQuestionFeatureType"},"h").w(':</span></label><div class="lrn-form-control-wrapper"><div class="lrn-custom-select"><select id="').f(t.get(["viewId"],!1),t,"h").w('_q_adv" name="widgetType" class="lrn-form-control"><option value="" ').x(t.get(["noWidgetType"],!1),t,{block:l},{}).w(">--</option>").s(t.get(["widgetGroups"],!1),t,{block:u},{}).w("</select></div></div></div>")}function l(e,t){return e.w("selected")}function u(e,t){return e.w('<optgroup label="').h("i18n",t,{},{id:c,defaultValue:d},"h").w('">').s(t.getPath(!0,["widgetList"]),t,{block:f},{}).w("</optgroup>")}function c(e,t){return e.f(t.getPath(!0,["label"]),t,"h")}function d(e,t){return e.f(t.getPath(!0,["label"]),t,"h")}function f(e,t){return e.w('<option value="').f(t.getPath(!0,["value"]),t,"h").w('" ').x(t.get(["selected"],!1),t,{block:p},{}).w(">").h("i18n",t,{},{id:h,defaultValue:m},"h").w("</option>")}function p(e,t){return e.w("selected")}function h(e,t){return e.f(t.getPath(!0,["prettyName"]),t,"h")}function m(e,t){return e.f(t.getPath(!0,["prettyName"]),t,"h")}function g(e,t){return e.w('<div data-authorapi-selector="workflow-select-wrapper"></div>')}function y(e,t){return e.p("partials/toolbar/searchStatus",t,t,{})}return e.register("partials/generalSearch",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},73179:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<button class="lrn-popup-close lrn-i-cross" type="button" data-authorapi-selector="hide-advanced" data-authorapi-target="search-hierarchy" aria-label="Close hierarchy"></button><div data-authorapi-selector="hierarchy-controls-wrapper"></div>')}return e.register("partials/hierarchy",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},58115:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-author-item-nav" data-authorapi-selector="nav-bar">').x(t.get(["showBackButton"],!1),t,{block:n},{}).x(t.get(["showSaveButton"],!1),t,{block:r},{}).w("</div>")}function n(e,t){return e.w('<div class="lrn-author-item-nav-left"><button type="button" class="lrn-btn lrn-btn-default lrn-btn-icon-left" data-authorapi-selector="back"><span class="lrn-i-previous"></span>').h("i18n",t,{},{id:"backButton"},"h").w("</button></div>")}function r(e,t){return e.w('<div class="lrn-author-item-nav-right" data-authorapi-selector="activity-save-button-wrapper"></div>')}return e.register("partials/nav",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},75153:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-author-region-slider"></div>')}return e.register("partials/regionSlider",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},85046:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-author-save-button-group ').x(t.get(["duplicateItem"],!1),t,{block:n},{}).w('" data-authorapi-selector="save-group"><button type="button" class="lrn-btn-save lrn-btn lrn-btn-primary ').x(t.get(["isSaving"],!1),t,{block:r},{}).x(t.get(["isSaved"],!1),t,{block:i},{}).w('" data-authorapi-selector="save"').nx(t.get(["isEnabled"],!1),t,{block:o},{}).w('><span class="lrn-i-save"></span><div class="lrn-spinner-save">').h("i18n",t,{},{id:"loadingText"},"h").w('</div><span class="lrn-author-inline-block lrn-author-margin-left-xs">').h("i18n",t,{},{id:"saveButton"},"h").w("</span></button>").x(t.get(["duplicateItem"],!1),t,{block:a},{}).w("</div>")}function n(e,t){return e.w(" lrn-btn-save-dropdown-active ")}function r(e,t){return e.w(" lrn-btn-saving")}function i(e,t){return e.w(" lrn-btn-success")}function o(e,t){return e.w(" disabled")}function a(e,t){return e.w('<button type="button" class="lrn-btn-save-dropdown" ').x(t.get(["isEmpty"],!1),t,{block:s},{}).w('><span class="lrn-i-arrow"></span></button><div class="lrn-btn-save-popover lrn-popover-hide"><ul><li><button class="lrn-btn-save-popover-button" ').x(t.get(["isEmpty"],!1),t,{block:l},{}).w(">").h("i18n",t,{},{id:"duplicateButton"},"h").w("</button></li></ul></div>")}function s(e,t){return e.w(" disabled")}function l(e,t){return e.w(" disabled")}return e.register("partials/save",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},38897:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-row lrn-row-narrow"><div class="').x(t.get(["add"],!1),t,{else:n,block:r},{}).w('">').x(t.get(["search"],!1),t,{block:i},{}).w("</div>").x(t.get(["add"],!1),t,{block:o},{}).w("</div>")}function n(e,t){return e.w(" lrn-col-xs-12 lrn-col-md-12 lrn-col-lg-12 ")}function r(e,t){return e.w(" lrn-col-xs-6 lrn-col-md-6 lrn-col-lg-6 ")}function i(e,t){return e.w('<button type="submit" class="lrn-btn lrn-btn-sec lrn-btn-full-width lrn-btn-lg lrn-main-search-button" data-authorapi-selector="search-button"><span class="lrn-i-search"></span><span class="lrn-search-txt">').h("i18n",t,{},{id:"searchButton"},"h").w(" </span></button>")}function o(e,t){return e.w('<div class="lrn-col-xs-6 lrn-col-md-6 lrn-col-lg-6"><div class="').x(t.get(["add_adaptive"],!1),t,{block:a},{}).w('"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-lg ').x(t.get(["add_adaptive"],!1),t,{else:s,block:l},{}).w('" ').x(t.get(["inActivityList"],!1),t,{block:u},{}).w('><span class="lrn-i-plus-small"></span><span class="lrn-item">').h("i18n",t,{},{id:"activityListItemButton"},"h").w("</span></button>").x(t.get(["add_adaptive"],!1),t,{block:c},{}).w("</div></div>")}function a(e,t){return e.w("lrn-author-dropdown-button-group")}function s(e,t){return e.w("lrn-btn-full-width")}function l(e,t){return e.w("lrn-author-btn-with-dropdown")}function u(e,t){return e.w('data-authorapi-selector="toolbar-new-activity-btn"')}function c(e,t){return e.w('<button type="button" class="lrn-author-btn-dropdown" data-authorapi-selector="adaptive-dropdown" data-authorapi-target="toolbar-new-adaptive-btn"><span class="lrn-i-arrow"></span></button><div class="lrn-author-btn-dropdown-menu lrn-author-btn-dropdown-menu-is-hidden" data-authorapi-selector="toolbar-new-adaptive-btn"><ul><li><button class="lrn-author-btn-dropdown-menu-button">').h("i18n",t,{},{id:"createAdaptiveActivity"},"h").w("</button></li></ul></div>")}return e.register("partials/searchAndNewButton",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},155:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-row lrn-row-narrow"><div class="').x(t.get(["add"],!1),t,{else:n,block:r},{}).w(' lrn-col-lg-12">').x(t.get(["search"],!1),t,{block:i},{}).w("</div>").x(t.get(["add"],!1),t,{block:o},{}).w("</div>")}function n(e,t){return e.w(" lrn-col-xs-12 ")}function r(e,t){return e.w(" lrn-col-xs-6 ")}function i(e,t){return e.w('<button type="submit" class="lrn-btn lrn-btn-sec lrn-btn-full-width lrn-btn-lg lrn-main-search-button" data-authorapi-selector="search-button"><span class="lrn-i-search"></span><span class="lrn-search-txt">').h("i18n",t,{},{id:"searchButton"},"h").w(" </span></button>")}function o(e,t){return e.w('<div class="lrn-col-xs-6 lrn-col-lg-12"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-full-width lrn-btn-lg" ').x(t.get(["inItemList"],!1),t,{block:a},{}).w(" ").x(t.get(["inActivityList"],!1),t,{block:s},{}).w('><span class="lrn-i-plus-small"></span>').x(t.get(["inActivityList"],!1),t,{block:l},{}).x(t.get(["inItemList"],!1),t,{block:u},{}).w("</button></div>")}function a(e,t){return e.w('data-authorapi-selector="toolbar-new-item-btn" ')}function s(e,t){return e.w('data-authorapi-selector="toolbar-new-activity-btn"')}function l(e,t){return e.w('<span class="lrn-item">').h("i18n",t,{},{id:"activityListItemButton"},"h").w("</span>")}function u(e,t){return e.w('<span class="lrn-item">').h("i18n",t,{},{id:"itemListItemButton"},"h").w("</span>")}return e.register("partials/searchAndNewButtonMedium",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},63188:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-row lrn-row-narrow">').x(t.get(["search"],!1),t,{block:n},{}).x(t.get(["add"],!1),t,{block:o},{}).w("</div>")}function n(e,t){return e.w('<div class="').x(t.get(["add"],!1),t,{else:r,block:i},{}).w('"><button type="submit" class="lrn-btn lrn-btn-sec lrn-btn-full-width lrn-btn-lg lrn-main-search-button" data-authorapi-selector="search-button"><span class="lrn-search-txt">').h("i18n",t,{},{id:"searchButton"},"h").w(' </span><span class="lrn-i-search"></span></button></div>')}function r(e,t){return e.w(" lrn-col-xs-12 lrn-col-lg-12 ")}function i(e,t){return e.w(" lrn-col-xs-6 lrn-col-lg-6 ")}function o(e,t){return e.w('<div class="').x(t.get(["search"],!1),t,{search:a,block:s},{}).w('"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-full-width lrn-btn-lg" ').x(t.get(["inItemList"],!1),t,{block:l},{}).w(" ").x(t.get(["inActivityList"],!1),t,{block:u},{}).w('><span class="lrn-i-plus-small"></span><span class="lrn-item">').h("i18n",t,{},{id:"activityListItemButton"},"h").w("</span></button></div>")}function a(e,t){return e.w(" lrn-col-xs-12 lrn-col-lg-12 ")}function s(e,t){return e.w(" lrn-col-xs-6 lrn-col-lg-6 ")}function l(e,t){return e.w('data-authorapi-selector="toolbar-new-item-btn" ')}function u(e,t){return e.w('data-authorapi-selector="toolbar-new-activity-btn"')}return e.register("partials/searchAndNewButtonSmall",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},96880:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-row lrn-row-narrow"><div class="').x(t.get(["add"],!1),t,{else:n,block:r},{}).w('">').x(t.get(["search"],!1),t,{block:i},{}).w("</div>").x(t.get(["add"],!1),t,{block:o},{}).w("</div>")}function n(e,t){return e.w(" lrn-col-xs-12 ")}function r(e,t){return e.w(" lrn-col-xs-6 ")}function i(e,t){return e.w('<button type="submit" class="lrn-btn lrn-btn-sec lrn-btn-full-width lrn-btn-lg lrn-main-search-button" data-authorapi-selector="search-button"><span class="lrn-search-txt">').h("i18n",t,{},{id:"searchButton"},"h").w(' </span><span class="lrn-i-search"></span></button>')}function o(e,t){return e.w('<div class="lrn-col-xs-6 lrn-col-lg-12"><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-full-width lrn-btn-lg" ').x(t.get(["inItemList"],!1),t,{block:a},{}).w(" ").x(t.get(["inActivityList"],!1),t,{block:s},{}).w('><span class="lrn-i-plus-small"></span></button></div>')}function a(e,t){return e.w('data-authorapi-selector="toolbar-new-item-btn" ')}function s(e,t){return e.w('data-authorapi-selector="toolbar-new-activity-btn"')}return e.register("partials/searchAndNewButtonVerySmall",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},34095:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-spinner"><div class="lrn-bounce1"></div><div class="lrn-bounce2"></div><div class="lrn-bounce3"></div></div>')}return e.register("partials/spinner",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},90837:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-tags-section"><div class="lrn-form-group lrn-form-match-all-tags"><label for="').f(t.get(["allTagsId"],!1),t,"h").w('"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"matchAllTags"},"h").w(':</span></label><div data-authorapi-view="tags-all" data-authorapi-viewport="').f(t.get(["viewport"],!1),t,"h").w('"></div></div><div class="lrn-form-group"><label for="').f(t.get(["eitherTagsId"],!1),t,"h").w('"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"matchAnyTags"},"h").w(':</span></label><div data-authorapi-view="tags-either" data-authorapi-viewport="').f(t.get(["viewport"],!1),t,"h").w('"></div></div></div>')}return e.register("partials/tagSearch",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},67759:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w("_").f(t.getPath(!1,["generalSearchDefault","name"]),t,"h").w('" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').f(t.getPath(!1,["generalSearchDefault","i18nLabel"]),t,"h").w(':</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper">').x(t.get(["showEnableLeftPartialRefMatch"],!1),t,{else:n,block:i},{}).x(t.get(["showAdvancedSearch"],!1),t,{block:o},{}).w("</div></div>")}function n(e,t){return e.w('<div class="lrn-input-group lrn-input-group-lg"><input id="').f(t.get(["viewId"],!1),t,"h").w('_ref" type="text" placeholder="').f(t.getPath(!1,["generalSearchDefault","i18nPlaceholder"]),t,"h").w('" name="').f(t.getPath(!1,["generalSearchDefault","name"]),t,"h").w('" class="lrn-form-control ').f(t.get(["defaultExtraClass"],!1),t,"h").w('" data-authorapi-selector="search-basic-input" value="').f(t.getPath(!1,["generalSearchDefault","currentValue"]),t,"h").w('" maxlength="250">').x(t.get(["showAdvancedSearch"],!1),t,{block:r},{}).w("</div>")}function r(e,t){return e.w('<button class="lrn-input-group-btn"type="button"data-authorapi-selector="expand-advanced"data-authorapi-target="search-advanced"aria-label="Show advanced search"><span class="lrn-i-arrow-small"></span></button>')}function i(e,t){return e.w('<div class="lrn-input-group lrn-input-group-lg"><button data-authorapi-target="search-advanced" id="').f(t.get(["viewId"],!1),t,"h").w('_ref" type="button" name="').f(t.getPath(!1,["generalSearchDefault","name"]),t,"h").w('" class="lrn-input-group-btn lrn-author-show-hierarchy" data-authorapi-selector="search-basic-input">').f(t.get(["i18nAdvancedPlaceholder"],!1),t,"h").w('<span class="lrn-i-arrow-small"></span></button></div>')}function o(e,t){return e.w('<div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="search-advanced"><div class="lrn-itemlist-general-search">').p("partials/generalSearch",t,t,{}).w('</div><div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-btn-search lrn-i-search lrn-col-xs-2"></button></div></div>')}return e.register("partials/toolbar/searchGeneral",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},2647:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-search-hierarchy"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_ref" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">Choose hierarchy</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div class="lrn-input-group lrn-input-group-lg"><button class="lrn-input-group-btn lrn-author-show-hierarchy"type="button" data-authorapi-selector="expand-advanced"data-authorapi-target="search-hierarchy"aria-label="Show hierarchy">').h("i18n",t,{},{id:"itemListTagHierarchyPlaceholder"},"h").w('<span class="lrn-i-arrow-small"></span></button></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="search-hierarchy">').p("partials/hierarchy",t,t,{}).w('<div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-btn-search lrn-i-search lrn-col-xs-2"></button></div></div></div></div></div>')}return e.register("partials/toolbar/searchHierarchy",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},613:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label for="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-status_adv"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchStatus"},"h").w(':</span></label><div class="lrn-form-control-wrapper"><div class="lrn-custom-select"><select id="').f(t.get(["viewIdWithViewport"],!1),t,"h").w('-status_adv" name="status" class="lrn-form-control">').s(t.get(["statusOptions"],!1),t,{block:n},{}).w("</select></div></div></div>")}function n(e,t){return e.w('<option value="').f(t.getPath(!0,["value"]),t,"h").w('" ').x(t.getPath(!0,["selected"]),t,{block:r},{}).w(">").f(t.getPath(!0,["text"]),t,"h").w("</option>")}function r(e,t){return e.w("selected")}return e.register("partials/toolbar/searchStatus",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},20744:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label class="lrn-form-label lrn-form-label-item-list-toolbar" for="').f(t.get(["basicTagsId"],!1),t,"h").w('"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchTags"},"h").w('</span></label><div class="lrn-form-control-wrapper lrn-popup-wrapper"><div data-authorapi-view="tags-all" data-authorapi-tag-search="basic"></div><div role="dialog" aria-modal="true" class="lrn-popup" data-authorapi-selector="tags-advanced"><button class="lrn-popup-close lrn-i-cross" type="button" data-authorapi-selector="hide-advanced" data-authorapi-target="tags-advanced" aria-label="Close tag advanced search"></button><div class="lrn-form-tags-section-wrapper">').p("partials/tagSearch",t,t,{}).w('</div><div class="lrn-text-right"><button type="submit" aria-label="Search" class="lrn-btn lrn-btn-sec lrn-i-search lrn-col-xs-2"></button></div></div></div></div>')}return e.register("partials/toolbar/searchTags",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},85505:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-form-group"><label for="lrn_search_').f(t.get(["viewId"],!1),t,"h").w('_workflowstate_adv"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchWorkflowState"},"h").w(':</span></label><div id="lrn_search_').f(t.get(["viewId"],!1),t,"h").w('_workflowstate_adv" data-authorapi-selector="dropdown-wrapper"></div></div>')}return e.register("partials/toolbar/searchWorkflow",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},5528:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div><div class="lrn-modal-body"><div class="lrn-image-uploader" data-authorapi-selector="asset-uploader-image-config">').x(t.get(["src"],!1),t,{else:n,block:i},{}).w('<div class="lrn-alert lrn-alert-danger lrn-hide" data-authorapi-selector="asset-uploader-error-wrapper"><span class="lrn-alert-icon lrn-i-cross"></span> <span data-authorapi-selector="asset-uploader-error-message"></span></div></div><div class="lrn-modal-footer"><div class="lrn-delete-btn-wrapper"><button type="button" class="lrn-btn lrn-btn-sec lrn-btn-lg" data-authorapi-action="asset-uploader-delete" ').x(t.get(["src"],!1),t,{else:y,block:v},{}).w(">").h("i18n",t,{},{id:"assetUploaderReset"},"h").w('</button></div><ul><li><button type="button" class="lrn-btn lrn-btn-default lrn-btn-lg" data-authorapi-action="modal-close">').h("i18n",t,{},{id:"assetUploaderCancel"},"h").w('</button></li><li><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-lg" data-authorapi-selector="asset-uploader-okay" ').x(t.get(["src"],!1),t,{else:b,block:_},{}).w(">").h("i18n",t,{},{id:"assetUploaderOK"},"h").w("</button></li></ul></div></div>")}function n(e,t){return e.w('<div data-authorapi-selector="asset-uploader-iframe-outlet"></div>').p(r,t,t,{})}function r(e,t){return e.f(t.get(["selfHostedFileInput"],!1),t,"h")}function i(e,t){return e.x(t.get(["isImage"],!1),t,{block:o},{}).x(t.get(["isHtmlAssetRequest"],!1),t,{else:c,block:f},{}).w("</div>")}function o(e,t){return e.w('<div class="lrn-image-uploader-preview"><img src="').f(t.get(["src"],!1),t,"h").w('"').x(t.get(["alt"],!1),t,{block:a},{}).x(t.get(["class"],!1),t,{block:s},{}).x(t.get(["height"],!1),t,{block:l},{}).x(t.get(["width"],!1),t,{block:u},{}).w('data-authorapi-selector="asset-uploader-preview"/></div>')}function a(e,t){return e.w('alt="').f(t.get(["alt"],!1),t,"h").w('"')}function s(e,t){return e.w('class="').f(t.get(["class"],!1),t,"h").w('"')}function l(e,t){return e.w('height="').f(t.get(["height"],!1),t,"h").w('"')}function u(e,t){return e.w('width="').f(t.get(["width"],!1),t,"h").w('"')}function c(e,t){return e.w('<div data-authorapi-selector="asset-uploader-iframe-outlet"></div>').p(d,t,t,{})}function d(e,t){return e.f(t.get(["selfHostedFileInput"],!1),t,"h")}function f(e,t){return e.w('<div class="lrn-row"><div class="lrn-col-xs-8"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_alt_text" class="lrn-author-asset-upload lrn-form-label-name"><span class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderAlternativeText"},"h").w('</span></label><div class="lrn-form-control-wrapper"><textarea id="').f(t.get(["viewId"],!1),t,"h").w('_alt_text" name="alt" type="text" class="lrn-form-control lrn-author-textarea-lg" data-authorapi-selector="asset-uploader-field">').f(t.get(["alt"],!1),t,"h").w('</textarea></div></div></div><div class="lrn-col-xs-4"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_alignment" class="lrn-author-asset-upload lrn-form-label-name"><span class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderImageAlignment"},"h").w('</span></label><div class="lrn-form-control-wrapper"><div class="lrn-custom-select"><select id="').f(t.get(["viewId"],!1),t,"h").w('_alignment" name="class" class="lrn-form-control" data-authorapi-selector="asset-uploader-alignment"><option value="">').h("i18n",t,{},{id:"assetUploaderImageAlignmentNone"},"h").w('</option><option value="lrn-image-left" ').x(t.get(["imageLeft"],!1),t,{block:p},{}).w(">").h("i18n",t,{},{id:"assetUploaderImageAlignmentLeft"},"h").w('</option><option value="lrn-image-center" ').x(t.get(["imageCenter"],!1),t,{block:h},{}).w(">").h("i18n",t,{},{id:"assetUploaderImageAlignmentCenter"},"h").w('</option><option value="lrn-image-right" ').x(t.get(["imageRight"],!1),t,{block:m},{}).w(">").h("i18n",t,{},{id:"assetUploaderImageAlignmentRight"},"h").w('</option></select></div></div></div></div></div><div><h2 class="lrn-image-upload-heading">').h("i18n",t,{},{id:"assetUploaderOverrideDimensions"},"h").w('</h2></div><div class="lrn-row"><div class="lrn-col-xs-4"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_width" class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderWidth"},"h").w('</label><input id="').f(t.get(["viewId"],!1),t,"h").w('_width" name="width" dir="ltr" type="number" min="0" class="lrn-form-control" size="3" data-authorapi-selector="asset-uploader-field" value="').f(t.get(["width"],!1),t,"h").w('"></div></div><div class="lrn-col-xs-4"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_height" class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderHeight"},"h").w('</label><input id="').f(t.get(["viewId"],!1),t,"h").w('_height" name="height" dir="ltr" type="number" min="0" class="lrn-form-control" size="3" data-authorapi-selector="asset-uploader-field" value="').f(t.get(["height"],!1),t,"h").w('"></div></div><div class="lrn-col-xs-4"><div class="lrn-form-group"><button type="button" class="lrn-image-upload-ratio-btn lrn-image-upload-ratio-locked" data-authorapi-selector="asset-uploader-lock" title="').h("i18n",t,{},{id:"assetUploaderLockAspectRatio"},"h").w('" aria-label="Lock aspect ratio" aria-pressed="true"><span class="lrn-image-upload-ratio-icon lrn-i-lock"></span></button></div></div></div><div><p class="lrn-text-small">').h("i18n",t,{},{id:"assetUploaderScaleDownDescription"},"h").w('</p></div><div class="lrn-row"><div class="lrn-col-xs-10"><div class="lrn-form-group lrn-image-upload-scaling"><input id="').f(t.get(["viewId"],!1),t,"h").w('_prevent_scaling" name="preventScaling" class="lrn-form-control" data-authorapi-selector="asset-uploader-scaling" type="checkbox" ').x(t.get(["preventScaling"],!1),t,{block:g},{}).w('><label for="').f(t.get(["viewId"],!1),t,"h").w('_prevent_scaling">').h("i18n",t,{},{id:"assetUploaderPreventScaling"},"h").w("</label></div></div></div>")}function p(e,t){return e.w("selected")}function h(e,t){return e.w("selected")}function m(e,t){return e.w("selected")}function g(e,t){return e.w("checked")}function y(e,t){return e.w("disabled")}function v(e,t){return e}function b(e,t){return e.w("disabled")}function _(e,t){return e}return e.register("questionEdit/assetUploader",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,m.__dustBody=!0,g.__dustBody=!0,y.__dustBody=!0,v.__dustBody=!0,b.__dustBody=!0,_.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},23235:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-row lrn-author-ui lrn-author-ui-no-preview"><div class="lrn-col-xs-12"><div class="lrn-form-group lrn-adv-options">').x(t.get(["isResourceAssetRequest"],!1),t,{block:n},{}).w('<button type="button" class="lrn-adv-options-toggle" data-authorapi-selector="advanced-options-toggle" tabindex="0" aria-label="More options" aria-pressed="').f(t.get(["moreOptionsShown"],!1),t,"h").w('"><span class="lrn-i-arrow"></span><span class="lrn-adv-options-text">').h("i18n",t,{},{id:"assetUploaderMoreOptions"},"h").w('</span></button><div class="lrn-adv-options-group"><div class="lrn-row"><div class="lrn-col-xs-12"><label for="').f(t.get(["viewId"],!1),t,"h").w('_src" class="lrn-author-asset-upload lrn-form-label-name"><span class="lrn-author-asset-upload lrn-form-label-name">').f(t.get(["selfHostedFileText"],!1),t,"h").w('</span></label><div class="lrn-form-control-wrapper"><input id="').f(t.get(["viewId"],!1),t,"h").w('_src" name="src" value="" type="url" dir="ltr" class="lrn-form-control" data-authorapi-selector="asset-uploader-source"></div></div></div>').x(t.get(["isUrlHeightWidthAssetRequest"],!1),t,{block:r},{}).w("</div></div></div></div>")}function n(e,t){return e.w('<label for="').f(t.get(["viewId"],!1),t,"h").w('_text" class="lrn-author-asset-upload lrn-form-label-name"><span class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetDisplayName"},"h").w('</span></label><div class="lrn-form-control-wrapper"><input id="').f(t.get(["viewId"],!1),t,"h").w('_text" name="text" value="').f(t.get(["displayName"],!1),t,"h").w('" type="text" dir="ltr" class="lrn-form-control" data-authorapi-selector="asset-display-name"></div>')}function r(e,t){return e.w('<div><h2 class="lrn-image-upload-heading">').h("i18n",t,{},{id:"assetUploaderOverrideDimensions"},"h").w('</h2></div><div class="lrn-row"><div class="lrn-col-xs-4"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_width" class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderWidth"},"h").w('</label><input id="').f(t.get(["viewId"],!1),t,"h").w('_width" name="width" dir="ltr" type="number" min="0" class="lrn-form-control" size="3" data-authorapi-selector="asset-uploader-field" value="').f(t.get(["width"],!1),t,"h").w('"></div></div><div class="lrn-col-xs-4"><div class="lrn-form-group"><label for="').f(t.get(["viewId"],!1),t,"h").w('_height" class="lrn-author-asset-upload lrn-form-label-name">').h("i18n",t,{},{id:"assetUploaderHeight"},"h").w('</label><input id="').f(t.get(["viewId"],!1),t,"h").w('_height" name="height" dir="ltr" type="number" min="0" class="lrn-form-control" size="3" data-authorapi-selector="asset-uploader-field" value="').f(t.get(["height"],!1),t,"h").w('"></div></div>').x(t.get(["isShowAspectRatioLock"],!1),t,{block:i},{}).w("</div>")}function i(e,t){return e.w('<div class="lrn-col-xs-4"><div class="lrn-form-group"><button type="button" class="lrn-image-upload-ratio-btn lrn-image-upload-ratio-locked" data-authorapi-selector="asset-uploader-lock" title="').h("i18n",t,{},{id:"assetUploaderLockAspectRatio"},"h").w('" aria-label="Lock aspect ratio" aria-pressed="true"><span class="lrn-image-upload-ratio-icon lrn-i-lock"></span></button></div></div>')}return e.register("questionEdit/assetUploader/selfHostedFile",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},48367:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-question-list-buttons"><div data-authorapi-selector="tooltipped"><button type="button" data-authorapi-selector="open-question" class="lrn-btn lrn-btn-default lrn-btn-lg"><span class="lrn-i-preview"></span></button><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"questionPreviewHeading"},"h").w('</p></div></div></div><div class="lrn-shared-passage-description"><div class="lrn-list-view-question" data-authorapi-selector="open-question" dir="auto">').x(t.get(["heading"],!1),t,{block:n},{}).x(t.get(["content"],!1),t,{block:r},{}).w("</div></div>")}function n(e,t){return e.w('<div class="lrn-question-heading lrn-ellipses">').f(t.get(["heading"],!1),t,"h").w("</div>")}function r(e,t){return e.w("<div>").f(t.get(["content"],!1),t,"h").w("</div>")}return e.register("questionList/partials/sharedPassagePreview",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},71250:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li class="lrn-list-view-item"><div class="lrn-list-view-col lrn-col-xs-1 lrn-question-wrapper-large lrn-question-list-buttons"><button type="button" data-authorapi-selector="select-question" class="lrn-btn lrn-btn-primary lrn-btn-lg" ').x(t.get(["alreadyAdded"],!1),t,{block:n},{}).w('><span class="lrn-i-select"></span><span> ').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w('</span></button></div><div class="lrn-list-view-col lrn-col-xs-1 lrn-question-wrapper-md lrn-question-list-buttons"><button type="button" data-authorapi-selector="select-question" class="lrn-btn lrn-btn-primary lrn-btn-lg" ').x(t.get(["alreadyAdded"],!1),t,{block:r},{}).w('><div data-authorapi-selector="tooltipped"><span class="lrn-i-select"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w('</p></div></div></button></div><div class="lrn-list-view-col lrn-col-xs-11 lrn-col-xs-full-width lrn-question-wrapper-md lrn-question-wrapper-large">').p("questionList/partials/sharedPassagePreview",t,t,{}).w('</div><div class="lrn-list-view-col lrn-col-xs-2 lrn-question-wrapper-sm lrn-question-list-buttons"><button type="button" data-authorapi-selector="select-question" class="lrn-btn lrn-btn-primary lrn-btn-lg" ').x(t.get(["alreadyAdded"],!1),t,{block:i},{}).w('><div data-authorapi-selector="tooltipped"><span class="lrn-i-select"></span><div class="lrn-list-view-tooltip" data-authorapi-selector="tooltip"><p>').h("i18n",t,{},{id:"questionPreviewSelect"},"h").w('</p></div></div></button></div><div class="lrn-list-view-col lrn-col-xs-10 lrn-col-xs-full-width lrn-question-wrapper-sm">').p("questionList/partials/sharedPassagePreview",t,t,{}).w("</div></li>")}function n(e,t){return e.w("disabled")}function r(e,t){return e.w("disabled")}function i(e,t){return e.w("disabled")}return e.register("questionList/question",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},49309:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<section class="lrn-question-list lrn-author-ui lrn-author-ui-no-preview">').x(t.get(["showNavbar"],!1),t,{block:n},{}).w('<div class="lrn-tool-panel lrn-question-list-search-paginate"><div class="lrn-row"><div class="lrn-col-xs-6"><div class="lrn-tool-panel-search"><div data-authorapi-view="questions-search-1"></div></div></div><div class="lrn-col-xs-6"><div data-authorapi-view="pagination-1" class="lrn-pagination-bar lrn-pagination-bar-small"></div></div></div></div><div class="lrn-question-list-search-paginate-small"><div class="lrn-tool-panel-search" data-authorapi-view="questions-search-2"></div></div><div class="lrn-question-list-search-paginate-small lrn-question-list-search-paginate-small-second"><div data-authorapi-view="pagination-2" class="lrn-pagination-bar"></div></div><div data-authorapi-view="questions"></div><div data-authorapi-view="pagination-3"></div></section>')}function n(e,t){return e.p("partials/nav",t,t,{})}return e.register("questionList/questionList",t),t.__dustBody=!0,n.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},53339:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-question-preview-modal"><div class="lrn-modal-body"><span class="').f(t.get(["featureClass"],!1),t,"h").w('"></span></div><div class="lrn-modal-footer lrn-author-ui lrn-author-ui-no-preview"><ul><li><button type="button" class="lrn-btn lrn-btn-default lrn-btn-lg" data-authorapi-action="modal-close">').h("i18n",t,{},{id:"questionPreviewCancel"},"h").w('</button></li><li><button type="button" class="lrn-btn lrn-btn-primary lrn-btn-lg" data-authorapi-selector="question-preview-select" ').x(t.get(["alreadyAdded"],!1),t,{block:n},{}).w(">").h("i18n",t,{},{id:"questionPreviewSelect"},"h").w("</button></li></ul></div></div>")}function n(e,t){return e.w("disabled")}return e.register("questionList/questionModal",t),t.__dustBody=!0,n.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},8129:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w("<div>").x(t.get(["hasQuestions"],!1),t,{else:n,block:i},{}).w("</div>")}function n(e,t){return e.w('<div class="lrn-list-view-empty"><span class="lrn-list-view-empty-label">').h("i18n",t,{},{id:"itemListEmptyState"},"h").w('</span><div class="lrn-list-view-empty-img"').x(t.get(["hasCustomEmptyStateImage"],!1),t,{block:r},{}).w("></div></div>")}function r(e,t){return e.w(" style=\"background-image: url('").h("i18n",t,{},{id:"itemListEmptyStateImageURL"},"h").w("')\"")}function i(e,t){return e.w('<ul class="lrn-list-view lrn-list-unstyled lrn-list-divider" data-authorapi-view="question-list"></ul>')}return e.register("questionList/questions",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},57205:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<form action="#" class="lrn-form lrn-form-list-search"><div class="lrn-row-flex lrn-row-narrow"><div class="lrn-col-xs-9 lrn-col-lg-5 lrn-search-lg"><div class="lrn-form-group"><label for="contentSearch" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchPassagePlaceholder"},"h").w('</span></label><div class="lrn-form-control-wrapper"><div class="lrn-input-group lrn-input-group-lg"><input type="text" placeholder="').h("i18n",t,{},{id:"searchPassagePlaceholder"},"h").w('" name="content" class="lrn-form-control" data-authorapi-selector="question-search-input" maxlength="250"></div></div></div></div><div class="lrn-col-xs-10 lrn-col-lg-5 lrn-search-md"><div class="lrn-form-group"><label for="contentSearch" class="lrn-form-label lrn-form-label-item-list-toolbar"><span class="lrn-form-label-name">').h("i18n",t,{},{id:"searchPassagePlaceholder"},"h").w('</span></label><div class="lrn-form-control-wrapper"><div class="lrn-input-group lrn-input-group-lg"><input type="text" placeholder="').h("i18n",t,{},{id:"searchPassagePlaceholder"},"h").w('" name="content" class="lrn-form-control" data-authorapi-selector="question-search-input" maxlength="250"></div></div></div></div><div class="lrn-col-xs-2 lrn-col-lg-4 lrn-tool-panel-new-xs">').p("partials/searchAndNewButtonVerySmall",t,t,{}).w('</div><div class="lrn-col-xs-2 lrn-col-lg-4 lrn-tool-panel-new-sm">').p("partials/searchAndNewButtonSmall",t,t,{}).w('</div><div class="lrn-col-xs-2 lrn-col-lg-4 lrn-tool-panel-new-md">').p("partials/searchAndNewButtonMedium",t,t,{}).w('</div><div class="lrn-col-xs-3 lrn-col-lg-4 lrn-tool-panel-new-lg">').p("partials/searchAndNewButtonMedium",t,t,{}).w("</div></div></form>")}return e.register("questionList/search",t),t.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},81471:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-dropdown-wrapper"><button type="button" class="lrn-dropdown-button" data-authorapi-selector="dropdown-button"><span>').f(t.get(["initialButtonText"],!1),t,"h").w('</span><span class="lrn-i-arrow-small"></span></button><div class="lrn-dropdown-panel" data-authorapi-selector="dropdown-panel"><ul>').s(t.get(["selectOptions"],!1),t,{block:n},{}).w("</ul></div></div>")}function n(e,t){return e.w('<li><label class="lrn-dropdown-choice"><input type="checkbox" value="').f(t.get(["value"],!1),t,"h").w('" ').x(t.get(["selected"],!1),t,{block:r},{}).w(" data-authorapi-selector='dropdown-option'><div class=\"lrn-dropdown-choice-child\"><span class=\"lrn-i-tick\"></span><div class='lrn-dropdown-select-text'><div>").f(t.get(["title"],!1),t,"h").w("</div><div>").f(t.get(["description"],!1),t,"h").w("</div></div></div></label></li>")}function r(e,t){return e.w("checked")}return e.register("shared/dropdown",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},99234:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<nav class="lrn-pagination"><ul><li class="lrn-col-xs-2"><button type="button" class="lrn-btn lrn-pagination-btn" data-authorapi-selector="pagination-previous"').x(t.get(["shouldDisablePrevious"],!1),t,{block:n},{}).w('><span class="lrn-i-previous"></span><span class="lrn-pagination-btn-txt">').h("i18n",t,{},{id:"itemListPreviousButton"},"h").w('</span></button></li><li class="lrn-pagination-counter-wrapper lrn-col-xs-8"><div ').x(t.get(["shouldShowSort"],!1),t,{block:r},{}).w('><span class="lrn-pagination-counter">').x(t.get(["isLoading"],!1),t,{block:i},{}).f(t.get(["from"],!1),t,"h").w(" ").h("i18n",t,{},{id:"itemListCountTo"},"h").w(" ").f(t.get(["to"],!1),t,"h").w("</span>").x(t.get(["shouldShowTotal"],!1),t,{else:o,block:l},{}).x(t.get(["shouldShowSort"],!1),t,{block:u},{}).w('</div></li><li class="lrn-col-xs-2"><button type="button" class="lrn-btn lrn-pagination-btn" data-authorapi-selector="pagination-next"').x(t.get(["shouldDisableNext"],!1),t,{block:f},{}).w(">").s(t.get(["shouldShowNextSpinner"],!1),t,{block:p},{}).w('<span class="lrn-pagination-btn-txt">').h("i18n",t,{},{id:"itemListNextButton"},"h").w('</span><span class="lrn-i-next"></span></button></li></ul></nav>')}function n(e,t){return e.w(" disabled")}function r(e,t){return e.w('class="lrn-pagination-sort-wrapper"')}function i(e,t){return e.h("i18n",t,{},{id:"loadingText"},"h").w(" ")}function o(e,t){return e.w('<div class="lrn-author-pagination-spinner ').f(t.get(["extraClasses"],!1),t,"h").w('"></div>').x(t.get(["fetchingTotal"],!1),t,{else:a,block:s},{})}function a(e,t){return e.w('<button class="lrn-author-pagination-display-total" data-authorapi-selector="display-total">').h("i18n",t,{},{id:"itemListDisplayTotal"},"h").w("</button>")}function s(e,t){return e.w("<span> ").h("i18n",t,{},{id:"itemListRetrievingTotal"},"h").w("</span>")}function l(e,t){return e.w('<span class="lrn-pagination-total">').h("i18n",t,{},{id:"itemListCountOf"},"h").w(" ").f(t.get(["total"],!1),t,"h").w("</span>")}function u(e,t){return e.w('<div class="lrn-sort-wrapper"><button type="button" class="lrn-btn lrn-sort-button" data-authorapi-selector="sort-order-toggle">').h("i18n",t,{},{id:"sortTypeButton"},"h").w('<span class="lrn-i-arrow-small"></span></button><div class="lrn-sort-panel" data-authorapi-selector="sort-order-panel"><div class="lrn-sort-group"><div class="lrn-author-sort-legend">').h("i18n",t,{},{id:"sortTypeUpdated"},"h").w('</div><label for="sort-updated-desc" class="lrn-sort-choice"><input id="sort-updated-desc" type="checkbox" name="sort-order" value="updated" data-authorapi-sort-direction="desc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeByNewest"},"h").w('</div></label><label for="sort-updated-asc" class="lrn-sort-choice"><input id="sort-updated-asc" type="checkbox" name="sort-order" value="updated" data-authorapi-sort-direction="asc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeByOldest"},"h").w('</div></label></div><hr><div class="lrn-sort-group"><div class="lrn-author-sort-legend">').h("i18n",t,{},{id:"sortTypeCreated"},"h").w('</div><label for="sort-created-desc" class="lrn-sort-choice"><input id="sort-created-desc" type="checkbox" name="sort-order" value="created" data-authorapi-sort-direction="desc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeByNewest"},"h").w('</div></label><label for="sort-created-asc" class="lrn-sort-choice"><input id="sort-created-asc" type="checkbox" name="sort-order" value="created" data-authorapi-sort-direction="asc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeByOldest"},"h").w('</div></label></div><hr><div class="lrn-sort-group"><div class="lrn-author-sort-legend">').s(t.get(["showTitle"],!1),t,{else:c,block:d},{}).w('</div><label for="sort-az-asc" class="lrn-sort-choice"><input id="sort-az-asc" type="checkbox" name="sort-order" value="').f(t.get(["sortAtoZField"],!1),t,"h").w('" data-authorapi-sort-direction="asc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeAZ"},"h").w('</div></label><label for="sort-az-desc" class="lrn-sort-choice"><input id="sort-az-desc" type="checkbox" name="sort-order" value="').f(t.get(["sortAtoZField"],!1),t,"h").w('" data-authorapi-sort-direction="desc" data-authorapi-selector="sort-order"><div><span class="lrn-i-tick"></span>').h("i18n",t,{},{id:"sortTypeZA"},"h").w("</div></label></div></div></div>")}function c(e,t){return e.h("i18n",t,{},{id:"sortTypeAlphabetical"},"h")}function d(e,t){return e.h("i18n",t,{},{id:"sortTypeAlphabeticalTitle"},"h")}function f(e,t){return e.w(" disabled")}function p(e,t){return e.w('<div class="lrn-author-pagination-spinner"></div>')}return e.register("shared/pagination",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},38487:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.x(t.get(["hasSearch"],!1),t,{block:n},{})}function n(e,t){return e.w('<div class="lrn-row lrn-row-narrow lrn-tool-state"><div class="lrn-col-xs-10"><dl class="lrn-dl lrn-dl-inline"><span data-authorapi-selector="standards-filter-wrapper"></span>').x(t.get(["searchString"],!1),t,{block:r},{}).x(t.get(["reference"],!1),t,{block:i},{}).x(t.get(["title"],!1),t,{block:o},{}).x(t.get(["content"],!1),t,{block:a},{}).x(t.get(["widgetType"],!1),t,{block:s},{}).x(t.get(["status"],!1),t,{block:l},{}).x(t.get(["filteredWorkflowState"],!1),t,{block:u},{}).x(t.get(["questionReference"],!1),t,{block:c},{}).x(t.get(["sourceNote"],!1),t,{block:d},{}).x(t.get(["allTags"],!1),t,{block:f},{}).x(t.get(["eitherTags"],!1),t,{block:p},{}).x(t.get(["excludeTags"],!1),t,{block:h},{}).w('</dl></div><div class="lrn-col-xs-2"><button type="button" class="lrn-btn lrn-btn-default lrn-btn-full-width" data-authorapi-selector="clear-btn">').h("i18n",t,{},{id:"searchClearAllButton"},"h").w("</button></div></div>")}function r(e,t){return e.w("<dt>").f(t.get(["searchStringName"],!1),t,"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["searchString"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'').f(t.get(["searchStringName"],!1),t,"h").w(" contains the string ").f(t.get(["searchString"],!1),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="').f(t.get(["criterion"],!1),t,"h").w('"></button></div></dd>')}function i(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchReference"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["reference"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'').h("i18n",t,{},{id:"searchReference"},"h").w(" contains the string ").f(t.get(["reference"],!1),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="reference"></button></div></dd>')}function o(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchTitle"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["title"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'').h("i18n",t,{},{id:"searchTitle"},"h").w(" contains the string ").f(t.get(["title"],!1),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="title"></button></div></dd>')}function a(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchContent"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["content"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'').h("i18n",t,{},{id:"searchContent"},"h").w(" contains the string ").f(t.get(["content"],!1),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="content"></button></div></dd>')}function s(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchQuestionFeatureType"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["widgetType"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove criterion" data-authorapi-selector="remove-criterion-btn" data-criterion="widgetType"></button></div></dd>')}function l(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchStatus"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.getPath(!1,["status","label"]),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'Status is ').f(t.getPath(!1,["status","label"]),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="status"></button></div></dd>')}function u(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchWorkflowState"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["filteredWorkflowState"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove search filter: \'').h("i18n",t,{},{id:"searchWorkflowState"},"h").w(" contains the string ").f(t.get(["filteredWorkflowState"],!1),t,"h").w('\'" data-authorapi-selector="remove-criterion-btn" data-criterion="filteredWorkflowState"></button></div></dd>')}function c(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchQuestionReference"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["questionReference"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove criterion" data-authorapi-selector="remove-criterion-btn" data-criterion="questionReference"></button></div></dd>')}function d(e,t){return e.w("<dt>").h("i18n",t,{},{id:"searchSourceNote"},"h").w(':</dt><dd class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').f(t.get(["sourceNote"],!1),t,"h").w('</div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove criterion" data-authorapi-selector="remove-criterion-btn" data-criterion="sourceNote"></button></div></dd>')}function f(e,t){return e.w('<dt data-authorapi-selector="all-tags-title">').h("i18n",t,{},{id:"searchAllTags"},"h").w(":</dt>")}function p(e,t){return e.w('<dt data-authorapi-selector="either-tags-title">').h("i18n",t,{},{id:"searchEitherTags"},"h").w(":</dt>")}function h(e,t){return e.w('<dt data-authorapi-selector="exclude-tags-title">').h("i18n",t,{},{id:"searchExcludeTags"},"h").w(":</dt>")}return e.register("shared/searchState",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,a.__dustBody=!0,s.__dustBody=!0,l.__dustBody=!0,u.__dustBody=!0,c.__dustBody=!0,d.__dustBody=!0,f.__dustBody=!0,p.__dustBody=!0,h.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},28667:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<li class="').x(t.get(["isSelected"],!1),t,{block:n},{}).w('lrn-text-word-wrap" tabindex="-1" data-authorapi-selector="suggested-tag">').f(t.get(["typeHighlighted"],!1),t,"h",["s"]).w(" ").f(t.get(["nameHighlighted"],!1),t,"h",["s"]).w("</li>")}function n(e,t){return e.w("lrn-autocomplete-selected ")}return e.register("shared/suggestedTag",t),t.__dustBody=!0,n.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},47457:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-label-group"><div class="lrn-label-group-inner"><div class="lrn-label lrn-text-small">').h("i18n",t,{},{id:n,defaultValue:r},"h").w(": <strong>").h("i18n",t,{},{id:i,defaultValue:o},"h").w('</strong></div><button type="button" class="lrn-label-group-btn lrn-i-cross" aria-label="Remove tag" data-authorapi-selector="delete-btn"></button></div></div>')}function n(e,t){return e.f(t.get(["type"],!1),t,"h")}function r(e,t){return e.f(t.get(["type"],!1),t,"h")}function i(e,t){return e.f(t.get(["name"],!1),t,"h")}function o(e,t){return e.f(t.get(["name"],!1),t,"h")}return e.register("shared/tag",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},46804:(e,t,n)=>{var r,i;r=[n(82462)],void 0===(i=function(e){function t(e,t){return e.w('<div class="lrn-autocomplete-wrapper">').x(t.get(["isBasic"],!1),t,{block:n},{}).w('<div class="lrn-form-control lrn-tags-search ').x(t.get(["hasTags"],!1),t,{block:r},{}).w('"><ul data-authorapi-selector="tag-search-container"><li class="lrn-tags-search-input-wrapper" data-authorapi-selector="tag-search-input-wrapper"><input id="').f(t.get(["inputId"],!1),t,"h").w('" autocomplete="off" type="text"data-authorapi-selector="tag-search-input"').nx(t.get(["hasTags"],!1),t,{block:i},{}).w("></li></ul></div>").x(t.get(["isBasic"],!1),t,{block:o},{}).w('<ul class="lrn-autocomplete lrn-list-unstyled" data-authorapi-view="tag-search-suggestions"></ul></div>')}function n(e,t){return e.w('<div class="lrn-input-group lrn-input-group-lg">')}function r(e,t){return e.w("lrn-tag-search-has-option")}function i(e,t){return e.w('placeholder="').h("i18n",t,{},{id:"tagPlaceholder"},"h").w('"')}function o(e,t){return e.w('<button class="lrn-input-group-btn lrn-i-arrow-small"type="button"data-authorapi-selector="expand-advanced"data-authorapi-target="tags-advanced"aria-label="Show advanced search"></button></div>')}return e.register("shared/tagSearch",t),t.__dustBody=!0,n.__dustBody=!0,r.__dustBody=!0,i.__dustBody=!0,o.__dustBody=!0,t}.apply(t,r))||(e.exports=i)},82462:(e,t,n)=>{var r,i;r=[n(7324),n(9146)],void 0===(i=function(e,t){"use strict";return t.helpers=t.helpers||{},t.helpers.tap=function(e,t,n){if("function"!=typeof e)return e;var r,i="";return r=t.tap((function(e){return i+=e,""})).render(e,n),t.untap(),r.constructor!==t.constructor?r:""!==i&&i},t.helpers.i18n=function(n,r,i,o){if(o&&o.id){var a=r.get("i18n"),s=o.id;s=t.helpers.tap(s,n,r);var l=a?a.get(s):void 0;return e.isUndefined(l)&&(l=e.isUndefined(o.defaultValue)?s:t.helpers.tap(o.defaultValue,n,r)),n.write(l)}console.log("No condition given in the i18n helper!")},t}.apply(t,r))||(e.exports=i)},21706:e=>{e.exports={hours:"Hours",minutes:"Minutes",saveButton:"Save",duplicateButton:"Duplicate item",backButton:"Back",loadingText:"Loading",labelPublished:"Published",labelUnpublished:"Unpublished",labelArchived:"Archived",labelAllItems:"All Items",modalClose:"Close",pasteCSV:"Paste CSV data below:",previewData:"Preview your data below:",closeButtonAriaLabel:"Close",editorAddButton:"Add new",editorLayoutToggle:"Layout",editorDeleteButton:"Delete",editorDeleteConfirmButton:"Confirm?",editorEditButton:"Edit",editorEditMode:"Edit Mode",editorToggleEdit:"Edit",editorTogglePreview:"Preview",editorShowAnswers:"Show Answers",editorActivityCountWarning:"Warning: This Item is used in Activities. Any changes will impact all Activities that use this Item.",editorDescriptionLengthError:"Description must be a string with a maximum length of 250 characters.",itemEditStandardsButton:"Standards",itemEditMoveButton:"Move",itemEditHistoryButton:"History",dataTableHeading:"Data Table",editorLayoutHeading:"Layout options",editorLayoutSingleColumn:"Single column",editorLayout3070:"30 | 70",editorLayout5050:"50 | 50",editorLayout7030:"70 | 30",editorLayout4060:"40 | 60",editorLayout6040:"60 | 40",editorLayoutT:"T-Layout",editorLayoutTabsTitleNoColumns:"No columns",editorLayoutTabsTitleLeft:"Left column",editorLayoutTabsTitleRight:"Right column",editorLayoutTabsSubtitle:"Tabs",editorLayoutEnableSlider:"Make vertical divider visible",editorLayoutTabsDescription:"Create two tabs in this area",editorLayoutScrollSubtitle:"Enable scrolling for long content",editorLayoutCancel:"Cancel",editorLayoutOK:"OK",editorLayoutApply:"Apply",adaptiveTabApplyButtonLabel:"Apply",editorLayoutTabsDivider:"Make vertical divider visible",backWithUnsavedChangesItem:"You have unsaved changes to this item.\nAre you sure you want to return to the list view?",backWithUnsavedChangesQuestionFeature:"You have unsaved changes to this question/feature.\nAre you sure you want to go back?",typeChangeWithUnsavedChangesQuestionFeature:"You have unsaved changes.\nNavigating away will lose those saved changes.",unsavedChangesNavigateConfirm:"You have unsaved changes to this item. Do you really want to navigate to a new page?",titlePlaceholderText:"Say something about this item",titleLabel:"Title:",referenceLabel:"Reference:",settings:"Settings",settingsLayout:"Layout",settingsDetails:"Details",settingsTags:"Tags",settingsDataTable:"Data table",settingsActions:"Actions",settingsConfirmDiscard:"Discard changes?",settingsConfirmDiscardYes:"Yes",settingsConfirmDiscardNo:"No",settingsApplyChanges:"Apply",settingsCancel:"Cancel",settingsReferenceLabel:"Reference",referenceDescription:"The unique identifying code for an item.",settingsTitleLabel:"Title",titleDescription:"A friendly title used to help identify content. Max 150 characters.",settingsStatusLabel:"Status",statusOptionsPublished:"Published",statusOptionsUnpublished:"Unpublished",statusOptionsArchived:"Archived",settingsDescriptionLabel:"Description",descriptionDescription:"Describe the item for other authors. Max 250 characters.",settingsScoringTypeLabel:"Scoring type",scoringTypeOptionsPerQuestion:"Per Question",scoringTypeOptionsDichotomous:"Dichotomous",scoringTypeOptionsDependent:"Dependent (EBSR)",settingsSourceLabel:"Source",sourceDescription:"Capture the source of the item content.",settingsNoteLabel:"Notes",noteDescription:"Make notes against the item.",settingsAcknowledgementsLabel:"Acknowledgements",acknowledgementsDescription:"Acknowledgements to contributors of the item content.",settingsDifficultyLabel:"Difficulty level",dataTableContinue:"Continue",dataTableReset:"Reset",dataTableConfirm:"Confirm?",dataTablePreviewBack:"Edit",dataTableHeader:"Add CSV data below:",itemLayoutTabLabel:"Tabs",itemLayoutColumnLabel:"Column",itemLayoutTabDescription:"Create two tabs",itemLayoutLeftColumnLabel:"Left",itemLayoutRightColumnLabel:"Right",itemLayoutVerticalDividerLabel:"Show vertical divider",itemLayoutEnableScrollingLabel:"Enable scrolling for long content",itemLayoutActionLabel:"Apply",settingsActionBuilderTitle:"Action builder",settingsActionBuilderSubtitle:"Add special behaviors to the item's content",settingsActionBuilderIntroMessage:"Enter an event-action JSON object. Your code will be validated.",settingsActionBuilderInvalidJSONMessage:"Invalid JSON. Please check your input and try again.",settingsActionBuilderIncompatibleJSONMessage:"Incompatible JSON. Please check your input and try again.",settingsActionBuilderShowSource:"Show source",settingsActionBuilderHideSource:"Hide source",settingsActionBuilderPreview:"Preview",settingsActionBuilderAddAction:"Add action",settingsActionBuilderStepTitle:"Action %number%",settingsActionBuilderDelayLabel:"Action delay in seconds (optional)",settingsActionBuilderActionArgsLabel:"Action arguments",settingsActionBuilderActionTargetLabel:"Action target",settingsActionBuilderEventOriginLabel:"Event origin",settingsActionBuilderEventNameLabel:"Event name",settingsActionBuilderActionNameLabel:"Action name",settingsActionBuilderQuestionsOptGroupLabel:"questions",settingsActionBuilderFeaturesOptGroupLabel:"features",settingsActionBuilderCurrenItemOptionLabel:"current item",settingsActionBuilderPreviewTitle:"Action builder preview",settingsActionBuilderReloadPreview:"Reload preview",settingsActionBuilderPreviewDummyItemText:'Sample Item for testing the "Go to next Item" action.',settingsActionBuilderPreviewErrorMessage:"Oops, something went wrong! Try reloading the preview.",confirmItemDuplicateTitle:"Duplicate item",confirmItemDuplicatePassagesTitle:"Passages.",confirmItemDuplicateOkButton:"Duplicate",confirmItemDuplicateCancelButton:"Cancel",confirmItemDuplicateWarningMessage:"This item contains passage(s) which would be shared with the duplicated item.",confirmItemDuplicateOptionMessage:"This item contains passage(s) which would be shared with the duplicated item. Would you like to duplicate the passage(s)?",confirmItemDuplicateSharedPassages:"Duplicate the passage(s)",featureTooltipImagetool:"Image tool",featureTooltipCalculator:"Calculator",featureTooltipAudioPlayer:"Audio player",featureTooltipPassage:"Passage",featureTooltipVideoPlayer:"Video player",backWithUnsavedChangesActivity:"You have unsaved changes to this activity.\nAre you sure you want to return to the activity list view?",activityListEmptyState:"Nothing here.",activityListEmptyStateImageURL:"",activityListItemButton:"Create",matchAllTags:"Match all tags",matchAnyTags:"Match at least one tag",activityListEmptyItemCounter:"No Items",activityListSingleItemCounter:"item",activityListPluralItemCounter:"items",activityListMinutesCounter:"minutes",activityListUntitledActivity:"Untitled",activityListReferenceTooltip:"Reference",searchTitleReferenceDescription:"Title / Reference / Description",searchReferenceDescription:"Reference / Description",createAdaptiveActivity:"Create adaptive activity",adaptiveButton:"Adaptive",activityEditAdaptiveConfigurationMessage:"Define your adaptive configuration in the code editor",sourceButton:"Source",settingsButton:"Player",detailsButton:"Details",activityTagsButton:"Tags",activityReferenceDescription:"The unique identifying code for an Activity.",activityDescriptionHeader:"Description",activityDescription:"Enter a description for authors. Max 1000 characters.",activityDifficultyError:"Enter number values only up to %maxValue%",activityItems:"Items",activityItemInfoNotAvailable:"Information not available",activityItemReferenceTooltip:"Reference",activityUntitledItem:"Untitled",activityFindItems:"Find items",activityCreateItem:"Create item",activityRemoveItems:"Remove",activitySettingsDifficultyLabel:"Difficulty level",activitySettingsSeedingExposureLabel:"Seeding exposure",activitySettingsOperationalExposureLabel:"Operational exposure",activitySettingsItemsAverageDifficultyLabel:"Items average difficulty",activitySource:"Source",activitySourceError:"Your JSON appears to be invalid. Review it for errors and try again.",activitySourceMissingAdaptiveError:"Configuration for adaptive in the source has been removed or misspelled. Cancel to fix any errors. OK will delete existing adaptive configurations for this activity.",activitySourceRenderingTypeError:'Rendering type has to be "assess" or "inline".',activityTitlePlaceholderText:"Say something about this activity",activityRestrictedOrMissingItems:"This Activity contains restricted or missing Items. The information in those Items is not available or shown in the preview.",assessPlayerLayout:"Choose a preconfigured template for the player",assessPlayerAdministrationSettings:"Administration settings",assessPlayerPlaybackSettings:"Playback settings",assessPlayerScoringSettings:"Scoring settings",assessPlayerTextSettings:"Text settings",assessPlayerTimeSettings:"Time based settings",assessOptionsSeconds:"seconds",assessTitle:"Activity title",assessSubtitle:"Activity subtitle",assessActivityTime:"Activity time",assessReadingTime:"Reading time",assessLimitType:"Force submit after activity time expires",assessShuffle:"Shuffle order of items",assessAdminPanel:"Show Administration panel",assessAdminPanelDescription:"Launch the administration panel during an assessment via keyboard: (Windows) control+shift+m (Apple Mac) ^+⇧+m\n\nA password is required to access the administration panel. Set the password and generate a security hash.",assessAdminPasswordLabel:"Password protection",assessAdminPasswordButton:"Generate",assessAdminPasswordError:"Password field can not be empty and its value needs to be hashed.",assessAdminOptionsLabel:"Available options to the administrator",assessAdminShowSave:"Save & exit",assessAdminShowExtend:"Extend activity time",assessAdminShowExit:"Exit & discard",assessConfigMain:"Standard",assessConfigHorizontal:"Long content",assessConfigHorizontalFixed:"Long content with sticky footer",assessDistractorRationale:"Show Distractor Rationale per question",assessDistractorRationaleResponseLevel:"Show Distractor Rationale per response (if available)",assessFontSizeLabel:"Font size",assessFontSizeDescription:"Applies a standard font size across the content when using default text styles.",assessFontSizeSmall:"Small",assessFontSizeNormal:"Normal",assessFontSizeLarge:"Large",assessFontSizeXLarge:"X Large",assessFontSizeXXLarge:"XX Large",assessWarningTime:"Warn when approaching end of activity",assessReadingModeWarningTime:"Warn when approaching end of reading time",assessReadingModeFirstItemOnReadingTimeCompletion:"Go to first item on reading time completion",assessAutoSave:"Auto save at intervals of",assessAutoSaveUI:"Enable a visual indicator when the test is auto saved",assessAutoSaveDisableForceSaveOnQuit:"Disable force save on quit",assessIdleTimeout:"Trigger inactivity timeout warning when inactive for",assessIdleTimeoutCountdown:"Allow student to dismiss timeout warning within",assessScrollingIndicator:"Show scrolling indicator",assessScrollToTop:"Scroll to top on item change",assessShowAcknowledgements:"Show acknowledgements",assessSkipSubmitConfirmation:"Display confirmation window on submission",assessSubmitCriteria1:"Allow submission only when",assessSubmitCriteria2:"% of the questions are",assessSubmitCriteriaAttempted:"Attempted",assessSubmitCriteriaValid:"Answered correctly",assessSubmitCriteriaThresholdError:"Enter number values only up to %maxValue%",assessWarningOnChange:"Warn student on unattempted question(s)",assessValidation:"Allow player side scoring",resetIntroOutroItem:"reset",customizeIntroOutroItem:"customize",customizedIntroOutroItem:"Customized",welcomeScreen:"Welcome screen",exitScreen:"Exit screen",introOutroEnable:"Enable",activityEditResourceItemText:"Resource item",activityEditSelectResourceItemButtonText:"Select",activityEditResourceItemIconTooltip:"Learners can access the Resource item in the Resources panel during an activity. Items with questions should not be used.",resourceItemPickerInfoText:"Select an item to be provided to learners within the Resources panel for reference during the activity. Items can include features such as passages, files, audio and video. Items with questions should not be used.‌",activityPlayerTab:"Player",activityInlineTab:"List",itemReference:"Item Reference",showCustomizeRegionSettings:"Show options",hideCustomizeRegionSettings:"Hide options",defaultIntroItem:"Default Intro Item",defaultOutroItem:"Default Outro Item",duplicateActivityButton:"Duplicate activity",duplicateActivityShareCreateSubTitle:"Share items or create new.",duplicateActivityMessageTitle:"Duplicate activity",duplicateActivityMainMessage:"Activity and settings will be duplicated. Items will be shared with the new activity.",duplicateActivityMultiIbkWarning:"You cannot make new copies of the items within this activity as some originate from external item banks.",duplicateActivityShallowMessage:"Items in the activity will not be duplicated.",duplicateActivityDeepMessage1:"By default, all items will be shared in the new activity.",duplicateActivityDeepMessage2:"If new copies are required, please check the box below.",duplicateActivityDeepMessage3:"Creating new copies may take several minutes.",duplicateActivityContentTitle:"Full content duplication",duplicateActivityDuplicateSharedPassages:"Create new copies of passages within items",duplicateActivityItemsAndWidgets:"Create new copies of all items",duplicateActivityConfirmButton:"Duplicate",duplicateActivitySuccess:"Successfully duplicated!",duplicateActivityCancel:"Cancel",duplicateActivityBack:"Back",duplicateActivitySuccessMessage:"Start editing the new activity below.",duplicateActivityEdit:"Edit activity",duplicateActivityCloseButton:"Close",duplicateActivityWarning:"Your current changes are not saved and will not be applied if you make a deep copy of the activity. Do you want to continue with duplication?",duplicateActivityTimerMessageJustNow:"Started just now.",duplicateActivityTimerMessage:"Started %amount% seconds ago.",duplicateActivityReferenceMessage:"The new activity reference will be:",duplicateActivityNewActivityWarning:"You cannot duplicate an unsaved new activity. Please save the activity and try again.",duplicateActivityShallowDuplicateSuccessMessage:"Your activity has been successfully duplicated. You can begin editing the duplicated activity below (click to dismiss).",duplicateActivityShallowDuplicateMissingItemsError:"You are on the duplicated activity which failed to save because it contains missing items. The information in those items is not available or shown in the preview. Remove or replace the missing items to save this duplicated activity.",duplicateActivityShallowDuplicateDefaultError:"You are on the duplicated activity which failed to save because of an unknown error. Please try to save this duplicated activity again.",duplicateActivityError:"Error",duplicateActivityErrorMessage:"There was an error in duplicating the activity. Try again?",duplicateActivityErrorTryAgain:"Try again",itemBankListDefaultItemBank:"Default item bank",itemBankListLabel:"Item Bank:",itemBankListSwitch:"Switch to:",activityCustomizeLabels:"Customize text labels",activityCustomizeLabelsLabel:"Text label options",activityCustomizeLabelsDescription:"Change and adapt the default text descriptions that are displayed in the preconfigured layouts.",activityResetLabels:"Reset",activityResetLabelsConfirm:"Confirm?",activityEditButtonsSectionLabel:"Buttons",activityEditMessagingSectionLabel:"Messaging",activityEditTitleSectionLabel:"Title",activityEditToolTipSectionLabel:"Tooltip",activityEditOtherSectionLabel:"Other",activityWithUnpublishedItemsPreviewDisabled:"Preview is disabled in this activity because it contains unpublished items. Publish the items or remove them to enable preview.",playerTemplateTab:"Template",playerTemplateSourceTab:"Source",playerTemplateCreateButton:"Create",playerTemplateEditButton:"Edit",playerTemplateDeleteButton:"Delete",playerTemplateConfirmDeleteButton:"Confirm?",playerTemplateCreateButtonDescription:"New player template",playerTemplateSettingsTitle:"Player template",playerTemplateName:"Player template name:",playerTemplateNamePlaceholder:"Name this template",playerTemplateNameWarning:"This player template requires a name to be saved.",playerTemplateBreakpointWarning:"This screensize is not supported",playerTemplateBreakpointWarningDescription:"Creating player templates works best on 800px wide and above.",playerTemplateAssignedHeading:"Assigned elements",playerTemplateUnassignedHeading:"Unassigned elements",playerTemplateUnassignedDescription:"Hold and drag elements to a region to assign",playerTemplateRegionCollapse:"Collapse",playerTemplateRegionExpand:"Show all",playerTemplateRegionEmpty:"empty",playerTemplateRegionTop:"Top",playerTemplateRegionTopRight:"Top right",playerTemplateRegionTopLeft:"Top left",playerTemplateRegionItems:"Item",playerTemplateRegionRight:"Right",playerTemplateRegionBottom:"Bottom",playerTemplateRegionBottomLeft:"Bottom left",playerTemplateRegionBottomRight:"Bottom right",playerTemplateRightInfo:"Hold and drag elements to configure the player",playerTemplateSetTextLabels:"Set text labels",playerTemplateDropNotAllowed:"This element cannot be in this region",playerTemplateStickyFooterLabel:"Sticky footer",playerTemplateSourceInfo:"Adjust the template using the source JSON",playerTemplateSourceHiddenChangesWarning:"Some configuration changes may not be reflected in the 'Template' tab. To preview all changes, select 'Preview' from the main page.",playerTemplateSourceInvalidJsonError:"Invalid JSON provided. Review for errors.",playerTemplateDiscardJson:"Discard JSON changes?",playerTemplateDiscardJsonDescription:"Review invalid JSON before proceeding to avoid losing changes.",playerTemplateDiscardJsonCancel:"Cancel",playerTemplateDiscardJsonConfirm:"Discard changes",playerTemplateRemoveElement:"Remove",activityEditItemAddedOnSave:"This Item will be added to the Activity on save",activityEditItemAddSuccess:"Item successfully added to the Activity",activityEditItemUnsavedChangesAlert:"You have unsaved changes to this item.\nAre you sure you want to return to the activity?",title_element:"Title",pause_button:"Pause",timer_element:"Timer",reading_timer_element:"Reading Timer",itemcount_element:"Item Count",verticaltoc_element:"Vertical Table of Contents",horizontaltoc_element:"Horizontal Table of Contents",save_button:"Save",fullscreen_button:"Fullscreen",reviewscreen_button:"Review Screen",accessibility_button:"Accessibility",calculator_button:"Calculator",flagitem_button:"Flag Item",notepad_button:"Notepad",stickynote_add_button:"Add Sticky Note",stickynote_visibility_button:"Show/Hide Sticky Notes",drawing_mode_button:"Draw",drawing_visibility_button:"Show/Hide Drawings",next_button:"Next",previous_button:"Previous",progress_element:"Progress Bar",annotationsTools:"Annotation tools",annotationsToolsDescription:"Enables drawing, highlighting and note-taking functionality.",annotationsDrawing:"Enable drawing",annotationsDrawingDescription:"Drawing",annotationsTexthighlight:"Enable highlight",annotationsTexthighlightDescription:"Highlight",annotationsNotepad:"Enable notepad",annotationsNotepadDescription:"Notepad",annotationsStickynote:"Enable sticky notes",annotationsStickynoteDescription:"Sticky notes",itemListLastUpdated:"Last updated",itemListDateCreated:"Created",itemListEmptyState:"Nothing here.",itemListErrorState:"Search failed. Try using multiple search criteria to improve search performance.",itemListEmptyStateImageURL:"",itemListNewItemButton:"New Item",itemListItemButton:"Item",itemListPreviousButton:"Previous",itemListNextButton:"Next",itemListCountTo:"to",itemListCountOf:"of",itemListAuthorPrep:"By",itemListRetrievingTotal:"Retrieving...",itemListDisplayTotal:"Display total",itemListUntitledItem:"Untitled",itemListReferenceTooltip:"Reference",dateTimeLocale:"",toolTipDateTimeSeparator:"at",toolTipDateFormat:"ll",toolTipTimeFormat:"LT",sortTypeButton:"Sort",sortTypeUpdated:"Last Updated",sortTypeCreated:"Created",sortTypeByNewest:"Newest First",sortTypeByOldest:"Oldest First",sortTypeAlphabetical:"Reference",sortTypeAlphabeticalTitle:"Title",sortTypeAZ:"A–Z",sortTypeZA:"Z–A",searchHierarchy:"Hierarchy",searchAllTags:"All Tags",searchButton:"Search",searchClearAllButton:"Clear",searchEitherTags:"Either Tags",searchExcludeTags:"Exclude Tags",searchPlaceholder:"Find by content",searchQuestionFeatureType:"Question / Feature Type",searchQuestionReference:"Question Reference",searchReference:"Reference",searchReferencePlaceholder:"Find by reference",searchBeginningReferencePlaceholder:"Include beginning e.g.'XXX' of 'XXX123'",searchAdvancedPlaceholderContent:"Find by content / advanced search",searchAdvancedPlaceholderReference:"Find by reference / advanced search",searchAdvancedPlaceholderTitle:"Find by title / advanced search",searchContent:"Content",searchContentPlaceholder:"Find by content",searchTitle:"Title",searchTitlePlaceholder:"Find by title",searchSourceNote:"Source / Note",searchStatus:"Status",searchTags:"Tags",searchWorkflowState:"Workflow state",searchFieldTogglerInfo:"Toggle information about this search field",searchFieldReferenceTokenInfo:"For optimal results, search for references using between 4 and 12 characters. Outside this range, please use the beginning characters of the reference.",enableLeftPartialRefMatchLabel:"Enable reference search without using the beginning of the reference",enableLeftPartialRefMatchText:"Enabling reference search without using the beginning of the reference may cause search performance issues. If you encounter issues, try using multiple search criteria to improve performance.",standardsButtonText:"STANDARDS",standardsFilterText:"Standard",taggingInputLabel:"Attach tags to this item",taggingEmptyState:"Nothing here.",taggingTagsLabel:"Attached tags:",taggingSuggestionsTitle:"Suggestions:",taggingSuggestionsEmpty:"Nothing found.",taggingSearchPlaceholder:"Find",taggingActionLabel:"Apply",activityTaggingInputLabel:"Attach tags to this activity",activityTaggingEmptyState:"Nothing here.",activityTaggingTagsLabel:"Attached tags:",activityTaggingSuggestionsTitle:"Suggestions:",activityTaggingSuggestionsEmpty:"Nothing found.",activityTaggingSearchPlaceholder:"Find",itemListQuestionCountAriaLabel:"Number of questions",itemListTagHierarchyPlaceholder:"Category",tagCountAriaLabel:"Number of tags",tagFlyoutCloseButton:"Close",noTagsPlaceholder:"No Tags",viewAllTagsButton:"All Tags",questionFlyoutCloseButton:"Close",questionEditQuestionsTab:"Questions",questionEditFeaturesTab:"Features",questionEditItemCountWarning:"You are editing a passage which is shared among %number% Item(s)",removeItemsSuccessMessage:"%number% Item(s) successfully removed",questionEditMissingValidationError:"Set a correct answer to save.",tagPlaceholder:"Find by tags",allTagsPlaceholder:"Find tags",eitherTagsPlaceholder:"Find either tags",cannotParseCsv:"The CSV cannot be parsed, please try again!",csvEmptyHeader:"CSV header cannot be empty",dataTableButton:"Data",csvColumnsUnaligned:"All CSV rows require the same number of columns",questionPreviewHeading:"Preview",questionPreviewCancel:"Cancel",questionPreviewSelect:"Select",searchPassagePlaceholder:"Find passage by content",findExistingPassage:"Find existing passage",itemPreviewHeading:"Preview",itemReadOnly:"Read-only",activityEditAddItems:"Add%number%Item(s)",activityEditPickIntro:"Pick intro Item",activityEditPickOutro:"Pick outro Item",addItemsSuccessMessage:"%number% Item(s) successfully added",itemClosePreviewHeading:"Close preview",backWithSelectedItems:"You have selected %number% Item(s) but not added them to the activity.\nAre you sure you want to return to the Activity edit view?",backWithIntroItem:"You have selected an intro Item but not added it to the Activity. \nAre you sure you want to return to the Activity edit view?",backWithOutroItem:"You have selected an outro Item but not added it to the Activity. \nAre you sure you want to return to the Activity edit view?",emptyActivityMessage:"This Activity is empty, please add Items.",overlayHeader:"Activity Duplication",overlayGenericMessage:"Message",overlayDuplicatedActivity:"Duplicated activity",overlayCurrentActivity:"Current activity",audioRecorderRecordButton:"Record audio",audioRecorderUploadButton:"Upload audio",audioRecorderAudioInputLabel:"Audio input",audioRecorderAudioInputEmpty:"No audio inputs available",audioRecorderFeedbackPreRecording:"Click here to begin recording",audioRecorderFeedbackBeginRecording:"Recording begins in",audioRecorderFeedbackRecording:"Recording",audioRecorderButtonRecordingPause:"Pause",audioRecorderRecordingFinishButton:"Finish",audioRecorderRecordingResumeButton:"Resume",audioRecorderFeedbackRecordingPaused:"Recording paused",audioRecorderPlaybackPlayButton:"Play",audioRecorderPlaybackPauseButton:"Pause",audioRecorderPlaybackStopButton:"Stop",audioRecorderPlaybackResumeButton:"Resume",audioRecorderFeedbackPlaybackPaused:"Playback paused",audioRecorderFeedbackPlaybackStopped:"Playback stopped",audioRecorderReplaceRecording:"A previous recording exists. If you continue, it will be discarded. Are you sure you want to discard existing recording?",audioRecorderDiscardChanges:"Discard changes?",audioRecorderDiscardChangesYesButton:"Yes",audioRecorderDiscardChangesNoButton:"No",audioRecorderMainPanelOkButton:"OK",audioRecorderMainPanelCancelButton:"Cancel",audioRecorderUploaded:"Uploaded",audioRecorderUploading:"Uploading…",audioRecorderUploadSuccessful:"Upload successful",videoRecorderRecordButton:"Record video",videoRecorderUploadButton:"Upload video",videoRecorderReplaceRecording:"A previous recording exists. If you continue, it will be discarded. Are you sure you want to discard existing recording?",videoRecorderUploadInformation:"Recording will be uploaded and optimized.",videoRecorderDiscardChanges:"Discard changes?",videoRecorderDiscardChangesYesButton:"Yes",videoRecorderDiscardChangesNoButton:"No",videoRecorderMainPanelOkButton:"OK",videoRecorderMainPanelCancelButton:"Cancel",videoRecorderUploaded:"Uploaded",videoRecorderUploading:"Uploading…",videoRecorderUploadSuccessful:"Upload successful",assetUploaderUploading:"Uploading&hellip;",assetUploaderAddFile:"Drag &amp; drop or click to add %fileType%",assetUploaderReplaceFile:"Replace %fileType%",assetUploaderReplaceFileDescription:"(Drag &amp; drop or click to replace %fileType%)",assetUploaderUploadFailed:"Uploading failed. Please try again.",assetUploaderAboveMaxFiles:"Please upload %maxFiles% file at a time",assetUploaderAboveMaxSize:"%assetName% could not be uploaded, because it has a size of %assetSize%; which exceeds the maximum file size of %maxSize%.",assetUploaderInvalidFileType:"%assetName% could not be uploaded. Please only upload %fileType% files of type %friendlyTypes%.",assetUploaderAlternativeText:"Alternative Text",assetUploaderImageAlignment:"Image Alignment",assetUploaderImageAlignmentNone:"None",assetUploaderImageAlignmentLeft:"Left",assetUploaderImageAlignmentCenter:"Center",assetUploaderImageAlignmentRight:"Right",assetUploaderOverrideDimensions:"Override image dimensions",assetUploaderWidth:"Width (px)",assetUploaderHeight:"Height (px)",assetUploaderLockAspectRatio:"Lock aspect ratio",assetUploaderScaleDownDescription:"If your image is larger than the content container, it will be scaled down automatically to fit. Preventing scaling will make the image conform to the image dimensions, regardless of container size.",assetUploaderPreventScaling:"Prevent scaling",assetUploaderReset:"Reset",assetUploaderCancel:"Cancel",assetUploaderOK:"OK",assetUploaderMoreOptions:"More options",assetUploaderSelfHostedFile:"Source URL (host your own %fileType%):",assetDisplayName:"Display Name:",ariaLiveSearchResultsUpdated:"Search results updated",ariaLiveSearchFiltersCleared:"Search filters cleared",ariaLiveListSortedBy:"List sorted by %sortField%, %sortOrder%",mathGenIntroHeading:"Create a Math Question Generator Expression",mathGenIntroDescription:"Define a set of parameters and then use those parameters to generate multiple variations of a Cloze math question.\nThe learner will see one randomly selected question from the generated set.",mathGenIntroLaunch:"Create expression",mathGenIntroContinue:"Continue creating expression",mathGenSummary:"There are %possibilities% for this item. Use the edit button to change the Math Question Generator Expression settings.",mathGenSummaryPossibilities:"%possibilityCount% possible questions generated",mathGenSummaryHeading:"Math Question Generator Expression",mathGenSummaryLaunch:"Edit",mathGenSummaryPreview:"Expression preview",mathGenSummaryValidationHeading:"Correct answer settings",mathGenSummaryValidationFormat:"Scoring method",mathGenSummaryValidationDecimalPlaces:"Decimal places",mathGenDecimalTooltip:"Select the number of significant decimal places",mathGenThousandsTooltip:"Select a thousands separator. Options are: dot or comma",mathGenTakeoverTitle:"Math Question Generator",mathGenDisabledTableEditHeader:"Data table cannot be edited",mathGenDisabledTableEditTopText:"This data table cannot be edited from here as the Math Question Generator has created it.",mathGenDisabledTableEditBottomText:"If you need to make changes, go back and edit the Math Question Generator question type in this item.",mathGenErrorValidationEmpty:"Invalid expression! The criteria you have set does not return valid results. Please edit your expression or question.",mathGenErrorValidationServerError:"There's been a problem with your request. Please try again later.",mathGenErrorGenerateEmpty:"Could not generate data. Please edit your expression or question.",mathGenErrorGenerateServerError:"There's been a problem with your request. Please try again later.",mathGenNavParameters:"Parameters",mathGenNavQuestion:"Expression & question",mathGenNavValidation:"Answer formats",mathGenNavGenerate:"Generate",mathGenNavDirectionNext:"Next",mathGenNavDirectionPrevious:"Back",mathGenApply:"Apply",mathGenSaveAndQuit:"Save and retry later",mathGenParametersHeading:"Create parameters and set their values",mathGenParametersInstructions:"There are two ways to define the parameter values, either as a list or a range. The values can either be integers or decimal values up to three decimal places.",mathGenParametersInstructionsList:'Value type "List" — Enter the values you wish to use, separated with a comma.',mathGenParametersInstructionsRange:'Value type "Range" — Set the minimum, maximum, and step for the range. The step determines the increment between each value.',mathGenParametersAdd:"Add parameter",mathGenParameterName:"Parameter name",mathGenParameterType:"Value type",mathGenParameterMinimum:"Min",mathGenParameterMaximum:"Max",mathGenParameterStep:"Step",mathGenParameterList:"List values",mathGenParameterRemove:"Remove",mathGenParameterNameEdit:"Edit parameter name",mathGenParameterMinimumEdit:"Edit parameter min",mathGenParameterMaximumEdit:"Edit parameter max",mathGenParameterStepEdit:"Edit parameter step",mathGenParameterListEdit:"Edit parameter list using comma separated values",mathGenExpressionHeading:"Create the correct answer with the parameter(s)",mathGenExpressionInstructions:"Use the keypad to input an expression that is equivalent to the correct answer to the question.\nUse the parameter dropdown selector %parameterIcon% in the keypad to insert your parameter(s).",mathGenExpressionInsertButton:"Use expression",mathGenQuestionHeading:"Compose the question",mathGenQuestionInstructions:"Write out your question stem in the field below. Click the %expressionIcon% button to add your expression in the content or insert your parameter(s) using the %parameterIcon% dropdown selector in the toolbar.",mathGenValidationRetry:"Retry",mathGenValidationHeading:"Select the correct answer format(s)",mathGenValidationInstructions:"Select all of the correct answer formats that you would like to accept from the list of possible solutions.",mathGenValidationOptionsHeading:"More options",mathGenValidationOptionsInstructions:"Use these options to refine your accepted response.",mathGenValidationSeed:"Original expression",mathGenValidationEvaluate:"Evaluated",mathGenValidationFactor:"Factorised",mathGenValidationExpand:"Expanded",mathGenValidationCancel:"Expanded",mathGenValidationExpandPowerExp:"Expanded",mathGenValidationExpandTrig:"Expanded",mathGenValidationExpandLog:"Expanded",mathGenValidationEq:"Zeroed",mathGenValidationGe:"Zeroed",mathGenValidationGt:"Zeroed",mathGenValidationLe:"Zeroed",mathGenValidationLt:"Zeroed",mathGenValidationFraction:"Fraction",mathGenValidationMixedNumber:"Mixed number",mathGenValidationDecimal:"Decimal value",mathGenValidationScientific:"Scientific",mathGenValidationRadsimp:"Rationalized",mathGenValidationPowsimp:"Combined",mathGenValidationTrigsimp:"Alternate",mathGenValidationLogcombine:"Combined",mathGenValidationDot:"Dot",mathGenValidationComma:"Comma",mathGenValidationSpace:"Space",mathGenValidationSpaceDot:"Space, dot",mathGenValidationSpaceComma:"Space, comma",mathGenValidationScore:"Score (points)",mathGenValidationDecimalSeparator:"Decimal separator",mathGenValidationThousandsSeparator:"Thousands separator",mathGenValidationDecimalPlaces:"Decimal places",mathGenValidationNormalizeArithmetic:"Normalize arithmetic",mathGenGenerateButton:"Generate",mathGenGenerateRegenerateButton:"Regenerate",mathGenGenerateRegenerateWarning:"This will overwrite existing content for this item. Are you sure you want to continue?",mathGenGeneratePlaceHolder:"Generated questions will appear here",mathGenGenerateHeading:"Generate the questions",mathGenGenerateInstructions:"A maximum of %possibilityCount% questions will be returned. After generating, you can refine the results by removing unwanted variations.",mathGenGenerateOriginalExpression:"The original expression.",mathGenGenerateRefineInstructions:"Refine the results by removing unwanted variations.",mathGenGenerateNextPage:"Next",mathGenGeneratePreviousPage:"Previous",mathGenGenerateRowsRemoved:"%value% row(s) were removed successfully.",mathGenUnsavedChangesConfirmation:"You have unsaved changes.\nAre you sure you want to return to the question edit view?",mathGenFormValidationParameterMinInvalidValue:"Min value should be a valid number",mathGenFormValidationParameterMinMinValue:"Min value should not be less than %value%",mathGenFormValidationParameterMinMaxValue:"Min value should not be more than %value%",mathGenFormValidationParameterMaxMinValue:"Max value should not be less than %value%",mathGenFormValidationParameterMaxMaxValue:"Max value should not be more than %value%",mathGenFormValidationParameterMaxInvalidValue:"Max value should be a valid number",mathGenFormValidationParameterNameMinLength:"Name should have at least %value% character(s)",mathGenFormValidationParameterNameMaxLength:"Name should not be longer than %value% character(s)",mathGenFormValidationParameterNamePattern:"Name should only contain letters a-z or A-Z",mathGenFormValidationParameterNameUnique:"Name should be unique",mathGenFormValidationParameterStepInvalidValue:"Step value should be a valid number",mathGenFormValidationParameterStepMinValue:"Step value should not be less than %value%",mathGenFormValidationParameterListFormat:"The range should only contain numbers (to 3 decimal places maximum) and commas without spaces",mathGenFormValidationParameterMinPermutations:"Permutations should not be less than %value%",mathGenFormValidationParameterMaxPermutations:"Permutations should not be more than %value%",mathGenFormValidationExpressionParametersRequired:"Expression should have at least %value% parameter(s)",mathGenFormValidationQuestionResponseRequired:"Question should contain a response",mathGenFormValidationQuestionResponseExceeded:"Question should not contain more than %value% response(s)",mathGenFormValidationQuestionExpressionRequired:"Question should contain the expression",mathGenFormValidationValidationDataFormatRequired:"You need to select at least %value% answer format(s)",mathGenFormValidationValidationDataScoreMinValue:"Score should not be less than %value%",mathGenFormValidationDataSeparatorValue:"The separators for decimal and thousand positions cannot both use the %value% character",mathGenRemoveButton:"Remove",mathGenRemoveButtonConfirmation:"Confirm?",mathGenAriaLiveRemovedParameter:"Removed parameter",linkedStandardsModalTitle:"Standards (%numStandards%)",linkedStandardsModalOkButton:"OK",linkedStandardsModalApplyButton:"Apply",linkedStandardsModalDiscardChangesTitle:"Discard changes?",linkedStandardsModalDiscardChangesYes:"Yes",linkedStandardsModalDiscardChangesNo:"No",linkedStandardsModalEmptyHeader:"Nothing here.",linkedStandardsModalEmptyDescription:"There are no Standards linked to this item.",linkedStandardsModalLinkStandardsButton:"Link Standard",linkedStandardsModalRemoveStandardsButton:"Remove",standardDescriptionAriaLabel:"Standard description",standardCodeAriaLabel:"Standard notation code",standardsBrowserTitle:"Standards",standardsBrowserAuthorityLabel:"Authority:",standardsBrowserPublicationLabel:"Publication:",standardsBrowserTopicLabel:"Subject:",standardsBrowserNextButton:"Next",standardsBrowserDoneButton:"Done",standardsBrowserDiscardChangesTitle:"Discard changes?",standardsBrowserDiscardChangesYes:"Yes",standardsBrowserDiscardChangesNo:"No",standardsBrowserBreadCrumbAriaLabel:"Breadcrumb",standardsBrowserAllBreadCrumb:"All",standardsBrowserSearchEmpty:"No search results yet",standardsBrowserSearchLabel:"Search by standard short code",standardsBrowserCategorySearchLabel:"Browse by category",standardsBrowserCodeSearchLabel:"Search by code",standardsBrowserLoadMoreButton:"Load more",workflowSettingsTitle:"Workflow",workflowNotDefined:"No Workflow is defined, cannot navigate to Workflow settings.",workflowState:"State",workflowUnassigned:"Unassigned",workflowAddCommentLabel:"Add comment",workflowAddCommentButton:"Add",workflowAddCommentPlaceholder:"Add your comment here...",workflowAddCommentNewItemPlaceholder:"Please save this new item before commenting.",workflowAddCommentUnassignedItemPlaceholder:"Assign a state to this item and save to enable commenting.",workflowAddCommentCharLimit:"1000 character limit",historyTitle:"History",historyContentTab:"Content",historyTagsTab:"Tags"}},14442:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function isJsonStringifyBroken(){return!window.JSON||'{"u":"ó"}'!==window.JSON.stringify({u:"ó"})}var __json,JSON;(__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),isJsonStringifyBroken())?("object"!==_typeof(JSON)&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,l=t[e];switch(l&&"object"===_typeof(l)&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)a[n]=str(n,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"===_typeof(rep))for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],l))&&a.push(quote(r)+(gap?": ":":")+i);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l))&&a.push(quote(r)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!==_typeof(t)||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"===_typeof(i))for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),__json=JSON):__json=window.JSON;const __WEBPACK_DEFAULT_EXPORT__=__json},7324:(e,t,n)=>{var r,i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=[n(38291),n(26426),n(35029)],void 0===(i=function(e,t,n){function r(e){return null==e?void 0:e.length}return function(n){return n.mixin({capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},classNames:function(){function e(e){return n.isString(e)?[e]:n.isArray(e)?e:n.isObject(e)?n.filter(n.map(e,(function(e,t){return!!e&&t})),(function(e){return e})):[]}return n.reduce(arguments,(function(t,r){return n.union(t,e(r))}),[]).join(" ")},cloneDeep:function e(t){var r,i;if(!t||"object"!==o(t))return t;if(n.isString(t))return String.prototype.slice.call(t);if(n.isDate(t))return new Date(t.valueOf());if(n.isFunction(t.clone))return t.clone();if(n.isArray(t))r=Array.prototype.slice.call(t);else{if(t.constructor!=={}.constructor)return t;r={}}for(i in t)t.hasOwnProperty(i)&&(r[i]=e(t[i]));return r},delegateEvents:function(e,t,r){for(var i in t){var o=t[i];if(n.isFunction(o)||(o=r[t[i]]),o){var a=i.match(/^(\S+)\s*(.*)$/),s=a[1],l=a[2];o=n.bind(o,r),""===l?e.on(s,o):e.on(s,l,o)}}},getNested:function(e,t){if(e){var n=t.match(/(.+?)\.(.*)/);return n?this.getNested(e[n[1]],n[2]):e[t]}},setNested:function(e,t,r){if(!n.isObject(e)||!n.isString(t)||(t.match(/\[.*\]/)||[]).length>0)return e;for(var i=(t=t.split(".")).length,o=i-1,a=-1,s=e;!n.isNull(s)&&++a<i;){var l=t[a],u=r;if(a!==o){var c=s[l];u=n.isObject(c)?c:{}}n.isUndefined(u)?delete s[l]:s[l]=u,s=s[l]}return e},deleteNested:function(e,t){if(e&&n.isString(t))for(var r=t.split("."),i=e,o=0;o<r.length;o++){var a=r[o];if(o===r.length-1)return void delete i[a];if(!n.isObject(i[a]))return;i=i[a]}},isJsonObject:function(e){return n.isObject(e)&&!n.isFunction(e)&&!n.isArray(e)},isNotEmpty:function(e){return!n.isEmpty(e)},merge:function e(t,r,i){var a=Array.isArray(r),s=a&&[]||{},l=i&&i.treatEmptyStringAsUndefined||!1;if(a)s=r;else{if(n.isUndefined(r)||n.isNull(r))return t;t&&"object"===o(t)&&Object.keys(t).forEach((function(e){s[e]=t[e]})),Object.keys(r).forEach((function(a){n.isUndefined(r[a])||(n.isString(r[a])&&""===r[a].trim()&&!0===l?s[a]=t[a]:"object"!==o(r[a])||n.isNull(r[a])?s[a]=r[a]:t[a]?s[a]=e(t[a],r[a],i):s[a]=r[a])}))}return s},pickDeep:function(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return this.each(r,(function(r){var i=r.split(".");(r=i.shift())in e&&(i.length>0?t[r]?n.extend(t[r],n.pickDeep(e[r],i.join("."))):t[r]=n.pickDeep(e[r],i.join(".")):t[r]=e[r])})),t},sortByKey:function t(r){var i={};return n.each(n.keys(r).sort(),(function(n){var o=r[n];e.isPlainObject(o)&&(o=t(o)),i[n]=o})),i},uuid:t,omitDeep:function e(t,r){var i=n.cloneDeep(t);return function(e,t){e&&"object"===o(e)&&t.forEach((function(t){delete e[t]}))}(i,r),n.keys(i).forEach((function(t){i[t]=e(i[t],r)})),i},deepExtend:function(){var e,t,i,a,s,l,u=arguments[0]||{},c=1,d=r(arguments);if("object"===o(u)||n.isFunction(u)||(u={}),1===d)return u;for(;c<d;c++)if(null!=(s=arguments[c]))for(a in s)if(s.hasOwnProperty(a)){if(e=u[a],u===(i=s[a]))continue;i&&((t=n.isArray(i))||n.isObject(i)&&!n.isFunction(i))?(t?(t=!1,l=[]):l=e&&n.isObject(e)?e:{},u[a]=n.deepExtend(l,i)):void 0!==i&&(u[a]=i)}return u},isArrayOfObjects:function(e){var t=!0;return n.each(e,(function(e){n.isObject(e)||(t=!1)})),t},isArrayOfStrings:function(e){var t=!0;return n.each(e,(function(e){n.isString(e)||(t=!1)})),t}}),n}(n)}.apply(t,r))||(e.exports=i)},67866:(e,t,n)=>{var r,i;function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}r=[n(7324)],void 0===(i=function(e){"use strict";var t={};function n(e,t){var n=e.split(t);return function(e,t){var n,r,i,o;for(n=0;n<e.length;n++)if(o="",'"'!==(i=e[n].replace(/^[\s]*|[\s]*$/g,"")).charAt(0)&&"'"!==i.charAt(0)||(o=i.charAt(0)),""!==o&&i.slice(-1)!==o){for((r=n+1)<e.length&&(i=e[r].replace(/^[\s]*|[\s]*$/g,""));r<e.length&&i.slice(-1)!==o;)e[n]+=t+e.splice(r,1)[0],i=e[r].replace(/[\s]*$/g,"");r<e.length&&(e[n]+=t+e.splice(r,1)[0])}}(n,t),function(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].replace(/^[\s]*|[\s]*$/g,"")}(n),function(e){var t;for(t=0;t<e.length;t++)'"'===e[t].charAt(0)?e[t]=e[t].replace(/^"|"$/g,""):"'"===e[t].charAt(0)&&(e[t]=e[t].replace(/^'|'$/g,""))}(n),n}function r(e,t,r,i){var o,a={lineEnding:/[\r\n]/,delimiter:",",ignoreEmptyLines:!0};if(""===e)throw new SyntaxError("empty input");if(void 0!==t&&(t instanceof RegExp?a.lineEnding=t:a.lineEnding=new RegExp("["+String(t)+"]","g")),void 0!==r&&(a.delimiter=String(r)),void 0!==i&&(a.ignoreEmptyLines=!!i),o=function(e,t){var n=t.toString(),r=n.substring(1,n.lastIndexOf("/")),i=n.substring(n.lastIndexOf("/")+1);return-1===i.indexOf("g")&&(t=new RegExp(r,i+"g")),e.split(t)}(e,a.lineEnding),a.ignoreEmptyLines&&function(e){var t;for(t=0;t<e.length;t++)""===e[t].replace(/^[\s]*|[\s]*$/g,"")&&e.splice(t--,1)}(o),o.length<2)throw new SyntaxError("missing header");return function(e,t){var r,i=[];for(r=0;r<e.length;r++)i[r]=n(e[r],t);return i}(o,a.delimiter)}return t.parse=function(e,t,n,i){return function(e){var t,n,r,i,o,a=[],s=e[0];for(t=1;t<e.length;t++)if((r=e[t]).length>0){if(r.length>s.length)throw new SyntaxError("not enough header fields");for(i={},n=0;n<s.length;n++)o=s[n],n<r.length?i[o]=r[n]:i[o]="";a.push(i)}return a}(r(e,t,n,i))},t.parseAsArrays=function(e,t,n,i){return r(e,t,n,i)},t.parseAsDynamicData=function(t){var n=this.parseAsArrays(t),r={};return r.cols=n[0],r.rows={},n.shift(),n.forEach((function(t,n){var i=e.uuid();r.rows[i]={values:o(t),index:n}})),r},t.parseAsCSV=function(t){var n=[],r="",i=t.cols;return n.push(i),e.each(function(t){for(var n=e.keys(t),r=n.length,i=new Array(r);r--;)i[r]=[n[r],t[n[r]]];return i}(t.rows),(function(e){n.push(e[1].values)})),e.each(n,(function(e){r+=e.join(", ")+"\n"})),r},t}.apply(t,r))||(e.exports=i)},72779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},23326:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),u=l&&/Qt\/\d+\.\d+/.test(e),c=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),h=/PhantomJS/.test(e),m=f&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),_=/win/i.test(t),w=d&&e.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(d=!1,l=!0);var E=v&&(u||d&&(null==w||w<12.11)),S=n||a&&s>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var k,T=function(e,t){var n=e.className,r=x(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function O(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function C(e,t){return O(e).appendChild(t)}function A(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function P(e,t,n,r){var i=A(e,t,n,r);return i.setAttribute("role","presentation"),i}function M(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function D(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function R(e,t){var n=e.className;x(t).test(n)||(e.className+=(n?" ":"")+t)}function L(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!x(n[r]).test(t)&&(t+=" "+n[r]);return t}k=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var N=function(e){e.select()};function I(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function j(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function B(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}}m?N=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(N=function(e){try{e.select()}catch(e){}});var F=function(){this.id=null,this.f=null,this.time=0,this.handler=I(this.onTimeout,this)};function Y(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},F.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var H=50,V={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},U={origin:"*mouse"},W={origin:"+move"};function z(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var G=[""];function $(e){for(;G.length<=e;)G.push(K(G)+" ");return G[e]}function K(e){return e[e.length-1]}function Z(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function J(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function Q(){}function X(e,t){var n;return Object.create?n=Object.create(e):(Q.prototype=e,n=new Q),t&&j(t,n),n}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){return t?!!(t.source.indexOf("\\w")>-1&&te(e))||t.test(e):te(e)}function re(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&ie.test(e)}function ae(e,t,n){for(;(n<0?t>0:t<e.length)&&oe(e.charAt(t));)t+=n;return t}function se(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}function le(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}var ue=null;function ce(e,t,n){var r;ue=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:ue=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:ue=i)}return null!=r?r:ue}var de=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,s=/[1n]/;function l(e,t,n){this.level=e,this.from=t,this.to=n}return function(e,t){var u="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!r.test(e))return!1;for(var c=e.length,d=[],f=0;f<c;++f)d.push(n(e.charCodeAt(f)));for(var p=0,h=u;p<c;++p){var m=d[p];"m"==m?d[p]=h:h=m}for(var g=0,y=u;g<c;++g){var v=d[g];"1"==v&&"r"==y?d[g]="n":o.test(v)&&(y=v,"r"==v&&(d[g]="R"))}for(var b=1,_=d[0];b<c-1;++b){var w=d[b];"+"==w&&"1"==_&&"1"==d[b+1]?d[b]="1":","!=w||_!=d[b+1]||"1"!=_&&"n"!=_||(d[b]=_),_=w}for(var E=0;E<c;++E){var S=d[E];if(","==S)d[E]="N";else if("%"==S){var x=void 0;for(x=E+1;x<c&&"%"==d[x];++x);for(var k=E&&"!"==d[E-1]||x<c&&"1"==d[x]?"1":"N",T=E;T<x;++T)d[T]=k;E=x-1}}for(var O=0,C=u;O<c;++O){var A=d[O];"L"==C&&"1"==A?d[O]="L":o.test(A)&&(C=A)}for(var P=0;P<c;++P)if(i.test(d[P])){var M=void 0;for(M=P+1;M<c&&i.test(d[M]);++M);for(var D="L"==(P?d[P-1]:u),R=D==("L"==(M<c?d[M]:u))?D?"L":"R":u,L=P;L<M;++L)d[L]=R;P=M-1}for(var N,I=[],j=0;j<c;)if(a.test(d[j])){var B=j;for(++j;j<c&&a.test(d[j]);++j);I.push(new l(0,B,j))}else{var F=j,Y=I.length,H="rtl"==t?1:0;for(++j;j<c&&"L"!=d[j];++j);for(var V=F;V<j;)if(s.test(d[V])){F<V&&(I.splice(Y,0,new l(1,F,V)),Y+=H);var q=V;for(++V;V<j&&s.test(d[V]);++V);I.splice(Y,0,new l(2,q,V)),Y+=H,F=V}else++V;F<j&&I.splice(Y,0,new l(1,F,j))}return"ltr"==t&&(1==I[0].level&&(N=e.match(/^\s+/))&&(I[0].from=N[0].length,I.unshift(new l(0,0,N[0].length))),1==K(I).level&&(N=e.match(/\s+$/))&&(K(I).to-=N[0].length,I.push(new l(0,c-N[0].length,c)))),"rtl"==t?I.reverse():I}}();function fe(e,t){var n=e.order;return null==n&&(n=e.order=de(e.text,t)),n}var pe=[],he=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||pe).concat(n)}};function me(e,t){return e._handlers&&e._handlers[t]||pe}function ge(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=Y(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function ye(e,t){var n=me(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function ve(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ye(e,n||t.type,e,t),xe(t)||t.codemirrorIgnore}function be(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Y(n,t[r])&&n.push(t[r])}function _e(e,t){return me(e,t).length>0}function we(e){e.prototype.on=function(e,t){he(this,e,t)},e.prototype.off=function(e,t){ge(this,e,t)}}function Ee(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Se(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ke(e){Ee(e),Se(e)}function Te(e){return e.target||e.srcElement}function Oe(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var Ce,Ae,Pe=function(){if(a&&s<9)return!1;var e=A("div");return"draggable"in e||"dragDrop"in e}();function Me(e){if(null==Ce){var t=A("span","​");C(e,A("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ce=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=Ce?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function De(e){if(null!=Ae)return Ae;var t=C(e,document.createTextNode("AخA")),n=k(t,0,1).getBoundingClientRect(),r=k(t,1,2).getBoundingClientRect();return O(e),!(!n||n.left==n.right)&&(Ae=r.right-n.right<3)}var Re,Le=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ne=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ie="oncopy"in(Re=A("div"))||(Re.setAttribute("oncopy","return;"),"function"==typeof Re.oncopy),je=null;function Be(e){if(null!=je)return je;var t=C(e,A("span","x")),n=t.getBoundingClientRect(),r=k(t,0,1).getBoundingClientRect();return je=Math.abs(n.left-r.left)>1}var Fe={},Ye={};function He(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Fe[e]=t}function Ve(e,t){Ye[e]=t}function qe(e){if("string"==typeof e&&Ye.hasOwnProperty(e))e=Ye[e];else if(e&&"string"==typeof e.name&&Ye.hasOwnProperty(e.name)){var t=Ye[e.name];"string"==typeof t&&(t={name:t}),(e=X(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return qe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return qe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ue(e,t){t=qe(t);var n=Fe[t.name];if(!n)return Ue(e,"text/plain");var r=n(e,t);if(We.hasOwnProperty(t.name)){var i=We[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var We={};function ze(e,t){j(t,We.hasOwnProperty(e)?We[e]:We[e]={})}function Ge(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function $e(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ke(e,t,n){return!e.startState||e.startState(t,n)}var Ze=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Je(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Qe(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i})),r}function Xe(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function et(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function tt(e){if(null==e.parent)return null;for(var t=e.parent,n=Y(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function nt(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a].height;if(t<s)break;t-=s}return n+a}function rt(e,t){return t>=e.first&&t<e.first+e.size}function it(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ot(e,t,n){if(void 0===n&&(n=null),!(this instanceof ot))return new ot(e,t,n);this.line=e,this.ch=t,this.sticky=n}function at(e,t){return e.line-t.line||e.ch-t.ch}function st(e,t){return e.sticky==t.sticky&&0==at(e,t)}function lt(e){return ot(e.line,e.ch)}function ut(e,t){return at(e,t)<0?t:e}function ct(e,t){return at(e,t)<0?e:t}function dt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ft(e,t){if(t.line<e.first)return ot(e.first,0);var n=e.first+e.size-1;return t.line>n?ot(n,Je(e,n).text.length):pt(t,Je(e,t.line).text.length)}function pt(e,t){var n=e.ch;return null==n||n>t?ot(e.line,t):n<0?ot(e.line,0):e}function ht(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=ft(e,t[r]);return n}Ze.prototype.eol=function(){return this.pos>=this.string.length},Ze.prototype.sol=function(){return this.pos==this.lineStart},Ze.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ze.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ze.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ze.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ze.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ze.prototype.skipToEnd=function(){this.pos=this.string.length},Ze.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ze.prototype.backUp=function(e){this.pos-=e},Ze.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ze.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ze.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ze.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ze.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var mt=function(e,t){this.state=e,this.lookAhead=t},gt=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function yt(e,t,n,r){var i=[e.state.modeGen],o={};Tt(e,t.text,e.doc.mode,n,(function(e,t){return i.push(e,t)}),o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=e.state.overlays[r],l=1,u=0;n.state=!0,Tt(e,t.text,s.mode,n,(function(e,t){for(var n=l;u<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,u=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)s(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function vt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=bt(e,tt(t)),i=t.text.length>e.options.maxHighlightLength&&Ge(e.doc.mode,r.state),o=yt(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function bt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new gt(r,!0,t);var o=Ot(e,t,n),a=o>r.first&&Je(r,o-1).stateAfter,s=a?gt.fromSaved(r,a,o):new gt(r,Ke(r.mode),o);return r.iter(o,t,(function(n){_t(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()})),n&&(r.modeFrontier=s.line),s}function _t(e,t,n,r){var i=e.doc.mode,o=new Ze(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&wt(i,n.state);!o.eol();)Et(i,o,n.state),o.start=o.pos}function wt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=$e(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Et(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=$e(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}gt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},gt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},gt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},gt.fromSaved=function(e,t,n){return t instanceof mt?new gt(e,Ge(e.mode,t.state),n,t.lookAhead):new gt(e,Ge(e.mode,t),n)},gt.prototype.save=function(e){var t=!1!==e?Ge(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mt(t,this.maxLookAhead):t};var St=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function xt(e,t,n,r){var i,o,a=e.doc,s=a.mode,l=Je(a,(t=ft(a,t)).line),u=bt(e,t.line,n),c=new Ze(l.text,e.options.tabSize,u);for(r&&(o=[]);(r||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=Et(s,c,u.state),r&&o.push(new St(c,i,Ge(a.mode,u.state)));return r?o:new St(c,i,u.state)}function kt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Tt(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,d=new Ze(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&kt(wt(n,r.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,a&&_t(e,t,r,d.pos),d.pos=t.length,l=null):l=kt(Et(n,d,r.state,f),o),f){var p=f[0].name;p&&(l="m-"+(l?p+" "+l:p))}if(!s||c!=l){for(;u<d.start;)i(u=Math.min(d.start,u+5e3),c);c=l}d.start=d.pos}for(;u<d.pos;){var h=Math.min(d.pos,u+5e3);i(h,c),u=h}}function Ot(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=Je(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof mt?u.lookAhead:0)<=o.modeFrontier))return s;var c=B(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function Ct(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Je(e,r).stateAfter;if(i&&(!(i instanceof mt)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var At=!1,Pt=!1;function Mt(){At=!0}function Dt(){Pt=!0}function Rt(e,t,n){this.marker=e,this.from=t,this.to=n}function Lt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Nt(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function It(e,t,n){var r=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));r&&e.markedSpans&&r.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],r&&r.add(e.markedSpans)),t.marker.attachLine(e)}function jt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Rt(a,o.from,s?null:o.to))}}return r}function Bt(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Rt(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}function Ft(e,t){if(t.full)return null;var n=rt(e,t.from.line)&&Je(e,t.from.line).markedSpans,r=rt(e,t.to.line)&&Je(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==at(t.from,t.to),s=jt(n,i,a),l=Bt(r,o,a),u=1==t.text.length,c=K(t.text).length+(u?i:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var p=Lt(l,f.marker);p?u&&(f.to=null==p.to?null:p.to+c):f.to=i}}if(l)for(var h=0;h<l.length;++h){var m=l[h];null!=m.to&&(m.to+=c),null==m.from?Lt(s,m.marker)||(m.from=c,u&&(s||(s=[])).push(m)):(m.from+=c,u&&(s||(s=[])).push(m))}s&&(s=Yt(s)),l&&l!=s&&(l=Yt(l));var g=[s];if(!u){var y,v=t.text.length-2;if(v>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(y||(y=[])).push(new Rt(s[b].marker,null,null));for(var _=0;_<v;++_)g.push(y);g.push(l)}return g}function Yt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ht(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Y(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(at(u.to,s.from)<0||at(u.from,s.to)>0)){var c=[l,1],d=at(u.from,s.from),f=at(u.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-3}}return i}function Vt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function qt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ut(e){return e.inclusiveLeft?-1:0}function Wt(e){return e.inclusiveRight?1:0}function zt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=at(r.from,i.from)||Ut(e)-Ut(t);if(o)return-o;var a=at(r.to,i.to)||Wt(e)-Wt(t);return a||t.id-e.id}function Gt(e,t){var n,r=Pt&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||zt(n,i.marker)<0)&&(n=i.marker);return n}function $t(e){return Gt(e,!0)}function Kt(e){return Gt(e,!1)}function Zt(e,t){var n,r=Pt&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||zt(n,o.marker)<0)&&(n=o.marker)}return n}function Jt(e,t,n,r,i){var o=Je(e,t),a=Pt&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=at(u.from,n)||Ut(l.marker)-Ut(i),d=at(u.to,r)||Wt(l.marker)-Wt(i);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?at(u.to,n)>=0:at(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?at(u.from,r)<=0:at(u.from,r)<0)))return!0}}}function Qt(e){for(var t;t=$t(e);)e=t.find(-1,!0).line;return e}function Xt(e){for(var t;t=Kt(e);)e=t.find(1,!0).line;return e}function en(e){for(var t,n;t=Kt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function tn(e,t){var n=Je(e,t),r=Qt(n);return n==r?t:tt(r)}function nn(e,t){if(t>e.lastLine())return t;var n,r=Je(e,t);if(!rn(e,r))return t;for(;n=Kt(r);)r=n.find(1,!0).line;return tt(r)+1}function rn(e,t){var n=Pt&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&on(e,t,r))return!0}}function on(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return on(e,r.line,Lt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&on(e,t,i))return!0}function an(e){for(var t=0,n=(e=Qt(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function sn(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=$t(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Kt(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function ln(e){var t=e.display,n=e.doc;t.maxLine=Je(n,n.first),t.maxLineLength=sn(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=sn(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var un=function(e,t,n){this.text=e,qt(this,t),this.height=n?n(this):1};function cn(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Vt(e),qt(e,n);var i=r?r(e):1;i!=e.height&&et(e,i)}function dn(e){e.parent=null,Vt(e)}un.prototype.lineNo=function(){return tt(this)},we(un);var fn={},pn={};function hn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?pn:fn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function mn(e,t){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,a=void 0;r.pos=0,r.addToken=yn,De(e.display.measure)&&(a=fe(o,e.doc.direction))&&(r.addToken=bn(r.addToken,a)),r.map=[],wn(o,r,vt(e,o,t!=e.display.externalMeasured&&tt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=L(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=L(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Me(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ye(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=L(r.pre.className,r.textClass||"")),r}function gn(e){var t=A("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function yn(e,t,n,r,i,o,l){if(t){var u,c=e.splitSpaces?vn(t,e.trailingSpace):t,d=e.cm.state.specialChars,f=!1;if(d.test(t)){u=document.createDocumentFragment();for(var p=0;;){d.lastIndex=p;var h=d.exec(t),m=h?h.index-p:t.length-p;if(m){var g=document.createTextNode(c.slice(p,p+m));a&&s<9?u.appendChild(A("span",[g])):u.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!h)break;p+=m+1;var y=void 0;if("\t"==h[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(y=u.appendChild(A("span",$(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=b}else"\r"==h[0]||"\n"==h[0]?((y=u.appendChild(A("span","\r"==h[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1):((y=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),a&&s<9?u.appendChild(A("span",[y])):u.appendChild(y),e.col+=1);e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),a&&s<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||r||i||f||o||l){var _=n||"";r&&(_+=r),i&&(_+=i);var w=A("span",[u],_,o);if(l)for(var E in l)l.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&w.setAttribute(E,l[E]);return e.content.appendChild(w)}e.content.appendChild(u)}}function vn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}function bn(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var d=void 0,f=0;f<t.length&&!((d=t[f]).to>u&&d.from<=u);f++);if(d.to>=c)return e(n,r,i,o,a,s,l);e(n,r.slice(0,d.to-u),i,o,null,s,l),o=null,r=r.slice(d.to-u),u=d.to}}}function _n(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function wn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,u,c,d,f,p=i.length,h=0,m=1,g="",y=0;;){if(y==h){l=u=c=s="",f=null,d=null,y=1/0;for(var v=[],b=void 0,_=0;_<r.length;++_){var w=r[_],E=w.marker;if("bookmark"==E.type&&w.from==h&&E.widgetNode)v.push(E);else if(w.from<=h&&(null==w.to||w.to>h||E.collapsed&&w.to==h&&w.from==h)){if(null!=w.to&&w.to!=h&&y>w.to&&(y=w.to,u=""),E.className&&(l+=" "+E.className),E.css&&(s=(s?s+";":"")+E.css),E.startStyle&&w.from==h&&(c+=" "+E.startStyle),E.endStyle&&w.to==y&&(b||(b=[])).push(E.endStyle,w.to),E.title&&((f||(f={})).title=E.title),E.attributes)for(var S in E.attributes)(f||(f={}))[S]=E.attributes[S];E.collapsed&&(!d||zt(d.marker,E)<0)&&(d=w)}else w.from>h&&y>w.from&&(y=w.from)}if(b)for(var x=0;x<b.length;x+=2)b[x+1]==y&&(u+=" "+b[x]);if(!d||d.from==h)for(var k=0;k<v.length;++k)_n(t,0,v[k]);if(d&&(d.from||0)==h){if(_n(t,(null==d.to?p+1:d.to)-h,d.marker,null==d.from),null==d.to)return;d.to==h&&(d=!1)}}if(h>=p)break;for(var T=Math.min(p,y);;){if(g){var O=h+g.length;if(!d){var C=O>T?g.slice(0,T-h):g;t.addToken(t,C,a?a+l:l,c,h+C.length==y?u:"",s,f)}if(O>=T){g=g.slice(T-h),h=T;break}h=O,c=""}g=i.slice(o,o=n[m++]),a=hn(n[m++],t.cm.options)}}else for(var A=1;A<n.length;A+=2)t.addToken(t,i.slice(o,o=n[A]),hn(n[A+1],t.cm.options))}function En(e,t,n){this.line=t,this.rest=en(t),this.size=this.rest?tt(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=rn(e,t)}function Sn(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new En(e.doc,Je(e.doc,o),o);r=o+a.size,i.push(a)}return i}var xn=null;function kn(e){xn?xn.ops.push(e):e.ownsGroup=xn={ops:[e],delayedCallbacks:[]}}function Tn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function On(e,t){var n=e.ownsGroup;if(n)try{Tn(n)}finally{xn=null,t(n)}}var Cn=null;function An(e,t){var n=me(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);xn?r=xn.delayedCallbacks:Cn?r=Cn:(r=Cn=[],setTimeout(Pn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},a=0;a<n.length;++a)o(a)}}function Pn(){var e=Cn;Cn=null;for(var t=0;t<e.length;++t)e[t]()}function Mn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?Nn(e,t):"gutter"==o?jn(e,t,n,r):"class"==o?In(e,t):"widget"==o&&Bn(e,t,r)}t.changes=null}function Dn(e){return e.node==e.text&&(e.node=A("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&s<8&&(e.node.style.zIndex=2)),e.node}function Rn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=Dn(t);t.background=r.insertBefore(A("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}}function Ln(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):mn(e,t)}function Nn(e,t){var n=t.text.className,r=Ln(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,In(e,t)):n&&(t.text.className=n)}function In(e,t){Rn(e,t),t.line.wrapClass?Dn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function jn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=Dn(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=Dn(t),s=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),e.display.input.setUneditable(s),a.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(A("div",it(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var u=e.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(A("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function Bn(e,t,n){t.alignable&&(t.alignable=null);for(var r=x("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);Yn(e,t,n)}function Fn(e,t,n,r){var i=Ln(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),In(e,t),jn(e,t,n,r),Yn(e,t,r),t.node}function Yn(e,t,n){if(Hn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)Hn(e,t.rest[r],t,n,!1)}function Hn(e,t,n,r,i){if(t.widgets)for(var o=Dn(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],u=A("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Vn(l,u,n,r),e.display.input.setUneditable(u),i&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),An(l,"redraw")}}function Vn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function qn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!M(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),C(t.display.measure,A("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Un(e,t){for(var n=Te(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Wn(e){return e.lineSpace.offsetTop}function zn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Gn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=C(e.measure,A("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function $n(e){return H-e.display.nativeBarWidth}function Kn(e){return e.display.scroller.clientWidth-$n(e)-e.display.barWidth}function Zn(e){return e.display.scroller.clientHeight-$n(e)-e.display.barHeight}function Jn(e,t,n){var r=e.options.lineWrapping,i=r&&Kn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Qn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(tt(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function Xn(e,t){var n=tt(t=Qt(t)),r=e.display.externalMeasured=new En(e.doc,t,n);r.lineN=n;var i=r.built=mn(e,r);return r.text=i.pre,C(e.display.lineMeasure,i.pre),r}function er(e,t,n,r){return rr(e,nr(e,t),n,r)}function tr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ir(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function nr(e,t){var n=tt(t),r=tr(e,n);r&&!r.text?r=null:r&&r.changes&&(Mn(e,r,n,Mr(e)),e.curOp.forceUpdate=!0),r||(r=Xn(e,t));var i=Qn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function rr(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Jn(e,t.view,t.rect),t.hasHeights=!0),(o=lr(e,t,n,r)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var ir,or={left:0,right:0,top:0,bottom:0};function ar(e,t,n){for(var r,i,o,a,s,l,u=0;u<e.length;u+=3)if(s=e[u],l=e[u+1],t<s?(i=0,o=1,a="left"):t<l?o=1+(i=t-s):(u==e.length-3||t==l&&e[u+3]>t)&&(i=(o=l-s)-1,t>=l&&(a="right")),null!=i){if(r=e[u+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)r=e[2+(u-=3)],a="left";if("right"==n&&i==l-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)r=e[(u+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function sr(e,t){var n=or;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function lr(e,t,n,r){var i,o=ar(t.map,n,r),l=o.node,u=o.start,c=o.end,d=o.collapse;if(3==l.nodeType){for(var f=0;f<4;f++){for(;u&&oe(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&oe(t.line.text.charAt(o.coverStart+c));)++c;if((i=a&&s<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():sr(k(l,u,c).getClientRects(),r)).left||i.right||0==u)break;c=u,u-=1,d="right"}a&&s<11&&(i=ur(e.display.measure,i))}else{var p;u>0&&(d=r="right"),i=e.options.lineWrapping&&(p=l.getClientRects()).length>1?p["right"==r?p.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!u&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+Pr(e.display),top:h.top,bottom:h.bottom}:or}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,y=(m+g)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var _=b?v[b-1]:0,w=v[b],E={left:("right"==d?i.right:i.left)-t.rect.left,right:("left"==d?i.left:i.right)-t.rect.left,top:_,bottom:w};return i.left||i.right||(E.bogus=!0),e.options.singleCursorHeightPerLine||(E.rtop=m,E.rbottom=g),E}function ur(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Be(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function cr(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function dr(e){e.display.externalMeasure=null,O(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)cr(e.display.view[t])}function fr(e){dr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function pr(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function hr(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function mr(e){var t=Qt(e).widgets,n=0;if(t)for(var r=0;r<t.length;++r)t[r].above&&(n+=qn(t[r]));return n}function gr(e,t,n,r,i){if(!i){var o=mr(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=an(t);if("local"==r?a+=Wn(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:hr());var l=s.left+("window"==r?0:pr());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function yr(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=pr(),i-=hr();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function vr(e,t,n,r,i){return r||(r=Je(e.doc,t.line)),gr(e,r,er(e,r,t.ch,i),n)}function br(e,t,n,r,i,o){function a(t,a){var s=rr(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,gr(e,r,s,n)}r=r||Je(e.doc,t.line),i||(i=nr(e,r));var s=fe(r,e.doc.direction),l=t.ch,u=t.sticky;if(l>=r.text.length?(l=r.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function c(e,t,n){return a(n?e-1:e,1==s[t].level!=n)}var d=ce(s,l,u),f=ue,p=c(l,d,"before"==u);return null!=f&&(p.other=c(l,f,"before"!=u)),p}function _r(e,t){var n=0;t=ft(e.doc,t),e.options.lineWrapping||(n=Pr(e.display)*t.ch);var r=Je(e.doc,t.line),i=an(r)+Wn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function wr(e,t,n,r,i){var o=ot(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function Er(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return wr(r.first,0,null,-1,-1);var i=nt(r,n),o=r.first+r.size-1;if(i>o)return wr(r.first+r.size-1,Je(r,o).text.length,null,1,1);t<0&&(t=0);for(var a=Je(r,i);;){var s=Tr(e,a,i,t,n),l=Zt(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==i)return u;a=Je(r,i=u.line)}}function Sr(e,t,n,r){r-=mr(t);var i=t.text.length,o=se((function(t){return rr(e,n,t-1).bottom<=r}),i,0);return{begin:o,end:i=se((function(t){return rr(e,n,t).top>r}),o,i)}}function xr(e,t,n,r){return n||(n=nr(e,t)),Sr(e,t,n,gr(e,t,rr(e,n,r),"line").top)}function kr(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function Tr(e,t,n,r,i){i-=an(t);var o=nr(e,t),a=mr(t),s=0,l=t.text.length,u=!0,c=fe(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?Cr:Or)(e,t,n,o,c,r,i);s=(u=1!=d.level)?d.from:d.to-1,l=u?d.to:d.from-1}var f,p,h=null,m=null,g=se((function(t){var n=rr(e,o,t);return n.top+=a,n.bottom+=a,!!kr(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(h=t,m=n),!0)}),s,l),y=!1;if(m){var v=r-m.left<m.right-r,b=v==u;g=h+(b?0:1),p=b?"after":"before",f=v?m.left:m.right}else{u||g!=l&&g!=s||g++,p=0==g?"after":g==t.text.length?"before":rr(e,o,g-(u?1:0)).bottom+a<=i==u?"after":"before";var _=br(e,ot(n,g,p),"line",t,o);f=_.left,y=i<_.top?-1:i>=_.bottom?1:0}return wr(n,g=ae(t.text,g,1),p,y,r-f)}function Or(e,t,n,r,i,o,a){var s=se((function(s){var l=i[s],u=1!=l.level;return kr(br(e,ot(n,u?l.to:l.from,u?"before":"after"),"line",t,r),o,a,!0)}),0,i.length-1),l=i[s];if(s>0){var u=1!=l.level,c=br(e,ot(n,u?l.from:l.to,u?"after":"before"),"line",t,r);kr(c,o,a,!0)&&c.top>a&&(l=i[s-1])}return l}function Cr(e,t,n,r,i,o,a){var s=Sr(e,t,r,a),l=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,d=null,f=0;f<i.length;f++){var p=i[f];if(!(p.from>=u||p.to<=l)){var h=rr(e,r,1!=p.level?Math.min(u,p.to)-1:Math.max(l,p.from)).right,m=h<o?o-h+1e9:h-o;(!c||d>m)&&(c=p,d=m)}}return c||(c=i[i.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function Ar(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==ir){ir=A("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)ir.appendChild(document.createTextNode("x")),ir.appendChild(A("br"));ir.appendChild(document.createTextNode("x"))}C(e.measure,ir);var n=ir.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),O(e.measure),n||1}function Pr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx"),n=A("pre",[t],"CodeMirror-line-like");C(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Mr(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=e.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+i,r[s]=o.clientWidth}return{fixedPos:Dr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Dr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Rr(e){var t=Ar(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Pr(e.display)-3);return function(i){if(rn(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function Lr(e){var t=e.doc,n=Rr(e);t.iter((function(e){var t=n(e);t!=e.height&&et(e,t)}))}function Nr(e,t,n,r){var i=e.display;if(!n&&"true"==Te(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(e){return null}var l,u=Er(e,o,a);if(r&&u.xRel>0&&(l=Je(e.doc,u.line).text).length==u.ch){var c=B(l,l.length,e.options.tabSize)-l.length;u=ot(u.line,Math.max(0,Math.round((o-Gn(e.display).left)/Pr(e.display))-c))}return u}function Ir(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function jr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Pt&&tn(e.doc,t)<i.viewTo&&Fr(e);else if(n<=i.viewFrom)Pt&&nn(e.doc,n+r)>i.viewFrom?Fr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Fr(e);else if(t<=i.viewFrom){var o=Yr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Fr(e)}else if(n>=i.viewTo){var a=Yr(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Fr(e)}else{var s=Yr(e,t,t,-1),l=Yr(e,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(Sn(e,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):Fr(e)}var u=i.externalMeasured;u&&(n<u.lineN?u.lineN+=r:t<u.lineN+u.size&&(i.externalMeasured=null))}function Br(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[Ir(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==Y(a,n)&&a.push(n)}}}function Fr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Yr(e,t,n,r){var i,o=Ir(e,t),a=e.display.view;if(!Pt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=e.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=t){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-t,o++}else i=s-t;t+=i,n+=i}for(;tn(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function Hr(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Sn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Sn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Ir(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Sn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Ir(e,n)))),r.viewTo=n}function Vr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function qr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ur(e,t){void 0===t&&(t=!0);var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=e.options.$customCursor;a&&(t=!0);for(var s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var l=n.sel.ranges[s];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var u=l.empty();if(a){var c=a(e,l);c&&Wr(e,c,i)}else(u||e.options.showCursorWhenSelecting)&&Wr(e,l.head,i);u||Gr(e,l,o)}}return r}function Wr(e,t,n){var r=br(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(A("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var o=vr(e,t,"div",null,null),a=o.right-o.left;i.style.width=(a>0?a:e.defaultCharWidth())+"px"}if(r.other){var s=n.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function zr(e,t){return e.top-t.top||e.left-t.left}function Gr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),a=Gn(e.display),s=a.left,l=Math.max(r.sizerWidth,Kn(e)-r.sizer.offsetLeft)-a.right,u="ltr"==i.direction;function c(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function d(t,n,r){var o,a,d=Je(i,t),f=d.text.length;function p(n,r){return vr(e,ot(t,n),"div",d,r)}function h(t,n,r){var i=xr(e,d,null,t),o="ltr"==n==("after"==r)?"left":"right";return p("after"==r?i.begin:i.end-(/\s/.test(d.text.charAt(i.end-1))?2:1),o)[o]}var m=fe(d,i.direction);return le(m,n||0,null==r?f:r,(function(e,t,i,d){var g="ltr"==i,y=p(e,g?"left":"right"),v=p(t-1,g?"right":"left"),b=null==n&&0==e,_=null==r&&t==f,w=0==d,E=!m||d==m.length-1;if(v.top-y.top<=3){var S=(u?_:b)&&E,x=(u?b:_)&&w?s:(g?y:v).left,k=S?l:(g?v:y).right;c(x,y.top,k-x,y.bottom)}else{var T,O,C,A;g?(T=u&&b&&w?s:y.left,O=u?l:h(e,i,"before"),C=u?s:h(t,i,"after"),A=u&&_&&E?l:v.right):(T=u?h(e,i,"before"):s,O=!u&&b&&w?l:y.right,C=!u&&_&&E?s:v.left,A=u?h(t,i,"after"):l),c(T,y.top,O-T,y.bottom),y.bottom<v.top&&c(s,y.bottom,null,v.top),c(C,v.top,A-C,v.bottom)}(!o||zr(y,o)<0)&&(o=y),zr(v,o)<0&&(o=v),(!a||zr(y,a)<0)&&(a=y),zr(v,a)<0&&(a=v)})),{start:o,end:a}}var f=t.from(),p=t.to();if(f.line==p.line)d(f.line,f.ch,p.ch);else{var h=Je(i,f.line),m=Je(i,p.line),g=Qt(h)==Qt(m),y=d(f.line,f.ch,g?h.text.length+1:null).end,v=d(p.line,g?0:null,p.ch).start;g&&(y.top<v.top-2?(c(y.right,y.top,null,y.bottom),c(s,v.top,v.left,v.bottom)):c(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&c(s,y.bottom,null,v.top)}n.appendChild(o)}function $r(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Qr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Kr(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Jr(e))}function Zr(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Qr(e))}),100)}function Jr(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ye(e,"focus",e,t),e.state.focused=!0,R(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),$r(e))}function Qr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ye(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Xr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,o=0,l=0;l<t.view.length;l++){var u=t.view[l],c=e.options.lineWrapping,d=void 0,f=0;if(!u.hidden){if(i+=u.line.height,a&&s<8){var p=u.node.offsetTop+u.node.offsetHeight;d=p-n,n=p}else{var h=u.node.getBoundingClientRect();d=h.bottom-h.top,!c&&u.text.firstChild&&(f=u.text.firstChild.getBoundingClientRect().right-h.left-1)}var m=u.line.height-d;if((m>.005||m<-.005)&&(i<r&&(o-=m),et(u.line,d),ei(u.line),u.rest))for(var g=0;g<u.rest.length;g++)ei(u.rest[g]);if(f>e.display.sizerWidth){var y=Math.ceil(f/Pr(e.display));y>e.display.maxLineLength&&(e.display.maxLineLength=y,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(t.scroller.scrollTop+=o)}function ei(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function ti(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Wn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=nt(t,r),a=nt(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=nt(t,an(Je(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=nt(t,an(Je(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function ni(e,t){if(!ve(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!h){var o=A("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Wn(e.display))+"px;\n                         height: "+(t.bottom-t.top+$n(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function ri(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==t.sticky?ot(t.line,t.ch+1,"before"):t,t=t.ch?ot(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var o=0;o<5;o++){var a=!1,s=br(e,t),l=n&&n!=t?br(e,n):s,u=oi(e,i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r}),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=u.scrollTop&&(fi(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(hi(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return i}function ii(e,t){var n=oi(e,t);null!=n.scrollTop&&fi(e,n.scrollTop),null!=n.scrollLeft&&hi(e,n.scrollLeft)}function oi(e,t){var n=e.display,r=Ar(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Zn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+zn(n),l=t.top<r,u=t.bottom>s-r;if(t.top<i)a.scrollTop=l?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(a.scrollTop=c)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,p=Kn(e)-n.gutters.offsetWidth,h=t.right-t.left>p;return h&&(t.right=t.left+p),t.left<10?a.scrollLeft=0:t.left<f?a.scrollLeft=Math.max(0,t.left+d-(h?0:10)):t.right>p+f-3&&(a.scrollLeft=t.right+(h?0:10)-p),a}function ai(e,t){null!=t&&(ci(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function si(e){ci(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function li(e,t,n){null==t&&null==n||ci(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function ui(e,t){ci(e),e.curOp.scrollToPos=t}function ci(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,di(e,_r(e,t.from),_r(e,t.to),t.margin))}function di(e,t,n,r){var i=oi(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});li(e,i.scrollLeft,i.scrollTop)}function fi(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||qi(e,{top:t}),pi(e,t,!0),n&&qi(e),Ni(e,100))}function pi(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function hi(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,Gi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function mi(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+zn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+$n(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var gi=function(e,t,n){this.cm=n;var r=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),he(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),he(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};gi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},gi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},gi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},gi.prototype.zeroWidthHack=function(){var e=v&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},gi.prototype.enableZeroWidthBar=function(e,t,n){function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}e.style.pointerEvents="auto",t.set(1e3,r)},gi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var yi=function(){};function vi(e,t){t||(t=mi(e));var n=e.display.barWidth,r=e.display.barHeight;bi(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Xr(e),bi(e,mi(e)),n=e.display.barWidth,r=e.display.barHeight}function bi(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}yi.prototype.update=function(){return{bottom:0,right:0}},yi.prototype.setScrollLeft=function(){},yi.prototype.setScrollTop=function(){},yi.prototype.clear=function(){};var _i={native:gi,null:yi};function wi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&T(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new _i[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),he(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?hi(e,t):fi(e,t)}),e),e.display.scrollbars.addClass&&R(e.display.wrapper,e.display.scrollbars.addClass)}var Ei=0;function Si(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ei,markArrays:null},kn(e.curOp)}function xi(e){var t=e.curOp;t&&On(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;ki(e)}))}function ki(e){for(var t=e.ops,n=0;n<t.length;n++)Ti(t[n]);for(var r=0;r<t.length;r++)Oi(t[r]);for(var i=0;i<t.length;i++)Ci(t[i]);for(var o=0;o<t.length;o++)Ai(t[o]);for(var a=0;a<t.length;a++)Pi(t[a])}function Ti(e){var t=e.cm,n=t.display;Bi(t),e.updateMaxLine&&ln(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new ji(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Oi(e){e.updatedDisplay=e.mustUpdate&&Hi(e.cm,e.update)}function Ci(e){var t=e.cm,n=t.display;e.updatedDisplay&&Xr(t),e.barMeasure=mi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=er(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+$n(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Kn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Ai(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&hi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==D();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&vi(t,e.barMeasure),e.updatedDisplay&&zi(t,e.barMeasure),e.selectionChanged&&$r(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Kr(e.cm)}function Pi(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&Vi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&pi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&hi(t,e.scrollLeft,!0,!0),e.scrollToPos&&ni(t,ri(t,ft(r,e.scrollToPos.from),ft(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||ye(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&ye(o[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ye(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Mi(e,t){if(e.curOp)return t();Si(e);try{return t()}finally{xi(e)}}function Di(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Si(e);try{return t.apply(e,arguments)}finally{xi(e)}}}function Ri(e){return function(){if(this.curOp)return e.apply(this,arguments);Si(this);try{return e.apply(this,arguments)}finally{xi(this)}}}function Li(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Si(t);try{return e.apply(this,arguments)}finally{xi(t)}}}function Ni(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,I(Ii,e))}function Ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=bt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(r.line>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength?Ge(t.mode,r.state):null,l=yt(e,o,r,!0);s&&(r.state=s),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!d&&f<a.length;++f)d=a[f]!=o.styles[f];d&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&_t(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return Ni(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Mi(e,(function(){for(var t=0;t<i.length;t++)Br(e,i[t],"text")}))}}var ji=function(e,t,n){var r=e.display;this.viewport=t,this.visible=ti(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Kn(e),this.force=n,this.dims=Mr(e),this.events=[]};function Bi(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=$n(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=$n(e)+"px",t.scrollbarsClipped=!0)}function Fi(e){if(e.hasFocus())return null;var t=D();if(!t||!M(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&M(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function Yi(e){if(e&&e.activeElt&&e.activeElt!=D()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&M(document.body,e.anchorNode)&&M(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}function Hi(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Fr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Vr(e))return!1;$i(e)&&(Fr(e),t.dims=Mr(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Pt&&(o=tn(e.doc,o),a=nn(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Hr(e,o,a),n.viewOffset=an(Je(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Vr(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=Fi(e);return l>4&&(n.lineDiv.style.display="none"),Ui(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Yi(u),O(n.cursorDiv),O(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Ni(e,400)),n.updateLineNumbers=null,!0}function Vi(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Kn(e))r&&(t.visible=ti(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+zn(e.display)-Zn(e),n.top)}),t.visible=ti(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Hi(e,t))break;Xr(e);var i=mi(e);qr(e),vi(e,i),zi(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function qi(e,t){var n=new ji(e,t);if(Hi(e,n)){Xr(e),Vi(e,n);var r=mi(e);qr(e),vi(e,r),zi(e,r),n.finish()}}function Ui(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;return l&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var u=r.view,c=r.viewFrom,d=0;d<u.length;d++){var f=u[d];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;a!=f.node;)a=s(a);var p=i&&null!=t&&t<=c&&f.lineNumber;f.changes&&(Y(f.changes,"gutter")>-1&&(p=!1),Mn(e,f,c,n)),p&&(O(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(it(e.options,c)))),a=f.node.nextSibling}else{var h=Fn(e,f,c,n);o.insertBefore(h,a)}c+=f.size}for(;a;)a=s(a)}function Wi(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",An(e,"gutterChanged",e)}function zi(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+$n(e)+"px"}function Gi(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=Dr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function $i(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=it(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(A("div",[A("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Wi(e.display),!0}return!1}function Ki(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;r=!0}n.push({className:o,style:a})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Zi(e){var t=e.gutters,n=e.gutterSpecs;O(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,a=i.style,s=t.appendChild(A("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Wi(e)}function Ji(e){Zi(e.display),jr(e),Gi(e)}function Qi(e,t,r,i){var o=this;this.input=r,o.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=A("div",null,"CodeMirror-cursors"),o.measure=A("div",null,"CodeMirror-measure"),o.lineMeasure=A("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=A("div",[u],null,"position: relative"),o.sizer=A("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=A("div",null,null,"position: absolute; height: "+H+"px; width: 1px;"),o.gutters=A("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=A("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=A("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),o.wrapper.setAttribute("translate","no"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=Ki(i.gutters,i.lineNumbers),Zi(o),r.init(o)}ji.prototype.signal=function(e,t){_e(e,t)&&this.events.push(arguments)},ji.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ye.apply(null,this.events[e])};var Xi=0,eo=null;function to(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function no(e){var t=to(e);return t.x*=eo,t.y*=eo,t}function ro(e,t){var r=to(t),i=r.x,o=r.y,a=eo;0===t.deltaMode&&(i=t.deltaX,o=t.deltaY,a=1);var s=e.display,u=s.scroller,c=u.scrollWidth>u.clientWidth,f=u.scrollHeight>u.clientHeight;if(i&&c||o&&f){if(o&&v&&l)e:for(var p=t.target,h=s.view;p!=u;p=p.parentNode)for(var m=0;m<h.length;m++)if(h[m].node==p){e.display.currentWheelTarget=p;break e}if(i&&!n&&!d&&null!=a)return o&&f&&fi(e,Math.max(0,u.scrollTop+o*a)),hi(e,Math.max(0,u.scrollLeft+i*a)),(!o||o&&f)&&Ee(t),void(s.wheelStartX=null);if(o&&null!=a){var g=o*a,y=e.doc.scrollTop,b=y+s.wrapper.clientHeight;g<0?y=Math.max(0,y+g-50):b=Math.min(e.doc.height,b+g+50),qi(e,{top:y,bottom:b})}Xi<20&&0!==t.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=u.scrollLeft-s.wheelStartX,t=u.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(eo=(eo*Xi+n)/(Xi+1),++Xi)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}a?eo=-.53:n?eo=15:c?eo=-.7:f&&(eo=-1/3);var io=function(e,t){this.ranges=e,this.primIndex=t};io.prototype.primary=function(){return this.ranges[this.primIndex]},io.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!st(n.anchor,r.anchor)||!st(n.head,r.head))return!1}return!0},io.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new oo(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new io(e,this.primIndex)},io.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},io.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(at(t,r.from())>=0&&at(e,r.to())<=0)return n}return-1};var oo=function(e,t){this.anchor=e,this.head=t};function ao(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort((function(e,t){return at(e.from(),t.from())})),n=Y(t,i);for(var o=1;o<t.length;o++){var a=t[o],s=t[o-1],l=at(s.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var u=ct(s.from(),a.from()),c=ut(s.to(),a.to()),d=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,t.splice(--o,2,new oo(d?c:u,d?u:c))}}return new io(t,n)}function so(e,t){return new io([new oo(e,t||e)],0)}function lo(e){return e.text?ot(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function uo(e,t){if(at(e,t.from)<0)return e;if(at(e,t.to)<=0)return lo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=lo(t).ch-t.to.ch),ot(n,r)}function co(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new oo(uo(i.anchor,t),uo(i.head,t)))}return ao(e.cm,n,e.sel.primIndex)}function fo(e,t,n){return e.line==t.line?ot(n.line,e.ch-t.ch+n.ch):ot(n.line+(e.line-t.line),e.ch)}function po(e,t,n){for(var r=[],i=ot(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=fo(s.from,i,o),u=fo(lo(s),i,o);if(i=s.to,o=u,"around"==n){var c=e.sel.ranges[a],d=at(c.head,c.anchor)<0;r[a]=new oo(d?u:l,d?l:u)}else r[a]=new oo(l,l)}return new io(r,e.sel.primIndex)}function ho(e){e.doc.mode=Ue(e.options,e.doc.modeOption),mo(e)}function mo(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ni(e,100),e.state.modeGen++,e.curOp&&jr(e)}function go(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function yo(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){cn(e,n,i,r),An(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new un(u[o],i(o),r));return n}var s=t.from,l=t.to,u=t.text,c=Je(e,s.line),d=Je(e,l.line),f=K(u),p=i(u.length-1),h=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(go(e,t)){var m=a(0,u.length-1);o(d,d.text,p),h&&e.remove(s.line,h),m.length&&e.insert(s.line,m)}else if(c==d)if(1==u.length)o(c,c.text.slice(0,s.ch)+f+c.text.slice(l.ch),p);else{var g=a(1,u.length-1);g.push(new un(f+c.text.slice(l.ch),p,r)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+d.text.slice(l.ch),i(0)),e.remove(s.line+1,h);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(d,f+d.text.slice(l.ch),p);var y=a(1,u.length-1);h>1&&e.remove(s.line+1,h-1),e.insert(s.line+1,y)}An(e,"change",e,t)}function vo(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function bo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Lr(e),ho(e),_o(e),e.options.direction=t.direction,e.options.lineWrapping||ln(e),e.options.mode=t.modeOption,jr(e)}function _o(e){("rtl"==e.doc.direction?R:T)(e.display.lineDiv,"CodeMirror-rtl")}function wo(e){Mi(e,(function(){_o(e),jr(e)}))}function Eo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function So(e,t){var n={from:lt(t.from),to:lo(t),text:Qe(e,t.from,t.to)};return Po(e,n,t.from.line,t.to.line+1),vo(e,(function(e){return Po(e,n,t.from.line,t.to.line+1)}),!0),n}function xo(e){for(;e.length&&K(e).ranges;)e.pop()}function ko(e,t){return t?(xo(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}function To(e,t,n,r){var i=e.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=ko(i,i.lastOp==r)))a=K(o.changes),0==at(t.from,t.to)&&0==at(t.from,a.to)?a.to=lo(t):o.changes.push(So(e,t));else{var l=K(i.done);for(l&&l.ranges||Ao(e.sel,i.done),o={changes:[So(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,a||ye(e,"historyAdded")}function Oo(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Co(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Oo(e,o,K(i.done),t))?i.done[i.done.length-1]=t:Ao(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&xo(i.undone)}function Ao(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Po(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Mo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Do(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(Mo(n[i]));return r}function Ro(e,t){var n=Do(e,t),r=Ft(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function Lo(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?io.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&Y(t,Number(c[1]))>-1&&(K(s)[d]=u[d],delete u[d])}}}return r}function No(e,t,n,r){if(r){var i=e.anchor;if(n){var o=at(t,i)<0;o!=at(n,i)<0?(i=t,t=n):o!=at(t,n)<0&&(t=n)}return new oo(i,t)}return new oo(n||t,t)}function Io(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Vo(e,new io([No(e.sel.primary(),t,n,i)],0),r)}function jo(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=No(e.sel.ranges[o],t[o],null,i);Vo(e,ao(e.cm,r,e.sel.primIndex),n)}function Bo(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Vo(e,ao(e.cm,i,e.sel.primIndex),r)}function Fo(e,t,n,r){Vo(e,so(t,n),r)}function Yo(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new oo(ft(e,t[n].anchor),ft(e,t[n].head))},origin:n&&n.origin};return ye(e,"beforeSelectionChange",e,r),e.cm&&ye(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?ao(e.cm,r.ranges,r.ranges.length-1):t}function Ho(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=t,qo(e,t,n)):Vo(e,t,n)}function Vo(e,t,n){qo(e,t,n),Co(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function qo(e,t,n){(_e(e,"beforeSelectionChange")||e.cm&&_e(e.cm,"beforeSelectionChange"))&&(t=Yo(e,t,n));var r=n&&n.bias||(at(t.primary().head,e.sel.primary().head)<0?-1:1);Uo(e,zo(e,t,r,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||si(e.cm)}function Uo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,be(e.cm)),An(e,"cursorActivity",e))}function Wo(e){Uo(e,zo(e,e.sel,null,!1))}function zo(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=$o(e,a.anchor,s&&s.anchor,n,r),u=$o(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||u!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new oo(l,u))}return i?ao(e.cm,i,t.primIndex):t}function Go(e,t,n,r,i){var o=Je(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(c?s.to>=t.ch:s.to>t.ch))){if(i&&(ye(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var d=l.find(r<0?1:-1),f=void 0;if((r<0?c:u)&&(d=Ko(e,d,-r,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(f=at(d,n))&&(r<0?f<0:f>0))return Go(e,d,t,r,i)}var p=l.find(r<0?-1:1);return(r<0?u:c)&&(p=Ko(e,p,r,p.line==t.line?o:null)),p?Go(e,p,t,r,i):null}}return t}function $o(e,t,n,r,i){var o=r||1,a=Go(e,t,n,o,i)||!i&&Go(e,t,n,o,!0)||Go(e,t,n,-o,i)||!i&&Go(e,t,n,-o,!0);return a||(e.cantEdit=!0,ot(e.first,0))}function Ko(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?ft(e,ot(t.line-1)):null:n>0&&t.ch==(r||Je(e,t.line)).text.length?t.line<e.first+e.size-1?ot(t.line+1,0):null:new ot(t.line,t.ch+n)}function Zo(e){e.setSelection(ot(e.firstLine(),0),ot(e.lastLine()),q)}function Jo(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=ft(e,t)),n&&(r.to=ft(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),ye(e,"beforeChange",e,r),e.cm&&ye(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Qo(e,t,n){if(e.cm){if(!e.cm.curOp)return Di(e.cm,Qo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(_e(e,"beforeChange")||e.cm&&_e(e.cm,"beforeChange"))||(t=Jo(e,t,!0))){var r=At&&!n&&Ht(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Xo(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else Xo(e,t)}}function Xo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=at(t.from,t.to)){var n=co(e,t);To(e,t,n,e.cm?e.cm.curOp.id:NaN),na(e,t,n,Ft(e,t));var r=[];vo(e,(function(e,n){n||-1!=Y(r,e.history)||(sa(e.history,t),r.push(e.history)),na(e,t,null,Ft(e,t))}))}}function ea(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,a=e.sel,s="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,u=0;u<s.length&&(i=s[u],n?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Ao(i,l),n&&!i.equals(e.sel))return void Vo(e,i,{clearRedo:!1});a=i}var c=[];Ao(a,l),l.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var d=_e(e,"beforeChange")||e.cm&&_e(e.cm,"beforeChange"),f=function(n){var r=i.changes[n];if(r.origin=t,d&&!Jo(e,r,!1))return s.length=0,{};c.push(So(e,r));var o=n?co(e,r):K(s);na(e,r,o,Ro(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:lo(r)});var a=[];vo(e,(function(e,t){t||-1!=Y(a,e.history)||(sa(e.history,r),a.push(e.history)),na(e,r,null,Ro(e,r))}))},p=i.changes.length-1;p>=0;--p){var h=f(p);if(h)return h.v}}}}function ta(e,t){if(0!=t&&(e.first+=t,e.sel=new io(Z(e.sel.ranges,(function(e){return new oo(ot(e.anchor.line+t,e.anchor.ch),ot(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){jr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Br(e.cm,r,"gutter")}}function na(e,t,n,r){if(e.cm&&!e.cm.curOp)return Di(e.cm,na)(e,t,n,r);if(t.to.line<e.first)ta(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ta(e,i),t={from:ot(e.first,0),to:ot(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ot(o,Je(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qe(e,t.from,t.to),n||(n=co(e,t)),e.cm?ra(e.cm,t,r):yo(e,t,r),qo(e,n,q),e.cantEdit&&$o(e,ot(e.firstLine(),0))&&(e.cantEdit=!1)}}function ra(e,t,n){var r=e.doc,i=e.display,o=t.from,a=t.to,s=!1,l=o.line;e.options.lineWrapping||(l=tt(Qt(Je(r,o.line))),r.iter(l,a.line+1,(function(e){if(e==i.maxLine)return s=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&be(e),yo(r,t,n,Rr(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,(function(e){var t=sn(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)})),s&&(e.curOp.updateMaxLine=!0)),Ct(r,o.line),Ni(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?jr(e):o.line!=a.line||1!=t.text.length||go(e.doc,t)?jr(e,o.line,a.line+1,u):Br(e,o.line,"text");var c=_e(e,"changes"),d=_e(e,"change");if(d||c){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&An(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function ia(e,t,n,r,i){var o;r||(r=n),at(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),Qo(e,{from:n,to:r,text:t,origin:i})}function oa(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function aa(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)oa(o.ranges[s].anchor,t,n,r),oa(o.ranges[s].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=ot(u.from.line+r,u.from.ch),u.to=ot(u.to.line+r,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function sa(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;aa(e.done,n,r,i),aa(e.undone,n,r,i)}function la(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Je(e,dt(e,t)):i=tt(t),null==i?null:(r(o,i)&&e.cm&&Br(e.cm,i,n),o)}function ua(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function ca(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}oo.prototype.from=function(){return ct(this.anchor,this.head)},oo.prototype.to=function(){return ut(this.anchor,this.head)},oo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ua.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,dn(i),An(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},ca.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ua))){var s=[];this.collapse(s),this.children=[new ua(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new ua(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new ca(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=Y(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new ca(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var da=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function fa(e,t,n){an(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ai(e,n)}function pa(e,t,n,r){var i=new da(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),la(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!rn(e,t)){var r=an(t)<e.scrollTop;et(t,t.height+qn(i)),r&&ai(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&An(o,"lineWidgetAdded",o,i,"number"==typeof t?t:tt(t)),i}da.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=tt(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=qn(this);et(n,Math.max(0,n.height-o)),e&&(Mi(e,(function(){fa(e,n,-o),Br(e,r,"widget")})),An(e,"lineWidgetCleared",e,this,r))}},da.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=qn(this)-t;i&&(rn(this.doc,r)||et(r,r.height+i),n&&Mi(n,(function(){n.curOp.forceUpdate=!0,fa(n,r,i),An(n,"lineWidgetChanged",n,e,tt(r))})))},we(da);var ha=0,ma=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ha};function ga(e,t,n,r,i){if(r&&r.shared)return va(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Di(e.cm,ga)(e,t,n,r,i);var o=new ma(e,i),a=at(t,n);if(r&&j(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Jt(e,t.line,t,n,o)||t.line!=n.line&&Jt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Dt()}o.addToHistory&&To(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,n.line+1,(function(r){u&&o.collapsed&&!u.options.lineWrapping&&Qt(r)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&et(r,0),It(r,new Rt(o,l==t.line?t.ch:null,l==n.line?n.ch:null),e.cm&&e.cm.curOp),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){rn(e,t)&&et(t,0)})),o.clearOnEnter&&he(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Mt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ha,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)jr(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)Br(u,c,"text");o.atomic&&Wo(u.doc),An(u,"markerAdded",u,o)}return o}ma.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Si(e),_e(this,"clear")){var n=this.find();n&&An(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Lt(a.markedSpans,this);e&&!this.collapsed?Br(e,tt(a),"text"):e&&(null!=s.to&&(i=tt(a)),null!=s.from&&(r=tt(a))),a.markedSpans=Nt(a.markedSpans,s),null==s.from&&this.collapsed&&!rn(this.doc,a)&&e&&et(a,Ar(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Qt(this.lines[l]),c=sn(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&jr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Wo(e.doc)),e&&An(e,"markerCleared",e,this,r,i),t&&xi(e),this.parent&&this.parent.clear()}},ma.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Lt(o.markedSpans,this);if(null!=a.from&&(n=ot(t?o:tt(o),a.from),-1==e))return n;if(null!=a.to&&(r=ot(t?o:tt(o),a.to),1==e))return r}return n&&{from:n,to:r}},ma.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Mi(r,(function(){var i=t.line,o=tt(t.line),a=tr(r,o);if(a&&(cr(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!rn(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=qn(n)-s;l&&et(i,i.height+l)}An(r,"markerChanged",r,e)}))},ma.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Y(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ma.prototype.detachLine=function(e){if(this.lines.splice(Y(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},we(ma);var ya=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function va(e,t,n,r,i){(r=j(r)).shared=!1;var o=[ga(e,t,n,r,i)],a=o[0],s=r.widgetNode;return vo(e,(function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(ga(e,ft(e,t),ft(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=K(o)})),new ya(o,a)}function ba(e){return e.findMarks(ot(e.first,0),e.clipPos(ot(e.lastLine())),(function(e){return e.parent}))}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(at(o,a)){var s=ga(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function wa(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];vo(n.primary.doc,(function(e){return r.push(e)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==Y(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}ya.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();An(this,"clear")}},ya.prototype.find=function(e,t){return this.primary.find(e,t)},we(ya);var Ea=0,Sa=function(e,t,n,r,i){if(!(this instanceof Sa))return new Sa(e,t,n,r,i);null==n&&(n=0),ca.call(this,[new ua([new un("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=ot(n,0);this.sel=so(o),this.history=new Eo(null),this.id=++Ea,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),yo(this,{from:o,to:o,text:e}),Vo(this,so(o),q)};Sa.prototype=X(ca.prototype,{constructor:Sa,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Xe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Li((function(e){var t=ot(this.first,0),n=this.first+this.size-1;Qo(this,{from:t,to:ot(n,Je(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&li(this.cm,0,0),Vo(this,so(t),q)})),replaceRange:function(e,t,n,r){ia(this,e,t=ft(this,t),n=n?ft(this,n):t,r)},getRange:function(e,t,n){var r=Qe(this,ft(this,e),ft(this,t));return!1===n?r:""===n?r.join(""):r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(rt(this,e))return Je(this,e)},getLineNumber:function(e){return tt(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Je(this,e)),Qt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ft(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Li((function(e,t,n){Fo(this,ft(this,"number"==typeof e?ot(e,t||0):e),null,n)})),setSelection:Li((function(e,t,n){Fo(this,ft(this,e),ft(this,t||e),n)})),extendSelection:Li((function(e,t,n){Io(this,ft(this,e),t&&ft(this,t),n)})),extendSelections:Li((function(e,t){jo(this,ht(this,e),t)})),extendSelectionsBy:Li((function(e,t){jo(this,ht(this,Z(this.sel.ranges,e)),t)})),setSelections:Li((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new oo(ft(this,e[i].anchor),ft(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Vo(this,ao(this.cm,r,t),n)}})),addSelection:Li((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new oo(ft(this,e),ft(this,t||e))),Vo(this,ao(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Qe(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Qe(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Li((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var s=t&&"end"!=t&&po(this,r,t),l=r.length-1;l>=0;l--)Qo(this,r[l]);s?Ho(this,s):this.cm&&si(this.cm)})),undo:Li((function(){ea(this,"undo")})),redo:Li((function(){ea(this,"redo")})),undoSelection:Li((function(){ea(this,"undo",!0)})),redoSelection:Li((function(){ea(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Eo(this.history),vo(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Lo(this.history.done),undone:Lo(this.history.undone)}},setHistory:function(e){var t=this.history=new Eo(this.history);t.done=Lo(e.done.slice(0),null,!0),t.undone=Lo(e.undone.slice(0),null,!0)},setGutterMarker:Li((function(e,t,n){return la(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&re(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:Li((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&la(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,re(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!rt(this,e))return null;if(t=e,!(e=Je(this,e)))return null}else if(null==(t=tt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Li((function(e,t,n){return la(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(x(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:Li((function(e,t,n){return la(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(x(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:Li((function(e,t,n){return pa(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return ga(this,ft(this,e),ft(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ga(this,e=ft(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Je(this,(e=ft(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=ft(this,e),t=ft(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n})),ft(this,ot(n,t))},indexFromPos:function(e){var t=(e=ft(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Sa(Xe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Sa(Xe(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],_a(r,ba(this)),r},unlinkDoc:function(e){if(e instanceof js&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),wa(ba(this));break}if(e.history==this.history){var n=[e.id];vo(e,(function(e){return n.push(e.id)}),!0),e.history=new Eo(null),e.history.done=Lo(this.history.done,n),e.history.undone=Lo(this.history.undone,n)}},iterLinkedDocs:function(e){vo(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Le(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Li((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&wo(this.cm))}))}),Sa.prototype.eachLine=Sa.prototype.iter;var xa=0;function ka(e){var t=this;if(Ca(t),!ve(t,e)&&!Un(t.display,e)){Ee(e),a&&(xa=+new Date);var n=Nr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,l=function(){++s==i&&Di(t,(function(){var e={from:n=ft(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};Qo(t.doc,e),Ho(t.doc,so(ft(t.doc,n),ft(t.doc,lo(e))))}))()},u=function(e,n){if(t.options.allowDropFileTypes&&-1==Y(t.options.allowDropFileTypes,e.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},r.readAsText(e)}},c=0;c<r.length;c++)u(r[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var d=e.dataTransfer.getData("Text");if(d){var f;if(t.state.draggingText&&!t.state.draggingText.copy&&(f=t.listSelections()),qo(t.doc,so(n,n)),f)for(var p=0;p<f.length;++p)ia(t.doc,"",f[p].anchor,f[p].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ta(e,t){if(a&&(!e.state.draggingText||+new Date-xa<100))ke(t);else if(!ve(e,t)&&!Un(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var n=A("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}function Oa(e,t){var n=Nr(e,t);if(n){var r=document.createDocumentFragment();Wr(e,n,r),e.display.dragCursor||(e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),C(e.display.dragCursor,r)}}function Ca(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Aa(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Pa=!1;function Ma(){Pa||(Da(),Pa=!0)}function Da(){var e;he(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Aa(Ra)}),100))})),he(window,"blur",(function(){return Aa(Qr)}))}function Ra(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var La={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Na=0;Na<10;Na++)La[Na+48]=La[Na+96]=String(Na);for(var Ia=65;Ia<=90;Ia++)La[Ia]=String.fromCharCode(Ia);for(var ja=1;ja<=12;ja++)La[ja+111]=La[ja+63235]="F"+ja;var Ba={};function Fa(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Ya(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Z(n.split(" "),Fa),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function Ha(e,t,n,r){var i=(t=Wa(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ha(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=Ha(e,t.fallthrough[o],n,r);if(a)return a}}}function Va(e){var t="string"==typeof e?e:La[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function qa(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(E?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(E?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Ua(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=La[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),qa(n,e,t))}function Wa(e){return"string"==typeof e?Ba[e]:e}function za(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&at(o.from,K(r).to)<=0;){var a=r.pop();if(at(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Mi(e,(function(){for(var t=r.length-1;t>=0;t--)ia(e.doc,"",r[t].from,r[t].to,"+delete");si(e)}))}function Ga(e,t,n){var r=ae(e.text,t+n,n);return r<0||r>e.text.length?null:r}function $a(e,t,n){var r=Ga(e,t.ch,n);return null==r?null:new ot(t.line,r,n<0?"after":"before")}function Ka(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=fe(n,t.doc.direction);if(o){var a,s=i<0?K(o):o[0],l=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var u=nr(t,n);a=i<0?n.text.length-1:0;var c=rr(t,u,a).top;a=se((function(e){return rr(t,u,e).top==c}),i<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=Ga(n,a,1))}else a=i<0?s.to:s.from;return new ot(r,a,l)}}return new ot(r,i<0?n.text.length:0,i<0?"before":"after")}function Za(e,t,n,r){var i=fe(t,e.doc.direction);if(!i)return $a(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ce(i,n.ch,n.sticky),a=i[o];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return $a(t,n,r);var s,l=function(e,n){return Ga(t,e instanceof ot?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(s=s||nr(e,t),xr(e,t,s,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==r<0,f=l(n,d?1:-1);if(null!=f&&(d?f<=a.to&&f<=c.end:f>=a.from&&f>=c.begin)){var p=d?"before":"after";return new ot(n.line,f,p)}}var h=function(e,t,r){for(var o=function(e,t){return t?new ot(n.line,l(e,1),"before"):new ot(n.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],s=t>0==(1!=a.level),u=s?r.begin:l(r.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),r.begin<=u&&u<r.end)return o(u,s)}},m=h(o+r,r,c);if(m)return m;var g=r>0?c.end:l(c.begin,-1);return null==g||r>0&&g==t.text.length||!(m=h(r>0?0:i.length-1,r,u(g)))?null:m}Ba.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ba.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ba.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ba.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ba.default=v?Ba.macDefault:Ba.pcDefault;var Ja={selectAll:Zo,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(e){return za(e,(function(t){if(t.empty()){var n=Je(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ot(t.head.line+1,0)}:{from:t.head,to:ot(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return za(e,(function(t){return{from:ot(t.from().line,0),to:ft(e.doc,ot(t.to().line+1,0))}}))},delLineLeft:function(e){return za(e,(function(e){return{from:ot(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return za(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return za(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ot(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ot(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Qa(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return es(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return Xa(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),W)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),W)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?es(e,t.head):r}),W)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=B(e.getLine(o.line),o.ch,r);t.push($(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Mi(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=Je(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ot(i.line,i.ch-1)),i.ch>0)i=new ot(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ot(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Je(e.doc,i.line-1).text;a&&(i=new ot(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),ot(i.line-1,a.length-1),i,"+transpose"))}n.push(new oo(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){return Mi(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);si(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qa(e,t){var n=Je(e.doc,t),r=Qt(n);return r!=n&&(t=tt(r)),Ka(!0,e,r,t,1)}function Xa(e,t){var n=Je(e.doc,t),r=Xt(n);return r!=n&&(t=tt(r)),Ka(!0,e,n,t,-1)}function es(e,t){var n=Qa(e,t.line),r=Je(e.doc,n.line),i=fe(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return ot(n.line,a?0:o,n.sticky)}return n}function ts(e,t,n){if("string"==typeof t&&!(t=Ja[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=V}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function ns(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Ha(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Ha(t,e.options.extraKeys,n,e)||Ha(t,e.options.keyMap,n,e)}var rs=new F;function is(e,t,n,r){var i=e.state.keySeq;if(i){if(Va(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:rs.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),os(e,i+" "+t,n,r))return!0}return os(e,t,n,r)}function os(e,t,n,r){var i=ns(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&An(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(Ee(n),$r(e)),!!i}function as(e,t){var n=Ua(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?is(e,"Shift-"+n,t,(function(t){return ts(e,t,!0)}))||is(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ts(e,t)})):is(e,n,t,(function(t){return ts(e,t)})))}function ss(e,t,n){return is(e,"'"+n+"'",t,(function(t){return ts(e,t,!0)}))}var ls=null;function us(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=D(),ve(t,e)))){a&&s<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=as(t,e);d&&(ls=i?r:null,i||88!=r||Ie||!(v?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!v&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||cs(t)}}function cs(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),ge(document,"keyup",n),ge(document,"mouseover",n))}R(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n)}function ds(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function fs(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Un(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(d&&n==ls)return ls=null,void Ee(e);if(!d||e.which&&!(e.which<10)||!as(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(ss(t,e,i)||t.display.input.onKeyPress(e))}}}var ps,hs,ms=400,gs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ys(e,t){var n=+new Date;return hs&&hs.compare(n,e,t)?(ps=hs=null,"triple"):ps&&ps.compare(n,e,t)?(hs=new gs(n,e,t),ps=null,"double"):(ps=new gs(n,e,t),hs=null,"single")}function vs(e){var t=this,n=t.display;if(!(ve(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Un(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!Os(t,e)){var r=Nr(t,e),i=Oe(e),o=r?ys(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&bs(t,i,r,o,e)||(1==i?r?ws(t,r,o,e):Te(e)==n.scroller&&Ee(e):2==i?(r&&Io(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(S?t.display.input.onContextMenu(e):Zr(t)))}}function bs(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),is(e,qa(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,(function(t){if("string"==typeof t&&(t=Ja[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=V}finally{e.state.suppressEdits=!1}return r}))}function _s(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=v?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?n.altKey:n.ctrlKey)),i}function ws(e,t,n,r){a?setTimeout(I(Kr,e),0):e.curOp.focus=D();var i,o=_s(e,n,r),s=e.doc.sel;e.options.dragDrop&&Pe&&!e.isReadOnly()&&"single"==n&&(i=s.contains(t))>-1&&(at((i=s.ranges[i]).from(),t)<0||t.xRel>0)&&(at(i.to(),t)>0||t.xRel<0)?Es(e,r,t,o):xs(e,r,t,o)}function Es(e,t,n,r){var i=e.display,o=!1,u=Di(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Zr(e)),ge(i.wrapper.ownerDocument,"mouseup",u),ge(i.wrapper.ownerDocument,"mousemove",c),ge(i.scroller,"dragstart",d),ge(i.scroller,"drop",u),o||(Ee(t),r.addNew||Io(e.doc,n,null,null,r.extend),l&&!f||a&&9==s?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!r.moveOnDrag,he(i.wrapper.ownerDocument,"mouseup",u),he(i.wrapper.ownerDocument,"mousemove",c),he(i.scroller,"dragstart",d),he(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}function Ss(e,t,n){if("char"==n)return new oo(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new oo(ot(t.line,0),ft(e.doc,ot(t.line+1,0)));var r=n(e,t);return new oo(r.from,r.to)}function xs(e,t,n,r){a&&Zr(e);var i=e.display,o=e.doc;Ee(t);var s,l,u=o.sel,c=u.ranges;if(r.addNew&&!r.extend?(l=o.sel.contains(n),s=l>-1?c[l]:new oo(n,n)):(s=o.sel.primary(),l=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new oo(n,n)),n=Nr(e,t,!0,!0),l=-1;else{var d=Ss(e,n,r.unit);s=r.extend?No(s,d.anchor,d.head,r.extend):d}r.addNew?-1==l?(l=c.length,Vo(o,ao(e,c.concat([s]),l),{scroll:!1,origin:"*mouse"})):c.length>1&&c[l].empty()&&"char"==r.unit&&!r.extend?(Vo(o,ao(e,c.slice(0,l).concat(c.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=o.sel):Bo(o,l,s,U):(l=0,Vo(o,new io([s],0),U),u=o.sel);var f=n;function p(t){if(0!=at(f,t))if(f=t,"rectangle"==r.unit){for(var i=[],a=e.options.tabSize,c=B(Je(o,n.line).text,n.ch,a),d=B(Je(o,t.line).text,t.ch,a),p=Math.min(c,d),h=Math.max(c,d),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var y=Je(o,m).text,v=z(y,p,a);p==h?i.push(new oo(ot(m,v),ot(m,v))):y.length>v&&i.push(new oo(ot(m,v),ot(m,z(y,h,a))))}i.length||i.push(new oo(n,n)),Vo(o,ao(e,u.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,_=s,w=Ss(e,t,r.unit),E=_.anchor;at(w.anchor,E)>0?(b=w.head,E=ct(_.from(),w.anchor)):(b=w.anchor,E=ut(_.to(),w.head));var S=u.ranges.slice(0);S[l]=ks(e,new oo(ft(o,E),b)),Vo(o,ao(e,S,l),U)}}var h=i.wrapper.getBoundingClientRect(),m=0;function g(t){var n=++m,a=Nr(e,t,!0,"rectangle"==r.unit);if(a)if(0!=at(a,f)){e.curOp.focus=D(),p(a);var s=ti(i,o);(a.line>=s.to||a.line<s.from)&&setTimeout(Di(e,(function(){m==n&&g(t)})),150)}else{var l=t.clientY<h.top?-20:t.clientY>h.bottom?20:0;l&&setTimeout(Di(e,(function(){m==n&&(i.scroller.scrollTop+=l,g(t))})),50)}}function y(t){e.state.selectingText=!1,m=1/0,t&&(Ee(t),i.input.focus()),ge(i.wrapper.ownerDocument,"mousemove",v),ge(i.wrapper.ownerDocument,"mouseup",b),o.history.lastSelOrigin=null}var v=Di(e,(function(e){0!==e.buttons&&Oe(e)?g(e):y(e)})),b=Di(e,y);e.state.selectingText=b,he(i.wrapper.ownerDocument,"mousemove",v),he(i.wrapper.ownerDocument,"mouseup",b)}function ks(e,t){var n=t.anchor,r=t.head,i=Je(e.doc,n.line);if(0==at(n,r)&&n.sticky==r.sticky)return t;var o=fe(i);if(!o)return t;var a=ce(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=ce(o,r.ch,r.sticky),d=c-a||(r.ch-n.ch)*(1==s.level?-1:1);l=c==u-1||c==u?d<0:d>0}var f=o[u+(l?-1:0)],p=l==(1==f.level),h=p?f.from:f.to,m=p?"after":"before";return n.ch==h&&n.sticky==m?t:new oo(new ot(n.line,h,m),r)}function Ts(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ee(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!_e(e,n))return xe(t);o-=s.top-a.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i)return ye(e,n,e,nt(e.doc,o),e.display.gutterSpecs[l].className,t),xe(t)}}function Os(e,t){return Ts(e,t,"gutterClick",!0)}function Cs(e,t){Un(e.display,t)||As(e,t)||ve(e,t,"contextmenu")||S||e.display.input.onContextMenu(t)}function As(e,t){return!!_e(e,"gutterContextMenu")&&Ts(e,t,"gutterContextMenu",!1)}function Ps(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),fr(e)}gs.prototype.compare=function(e,t,n){return this.time+ms>e&&0==at(t,this.pos)&&n==this.button};var Ms={toString:function(){return"CodeMirror.Init"}},Ds={},Rs={};function Ls(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=Ms&&i(e,t,n)}:i)}e.defineOption=n,e.Init=Ms,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,ho(e)}),!0),n("indentUnit",2,ho,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){mo(e),fr(e),jr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(ot(r,o))}r++}));for(var i=n.length-1;i>=0;i--)ia(e.doc,t,n[i],ot(n[i].line,n[i].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ms&&e.refresh()})),n("specialCharPlaceholder",gn,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!_),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Ps(e),Ji(e)}),!0),n("keyMap","default",(function(e,t,n){var r=Wa(t),i=n!=Ms&&Wa(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Is,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=Ki(t,e.options.lineNumbers),Ji(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Dr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return vi(e)}),!0),n("scrollbarStyle","native",(function(e){wi(e),vi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Ki(e.options.gutters,t),Ji(e)}),!0),n("firstLineNumber",1,Ji,!0),n("lineNumberFormatter",(function(e){return e}),Ji,!0),n("showCursorWhenSelecting",!1,qr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Qr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Ns),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,qr,!0),n("singleCursorHeightPerLine",!0,qr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,mo,!0),n("addModeClass",!1,mo,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,mo,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}function Ns(e,t,n){if(!t!=!(n&&n!=Ms)){var r=e.display.dragFunctions,i=t?he:ge;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function Is(e){e.options.lineWrapping?(R(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),ln(e)),Lr(e),jr(e),fr(e),setTimeout((function(){return vi(e)}),100)}function js(e,t){var n=this;if(!(this instanceof js))return new js(e,t);this.options=t=t?j(t):{},j(Ds,t,!1);var r=t.value;"string"==typeof r?r=new Sa(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new js.inputStyles[t.inputStyle](this),o=this.display=new Qi(e,r,i,t);for(var u in o.wrapper.CodeMirror=this,Ps(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),wi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),a&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),Bs(this),Ma(),Si(this),this.curOp.forceUpdate=!0,bo(this,r),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&Jr(n)}),20):Qr(this),Rs)Rs.hasOwnProperty(u)&&Rs[u](this,t[u],Ms);$i(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Fs.length;++c)Fs[c](this);xi(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function Bs(e){var t=e.display;he(t.scroller,"mousedown",Di(e,vs)),he(t.scroller,"dblclick",a&&s<11?Di(e,(function(t){if(!ve(e,t)){var n=Nr(e,t);if(n&&!Os(e,t)&&!Un(e.display,t)){Ee(t);var r=e.findWordAt(n);Io(e.doc,r.anchor,r.head)}}})):function(t){return ve(e,t)||Ee(t)}),he(t.scroller,"contextmenu",(function(t){return Cs(e,t)})),he(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||Cs(e,n)}));var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}he(t.scroller,"touchstart",(function(i){if(!ve(e,i)&&!o(i)&&!Os(e,i)){t.input.ensurePolled(),clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),he(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),he(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!Un(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var o,a=e.coordsChar(t.activeTouch,"page");o=!r.prev||l(r,r.prev)?new oo(a,a):!r.prev.prev||l(r,r.prev.prev)?e.findWordAt(a):new oo(ot(a.line,0),ft(e.doc,ot(a.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Ee(n)}i()})),he(t.scroller,"touchcancel",i),he(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(fi(e,t.scroller.scrollTop),hi(e,t.scroller.scrollLeft,!0),ye(e,"scroll",e))})),he(t.scroller,"mousewheel",(function(t){return ro(e,t)})),he(t.scroller,"DOMMouseScroll",(function(t){return ro(e,t)})),he(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ve(e,t)||ke(t)},over:function(t){ve(e,t)||(Oa(e,t),ke(t))},start:function(t){return Ta(e,t)},drop:Di(e,ka),leave:function(t){ve(e,t)||Ca(e)}};var u=t.input.getField();he(u,"keyup",(function(t){return ds.call(e,t)})),he(u,"keydown",Di(e,us)),he(u,"keypress",Di(e,fs)),he(u,"focus",(function(t){return Jr(e,t)})),he(u,"blur",(function(t){return Qr(e,t)}))}js.defaults=Ds,js.optionHandlers=Rs;var Fs=[];function Ys(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=bt(e,t).state:n="prev");var a=e.options.tabSize,s=Je(o,t),l=B(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==V||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?B(Je(o,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(u/a);p;--p)f+=a,d+="\t";if(f<u&&(d+=$(u-f)),d!=c)return ia(o,d,ot(t,0),ot(t,c.length),"+input"),s.stateAfter=null,!0;for(var h=0;h<o.sel.ranges.length;h++){var m=o.sel.ranges[h];if(m.head.line==t&&m.head.ch<c.length){var g=ot(t,c.length);Bo(o,h,new oo(g,g));break}}}js.defineInitHook=function(e){return Fs.push(e)};var Hs=null;function Vs(e){Hs=e}function qs(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=+new Date-200,s="paste"==i||e.state.pasteIncoming>a,l=Le(t),u=null;if(s&&r.ranges.length>1)if(Hs&&Hs.text.join("\n")==t){if(r.ranges.length%Hs.text.length==0){u=[];for(var c=0;c<Hs.text.length;c++)u.push(o.splitLines(Hs.text[c]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(u=Z(l,(function(e){return[e]})));for(var d=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var p=r.ranges[f],h=p.from(),m=p.to();p.empty()&&(n&&n>0?h=ot(h.line,h.ch-n):e.state.overwrite&&!s?m=ot(m.line,Math.min(Je(o,m.line).text.length,m.ch+K(l).length)):s&&Hs&&Hs.lineWise&&Hs.text.join("\n")==l.join("\n")&&(h=m=ot(h.line,0)));var g={from:h,to:m,text:u?u[f%u.length]:l,origin:i||(s?"paste":e.state.cutIncoming>a?"cut":"+input")};Qo(e.doc,g),An(e,"inputRead",e,g)}t&&!s&&Ws(e,t),si(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Us(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Mi(t,(function(){return qs(t,n,0,null,"paste")})),!0}function Ws(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Ys(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Je(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ys(e,i.head.line,"smart"));a&&An(e,"electricInput",e,i.head.line)}}}function zs(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:ot(i,0),head:ot(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Gs(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function $s(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Gs(e),t}function Ks(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&Di(this,t[e])(this,n,i),ye(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Wa(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Ri((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");J(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,jr(this)})),removeOverlay:Ri((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void jr(this)}})),indentLine:Ri((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),rt(this.doc,e)&&Ys(this,e,t,n)})),indentSelection:Ri((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Ys(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&si(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Ys(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[r].from().ch>0&&Bo(this.doc,r,new oo(o,u[r].to()),q)}}})),getTokenAt:function(e,t){return xt(this,e,t)},getLineTokens:function(e,t){return xt(this,ot(e),t,!0)},getTokenTypeAt:function(e){e=ft(this.doc,e);var t,n=vt(this,Je(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var s=i[o[t][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var u=i._global[l];u.pred(o,this)&&-1==Y(r,u.val)&&r.push(u.val)}return r},getStateAfter:function(e,t){var n=this.doc;return bt(this,(e=dt(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return br(this,null==e?n.head:"object"==typeof e?ft(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return vr(this,ft(this.doc,e),t||"page")},coordsChar:function(e,t){return Er(this,(e=yr(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=yr(this,{top:e,left:0},t||"page").top,nt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=Je(this.doc,e)}else r=e;return gr(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-an(r):0)},defaultTextHeight:function(){return Ar(this.display)},defaultCharWidth:function(){return Pr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display,a=(e=br(this,ft(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&ii(this,{left:s,top:a,right:s+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Ri(us),triggerOnKeyPress:Ri(fs),triggerOnKeyUp:ds,triggerOnMouseDown:Ri(vs),execCommand:function(e){if(Ja.hasOwnProperty(e))return Ja[e].call(null,this)},triggerElectric:Ri((function(e){Ws(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=ft(this.doc,e),a=0;a<t&&!(o=Zs(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:Ri((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Zs(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),W)})),deleteH:Ri((function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):za(this,(function(n){var i=Zs(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=ft(this.doc,e),s=0;s<t;++s){var l=br(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Js(this,l,i,n)).hitSide)break}return a},moveV:Ri((function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(a){if(o)return e<0?a.from():a.to();var s=br(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Js(n,s,e,t);return"page"==t&&a==r.sel.primary()&&ai(n,vr(n,l,"div").top-s.top),l}),W),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(e){var t=Je(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),a=ne(o,i)?function(e){return ne(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ne(e)};n>0&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new oo(ot(e.line,n),ot(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?R(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),ye(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==D()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ri((function(e,t){li(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-$n(this)-this.display.barHeight,width:e.scrollWidth-$n(this)-this.display.barWidth,clientHeight:Zn(this),clientWidth:Kn(this)}},scrollIntoView:Ri((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ot(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?ui(this,e):di(this,e.from,e.to,e.margin)})),setSize:Ri((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&dr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Br(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,ye(this,"refresh",this)})),operation:function(e){return Mi(this,e)},startOperation:function(){return Si(this)},endOperation:function(){return xi(this)},refresh:Ri((function(){var e=this.display.cachedTextHeight;jr(this),this.curOp.forceUpdate=!0,fr(this),li(this,this.doc.scrollLeft,this.doc.scrollTop),Wi(this.display),(null==e||Math.abs(e-Ar(this.display))>.5||this.options.lineWrapping)&&Lr(this),ye(this,"refresh",this)})),swapDoc:Ri((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),bo(this,e),fr(this),this.display.input.reset(),li(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,An(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},we(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}function Zs(e,t,n,r,i){var o=t,a=n,s=Je(e,t.line),l=i&&"rtl"==e.direction?-n:n;function u(){var n=t.line+l;return!(n<e.first||n>=e.first+e.size)&&(t=new ot(n,t.ch,t.sticky),s=Je(e,n))}function c(o){var a;if("codepoint"==r){var c=s.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(c))a=null;else{var d=n>0?c>=55296&&c<56320:c>=56320&&c<57343;a=new ot(t.line,Math.max(0,Math.min(s.text.length,t.ch+n*(d?2:1))),-n)}}else a=i?Za(e.cm,s,t,n):$a(s,t,n);if(null==a){if(o||!u())return!1;t=Ka(i,e.cm,s,t.line,l)}else t=a;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var d=null,f="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(n<0)||c(!h);h=!1){var m=s.text.charAt(t.ch)||"\n",g=ne(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||h||g||(g="s"),d&&d!=g){n<0&&(n=1,c(),t.sticky="after");break}if(g&&(d=g),n>0&&!c(!h))break}var y=$o(e,t,o,a,!0);return st(o,y)&&(y.hitSide=!0),y}function Js(e,t,n,r){var i,o,a=e.doc,s=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*Ar(e.display),3);i=(n>0?t.bottom:t.top)+n*u}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Er(e,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var Qs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Xs(e,t){var n=tr(e,t.line);if(!n||n.hidden)return null;var r=Je(e.doc,t.line),i=Qn(n,r,t.line),o=fe(r,e.doc.direction),a="left";o&&(a=ce(o,t.ch)%2?"right":"left");var s=ar(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function el(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tl(e,t){return t&&(e.bad=!0),e}function nl(e,t,n,r,i){var o="",a=!1,s=e.doc.lineSeparator(),l=!1;function u(e){return function(t){return t.id==e}}function c(){a&&(o+=s,l&&(o+=s),a=l=!1)}function d(e){e&&(c(),o+=e)}function f(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void d(n);var o,p=t.getAttribute("cm-marker");if(p){var h=e.findMarks(ot(r,0),ot(i+1,0),u(+p));return void(h.length&&(o=h[0].find(0))&&d(Qe(e.doc,o.from,o.to).join(s)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var g=0;g<t.childNodes.length;g++)f(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),m&&(a=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;f(t),t!=n;)t=t.nextSibling,l=!1;return o}function rl(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return tl(e.clipPos(ot(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return il(o,t,n)}}function il(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!M(r,t))return tl(ot(tt(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return tl(ot(tt(o),o.text.length),i)}var a=3==t.nodeType?t:null,s=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=e.measure,u=l.maps;function c(t,n,r){for(var i=-1;i<(u?u.length:0);i++)for(var o=i<0?l.map:u[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var c=tt(i<0?e.line:e.rest[i]),d=o[a]+r;return(r<0||s!=t)&&(d=o[a+(r?1:0)]),ot(c,d)}}}var d=c(a,s,n);if(d)return tl(d,i);for(var f=s.nextSibling,p=a?a.nodeValue.length-n:0;f;f=f.nextSibling){if(d=c(f,f.firstChild,0))return tl(ot(d.line,d.ch-p),i);p+=f.textContent.length}for(var h=s.previousSibling,m=n;h;h=h.previousSibling){if(d=c(h,h.firstChild,-1))return tl(ot(d.line,d.ch+m),i);m+=h.textContent.length}}Qs.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function a(e){if(o(e)&&!ve(r,e)){if(r.somethingSelected())Vs({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=zs(r);Vs({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,q),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var a=Hs.text.join("\n");if(e.clipboardData.setData("Text",a),e.clipboardData.getData("Text")==a)return void e.preventDefault()}var s=$s(),l=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),l.value=Hs.text.join("\n");var u=D();N(l),setTimeout((function(){r.display.lineSpace.removeChild(s),u.focus(),u==i&&n.showPrimarySelection()}),50)}}i.contentEditable=!0,Gs(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),he(i,"paste",(function(e){!o(e)||ve(r,e)||Us(e,r)||s<=11&&setTimeout(Di(r,(function(){return t.updateFromDOM()})),20)})),he(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),he(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),he(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),he(i,"touchstart",(function(){return n.forceCompositionEnd()})),he(i,"input",(function(){t.composing||t.readFromDOMSoon()})),he(i,"copy",a),he(i,"cut",a)},Qs.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qs.prototype.prepareSelection=function(){var e=Ur(this.cm,!1);return e.focus=D()==this.div,e},Qs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=rl(t,e.anchorNode,e.anchorOffset),s=rl(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=at(ct(a,s),i)||0!=at(ut(a,s),o)){var l=t.display.view,u=i.line>=t.display.viewFrom&&Xs(t,i)||{node:l[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Xs(t,o);if(!c){var d=l[l.length-1].measure,f=d.maps?d.maps[d.maps.length-1]:d.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(u&&c){var p,h=e.rangeCount&&e.getRangeAt(0);try{p=k(u.node,u.offset,c.offset,c.node)}catch(e){}p&&(!n&&t.state.focused?(e.collapse(u.node,u.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),h&&null==e.anchorNode?e.addRange(h):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Qs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Qs.prototype.showMultipleSelections=function(e){C(this.cm.display.cursorDiv,e.cursors),C(this.cm.display.selectionDiv,e.selection)},Qs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return M(this.div,t)},Qs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&D()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qs.prototype.blur=function(){this.div.blur()},Qs.prototype.getField=function(){return this.div},Qs.prototype.supportsTouch=function(){return!0},Qs.prototype.receivedFocus=function(){var e=this,t=this;function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):Mi(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,n)},Qs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&c&&this.cm.display.gutterSpecs.length&&el(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=rl(t,e.anchorNode,e.anchorOffset),r=rl(t,e.focusNode,e.focusOffset);n&&r&&Mi(t,(function(){Vo(t.doc,so(n,r),q),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Qs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=ot(a.line-1,Je(r.doc,a.line-1).length)),s.ch==Je(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=ot(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=Ir(r,a.line))?(t=tt(i.view[0].line),n=i.view[0].node):(t=tt(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,u,c=Ir(r,s.line);if(c==i.view.length-1?(l=i.viewTo-1,u=i.lineDiv.lastChild):(l=tt(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!n)return!1;for(var d=r.doc.splitLines(nl(r,n,u,t,l)),f=Qe(r.doc,ot(t,0),ot(l,Je(r.doc,l).text.length));d.length>1&&f.length>1;)if(K(d)==K(f))d.pop(),f.pop(),l--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),t++}for(var p=0,h=0,m=d[0],g=f[0],y=Math.min(m.length,g.length);p<y&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var v=K(d),b=K(f),_=Math.min(v.length-(1==d.length?p:0),b.length-(1==f.length?p:0));h<_&&v.charCodeAt(v.length-h-1)==b.charCodeAt(b.length-h-1);)++h;if(1==d.length&&1==f.length&&t==a.line)for(;p&&p>a.ch&&v.charCodeAt(v.length-h-1)==b.charCodeAt(b.length-h-1);)p--,h++;d[d.length-1]=v.slice(0,v.length-h).replace(/^\u200b+/,""),d[0]=d[0].slice(p).replace(/\u200b+$/,"");var w=ot(t,p),E=ot(l,f.length?K(f).length-h:0);return d.length>1||d[0]||at(w,E)?(ia(r.doc,d,w,E,"+input"),!0):void 0},Qs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qs.prototype.reset=function(){this.forceCompositionEnd()},Qs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Qs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Mi(this.cm,(function(){return jr(e.cm)}))},Qs.prototype.setUneditable=function(e){e.contentEditable="false"},Qs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Di(this.cm,qs)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Qs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Qs.prototype.onContextMenu=function(){},Qs.prototype.resetPosition=function(){},Qs.prototype.needsContentAttribute=!0;var ol=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};function al(e,t){if((t=t?j(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=D();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=s.getValue()}var i;if(e.form&&(he(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(e){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(ge(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var s=js((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return s}function sl(e){e.off=ge,e.on=he,e.wheelEventPixels=no,e.Doc=Sa,e.splitLines=Le,e.countColumn=B,e.findColumn=z,e.isWordChar=te,e.Pass=V,e.signal=ye,e.Line=un,e.changeEnd=lo,e.scrollbarModel=_i,e.Pos=ot,e.cmpPos=at,e.modes=Fe,e.mimeModes=Ye,e.resolveMode=qe,e.getMode=Ue,e.modeExtensions=We,e.extendMode=ze,e.copyState=Ge,e.startState=Ke,e.innerMode=$e,e.commands=Ja,e.keyMap=Ba,e.keyName=Ua,e.isModifierKey=Va,e.lookupKey=Ha,e.normalizeKeyMap=Ya,e.StringStream=Ze,e.SharedTextMarker=ya,e.TextMarker=ma,e.LineWidget=da,e.e_preventDefault=Ee,e.e_stopPropagation=Se,e.e_stop=ke,e.addClass=R,e.contains=M,e.rmClass=T,e.keyNames=La}ol.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!ve(r,e)){if(r.somethingSelected())Vs({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=zs(r);Vs({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,q):(n.prevInput="",i.value=t.text.join("\n"),N(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),he(i,"input",(function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),he(i,"paste",(function(e){ve(r,e)||Us(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),he(i,"cut",o),he(i,"copy",o),he(e.scroller,"paste",(function(t){if(!Un(e,t)&&!ve(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}})),he(e.lineSpace,"selectstart",(function(t){Un(e,t)||Ee(t)})),he(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),he(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},ol.prototype.createField=function(e){this.wrapper=$s(),this.textarea=this.wrapper.firstChild},ol.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},ol.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=Ur(e);if(e.options.moveInputWithCursor){var i=br(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},ol.prototype.showSelection=function(e){var t=this.cm.display;C(t.cursorDiv,e.cursors),C(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ol.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&N(this.textarea),a&&s>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},ol.prototype.getField=function(){return this.textarea},ol.prototype.supportsTouch=function(){return!1},ol.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||D()!=this.textarea))try{this.textarea.focus()}catch(e){}},ol.prototype.blur=function(){this.textarea.blur()},ol.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ol.prototype.receivedFocus=function(){this.slowPoll()},ol.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},ol.prototype.fastPoll=function(){var e=!1,t=this;function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}t.pollingFast=!0,t.polling.set(20,n)},ol.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ne(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(r.length,i.length);l<u&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Mi(t,(function(){qs(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},ol.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ol.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},ol.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=Nr(n,e),u=r.scroller.scrollTop;if(o&&!d){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&Di(n,Vo)(n.doc,so(o),q);var c,f=i.style.cssText,p=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),r.input.focus(),l&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&g(),S){ke(e);var m=function(){ge(window,"mouseup",m),setTimeout(y,20)};he(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,i.style.cssText=f,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!a||a&&s<9)&&g();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Di(n,Zo)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},ol.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},ol.prototype.setUneditable=function(){},ol.prototype.needsContentAttribute=!1,Ls(js),Ks(js);var ll="iter insert remove copy getEditor constructor".split(" ");for(var ul in Sa.prototype)Sa.prototype.hasOwnProperty(ul)&&Y(ll,ul)<0&&(js.prototype[ul]=function(e){return function(){return e.apply(this.doc,arguments)}}(Sa.prototype[ul]));return we(Sa),js.inputStyles={textarea:ol,contenteditable:Qs},js.defineMode=function(e){js.defaults.mode||"null"==e||(js.defaults.mode=e),He.apply(this,arguments)},js.defineMIME=Ve,js.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),js.defineMIME("text/plain","null"),js.defineExtension=function(e,t){js.prototype[e]=t},js.defineDocExtension=function(e,t){Sa.prototype[e]=t},js.fromTextArea=al,sl(js),js.version="5.65.3",js}()},70718:(e,t,n)=>{"use strict";var r=n(58911);e.exports=function(e,t,n){e&&r((function(){e.apply(n||null,t||[])}))}},31262:(e,t,n)=>{"use strict";var r=n(86640),i=n(70718);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=r(arguments),s=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===o.length?o[0]:o;return a.forEach((function(r){n.async?i(r,o,s):r.apply(s,o),r._once&&e.off(t,r)})),e}},e}},97651:(e,t,n)=>{"use strict";var r=n(32696),i=n(65844),o=n.g.document,a=function(e,t,n,r){return e.addEventListener(t,n,r)},s=function(e,t,n,r){return e.removeEventListener(t,n,r)},l=[];function u(e,t,n){var r=function(e,t,n){var r,i;for(r=0;r<l.length;r++)if((i=l[r]).element===e&&i.type===t&&i.fn===n)return r}(e,t,n);if(r){var i=l[r].wrapper;return l.splice(r,1),i}}n.g.addEventListener||(a=function(e,t,r){return e.attachEvent("on"+t,function(e,t,r){var i=u(e,t,r)||function(e,t,r){return function(t){var i=t||n.g.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}(e,0,r);return l.push({wrapper:i,element:e,type:t,fn:r}),i}(e,t,r))},s=function(e,t,n){var r=u(e,t,n);if(r)return e.detachEvent("on"+t,r)}),e.exports={add:a,remove:s,fabricate:function(e,t,n){var a=-1===i.indexOf(t)?new r(t,{detail:n}):function(){var e;o.createEvent?(e=o.createEvent("Event")).initEvent(t,!0,!0):o.createEventObject&&(e=o.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}},65844:(e,t,n)=>{"use strict";var r=[],i="",o=/^on/;for(i in n.g)o.test(i)&&r.push(i.slice(2));e.exports=r},57359:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(50633)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},l=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),c=a.enc={},d=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},f=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,c=e.min(4*l,o);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(i,d);n=i.splice(0,l),r.sigBytes-=c}return new u.init(n,c)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(s.Hasher=h.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)},11093:function(e,t,n){var r;e.exports=(r=n(57359),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),l[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],c=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var h=u[p-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=u[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[p]=m+u[p-7]+y+u[p-16]}var v=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&d)+l[p]+u[p];f=d,d=c,c=s,s=a+_|0,a=o,o=i,i=r,r=_+(b+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(c),t.HmacSHA256=o._createHmacHelper(c)}(Math),r.SHA256)},32696:(e,t,n)=>{var r=n.g.CustomEvent;e.exports=function(){try{var e=new r("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?r:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}},65291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(82456);function i(e,t){e.classList?e.classList.add(t):(0,r.Z)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},33127:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s});var r=n(37101),i=!1,o=!1;try{var a={get passive(){return i=!0},get once(){return o=i=!0}};r.Z&&(window.addEventListener("test",a,a),window.removeEventListener("test",a,!0))}catch(e){}const s=function(e,t,n,r){if(r&&"boolean"!=typeof r&&!o){var a=r.once,s=r.capture,l=n;!o&&a&&(l=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=l),e.addEventListener(t,l,i?r:s)}e.addEventListener(t,n,r)}},37101:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=!("undefined"==typeof window||!window.document||!window.document.createElement)},18786:(e,t,n)=>{"use strict";function r(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}n.d(t,{Z:()=>r})},8258:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(48968);function i(e,t){return function(e){var t=(0,r.Z)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var o=/([A-Z])/g;var a=/^ms-/;function s(e){return function(e){return e.replace(o,"-$1").toLowerCase()}(e).replace(a,"-ms-")}var l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const u=function(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(s(t))||i(e).getPropertyValue(s(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!l.test(e))}(i)?n+=s(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(s(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}},82456:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{Z:()=>r})},72487:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(33127),i=n(88555);const o=function(e,t,n,o){return(0,r.ZP)(e,t,n,o),function(){(0,i.Z)(e,t,n,o)}}},48968:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:()=>r})},58092:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=Function.prototype.bind.call(Function.prototype.call,[].slice);function i(e,t){return r(e.querySelectorAll(t))}},94693:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{Z:()=>i})},88555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n,r){var i=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}},30268:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8258),i=n(72487);function o(e,t,n){void 0===n&&(n=5);var r=!1,o=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=(0,i.Z)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(o),a()}}function a(e,t,n,a){var s,l,u;null==n&&(s=e,l=(0,r.Z)(s,"transitionDuration")||"",u=-1===l.indexOf("ms")?1e3:1,n=parseFloat(l)*u||0);var c=o(e,n,a),d=(0,i.Z)(e,"transitionend",t);return function(){c(),d()}}},34339:e=>{"use strict";var t={};function n(e){var n=t[e];return n?n.lastIndex=0:t[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}e.exports={add:function(e,t){var r=e.className;r.length?n(t).test(r)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(n(t)," ").trim()}}},32193:(e,t,n)=>{"use strict";var r=n(31262),i=n(97651),o=n(34339),a=document,s=a.documentElement;function l(e,t,r,o){n.g.navigator.pointerEnabled?i[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[r],o):n.g.navigator.msPointerEnabled?i[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[r],o):(i[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[r],o),i[t](e,r,o))}function u(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function c(e){var t=e.getBoundingClientRect();return{left:t.left+d("scrollLeft","pageXOffset"),top:t.top+d("scrollTop","pageYOffset")}}function d(e,t){return void 0!==n.g[t]?n.g[t]:s.clientHeight?s[e]:a.body[e]}function f(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=a.elementFromPoint(t,n),i.className=o,r}function p(){return!1}function h(){return!0}function m(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function y(e){return e.parentNode===a?null:e.parentNode}function v(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||b(e)}function b(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||b(y(e))))}function _(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function w(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}e.exports=function(e,t){var n,d,b,E,S,x,k,T,O,C,A,P=arguments.length;1===P&&!1===Array.isArray(e)&&(t=e,e=[]);var M,D=null,R=t||{};void 0===R.moves&&(R.moves=h),void 0===R.accepts&&(R.accepts=h),void 0===R.invalid&&(R.invalid=G),void 0===R.containers&&(R.containers=e||[]),void 0===R.isContainer&&(R.isContainer=p),void 0===R.copy&&(R.copy=!1),void 0===R.copySortSource&&(R.copySortSource=!1),void 0===R.revertOnSpill&&(R.revertOnSpill=!1),void 0===R.removeOnSpill&&(R.removeOnSpill=!1),void 0===R.direction&&(R.direction="vertical"),void 0===R.ignoreInputTextSelection&&(R.ignoreInputTextSelection=!0),void 0===R.mirrorContainer&&(R.mirrorContainer=a.body);var L=r({containers:R.containers,start:W,end:$,cancel:X,remove:Q,destroy:F,canMove:U,dragging:!1});return!0===R.removeOnSpill&&L.on("over",ie).on("out",oe),I(),L;function N(e){return-1!==L.containers.indexOf(e)||R.isContainer(e)}function I(e){var t=e?"remove":"add";l(s,t,"mousedown",H),l(s,t,"mouseup",Z)}function j(e){l(s,e?"remove":"add","mousemove",V)}function B(e){var t=e?"remove":"add";i[t](s,"selectstart",Y),i[t](s,"click",Y)}function F(){I(!0),Z({})}function Y(e){M&&e.preventDefault()}function H(e){if(x=e.clientX,k=e.clientY,!(1!==u(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=q(t);n&&(M=n,j(),"mousedown"===e.type&&(v(t)?t.focus():e.preventDefault()))}}function V(e){if(M)if(0!==u(e)){if(void 0===e.clientX||e.clientX!==x||void 0===e.clientY||e.clientY!==k){if(R.ignoreInputTextSelection){var t=w("clientX",e),n=w("clientY",e);if(v(a.elementFromPoint(t,n)))return}var r=M;j(!0),B(),$(),z(r);var i=c(b);E=w("pageX",e)-i.left,S=w("pageY",e)-i.top,o.add(C||b,"gu-transit"),ae(),re(e)}}else Z({})}function q(e){if(!(L.dragging&&n||N(e))){for(var t=e;y(e)&&!1===N(y(e));){if(R.invalid(e,t))return;if(!(e=y(e)))return}var r=y(e);if(r)if(!R.invalid(e,t))if(R.moves(e,r,t,_(e)))return{item:e,source:r}}}function U(e){return!!q(e)}function W(e){var t=q(e);t&&z(t)}function z(e){ce(e.item,e.source)&&(C=e.item.cloneNode(!0),L.emit("cloned",C,e.item,"copy")),d=e.source,b=e.item,T=O=_(e.item),L.dragging=!0,L.emit("drag",b,d)}function G(){return!1}function $(){if(L.dragging){var e=C||b;J(e,y(e))}}function K(){M=!1,j(!0),B(!0)}function Z(e){if(K(),L.dragging){var t=C||b,r=w("clientX",e),i=w("clientY",e),o=ne(f(n,r,i),r,i);o&&(C&&R.copySortSource||!C||o!==d)?J(t,o):R.removeOnSpill?Q():X()}}function J(e,t){var n=y(e);C&&R.copySortSource&&t===d&&n.removeChild(b),te(t)?L.emit("cancel",e,d,d):L.emit("drop",e,t,d,O),ee()}function Q(){if(L.dragging){var e=C||b,t=y(e);t&&t.removeChild(e),L.emit(C?"cancel":"remove",e,t,d),ee()}}function X(e){if(L.dragging){var t=arguments.length>0?e:R.revertOnSpill,n=C||b,r=y(n),i=te(r);!1===i&&t&&(C?r&&r.removeChild(C):d.insertBefore(n,T)),i||t?L.emit("cancel",n,d,d):L.emit("drop",n,r,d,O),ee()}}function ee(){var e=C||b;K(),se(),e&&o.rm(e,"gu-transit"),A&&clearTimeout(A),L.dragging=!1,D&&L.emit("out",e,D,d),L.emit("dragend",e),d=b=C=T=O=A=D=null}function te(e,t){var r;return r=void 0!==t?t:n?O:_(C||b),e===d&&r===T}function ne(e,t,n){for(var r=e;r&&!i();)r=y(r);return r;function i(){if(!1===N(r))return!1;var i=le(r,e),o=ue(r,i,t,n);return!!te(r,o)||R.accepts(b,r,d,o)}}function re(e){if(n){e.preventDefault();var t=w("clientX",e),r=w("clientY",e),i=t-E,o=r-S;n.style.left=i+"px",n.style.top=o+"px";var a=C||b,s=f(n,t,r),l=ne(s,t,r),u=null!==l&&l!==D;(u||null===l)&&(D&&m("out"),D=l,u&&m("over"));var c=y(a);if(l!==d||!C||R.copySortSource){var p,h=le(l,s);if(null!==h)p=ue(l,h,t,r);else{if(!0!==R.revertOnSpill||C)return void(C&&c&&c.removeChild(a));p=T,l=d}(null===p&&u||p!==a&&p!==_(a))&&(O=p,l.insertBefore(a,p),L.emit("shadow",a,l,d))}else c&&c.removeChild(a)}function m(e){L.emit(e,a,D,d)}}function ie(e){o.rm(e,"gu-hide")}function oe(e){L.dragging&&o.add(e,"gu-hide")}function ae(){if(!n){var e=b.getBoundingClientRect();(n=b.cloneNode(!0)).style.width=m(e)+"px",n.style.height=g(e)+"px",o.rm(n,"gu-transit"),o.add(n,"gu-mirror"),R.mirrorContainer.appendChild(n),l(s,"add","mousemove",re),o.add(R.mirrorContainer,"gu-unselectable"),L.emit("cloned",n,b,"mirror")}}function se(){n&&(o.rm(R.mirrorContainer,"gu-unselectable"),l(s,"remove","mousemove",re),y(n).removeChild(n),n=null)}function le(e,t){for(var n=t;n!==e&&y(n)!==e;)n=y(n);return n===s?null:n}function ue(e,t,n,r){var i="horizontal"===R.direction;return t!==e?function(){var e=t.getBoundingClientRect();if(i)return o(n>e.left+m(e)/2);return o(r>e.top+g(e)/2)}():function(){var t,o,a,s=e.children.length;for(t=0;t<s;t++){if(o=e.children[t],a=o.getBoundingClientRect(),i&&a.left+a.width/2>n)return o;if(!i&&a.top+a.height/2>r)return o}return null}();function o(e){return e?_(t):t}}function ce(e,t){return"boolean"==typeof R.copy?R.copy:R.copy(e,t)}}},66894:e=>{"use strict";var t={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\\\newline{}","\n":"\\\\newline{}"},r=function(e,t){return Object.assign({},e,t)};e.exports=function(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.preserveFormatting,a=void 0!==o&&o,s=i.escapeMapFn,l=void 0===s?r:s,u=String(e),c="",d=l(Object.assign({},t),a?Object.assign({},n):{}),f=Object.keys(d),p=function(){var e=!1;f.forEach((function(t,n){e||u.startsWith(t)&&(c+=d[f[n]],u=u.slice(t.length,u.length),e=!0)})),e||(c+=u.slice(0,1),u=u.slice(1,u.length))};u;)p();return c}},71335:(e,t,n)=>{var r=n(11524);e.exports=(r.default||r).template({1:function(e,t,n,r,i){return"lrn-autocomplete-selected "},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var o,a,s=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="'+(null!=(o=c(n,"if").call(s,null!=t?c(t,"isSelected"):t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:1,column:11},end:{line:1,column:62}}}))?o:"")+'lrn-text-word-wrap" tabindex="-1" data-authorapi-selector="suggested-tag">\n    '+(null!=(o=typeof(a=null!=(a=c(n,"typeHighlighted")||(null!=t?c(t,"typeHighlighted"):t))?a:l)===u?a.call(s,{name:"typeHighlighted",hash:{},data:i,loc:{start:{line:2,column:4},end:{line:2,column:25}}}):a)?o:"")+" "+(null!=(o=typeof(a=null!=(a=c(n,"nameHighlighted")||(null!=t?c(t,"nameHighlighted"):t))?a:l)===u?a.call(s,{name:"nameHighlighted",hash:{},data:i,loc:{start:{line:2,column:26},end:{line:2,column:47}}}):a)?o:"")+"\n</li>\n"},useData:!0})},74208:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o=i(n(27060)),a=r(n(25442)),s=r(n(34936)),l=i(n(53303)),u=i(n(89657)),c=r(n(73779));function d(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=a.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,t.default=f,e.exports=t.default},27060:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=d;var i=n(53303),o=r(n(34936)),a=n(9228),s=n(42024),l=r(n(75324)),u=n(45434);t.VERSION="4.7.7";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function d(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},a.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===c)i.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var f=l.default.log;t.log=f,t.createFrame=i.createFrame,t.logger=l.default},42024:(e,t,n)=>{"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var r,i=n(882),o=(r=i)&&r.__esModule?r:{default:r}},882:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(53303);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(i,o);return n.partials=a,s}),t.partials[i.args[0]]=i.fn,o}))},e.exports=t.default},34936:(e,t)=>{"use strict";t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var i=t&&t.loc,o=void 0,a=void 0,s=void 0,l=void 0;i&&(o=i.start.line,a=i.end.line,s=i.start.column,l=i.end.column,e+=" - "+o+":"+s);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{i&&(this.lineNumber=o,this.endLineNumber=a,Object.defineProperty?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=s,this.endColumn=l))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},9228:(e,t,n)=>{"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){i.default(e),o.default(e),a.default(e),s.default(e),l.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var i=r(n(62984)),o=r(n(60031)),a=r(n(30081)),s=r(n(30691)),l=r(n(74668)),u=r(n(27245)),c=r(n(77420))},62984:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(53303);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var i=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)}))},e.exports=t.default},60031:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(53303),o=n(34936),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var r,o=t.fn,s=t.inverse,l=0,u="",c=void 0,d=void 0;function f(t,n,r){c&&(c.key=t,c.index=n,c.first=0===n,c.last=!!r,d&&(c.contextPath=d+t)),u+=o(e[t],{data:c,blockParams:i.blockParams([e[t],t],[d+t,null])})}if(t.data&&t.ids&&(d=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(c=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var p=e.length;l<p;l++)l in e&&f(l,l,l===e.length-1);else if(n.g.Symbol&&e[n.g.Symbol.iterator]){for(var h=[],m=e[n.g.Symbol.iterator](),g=m.next();!g.done;g=m.next())h.push(g.value);for(p=(e=h).length;l<p;l++)f(l,l,l===e.length-1)}else r=void 0,Object.keys(e).forEach((function(e){void 0!==r&&f(r,l-1),r=e,l++})),void 0!==r&&f(r,l-1,!0);return 0===l&&(u=s(this)),u}))},e.exports=t.default},30081:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(34936),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},30691:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(53303),o=n(34936),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},74668:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},27245:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},77420:(e,t,n)=>{"use strict";t.__esModule=!0;var r,i=n(53303),o=n(34936),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var n=t.fn;if(i.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:i.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},6547:(e,t,n)=>{"use strict";t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n(53303)},45434:(e,t,n)=>{"use strict";t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:r.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:r.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return a("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(o).forEach((function(e){delete o[e]}))};var r=n(6547),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(75324)),o=Object.create(null);function a(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==o[e]&&(o[e]=!0,i.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},21208:(e,t)=>{"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},75324:(e,t,n)=>{"use strict";t.__esModule=!0;var r=n(53303),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};t.default=i,e.exports=t.default},73779:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n.g?n.g:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default},89657:(e,t,n)=>{"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t>=s.LAST_COMPATIBLE_COMPILER_REVISION&&t<=s.COMPILER_REVISION)return;if(t<s.LAST_COMPATIBLE_COMPILER_REVISION){var r=s.REVISION_CHANGES[n],i=s.REVISION_CHANGES[t];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new a.default("No environment passed to template");if(!e||!e.main)throw new a.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new a.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||c.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&r.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:i.escapeExpression,invokePartial:function(n,r,o){o.hash&&(r=i.extend({},r,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,o);var s=i.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),l=t.VM.invokePartial.call(this,n,r,s);if(null==l&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),l=o.partials[o.name](r,s)),null!=l){if(o.indent){for(var u=l.split("\n"),c=0,d=u.length;c<d&&(u[c]||c+1!==d);c++)u[c]=o.indent+u[c];l=u.join("\n")}return l}throw new a.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var o=this.programs[e],a=this.fn(e);return t||i||r||n?o=d(this,e,a,t,n,r,i):o||(o=this.programs[e]=d(this,e,a)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=i.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function o(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=n.data;o._setup(n),!n.partial&&e.useData&&(i=p(t,i));var a=void 0,s=e.useBlockParams?[]:void 0;function l(t){return""+e.main(r,t,r.helpers,r.partials,i,s,a)}return e.useDepths&&(a=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(l=h(e.main,l,r,n.depths||[],i,s))(t,n)}return o.isTop=!0,o._setup=function(o){if(o.partial)r.protoAccessControl=o.protoAccessControl,r.helpers=o.helpers,r.partials=o.partials,r.decorators=o.decorators,r.hooks=o.hooks;else{var a=i.extend({},t.helpers,o.helpers);!function(e,t){Object.keys(e).forEach((function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return u.wrapHelper(e,(function(e){return i.extend({lookupProperty:n},e)}))}(r,t)}))}(a,r),r.helpers=a,e.usePartial&&(r.partials=r.mergeIfNeeded(o.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=i.extend({},t.decorators,o.decorators)),r.hooks={},r.protoAccessControl=c.createProtoAccessControl(o);var s=o.allowCallsToHelperMissing||n;l.moveHelperToHooks(r,"helperMissing",s),l.moveHelperToHooks(r,"blockHelperMissing",s)}},o._child=function(t,n,i,o){if(e.useBlockParams&&!i)throw new a.default("must pass block params");if(e.useDepths&&!o)throw new a.default("must pass parent depths");return d(r,t,e[t],n,0,i,o)},o},t.wrapProgram=d,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;n.fn&&n.fn!==f&&function(){n.data=s.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=i.extend({},n.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new a.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=f;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(53303)),o=n(34936),a=(r=o)&&r.__esModule?r:{default:r},s=n(27060),l=n(9228),u=n(21208),c=n(45434);function d(e,t,n,r,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),n(e,t,e.helpers,e.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return(s=h(n,s,e,a,r,o)).program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function f(){return""}function p(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function h(e,t,n,r,o,a){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],o,a,r),i.extend(t,s)}return t}},25442:(e,t)=>{"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},53303:(e,t)=>{"use strict";t.__esModule=!0,t.extend=a,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!i.test(e))return e;return e.replace(r,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=a({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,i=/[&<>"'`=]/;function o(e){return n[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;t.toString=s;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),t.isFunction=l;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};t.isArray=u},11524:(e,t,n)=>{e.exports=n(74208).default},73463:(e,t,n)=>{"use strict";var r=n(48570),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=c(n);d&&(a=a.concat(d(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||r&&r[y]||m&&m[y]||s&&s[y])){var v=f(n,y);try{u(t,y,v)}catch(e){}}}}return t}},47677:e=>{"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},98400:e=>{e.exports=function e(t,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=c(t).replace(a,"")||"",f=c(n).replace(a,"")||"",p=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(d.match(l),16)||1!==p.length&&d.match(s)&&Date.parse(d),g=parseInt(f.match(l),16)||m&&f.match(s)&&Date.parse(f)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var y=0,v=Math.max(p.length,h.length);y<v;y++){if(r=!(p[y]||"").match(u)&&parseFloat(p[y])||p[y]||0,i=!(h[y]||"").match(u)&&parseFloat(h[y])||h[y]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},38291:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,c=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h=p.toString,m=h.call(Object),g={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},b=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in _)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function E(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[f.call(e)]||"object":typeof e}var S="3.6.0",x=function(e,t){return new x.fn.init(e,t)};function k(e){var t=!!e&&"length"in e&&e.length,n=E(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:S,constructor:x,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},x.extend=x.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(u&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||x.isPlainObject(n)?n:{},i=!1,a[t]=x.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},x.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=a(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&h.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(k(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?x.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(k(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l(a)},guid:1,support:g}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=o[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var T=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,y,v,b,_="sizzle"+1*new Date,w=e.document,E=0,S=0,x=le(),k=le(),T=le(),O=le(),C=function(e,t){return e===t&&(d=!0),0},A={}.hasOwnProperty,P=[],M=P.pop,D=P.push,R=P.push,L=P.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\[[\\x20\\t\\r\\n\\f]*("+B+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+j+"*\\]",Y=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",H=new RegExp(j+"+","g"),V=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(j+"|>"),z=new RegExp(Y),G=new RegExp("^"+B+"$"),$={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+Y),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},ae=_e((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{R.apply(P=L.call(w.childNodes),w.childNodes),P[w.childNodes.length].nodeType}catch(e){R={apply:P.length?function(e,t){D.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,u,c,d,h,y,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(t),t=t||p,m)){if(11!==w&&(d=X.exec(e)))if(o=d[1]){if(9===w){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(v&&(u=v.getElementById(o))&&b(t,u)&&u.id===o)return r.push(u),r}else{if(d[2])return R.apply(r,t.getElementsByTagName(e)),r;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return R.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!O[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===w&&(W.test(e)||U.test(e))){for((v=ee.test(e)&&ye(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=_)),s=(h=a(e)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+be(h[s]);y=h.join(",")}try{return R.apply(r,v.querySelectorAll(y)),r}catch(t){O(e,!0)}finally{c===_&&t.removeAttribute("id")}}}return l(e.replace(V,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ue(e){return e[_]=!0,e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue((function(t){return t=+t,ue((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!K.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,m=!o(p),w!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ce((function(e){return h.appendChild(e).appendChild(p.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ce((function(e){return h.appendChild(e).id=_,!p.getElementsByName||!p.getElementsByName(_).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(n.qsa=Q.test(p.querySelectorAll))&&(ce((function(e){var t;h.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+I+")"),e.querySelectorAll("[id~="+_+"-]").length||g.push("~="),(t=p.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=Q.test(v=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",Y)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=Q.test(h.compareDocumentPosition),b=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==p||e.ownerDocument==w&&b(w,e)?-1:t==p||t.ownerDocument==w&&b(w,t)?1:c?N(c,e)-N(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==p?-1:t==p?1:i?-1:o?1:c?N(c,e)-N(c,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?fe(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&m&&!O[t+" "]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){O(t,!0)}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=p&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=p&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(C),d){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ue,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=x[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+j+"|$)"))&&x(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(b=(p=(u=(c=(d=(f=g)[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===E&&u[1])&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[E,p,b];break}}else if(v&&(b=p=(u=(c=(d=(f=t)[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===E&&u[1]),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++b||(v&&((c=(d=f[_]||(f[_]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[E,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[_]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=N(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ue((function(e){var t=[],n=[],r=s(e.replace(V,"$1"));return r[_]?ue((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ve(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function _e(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=S++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,d,f=[E,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(d=t[_]||(t[_]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===E&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Ee(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function Se(e,t,n,r,i,o){return r&&!r[_]&&(r=Se(r)),i&&!i[_]&&(i=Se(i,o)),ue((function(o,a,s,l){var u,c,d,f=[],p=[],h=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:Ee(m,f,e,s,l),y=n?i||(o?e:h||r)?[]:a:g;if(n&&n(g,y,s,l),r)for(u=Ee(y,p),r(u,[],s,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(g[p[c]]=d));if(o){if(i||e){if(i){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(g[c]=d);i(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=i?N(o,d):f[c])>-1&&(o[u]=!(a[u]=d))}}else y=Ee(y===a?y.splice(h,y.length):y),i?i(null,a,y,l):R.apply(a,y)}))}function xe(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,c=_e((function(e){return e===t}),s,!0),d=_e((function(e){return N(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):d(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[_e(we(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[_]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return Se(l>1&&we(f),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(V,"$1"),n,l<i&&xe(e.slice(l,i)),i<o&&xe(e=e.slice(i)),i<o&&be(e))}f.push(n)}return we(f)}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,a=se.tokenize=function(e,t){var n,i,o,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(a in n&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=U.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(i=$[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):k(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=xe(t[n]))[_]?i.push(s):o.push(s);(s=T(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,c){var d,h,g,y=0,v="0",b=o&&[],_=[],w=u,S=o||i&&r.find.TAG("*",c),x=E+=null==w?1:Math.random()||.1,k=S.length;for(c&&(u=a==p||a||c);v!==k&&null!=(d=S[v]);v++){if(i&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!m);g=e[h++];)if(g(d,a||p,s)){l.push(d);break}c&&(E=x)}n&&((d=!g&&d)&&y--,o&&b.push(d))}if(y+=v,n&&v!==y){for(h=0;g=t[h++];)g(b,_,a,s);if(o){if(y>0)for(;v--;)b[v]||_[v]||(_[v]=M.call(l));_=Ee(_)}R.apply(l,_),c&&!o&&_.length>0&&y+t.length>1&&se.uniqueSort(l)}return c&&(E=x,u=w),b};return n?ue(o):o}(o,i))).selector=e}return s},l=se.select=function(e,t,n,i){var o,l,u,c,d,f="function"==typeof e&&e,p=!i&&a(e=f.selector||e);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=$.needsContext.test(e)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((d=r.find[c])&&(i=d(u.matches[0].replace(te,ne),ee.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return R.apply(n,i),n;break}}return(f||s(e,p))(i,t,!m,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=_.split("").sort(C).join("")===_,n.detectDuplicates=!!d,f(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||de(I,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(r);x.find=T,x.expr=T.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=T.uniqueSort,x.text=T.getText,x.isXMLDoc=T.isXML,x.contains=T.contains,x.escapeSelector=T.escape;var O=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=x.expr.match.needsContext;function P(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return y(t)?x.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?x.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?x.grep(e,(function(e){return c.call(t,e)>-1!==n})):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,(function(e){return 1===e.nodeType})))},x.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(x(e).filter((function(){for(t=0;t<r;t++)if(x.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,i[t],n);return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&A.test(e)?x(e):e||[],!1).length}});var R,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||R,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),M.test(r[1])&&x.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,R=x(b);var N=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&x(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?c.call(x(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(P(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},(function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(I[e]||x.uniqueSort(i),N.test(e)&&i.reverse()),this.pushStack(i)}}));var B=/[^\x20\t\r\n\f]+/g;function F(e){return e}function Y(e){throw e}function H(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(B)||[],(function(e,n){t[n]=!0})),t}(e):x.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){x.each(n,(function(n,r){y(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==E(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return x.each(arguments,(function(e,t){for(var n;(n=x.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?x.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},x.extend({Deferred:function(e){var t=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return x.Deferred((function(n){x.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function a(e,t,n,i){return function(){var s=this,l=arguments,u=function(){var r,u;if(!(e<o)){if((r=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");u=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(u)?i?u.call(r,a(o,t,F,i),a(o,t,Y,i)):(o++,u.call(r,a(o,t,F,i),a(o,t,Y,i),a(o,t,F,t.notifyWith))):(n!==F&&(s=void 0,l=[r]),(i||t.resolveWith)(s,l))}},c=i?u:function(){try{u()}catch(r){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(r,c.stackTrace),e+1>=o&&(n!==Y&&(s=void 0,l=[r]),t.rejectWith(s,l))}};e?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),r.setTimeout(c))}}return x.Deferred((function(r){t[0][3].add(a(0,r,y(i)?i:F,r.notifyWith)),t[1][3].add(a(0,r,y(e)?e:F)),t[2][3].add(a(0,r,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?x.extend(e,i):i}},o={};return x.each(t,(function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=x.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(H(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&V.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},x.readyException=function(e){r.setTimeout((function(){throw e}))};var q=x.Deferred();function U(){b.removeEventListener("DOMContentLoaded",U),r.removeEventListener("load",U),x.ready()}x.fn.ready=function(e){return q.then(e).catch((function(e){x.readyException(e)})),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||q.resolveWith(b,[x]))}}),x.ready.then=q.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(x.ready):(b.addEventListener("DOMContentLoaded",U),r.addEventListener("load",U));var W=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===E(n))for(s in i=!0,n)W(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(x(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},z=/^-ms-/,G=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function K(e){return e.replace(z,"ms-").replace(G,$)}var Z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=x.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(B)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var Q=new J,X=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}X.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return X.hasData(e)||Q.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=X.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){X.set(this,e)})):W(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=X.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each((function(){X.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),x.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),o=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){x.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:x.Callbacks("once memory").add((function(){Q.remove(e,[t+"queue",n])}))})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each((function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){x.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=b.documentElement,se=function(e){return x.contains(e.ownerDocument,e)},le={composed:!0};ae.getRootNode&&(se=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===x.css(e,"display")};function ce(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},l=s(),u=n&&n[3]||(x.cssNumber[t]?"":"px"),c=e.nodeType&&(x.cssNumber[t]||"px"!==u&&+l)&&ie.exec(x.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)x.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;c*=2,x.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}var de={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=de[r];return i||(t=n.body.appendChild(n.createElement(r)),i=x.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),de[r]=i,i)}function pe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ue(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}x.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ue(this)?x(this).show():x(this).hide()}))}});var he,me,ge=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;he=b.createDocumentFragment().appendChild(b.createElement("div")),(me=b.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),he.appendChild(me),g.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",g.option=!!he.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _e(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&P(e,t)?x.merge([e],n):n}function we(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,g.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var Ee=/<|&#?\w+;/;function Se(e,t,n,r,i){for(var o,a,s,l,u,c,d=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===E(o))x.merge(f,o.nodeType?[o]:o);else if(Ee.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(ye.exec(o)||["",""])[1].toLowerCase(),l=be[s]||be._default,a.innerHTML=l[1]+x.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;x.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o);else if(u=se(o),a=_e(d.appendChild(o),"script"),u&&we(a),n)for(c=0;o=a[c++];)ve.test(o.type||"")&&n.push(o);return d}var xe=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Te(){return!1}function Oe(e,t){return e===function(){try{return b.activeElement}catch(e){}}()==("focus"===t)}function Ce(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ce(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each((function(){x.event.add(this,t,i,r,n)}))}function Ae(e,t,n){n?(Q.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=Q.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),Q.set(this,t,o),r=n(this,t),this[t](),o!==(i=Q.get(this,t))||r?Q.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(Q.set(this,t,{value:x.event.trigger(x.extend(o[0],x.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,t)&&x.event.add(e,t,ke)}x.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=Q.get(e);if(Z(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(ae,i),n.guid||(n.guid=x.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)p=m=(s=xe.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=x.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=x.event.special[p]||{},c=x.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),x.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=Q.hasData(e)&&Q.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(p=m=(s=xe.exec(t[u])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=x.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||x.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)x.event.remove(e,p+t[u],n,r,!0);x.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),l=x.event.fix(e),u=(Q.get(this,"events")||Object.create(null))[l.type]||[],c=x.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=x.event.handlers.call(this,l,u),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(u)>-1:x.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&P(t,"input")&&Ae(t,"click",ke),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&P(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&P(t,"input")&&Q.get(t,"click")||P(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(e,t){x.event.special[e]={setup:function(){return Ae(this,e,Oe),!1},trigger:function(){return Ae(this,e),!0},_default:function(){return!0},delegateType:t}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||x.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),x.fn.extend({on:function(e,t,n,r){return Ce(this,e,t,n,r)},one:function(e,t,n,r){return Ce(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each((function(){x.event.remove(this,e,n,t)}))}});var Pe=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Re(e,t){return P(e,"table")&&P(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ie(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.get(e).events))for(i in Q.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)x.event.add(t,i,s[i][n]);X.hasData(e)&&(o=X.access(e),a=x.extend({},o),X.set(t,a))}}function je(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Be(e,t,n,r){t=l(t);var i,o,a,s,u,c,d=0,f=e.length,p=f-1,h=t[0],m=y(h);if(m||f>1&&"string"==typeof h&&!g.checkClone&&Me.test(h))return e.each((function(i){var o=e.eq(i);m&&(t[0]=h.call(this,i,o.html())),Be(o,t,n,r)}));if(f&&(o=(i=Se(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=x.map(_e(i,"script"),Le)).length;d<f;d++)u=i,d!==p&&(u=x.clone(u,!0,!0),s&&x.merge(a,_e(u,"script"))),n.call(e[d],u,d);if(s)for(c=a[a.length-1].ownerDocument,x.map(a,Ne),d=0;d<s;d++)u=a[d],ve.test(u.type||"")&&!Q.access(u,"globalEval")&&x.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?x._evalUrl&&!u.noModule&&x._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):w(u.textContent.replace(De,""),u,c))}return e}function Fe(e,t,n){for(var r,i=t?x.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(_e(r)),r.parentNode&&(n&&se(r)&&we(_e(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=se(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=_e(s),r=0,i=(o=_e(e)).length;r<i;r++)je(o[r],a[r]);if(t)if(n)for(o=o||_e(e),a=a||_e(s),r=0,i=o.length;r<i;r++)Ie(o[r],a[r]);else Ie(e,s);return(a=_e(s,"script")).length>0&&we(a,!l&&_e(e,"script")),s},cleanData:function(e){for(var t,n,r,i=x.event.special,o=0;void 0!==(n=e[o]);o++)if(Z(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return W(this,(function(e){return void 0===e?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Be(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Be(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Be(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(_e(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return x.clone(this,e,t)}))},html:function(e){return W(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!be[(ye.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(_e(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,(function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(_e(this)),n&&n.replaceChild(t,this))}),e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[t](n),u.apply(r,n.get());return this.pushStack(r)}}));var Ye=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ve=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},qe=new RegExp(oe.join("|"),"i");function Ue(e,t,n){var r,i,o,a,s=e.style;return(n=n||He(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||se(e)||(a=x.style(e,t)),!g.pixelBoxStyles()&&Ye.test(a)&&qe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),ae.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,a,s,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ae.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ae.removeChild(e)),s}}))}();var ze=["Webkit","Moz","ms"],Ge=b.createElement("div").style,$e={};function Ke(e){var t=x.cssProps[e]||$e[e];return t||(e in Ge?e:$e[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=ze.length;n--;)if((e=ze[n]+t)in Ge)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function tt(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(e,n+oe[a],!0,i)),r?("content"===n&&(l-=x.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(l-=x.css(e,"border"+oe[a]+"Width",!0,i))):(l+=x.css(e,"padding"+oe[a],!0,i),"padding"!==n?l+=x.css(e,"border"+oe[a]+"Width",!0,i):s+=x.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function nt(e,t,n){var r=He(e),i=(!g.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,r),o=i,a=Ue(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&P(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===x.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+tt(e,t,n||(i?"border":"content"),o,r,a)+"px"}function rt(e,t,n,r,i){return new rt.prototype.init(e,t,n,r,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K(t),l=Je.test(t),u=e.style;if(l||(t=Ke(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ce(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=K(t);return Je.test(t)||(t=Ke(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ue(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],(function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!Ze.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):Ve(e,Qe,(function(){return nt(e,t,r)}))},set:function(e,n,r){var i,o=He(e),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===x.css(e,"boxSizing",!1,o),l=r?tt(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),l&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),et(0,n,l)}}})),x.cssHooks.marginLeft=We(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(x.cssHooks[e+t].set=et)})),x.fn.extend({css:function(e,t){return W(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=He(e),i=t.length;a<i;a++)o[t[a]]=x.css(e,t[a],!1,r);return o}return void 0!==n?x.style(e,t,n):x.css(e,t)}),e,t,arguments.length>1)}}),x.Tween=rt,rt.prototype={constructor:rt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=rt.prototype.init,x.fx.step={};var it,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function lt(){ot&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(lt):r.setTimeout(lt,x.fx.interval),x.fx.tick())}function ut(){return r.setTimeout((function(){it=void 0})),it=Date.now()}function ct(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function dt(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,a=ft.prefilters.length,s=x.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=it||ut(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),r<1&&a?n:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=K(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,u.opts.specialEasing);o<a;o++)if(r=ft.prefilters[o].call(u,e,c,u.opts))return y(r.stop)&&(x._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)),r;return x.map(c,dt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}x.Animation=x.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(B);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,u,c,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&ue(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],at.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}p[r]=g&&g[r]||x.style(e,r)}if((l=!x.isEmptyObject(t))||!x.isEmptyObject(p))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(u=g&&g.display)&&(u=Q.get(e,"display")),"none"===(c=x.css(e,"display"))&&(u?c=u:(pe([e],!0),u=e.style.display||u,c=x.css(e,"display"),pe([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===x.css(e,"float")&&(l||(f.done((function(){h.display=u})),null==u&&(c=h.display,u="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:u}),o&&(g.hidden=!m),m&&pe([e],!0),f.done((function(){for(r in m||pe([e]),Q.remove(e,"fxshow"),p)x.style(e,r,p[r])}))),l=dt(m?g[r]:0,r,f),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in x.fx.speeds?r.duration=x.fx.speeds[r.duration]:r.duration=x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=ft(this,x.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&st.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||x.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,i)}})),x.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),it=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ot||(ot=!0,lt())},x.fx.stop=function(){ot=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,t){return e=x.fx&&x.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var pt,ht=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return W(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){x.removeAttr(this,e)}))}}),x.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&P(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(B);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ht[t]||x.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function yt(e){return(e.match(B)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}x.fn.extend({prop:function(e,t){return W(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[x.propFix[e]||e]}))}}),x.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(e)||(t=x.propFix[t]||t,i=x.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(y(e))return this.each((function(t){x(this).addClass(e.call(this,t,vt(this)))}));if((t=bt(e)).length)for(;n=this[l++];)if(i=vt(n),r=1===n.nodeType&&" "+yt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=yt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(y(e))return this.each((function(t){x(this).removeClass(e.call(this,t,vt(this)))}));if(!arguments.length)return this.attr("class","");if((t=bt(e)).length)for(;n=this[l++];)if(i=vt(n),r=1===n.nodeType&&" "+yt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=yt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){x(this).toggleClass(e.call(this,n,vt(this),t),t)})):this.each((function(){var t,i,o,a;if(r)for(i=0,o=x(this),a=bt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=vt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+yt(vt(n))+" ").indexOf(t)>-1)return!0;return!1}});var _t=/\r/g;x.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,x(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,(function(e){return null==e?"":e+""}))),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(_t,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:yt(x.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},g.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(e,t,n,i){var o,a,s,l,u,c,d,f,h=[n||b],m=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!wt.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:x.makeArray(t,[e]),d=x.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(n,t))){if(!i&&!d.noBubble&&!v(n)){for(l=d.delegateType||m,wt.test(l+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||b)&&h.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)f=a,e.type=o>1?l:d.bindType||m,(c=(Q.get(a,"events")||Object.create(null))[e.type]&&Q.get(a,"handle"))&&c.apply(a,t),(c=u&&a[u])&&c.apply&&Z(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),t)||!Z(n)||u&&y(n[m])&&!v(n)&&((s=n[u])&&(n[u]=null),x.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,Et),n[m](),e.isPropagationStopped()&&f.removeEventListener(m,Et),x.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each((function(){x.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),g.focusin||x.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}}));var St=r.location,xt={guid:Date.now()},kt=/\?/;x.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||x.error("Invalid XML: "+(n?x.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Tt=/\[\]$/,Ot=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,r){var i;if(Array.isArray(t))x.each(t,(function(t,i){n||Tt.test(e)?r(e,i):Pt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==E(t))r(e,t);else for(i in t)Pt(e+"["+i+"]",t[i],n,r)}x.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,(function(){i(this.name,this.value)}));else for(n in e)Pt(n,e[n],t,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&At.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Mt=/%20/g,Dt=/#.*$/,Rt=/([?&])_=[^&]*/,Lt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,It=/^\/\//,jt={},Bt={},Ft="*/".concat("*"),Yt=b.createElement("a");function Ht(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(B)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Vt(e,t,n,r){var i={},o=e===Bt;function a(s){var l;return i[s]=!0,x.each(e[s]||[],(function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function qt(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}Yt.href=St.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,x.ajaxSettings),t):qt(x.ajaxSettings,e)},ajaxPrefilter:Ht(jt),ajaxTransport:Ht(Bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,a,s,l,u,c,d,f,p=x.ajaxSetup({},t),h=p.context||p,m=p.context&&(h.nodeType||h.jquery)?x(h):x.event,g=x.Deferred(),y=x.Callbacks("once memory"),v=p.statusCode||{},_={},w={},E="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Lt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==u&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||E;return n&&n.abort(t),k(0,t),this}};if(g.promise(S),p.url=((e||p.url||St.href)+"").replace(It,St.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(B)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Yt.protocol+"//"+Yt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Vt(jt,p,t,S),u)return S;for(d in(c=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),i=p.url.replace(Dt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Mt,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(kt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Rt,"$1"),f=(kt.test(i)?"&":"?")+"_="+xt.guid+++f),p.url=i+f),p.ifModified&&(x.lastModified[i]&&S.setRequestHeader("If-Modified-Since",x.lastModified[i]),x.etag[i]&&S.setRequestHeader("If-None-Match",x.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,S,p)||u))return S.abort();if(E="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),n=Vt(Bt,p,t,S)){if(S.readyState=1,c&&m.trigger("ajaxSend",[S,p]),u)return S;p.async&&p.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),p.timeout));try{u=!1,n.send(_,k)}catch(e){if(u)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,a,l){var d,f,b,_,w,E=t;u||(u=!0,s&&r.clearTimeout(s),n=void 0,o=l||"",S.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(_=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,S,a)),!d&&x.inArray("script",p.dataTypes)>-1&&x.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),_=function(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,_,S,d),d?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(x.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(x.etag[i]=w)),204===e||"HEAD"===p.type?E="nocontent":304===e?E="notmodified":(E=_.state,f=_.data,d=!(b=_.error))):(b=E,!e&&E||(E="error",e<0&&(e=0))),S.status=e,S.statusText=(t||E)+"",d?g.resolveWith(h,[f,E,S]):g.rejectWith(h,[S,E,b]),S.statusCode(v),v=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,p,d?f:b]),y.fireWith(h,[S,E]),c&&(m.trigger("ajaxComplete",[S,p]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],(function(e,t){x[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:i,data:n,success:r},x.isPlainObject(e)&&e))}})),x.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){x(this).wrapInner(e.call(this,t))})):this.each((function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){x(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Wt=x.ajaxSettings.xhr();g.cors=!!Wt&&"withCredentials"in Wt,g.ajax=Wt=!!Wt,x.ajaxTransport((function(e){var t,n;if(g.cors||Wt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ut[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),x.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),x.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var zt,Gt=[],$t=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||x.expando+"_"+xt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,a,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+i):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?x(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),a&&y(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=((zt=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(i=M.exec(e))?[t.createElement(i[1])]:(i=Se([e],t,o),o&&o.length&&x(o).remove(),x.merge([],i.childNodes)));var r,i,o},x.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=yt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,(function(t){return e===t.elem})).length},x.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=x.css(e,"position"),c=x(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=x.css(e,"top"),l=x.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),y(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){x.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),i.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-x.css(r,"marginTop",!0),left:t.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||ae}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return W(this,(function(e,r,i){var o;if(v(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),x.each(["top","left"],(function(e,t){x.cssHooks[t]=We(g.pixelPosition,(function(e,n){if(n)return n=Ue(e,t),Ye.test(n)?x(e).position()[t]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return W(this,(function(t,n,i){var o;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?x.css(t,n,s):x.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){x.fn[t]=function(e){return this.on(t,e)}})),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=P,x.isFunction=y,x.isWindow=v,x.camelCase=K,x.type=E,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},void 0===(n=function(){return x}.apply(t,[]))||(e.exports=n);var Zt=r.jQuery,Jt=r.$;return x.noConflict=function(e){return r.$===x&&(r.$=Jt),e&&r.jQuery===x&&(r.jQuery=Zt),x},void 0===i&&(r.jQuery=r.$=x),x}))},66081:(e,t,n)=>{"use strict";var r,i;r=[n(97395),n(49820),n(9187)],void 0===(i=function(e,t,n){return function(e,t,n){var r=function(t,n){return e.js_beautify(t,n)};return r.js=e.js_beautify,r.css=t.css_beautify,r.html=n.html_beautify,r.js_beautify=e.js_beautify,r.css_beautify=t.css_beautify,r.html_beautify=n.html_beautify,r}(e,t,n)}.apply(t,r))||(e.exports=i)},49820:(e,t)=>{var n,r;r=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([,,function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t},i.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t]},i.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=o},,,,function(e,t,n){"use strict";function r(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var n,r={};for(n in e=o(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function o(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},,function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},i.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,n){var r,i="";return e&&(r=this.match(e))&&(i+=r[0]),!t||!r&&e||(i+=this.readUntil(t,n)),i},i.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(r=i.index,t&&(r+=i[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&r&&(i="y"),"string"==typeof e&&""!==e?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},,,,,function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},,function(e,t,n){"use strict";var r=n(16).Beautifier,i=n(17).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var r=n(17).Options,i=n(2).Output,o=n(8).InputScanner,a=new(0,n(13).Directives)(/\/\*/,/\*\//),s=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=/\s/,c=/(?:\s|\n)+/g,d=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,f=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function p(e,t){this._source_text=e||"",this._options=new r(t),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}p.prototype.eatString=function(e){var t="";for(this._ch=this._input.next();this._ch;){if(t+=this._ch,"\\"===this._ch)t+=this._input.next();else if(-1!==e.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return t},p.prototype.eatWhitespace=function(e){for(var t=u.test(this._input.peek()),n=!0;u.test(this._input.peek());)this._ch=this._input.next(),e&&"\n"===this._ch&&(this._options.preserve_newlines||n)&&(n=!1,this._output.add_new_line(!0));return t},p.prototype.foundNestedPseudoClass=function(){for(var e=0,t=1,n=this._input.peek(t);n;){if("{"===n)return!0;if("("===n)e+=1;else if(")"===n){if(0===e)return!1;e-=1}else if(";"===n||"}"===n)return!1;t++,n=this._input.peek(t)}return!1},p.prototype.print_string=function(e){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(e)},p.prototype.preserveSingleSpace=function(e){e&&(this._output.space_before_token=!0)},p.prototype.indent=function(){this._indentLevel++},p.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},p.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===t&&(t="\n",e&&s.test(e||"")&&(t=e.match(s)[0]));var n=(e=e.replace(l,"\n")).match(/^[\t ]*/)[0];this._output=new i(this._options,n),this._input=new o(e),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var r,p,h=0,m=!1,g=!1,y=!1,v=!1,b=!1,_=this._ch;r=""!==this._input.read(c),p=_,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),_=this._ch,this._ch;)if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(d),E=a.get_directives(w);E&&"start"===E.ignore&&(w+=a.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(f)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(r),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s$/,""),this.print_string(S),this._output.space_before_token=!0),"extend"===(S=S.replace(/\s$/,""))?v=!0:"import"===S&&(b=!0),S in this.NESTED_AT_RULE?(this._nestedLevel+=1,S in this.CONDITIONAL_GROUP_RULE&&(y=!0)):m||0!==h||-1===S.indexOf(":")||(g=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(r),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(g&&(g=!1,this.outdent()),this.indent(),this._output.space_before_token=!0,this.print_string(this._ch),y?(y=!1,m=this._indentLevel>this._nestedLevel):m=this._indentLevel>=this._nestedLevel,this._options.newline_between_rules&&m&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===p&&this._output.trim(!0),b=!1,v=!1,g&&(this.outdent(),g=!1),this.print_string(this._ch),m=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!m&&!y||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||v||0!==h?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),g||(g=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(r),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===h?(g&&(this.outdent(),g=!1),v=!1,b=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),h++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),h&&(h--,this.outdent()))):(this.preserveSingleSpace(r),this.print_string(this._ch),this.eatWhitespace(),h++,this.indent()):")"===this._ch?(h&&(h--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||g||0!==h||b?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||g||0!==h?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(r),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),u.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(r),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&u.test(this._ch)&&(this._ch=""));return this._output.get_code(t)},e.exports.Beautifier=p},function(e,t,n){"use strict";var r=n(6).Options;function i(e){r.call(this,e,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var t=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||t}i.prototype=new r,e.exports.Options=i}]),void 0===(n=function(){return{css_beautify:r}}.apply(t,[]))||(e.exports=n)},9187:(e,t,n)=>{var r,i,o;o=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([,,function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t},i.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t]},i.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=o},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(e,t,n){"use strict";function r(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var n,r={};for(n in e=o(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function o(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},,function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},i.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,n){var r,i="";return e&&(r=this.match(e))&&(i+=r[0]),!t||!r&&e||(i+=this.readUntil(t,n)),i},i.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(r=i.index,t&&(r+=i[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&r&&(i="y"),"string"==typeof e&&""!==e?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,n){"use strict";var r=n(8).InputScanner,i=n(3).Token,o=n(10).TokenStream,a=n(11).WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new a(this._input)};l.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new o,this._reset();for(var t=new i(s.START,""),n=null,r=[],a=new o;t.type!==s.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new o),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},l.prototype._is_comment=function(e){return!1},l.prototype._is_opening=function(e){return!1},l.prototype._is_closing=function(e,t){return!1},l.prototype._create_token=function(e,t){return new i(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=l,e.exports.TOKEN=s},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function i(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}i.prototype=new r,i.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},i.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],i=e.exec(t);i;)r.push(t.substring(n,i.index)),n=i.index+i[0].length,i=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=i},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1};function o(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}o.prototype=new r,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},o.prototype.read_options=function(e){var t=this._create();for(var n in i)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},o.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},o.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},o.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},o.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=o},,,,function(e,t,n){"use strict";var r=n(19).Beautifier,i=n(20).Options;e.exports=function(e,t,n,i){return new r(e,t,n,i).beautify()},e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var r=n(20).Options,i=n(2).Output,o=n(21).Tokenizer,a=n(21).TOKEN,s=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new i(e,t)};u.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)},u.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t},u.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},u.prototype.add_raw_token=function(e){this._output.add_raw_token(e)},u.prototype.print_preserved_newlines=function(e){var t=0;e.type!==a.TEXT&&e.previous.type!==a.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var n=0;n<t;n++)this.print_newline(n>0);return 0!==t},u.prototype.traverse_whitespace=function(e){return!(!e.whitespace_before&&!e.newlines||(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),0))},u.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},u.prototype.print_newline=function(e){this._output.add_new_line(e)},u.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))},u.prototype.indent=function(){this.indent_level++},u.prototype.get_full_indent=function(e){return(e=this.indent_level+(e||0))<1?"":this._output.get_indent_string(e)};var c=function(e,t){var n=null,r=null;return t.closed?("script"===e?n="text/javascript":"style"===e&&(n="text/css"),(n=function(e){for(var t=null,n=e.next;n.type!==a.EOF&&e.closed!==n;){if(n.type===a.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===a.EQUALS&&n.next.next&&n.next.next.type===a.VALUE&&(t=n.next.next.text);break}n=n.next}return t}(t)||n).search("text/css")>-1?r="css":n.search(/(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1?r="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?r="html":n.search(/test\/null/)>-1&&(r="null"),r):null};function d(e,t){return-1!==t.indexOf(e)}function f(e,t,n){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=n||0,this.parser_token=t||null}function p(e){this._printer=e,this._current_frame=null}function h(e,t,n,i){this._source_text=e||"",t=t||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var o=new r(t,"html");this._options=o,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}p.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},p.prototype.record_tag=function(e){var t=new f(this._current_frame,e,this._printer.indent_level);this._current_frame=t},p.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t},p.prototype._get_frame=function(e,t){for(var n=this._current_frame;n&&-1===e.indexOf(n.tag);){if(t&&-1!==t.indexOf(n.tag)){n=null;break}n=n.parent}return n},p.prototype.try_pop=function(e,t){var n=this._get_frame([e],t);return this._try_pop_frame(n)},p.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)},h.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&s.test(e)&&(t=e.match(s)[0]));var n=(e=e.replace(l,"\n")).match(/^[\t ]*/)[0],r={text:"",type:""},i=new m,c=new u(this._options,n),d=new o(e,this._options).tokenize();this._tag_stack=new p(c);for(var f=null,h=d.next();h.type!==a.EOF;)h.type===a.TAG_OPEN||h.type===a.COMMENT?i=f=this._handle_tag_open(c,h,i,r):h.type===a.ATTRIBUTE||h.type===a.EQUALS||h.type===a.VALUE||h.type===a.TEXT&&!i.tag_complete?f=this._handle_inside_tag(c,h,i,d):h.type===a.TAG_CLOSE?f=this._handle_tag_close(c,h,i):h.type===a.TEXT?f=this._handle_text(c,h,i):c.add_raw_token(h),r=f,h=d.next();return c._output.get_code(t)},h.prototype._handle_tag_close=function(e,t,n){var r={text:t.text,type:t.type};return e.alignment_size=0,n.tag_complete=!0,e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted?e.add_raw_token(t):("<"===n.tag_start_char&&(e.set_space_before_token("/"===t.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(e.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||e.set_wrap_point(),r},h.prototype._handle_inside_tag=function(e,t,n,r){var i=n.has_wrapped_attrs,o={text:t.text,type:t.type};if(e.set_space_before_token(t.newlines||""!==t.whitespace_before,!0),n.is_unformatted)e.add_raw_token(t);else if("{"===n.tag_start_char&&t.type===a.TEXT)e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t);else{if(t.type===a.ATTRIBUTE?(e.set_space_before_token(!0),n.attr_count+=1):(t.type===a.EQUALS||t.type===a.VALUE&&t.previous.type===a.EQUALS)&&e.set_space_before_token(!1),t.type===a.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),i=i||0!==t.newlines),this._is_wrap_attributes_force)){var s=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===n.attr_count){var l,u=!0,c=0;do{if((l=r.peek(c)).type===a.ATTRIBUTE){u=!1;break}c+=1}while(c<4&&l.type!==a.EOF&&l.type!==a.TAG_CLOSE);s=!u}s&&(e.print_newline(!1),i=!0)}e.print_token(t),i=i||e.previous_token_wrapped(),n.has_wrapped_attrs=i}return o},h.prototype._handle_text=function(e,t,n){var r={text:t.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(e,t,n):n.is_unformatted||n.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),r},h.prototype._print_custom_beatifier_text=function(e,t,n){var r=this;if(""!==t.text){var i,o=t.text,a=1,s="",l="";"javascript"===n.custom_beautifier_name&&"function"==typeof this._js_beautify?i=this._js_beautify:"css"===n.custom_beautifier_name&&"function"==typeof this._css_beautify?i=this._css_beautify:"html"===n.custom_beautifier_name&&(i=function(e,t){return new h(e,t,r._js_beautify,r._css_beautify).beautify()}),"keep"===this._options.indent_scripts?a=0:"separate"===this._options.indent_scripts&&(a=-e.indent_level);var u=e.get_full_indent(a);if(o=o.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===o[0]&&o.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(o);if(!c)return void e.add_raw_token(t);s=u+c[1]+"\n",o=c[4],c[5]&&(l=u+c[5]),o=o.replace(/\n[ \t]*$/,""),(c[2]||-1!==c[3].indexOf("\n"))&&(c=c[3].match(/[ \t]+$/))&&(t.whitespace_before=c[0])}if(o)if(i){var d=function(){this.eol="\n"};d.prototype=this._options.raw_options,o=i(u+o,new d)}else{var f=t.whitespace_before;f&&(o=o.replace(new RegExp("\n("+f+")?","g"),"\n")),o=u+o.replace(/\n/g,"\n"+u)}s&&(o=o?s+o+"\n"+l:s+l),e.print_newline(!1),o&&(t.text=o,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}},h.prototype._handle_tag_open=function(e,t,n,r){var i=this._get_tag_open_token(t);return(n.is_unformatted||n.is_content_unformatted)&&t.type===a.TAG_OPEN&&0===t.text.indexOf("</")?e.add_raw_token(t):(e.traverse_whitespace(t),this._set_tag_position(e,t,i,n,r),i.is_inline_element||e.set_wrap_point(),e.print_token(t)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(i.alignment_size=t.text.length+1),i.tag_complete||i.is_unformatted||(e.alignment_size=i.alignment_size),i};var m=function(e,t){var n;this.parent=e||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",t?(this.tag_start_char=t.text[0],this.text=t.text,"<"===this.tag_start_char?(n=t.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=t.text.match(/^{{[#\^]?([^\s}]+)/),this.tag_check=n?n[1]:""),this.tag_check=this.tag_check.toLowerCase(),t.type===a.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||t.closed&&"/>"===t.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};h.prototype._get_tag_open_token=function(e){var t=new m(this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||d(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&d(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&d(t.tag_check,this._options.content_unformatted),t.is_inline_element=d(t.tag_name,this._options.inline)||"{"===t.tag_start_char,t},h.prototype._set_tag_position=function(e,t,n,r,i){n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||(n.parent&&(n.parent.multiline_content=!0),e.print_newline(!1))),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=c(n.tag_check,t)))),d(n.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),n.is_empty_element?("{"===n.tag_start_char&&"else"===n.tag_check&&(this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0,e.current_line_has_match(/{{#if/)||e.print_newline(!1)),"!--"===n.tag_name&&i.type===a.TAG_CLOSE&&r.is_end_tag&&-1===n.text.indexOf("\n")||n.is_inline_element||n.is_unformatted||e.print_newline(!1)):n.is_unformatted||n.is_content_unformatted?n.is_inline_element||n.is_unformatted||e.print_newline(!1):n.is_end_tag?(n.start_tag_token&&n.start_tag_token.multiline_content||!(n.is_inline_element||r.is_inline_element||i.type===a.TAG_CLOSE&&n.start_tag_token===r||"TK_CONTENT"===i.type))&&e.print_newline(!1):(n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||"TK_CONTENT"===i.type||(n.parent&&(n.parent.multiline_content=!0),e.print_newline(!1)))},h.prototype._do_optional_end_element=function(e){var t=null;if(!e.is_empty_element&&e.is_start_tag&&e.parent)return"body"===e.tag_name?t=t||this._tag_stack.try_pop("head"):"li"===e.tag_name?t=t||this._tag_stack.try_pop("li",["ol","ul"]):"dd"===e.tag_name||"dt"===e.tag_name?t=(t=t||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]):"rp"===e.tag_name||"rt"===e.tag_name?t=(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===e.tag_name?t=t||this._tag_stack.try_pop("optgroup",["select"]):"option"===e.tag_name?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===e.tag_name?t=t||this._tag_stack.try_pop("caption",["table"]):"thead"===e.tag_name?t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===e.tag_name||"tfoot"===e.tag_name?t=(t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===e.tag_name?t=(t=(t=t||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==e.tag_name&&"td"!==e.tag_name||(t=(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"])),e.parent=this._tag_stack.get_parser_token(),t},e.exports.Beautifier=h},function(e,t,n){"use strict";var r=n(6).Options;function i(e){r.call(this,e,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}i.prototype=new r,e.exports.Options=i},function(e,t,n){"use strict";var r=n(9).Tokenizer,i=n(9).TOKEN,o=n(13).Directives,a=n(14).TemplatablePattern,s=n(12).Pattern,l={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},u=new o(/<\!--/,/-->/),c=function(e,t){r.call(this,e,t),this._current_tag_name="";var n=new a(this._input).read_options(this._options),i=new s(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =\/>]/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var o=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(o).until_after(o)}};(c.prototype=new r)._is_comment=function(e){return!1},c.prototype._is_opening=function(e){return e.type===l.TAG_OPEN},c.prototype._is_closing=function(e,t){return e.type===l.TAG_CLOSE&&t&&((">"===e.text||"/>"===e.text)&&"<"===t.text[0]||"}}"===e.text&&"{"===t.text[0]&&"{"===t.text[1])},c.prototype._reset=function(){this._current_tag_name=""},c.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(l.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(r,t))||this._read_attribute(r,e,t))||this._read_raw_content(r,e,t))||this._read_close(r,t))||this._read_content_word(r))||this._read_comment_or_cdata(r))||this._read_processing(r))||this._read_open(r,t))||this._create_token(l.UNKNOWN,this._input.next())},c.prototype._read_comment_or_cdata=function(e){var t=null,n=null,r=null;return"<"===e&&("!"===this._input.peek(1)&&((n=this.__patterns.comment.read())?(r=u.get_directives(n))&&"start"===r.ignore&&(n+=u.readIgnored(this._input)):n=this.__patterns.cdata.read()),n&&((t=this._create_token(l.COMMENT,n)).directives=r)),t},c.prototype._read_processing=function(e){var t=null,n=null;if("<"===e){var r=this._input.peek(1);"!"!==r&&"?"!==r||(n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),n&&((t=this._create_token(l.COMMENT,n)).directives=null)}return t},c.prototype._read_open=function(e,t){var n=null,r=null;return t||"<"===e&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),r=this._create_token(l.TAG_OPEN,n)),r},c.prototype._read_open_handlebars=function(e,t){var n=null,r=null;return t||this._options.indent_handlebars&&"{"===e&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),r=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),r=this._create_token(l.TAG_OPEN,n))),r},c.prototype._read_close=function(e,t){var n=null,r=null;return t&&("<"===t.text[0]&&(">"===e||"/"===e&&">"===this._input.peek(1))?(n=this._input.next(),"/"===e&&(n+=this._input.next()),r=this._create_token(l.TAG_CLOSE,n)):"{"===t.text[0]&&"}"===e&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),r=this._create_token(l.TAG_CLOSE,"}}"))),r},c.prototype._read_attribute=function(e,t,n){var r=null,i="";if(n&&"<"===n.text[0])if("="===e)r=this._create_token(l.EQUALS,this._input.next());else if('"'===e||"'"===e){var o=this._input.next();o+='"'===e?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),r=this._create_token(l.VALUE,o)}else(i=this.__patterns.attribute.read())&&(r=t.type===l.EQUALS?this._create_token(l.VALUE,i):this._create_token(l.ATTRIBUTE,i));return r},c.prototype._is_content_unformatted=function(e){return-1===this._options.void_elements.indexOf(e)&&(-1!==this._options.content_unformatted.indexOf(e)||-1!==this._options.unformatted.indexOf(e))},c.prototype._read_raw_content=function(e,t,n){var r="";if(n&&"{"===n.text[0])r=this.__patterns.handlebars_raw_close.read();else if(t.type===l.TAG_CLOSE&&"<"===t.opened.text[0]){var i=t.opened.text.substr(1).toLowerCase();if("script"===i||"style"===i){var o=this._read_comment_or_cdata(e);if(o)return o.type=l.TEXT,o;r=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(i)&&(r=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig")))}return r?this._create_token(l.TEXT,r):null},c.prototype._read_content_word=function(e){var t="";if(this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(t=this.__patterns.unformatted_content_delimiter.read()),t||(t=this.__patterns.word.read()),t)return this._create_token(l.TEXT,t)},e.exports.Tokenizer=c,e.exports.TOKEN=l}]),r=[n,n(97395),n(49820)],void 0===(i=function(e){var t=n(97395),r=n(49820);return{html_beautify:function(e,n){return o(e,n,t.js_beautify,r.css_beautify)}}}.apply(t,r))||(e.exports=i)},97395:(e,t)=>{var n,r;r=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1).Beautifier,i=n(5).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new i}},function(e,t,n){"use strict";var r=n(2).Output,i=n(3).Token,o=n(4),a=n(5).Options,s=n(7).Tokenizer,l=n(7).line_starters,u=n(7).positionable_operators,c=n(7).TOKEN;function d(e,t){return-1!==t.indexOf(e)}function f(e,t){return e&&e.type===c.RESERVED&&e.text===t}function p(e,t){return e&&e.type===c.RESERVED&&d(e.text,t)}var h=["case","return","do","if","throw","else","await","break","continue","async"],m=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),g=[m.before_newline,m.preserve_newline],y="BlockStatement",v="Statement",b="ObjectLiteral",_="ArrayLiteral",w="ForInitializer",E="Conditional",S="Expression";function x(e,t){t.multiline_frame||t.mode===w||t.mode===E||e.remove_indent(t.start_line_index)}function k(e){return e===_}function T(e){return d(e,[S,w,E])}function O(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new a(t)}O.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new i(c.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},O.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new r(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(y);var n=new s(e,this._options);return this._tokens=n.tokenize(),e},O.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&o.lineBreak.test(e||"")&&(t=e.match(o.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},O.prototype.handle_token=function(e,t){e.type===c.START_EXPR?this.handle_start_expr(e):e.type===c.END_EXPR?this.handle_end_expr(e):e.type===c.START_BLOCK?this.handle_start_block(e):e.type===c.END_BLOCK?this.handle_end_block(e):e.type===c.WORD||e.type===c.RESERVED?this.handle_word(e):e.type===c.SEMICOLON?this.handle_semicolon(e):e.type===c.STRING?this.handle_string(e):e.type===c.EQUALS?this.handle_equals(e):e.type===c.OPERATOR?this.handle_operator(e):e.type===c.COMMA?this.handle_comma(e):e.type===c.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===c.COMMENT?this.handle_comment(e,t):e.type===c.DOT?this.handle_dot(e):e.type===c.EOF?this.handle_eof(e):(e.type,c.UNKNOWN,this.handle_unknown(e,t))},O.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,r=this._options.keep_array_indentation&&k(this._flags.mode);if(e.comments_before)for(var i=e.comments_before.next();i;)this.handle_whitespace_and_comments(i,t),this.handle_token(i,t),i=e.comments_before.next();if(r)for(var o=0;o<n;o+=1)this.print_newline(o>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var a=1;a<n;a+=1)this.print_newline(!0,t)}};var C=["async","break","continue","return","throw","yield"];O.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(d(this._flags.last_token.text,u)||d(e.text,u)){var r=d(this._flags.last_token.text,u)&&d(this._options.operator_position,g)||d(e.text,u);n=n&&r}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(p(this._flags.last_token,C))return;this._output.set_wrap_point()}}},O.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==c.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==v||this._flags.if_block&&f(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},O.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},O.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===c.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},O.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},O.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},O.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},O.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===v&&x(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},O.prototype.start_of_object_property=function(){return this._flags.parent.mode===b&&this._flags.mode===v&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||p(this._flags.last_token,["get","set"]))},O.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||p(this._flags.last_token,["var","let","const"])&&e.type===c.WORD)||f(this._flags.last_token,"do"))||!(this._flags.parent.mode===b&&this._flags.mode===v)&&p(this._flags.last_token,C)&&!e.newlines)||f(this._flags.last_token,"else")&&!(f(e,"if")&&!e.comments_before))||this._flags.last_token.type===c.END_EXPR&&(this._previous_flags.mode===w||this._previous_flags.mode===E))||this._flags.last_token.type===c.WORD&&this._flags.mode===y&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==c.WORD&&e.type!==c.RESERVED)||this._flags.mode===b&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||p(this._flags.last_token,["get","set"])))&&(this.set_mode(v),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,p(e,["do","for","if","while"])),!0)},O.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=S;if("["===e.text){if(this._flags.last_token.type===c.WORD||")"===this._flags.last_token.text)return p(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=_,k(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),d(this._flags.last_token.type,[c.START_EXPR,c.END_EXPR,c.WORD,c.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===c.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=w):d(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=E):d(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(d(this._flags.last_token.text,l)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===c.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var r=this._tokens.peek(-4);p(n,["async","function"])||"*"===n.text&&p(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===b&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==r.text&&","!==r.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===c.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===b&&d(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===c.START_BLOCK?this.print_newline():this._flags.last_token.type!==c.END_EXPR&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==c.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},O.prototype.handle_end_expr=function(e){for(;this._flags.mode===v;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==c.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),x(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===E&&(this._previous_flags.mode=S,this._flags.do_block=!1,this._flags.do_while=!1)},O.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR?(this.set_mode(y),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(y):n&&(d(n.text,[":",","])&&d(t.type,[c.STRING,c.WORD,c.RESERVED])||d(t.text,["get","set","..."])&&d(n.type,[c.WORD,c.RESERVED]))?d(this._last_last_text,["class","interface"])?this.set_mode(y):this.set_mode(b):this._flags.last_token.type===c.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(y):d(this._flags.last_token.type,[c.EQUALS,c.START_EXPR,c.COMMA,c.OPERATOR])||p(this._flags.last_token,["return","throw","import","default"])?this.set_mode(b):this.set_mode(y);var r=!t.comments_before&&"}"===t.text,i=r&&"function"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR;if(this._options.brace_preserve_inline){var o=0,a=null;this._flags.inline_frame=!0;do{if(o+=1,(a=this._tokens.peek(o-1)).newlines){this._flags.inline_frame=!1;break}}while(a.type!==c.EOF&&(a.type!==c.END_BLOCK||a.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==c.OPERATOR&&(i||this._flags.last_token.type===c.EQUALS||p(this._flags.last_token,h)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.COMMA||((this._flags.last_token.type===c.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==c.OPERATOR&&this._flags.last_token.type!==c.START_EXPR&&(this._flags.last_token.type!==c.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),r||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},O.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===v;)this.restore_mode();var t=this._flags.last_token.type===c.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},O.prototype.handle_word=function(e){if(e.type===c.RESERVED&&(d(e.text,["set","get"])&&this._flags.mode!==b||"import"===e.text&&"("===this._tokens.peek().text||d(e.text,["as","from"])&&!this._flags.import_block||this._flags.mode===b&&":"===this._tokens.peek().text)&&(e.type=c.WORD),this.start_of_statement(e)?p(this._flags.last_token,["var","let","const"])&&e.type===c.WORD&&(this._flags.declaration_statement=!0):!e.newlines||T(this._flags.mode)||this._flags.last_token.type===c.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===c.EQUALS||!this._options.preserve_newlines&&p(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(f(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&f(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===v;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&p(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==c.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.EQUALS&&this._flags.last_token.type!==c.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),f(e,"function"))return(d(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!d(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==c.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD?p(this._flags.last_token,["get","set","new","export"])||p(this._flags.last_token,C)||f(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===c.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!T(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";this._flags.last_token.type===c.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":p(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&this._flags.mode===y?t="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&T(this._flags.mode)?t="SPACE":this._flags.last_token.type===c.STRING?t="NEWLINE":this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===b&&d(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===c.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===c.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),p(e,l)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),p(e,["else","catch","finally"])?(this._flags.last_token.type!==c.END_BLOCK||this._previous_flags.mode!==y||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?p(this._flags.last_token,h)||"declare"===this._flags.last_token.text&&p(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==c.END_EXPR?this._flags.last_token.type===c.START_EXPR&&p(e,["var","let","const"])||":"===this._flags.last_token.text||(f(e,"if")&&f(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):p(e,l)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0),!e.previous||e.previous.type!==c.WORD&&e.previous.type!==c.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===c.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&f(e,"from")&&(this._flags.import_block=!1))},O.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==v||this._flags.if_block&&f(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},O.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},O.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},O.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(T(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===b||this._flags.mode===v&&this._flags.parent.mode===b?(this._flags.mode===v&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},O.prototype.handle_operator=function(e){var t="*"===e.text&&(p(this._flags.last_token,["function","yield"])||d(this._flags.last_token.type,[c.START_BLOCK,c.COMMA,c.END_BLOCK,c.SEMICOLON])),n=d(e.text,["-","+"])&&(d(this._flags.last_token.type,[c.START_BLOCK,c.START_EXPR,c.EQUALS,c.OPERATOR])||d(this._flags.last_token.text,l)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var r=!t;this.handle_whitespace_and_comments(e,r)}if(p(this._flags.last_token,h))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==c.DOT)if("::"!==e.text){if(this._flags.last_token.type===c.OPERATOR&&d(this._options.operator_position,g)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==c.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var i=!0,o=!0,a=!1;if(":"===e.text?0===this._flags.ternary_depth?i=!1:(this._flags.ternary_depth-=1,a=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&d(e.text,u)){var s=":"===e.text,f=s&&a,b=s&&!a;switch(this._options.operator_position){case m.before_newline:return this._output.space_before_token=!b,this.print_token(e),s&&!f||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case m.after_newline:return this._output.space_before_token=!0,!s||f?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case m.preserve_newline:return b||this.allow_wrap_or_preserved_newline(e),i=!(this._output.just_added_newline()||b),this._output.space_before_token=i,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),i=!1;var _=this._tokens.peek();o=_&&d(_.type,[c.WORD,c.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),i=this._flags.last_token.type===c.START_BLOCK,o=!1):(d(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR||this.allow_wrap_or_preserved_newline(e),i=!1,o=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&T(this._flags.mode)&&(i=!0),this._flags.last_token.type===c.RESERVED?i=!0:this._flags.last_token.type===c.END_EXPR?i=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===c.OPERATOR&&(i=d(e.text,["--","-","++","+"])&&d(this._flags.last_token.text,["--","-","++","+"]),d(e.text,["+","-"])&&d(this._flags.last_token.text,["--","++"])&&(o=!0)),(this._flags.mode!==y||this._flags.inline_frame)&&this._flags.mode!==v||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||i,this.print_token(e),this._output.space_before_token=o}else this.print_token(e);else this.print_token(e)},O.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):o.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},O.prototype.print_block_commment=function(e,t){var n,r=function(e){for(var t=[],n=(e=e.replace(o.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),i=!1,a=!1,s=e.whitespace_before,l=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].trim().charAt(0)!==t)return!1;return!0}(r=r.slice(1),"*"),a=function(e,t){for(var n,r=0,i=e.length;r<i;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}(r,s),i&&(this._flags.alignment=1),n=0;n<r.length;n++)i?(this.print_token_line_indentation(e),this._output.add_token(r[n].replace(/^\s+/g,""))):a&&r[n]?(this.print_token_line_indentation(e),this._output.add_token(r[n].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,t);this._flags.alignment=0}},O.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},O.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),p(this._flags.last_token,h)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},O.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},O.prototype.handle_eof=function(e){for(;this._flags.mode===v;)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=O},function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function i(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function o(e,t){this.__indent_cache=new i(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},i.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t},i.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t]},i.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},i.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},o.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},o.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var i=this.__lines[n];if(i.is_empty())break;if(0!==i.item(0).indexOf(e)&&i.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=o},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(e,t,n){"use strict";var r="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",o="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",a="(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+i+"])";t.identifier=new RegExp(a+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),t.identifierStart=new RegExp(a),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+r+i+o+"])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var r=n(6).Options,i=["before-newline","after-newline","preserve-newline"];function o(e){r.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<n.length;o++)"preserve-inline"===n[o]?this.brace_preserve_inline=!0:this.brace_style=n[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",i),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}o.prototype=new r,e.exports.Options=o},function(e,t,n){"use strict";function r(e,t){this.raw_options=i(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function i(e,t){var n,r={};for(n in e=o(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function o(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"==typeof n?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=o,e.exports.mergeOpts=i},function(e,t,n){"use strict";var r=n(8).InputScanner,i=n(9).Tokenizer,o=n(9).TOKEN,a=n(13).Directives,s=n(4),l=n(12).Pattern,u=n(14).TemplatablePattern;function c(e,t){return-1!==t.indexOf(e)}var d={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},f=new a(/\/\*/,/\*\//),p=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,h=/[0-9]/,m=/[^\d\.]/,g=">>> === !== << && >= ** != == <= >> || < / - + > : & % ? ^ | *".split(" "),y=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= = ! ? > < : / ^ - + * & % ~ |";y=(y=y.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")).replace(/ /g,"|");var v,b=new RegExp(y),_="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=_.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),E=new RegExp("^(?:"+w.join("|")+")$"),S=function(e,t){i.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),r=new u(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(s.identifier).matching(s.identifierMatch),number:n.matching(p),punct:n.matching(b),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(s.lineBreak),shebang:n.starting_with(/#!/).until_after(s.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};(S.prototype=new i)._is_comment=function(e){return e.type===d.COMMENT||e.type===d.BLOCK_COMMENT||e.type===d.UNKNOWN},S.prototype._is_opening=function(e){return e.type===d.START_BLOCK||e.type===d.START_EXPR},S.prototype._is_closing=function(e,t){return(e.type===d.END_BLOCK||e.type===d.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},S.prototype._reset=function(){v=!1},S.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(d.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_string(r))||this._read_word(e))||this._read_singles(r))||this._read_comment(r))||this._read_regexp(r,e))||this._read_xml(r,e))||this._read_non_javascript(r))||this._read_punctuation())||this._create_token(d.UNKNOWN,this._input.next())},S.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(s.allLineBreaks,"\n"),e.type!==d.DOT&&(e.type!==d.RESERVED||"set"!==e.text&&"get"!==e.text)&&E.test(t)?"in"===t||"of"===t?this._create_token(d.OPERATOR,t):this._create_token(d.RESERVED,t):this._create_token(d.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(d.WORD,t):void 0},S.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(d.START_EXPR,e):")"===e||"]"===e?t=this._create_token(d.END_EXPR,e):"{"===e?t=this._create_token(d.START_BLOCK,e):"}"===e?t=this._create_token(d.END_BLOCK,e):";"===e?t=this._create_token(d.SEMICOLON,e):"."===e&&m.test(this._input.peek(1))?t=this._create_token(d.DOT,e):","===e&&(t=this._create_token(d.COMMA,e)),t&&this._input.next(),t},S.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(d.EQUALS,e):this._create_token(d.OPERATOR,e)},S.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(d.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(d.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(h)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(d.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(s.newline);)t+=this._input.next();return v=!0,this._create_token(d.COMMENT,t)}}else if(v&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return v=!1,this._create_token(d.COMMENT,t);return null},S.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var r=f.get_directives(n);r&&"start"===r.ignore&&(n+=f.readIgnored(this._input)),n=n.replace(s.allLineBreaks,"\n"),(t=this._create_token(d.BLOCK_COMMENT,n)).directives=r}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(d.COMMENT,n))}return t},S.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){for(var t="",n=0,i=new r(e),o=null;i.hasNext();)if((o=i.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=o[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())o=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}o=i.match(/u([0-9A-Fa-f]{4})/g)}if(!o)return e;if((n=parseInt(o[1],16))>126&&n<=255&&0===o[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+o[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(s.allLineBreaks,"\n"),this._create_token(d.STRING,t)}return null},S.prototype._allow_regexp_or_xml=function(e){return e.type===d.RESERVED&&c(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===d.END_EXPR&&")"===e.text&&e.opened.previous.type===d.RESERVED&&c(e.opened.previous.text,["if","while","for"])||c(e.type,[d.COMMENT,d.START_EXPR,d.START_BLOCK,d.START,d.END_BLOCK,d.OPERATOR,d.EQUALS,d.EOF,d.SEMICOLON,d.COMMA])},S.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),r=!1,i=!1;this._input.hasNext()&&(r||i||this._input.peek()!==e)&&!this._input.testChar(s.newline);)n+=this._input.peek(),r?r=!1:(r="\\"===this._input.peek(),"["===this._input.peek()?i=!0:"]"===this._input.peek()&&(i=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(s.identifier)),this._create_token(d.STRING,n)}return null},S.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",r=this.__patterns.xml.read_match();if(r){for(var i=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===i.indexOf("{"),a=0;r;){var l=!!r[1],u=r[2];if(!(r[r.length-1]||"![CDATA["===u.slice(0,8))&&(u===i||o&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(l?--a:++a),n+=r[0],a<=0)break;r=this.__patterns.xml.read_match()}return r||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(s.allLineBreaks,"\n"),this._create_token(d.STRING,n)}}return null},S.prototype._read_string_recursive=function(e,t,n){var r,i;"'"===e?i=this.__patterns.single_quote:'"'===e?i=this.__patterns.double_quote:"`"===e?i=this.__patterns.template_text:"}"===e&&(i=this.__patterns.template_expression);for(var o=i.read(),a="";this._input.hasNext();){if((a=this._input.next())===e||!t&&s.newline.test(a)){this._input.back();break}"\\"===a&&this._input.hasNext()?("x"===(r=this._input.peek())||"u"===r?this.has_char_escapes=!0:"\r"===r&&"\n"===this._input.peek(1)&&this._input.next(),a+=this._input.next()):n&&("${"===n&&"$"===a&&"{"===this._input.peek()&&(a+=this._input.next()),n===a&&(a+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(a+=this._input.next()))),o+=a+=i.read()}return o},e.exports.Tokenizer=S,e.exports.TOKEN=d,e.exports.positionable_operators=g.slice(),e.exports.line_starters=_.slice()},function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function i(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},i.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},i.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},i.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},i.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},i.prototype.read=function(e,t,n){var r,i="";return e&&(r=this.match(e))&&(i+=r[0]),!t||!r&&e||(i+=this.readUntil(t,n)),i},i.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var i=e.exec(this.__input);return i?(r=i.index,t&&(r+=i[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},i.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},i.prototype.get_regexp=function(e,t){var n=null,i="g";return t&&r&&(i="y"),"string"==typeof e&&""!==e?n=new RegExp(e,i):e&&(n=new RegExp(e.source,i)),n},i.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},i.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},i.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=i},function(e,t,n){"use strict";var r=n(8).InputScanner,i=n(3).Token,o=n(10).TokenStream,a=n(11).WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new a(this._input)};l.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new o,this._reset();for(var t=new i(s.START,""),n=null,r=[],a=new o;t.type!==s.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)a.add(e),e=this._get_next_token(t,n);a.isEmpty()||(e.comments_before=a,a=new o),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},l.prototype._is_comment=function(e){return!1},l.prototype._is_opening=function(e){return!1},l.prototype._is_closing=function(e,t){return!1},l.prototype._create_token=function(e,t){return new i(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=l,e.exports.TOKEN=s},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function i(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}i.prototype=new r,i.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},i.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],i=e.exec(t);i;)r.push(t.substring(n,i.index)),n=i.index+i[0].length,i=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=i},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1};function o(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}o.prototype=new r,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},o.prototype.read_options=function(e){var t=this._create();for(var n in i)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},o.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},o.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},o.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},o.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=o}]),void 0===(n=function(){return{js_beautify:r}}.apply(t,[]))||(e.exports=n)},67316:(e,t,n)=>{e.exports=n(89431)},89431:(e,t,n)=>{"use strict";var r=n(81280).isFactory,i=n(13233),o=n(12852),a=n(99816),s=n(66370);t.create=function(e){if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var t=[],n=[],l=o.mixin({});l.type={},l.expression={transform:{},mathWithTransform:{}},l.typed=i.create(l.type);var u={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function c(e){if(!r(e))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,o=t.indexOf(e);return-1===o?(i=!0===e.math?e.factory(l.type,u,c,l.typed,l):e.factory(l.type,u,c,l.typed),t.push(e),n.push(i)):i=n[o],i}return l.import=c(a),l.config=c(s),l.expression.mathWithTransform.config=l.config,e&&l.config(e),l}},66370:(e,t,n)=>{"use strict";var r=n(81280);function i(e,t,n){if(void 0!==e[t]&&(i=n,o=e[t],-1===i.indexOf(o))){var r=function(e,t){return e.map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase())}(n,e[t]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+t+'", should be "'+n[r]+'" instead of "'+e[t]+'".'),e[t]=n[r]):console.warn('Warning: Unknown value "'+e[t]+'" for configuration option "'+t+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}var i,o}t.name="config",t.math=!0,t.factory=function(e,t,n,o,a){var s=["Matrix","Array"],l=["number","BigNumber","Fraction"];function u(e){if(e){var n=r.map(t,r.clone);i(e,"matrix",s),i(e,"number",l),r.deepExtend(t,e);var o=r.map(t,r.clone),u=r.map(e,r.clone);return a.emit("config",o,n,u),o}return r.map(t,r.clone)}return u.MATRIX=s,u.NUMBER=l,u}},99816:(e,t,n)=>{"use strict";var r=n(81280).lazy,i=n(81280).isFactory,o=n(81280).traverse,a=n(30719);t.math=!0,t.name="import",t.factory=function(e,t,n,s,l){function u(e,t,n){if(n.wrap&&"function"==typeof t&&(t=function(e){var t=function(){for(var t=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];t[n]=i&&i.valueOf()}return e.apply(l,t)};e.transform&&(t.transform=e.transform);return t}(t)),p(l[e])&&p(t))return t=n.override?s(e,t.signatures):s(l[e],t),l[e]=t,c(e,t),void l.emit("import",e,(function(){return t}));if(void 0===l[e]||n.override)return l[e]=t,c(e,t),void l.emit("import",e,(function(){return t}));if(!n.silent)throw new Error('Cannot import "'+e+'": already exists')}function c(e,t){t&&"function"==typeof t.transform?(l.expression.transform[e]=t.transform,h(e)&&(l.expression.mathWithTransform[e]=t.transform)):(delete l.expression.transform[e],h(e)&&(l.expression.mathWithTransform[e]=t))}function d(e,t){if("string"==typeof e.name){var i=e.name,a=i in l.expression.transform,u=e.path?o(l,e.path):l,c=u.hasOwnProperty(i)?u[i]:void 0,d=function(){var r=n(e);if(r&&"function"==typeof r.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(p(c)&&p(r))return t.override||(r=s(c,r)),r;if(void 0===c||t.override)return r;if(!t.silent)throw new Error('Cannot import "'+i+'": already exists')};!1!==e.lazy?(r(u,i,d),a||("expression.transform"===e.path||m(e))&&r(l.expression.mathWithTransform,i,d)):(u[i]=d(),a||("expression.transform"===e.path||m(e))&&(l.expression.mathWithTransform[i]=d())),l.emit("import",i,d,e.path)}else n(e)}function f(t){return"function"==typeof t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t||null===t||t&&e.isUnit(t)||t&&e.isComplex(t)||t&&e.isBigNumber(t)||t&&e.isFraction(t)||t&&e.isMatrix(t)||t&&Array.isArray(t)}function p(e){return"function"==typeof e&&"object"==typeof e.signatures}function h(e){return!g.hasOwnProperty(e)}function m(e){return void 0===e.path&&!g.hasOwnProperty(e.name)}var g={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function e(t,n){var r=arguments.length;if(1!==r&&2!==r)throw new a("import",r,1,2);if(n||(n={}),i(t))d(t,n);else if(Array.isArray(t))t.forEach((function(t){e(t,n)}));else if("object"==typeof t){for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];f(s)?u(o,s,n):i(t)?d(t,n):e(s,n)}}else if(!n.silent)throw new TypeError("Factory, Object, or Array expected")}},t.lazy=!0},13233:(e,t,n)=>{"use strict";var r=n(61771),i=n(74186).digits,o=n(85055),a=n(95225),s=function(){return s=r.create,r};t.create=function(e){e.isNumber=function(e){return"number"==typeof e},e.isComplex=function(t){return e.Complex&&t instanceof e.Complex||!1},e.isBigNumber=o,e.isFraction=function(t){return e.Fraction&&t instanceof e.Fraction||!1},e.isUnit=function(e){return e&&e.constructor.prototype.isUnit||!1},e.isString=function(e){return"string"==typeof e},e.isArray=Array.isArray,e.isMatrix=a,e.isDenseMatrix=function(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix||!1},e.isSparseMatrix=function(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix||!1},e.isRange=function(e){return e&&e.constructor.prototype.isRange||!1},e.isIndex=function(e){return e&&e.constructor.prototype.isIndex||!1},e.isBoolean=function(e){return"boolean"==typeof e},e.isResultSet=function(e){return e&&e.constructor.prototype.isResultSet||!1},e.isHelp=function(e){return e&&e.constructor.prototype.isHelp||!1},e.isFunction=function(e){return"function"==typeof e},e.isDate=function(e){return e instanceof Date},e.isRegExp=function(e){return e instanceof RegExp},e.isObject=function(t){return"object"==typeof t&&t.constructor===Object&&!e.isComplex(t)&&!e.isFraction(t)},e.isNull=function(e){return null===e},e.isUndefined=function(e){return void 0===e},e.isAccessorNode=function(e){return e&&e.isAccessorNode&&e.constructor.prototype.isNode||!1},e.isArrayNode=function(e){return e&&e.isArrayNode&&e.constructor.prototype.isNode||!1},e.isAssignmentNode=function(e){return e&&e.isAssignmentNode&&e.constructor.prototype.isNode||!1},e.isBlockNode=function(e){return e&&e.isBlockNode&&e.constructor.prototype.isNode||!1},e.isConditionalNode=function(e){return e&&e.isConditionalNode&&e.constructor.prototype.isNode||!1},e.isConstantNode=function(e){return e&&e.isConstantNode&&e.constructor.prototype.isNode||!1},e.isFunctionAssignmentNode=function(e){return e&&e.isFunctionAssignmentNode&&e.constructor.prototype.isNode||!1},e.isFunctionNode=function(e){return e&&e.isFunctionNode&&e.constructor.prototype.isNode||!1},e.isIndexNode=function(e){return e&&e.isIndexNode&&e.constructor.prototype.isNode||!1},e.isNode=function(e){return e&&e.isNode&&e.constructor.prototype.isNode||!1},e.isObjectNode=function(e){return e&&e.isObjectNode&&e.constructor.prototype.isNode||!1},e.isOperatorNode=function(e){return e&&e.isOperatorNode&&e.constructor.prototype.isNode||!1},e.isParenthesisNode=function(e){return e&&e.isParenthesisNode&&e.constructor.prototype.isNode||!1},e.isRangeNode=function(e){return e&&e.isRangeNode&&e.constructor.prototype.isNode||!1},e.isSymbolNode=function(e){return e&&e.isSymbolNode&&e.constructor.prototype.isNode||!1},e.isChain=function(e){return e&&e.constructor.prototype.isChain||!1};var t=s();return t.types=[{name:"number",test:e.isNumber},{name:"Complex",test:e.isComplex},{name:"BigNumber",test:e.isBigNumber},{name:"Fraction",test:e.isFraction},{name:"Unit",test:e.isUnit},{name:"string",test:e.isString},{name:"Array",test:e.isArray},{name:"Matrix",test:e.isMatrix},{name:"DenseMatrix",test:e.isDenseMatrix},{name:"SparseMatrix",test:e.isSparseMatrix},{name:"Range",test:e.isRange},{name:"Index",test:e.isIndex},{name:"boolean",test:e.isBoolean},{name:"ResultSet",test:e.isResultSet},{name:"Help",test:e.isHelp},{name:"function",test:e.isFunction},{name:"Date",test:e.isDate},{name:"RegExp",test:e.isRegExp},{name:"null",test:e.isNull},{name:"undefined",test:e.isUndefined},{name:"OperatorNode",test:e.isOperatorNode},{name:"ConstantNode",test:e.isConstantNode},{name:"SymbolNode",test:e.isSymbolNode},{name:"ParenthesisNode",test:e.isParenthesisNode},{name:"FunctionNode",test:e.isFunctionNode},{name:"FunctionAssignmentNode",test:e.isFunctionAssignmentNode},{name:"ArrayNode",test:e.isArrayNode},{name:"AssignmentNode",test:e.isAssignmentNode},{name:"BlockNode",test:e.isBlockNode},{name:"ConditionalNode",test:e.isConditionalNode},{name:"IndexNode",test:e.isIndexNode},{name:"RangeNode",test:e.isRangeNode},{name:"Node",test:e.isNode},{name:"Object",test:e.isObject}],t.conversions=[{from:"number",to:"BigNumber",convert:function(t){if(i(t)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e.BigNumber(t)}},{from:"number",to:"Complex",convert:function(t){return new e.Complex(t,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(t){return new e.Complex(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return new e.Complex(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){if(new e.Fraction(t).valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return new e.Fraction(t)}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(t){try{return new e.BigNumber(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){try{return new e.Fraction(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){try{return new e.Complex(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(t){return new e.BigNumber(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return new e.Fraction(+t)}},{from:"boolean",to:"string",convert:function(e){return+e}},{from:"Array",to:"Matrix",convert:function(t){return new e.DenseMatrix(t)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],t}},30719:e=>{"use strict";function t(e,n,r,i){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=n,this.min=r,this.max=i,this.message="Wrong number of arguments in function "+e+" ("+n+" provided, "+r+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}t.prototype=new Error,t.prototype.constructor=Error,t.prototype.name="ArgumentsError",t.prototype.isArgumentsError=!0,e.exports=t},44499:e=>{"use strict";function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=n,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(n)?"["+n.join(", ")+"]":n)+")",this.stack=(new Error).stack}t.prototype=new RangeError,t.prototype.constructor=RangeError,t.prototype.name="DimensionError",t.prototype.isDimensionError=!0,e.exports=t},97673:e=>{"use strict";function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=n):(this.min=n,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}t.prototype=new RangeError,t.prototype.constructor=RangeError,t.prototype.name="IndexError",t.prototype.isIndexError=!0,e.exports=t},53592:(e,t,n)=>{"use strict";var r=n(44230).object;t.name="lup",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(90727)),l=i(n(70464)),u=i(n(81616)),c=i(n(98640)),d=i(n(25394)),f=i(n(64692)),p=i(n(86161)),h=i(n(26303)),m=e.SparseMatrix,g=e.DenseMatrix,y=e.Spa,v=o("lup",{DenseMatrix:function(e){return b(e)},SparseMatrix:function(e){return _(e)},Array:function(e){var t=a(e),n=b(t);return{L:n.L.valueOf(),U:n.U.valueOf(),p:n.p}}}),b=function(e){var t,n,i,o=e._size[0],a=e._size[1],h=Math.min(o,a),m=r.clone(e._data),y=[],v=[o,h],b=[],_=[h,a],w=[];for(t=0;t<o;t++)w[t]=t;for(n=0;n<a;n++){if(n>0)for(t=0;t<o;t++){var E=Math.min(t,n),S=0;for(i=0;i<E;i++)S=l(S,c(m[t][i],m[i][n]));m[t][n]=d(m[t][n],S)}var x=n,k=0,T=0;for(t=n;t<o;t++){var O=m[t][n],C=s(O);f(C,k)&&(x=t,k=C,T=O)}if(n!==x&&(w[n]=[w[x],w[x]=w[n]][0],g._swapRows(n,x,m)),n<o)for(t=n+1;t<o;t++){var A=m[t][n];p(A,0)||(m[t][n]=u(m[t][n],T))}}for(n=0;n<a;n++)for(t=0;t<o;t++)0===n&&(t<a&&(b[t]=[]),y[t]=[]),t<n?(t<a&&(b[t][n]=m[t][n]),n<o&&(y[t][n]=0)):t!==n?(t<a&&(b[t][n]=0),n<o&&(y[t][n]=m[t][n])):(t<a&&(b[t][n]=m[t][n]),n<o&&(y[t][n]=1));var P=new g({data:y,size:v}),M=new g({data:b,size:_}),D=[];for(t=0,h=w.length;t<h;t++)D[w[t]]=t;return{L:P,U:M,p:D,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}},_=function(e){var t,n,r,i=e._size[0],o=e._size[1],a=Math.min(i,o),l=e._values,d=e._index,g=e._ptr,v=[],b=[],_=[],w=[i,a],E=[],S=[],x=[],k=[a,o],T=[],O=[];for(t=0;t<i;t++)T[t]=t,O[t]=t;var C,A,P,M;for(n=0;n<o;n++){var D=new y;n<i&&(_.push(v.length),v.push(1),b.push(n)),x.push(E.length);var R=g[n],L=g[n+1];for(r=R;r<L;r++)t=d[r],D.set(T[t],l[r]);n>0&&D.forEach(0,n-1,(function(e,t){m._forEachRow(e,v,b,_,(function(n,r){n>e&&D.accumulate(n,h(c(r,t)))}))}));var N=n,I=D.get(n),j=s(I);D.forEach(n+1,i-1,(function(e,t){var n=s(t);f(n,j)&&(N=e,j=n,I=t)})),n!==N&&(m._swapRows(n,N,w[1],v,b,_),m._swapRows(n,N,k[1],E,S,x),D.swap(n,N),A=N,P=void 0,M=void 0,P=O[C=n],M=O[A],T[P]=A,T[M]=C,O[C]=M,O[A]=P),D.forEach(0,i-1,(function(e,t){e<=n?(E.push(t),S.push(e)):(t=u(t,I),p(t,0)||(v.push(t),b.push(e)))}))}return x.push(E.length),_.push(v.length),{L:new m({values:v,index:b,ptr:_,size:w}),U:new m({values:E,index:S,ptr:x,size:k}),p:T,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}};return v}},90727:(e,t,n)=>{"use strict";var r=n(56472);t.name="abs",t.factory=function(e,t,n,i){var o=i("abs",{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return r(e,o,!0)},Unit:function(e){return e.abs()}});return o.toTex={1:"\\left|${args[0]}\\right|"},o}},76113:(e,t,n)=>{"use strict";var r=n(81280).extend;t.name="add",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(70464)),l=n(67505),u=i(n(42898)),c=i(n(29449)),d=i(n(34716)),f=i(n(95147)),p=i(n(29910)),h=o("add",r({"DenseMatrix, DenseMatrix":function(e,t){return f(e,t,s)},"DenseMatrix, SparseMatrix":function(e,t){return u(e,t,s,!1)},"SparseMatrix, DenseMatrix":function(e,t){return u(t,e,s,!0)},"SparseMatrix, SparseMatrix":function(e,t){return c(e,t,s)},"Array, Array":function(e,t){return h(a(e),a(t)).valueOf()},"Array, Matrix":function(e,t){return h(a(e),t)},"Matrix, Array":function(e,t){return h(e,a(t))},"DenseMatrix, any":function(e,t){return p(e,t,s,!1)},"SparseMatrix, any":function(e,t){return d(e,t,s,!1)},"any, DenseMatrix":function(e,t){return p(t,e,s,!0)},"any, SparseMatrix":function(e,t){return d(t,e,s,!0)},"Array, any":function(e,t){return p(a(e),t,s,!1).valueOf()},"any, Array":function(e,t){return p(a(t),e,s,!0).valueOf()},"any, any":s,"any, any, ...any":function(e,t,n){for(var r=h(e,t),i=0;i<n.length;i++)r=h(r,n[i]);return r}},s.signatures));return h.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},h}},70464:(e,t)=>{"use strict";t.factory=function(e,t,n,r){var i=r("add",{"number, number":function(e,t){return e+t},"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=i(n.value,t.value),n.fixPrefix=!1,n}});return i}},99610:(e,t,n)=>{"use strict";var r=n(81280).extend;t.name="divide",t.factory=function(e,t,i,o){var a=i(n(81616)),s=i(n(73322)),l=i(n(91531)),u=i(n(16140)),c=i(n(85222)),d=i(n(29910)),f=o("divide",r({"Array | Matrix, Array | Matrix":function(e,t){return s(e,l(t))},"DenseMatrix, any":function(e,t){return d(e,t,a,!1)},"SparseMatrix, any":function(e,t){return c(e,t,a,!1)},"Array, any":function(e,t){return d(u(e),t,a,!1).valueOf()},"any, Array | Matrix":function(e,t){return s(e,l(t))}},a.signatures));return f.toTex={2:"\\frac{${args[0]}}{${args[1]}}"},f}},81616:(e,t,n)=>{"use strict";t.factory=function(e,t,r,i){var o=r(n(98640)),a=i("divide",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var n=e.clone();return n.value=a(null===n.value?n._normalize(1):n.value,t),n},"number | Fraction | BigNumber, Unit":function(e,t){var n=t.pow(-1);return n.value=o(null===n.value?n._normalize(1):n.value,e),n},"Unit, Unit":function(e,t){return e.divide(t)}});return a}},73322:(e,t,n)=>{"use strict";var r=n(81280).extend,i=n(62e3);t.name="multiply",t.factory=function(e,t,o,a){var s=n(67505),l=o(n(16140)),u=o(n(70464)),c=o(n(98640)),d=o(n(86161)),f=o(n(85222)),p=o(n(29910)),h=e.DenseMatrix,m=e.SparseMatrix,g=a("multiply",r({"Array, Array":function(t,n){y(i.size(t),i.size(n));var r=g(l(t),l(n));return e.isMatrix(r)?r.valueOf():r},"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();return y(n,r),1===n.length?1===r.length?v(e,t,n[0]):b(e,t):1===r.length?w(e,t):E(e,t)},"Matrix, Array":function(e,t){return g(e,l(t))},"Array, Matrix":function(e,t){return g(l(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return f(e,t,c,!1)},"DenseMatrix, any":function(e,t){return p(e,t,c,!1)},"any, SparseMatrix":function(e,t){return f(t,e,c,!0)},"any, DenseMatrix":function(e,t){return p(t,e,c,!0)},"Array, any":function(e,t){return p(l(e),t,c,!1).valueOf()},"any, Array":function(e,t){return p(l(t),e,c,!0).valueOf()},"any, any":c,"any, any, ...any":function(e,t,n){for(var r=g(e,t),i=0;i<n.length;i++)r=g(r,n[i]);return r}},c.signatures)),y=function(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}},v=function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,i=e._data,o=e._datatype,s=t._data,l=t._datatype,d=u,f=c;o&&l&&o===l&&"string"==typeof o&&(r=o,d=a.find(u,[r,r]),f=a.find(c,[r,r]));for(var p=f(i[0],s[0]),h=1;h<n;h++)p=d(p,f(i[h],s[h]));return p},b=function(e,t){if("dense"!==t.storage())throw new Error("Support for SparseMatrix not implemented");return _(e,t)},_=function(e,t){var n,r=e._data,i=e._size,o=e._datatype,s=t._data,l=t._size,d=t._datatype,f=i[0],p=l[1],m=u,g=c;o&&d&&o===d&&"string"==typeof o&&(n=o,m=a.find(u,[n,n]),g=a.find(c,[n,n]));for(var y=[],v=0;v<p;v++){for(var b=g(r[0],s[0][v]),_=1;_<f;_++)b=m(b,g(r[_],s[_][v]));y[v]=b}return new h({data:y,size:[p],datatype:n})},w=a("_multiplyMatrixVector",{"DenseMatrix, any":function(e,t){var n,r=e._data,i=e._size,o=e._datatype,s=t._data,l=t._datatype,d=i[0],f=i[1],p=u,m=c;o&&l&&o===l&&"string"==typeof o&&(n=o,p=a.find(u,[n,n]),m=a.find(c,[n,n]));for(var g=[],y=0;y<d;y++){for(var v=r[y],b=m(v[0],s[0]),_=1;_<f;_++)b=p(b,m(v[_],s[_]));g[y]=b}return new h({data:g,size:[d],datatype:n})},"SparseMatrix, any":function(e,t){var n=e._values,r=e._index,i=e._ptr,o=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=t._data,f=t._datatype,p=e._size[0],h=t._size[0],g=[],y=[],v=[],b=u,_=c,w=d,E=0;o&&f&&o===f&&"string"==typeof o&&(s=o,b=a.find(u,[s,s]),_=a.find(c,[s,s]),w=a.find(d,[s,s]),E=a.convert(0,s));var S=[],x=[];v[0]=0;for(var k=0;k<h;k++){var T=l[k];if(!w(T,E))for(var O=i[k],C=i[k+1],A=O;A<C;A++){var P=r[A];x[P]?S[P]=b(S[P],_(T,n[A])):(x[P]=!0,y.push(P),S[P]=_(T,n[A]))}}for(var M=y.length,D=0;D<M;D++){var R=y[D];g[D]=S[R]}return v[1]=y.length,new m({values:g,index:y,ptr:v,size:[p,1],datatype:s})}}),E=a("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,t){var n,r=e._data,i=e._size,o=e._datatype,s=t._data,l=t._size,d=t._datatype,f=i[0],p=i[1],m=l[1],g=u,y=c;o&&d&&o===d&&"string"==typeof o&&(n=o,g=a.find(u,[n,n]),y=a.find(c,[n,n]));for(var v=[],b=0;b<f;b++){var _=r[b];v[b]=[];for(var w=0;w<m;w++){for(var E=y(_[0],s[0][w]),S=1;S<p;S++)E=g(E,y(_[S],s[S][w]));v[b][w]=E}}return new h({data:v,size:[f,m],datatype:n})},"DenseMatrix, SparseMatrix":function(e,t){var n=e._data,r=e._size,i=e._datatype,o=t._values,s=t._index,l=t._ptr,f=t._size,p=t._datatype;if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var h,g=r[0],y=f[1],v=u,b=c,_=d,w=0;i&&p&&i===p&&"string"==typeof i&&(h=i,v=a.find(u,[h,h]),b=a.find(c,[h,h]),_=a.find(d,[h,h]),w=a.convert(0,h));for(var E=[],S=[],x=[],k=new m({values:E,index:S,ptr:x,size:[g,y],datatype:h}),T=0;T<y;T++){x[T]=S.length;var O=l[T],C=l[T+1];if(C>O)for(var A=0,P=0;P<g;P++){for(var M,D=P+1,R=O;R<C;R++){var L=s[R];A!==D?(M=b(n[P][L],o[R]),A=D):M=v(M,b(n[P][L],o[R]))}A!==D||_(M,w)||(S.push(P),E.push(M))}}return x[y]=S.length,k},"SparseMatrix, DenseMatrix":function(e,t){var n=e._values,r=e._index,i=e._ptr,o=e._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=t._data,f=t._datatype,p=e._size[0],h=t._size[0],g=t._size[1],y=u,v=c,b=d,_=0;o&&f&&o===f&&"string"==typeof o&&(s=o,y=a.find(u,[s,s]),v=a.find(c,[s,s]),b=a.find(d,[s,s]),_=a.convert(0,s));for(var w=[],E=[],S=[],x=new m({values:w,index:E,ptr:S,size:[p,g],datatype:s}),k=[],T=[],O=0;O<g;O++){S[O]=E.length;for(var C=O+1,A=0;A<h;A++){var P=l[A][O];if(!b(P,_))for(var M=i[A],D=i[A+1],R=M;R<D;R++){var L=r[R];T[L]!==C?(T[L]=C,E.push(L),k[L]=v(P,n[R])):k[L]=y(k[L],v(P,n[R]))}}for(var N=S[O],I=E.length,j=N;j<I;j++){var B=E[j];w[j]=k[B]}}return S[g]=E.length,x},"SparseMatrix, SparseMatrix":function(e,t){var n,r=e._values,i=e._index,o=e._ptr,s=e._datatype,l=t._values,d=t._index,f=t._ptr,p=t._datatype,h=e._size[0],g=t._size[1],y=r&&l,v=u,b=c;s&&p&&s===p&&"string"==typeof s&&(n=s,v=a.find(u,[n,n]),b=a.find(c,[n,n]));for(var _,w,E,S,x,k,T,O,C=y?[]:void 0,A=[],P=[],M=new m({values:C,index:A,ptr:P,size:[h,g],datatype:n}),D=y?[]:void 0,R=[],L=0;L<g;L++){P[L]=A.length;var N=L+1;for(x=f[L],k=f[L+1],S=x;S<k;S++)if(O=d[S],y)for(w=o[O],E=o[O+1],_=w;_<E;_++)T=i[_],R[T]!==N?(R[T]=N,A.push(T),D[T]=b(l[S],r[_])):D[T]=v(D[T],b(l[S],r[_]));else for(w=o[O],E=o[O+1],_=w;_<E;_++)T=i[_],R[T]!==N&&(R[T]=N,A.push(T));if(y)for(var I=P[L],j=A.length,B=I;B<j;B++){var F=A[B];C[B]=D[F]}}return P[g]=A.length,M}});return g.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},g}},98640:(e,t)=>{"use strict";t.factory=function(e,t,n,r){var i=r("multiplyScalar",{"number, number":function(e,t){return e*t},"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):i(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):i(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}});return i}},56356:(e,t,n)=>{"use strict";var r=n(56472);t.name="sqrt",t.factory=function(e,t,n,i){var o=i("sqrt",{number:a,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():a(e.toNumber())},"Array | Matrix":function(e){return r(e,o,!0)},Unit:function(e){return e.pow(.5)}});function a(n){return n>=0||t.predictable?Math.sqrt(n):new e.Complex(n,0).sqrt()}return o.toTex={1:"\\sqrt{${args[0]}}"},o}},25394:(e,t,n)=>{"use strict";var r=n(44499);function i(e,t){var n=e.size(),i=t.size();if(n.length!==i.length)throw new r(n.length,i.length)}t.name="subtract",t.factory=function(e,t,r,o){var a=n(67505),s=r(n(16140)),l=r(n(70464)),u=r(n(26303)),c=r(n(42898)),d=r(n(54382)),f=r(n(5387)),p=r(n(34716)),h=r(n(95147)),m=r(n(29910)),g=o("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=g(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return i(e,t),f(e,t,g)},"SparseMatrix, DenseMatrix":function(e,t){return i(e,t),d(t,e,g,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t),c(e,t,g,!1)},"DenseMatrix, DenseMatrix":function(e,t){return i(e,t),h(e,t,g)},"Array, Array":function(e,t){return g(s(e),s(t)).valueOf()},"Array, Matrix":function(e,t){return g(s(e),t)},"Matrix, Array":function(e,t){return g(e,s(t))},"SparseMatrix, any":function(e,t){return p(e,u(t),l)},"DenseMatrix, any":function(e,t){return m(e,t,g)},"any, SparseMatrix":function(e,t){return p(t,e,g,!0)},"any, DenseMatrix":function(e,t){return m(t,e,g,!0)},"Array, any":function(e,t){return m(s(e),t,g,!1).valueOf()},"any, Array":function(e,t){return m(s(t),e,g,!0).valueOf()}});return g.toTex={2:"\\left(${args[0]}"+a.operators.subtract+"${args[1]}\\right)"},g}},26303:(e,t,n)=>{"use strict";var r=n(56472);t.name="unaryMinus",t.factory=function(e,t,i,o){var a=n(67505),s=o("unaryMinus",{number:function(e){return-e},Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=s(e.value),t},"Array | Matrix":function(e){return r(e,s,!0)}});return s.toTex={1:a.operators.unaryMinus+"\\left(${args[0]}\\right)"},s}},70360:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(74186).isInteger,o=n(62e3),a=n(97673),s=n(44499);function l(e,t,n,r){if(r<n){if(e.length!=t.length)throw new s(e.length,t.length);for(var i=[],o=0;o<e.length;o++)i[o]=l(e[o],t[o],n,r+1);return i}return e.concat(t)}t.name="concat",t.factory=function(e,t,u,c){var d=u(n(16140)),f=c("concat",{"...Array | Matrix | number | BigNumber":function(t){var n,u,c=t.length,f=-1,p=!1,h=[];for(n=0;n<c;n++){var m=t[n];if(e.isMatrix(m)&&(p=!0),e.isNumber(m)||e.isBigNumber(m)){if(n!==c-1)throw new Error("Dimension must be specified as last argument");if(u=f,f=m.valueOf(),!i(f))throw new TypeError("Integer number expected for dimension");if(f<0||n>0&&f>u)throw new a(f,u+1)}else{var g=r(m).valueOf(),y=o.size(g);if(h[n]=g,u=f,f=y.length-1,n>0&&f!=u)throw new s(u+1,f+1)}}if(0==h.length)throw new SyntaxError("At least one matrix expected");for(var v=h.shift();h.length;)v=l(v,h.shift(),f,0);return p?d(v):v},"...string":function(e){return e.join("")}});return f.toTex=void 0,f}},52575:(e,t,n)=>{"use strict";var r=n(62e3);t.name="cross",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(25394)),l=i(n(73322)),u=o("cross",{"Matrix, Matrix":function(e,t){return a(c(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return a(c(e.toArray(),t))},"Array, Matrix":function(e,t){return a(c(e,t.toArray()))},"Array, Array":c});return u.toTex={2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},u;function c(e,t){var n=Math.max(r.size(e).length,r.size(t).length);e=r.squeeze(e),t=r.squeeze(t);var i=r.size(e),o=r.size(t);if(1!=i.length||1!=o.length||3!=i[0]||3!=o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+i.join(", ")+"], B = ["+o.join(", ")+"])");var a=[s(l(e[1],t[2]),l(e[2],t[1])),s(l(e[2],t[0]),l(e[0],t[2])),s(l(e[0],t[1]),l(e[1],t[0]))];return n>1?[a]:a}}},6009:(e,t,n)=>{"use strict";var r=n(44230),i=r.object,o=r.string;t.name="det",t.factory=function(e,t,r,a){var s=r(n(16140)),l=(r(n(76113)),r(n(25394))),u=r(n(73322)),c=r(n(26303)),d=r(n(53592)),f=a("det",{any:function(e){return i.clone(e)},"Array | Matrix":function(t){var n;switch((n=e.isMatrix(t)?t.size():Array.isArray(t)?(t=s(t)).size():[]).length){case 0:return i.clone(t);case 1:if(1==n[0])return i.clone(t.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");case 2:var r=n[0],a=n[1];if(r==a)return function(e,t,n){if(1==t)return i.clone(e[0][0]);if(2==t)return l(u(e[0][0],e[1][1]),u(e[1][0],e[0][1]));for(var r=d(e),o=r.U[0][0],a=1;a<t;a++)o=u(o,r.U[a][a]);for(var s=0,f=(a=0,[]);;){for(;f[a];)a++;if(a>=t)break;for(var p=a,h=0;!f[r.p[p]];)f[r.p[p]]=!0,p=r.p[p],h++;h%2==0&&s++}return s%2==0?o:c(o)}(t.clone().valueOf(),r);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+o.format(n)+")")}}});return f.toTex={1:"\\det\\left(${args[0]}\\right)"},f}},46768:(e,t,n)=>{"use strict";var r=n(62e3),i=(n(81280).clone,n(74186).isInteger);t.name="diag",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("diag",{Array:function(e){return u(e,0,r.size(e),null)},"Array, number":function(e,t){return u(e,t,r.size(e),null)},"Array, BigNumber":function(e,t){return u(e,t.toNumber(),r.size(e),null)},"Array, string":function(e,t){return u(e,0,r.size(e),t)},"Array, number, string":function(e,t,n){return u(e,t,r.size(e),n)},"Array, BigNumber, string":function(e,t,n){return u(e,t.toNumber(),r.size(e),n)},Matrix:function(e){return u(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return u(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return u(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return u(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return u(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return u(e,t.toNumber(),e.size(),n)}});return l.toTex=void 0,l;function u(t,n,r,o){if(!i(n))throw new TypeError("Second parameter in function diag must be an integer");var a=n>0?n:0,l=n<0?-n:0;switch(r.length){case 1:return function(t,n,r,i,o,a){var s=[i+o,i+a],l=e.Matrix.storage(r||"dense").diagonal(s,t,n);return null!==r?l:l.valueOf()}(t,n,o,r[0],l,a);case 2:return function(t,n,r,i,o,a){if(e.isMatrix(t)){var l=t.diagonal(n);return null!==r?r!==l.storage()?s(l,r):l:l.valueOf()}for(var u=Math.min(i[0]-o,i[1]-a),c=[],d=0;d<u;d++)c[d]=t[d+o][d+a];return null!==r?s(c):c}(t,n,o,r,l,a)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}},90019:(e,t,n)=>{"use strict";var r=n(62e3).size;t.name="dot",t.factory=function(e,t,i,o){var a=i(n(76113)),s=i(n(73322)),l=o("dot",{"Matrix, Matrix":function(e,t){return u(e.toArray(),t.toArray())},"Matrix, Array":function(e,t){return u(e.toArray(),t)},"Array, Matrix":function(e,t){return u(e,t.toArray())},"Array, Array":u});return l.toTex={2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},l;function u(e,t){var n=r(e),i=r(t),o=n[0];if(1!==n.length||1!==i.length)throw new RangeError("Vector expected");if(n[0]!=i[0])throw new RangeError("Vectors must have equal length ("+n[0]+" != "+i[0]+")");if(0==o)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var l=0,u=0;u<o;u++)l=a(l,s(e[u],t[u]));return l}}},8981:(e,t,n)=>{"use strict";var r=n(70795).format;t.name="expm",t.factory=function(e,t,i,o){var a=i(n(90727)),s=i(n(76113)),l=i(n(50088)),u=i(n(91531)),c=i(n(73322)),d=e.SparseMatrix,f=o("expm",{Matrix:function(t){var n=t.size();if(2!==n.length||n[0]!==n[1])throw new RangeError("Matrix must be square (size: "+r(n)+")");for(var i=n[0],o=function(e,t){for(var n=30,r=0;r<n;r++)for(var i=0;i<=r;i++){var o=r-i;if(p(e,i,o)<t)return{q:i,j:o}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(e){for(var t=e.size()[0],n=0,r=0;r<t;r++){for(var i=0,o=0;o<t;o++)i+=a(e.get([r,o]));n=Math.max(i,n)}return n}(t),1e-15),f=o.q,h=o.j,m=c(t,Math.pow(2,-h)),g=l(i),y=l(i),v=1,b=m,_=-1,w=1;w<=f;w++)w>1&&(b=c(b,m),_=-_),g=s(g,c(v=v*(f-w+1)/((2*f-w+1)*w),b)),y=s(y,c(v*_,b));var E=c(u(y),g);for(w=0;w<h;w++)E=c(E,E);return e.isSparseMatrix(t)?new d(E):E}});function p(e,t,n){for(var r=1,i=2;i<=t;i++)r*=i;var o=r;for(i=t+1;i<=2*t;i++)o*=i;var a=o*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(o*a)}return f.toTex={1:"\\exp\\left(${args[0]}\\right)"},f}},50088:(e,t,n)=>{"use strict";var r=n(62e3),i=n(74186).isInteger;t.name="eye",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("eye",{"":function(){return"Matrix"===t.matrix?s([]):[]},string:function(e){return s(e)},"number | BigNumber":function(e){return c(e,e,"Matrix"===t.matrix?"default":void 0)},"number | BigNumber, string":function(e,t){return c(e,e,t)},"number | BigNumber, number | BigNumber":function(e,n){return c(e,n,"Matrix"===t.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return c(e,t,n)},Array:function(e){return u(e)},"Array, string":function(e,t){return u(e,t)},Matrix:function(e){return u(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return u(e.valueOf(),t)}});return l.toTex=void 0,l;function u(e,t){switch(e.length){case 0:return t?s(t):[];case 1:return c(e[0],e[0],t);case 2:return c(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function c(t,n,o){var a=e.isBigNumber(t)||e.isBigNumber(n)?e.BigNumber:null;if(e.isBigNumber(t)&&(t=t.toNumber()),e.isBigNumber(n)&&(n=n.toNumber()),!i(t)||t<1)throw new Error("Parameters in function eye must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new e.BigNumber(1):1,l=a?new a(0):0,u=[t,n];if(o)return e.Matrix.storage(o).diagonal(u,s,0,l);for(var c=r.resize([],u,l),d=t<n?t:n,f=0;f<d;f++)c[f][f]=s;return c}}},31259:(e,t,n)=>{"use strict";var r=n(62e3).filter,i=n(62e3).filterRegExp,o=n(15944).maxArgumentCount;function a(e,t){var n=o(t);return r(e,(function(e,r,i){return 1===n?t(e):2===n?t(e,[r]):t(e,[r],i)}))}t.name="filter",t.factory=function(e,t,r,o){var s=r(n(16140)),l=o("filter",{"Array, function":a,"Matrix, function":function(e,t){return s(a(e.toArray(),t))},"Array, RegExp":i,"Matrix, RegExp":function(e,t){return s(i(e.toArray(),t))}});return l.toTex=void 0,l}},76438:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(62e3).flatten;t.name="flatten",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("flatten",{Array:function(e){return i(r(e))},Matrix:function(e){var t=i(r(e.toArray()));return s(t)}});return l.toTex=void 0,l}},65379:(e,t,n)=>{"use strict";var r=n(15944).maxArgumentCount,i=n(62e3).forEach;function o(e,t){var n=r(t),o=function(r,a){Array.isArray(r)?i(r,(function(e,t){o(e,a.concat(t))})):1===n?t(r):2===n?t(r,a):t(r,a,e)};o(e,[])}t.name="forEach",t.factory=function(e,t,n,r){var i=r("forEach",{"Array, function":o,"Matrix, function":function(e,t){return e.forEach(t)}});return i.toTex=void 0,i}},27638:(e,t,n)=>{"use strict";e.exports=[n(70360),n(52575),n(6009),n(46768),n(90019),n(50088),n(8981),n(31259),n(76438),n(65379),n(91531),n(74977),n(34565),n(566),n(65603),n(67692),n(85433),n(63566),n(15693),n(84053),n(67116),n(70539),n(39171),n(5631),n(30778),n(18002)]},91531:(e,t,n)=>{"use strict";var r=n(44230);t.name="inv",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(81616)),l=i(n(70464)),u=i(n(73322)),c=i(n(26303)),d=i(n(6009)),f=i(n(50088)),p=i(n(90727)),h=o("inv",{"Array | Matrix":function(t){var n=e.isMatrix(t)?t.size():r.array.size(t);switch(n.length){case 1:if(1==n[0])return e.isMatrix(t)?a([s(1,t.valueOf()[0])]):[s(1,t[0])];throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");case 2:var i=n[0],o=n[1];if(i==o)return e.isMatrix(t)?a(m(t.valueOf(),i,o),t.storage()):m(t,i,o);throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+r.string.format(n)+")")}},any:function(e){return s(1,e)}});function m(e,t,n){var r,i,o,a,h;if(1==t){if(0==(a=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[s(1,a)]]}if(2==t){var m=d(e);if(0==m)throw Error("Cannot calculate inverse, determinant is zero");return[[s(e[1][1],m),s(c(e[0][1]),m)],[s(c(e[1][0]),m),s(e[0][0],m)]]}var g=e.concat();for(r=0;r<t;r++)g[r]=g[r].concat();for(var y=f(t).valueOf(),v=0;v<n;v++){var b=p(g[v][v]),_=v;for(r=v+1;r<t;)p(g[r][v])>b&&(b=p(g[r][v]),_=r),r++;if(0==b)throw Error("Cannot calculate inverse, determinant is zero");(r=_)!=v&&(h=g[v],g[v]=g[r],g[r]=h,h=y[v],y[v]=y[r],y[r]=h);var w=g[v],E=y[v];for(r=0;r<t;r++){var S=g[r],x=y[r];if(r!=v){if(0!=S[v]){for(o=s(c(S[v]),w[v]),i=v;i<n;i++)S[i]=l(S[i],u(o,w[i]));for(i=0;i<n;i++)x[i]=l(x[i],u(o,E[i]))}}else{for(o=w[v],i=v;i<n;i++)S[i]=s(S[i],o);for(i=0;i<n;i++)x[i]=s(x[i],o)}}}return y}return h.toTex={1:"\\left(${args[0]}\\right)^{-1}"},h}},74977:(e,t,n)=>{"use strict";var r=n(62e3).size;t.name="kron",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(98640));return o("kron",{"Matrix, Matrix":function(e,t){return a(l(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return a(l(e.toArray(),t))},"Array, Matrix":function(e,t){return a(l(e,t.toArray()))},"Array, Array":l});function l(e,t){if(1===r(e).length&&(e=[e]),1===r(t).length&&(t=[t]),r(e).length>2||r(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var n=[],i=[];return e.map((function(e){return t.map((function(t){return e.map((function(e){return t.map((function(t){return i.push(s(e,t))}))}),n.push(i=[]))}))}),n=[])&&n}}},34565:(e,t,n)=>{"use strict";var r=n(15944).maxArgumentCount;function i(e,t){var n=r(t),i=function(r,o){return Array.isArray(r)?r.map((function(e,t){return i(e,o.concat(t))})):1===n?t(r):2===n?t(r,o):t(r,o,e)};return i(e,[])}t.name="map",t.factory=function(e,t,n,r){var o=r("map",{"Array, function":i,"Matrix, function":function(e,t){return e.map(t)}});return o.toTex=void 0,o}},566:(e,t,n)=>{"use strict";var r=n(74186).isInteger,i=n(62e3).resize;t.name="ones",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("ones",{"":function(){return"Array"===t.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var n=e.pop();return u(e,n)}return"Array"===t.matrix?u(e):u(e,"default")},Array:u,Matrix:function(e){var t=e.storage();return u(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return u(e.valueOf(),t)}});return l.toTex=void 0,l;function u(t,n){var o=function(t){var n=!1;return t.forEach((function(t,r,i){e.isBigNumber(t)&&(n=!0,i[r]=t.toNumber())})),n}(t)?new e.BigNumber(1):1;if(function(e){e.forEach((function(e){if("number"!=typeof e||!r(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(t),n){var a=s(n);return t.length>0?a.resize(t,o):a}var l=[];return t.length>0?i(l,t,o):l}}},65603:(e,t,n)=>{"use strict";var r=n(74186).isInteger;t.name="partitionSelect",t.factory=function(e,t,i,o){var a=i(n(49170));function s(e,t){return-a(e,t)}return o("partitionSelect",{"Array | Matrix, number":function(e,t){return l(e,t,a)},"Array | Matrix, number, string":function(e,t,n){if("asc"===n)return l(e,t,a);if("desc"===n)return l(e,t,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":l});function l(t,n,i){if(!r(n)||n<0)throw new Error("k must be a non-negative integer");if(e.isMatrix(t)){if(t.size().length>1)throw new Error("Only one dimensional matrices supported");return u(t.valueOf(),n,i)}if(Array.isArray(t))return u(t,n,i)}function u(e,t,n){if(t>=e.length)throw new Error("k out of bounds");for(var r=0,i=e.length-1;r<i;){for(var o=r,a=i,s=e[Math.floor(Math.random()*(i-r+1))+r];o<a;)if(n(e[o],s)>=0){var l=e[a];e[a]=e[o],e[o]=l,--a}else++o;n(e[o],s)>0&&--o,t<=o?i=o:r=o+1}return e[t]}}},67692:(e,t,n)=>{"use strict";t.name="range",t.factory=function(e,t,r,i){var o=r(n(16140)),a=new e.BigNumber(0),s=new e.BigNumber(1),l=i("range",{string:c,"string, boolean":c,"number, number":function(e,t){return u(d(e,t,1))},"number, number, number":function(e,t,n){return u(d(e,t,n))},"number, number, boolean":function(e,t,n){return u(n?f(e,t,1):d(e,t,1))},"number, number, number, boolean":function(e,t,n,r){return u(r?f(e,t,n):d(e,t,n))},"BigNumber, BigNumber":function(e,t){return u(p(e,t,s))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return u(p(e,t,n))},"BigNumber, BigNumber, boolean":function(e,t,n){return u(n?h(e,t,s):p(e,t,s))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return u(r?h(e,t,n):p(e,t,n))}});return l.toTex=void 0,l;function u(e){return"Array"===t.matrix?e:o(e)}function c(n,r){var i=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(n);if(!i)throw new SyntaxError('String "'+n+'" is no valid range');return"BigNumber"===t.number?u((r?h:p)(new e.BigNumber(i.start),new e.BigNumber(i.end),new e.BigNumber(i.step))):u((r?f:d)(i.start,i.end,i.step))}function d(e,t,n){var r=[],i=e;if(n>0)for(;i<t;)r.push(i),i+=n;else if(n<0)for(;i>t;)r.push(i),i+=n;return r}function f(e,t,n){var r=[],i=e;if(n>0)for(;i<=t;)r.push(i),i+=n;else if(n<0)for(;i>=t;)r.push(i),i+=n;return r}function p(e,t,n){var r=[],i=e;if(n.gt(a))for(;i.lt(t);)r.push(i),i=i.plus(n);else if(n.lt(a))for(;i.gt(t);)r.push(i),i=i.plus(n);return r}function h(e,t,n){var r=[],i=e;if(n.gt(a))for(;i.lte(t);)r.push(i),i=i.plus(n);else if(n.lt(a))for(;i.gte(t);)r.push(i),i=i.plus(n);return r}}},85433:(e,t,n)=>{"use strict";n(44499);var r=n(74186).isInteger,i=n(62e3);t.name="reshape",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("reshape",{"Matrix, Array":function(e,t){return e.reshape?e.reshape(t):s(i.reshape(e.valueOf(),t))},"Array, Array":function(e,t){return t.forEach((function(e){if(!r(e))throw new TypeError("Invalid size for dimension: "+e)})),i.reshape(e,t)}});return l.toTex=void 0,l}},63566:(e,t,n)=>{"use strict";var r=n(44499),i=n(30719),o=n(74186).isInteger,a=n(70795).format,s=n(81280).clone,l=n(62e3);t.name="resize",t.factory=function(e,t,u,c){var d=u(n(16140)),f=function(n,r,o){if(2!=arguments.length&&3!=arguments.length)throw new i("resize",arguments.length,2,3);if(e.isMatrix(r)&&(r=r.valueOf()),e.isBigNumber(r[0])&&(r=r.map((function(t){return e.isBigNumber(t)?t.toNumber():t}))),e.isMatrix(n))return n.resize(r,o,!0);if("string"==typeof n)return p(n,r,o);var a=!Array.isArray(n)&&"Array"!==t.matrix;if(0==r.length){for(;Array.isArray(n);)n=n[0];return s(n)}Array.isArray(n)||(n=[n]),n=s(n);var u=l.resize(n,r,o);return a?d(u):u};return f.toTex=void 0,f;function p(e,t,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==t.length)throw new r(t.length,1);var i=t[0];if("number"!=typeof i||!o(i))throw new TypeError("Invalid size, must contain positive integers (size: "+a(t)+")");if(e.length>i)return e.substring(0,i);if(e.length<i){for(var s=e,l=0,u=i-e.length;l<u;l++)s+=n;return s}return e}}},15693:(e,t,n)=>{"use strict";var r=n(62e3);t.name="size",t.factory=function(e,t,i,o){var a=i(n(16140)),s=o("size",{Matrix:function(e){return a(e.size())},Array:r.size,string:function(e){return"Array"===t.matrix?[e.length]:a([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===t.matrix?[]:a([])}});return s.toTex=void 0,s}},84053:(e,t,n)=>{"use strict";var r=n(62e3).size;t.name="sort",t.factory=function(e,t,i,o){var a=i(n(16140)),s=i(n(49170)),l=function(e,t){return-s(e,t)},u=i(n(2142)),c=o("sort",{Array:function(e){return f(e),e.sort(s)},Matrix:function(e){return p(e),a(e.toArray().sort(s),e.storage())},"Array, function":function(e,t){return f(e),e.sort(t)},"Matrix, function":function(e,t){return p(e),a(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return f(e),e.sort(d(t))},"Matrix, string":function(e,t){return p(e),a(e.toArray().sort(d(t)),e.storage())}});function d(e){if("asc"===e)return s;if("desc"===e)return l;if("natural"===e)return u;throw new Error('String "asc", "desc", or "natural" expected')}function f(e){if(1!==r(e).length)throw new Error("One dimensional array expected")}function p(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}return c.toTex=void 0,c}},67116:(e,t,n)=>{"use strict";var r=n(62e3),i=n(67505),o=n(70795);t.name="sqrtm",t.factory=function(e,t,a,s){a(n(16140));var l=a(n(90727)),u=a(n(76113)),c=(a(n(99610)),a(n(73322))),d=a(n(56356)),f=a(n(25394)),p=a(n(91531)),h=a(n(15693)),m=a(n(18047)),g=a(n(50088)),y=s("sqrtm",{"Array | Matrix":function(t){var n=e.isMatrix(t)?t.size():r.size(t);switch(n.length){case 1:if(1==n[0])return d(t);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");case 2:if(n[0]==n[1])return b(t);throw new RangeError("Matrix must be square (size: "+o.format(n)+")")}}}),v=1e-6;function b(e){var t,n=0,r=e,i=g(h(e));do{var o=r;if(r=c(.5,u(o,p(i))),i=c(.5,u(i,p(o))),(t=m(l(f(r,o))))>v&&++n>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(t>v);return r}return y.toTex={1:"{${args[0]}}"+i.operators.pow+"{\\frac{1}{2}}"},y}},70539:(e,t,n)=>{"use strict";var r=n(81280),i=n(62e3);t.name="squeeze",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("squeeze",{Array:function(e){return i.squeeze(r.clone(e))},Matrix:function(e){var t=i.squeeze(e.toArray());return Array.isArray(t)?s(t):t},any:function(e){return r.clone(e)}});return l.toTex=void 0,l}},39171:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(62e3).validateIndex,o=n(56387).YF,a=n(56387).nI,s=n(44499);function l(e,t){if(1!==t.size().length)throw new s(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return o(e,n)}function u(e,t,n){if(1!==t.size().length)throw new s(t.size(),1);var i=t.dimension(0);if("string"!=typeof i)throw new TypeError("String expected as index to retrieve an object property");var o=r(e);return a(o,i,n),o}t.name="subset",t.factory=function(e,t,o,a){var c=o(n(16140)),d=a("subset",{"Array, Index":function(e,t){var n=c(e).subset(t);return t.isScalar()?n:n.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":l,"string, Index":function(t,n){if(!e.isIndex(n))throw new TypeError("Index expected");if(1!=n.size().length)throw new s(n.size().length,1);var r=t.length;i(n.min()[0],r),i(n.max()[0],r);var o=n.dimension(0),a="";return o.forEach((function(e){a+=t.charAt(e)})),a},"Array, Index, any":function(e,t,n){return c(r(e)).subset(t,n,void 0).valueOf()},"Array, Index, any, any":function(e,t,n,i){return c(r(e)).subset(t,n,i).valueOf()},"Matrix, Index, any":function(e,t,n){return e.clone().subset(t,n)},"Matrix, Index, any, any":function(e,t,n,r){return e.clone().subset(t,n,r)},"string, Index, string":f,"string, Index, string, string":f,"Object, Index, any":u});return d.toTex=void 0,d;function f(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!=t.size().length)throw new s(t.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var o=t.dimension(0),a=o.size()[0];if(a!=n.length)throw new s(o.size()[0],n.length);var l=e.length;i(t.min()[0]),i(t.max()[0]);for(var u=[],c=0;c<l;c++)u[c]=e.charAt(c);if(o.forEach((function(e,t){u[e]=n.charAt(t[0])})),u.length>l)for(c=l-1,a=u.length;c<a;c++)u[c]||(u[c]=r);return u.join("")}}},5631:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(70795).format;t.name="trace",t.factory=function(e,t,o,a){var s=o(n(16140)),l=o(n(76113)),u=a("trace",{Array:function(e){return c(s(e))},SparseMatrix:function(e){var t=e._values,n=e._index,r=e._ptr,o=e._size,a=o[0],s=o[1];if(a===s){var u=0;if(t.length>0)for(var c=0;c<s;c++)for(var d=r[c],f=r[c+1],p=d;p<f;p++){var h=n[p];if(h===c){u=l(u,t[p]);break}if(h>c)break}return u}throw new RangeError("Matrix must be square (size: "+i(o)+")")},DenseMatrix:c,any:r});function c(e){var t=e._size,n=e._data;switch(t.length){case 1:if(1===t[0])return r(n[0]);throw new RangeError("Matrix must be square (size: "+i(t)+")");case 2:var o=t[0];if(o===t[1]){for(var a=0,s=0;s<o;s++)a=l(a,n[s][s]);return a}throw new RangeError("Matrix must be square (size: "+i(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+i(t)+")")}}return u.toTex={1:"\\mathrm{tr}\\left(${args[0]}\\right)"},u}},30778:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(70795).format;t.name="transpose",t.factory=function(e,t,o,a){var s=n(67505),l=o(n(16140)),u=e.DenseMatrix,c=e.SparseMatrix,d=a("transpose",{Array:function(e){return d(l(e)).valueOf()},Matrix:function(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],o=n[1];if(0===o)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+i(n)+")");switch(e.storage()){case"dense":t=f(e,r,o);break;case"sparse":t=p(e,r,o)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+i(this._size)+")")}return t},any:function(e){return r(e)}}),f=function(e,t,n){for(var i,o=e._data,a=[],s=0;s<n;s++){i=a[s]=[];for(var l=0;l<t;l++)i[l]=r(o[l][s])}return new u({data:a,size:[n,t],datatype:e._datatype})},p=function(e,t,n){for(var i,o,a,s=e._values,l=e._index,u=e._ptr,d=s?[]:void 0,f=[],p=[],h=[],m=0;m<t;m++)h[m]=0;for(i=0,o=l.length;i<o;i++)h[l[i]]++;for(var g=0,y=0;y<t;y++)p.push(g),g+=h[y],h[y]=p[y];for(p.push(g),a=0;a<n;a++)for(var v=u[a],b=u[a+1],_=v;_<b;_++){var w=h[l[_]]++;f[w]=a,s&&(d[w]=r(s[_]))}return new c({values:d,index:f,ptr:p,size:[n,t],datatype:e._datatype})};return d.toTex={1:"\\left(${args[0]}\\right)"+s.operators.transpose},d}},18002:(e,t,n)=>{"use strict";var r=n(74186).isInteger,i=n(62e3).resize;t.name="zeros",t.factory=function(e,t,o,a){var s=o(n(16140)),l=a("zeros",{"":function(){return"Array"===t.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var n=e.pop();return u(e,n)}return"Array"===t.matrix?u(e):u(e,"default")},Array:u,Matrix:function(e){var t=e.storage();return u(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return u(e.valueOf(),t)}});return l.toTex=void 0,l;function u(t,n){var o=function(t){var n=!1;return t.forEach((function(t,r,i){e.isBigNumber(t)&&(n=!0,i[r]=t.toNumber())})),n}(t)?new e.BigNumber(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!r(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(t),n){var a=s(n);return t.length>0?a.resize(t,o):a}var l=[];return t.length>0?i(l,t,o):l}}},49170:(e,t,n)=>{"use strict";var r=n(74186).nearlyEqual,i=n(57901);t.name="compare",t.factory=function(e,t,o,a){var s=o(n(16140)),l=o(n(54382)),u=o(n(5387)),c=o(n(43404)),d=o(n(95147)),f=o(n(29910)),p=a("compare",{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"number, number":function(e,n){return e===n||r(e,n,t.epsilon)?0:e>n?1:-1},"BigNumber, BigNumber":function(n,r){return n.eq(r)||i(n,r,t.epsilon)?new e.BigNumber(0):new e.BigNumber(n.cmp(r))},"Fraction, Fraction":function(t,n){return new e.Fraction(t.compare(n))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return p(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,p)},"SparseMatrix, DenseMatrix":function(e,t){return l(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){return l(e,t,p,!1)},"DenseMatrix, DenseMatrix":function(e,t){return d(e,t,p)},"Array, Array":function(e,t){return p(s(e),s(t)).valueOf()},"Array, Matrix":function(e,t){return p(s(e),t)},"Matrix, Array":function(e,t){return p(e,s(t))},"SparseMatrix, any":function(e,t){return c(e,t,p,!1)},"DenseMatrix, any":function(e,t){return f(e,t,p,!1)},"any, SparseMatrix":function(e,t){return c(t,e,p,!0)},"any, DenseMatrix":function(e,t){return f(t,e,p,!0)},"Array, any":function(e,t){return f(s(e),t,p,!1).valueOf()},"any, Array":function(e,t){return f(s(t),e,p,!0).valueOf()}});return p.toTex=void 0,p}},2142:(e,t,n)=>{"use strict";var r=n(98400);t.name="compareNatural",t.factory=function(e,t,i,o){var a=i(n(79483)),s=i(n(49170)),l=s.signatures["boolean,boolean"],u=o("compareNatural",{"any, any":function(e,t){var n,i=a(e),o=a(t);if(!("number"!==i&&"BigNumber"!==i&&"Fraction"!==i||"number"!==o&&"BigNumber"!==o&&"Fraction"!==o))return"0"!==(n=s(e,t)).toString()?n>0?1:-1:r(i,o);if("Array"===i||"Matrix"===i||"Array"===o||"Matrix"===o)return 0!==(n=c(e,t))?n:r(i,o);if(i!==o)return r(i,o);if("Complex"===i)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0}(e,t);if("Unit"===i)return e.equalBase(t)?u(e.value,t.value):d(e.formatUnits(),t.formatUnits());if("boolean"===i)return l(e,t);if("string"===i)return r(e,t);if("Object"===i)return function(e,t){var n=Object.keys(e),i=Object.keys(t);n.sort(r),i.sort(r);var o=d(n,i);if(0!==o)return o;for(var a=0;a<n.length;a++){var s=u(e[n[a]],t[i[a]]);if(0!==s)return s}return 0}(e,t);if("null"===i)return 0;if("undefined"===i)return 0;throw new TypeError('Unsupported type of value "'+i+'"')}});function c(t,n){return e.isSparseMatrix(t)&&e.isSparseMatrix(n)?d(t.toJSON().values,n.toJSON().values):e.isSparseMatrix(t)?c(t.toArray(),n):e.isSparseMatrix(n)?c(t,n.toArray()):e.isDenseMatrix(t)?c(t.toJSON().data,n):e.isDenseMatrix(n)?c(t,n.toJSON().data):Array.isArray(t)?Array.isArray(n)?d(t,n):c(t,[n]):c([t],n)}function d(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++){var i=u(e[n],t[n]);if(0!==i)return i}return e.length>t.length?1:e.length<t.length?-1:0}return u.toTex=void 0,u}},86161:(e,t,n)=>{"use strict";var r=n(74186).nearlyEqual,i=n(57901);t.factory=function(e,t,n,o){var a=o("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,n){return e===n||r(e,n,t.epsilon)},"BigNumber, BigNumber":function(e,n){return e.eq(n)||i(e,n,t.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return e.equals(t)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return a(e.value,t.value)}});return a}},64692:(e,t,n)=>{"use strict";var r=n(74186).nearlyEqual,i=n(57901);t.name="larger",t.factory=function(e,t,o,a){var s=o(n(16140)),l=o(n(54382)),u=o(n(74078)),c=o(n(43404)),d=o(n(95147)),f=o(n(29910)),p=n(67505),h=a("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,n){return e>n&&!r(e,n,t.epsilon)},"BigNumber, BigNumber":function(e,n){return e.gt(n)&&!i(e,n,t.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return h(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,h)},"SparseMatrix, DenseMatrix":function(e,t){return l(t,e,h,!0)},"DenseMatrix, SparseMatrix":function(e,t){return l(e,t,h,!1)},"DenseMatrix, DenseMatrix":function(e,t){return d(e,t,h)},"Array, Array":function(e,t){return h(s(e),s(t)).valueOf()},"Array, Matrix":function(e,t){return h(s(e),t)},"Matrix, Array":function(e,t){return h(e,s(t))},"SparseMatrix, any":function(e,t){return c(e,t,h,!1)},"DenseMatrix, any":function(e,t){return f(e,t,h,!1)},"any, SparseMatrix":function(e,t){return c(t,e,h,!0)},"any, DenseMatrix":function(e,t){return f(t,e,h,!0)},"Array, any":function(e,t){return f(s(e),t,h,!1).valueOf()},"any, Array":function(e,t){return f(s(t),e,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.larger+"${args[1]}\\right)"},h}},57997:(e,t,n)=>{"use strict";var r=n(74186).nearlyEqual,i=n(57901);t.name="smaller",t.factory=function(e,t,o,a){var s=o(n(16140)),l=o(n(54382)),u=o(n(74078)),c=o(n(43404)),d=o(n(95147)),f=o(n(29910)),p=n(67505),h=a("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,n){return e<n&&!r(e,n,t.epsilon)},"BigNumber, BigNumber":function(e,n){return e.lt(n)&&!i(e,n,t.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return h(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,h)},"SparseMatrix, DenseMatrix":function(e,t){return l(t,e,h,!0)},"DenseMatrix, SparseMatrix":function(e,t){return l(e,t,h,!1)},"DenseMatrix, DenseMatrix":function(e,t){return d(e,t,h)},"Array, Array":function(e,t){return h(s(e),s(t)).valueOf()},"Array, Matrix":function(e,t){return h(s(e),t)},"Matrix, Array":function(e,t){return h(e,s(t))},"SparseMatrix, any":function(e,t){return c(e,t,h,!1)},"DenseMatrix, any":function(e,t){return f(e,t,h,!1)},"any, SparseMatrix":function(e,t){return c(t,e,h,!0)},"any, DenseMatrix":function(e,t){return f(t,e,h,!0)},"Array, any":function(e,t){return f(s(e),t,h,!1).valueOf()},"any, Array":function(e,t){return f(s(t),e,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.smaller+"${args[1]}\\right)"},h}},18047:(e,t,n)=>{"use strict";var r=n(17877),i=n(31266),o=n(64722);t.name="max",t.factory=function(e,t,a,s){var l=a(n(64692)),u=a(n(31372)),c=s("max",{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(e,t){return i(e,t.valueOf(),d)},"...":function(e){if(o(e))throw new TypeError("Scalar values expected in function max");return f(e)}});return c.toTex="\\max\\left(${args}\\right)",c;function d(e,t){try{return l(e,t)?e:t}catch(e){throw u(e,"max",t)}}function f(e){var t=void 0;if(r(e,(function(e){try{(void 0===t||l(e,t))&&(t=e)}catch(t){throw u(t,"max",e)}})),void 0===t)throw new Error("Cannot calculate max of an empty array");return t}}},31372:(e,t,n)=>{"use strict";t.factory=function(e,t,r,i){var o=r(n(79483));return function(e,t,n){var r;return-1!==String(e).indexOf("Unexpected type")?(r=arguments.length>2?" (type: "+o(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):-1!==String(e).indexOf("complex numbers")?(r=arguments.length>2?" (type: "+o(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}}},79483:(e,t)=>{"use strict";t.name="typeof",t.factory=function(e,t,n,r){var i=r("_typeof",{any:function(t){var n=typeof t;return"object"===n?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":e.isBigNumber(t)?"BigNumber":e.isComplex(t)?"Complex":e.isFraction(t)?"Fraction":e.isMatrix(t)?"Matrix":e.isUnit(t)?"Unit":e.isIndex(t)?"Index":e.isRange(t)?"Range":e.isResultSet(t)?"ResultSet":e.isNode(t)?t.type:e.isChain(t)?"Chain":e.isHelp(t)?"Help":"Object":"function"===n?"Function":n}});return i.toTex=void 0,i}},20908:(e,t,n)=>{"use strict";var r=n(44230),i=n(44499),o=r.string,a=r.array,s=r.object,l=r.number,u=Array.isArray,c=l.isNumber,d=l.isInteger,f=o.isString,p=a.validateIndex;t.name="DenseMatrix",t.path="type",t.factory=function(e,t,l,h){var m=l(n(36018));function g(t,n){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(e.isMatrix(t))"DenseMatrix"===t.type?(this._data=s.clone(t._data),this._size=s.clone(t._size),this._datatype=n||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=n||t._datatype);else if(t&&u(t.data)&&u(t.size))this._data=t.data,this._size=t.size,this._datatype=n||t.datatype;else if(u(t))this._data=S(t),this._size=a.size(this._data),a.validate(this._data,this._size),this._datatype=n;else{if(t)throw new TypeError("Unsupported type of data ("+r.types.type(t)+")");this._data=[],this._size=[0],this._datatype=n}}function y(t,n){if(!e.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return t.get(n.min());var r=n.size();if(r.length!=t._size.length)throw new i(r.length,t._size.length);for(var o=n.min(),a=n.max(),s=0,l=t._size.length;s<l;s++)p(o[s],t._size[s]),p(a[s],t._size[s]);return new g(v(t._data,n,r.length,0),t._datatype)}function v(e,t,n,r){var i=r===n-1,o=t.dimension(r);return i?o.map((function(t){return p(t,e.length),e[t]})).valueOf():o.map((function(i){return p(i,e.length),v(e[i],t,n,r+1)})).valueOf()}function b(t,n,r,o){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(e.isMatrix(r)?(l=r.size(),r=r.valueOf()):l=a.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");t.set(n.min(),r,o)}else{if(u.length<t._size.length)throw new i(u.length,t._size.length,"<");if(l.length<u.length){for(var d=0,f=0;1===u[d]&&1===l[d];)d++;for(;1===u[d];)f++,d++;r=a.unsqueeze(r,u.length,f,l)}if(!s.deepEqual(u,l))throw new i(u,l,">");E(t,n.max().map((function(e){return e+1})),o);var p=u.length;_(t._data,n,r,p,0)}return t}function _(e,t,n,r,i){var o=i===r-1,a=t.dimension(i);o?a.forEach((function(t,r){p(t),e[t]=n[r[0]]})):a.forEach((function(o,a){p(o),_(e[o],t,n[a[0]],r,i+1)}))}g.prototype=new m,g.prototype.type="DenseMatrix",g.prototype.isDenseMatrix=!0,g.prototype.storage=function(){return"dense"},g.prototype.datatype=function(){return this._datatype},g.prototype.create=function(e,t){return new g(e,t)},g.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return y(this,e);case 2:case 3:return b(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},g.prototype.get=function(e){if(!u(e))throw new TypeError("Array expected");if(e.length!=this._size.length)throw new i(e.length,this._size.length);for(var t=0;t<e.length;t++)p(e[t],this._size[t]);for(var n=this._data,r=0,o=e.length;r<o;r++){var a=e[r];p(a,n.length),n=n[a]}return n},g.prototype.set=function(e,t,n){if(!u(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new i(e.length,this._size.length,"<");var r,o,a;E(this,e.map((function(e){return e+1})),n);var s=this._data;for(r=0,o=e.length-1;r<o;r++)a=e[r],p(a,s.length),s=s[a];return a=e[e.length-1],p(a,s.length),s[a]=t,this},g.prototype.resize=function(e,t,n){if(!u(e))throw new TypeError("Array expected");var r=n?this.clone():this;return w(r,e,t)};var w=function(e,t,n){if(0===t.length){for(var r=e._data;u(r);)r=r[0];return r}return e._size=t.slice(0),e._data=a.resize(e._data,e._size,n),e};function E(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var o=0,a=t.length;o<a;o++)t[o]>r[o]&&(r[o]=t[o],i=!0);i&&w(e,r,n)}function S(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];u(r)?e[t]=S(r):r&&!0===r.isMatrix&&(e[t]=S(r.valueOf()))}return e}return g.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=a.reshape(n._data,e),n._size=e.slice(0),n},g.prototype.clone=function(){return new g({data:s.clone(this._data),size:s.clone(this._size),datatype:this._datatype})},g.prototype.size=function(){return this._size.slice(0)},g.prototype.map=function(e){var t=this,n=function(r,i){return u(r)?r.map((function(e,t){return n(e,i.concat(t))})):e(r,i,t)};return new g({data:n(this._data,[]),size:s.clone(this._size),datatype:this._datatype})},g.prototype.forEach=function(e){var t=this,n=function(r,i){u(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)};n(this._data,[])},g.prototype.toArray=function(){return s.clone(this._data)},g.prototype.valueOf=function(){return this._data},g.prototype.format=function(e){return o.format(this._data,e)},g.prototype.toString=function(){return o.format(this._data)},g.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},g.prototype.diagonal=function(t){if(t){if(e.isBigNumber(t)&&(t=t.toNumber()),!c(t)||!d(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var n=t>0?t:0,r=t<0?-t:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-n),s=[],l=0;l<a;l++)s[l]=this._data[l+r][l+n];return new g({data:s,size:[a],datatype:this._datatype})},g.diagonal=function(t,n,r,i,o){if(!u(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(e.isBigNumber(t)&&(t=t.toNumber()),!c(t)||!d(t)||t<1)throw new Error("Size values must be positive integers");return t})),r){if(e.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!d(r))throw new TypeError("The parameter k must be an integer number")}else r=0;i&&f(o)&&(i=h.convert(i,o));var s,l=r>0?r:0,p=r<0?-r:0,m=t[0],y=t[1],v=Math.min(m-p,y-l);if(u(n)){if(n.length!==v)throw new Error("Invalid value array length");s=function(e){return n[e]}}else if(e.isMatrix(n)){var b=n.size();if(1!==b.length||b[0]!==v)throw new Error("Invalid matrix length");s=function(e){return n.get([e])}}else s=function(){return n};i||(i=e.isBigNumber(s(0))?new e.BigNumber(0):0);var _=[];if(t.length>0){_=a.resize(_,t,i);for(var w=0;w<v;w++)_[w+p][w+l]=s(w)}return new g({data:_,size:[m,y]})},g.fromJSON=function(e){return new g(e)},g.prototype.swapRows=function(e,t){if(!(c(e)&&d(e)&&c(t)&&d(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(e,this._size[0]),p(t,this._size[0]),g._swapRows(e,t,this._data),this},g._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},e.Matrix._storage.dense=g,e.Matrix._storage.default=g,g},t.lazy=!1},53657:(e,t,n)=>{"use strict";t.name="FibonacciHeap",t.path="type",t.factory=function(e,t,r,i){var o=r(n(57997)),a=r(n(64692)),s=1/Math.log((1+Math.sqrt(5))/2);function l(){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}l.prototype.type="FibonacciHeap",l.prototype.isFibonacciHeap=!0,l.prototype.insert=function(e,t){var n={key:e,value:t,degree:0};if(this._minimum){var r=this._minimum;n.left=r,n.right=r.right,r.right=n,n.right.left=n,o(e,r.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},l.prototype.size=function(){return this._size},l.prototype.clear=function(){this._minimum=null,this._size=0},l.prototype.isEmpty=function(){return 0===this._size},l.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var t=this._minimum,n=e.degree,r=e.child;n>0;){var i=r.right;r.left.right=r.right,r.right.left=r.left,r.left=t,r.right=t.right,t.right=r,r.right.left=r,r.parent=null,r=i,n--}return e.left.right=e.right,e.right.left=e.left,e==e.right?t=null:(t=e.right,t=f(t,this._size)),this._size--,this._minimum=t,e},l.prototype.remove=function(e){this._minimum=u(this._minimum,e,-1),this.extractMinimum()};var u=function(e,t,n){t.key=n;var r=t.parent;return r&&o(t.key,r.key)&&(c(e,t,r),d(e,r)),o(t.key,e.key)&&(e=t),e},c=function(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child==t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1},d=function(e,t){var n=t.parent;n&&(t.mark?(c(e,t,n),d(n)):t.mark=!0)},f=function(e,t){var n,r,i,l=Math.floor(Math.log(t)*s)+1,u=new Array(l),c=0,d=e;if(d)for(c++,d=d.right;d!==e;)c++,d=d.right;for(;c>0;){for(var f=d.degree,p=d.right;n=u[f];){if(a(d.key,n.key)){var h=n;n=d,d=h}i=d,(r=n).left.right=r.right,r.right.left=r.left,r.parent=i,i.child?(r.left=i.child,r.right=i.child.right,i.child.right=r,r.right.left=r):(i.child=r,r.right=r,r.left=r),i.degree++,r.mark=!1,u[f]=null,f++}u[f]=d,d=p,c--}e=null;for(var m=0;m<l;m++)(n=u[m])&&(e?(n.left.right=n.right,n.right.left=n.left,n.left=e,n.right=e.right,e.right=n,n.right.left=n,o(n.key,e.key)&&(e=n)):e=n);return e};return l}},41739:(e,t,n)=>{"use strict";var r=n(44230),i=r.string,o=r.object,a=Array.isArray,s=i.isString;t.name="ImmutableDenseMatrix",t.path="type",t.factory=function(e,t,i){var l=i(n(20908)),u=i(n(57997));function c(t,n){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!s(n))throw new Error("Invalid datatype: "+n);if(e.isMatrix(t)||a(t)){var i=new l(t,n);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(t&&a(t.data)&&a(t.size))this._data=t.data,this._size=t.size,this._datatype=t.datatype,this._min=void 0!==t.min?t.min:null,this._max=void 0!==t.max?t.max:null;else{if(t)throw new TypeError("Unsupported type of data ("+r.types.type(t)+")");this._data=[],this._size=[0],this._datatype=n,this._min=null,this._max=null}}return c.prototype=new l,c.prototype.type="ImmutableDenseMatrix",c.prototype.isImmutableDenseMatrix=!0,c.prototype.subset=function(t){switch(arguments.length){case 1:var n=l.prototype.subset.call(this,t);return e.isMatrix(n)?new c({data:n._data,size:n._size,datatype:n._datatype}):n;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},c.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},c.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},c.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},c.prototype.clone=function(){return new c({data:o.clone(this._data),size:o.clone(this._size),datatype:this._datatype})},c.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},c.fromJSON=function(e){return new c(e)},c.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},c.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(t){(null===e||u(t,e))&&(e=t)})),this._min=null!==e?e:void 0}return this._min},c.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(t){(null===e||u(e,t))&&(e=t)})),this._max=null!==e?e:void 0}return this._max},c}},36018:(e,t,n)=>{"use strict";var r=n(44230).string.isString;t.name="Matrix",t.path="type",t.factory=function(e,t,n,i){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(e){if(!r(e))throw new TypeError("format must be a string value");var t=o._storage[e];if(!t)throw new SyntaxError("Unsupported matrix storage format: "+e);return t},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}},99219:(e,t,n)=>{"use strict";var r=n(81280).clone,i=n(74186).isInteger;t.name="Index",t.path="type",t.factory=function(e){function t(r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var a=arguments[i];if(e.isRange(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||e.isMatrix(a)){var s=n(a.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(n([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function n(t){for(var n=0,r=t.length;n<r;n++)if("number"!=typeof t[n]||!i(t[n]))throw new TypeError("Index parameters must be positive integer numbers");return new e.ImmutableDenseMatrix(t)}return t.prototype.type="Index",t.prototype.isIndex=!0,t.prototype.clone=function(){var e=new t;return e._dimensions=r(this._dimensions),e._isScalar=this._isScalar,e},t.create=function(e){var n=new t;return t.apply(n,e),n},t.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?1:r.size()[0]}return e},t.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.max()}return e},t.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"==typeof r?r:r.min()}return e},t.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},t.prototype.dimension=function(e){return this._dimensions[e]||null},t.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},t.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},t.prototype.isScalar=function(){return this._isScalar},t.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"==typeof r?r:r.toArray())}return e},t.prototype.valueOf=t.prototype.toArray,t.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];"string"==typeof r?e.push(JSON.stringify(r)):e.push(r.toString())}return"["+e.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},t.fromJSON=function(e){return t.create(e.dimensions)},t}},65665:(e,t,n)=>{"use strict";var r=n(74186);t.name="Range",t.path="type",t.factory=function(e,t,n,i){function o(t,n,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(null!=t)if(e.isBigNumber(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(null!=n)if(e.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(null!=r)if(e.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=null!=t?parseFloat(t):0,this.end=null!=n?parseFloat(n):0,this.step=null!=r?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(e){if("string"!=typeof e)return null;var t=e.split(":").map((function(e){return parseFloat(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return new o(t[0],t[1]);case 3:return new o(t[0],t[2],t[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end-t;return r.sign(n)==r.sign(i)?e=Math.ceil(i/n):0==i&&(e=0),isNaN(e)&&(e=0),[e]},o.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},o.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},o.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},o.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},o.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(e){var t=r.format(this.start,e);return 1!=this.step&&(t+=":"+r.format(this.step,e)),t+=":"+r.format(this.end,e)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(e){return new o(e.start,e.end,e.step)},o}},79251:(e,t,n)=>{"use strict";t.name="Spa",t.path="type",t.factory=function(e,t,r){var i=r(n(76113)),o=r(n(86161));function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new e.FibonacciHeap}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},a.prototype.get=function(e){var t=this._values[e];return t?t.value:0},a.prototype.accumulate=function(e,t){var n=this._values[e];n?n.value=i(n.value,t):(n=this._heap.insert(e,t),this._values[e]=n)},a.prototype.forEach=function(e,t,n){var r=this._heap,i=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=t;)s.key>=e&&(o(s.value,0)||n(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var l=0;l<a.length;l++){var u=a[l];i[(s=r.insert(u.key,u.value)).key]=s}},a.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},a}},88675:(e,t,n)=>{"use strict";var r=n(44230),i=n(44499),o=r.array,a=r.object,s=r.string,l=r.number,u=Array.isArray,c=l.isNumber,d=l.isInteger,f=s.isString,p=o.validateIndex;t.name="SparseMatrix",t.path="type",t.factory=function(e,t,h,m){var g=h(n(36018)),y=h(n(86161));function v(t,n){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(e.isMatrix(t))b(this,t,n);else if(t&&u(t.index)&&u(t.ptr)&&u(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=n||t.datatype;else if(u(t))_(this,t,n);else{if(t)throw new TypeError("Unsupported type of data ("+r.types.type(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=n}}var b=function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?a.clone(t._values):void 0,e._index=a.clone(t._index),e._ptr=a.clone(t._ptr),e._size=a.clone(t._size),e._datatype=n||t._datatype):_(e,t.valueOf(),n||t._datatype)},_=function(e,t,n){e._values=[],e._index=[],e._ptr=[],e._datatype=n;var r=t.length,i=0,o=y,a=0;if(f(n)&&(o=m.find(y,[n,n])||y,a=m.convert(0,n)),r>0){var s=0;do{e._ptr.push(e._index.length);for(var l=0;l<r;l++){var c=t[l];if(u(c)){if(0===s&&i<c.length&&(i=c.length),s<c.length){var d=c[s];o(d,a)||(e._values.push(d),e._index.push(l))}}else 0===s&&i<1&&(i=1),o(c,a)||(e._values.push(c),e._index.push(l))}s++}while(s<i)}e._ptr.push(e._index.length),e._size=[r,i]};v.prototype=new g,v.prototype.type="SparseMatrix",v.prototype.isSparseMatrix=!0,v.prototype.storage=function(){return"sparse"},v.prototype.datatype=function(){return this._datatype},v.prototype.create=function(e,t){return new v(e,t)},v.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},v.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return w(this,e);case 2:case 3:return E(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}};var w=function(t,n){if(!e.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return t.get(n.min());var r,o,a,s,l=n.size();if(l.length!=t._size.length)throw new i(l.length,t._size.length);var u=n.min(),c=n.max();for(r=0,o=t._size.length;r<o;r++)p(u[r],t._size[r]),p(c[r],t._size[r]);var d=t._values,f=t._index,h=t._ptr,m=n.dimension(0),g=n.dimension(1),y=[],b=[];m.forEach((function(e,t){b[e]=t[0],y[e]=!0}));var _=d?[]:void 0,w=[],E=[];return g.forEach((function(e){for(E.push(w.length),a=h[e],s=h[e+1];a<s;a++)r=f[a],!0===y[r]&&(w.push(b[r]),_&&_.push(d[a]))})),E.push(w.length),new v({values:_,index:w,ptr:E,size:l,datatype:t._datatype})},E=function(t,n,r,s){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,u=n.size(),c=n.isScalar();if(e.isMatrix(r)?(l=r.size(),r=r.toArray()):l=o.size(r),c){if(0!==l.length)throw new TypeError("Scalar expected");t.set(n.min(),r,s)}else{if(1!==u.length&&2!==u.length)throw new i(u.length,t._size.length,"<");if(l.length<u.length){for(var d=0,f=0;1===u[d]&&1===l[d];)d++;for(;1===u[d];)f++,d++;r=o.unsqueeze(r,u.length,f,l)}if(!a.deepEqual(u,l))throw new i(u,l,">");for(var p=n.min()[0],h=n.min()[1],m=l[0],g=l[1],y=0;y<m;y++)for(var v=0;v<g;v++){var b=r[y][v];t.set([y+p,v+h],b,s)}}return t};v.prototype.get=function(e){if(!u(e))throw new TypeError("Array expected");if(e.length!=this._size.length)throw new i(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];p(t,this._size[0]),p(n,this._size[1]);var r=S(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},v.prototype.set=function(e,t,n){if(!u(e))throw new TypeError("Array expected");if(e.length!=this._size.length)throw new i(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var r=e[0],o=e[1],a=this._size[0],s=this._size[1],l=y,c=0;f(this._datatype)&&(l=m.find(y,[this._datatype,this._datatype])||y,c=m.convert(0,this._datatype)),(r>a-1||o>s-1)&&(T(this,Math.max(r+1,a),Math.max(o+1,s),n),a=this._size[0],s=this._size[1]),p(r,a),p(o,s);var d=S(r,this._ptr[o],this._ptr[o+1],this._index);return d<this._ptr[o+1]&&this._index[d]===r?l(t,c)?x(d,o,this._values,this._index,this._ptr):this._values[d]=t:k(d,r,o,t,this._values,this._index,this._ptr),this};var S=function(e,t,n,r){if(n-t==0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t},x=function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var o=t+1;o<i.length;o++)i[o]--},k=function(e,t,n,r,i,o,a){i.splice(e,0,r),o.splice(e,0,t);for(var s=n+1;s<a.length;s++)a[s]++};v.prototype.resize=function(e,t,n){if(!u(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");e.forEach((function(t){if(!l.isNumber(t)||!l.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(e)+")")}));var r=n?this.clone():this;return T(r,e[0],e[1],t)};var T=function(e,t,n,r){var i=r||0,o=y,a=0;f(e._datatype)&&(o=m.find(y,[e._datatype,e._datatype])||y,a=m.convert(0,e._datatype),i=m.convert(i,e._datatype));var s,l,u,c=!o(i,a),d=e._size[0],p=e._size[1];if(n>p){for(l=p;l<n;l++)if(e._ptr[l]=e._values.length,c)for(s=0;s<d;s++)e._values.push(i),e._index.push(s);e._ptr[n]=e._values.length}else n<p&&(e._ptr.splice(n+1,p-n),e._values.splice(e._ptr[n],e._values.length),e._index.splice(e._ptr[n],e._index.length));if(p=n,t>d){if(c){var h=0;for(l=0;l<p;l++){e._ptr[l]=e._ptr[l]+h,u=e._ptr[l+1]+h;var g=0;for(s=d;s<t;s++,g++)e._values.splice(u+g,0,i),e._index.splice(u+g,0,s),h++}e._ptr[p]=e._values.length}}else if(t<d){var v=0;for(l=0;l<p;l++){e._ptr[l]=e._ptr[l]-v;var b=e._ptr[l],_=e._ptr[l+1]-v;for(u=b;u<_;u++)(s=e._index[u])>t-1&&(e._values.splice(u,1),e._index.splice(u,1),v++)}e._ptr[l]=e._values.length}return e._size[0]=t,e._size[1]=n,e};v.prototype.reshape=function(e,t){if(!u(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach((function(t){if(!l.isNumber(t)||!l.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(e)+")")})),this._size[0]*this._size[1]!=e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);var a=n._values.slice(),c=n._index.slice();for(i=0;i<n._index.length;i++){var d=c[i],f=r[i],p=d*n._size[1]+f;r[i]=p%e[1],c[i]=Math.floor(p/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(i=0;i<n._ptr.length;i++)n._ptr[i]=0;for(var h=0;h<a.length;h++){i=c[h],o=r[h];var m=a[h],g=S(i,n._ptr[o],n._ptr[o+1],n._index);k(g,i,o,m,n._values,n._index,n._ptr)}return n},v.prototype.clone=function(){return new v({values:this._values?a.clone(this._values):void 0,index:a.clone(this._index),ptr:a.clone(this._ptr),size:a.clone(this._size),datatype:this._datatype})},v.prototype.size=function(){return this._size.slice(0)},v.prototype.map=function(e,t){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this,r=this._size[0],i=this._size[1];return O(this,0,r-1,0,i-1,(function(t,r,i){return e(t,[r,i],n)}),t)};var O=function(e,t,n,r,i,o,a){var s=[],l=[],u=[],c=y,d=0;f(e._datatype)&&(c=m.find(y,[e._datatype,e._datatype])||y,d=m.convert(0,e._datatype));for(var p=function(e,t,n){e=o(e,t,n),c(e,d)||(s.push(e),l.push(t))},h=r;h<=i;h++){u.push(s.length);for(var g=e._ptr[h],b=e._ptr[h+1],_=t,w=g;w<b;w++){var E=e._index[w];if(E>=t&&E<=n){if(!a)for(var S=_;S<E;S++)p(0,S-t,h-r);p(e._values[w],E-t,h-r)}_=E+1}if(!a)for(var x=_;x<=n;x++)p(0,x-t,h-r)}return u.push(s.length),new v({values:s,index:l,ptr:u,size:[n-t+1,i-r+1]})};v.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this,r=this._size[0],i=this._size[1],o=0;o<i;o++){for(var a=this._ptr[o],s=this._ptr[o+1],l=0,u=a;u<s;u++){var c=this._index[u];if(!t)for(var d=l;d<c;d++)e(0,[d,o],n);e(this._values[u],[c,o],n),l=c+1}if(!t)for(var f=l;f<r;f++)e(0,[f,o],n)}},v.prototype.toArray=function(){return C(this._values,this._index,this._ptr,this._size,!0)},v.prototype.valueOf=function(){return C(this._values,this._index,this._ptr,this._size,!1)};var C=function(e,t,n,r,i){var o,s,l=r[0],u=r[1],c=[];for(o=0;o<l;o++)for(c[o]=[],s=0;s<u;s++)c[o][s]=0;for(s=0;s<u;s++)for(var d=n[s],f=n[s+1],p=d;p<f;p++)c[o=t[p]][s]=e?i?a.clone(e[p]):e[p]:1;return c};return v.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+s.format(t,e)+" x "+s.format(n,e)+"] density: "+s.format(r,e)+"\n",o=0;o<n;o++)for(var a=this._ptr[o],l=this._ptr[o+1],u=a;u<l;u++){var c=this._index[u];i+="\n    ("+s.format(c,e)+", "+s.format(o,e)+") ==> "+(this._values?s.format(this._values[u],e):"X")}return i},v.prototype.toString=function(){return s.format(this.toArray())},v.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},v.prototype.diagonal=function(t){if(t){if(e.isBigNumber(t)&&(t=t.toNumber()),!c(t)||!d(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var n=t>0?t:0,r=t<0?-t:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-n),s=[],l=[],u=[];u[0]=0;for(var f=n;f<o&&s.length<a;f++)for(var p=this._ptr[f],h=this._ptr[f+1],m=p;m<h;m++){var g=this._index[m];if(g===f-n+r){s.push(this._values[m]),l[s.length-1]=g-r;break}}return u.push(s.length),new v({values:s,index:l,ptr:u,size:[a,1]})},v.fromJSON=function(e){return new v(e)},v.diagonal=function(t,n,r,i,o){if(!u(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(e.isBigNumber(t)&&(t=t.toNumber()),!c(t)||!d(t)||t<1)throw new Error("Size values must be positive integers");return t})),r){if(e.isBigNumber(r)&&(r=r.toNumber()),!c(r)||!d(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a=y,s=0;f(o)&&(a=m.find(y,[o,o])||y,s=m.convert(0,o));var l,p=r>0?r:0,h=r<0?-r:0,g=t[0],b=t[1],_=Math.min(g-h,b-p);if(u(n)){if(n.length!==_)throw new Error("Invalid value array length");l=function(e){return n[e]}}else if(e.isMatrix(n)){var w=n.size();if(1!==w.length||w[0]!==_)throw new Error("Invalid matrix length");l=function(e){return n.get([e])}}else l=function(){return n};for(var E=[],S=[],x=[],k=0;k<b;k++){x.push(E.length);var T=k-p;if(T>=0&&T<_){var O=l(T);a(O,s)||(S.push(T+h),E.push(O))}}return x.push(E.length),new v({values:E,index:S,ptr:x,size:[g,b]})},v.prototype.swapRows=function(e,t){if(!(c(e)&&d(e)&&c(t)&&d(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(e,this._size[0]),p(t,this._size[0]),v._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},v._forEachRow=function(e,t,n,r,i){for(var o=r[e],a=r[e+1],s=o;s<a;s++)i(n[s],t[s])},v._swapRows=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],l=o[a+1],u=S(e,s,l,i),c=S(t,s,l,i);if(u<l&&c<l&&i[u]===e&&i[c]===t){if(r){var d=r[u];r[u]=r[c],r[c]=d}}else if(u<l&&i[u]===e&&(c>=l||i[c]!==t)){var f=r?r[u]:void 0;i.splice(c,0,t),r&&r.splice(c,0,f),i.splice(c<=u?u+1:u,1),r&&r.splice(c<=u?u+1:u,1)}else if(c<l&&i[c]===t&&(u>=l||i[u]!==e)){var p=r?r[c]:void 0;i.splice(u,0,e),r&&r.splice(u,0,p),i.splice(u<=c?c+1:c,1),r&&r.splice(u<=c?c+1:c,1)}}},e.Matrix._storage.sparse=v,v},t.lazy=!1},30194:(e,t)=>{"use strict";t.name="index",t.factory=function(e,t,n,r){return r("index",{"...number | string | BigNumber | Range | Array | Matrix":function(t){var n=t.map((function(t){return e.isBigNumber(t)?t.toNumber():Array.isArray(t)||e.isMatrix(t)?t.map((function(t){return e.isBigNumber(t)?t.toNumber():t})):t})),r=new e.Index;return e.Index.apply(r,n),r}})}},16140:(e,t)=>{"use strict";t.name="matrix",t.factory=function(e,t,n,r){var i=r("matrix",{"":function(){return o([])},string:function(e){return o([],e)},"string, string":function(e,t){return o([],e,t)},Array:function(e){return o(e)},Matrix:function(e){return o(e,e.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i;function o(t,n,r){return new(e.Matrix.storage(n||"default"))(t,r)}}},18791:(e,t)=>{"use strict";t.name="sparse",t.factory=function(e,t,n,r){var i=e.SparseMatrix,o=r("sparse",{"":function(){return new i([])},string:function(e){return new i([],e)},"Array | Matrix":function(e){return new i(e)},"Array | Matrix, string":function(e,t){return new i(e,t)}});return o.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},o}},53488:(e,t,n)=>{"use strict";e.exports=[n(36018),n(20908),n(88675),n(79251),n(53657),n(41739),n(99219),n(65665),n(30194),n(16140),n(18791)]},42898:(e,t,n)=>{"use strict";var r=n(44499);t.name="algorithm01",t.factory=function(e,t,n,i){var o=e.DenseMatrix;return function(e,t,n,a){var s=e._data,l=e._size,u=e._datatype,c=t._values,d=t._index,f=t._ptr,p=t._size,h=t._datatype;if(l.length!==p.length)throw new r(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,g,y=l[0],v=l[1],b="string"==typeof u&&u===h?u:void 0,_=b?i.find(n,[b,b]):n,w=[];for(m=0;m<y;m++)w[m]=[];var E=[],S=[];for(g=0;g<v;g++){for(var x=g+1,k=f[g],T=f[g+1],O=k;O<T;O++)E[m=d[O]]=a?_(c[O],s[m][g]):_(s[m][g],c[O]),S[m]=x;for(m=0;m<y;m++)S[m]===x?w[m][g]=E[m]:w[m][g]=s[m][g]}return new o({data:w,size:[y,v],datatype:b})}}},54382:(e,t,n)=>{"use strict";var r=n(44499);t.name="algorithm03",t.factory=function(e,t,n,i){var o=e.DenseMatrix;return function(e,t,n,a){var s=e._data,l=e._size,u=e._datatype,c=t._values,d=t._index,f=t._ptr,p=t._size,h=t._datatype;if(l.length!==p.length)throw new r(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,g=l[0],y=l[1],v=0,b=n;"string"==typeof u&&u===h&&(m=u,v=i.convert(0,m),b=i.find(n,[m,m]));for(var _=[],w=0;w<g;w++)_[w]=[];for(var E=[],S=[],x=0;x<y;x++){for(var k=x+1,T=f[x],O=f[x+1],C=T;C<O;C++){var A=d[C];E[A]=a?b(c[C],s[A][x]):b(s[A][x],c[C]),S[A]=k}for(var P=0;P<g;P++)S[P]===k?_[P][x]=E[P]:_[P][x]=a?b(v,s[P][x]):b(s[P][x],v)}return new o({data:_,size:[g,y],datatype:m})}}},29449:(e,t,n)=>{"use strict";var r=n(44499);t.name="algorithm04",t.factory=function(e,t,i,o){var a=i(n(86161)),s=e.SparseMatrix;return function(e,t,n){var i=e._values,l=e._index,u=e._ptr,c=e._size,d=e._datatype,f=t._values,p=t._index,h=t._ptr,m=t._size,g=t._datatype;if(c.length!==m.length)throw new r(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y,v=c[0],b=c[1],_=a,w=0,E=n;"string"==typeof d&&d===g&&(y=d,_=o.find(a,[y,y]),w=o.convert(0,y),E=o.find(n,[y,y]));var S,x,k,T,O,C=i&&f?[]:void 0,A=[],P=[],M=new s({values:C,index:A,ptr:P,size:[v,b],datatype:y}),D=i&&f?[]:void 0,R=i&&f?[]:void 0,L=[],N=[];for(x=0;x<b;x++){P[x]=A.length;var I=x+1;for(T=u[x],O=u[x+1],k=T;k<O;k++)S=l[k],A.push(S),L[S]=I,D&&(D[S]=i[k]);for(T=h[x],O=h[x+1],k=T;k<O;k++)if(L[S=p[k]]===I){if(D){var j=E(D[S],f[k]);_(j,w)?L[S]=null:D[S]=j}}else A.push(S),N[S]=I,R&&(R[S]=f[k]);if(D&&R)for(k=P[x];k<A.length;)L[S=A[k]]===I?(C[k]=D[S],k++):N[S]===I?(C[k]=R[S],k++):A.splice(k,1)}return P[b]=A.length,M}}},5387:(e,t,n)=>{"use strict";var r=n(44499);t.name="algorithm05",t.factory=function(e,t,i,o){var a=i(n(86161)),s=e.SparseMatrix;return function(e,t,n){var i=e._values,l=e._index,u=e._ptr,c=e._size,d=e._datatype,f=t._values,p=t._index,h=t._ptr,m=t._size,g=t._datatype;if(c.length!==m.length)throw new r(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");var y,v=c[0],b=c[1],_=a,w=0,E=n;"string"==typeof d&&d===g&&(y=d,_=o.find(a,[y,y]),w=o.convert(0,y),E=o.find(n,[y,y]));var S,x,k,T,O=i&&f?[]:void 0,C=[],A=[],P=new s({values:O,index:C,ptr:A,size:[v,b],datatype:y}),M=O?[]:void 0,D=O?[]:void 0,R=[],L=[];for(x=0;x<b;x++){A[x]=C.length;var N=x+1;for(k=u[x],T=u[x+1];k<T;k++)S=l[k],C.push(S),R[S]=N,M&&(M[S]=i[k]);for(k=h[x],T=h[x+1];k<T;k++)R[S=p[k]]!==N&&C.push(S),L[S]=N,D&&(D[S]=f[k]);if(O)for(k=A[x];k<C.length;){var I=R[S=C[k]],j=L[S];if(I===N||j===N){var B=E(I===N?M[S]:w,j===N?D[S]:w);_(B,w)?C.splice(k,1):(O.push(B),k++)}}}return A[b]=C.length,P}}},74078:(e,t,n)=>{"use strict";var r=n(44499);t.name="algorithm07",t.factory=function(e,t,n,i){var o=e.DenseMatrix,a=function(e,t,n,r,i){for(var o=e._values,a=e._index,s=e._ptr,l=s[t],u=s[t+1];l<u;l++){var c=a[l];n[c]=i,r[c]=o[l]}};return function(e,t,n){var s=e._size,l=e._datatype,u=t._size,c=t._datatype;if(s.length!==u.length)throw new r(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var d,f,p,h=s[0],m=s[1],g=0,y=n;"string"==typeof l&&l===c&&(d=l,g=i.convert(0,d),y=i.find(n,[d,d]));var v=[];for(f=0;f<h;f++)v[f]=[];var b=new o({data:v,size:[h,m],datatype:d}),_=[],w=[],E=[],S=[];for(p=0;p<m;p++){var x=p+1;for(a(e,p,E,_,x),a(t,p,S,w,x),f=0;f<h;f++){var k=E[f]===x?_[f]:g,T=S[f]===x?w[f]:g;v[f][p]=y(k,T)}}return b}}},34716:(e,t)=>{"use strict";t.name="algorithm10",t.factory=function(e,t,n,r){var i=e.DenseMatrix;return function(e,t,n,o){var a=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=u[0],p=u[1],h=n;"string"==typeof c&&(d=c,t=r.convert(t,d),h=r.find(n,[d,d]));for(var m=[],g=new i({data:m,size:[f,p],datatype:d}),y=[],v=[],b=0;b<p;b++){for(var _=b+1,w=l[b],E=l[b+1],S=w;S<E;S++){var x=s[S];y[x]=a[S],v[x]=_}for(var k=0;k<f;k++)0===b&&(m[k]=[]),v[k]===_?m[k][b]=o?h(t,y[k]):h(y[k],t):m[k][b]=t}return g}}},85222:(e,t,n)=>{"use strict";t.name="algorithm11",t.factory=function(e,t,r,i){var o=r(n(86161)),a=e.SparseMatrix;return function(e,t,n,r){var s=e._values,l=e._index,u=e._ptr,c=e._size,d=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,p=c[0],h=c[1],m=o,g=0,y=n;"string"==typeof d&&(f=d,m=i.find(o,[f,f]),g=i.convert(0,f),t=i.convert(t,f),y=i.find(n,[f,f]));for(var v=[],b=[],_=[],w=new a({values:v,index:b,ptr:_,size:[p,h],datatype:f}),E=0;E<h;E++){_[E]=b.length;for(var S=u[E],x=u[E+1],k=S;k<x;k++){var T=l[k],O=r?y(t,s[k]):y(s[k],t);m(O,g)||(b.push(T),v.push(O))}}return _[h]=b.length,w}}},43404:(e,t)=>{"use strict";t.name="algorithm12",t.factory=function(e,t,n,r){var i=e.DenseMatrix;return function(e,t,n,o){var a=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=u[0],p=u[1],h=n;"string"==typeof c&&(d=c,t=r.convert(t,d),h=r.find(n,[d,d]));for(var m=[],g=new i({data:m,size:[f,p],datatype:d}),y=[],v=[],b=0;b<p;b++){for(var _=b+1,w=l[b],E=l[b+1],S=w;S<E;S++){var x=s[S];y[x]=a[S],v[x]=_}for(var k=0;k<f;k++)0===b&&(m[k]=[]),v[k]===_?m[k][b]=o?h(t,y[k]):h(y[k],t):m[k][b]=o?h(t,0):h(0,t)}return g}}},95147:(e,t,n)=>{"use strict";var r=n(44230),i=n(44499);r.string.isString;t.name="algorithm13",t.factory=function(e,t,n,r){var o=e.DenseMatrix,a=function(e,t,n,r,i,o){var s=[];if(t===n.length-1)for(var l=0;l<r;l++)s[l]=e(i[l],o[l]);else for(var u=0;u<r;u++)s[u]=a(e,t+1,n,n[t+1],i[u],o[u]);return s};return function(e,t,n){var s,l=e._data,u=e._size,c=e._datatype,d=t._data,f=t._size,p=t._datatype,h=[];if(u.length!==f.length)throw new i(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var g=n;"string"==typeof c&&c===p&&(s=c,t=r.convert(t,s),g=r.find(n,[s,s]));var y=h.length>0?a(g,0,h,h[0],l,d):[];return new o({data:y,size:h,datatype:s})}}},29910:(e,t,n)=>{"use strict";var r=n(81280).clone;t.name="algorithm14",t.factory=function(e,t,n,i){var o=e.DenseMatrix,a=function(e,t,n,r,i,o,s){var l=[];if(t===n.length-1)for(var u=0;u<r;u++)l[u]=s?e(o,i[u]):e(i[u],o);else for(var c=0;c<r;c++)l[c]=a(e,t+1,n,n[t+1],i[c],o,s);return l};return function(e,t,n,s){var l,u=e._data,c=e._size,d=e._datatype,f=n;"string"==typeof d&&(l=d,t=i.convert(t,l),f=i.find(n,[l,l]));var p=c.length>0?a(f,0,c,c[0],u,t,s):[];return new o({data:p,size:r(c),datatype:l})}}},62e3:(e,t,n)=>{"use strict";var r=n(74186),i=n(70795),o=n(44499),a=n(97673);function s(e,t,n){var r,i=e.length;if(i!=t[n])throw new o(i,t[n]);if(n<t.length-1){var a=n+1;for(r=0;r<i;r++){var l=e[r];if(!Array.isArray(l))throw new o(t.length-1,t.length,"<");s(e[r],t,a)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new o(t.length+1,t.length,">")}function l(e,t,n,r){var i,o,a=e.length,s=t[n],u=Math.min(a,s);if(e.length=s,n<t.length-1){var c=n+1;for(i=0;i<u;i++)o=e[i],Array.isArray(o)||(o=[o],e[i]=o),l(o,t,c,r);for(i=u;i<s;i++)o=[],e[i]=o,l(o,t,c,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<s;i++)e[i]=r}}function u(e,t){var n,r=[];if(0===t.length){if(0===e.length)throw new o(null,null,"!=");return e.shift()}for(n=0;n<t[0];n+=1)r.push(u(e,t.slice(1)));return r}function c(e,t,n){var r,i;if(n<t){var o=n+1;for(r=0,i=e.length;r<i;r++)e[r]=c(e[r],t,o)}else for(;Array.isArray(e);)e=e[0];return e}function d(e,t,n){var r,i;if(Array.isArray(e)){var o=n+1;for(r=0,i=e.length;r<i;r++)e[r]=d(e[r],t,o)}else for(var a=n;a<t;a++)e=[e];return e}t.size=function(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t},t.validate=function(e,t){if(0==t.length){if(Array.isArray(e))throw new o(e.length,0)}else s(e,t,0)},t.validateIndex=function(e,t){if(!r.isNumber(e)||!r.isInteger(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new a(e,t)},t.resize=function(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!r.isNumber(e)||!r.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+i.format(t)+")")})),l(e,t,0,void 0!==n?n:0),e},t.reshape=function(e,n){var r,i=t.flatten(e),a=function(e){return e.reduce((function(e,t){return e*t}))};if(!Array.isArray(e)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new o(0,a(t.size(e)),"!=");try{r=u(i,n)}catch(r){if(r instanceof o)throw new o(a(n),a(t.size(e)),"!=");throw r}if(i.length>0)throw new o(a(n),a(t.size(e)),"!=");return r},t.squeeze=function(e,n){for(var r=n||t.size(e);Array.isArray(e)&&1===e.length;)e=e[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(e=c(e,i,0),r.length=i),e},t.unsqueeze=function(e,n,r,i){var o=i||t.size(e);if(r)for(var a=0;a<r;a++)e=[e],o.unshift(1);for(e=d(e,n,0);o.length<n;)o.push(1);return e},t.flatten=function(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t},t.map=function(e,t){return Array.prototype.map.call(e,t)},t.forEach=function(e,t){Array.prototype.forEach.call(e,t)},t.filter=function(e,n){if(1!==t.size(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,n)},t.filterRegExp=function(e,n){if(1!==t.size(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(function(e){return n.test(e)}))},t.join=function(e,t){return Array.prototype.join.call(e,t)},t.identify=function(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++)e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});return t},t.generalize=function(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t},t.isArray=Array.isArray},44839:(e,t,n)=>{"use strict";var r=n(81280);t.format=function(e,n){if("function"==typeof n)return n(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var i="auto",o=void 0;switch(void 0!==n&&(n.notation&&(i=n.notation),"number"==typeof n?o=n:n.precision&&(o=n.precision)),i){case"fixed":return t.toFixed(e,o);case"exponential":return t.toExponential(e,o);case"auto":if(n&&n.exponential&&(void 0!==n.exponential.lower||void 0!==n.exponential.upper)){var a=r.map(n,(function(e){return e}));return a.exponential=void 0,void 0!==n.exponential.lower&&(a.lowerExp=Math.round(Math.log(n.exponential.lower)/Math.LN10)),void 0!==n.exponential.upper&&(a.upperExp=Math.round(Math.log(n.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(n)+" with "+JSON.stringify(a)),t.format(e,a)}var s=n&&void 0!==n.lowerExp?n.lowerExp:-3,l=n&&void 0!==n.upperExp?n.upperExp:5;if(e.isZero())return"0";var u=e.logarithm();return(u.gte(s)&&u.lt(l)?e.toSignificantDigits(o).toFixed():t.toExponential(e,o)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", or "fixed".')}},t.toExponential=function(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()},t.toFixed=function(e,t){return e.toFixed(t)}},85055:e=>{"use strict";e.exports=function(e){return e&&e.constructor.prototype.isBigNumber||!1}},57901:e=>{"use strict";e.exports=function(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}},14666:(e,t)=>{"use strict";t.isBoolean=function(e){return"boolean"==typeof e}},64722:(e,t,n)=>{"use strict";var r=n(28342);e.exports=function(e){for(var t=0;t<e.length;t++)if(r(e[t]))return!0;return!1}},17877:(e,t,n)=>{"use strict";var r=n(95225);e.exports=function e(t,n){r(t)&&(t=t.valueOf());for(var i=0,o=t.length;i<o;i++){var a=t[i];Array.isArray(a)?e(a,n):n(a)}}},56472:e=>{"use strict";e.exports=function e(t,n,r){return t&&"function"==typeof t.map?t.map((function(t){return e(t,n,r)})):n(t)}},28342:(e,t,n)=>{"use strict";var r=n(95225);e.exports=function(e){return Array.isArray(e)||r(e)}},95225:e=>{"use strict";e.exports=function(e){return e&&e.constructor.prototype.isMatrix||!1}},31266:(e,t,n)=>{"use strict";var r=n(62e3).size,i=n(95225),o=n(97673);function a(e,t,n){var r,i,o,s;if(t<=0){if(Array.isArray(e[0])){for(s=function(e){var t,n,r=e.length,i=e[0].length,o=[];for(n=0;n<i;n++){var a=[];for(t=0;t<r;t++)a.push(e[t][n]);o.push(a)}return o}(e),i=[],r=0;r<s.length;r++)i[r]=a(s[r],t-1,n);return i}for(o=e[0],r=1;r<e.length;r++)o=n(o,e[r]);return o}for(i=[],r=0;r<e.length;r++)i[r]=a(e[r],t-1,n);return i}e.exports=function(e,t,n){var s=Array.isArray(e)?r(e):e.size();if(t<0||t>=s.length)throw new o(t,s.length);return i(e)?e.create(a(e.valueOf(),t,n)):a(e,t,n)}},56387:(e,t,n)=>{"use strict";var r=n(81280).hasOwnProperty;function i(e,t){return!(!e||"object"!=typeof e)&&(!!r(s,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function o(e,t){return!(!e||"function"!=typeof e[t])&&(!(r(e,t)&&e.__proto__&&t in e.__proto__)&&(!!r(l,t)||!(t in Object.prototype)&&!(t in Function.prototype)))}function a(e){return"object"==typeof e&&e&&e.constructor===Object}var s={length:!0,name:!0},l={toString:!0,valueOf:!0,toLocaleString:!0};t.YF=function(e,t){if(a(e)&&i(e,t))return e[t];if("function"==typeof e[t]&&o(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')},t.nI=function(e,t,n){if(a(e)&&i(e,t))return e[t]=n;throw new Error('No access to property "'+t+'"')}},12852:(e,t,n)=>{"use strict";var r=n(69723);t.mixin=function(e){var t=new r;return e.on=t.on.bind(t),e.off=t.off.bind(t),e.once=t.once.bind(t),e.emit=t.emit.bind(t),e}},15944:(e,t)=>{"use strict";t.memoize=function(e,t){return function n(){"object"!=typeof n.cache&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t(r):JSON.stringify(r);return o in n.cache?n.cache[o]:n.cache[o]=e.apply(e,r)}},t.maxArgumentCount=function(e){return Object.keys(e.signatures||{}).reduce((function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)}),-1)},t.callWithRightArgumentCount=function(e,t,n){return Object.keys(e.signatures||{}).reduce((function(e,t){var n=(t.match(/,/g)||[]).length+1;return Math.max(e,n)}),-1)}},44230:(e,t,n)=>{"use strict";t.array=n(62e3),t.boolean=n(14666),t.function=n(15944),t.number=n(74186),t.object=n(81280),t.string=n(70795),t.emitter=n(12852)},67505:(e,t,n)=>{"use strict";var r=n(66894);t.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},t.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},t.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var i={deg:"^\\circ"};t.escape=function(e){return r(e,{preserveFormatting:!0})},t.toSymbol=function(e,n){return(n=void 0!==n&&n)?i.hasOwnProperty(e)?i[e]:"\\mathrm{"+t.escape(e)+"}":t.symbols.hasOwnProperty(e)?t.symbols[e]:t.escape(e)}},74186:(e,t,n)=>{"use strict";var r=n(81280);function i(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}t.isNumber=function(e){return"number"==typeof e},t.isInteger=function(e){return!!isFinite(e)&&e==Math.round(e)},t.sign=Math.sign||function(e){return e>0?1:e<0?-1:0},t.format=function(e,n){if("function"==typeof n)return n(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var i="auto",o=void 0;switch(n&&(n.notation&&(i=n.notation),t.isNumber(n)?o=n:n.precision&&(o=n.precision)),i){case"fixed":return t.toFixed(e,o);case"exponential":return t.toExponential(e,o);case"engineering":return t.toEngineering(e,o);case"auto":if(n&&n.exponential&&(void 0!==n.exponential.lower||void 0!==n.exponential.upper)){var a=r.map(n,(function(e){return e}));return a.exponential=void 0,void 0!==n.exponential.lower&&(a.lowerExp=Math.round(Math.log(n.exponential.lower)/Math.LN10)),void 0!==n.exponential.upper&&(a.upperExp=Math.round(Math.log(n.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(n)+" with "+JSON.stringify(a)),t.toPrecision(e,o,a)}return t.toPrecision(e,o,n&&n).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", or "fixed".')}},t.splitNumber=function(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}},t.toEngineering=function(e,n){if(isNaN(e)||!isFinite(e))return String(e);var r=t.roundDigits(t.splitNumber(e),n),o=r.exponent,a=r.coefficients,s=o%3==0?o:o<0?o-3-o%3:o-o%3,l=o>=0?o:Math.abs(s);a.length-1<l&&(a=a.concat(i(l-(a.length-1))));for(var u=Math.abs(o-s),c=1;--u>=0;)c++;var d=a.slice(c).join(""),f=d.match(/[1-9]/)?"."+d:"",p=a.slice(0,c).join("")+f+"e"+(o>=0?"+":"")+s.toString();return r.sign+p},t.toFixed=function(e,n){if(isNaN(e)||!isFinite(e))return String(e);var r=t.splitNumber(e),o="number"==typeof n?t.roundDigits(r,r.exponent+1+n):r,a=o.coefficients,s=o.exponent+1,l=s+(n||0);return a.length<l&&(a=a.concat(i(l-a.length))),s<0&&(a=i(1-s).concat(a),s=1),s<a.length&&a.splice(s,0,0===s?"0.":"."),o.sign+a.join("")},t.toExponential=function(e,n){if(isNaN(e)||!isFinite(e))return String(e);var r=t.splitNumber(e),o=n?t.roundDigits(r,n):r,a=o.coefficients,s=o.exponent;a.length<n&&(a=a.concat(i(n-a.length)));var l=a.shift();return o.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s},t.toPrecision=function(e,n,r){if(isNaN(e)||!isFinite(e))return String(e);var o=r&&void 0!==r.lowerExp?r.lowerExp:-3,a=r&&void 0!==r.upperExp?r.upperExp:5,s=t.splitNumber(e);if(s.exponent<o||s.exponent>=a)return t.toExponential(e,n);var l=n?t.roundDigits(s,n):s,u=l.coefficients,c=l.exponent;u.length<n&&(u=u.concat(i(n-u.length))),u=u.concat(i(c-u.length+1+(u.length<n?n-u.length:0)));var d=c>0?c:0;return d<(u=i(-c).concat(u)).length-1&&u.splice(d+1,0,"."),l.sign+u.join("")},t.roundDigits=function(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n},t.digits=function(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},t.DBL_EPSILON=Number.EPSILON||2220446049250313e-31,t.nearlyEqual=function(e,n,r){if(null==r)return e==n;if(e==n)return!0;if(isNaN(e)||isNaN(n))return!1;if(isFinite(e)&&isFinite(n)){var i=Math.abs(e-n);return i<t.DBL_EPSILON||i<=Math.max(Math.abs(e),Math.abs(n))*r}return!1}},81280:(e,t,n)=>{"use strict";var r=n(85055);t.clone=function e(n){var i=typeof n;if("number"===i||"string"===i||"boolean"===i||null==n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map((function(t){return e(t)}));if(n instanceof Number)return new Number(n.valueOf());if(n instanceof String)return new String(n.valueOf());if(n instanceof Boolean)return new Boolean(n.valueOf());if(n instanceof Date)return new Date(n.valueOf());if(r(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return t.map(n,e)},t.map=function(e,n){var r={};for(var i in e)t.hasOwnProperty(e,i)&&(r[i]=n(e[i]));return r},t.extend=function(e,n){for(var r in n)t.hasOwnProperty(n,r)&&(e[r]=n[r]);return e},t.deepExtend=function e(n,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(t.hasOwnProperty(r,i))if(r[i]&&r[i].constructor===Object)void 0===n[i]&&(n[i]={}),n[i].constructor===Object?e(n[i],r[i]):n[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");n[i]=r[i]}return n},t.deepEqual=function(e,n){var r,i,o;if(Array.isArray(e)){if(!Array.isArray(n))return!1;if(e.length!=n.length)return!1;for(i=0,o=e.length;i<o;i++)if(!t.deepEqual(e[i],n[i]))return!1;return!0}if(e instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in e)if(!t.deepEqual(e[r],n[r]))return!1;for(r in n)if(!t.deepEqual(e[r],n[r]))return!1;return!0}return typeof e==typeof n&&e==n},t.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(e){}return!1},t.lazy=function(e,n,r){if(t.canDefineProperty()){var i,o=!0;Object.defineProperty(e,n,{get:function(){return o&&(i=r(),o=!1),i},set:function(e){i=e,o=!1},configurable:!0,enumerable:!0})}else e[n]=r()},t.traverse=function(e,t){var n=e;if(t)for(var r=t.split("."),i=0;i<r.length;i++){var o=r[i];o in n||(n[o]={}),n=n[o]}return n},t.hasOwnProperty=function(e,t){return e&&Object.hasOwnProperty.call(e,t)},t.isFactory=function(e){return e&&"function"==typeof e.factory}},70795:(e,t,n)=>{"use strict";var r=n(74186).format,i=n(44839).format,o=n(85055);function a(e,n){if(Array.isArray(e)){for(var r="[",i=e.length,o=0;o<i;o++)0!=o&&(r+=", "),r+=a(e[o],n);return r+="]"}return t.format(e,n)}t.isString=function(e){return"string"==typeof e},t.endsWith=function(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t},t.format=function(e,n){if("number"==typeof e)return r(e,n);if(o(e))return i(e,n);if(function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e))return n&&"decimal"===n.fraction?e.toString():e.s*e.n+"/"+e.d;if(Array.isArray(e))return a(e,n);if(t.isString(e))return'"'+e+'"';if("function"==typeof e)return e.syntax?String(e.syntax):"function";if(e&&"object"==typeof e){if("function"==typeof e.format)return e.format(n);if(e&&e.toString()!=={}.toString())return e.toString();var s=[];for(var l in e)e.hasOwnProperty(l)&&s.push('"'+l+'": '+t.format(e[l],n));return"{"+s.join(", ")+"}"}return String(e)},t.stringify=function(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);"\\"===i?(n+=i,r++,""!==(i=t.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'},t.escape=function(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},29166:()=>{"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t})},37320:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,l=i(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(t){s=t(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},70688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,o.default)(r)};var r,i=n(57965),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},57965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,a){var s=i||"<<anonymous>>",l=a||r;if(null==n[r])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+s+"`."):null;for(var u=arguments.length,c=Array(u>6?u-6:0),d=6;d<u;d++)c[d-6]=arguments[d];return e.apply(void 0,[n,r,s,o,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},68262:(e,t,n)=>{"use strict";var r=n(23586);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},13980:(e,t,n)=>{e.exports=n(68262)()},23586:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},25501:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(2784),i=n(27452),o=n(30016),a=n(4905),s=n(52322);const l=r.forwardRef((({closeLabel:e,closeVariant:t,closeButton:n,onHide:l,children:u,...c},d)=>{const f=(0,r.useContext)(a.Z),p=(0,i.Z)((()=>{null==f||f.onHide(),null==l||l()}));return(0,s.jsxs)("div",{ref:d,...c,children:[u,n&&(0,s.jsx)(o.default,{"aria-label":e,variant:t,onClick:p})]})}));l.defaultProps={closeLabel:"Close",closeButton:!1};const u=l},82304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(72779),i=n.n(r),o=n(2784),a=n(20267),s=n(29658),l=n(52823),u=n(22575),c=n(52322);const d=o.forwardRef((({as:e="div",bsPrefix:t,className:n,...r},a)=>{t=(0,s.vE)(t,"accordion-body");const{eventKey:d}=(0,o.useContext)(u.Z);return(0,c.jsx)(l.Z,{eventKey:d,children:(0,c.jsx)(e,{ref:a,...r,className:i()(n,t)})})}));d.displayName="AccordionBody";const f=d;var p=n(367),h=n(80412);const m=o.forwardRef((({as:e="h2",bsPrefix:t,className:n,children:r,onClick:o,...a},l)=>(t=(0,s.vE)(t,"accordion-header"),(0,c.jsx)(e,{ref:l,...a,className:i()(n,t),children:(0,c.jsx)(p.Z,{onClick:o,children:r})}))));m.displayName="AccordionHeader";const g=m,y=o.forwardRef((({as:e="div",bsPrefix:t,className:n,eventKey:r,...a},l)=>{t=(0,s.vE)(t,"accordion-item");const d=(0,o.useMemo)((()=>({eventKey:r})),[r]);return(0,c.jsx)(u.Z.Provider,{value:d,children:(0,c.jsx)(e,{ref:l,...a,className:i()(n,t)})})}));y.displayName="AccordionItem";const v=y,b=o.forwardRef(((e,t)=>{const{as:n="div",activeKey:r,bsPrefix:l,className:u,onSelect:d,flush:f,alwaysOpen:p,...m}=(0,a.Ch)(e,{activeKey:"onSelect"}),g=(0,s.vE)(l,"accordion"),y=(0,o.useMemo)((()=>({activeEventKey:r,onSelect:d,alwaysOpen:p})),[r,d,p]);return(0,c.jsx)(h.Z.Provider,{value:y,children:(0,c.jsx)(n,{ref:t,...m,className:i()(u,g,f&&`${g}-flush`)})})}));b.displayName="Accordion";const _=Object.assign(b,{Button:p.Z,Collapse:l.Z,Item:v,Header:g,Body:f})},367:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f,k:()=>c});var r=n(2784),i=n(72779),o=n.n(i),a=n(80412),s=n(22575),l=n(29658),u=n(52322);function c(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:o}=(0,r.useContext)(a.Z);return r=>{let a=e===n?null:e;o&&(a=Array.isArray(n)?n.includes(e)?n.filter((t=>t!==e)):[...n,e]:[e]),null==i||i(a,r),null==t||t(r)}}const d=r.forwardRef((({as:e="button",bsPrefix:t,className:n,onClick:i,...d},f)=>{t=(0,l.vE)(t,"accordion-button");const{eventKey:p}=(0,r.useContext)(s.Z),h=c(p,i),{activeEventKey:m}=(0,r.useContext)(a.Z);return"button"===e&&(d.type="button"),(0,u.jsx)(e,{ref:f,onClick:h,...d,"aria-expanded":p===m,className:o()(n,t,!(0,a.T)(m,p)&&"collapsed")})}));d.displayName="AccordionButton";const f=d},52823:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(94489),l=n(80412),u=n(52322);const c=o.forwardRef((({as:e="div",bsPrefix:t,className:n,children:r,eventKey:c,...d},f)=>{const{activeEventKey:p}=(0,o.useContext)(l.Z);return t=(0,a.vE)(t,"accordion-collapse"),(0,u.jsx)(s.Z,{ref:f,in:(0,l.T)(p,c),...d,className:i()(n,t),children:(0,u.jsx)(e,{children:o.Children.only(r)})})}));c.displayName="AccordionCollapse";const d=c},80412:(e,t,n)=>{"use strict";function r(e,t){return Array.isArray(e)?e.includes(t):e===t}n.d(t,{T:()=>r,Z:()=>o});const i=n(2784).createContext({});i.displayName="AccordionContext";const o=i},22575:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext({eventKey:""});r.displayName="AccordionItemContext";const i=r},22736:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(72779),i=n.n(r),o=n(2784),a=n(20267),s=n(27452),l=n(9959),u=n(29658),c=n(58370),d=n(30016),f=n(46879),p=n(89023),h=n(52322);const m=(0,f.Z)("h4");m.displayName="DivStyledAsH4";const g=(0,p.Z)("alert-heading",{Component:m}),y=(0,p.Z)("alert-link",{Component:l.Z}),v={variant:"primary",show:!0,transition:c.Z,closeLabel:"Close alert"},b=o.forwardRef(((e,t)=>{const{bsPrefix:n,show:r,closeLabel:o,closeVariant:l,className:f,children:p,variant:m,onClose:g,dismissible:y,transition:v,...b}=(0,a.Ch)(e,{show:"onClose"}),_=(0,u.vE)(n,"alert"),w=(0,s.Z)((e=>{g&&g(!1,e)})),E=!0===v?c.Z:v,S=(0,h.jsxs)("div",{role:"alert",...E?void 0:b,ref:t,className:i()(f,_,m&&`${_}-${m}`,y&&`${_}-dismissible`),children:[y&&(0,h.jsx)(d.default,{onClick:w,"aria-label":o,variant:l}),p]});return E?(0,h.jsx)(E,{unmountOnExit:!0,...b,ref:void 0,in:r,children:S}):r?S:null}));b.displayName="Alert",b.defaultProps=v;const _=Object.assign(b,{Link:y,Heading:g})},23444:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,bg:t,pill:n,text:r,className:o,as:l="span",...u},c)=>{const d=(0,a.vE)(e,"badge");return(0,s.jsx)(l,{ref:c,...u,className:i()(o,d,n&&"rounded-pill",r&&`text-${r}`,t&&`bg-${t}`)})}));l.displayName="Badge",l.defaultProps={bg:"primary",pill:!1};const u=l},98550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h,t:()=>p});var r=n(65291),i=n(8258),o=n(58092),a=n(94693),s=n(86095);const l=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",u=".sticky-top",c=".navbar-toggler";class d extends s.Z{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,(0,i.Z)(t,{[e]:`${parseFloat((0,i.Z)(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],(0,i.Z)(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if((0,r.Z)(t,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";(0,o.Z)(t,l).forEach((t=>this.adjustAndStore(n,t,e.scrollBarWidth))),(0,o.Z)(t,u).forEach((t=>this.adjustAndStore(i,t,-e.scrollBarWidth))),(0,o.Z)(t,c).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();(0,a.Z)(t,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";(0,o.Z)(t,l).forEach((e=>this.restore(n,e))),(0,o.Z)(t,u).forEach((e=>this.restore(r,e))),(0,o.Z)(t,c).forEach((e=>this.restore(r,e)))}}let f;function p(e){return f||(f=new d(e)),f}const h=d},43450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(29803),l=n(52322);const u=o.forwardRef((({bsPrefix:e,className:t,listProps:n,children:r,label:o,as:s="nav",...u},c)=>{const d=(0,a.vE)(e,"breadcrumb");return(0,l.jsx)(s,{"aria-label":o,className:t,ref:c,...u,children:(0,l.jsx)("ol",{...n,className:i()(d,null==n?void 0:n.className),children:r})})}));u.displayName="Breadcrumb",u.defaultProps={label:"breadcrumb",listProps:{}};const c=Object.assign(u,{Item:s.Z})},29803:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(9959),s=n(29658),l=n(52322);const u=o.forwardRef((({bsPrefix:e,active:t,children:n,className:r,as:o="li",linkAs:u=a.Z,linkProps:c,href:d,title:f,target:p,...h},m)=>{const g=(0,s.vE)(e,"breadcrumb-item");return(0,l.jsx)(o,{ref:m,...h,className:i()(g,r,{active:t}),"aria-current":t?"page":void 0,children:t?n:(0,l.jsx)(u,{...c,href:d,title:f,target:p,children:n})})}));u.displayName="BreadcrumbItem",u.defaultProps={active:!1,linkProps:{}};const c=u},70561:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(47830),s=n(29658),l=n(52322);const u=o.forwardRef((({as:e,bsPrefix:t,variant:n,size:r,active:o,className:u,...c},d)=>{const f=(0,s.vE)(t,"btn"),[p,{tagName:h}]=(0,a.FT)({tagName:e,...c}),m=h;return(0,l.jsx)(m,{...c,...p,ref:d,className:i()(u,f,o&&"active",n&&`${f}-${n}`,r&&`${f}-${r}`,c.href&&c.disabled&&"disabled")})}));u.displayName="Button",u.defaultProps={variant:"primary",active:!1,disabled:!1};const c=u},23184:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,size:t,vertical:n,className:r,as:o="div",...l},u)=>{const c=(0,a.vE)(e,"btn-group");let d=c;return n&&(d=`${c}-vertical`),(0,s.jsx)(o,{...l,ref:u,className:i()(r,d,t&&`${c}-${t}`)})}));l.displayName="ButtonGroup",l.defaultProps={vertical:!1,role:"group"};const u=l},82228:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,...n},r)=>{const o=(0,a.vE)(e,"btn-toolbar");return(0,s.jsx)("div",{...n,ref:r,className:i()(t,o)})}));l.displayName="ButtonToolbar",l.defaultProps={role:"toolbar"};const u=l},21708:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(89023),l=n(46879),u=n(51849),c=n(27064),d=n(52322);const f=o.forwardRef((({bsPrefix:e,className:t,as:n="div",...r},s)=>{const l=(0,a.vE)(e,"card-header"),u=(0,o.useMemo)((()=>({cardHeaderBsPrefix:l})),[l]);return(0,d.jsx)(c.Z.Provider,{value:u,children:(0,d.jsx)(n,{ref:s,...r,className:i()(t,l)})})}));f.displayName="CardHeader";const p=f,h=(0,l.Z)("h5"),m=(0,l.Z)("h6"),g=(0,s.Z)("card-body"),y=(0,s.Z)("card-title",{Component:h}),v=(0,s.Z)("card-subtitle",{Component:m}),b=(0,s.Z)("card-link",{Component:"a"}),_=(0,s.Z)("card-text",{Component:"p"}),w=(0,s.Z)("card-footer"),E=(0,s.Z)("card-img-overlay"),S=o.forwardRef((({bsPrefix:e,className:t,bg:n,text:r,border:o,body:s,children:l,as:u="div",...c},f)=>{const p=(0,a.vE)(e,"card");return(0,d.jsx)(u,{ref:f,...c,className:i()(t,p,n&&`bg-${n}`,r&&`text-${r}`,o&&`border-${o}`),children:s?(0,d.jsx)(g,{children:l}):l})}));S.displayName="Card",S.defaultProps={body:!1};const x=Object.assign(S,{Img:u.Z,Title:y,Subtitle:v,Body:g,Link:b,Text:_,Header:p,Footer:w,ImgOverlay:E})},27064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext(null);r.displayName="CardHeaderContext";const i=r},51849:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,variant:n,as:r="img",...o},l)=>{const u=(0,a.vE)(e,"card-img");return(0,s.jsx)(r,{ref:l,className:i()(n?`${u}-${n}`:u,t),...o})}));l.displayName="CardImg";const u=l},45608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(27452),i=n(2784);const o=function(e,t){var n=(0,i.useRef)(!0);(0,i.useEffect)((function(){if(!n.current)return e();n.current=!1}),t)};var a=n(90759),s=n(50616),l=n(9959),u=n(72779),c=n.n(u),d=n(20267);const f=(0,n(89023).Z)("carousel-caption");var p=n(27837),h=n(21027),m=n(29658),g=n(22037),y=n(4102),v=n(50899),b=n(52322);const _={slide:!0,fade:!1,controls:!0,indicators:!0,indicatorLabels:[],defaultActiveIndex:0,interval:5e3,keyboard:!0,pause:"hover",wrap:!0,touch:!0,prevIcon:(0,b.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:"Previous",nextIcon:(0,b.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:"Next"};const w=i.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:u,slide:f,fade:p,controls:_,indicators:w,indicatorLabels:E,activeIndex:S,onSelect:x,onSlide:k,onSlid:T,interval:O,keyboard:C,onKeyDown:A,pause:P,onMouseOver:M,onMouseOut:D,wrap:R,touch:L,onTouchStart:N,onTouchMove:I,onTouchEnd:j,prevIcon:B,prevLabel:F,nextIcon:Y,nextLabel:H,variant:V,className:q,children:U,...W}=(0,d.Ch)(e,{activeIndex:"onSelect"}),z=(0,m.vE)(u,"carousel"),G=(0,m.SC)(),$=(0,i.useRef)(null),[K,Z]=(0,i.useState)("next"),[J,Q]=(0,i.useState)(!1),[X,ee]=(0,i.useState)(!1),[te,ne]=(0,i.useState)(S||0);X||S===te||($.current?Z($.current):Z((S||0)>te?"next":"prev"),f&&ee(!0),ne(S||0)),(0,i.useEffect)((()=>{$.current&&($.current=null)}));let re,ie=0;(0,h.Ed)(U,((e,t)=>{++ie,t===S&&(re=e.props.interval)}));const oe=(0,a.Z)(re),ae=(0,i.useCallback)((e=>{if(X)return;let t=te-1;if(t<0){if(!R)return;t=ie-1}$.current="prev",null==x||x(t,e)}),[X,te,x,R,ie]),se=(0,r.Z)((e=>{if(X)return;let t=te+1;if(t>=ie){if(!R)return;t=0}$.current="next",null==x||x(t,e)})),le=(0,i.useRef)();(0,i.useImperativeHandle)(t,(()=>({element:le.current,prev:ae,next:se})));const ue=(0,r.Z)((()=>{!document.hidden&&function(e){if(!(e&&e.style&&e.parentNode&&e.parentNode.style))return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(le.current)&&(G?ae():se())})),ce="next"===K?"start":"end";o((()=>{f||(null==k||k(te,ce),null==T||T(te,ce))}),[te]);const de=`${z}-item-${K}`,fe=`${z}-item-${ce}`,pe=(0,i.useCallback)((e=>{(0,y.Z)(e),null==k||k(te,ce)}),[k,te,ce]),he=(0,i.useCallback)((()=>{ee(!1),null==T||T(te,ce)}),[T,te,ce]),me=(0,i.useCallback)((e=>{if(C&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(G?se(e):ae(e));case"ArrowRight":return e.preventDefault(),void(G?ae(e):se(e))}null==A||A(e)}),[C,A,ae,se,G]),ge=(0,i.useCallback)((e=>{"hover"===P&&Q(!0),null==M||M(e)}),[P,M]),ye=(0,i.useCallback)((e=>{Q(!1),null==D||D(e)}),[D]),ve=(0,i.useRef)(0),be=(0,i.useRef)(0),_e=(0,s.Z)(),we=(0,i.useCallback)((e=>{ve.current=e.touches[0].clientX,be.current=0,"hover"===P&&Q(!0),null==N||N(e)}),[P,N]),Ee=(0,i.useCallback)((e=>{e.touches&&e.touches.length>1?be.current=0:be.current=e.touches[0].clientX-ve.current,null==I||I(e)}),[I]),Se=(0,i.useCallback)((e=>{if(L){const t=be.current;Math.abs(t)>40&&(t>0?ae(e):se(e))}"hover"===P&&_e.set((()=>{Q(!1)}),O||void 0),null==j||j(e)}),[L,P,ae,se,_e,O,j]),xe=null!=O&&!J&&!X,ke=(0,i.useRef)();(0,i.useEffect)((()=>{var e,t;if(!xe)return;const n=G?ae:se;return ke.current=window.setInterval(document.visibilityState?ue:n,null!=(e=null!=(t=oe.current)?t:O)?e:void 0),()=>{null!==ke.current&&clearInterval(ke.current)}}),[xe,ae,se,oe,O,ue,G]);const Te=(0,i.useMemo)((()=>w&&Array.from({length:ie},((e,t)=>e=>{null==x||x(t,e)}))),[w,ie,x]);return(0,b.jsxs)(n,{ref:le,...W,onKeyDown:me,onMouseOver:ge,onMouseOut:ye,onTouchStart:we,onTouchMove:Ee,onTouchEnd:Se,className:c()(q,z,f&&"slide",p&&`${z}-fade`,V&&`${z}-${V}`),children:[w&&(0,b.jsx)("div",{className:`${z}-indicators`,children:(0,h.UI)(U,((e,t)=>(0,b.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=E&&E.length?E[t]:`Slide ${t+1}`,className:t===te?"active":void 0,onClick:Te?Te[t]:void 0,"aria-current":t===te},t)))}),(0,b.jsx)("div",{className:`${z}-inner`,children:(0,h.UI)(U,((e,t)=>{const n=t===te;return f?(0,b.jsx)(v.Z,{in:n,onEnter:n?pe:void 0,onEntered:n?he:void 0,addEndListener:g.Z,children:(t,r)=>i.cloneElement(e,{...r,className:c()(e.props.className,n&&"entered"!==t&&de,("entered"===t||"exiting"===t)&&"active",("entering"===t||"exiting"===t)&&fe)})}):i.cloneElement(e,{className:c()(e.props.className,n&&"active")})}))}),_&&(0,b.jsxs)(b.Fragment,{children:[(R||0!==S)&&(0,b.jsxs)(l.Z,{className:`${z}-control-prev`,onClick:ae,children:[B,F&&(0,b.jsx)("span",{className:"visually-hidden",children:F})]}),(R||S!==ie-1)&&(0,b.jsxs)(l.Z,{className:`${z}-control-next`,onClick:se,children:[Y,H&&(0,b.jsx)("span",{className:"visually-hidden",children:H})]})]})]})}));w.displayName="Carousel",w.defaultProps=_;const E=Object.assign(w,{Caption:f,Item:p.Z})},27837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({as:e="div",bsPrefix:t,className:n,...r},o)=>{const l=i()(n,(0,a.vE)(t,"carousel-item"));return(0,s.jsx)(e,{ref:o,...r,className:l})}));l.displayName="CarouselItem";const u=l},30016:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(13980),i=n.n(r),o=n(2784),a=n(72779),s=n.n(a),l=n(52322);const u={"aria-label":i().string,onClick:i().func,variant:i().oneOf(["white"])},c=o.forwardRef((({className:e,variant:t,...n},r)=>(0,l.jsx)("button",{ref:r,type:"button",className:s()("btn-close",t&&`btn-close-${t}`,e),...n})));c.displayName="CloseButton",c.propTypes=u,c.defaultProps={"aria-label":"Close"};const d=c},12594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d,r:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=["xxl","xl","lg","md","sm","xs"];function u({as:e,bsPrefix:t,className:n,...r}){t=(0,a.vE)(t,"col");const o=[],s=[];return l.forEach((e=>{const n=r[e];let i,a,l;delete r[e],"object"==typeof n&&null!=n?({span:i,offset:a,order:l}=n):i=n;const u="xs"!==e?`-${e}`:"";i&&o.push(!0===i?`${t}${u}`:`${t}${u}-${i}`),null!=l&&s.push(`order${u}-${l}`),null!=a&&s.push(`offset${u}-${a}`)})),[{...r,className:i()(n,...o,...s)},{as:e,bsPrefix:t,spans:o}]}const c=o.forwardRef(((e,t)=>{const[{className:n,...r},{as:o="div",bsPrefix:a,spans:l}]=u(e);return(0,s.jsx)(o,{...r,ref:t,className:i()(n,!l.length&&a)})}));c.displayName="Col";const d=c},94489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(72779),i=n.n(r),o=n(8258),a=n(2784),s=n(68106),l=n(22037),u=n(89263),c=n(4102),d=n(50899),f=n(52322);const p={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function h(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=p[e];return n+parseInt((0,o.Z)(t,r[0]),10)+parseInt((0,o.Z)(t,r[1]),10)}const m={[s.Wj]:"collapse",[s.Ix]:"collapsing",[s.d0]:"collapsing",[s.cn]:"collapse show"},g={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:h},y=a.forwardRef((({onEnter:e,onEntering:t,onEntered:n,onExit:r,onExiting:o,className:s,children:p,dimension:g="height",getDimensionValue:y=h,...v},b)=>{const _="function"==typeof g?g():g,w=(0,a.useMemo)((()=>(0,u.Z)((e=>{e.style[_]="0"}),e)),[_,e]),E=(0,a.useMemo)((()=>(0,u.Z)((e=>{const t=`scroll${_[0].toUpperCase()}${_.slice(1)}`;e.style[_]=`${e[t]}px`}),t)),[_,t]),S=(0,a.useMemo)((()=>(0,u.Z)((e=>{e.style[_]=null}),n)),[_,n]),x=(0,a.useMemo)((()=>(0,u.Z)((e=>{e.style[_]=`${y(_,e)}px`,(0,c.Z)(e)}),r)),[r,y,_]),k=(0,a.useMemo)((()=>(0,u.Z)((e=>{e.style[_]=null}),o)),[_,o]);return(0,f.jsx)(d.Z,{ref:b,addEndListener:l.Z,...v,"aria-expanded":v.role?v.in:null,onEnter:w,onEntering:E,onEntered:S,onExit:x,onExiting:k,childRef:p.ref,children:(e,t)=>a.cloneElement(p,{...t,className:i()(s,p.props.className,m[e],"width"===_&&"collapse-horizontal")})})}));y.defaultProps=g;const v=y},46491:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var r=n(72779),i=n.n(r),o=n(2784),a=n(58092),s=n(33127),l=n(20267),u=n(83679),c=n(18919),d=n(71054),f=n(27452),p=n(29979),h=n(72758),m=n(97749),g=n(65590),y=n(99311),v=n(47830),b=n(3428),_=n(52322);const w=["eventKey","disabled","onClick","active","as"];function E({key:e,href:t,active:n,disabled:r,onClick:i}){const a=(0,o.useContext)(g.Z),s=(0,o.useContext)(y.Z),{activeKey:l}=s||{},u=(0,g.h)(e,t),c=null==n&&null!=e?(0,g.h)(l)===u:n;return[{onClick:(0,f.Z)((e=>{r||(null==i||i(e),a&&!e.isPropagationStopped()&&a(u,e))})),"aria-disabled":r||void 0,"aria-selected":c,[(0,b.PB)("dropdown-item")]:""},{isActive:c}]}const S=o.forwardRef(((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:o,as:a=v.ZP}=e,s=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,w);const[l]=E({key:n,href:s.href,disabled:r,onClick:i,active:o});return(0,_.jsx)(a,Object.assign({},s,{ref:t},l))}));S.displayName="DropdownItem";const x=S;var k=n(18204);function T(){const e=(0,c.Z)(),t=(0,o.useRef)(null),n=(0,o.useCallback)((n=>{t.current=n,e()}),[e]);return[t,n]}function O({defaultShow:e,show:t,onSelect:n,onToggle:r,itemSelector:i=`* [${(0,b.PB)("dropdown-item")}]`,focusFirstItemOnShow:c,placement:h="bottom-start",children:y}){const v=(0,k.Z)(),[w,E]=(0,l.$c)(t,e,r),[S,x]=T(),O=S.current,[C,A]=T(),P=C.current,M=(0,u.Z)(w),D=(0,o.useRef)(null),R=(0,o.useRef)(!1),L=(0,o.useContext)(g.Z),N=(0,o.useCallback)(((e,t,n=(null==t?void 0:t.type))=>{E(e,{originalEvent:t,source:n})}),[E]),I=(0,f.Z)(((e,t)=>{null==n||n(e,t),N(!1,t,"select"),t.isPropagationStopped()||null==L||L(e,t)})),j=(0,o.useMemo)((()=>({toggle:N,placement:h,show:w,menuElement:O,toggleElement:P,setMenu:x,setToggle:A})),[N,h,w,O,P,x,A]);O&&M&&!w&&(R.current=O.contains(O.ownerDocument.activeElement));const B=(0,f.Z)((()=>{P&&P.focus&&P.focus()})),F=(0,f.Z)((()=>{const e=D.current;let t=c;if(null==t&&(t=!(!S.current||!(0,m.bt)(S.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=(0,a.Z)(S.current,i)[0];n&&n.focus&&n.focus()}));(0,o.useEffect)((()=>{w?F():R.current&&(R.current=!1,B())}),[w,R,B,F]),(0,o.useEffect)((()=>{D.current=null}));const Y=(e,t)=>{if(!S.current)return null;const n=(0,a.Z)(S.current,i);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return(0,d.Z)((0,o.useCallback)((()=>v.document),[v]),"keydown",(e=>{var t,n;const{key:r}=e,i=e.target,o=null==(t=S.current)?void 0:t.contains(i),a=null==(n=C.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&o))return;if(!o&&!a)return;if(!("Tab"!==r||S.current&&w))return;D.current=e.type;const l={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=Y(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),w){const e=Y(i,1);e&&e.focus&&e.focus()}else E(!0,l);return;case"Tab":(0,s.ZP)(i.ownerDocument,"keyup",(e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=S.current)&&t.contains(e.target)||E(!1,l)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),E(!1,l)}})),(0,_.jsx)(g.Z.Provider,{value:I,children:(0,_.jsx)(p.Z.Provider,{value:j,children:y})})}O.displayName="Dropdown",O.Menu=h.Z,O.Toggle=m.ZP,O.Item=x;const C=O;var A=n(77412),P=n(9959),M=n(29658);const D=o.forwardRef((({bsPrefix:e,className:t,eventKey:n,disabled:r=!1,onClick:o,active:a,as:s=P.Z,...l},u)=>{const c=(0,M.vE)(e,"dropdown-item"),[d,f]=E({key:n,href:l.href,disabled:r,onClick:o,active:a});return(0,_.jsx)(s,{...l,...d,ref:u,className:i()(t,c,f.isActive&&"active",r&&"disabled")})}));D.displayName="DropdownItem";const R=D;var L=n(36663),N=n(96781),I=n(32094),j=n(89023);const B=(0,j.Z)("dropdown-header",{defaultProps:{role:"heading"}}),F=(0,j.Z)("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),Y=(0,j.Z)("dropdown-item-text",{Component:"span"}),H=o.forwardRef(((e,t)=>{const{bsPrefix:n,drop:r,show:a,className:s,align:u,onSelect:c,onToggle:d,focusFirstItemOnShow:p,as:h="div",navbar:m,autoClose:g,...y}=(0,l.Ch)(e,{show:"onToggle"}),v=(0,o.useContext)(I.Z),b=(0,M.vE)(n,"dropdown"),w=(0,M.SC)(),E=(0,f.Z)(((e,t)=>{var n;t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),n=t.source,(!1===g?"click"===n:"inside"===g?"rootClose"!==n:"outside"!==g||"select"!==n)&&(null==d||d(e,t))})),S="end"===u,x=(0,L.J)(S,r,w),k=(0,o.useMemo)((()=>({align:u,drop:r,isRTL:w})),[u,r,w]);return(0,_.jsx)(A.Z.Provider,{value:k,children:(0,_.jsx)(C,{placement:x,show:a,onSelect:c,onToggle:E,focusFirstItemOnShow:p,itemSelector:`.${b}-item:not(.disabled):not(:disabled)`,children:v?y.children:(0,_.jsx)(h,{...y,ref:t,className:i()(s,a&&"show",(!r||"down"===r)&&b,"up"===r&&"dropup","end"===r&&"dropend","start"===r&&"dropstart")})})})}));H.displayName="Dropdown",H.defaultProps={navbar:!1,align:"start",autoClose:!0};const V=Object.assign(H,{Toggle:N.Z,Menu:L.Z,Item:R,ItemText:Y,Divider:F,Header:B})},77412:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext({});r.displayName="DropdownContext";const i=r},36663:(e,t,n)=>{"use strict";n.d(t,{J:()=>m,Z:()=>y});var r=n(72779),i=n.n(r),o=n(2784),a=n(72758),s=n(34868),l=n(25879),u=(n(45982),n(77412)),c=n(32094),d=n(15462),f=n(29658),p=n(45021),h=n(52322);function m(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t&&(r=e?n?"right-end":"left-end":n?"right-start":"left-start"),r}const g=o.forwardRef((({bsPrefix:e,className:t,align:n,rootCloseEvent:r,flip:g,show:y,renderOnMount:v,as:b="div",popperConfig:_,variant:w,...E},S)=>{let x=!1;const k=(0,o.useContext)(d.Z),T=(0,f.vE)(e,"dropdown-menu"),{align:O,drop:C,isRTL:A}=(0,o.useContext)(u.Z);n=n||O;const P=(0,o.useContext)(c.Z),M=[];if(n)if("object"==typeof n){const e=Object.keys(n);if(e.length){const t=e[0],r=n[t];x="start"===r,M.push(`${T}-${t}-${r}`)}}else"end"===n&&(x=!0);const D=m(x,C,A),[R,{hasShown:L,popper:N,show:I,toggle:j}]=(0,a.d)({flip:g,rootCloseEvent:r,show:y,usePopper:!k&&0===M.length,offset:[0,2],popperConfig:_,placement:D});if(R.ref=(0,l.Z)((0,p.Z)(S,"DropdownMenu"),R.ref),(0,s.Z)((()=>{I&&(null==N||N.update())}),[I]),!L&&!v&&!P)return null;"string"!=typeof b&&(R.show=I,R.close=()=>null==j?void 0:j(!1),R.align=n);let B=E.style;return null!=N&&N.placement&&(B={...E.style,...R.style},E["x-placement"]=N.placement),(0,h.jsx)(b,{...E,...R,style:B,...(M.length||k)&&{"data-bs-popper":"static"},className:i()(t,T,I&&"show",x&&`${T}-end`,w&&`${T}-${w}`,...M)})}));g.displayName="DropdownMenu",g.defaultProps={flip:!0};const y=g},96781:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(72779),i=n.n(r),o=n(2784),a=n(97749),s=n(29979),l=n(25879),u=n(70561),c=n(32094),d=n(29658),f=n(45021),p=n(52322);const h=o.forwardRef((({bsPrefix:e,split:t,className:n,childBsPrefix:r,as:h=u.default,...m},g)=>{const y=(0,d.vE)(e,"dropdown-toggle"),v=(0,o.useContext)(s.Z),b=(0,o.useContext)(c.Z);void 0!==r&&(m.bsPrefix=r);const[_]=(0,a.Jr)();return _.ref=(0,l.Z)(_.ref,(0,f.Z)(g,"DropdownToggle")),(0,p.jsx)(h,{className:i()(n,y,t&&`${y}-split`,!!b&&(null==v?void 0:v.show)&&"show"),..._,...m})}));h.displayName="DropdownToggle";const m=h},21027:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>o,UI:()=>i,XW:()=>a});var r=n(2784);function i(e,t){let n=0;return r.Children.map(e,(e=>r.isValidElement(e)?t(e,n++):e))}function o(e,t){let n=0;r.Children.forEach(e,(e=>{r.isValidElement(e)&&t(e,n++)}))}function a(e,t){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===t))}},58370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(72779),i=n.n(r),o=n(2784),a=n(68106),s=n(22037),l=n(4102),u=n(50899),c=n(52322);const d={[a.d0]:"show",[a.cn]:"show"},f=o.forwardRef((({className:e,children:t,transitionClasses:n={},...r},a)=>{const f=(0,o.useCallback)(((e,t)=>{(0,l.Z)(e),null==r.onEnter||r.onEnter(e,t)}),[r]);return(0,c.jsx)(u.Z,{ref:a,addEndListener:s.Z,...r,onEnter:f,childRef:t.ref,children:(r,a)=>o.cloneElement(t,{...a,className:i()("fade",e,t.props.className,d[r],n[r])})})}));f.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},f.displayName="Fade";const p=f},68541:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(72779),i=n.n(r),o=n(2784),a=n(13980),s=n.n(a),l=n(52322);const u={type:s().string,tooltip:s().bool,as:s().elementType},c=o.forwardRef((({as:e="div",className:t,type:n="valid",tooltip:r=!1,...o},a)=>(0,l.jsx)(e,{...o,ref:a,className:i()(t,`${n}-${r?"tooltip":"feedback"}`)})));c.displayName="Feedback",c.propTypes=u;const d=c},59831:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(89023),i=n(72779),o=n.n(i),a=n(2784),s=n(3299),l=n(52322);const u=a.forwardRef((({className:e,...t},n)=>(0,l.jsx)(s.default,{ref:n,...t,className:o()(e,"figure-img")})));u.displayName="FigureImage",u.propTypes=s.propTypes,u.defaultProps={fluid:!0};const c=u,d=(0,r.Z)("figure-caption",{Component:"figcaption"}),f=(0,r.Z)("figure",{Component:"figure"}),p=Object.assign(f,{Image:c,Caption:d})},39981:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(10863),s=n(29658),l=n(52322);const u=o.forwardRef((({bsPrefix:e,className:t,children:n,controlId:r,label:o,...u},c)=>(e=(0,s.vE)(e,"form-floating"),(0,l.jsxs)(a.Z,{ref:c,className:i()(t,e),controlId:r,...u,children:[n,(0,l.jsx)("label",{htmlFor:r,children:o})]}))));u.displayName="FloatingLabel";const c=u},16083:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(72779),i=n.n(r),o=n(13980),a=n.n(o),s=n(2784),l=n(23117),u=n(26266),c=n(59610),d=n(10863),f=n(30650),p=n(29658),h=n(60035),m=n(52322);const g=s.forwardRef((({bsPrefix:e,className:t,id:n,...r},o)=>{const{controlId:a}=(0,s.useContext)(h.Z);return e=(0,p.vE)(e,"form-range"),(0,m.jsx)("input",{...r,type:"range",ref:o,className:i()(t,e),id:n||a})}));g.displayName="FormRange";const y=g;var v=n(88567),b=n(96904);const _=s.forwardRef(((e,t)=>(0,m.jsx)(l.Z,{...e,ref:t,type:"switch"})));_.displayName="Switch";const w=Object.assign(_,{Input:l.Z.Input,Label:l.Z.Label});var E=n(39981);const S={_ref:a().any,validated:a().bool,as:a().elementType},x=s.forwardRef((({className:e,validated:t,as:n="form",...r},o)=>(0,m.jsx)(n,{...r,ref:o,className:i()(e,t&&"was-validated")})));x.displayName="Form",x.propTypes=S;const k=Object.assign(x,{Group:d.Z,Control:u.Z,Floating:c.Z,Check:l.Z,Switch:w,Label:f.Z,Text:b.Z,Range:y,Select:v.Z,FloatingLabel:E.Z})},23117:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(72779),i=n.n(r),o=n(2784),a=n(68541),s=n(76597),l=n(60035),u=n(29658),c=n(52322);const d=o.forwardRef((({bsPrefix:e,className:t,htmlFor:n,...r},a)=>{const{controlId:s}=(0,o.useContext)(l.Z);return e=(0,u.vE)(e,"form-check-label"),(0,c.jsx)("label",{...r,ref:a,htmlFor:n||s,className:i()(t,e)})}));d.displayName="FormCheckLabel";const f=d;var p=n(21027);const h=o.forwardRef((({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:r=!1,disabled:d=!1,isValid:h=!1,isInvalid:m=!1,feedbackTooltip:g=!1,feedback:y,feedbackType:v,className:b,style:_,title:w="",type:E="checkbox",label:S,children:x,as:k="input",...T},O)=>{t=(0,u.vE)(t,"form-check"),n=(0,u.vE)(n,"form-switch");const{controlId:C}=(0,o.useContext)(l.Z),A=(0,o.useMemo)((()=>({controlId:e||C})),[C,e]),P=!x&&null!=S&&!1!==S||(0,p.XW)(x,f),M=(0,c.jsx)(s.Z,{...T,type:"switch"===E?"checkbox":E,ref:O,isValid:h,isInvalid:m,disabled:d,as:k});return(0,c.jsx)(l.Z.Provider,{value:A,children:(0,c.jsx)("div",{style:_,className:i()(b,P&&t,r&&`${t}-inline`,"switch"===E&&n),children:x||(0,c.jsxs)(c.Fragment,{children:[M,P&&(0,c.jsx)(f,{title:w,children:S}),y&&(0,c.jsx)(a.Z,{type:v,tooltip:g,children:y})]})})})}));h.displayName="FormCheck";const m=Object.assign(h,{Input:s.Z,Label:f})},76597:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(60035),s=n(29658),l=n(52322);const u=o.forwardRef((({id:e,bsPrefix:t,className:n,type:r="checkbox",isValid:u=!1,isInvalid:c=!1,as:d="input",...f},p)=>{const{controlId:h}=(0,o.useContext)(a.Z);return t=(0,s.vE)(t,"form-check-input"),(0,l.jsx)(d,{...f,ref:p,type:r,id:e||h,className:i()(n,t,u&&"is-valid",c&&"is-invalid")})}));u.displayName="FormCheckInput";const c=u},60035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2784).createContext({})},26266:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(72779),i=n.n(r),o=n(2784),a=(n(45982),n(68541)),s=n(60035),l=n(29658),u=n(52322);const c=o.forwardRef((({bsPrefix:e,type:t,size:n,htmlSize:r,id:a,className:c,isValid:d=!1,isInvalid:f=!1,plaintext:p,readOnly:h,as:m="input",...g},y)=>{const{controlId:v}=(0,o.useContext)(s.Z);let b;return e=(0,l.vE)(e,"form-control"),b=p?{[`${e}-plaintext`]:!0}:{[e]:!0,[`${e}-${n}`]:n},(0,u.jsx)(m,{...g,type:t,size:r,ref:y,readOnly:h,id:a||v,className:i()(c,b,d&&"is-valid",f&&"is-invalid","color"===t&&`${e}-color`)})}));c.displayName="FormControl";const d=Object.assign(c,{Feedback:a.Z})},59610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("form-floating")},10863:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2784),i=n(60035),o=n(52322);const a=r.forwardRef((({controlId:e,as:t="div",...n},a)=>{const s=(0,r.useMemo)((()=>({controlId:e})),[e]);return(0,o.jsx)(i.Z.Provider,{value:s,children:(0,o.jsx)(t,{...n,ref:a})})}));a.displayName="FormGroup";const s=a},30650:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(72779),i=n.n(r),o=n(2784),a=(n(45982),n(12594)),s=n(60035),l=n(29658),u=n(52322);const c=o.forwardRef((({as:e="label",bsPrefix:t,column:n,visuallyHidden:r,className:c,htmlFor:d,...f},p)=>{const{controlId:h}=(0,o.useContext)(s.Z);t=(0,l.vE)(t,"form-label");let m="col-form-label";"string"==typeof n&&(m=`${m} ${m}-${n}`);const g=i()(c,t,r&&"visually-hidden",n&&m);return d=d||h,n?(0,u.jsx)(a.Z,{ref:p,as:"label",className:g,htmlFor:d,...f}):(0,u.jsx)(e,{ref:p,className:g,htmlFor:d,...f})}));c.displayName="FormLabel",c.defaultProps={column:!1,visuallyHidden:!1};const d=c},88567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(60035),l=n(52322);const u=o.forwardRef((({bsPrefix:e,size:t,htmlSize:n,className:r,isValid:u=!1,isInvalid:c=!1,id:d,...f},p)=>{const{controlId:h}=(0,o.useContext)(s.Z);return e=(0,a.vE)(e,"form-select"),(0,l.jsx)("select",{...f,size:n,ref:p,className:i()(r,e,t&&`${e}-${t}`,u&&"is-valid",c&&"is-invalid"),id:d||h})}));u.displayName="FormSelect";const c=u},96904:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,as:n="small",muted:r,...o},l)=>(e=(0,a.vE)(e,"form-text"),(0,s.jsx)(n,{...o,ref:l,className:i()(t,e,r&&"text-muted")}))));l.displayName="FormText";const u=l},3299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f,propTypes:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(13980),s=n.n(a),l=n(29658),u=n(52322);const c={bsPrefix:s().string,fluid:s().bool,rounded:s().bool,roundedCircle:s().bool,thumbnail:s().bool},d=o.forwardRef((({bsPrefix:e,className:t,fluid:n,rounded:r,roundedCircle:o,thumbnail:a,...s},c)=>(e=(0,l.vE)(e,"img"),(0,u.jsx)("img",{ref:c,...s,className:i()(t,n&&`${e}-fluid`,r&&"rounded",o&&"rounded-circle",a&&`${e}-thumbnail`)}))));d.displayName="Image",d.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};const f=d},9203:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(72779),i=n.n(r),o=n(2784),a=n(89023),s=n(29658),l=n(76597),u=n(32094),c=n(52322);const d=(0,a.Z)("input-group-text",{Component:"span"}),f=o.forwardRef((({bsPrefix:e,size:t,hasValidation:n,className:r,as:a="div",...l},d)=>{e=(0,s.vE)(e,"input-group");const f=(0,o.useMemo)((()=>({})),[]);return(0,c.jsx)(u.Z.Provider,{value:f,children:(0,c.jsx)(a,{ref:d,...l,className:i()(r,e,t&&`${e}-${t}`,n&&"has-validation")})})}));f.displayName="InputGroup";const p=Object.assign(f,{Text:d,Radio:e=>(0,c.jsx)(d,{children:(0,c.jsx)(l.Z,{type:"radio",...e})}),Checkbox:e=>(0,c.jsx)(d,{children:(0,c.jsx)(l.Z,{type:"checkbox",...e})})})},32094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext(null);r.displayName="InputGroupContext";const i=r},88304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=(n(45982),n(20267)),s=n(53154),l=n(29658),u=n(12860),c=n(52322);const d=o.forwardRef(((e,t)=>{const{className:n,bsPrefix:r,variant:o,horizontal:u,numbered:d,as:f="div",...p}=(0,a.Ch)(e,{activeKey:"onSelect"}),h=(0,l.vE)(r,"list-group");let m;return u&&(m=!0===u?"horizontal":`horizontal-${u}`),(0,c.jsx)(s.Z,{ref:t,...p,as:f,className:i()(n,h,o&&`${h}-${o}`,m&&`${h}-${m}`,d&&`${h}-numbered`)})}));d.displayName="ListGroup";const f=Object.assign(d,{Item:u.Z})},12860:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=n(27452),s=n(21528),l=n(65590),u=n(29658),c=n(52322);const d=o.forwardRef((({bsPrefix:e,active:t,disabled:n,eventKey:r,className:o,variant:d,action:f,as:p,...h},m)=>{e=(0,u.vE)(e,"list-group-item");const[g,y]=(0,s.v)({key:(0,l.h)(r,h.href),active:t,...h}),v=(0,a.Z)((e=>{if(n)return e.preventDefault(),void e.stopPropagation();g.onClick(e)}));n&&void 0===h.tabIndex&&(h.tabIndex=-1,h["aria-disabled"]=!0);const b=p||(f?h.href?"a":"button":"div");return(0,c.jsx)(b,{ref:m,...h,...g,onClick:v,className:i()(o,e,y.isActive&&"active",n&&"disabled",d&&`${e}-${d}`,f&&`${e}-action`)})}));d.displayName="ListGroupItem";const f=d},69153:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var r,i=n(72779),o=n.n(i),a=n(33127),s=n(37101),l=n(48968),u=n(88555);function c(e){if((!r&&0!==r||e)&&s.Z){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r}var d=n(33335),f=n(27452),p=n(25879),h=n(22364),m=n(30268),g=n(2784),y=n(74111),v=n(98550),b=n(58370),_=n(7637),w=n(4905),E=n(27467),S=n(19731),x=n(29658),k=n(25501),T=n(52322);const O=g.forwardRef((({bsPrefix:e,className:t,...n},r)=>(e=(0,x.vE)(e,"modal-header"),(0,T.jsx)(k.Z,{ref:r,...n,className:o()(t,e)}))));O.displayName="ModalHeader",O.defaultProps={closeLabel:"Close",closeButton:!1};const C=O;var A=n(31599);const P={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:E.Z};function M(e){return(0,T.jsx)(b.Z,{...e,timeout:null})}function D(e){return(0,T.jsx)(b.Z,{...e,timeout:null})}const R=g.forwardRef((({bsPrefix:e,className:t,style:n,dialogClassName:r,contentClassName:i,children:b,dialogAs:_,"aria-labelledby":E,show:S,animation:k,backdrop:O,keyboard:C,onEscapeKeyDown:A,onShow:P,onHide:R,container:L,autoFocus:N,enforceFocus:I,restoreFocus:j,restoreFocusOptions:B,onEntered:F,onExit:Y,onExiting:H,onEnter:V,onEntering:q,onExited:U,backdropClassName:W,manager:z,...G},$)=>{const[K,Z]=(0,g.useState)({}),[J,Q]=(0,g.useState)(!1),X=(0,g.useRef)(!1),ee=(0,g.useRef)(!1),te=(0,g.useRef)(null),[ne,re]=(0,d.Z)(),ie=(0,p.Z)($,re),oe=(0,f.Z)(R),ae=(0,x.SC)();e=(0,x.vE)(e,"modal");const se=(0,g.useMemo)((()=>({onHide:oe})),[oe]);function le(){return z||(0,v.t)({isRTL:ae})}function ue(e){if(!s.Z)return;const t=le().getScrollbarWidth()>0,n=e.scrollHeight>(0,l.Z)(e).documentElement.clientHeight;Z({paddingRight:t&&!n?c():void 0,paddingLeft:!t&&n?c():void 0})}const ce=(0,f.Z)((()=>{ne&&ue(ne.dialog)}));(0,h.Z)((()=>{(0,u.Z)(window,"resize",ce),null==te.current||te.current()}));const de=()=>{X.current=!0},fe=e=>{X.current&&ne&&e.target===ne.dialog&&(ee.current=!0),X.current=!1},pe=()=>{Q(!0),te.current=(0,m.Z)(ne.dialog,(()=>{Q(!1)}))},he=e=>{"static"!==O?ee.current||e.target!==e.currentTarget?ee.current=!1:null==R||R():(e=>{e.target===e.currentTarget&&pe()})(e)},me=(0,g.useCallback)((t=>(0,T.jsx)("div",{...t,className:o()(`${e}-backdrop`,W,!k&&"show")})),[k,W,e]),ge={...n,...K};k||(ge.display="block");return(0,T.jsx)(w.Z.Provider,{value:se,children:(0,T.jsx)(y.Z,{show:S,ref:ie,backdrop:O,container:L,keyboard:!0,autoFocus:N,enforceFocus:I,restoreFocus:j,restoreFocusOptions:B,onEscapeKeyDown:e=>{C||"static"!==O?C&&A&&A(e):(e.preventDefault(),pe())},onShow:P,onHide:R,onEnter:(e,t)=>{e&&(e.style.display="block",ue(e)),null==V||V(e,t)},onEntering:(e,t)=>{null==q||q(e,t),(0,a.ZP)(window,"resize",ce)},onEntered:F,onExit:e=>{null==te.current||te.current(),null==Y||Y(e)},onExiting:H,onExited:e=>{e&&(e.style.display=""),null==U||U(e),(0,u.Z)(window,"resize",ce)},manager:le(),transition:k?M:void 0,backdropTransition:k?D:void 0,renderBackdrop:me,renderDialog:n=>(0,T.jsx)("div",{role:"dialog",...n,style:ge,className:o()(t,e,J&&`${e}-static`),onClick:O?he:void 0,onMouseUp:fe,"aria-labelledby":E,children:(0,T.jsx)(_,{...G,onMouseDown:de,className:r,contentClassName:i,children:b})})})})}));R.displayName="Modal",R.defaultProps=P;const L=Object.assign(R,{Body:_.Z,Header:C,Title:A.Z,Footer:S.Z,Dialog:E.Z,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},7637:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("modal-body")},4905:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2784).createContext({onHide(){}})},27467:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,contentClassName:n,centered:r,size:o,fullscreen:l,children:u,scrollable:c,...d},f)=>{const p=`${e=(0,a.vE)(e,"modal")}-dialog`,h="string"==typeof l?`${e}-fullscreen-${l}`:`${e}-fullscreen`;return(0,s.jsx)("div",{...d,ref:f,className:i()(p,t,o&&`${e}-${o}`,r&&`${p}-centered`,c&&`${p}-scrollable`,l&&h),children:(0,s.jsx)("div",{className:i()(`${e}-content`,n),children:u})})}));l.displayName="ModalDialog";const u=l},19731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("modal-footer")},31599:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(89023);const i=(0,n(46879).Z)("h4"),o=(0,r.Z)("modal-title",{Component:i})},69862:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(72779),i=n.n(r),o=(n(70688),n(2784)),a=n(20267),s=n(53154),l=n(29658),u=n(15462),c=n(27064),d=n(77029),f=n(6198),p=n(52322);const h=o.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:r,variant:d,fill:f,justify:h,navbar:m,navbarScroll:g,className:y,activeKey:v,...b}=(0,a.Ch)(e,{activeKey:"onSelect"}),_=(0,l.vE)(r,"nav");let w,E,S=!1;const x=(0,o.useContext)(u.Z),k=(0,o.useContext)(c.Z);return x?(w=x.bsPrefix,S=null==m||m):k&&({cardHeaderBsPrefix:E}=k),(0,p.jsx)(s.Z,{as:n,ref:t,activeKey:v,className:i()(y,{[_]:!S,[`${w}-nav`]:S,[`${w}-nav-scroll`]:S&&g,[`${E}-${d}`]:!!E,[`${_}-${d}`]:!!d,[`${_}-fill`]:f,[`${_}-justified`]:h}),...b})}));h.displayName="Nav",h.defaultProps={justify:!1,fill:!1};const m=Object.assign(h,{Item:d.Z,Link:f.Z})},77029:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("nav-item")},6198:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=n(9959),s=n(21528),l=n(65590),u=n(29658),c=n(52322);const d=o.forwardRef((({bsPrefix:e,className:t,as:n=a.Z,active:r,eventKey:o,...d},f)=>{e=(0,u.vE)(e,"nav-link");const[p,h]=(0,s.v)({key:(0,l.h)(o,d.href),active:r,...d});return(0,c.jsx)(n,{...d,...p,ref:f,className:i()(t,e,d.disabled&&"disabled",h.isActive&&"active")})}));d.displayName="NavLink",d.defaultProps={disabled:!1};const f=d},53817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(72779),i=n.n(r),o=n(2784),a=n(65590),s=n(20267),l=n(89023),u=n(22338),c=n(94489),d=n(29658),f=n(15462),p=n(52322);const h=o.forwardRef((({children:e,bsPrefix:t,...n},r)=>{t=(0,d.vE)(t,"navbar-collapse");const i=(0,o.useContext)(f.Z);return(0,p.jsx)(c.Z,{in:!(!i||!i.expanded),...n,children:(0,p.jsx)("div",{ref:r,className:t,children:e})})}));h.displayName="NavbarCollapse";const m=h;var g=n(27452);const y=o.forwardRef((({bsPrefix:e,className:t,children:n,label:r,as:a="button",onClick:s,...l},u)=>{e=(0,d.vE)(e,"navbar-toggler");const{onToggle:c,expanded:h}=(0,o.useContext)(f.Z)||{},m=(0,g.Z)((e=>{s&&s(e),c&&c()}));return"button"===a&&(l.type="button"),(0,p.jsx)(a,{...l,ref:u,onClick:m,"aria-label":r,className:i()(t,e,!h&&"collapsed"),children:n||(0,p.jsx)("span",{className:`${e}-icon`})})}));y.displayName="NavbarToggle",y.defaultProps={label:"Toggle navigation"};const v=y;var b=n(29578);const _=o.forwardRef(((e,t)=>{const n=(0,o.useContext)(f.Z);return(0,p.jsx)(b.default,{ref:t,show:!(null==n||!n.expanded),...e})}));_.displayName="NavbarOffcanvas";const w=_,E=(0,l.Z)("navbar-text",{Component:"span"}),S=o.forwardRef(((e,t)=>{const{bsPrefix:n,expand:r,variant:l,bg:u,fixed:c,sticky:h,className:m,as:g="nav",expanded:y,onToggle:v,onSelect:b,collapseOnSelect:_,...w}=(0,s.Ch)(e,{expanded:"onToggle"}),E=(0,d.vE)(n,"navbar"),S=(0,o.useCallback)(((...e)=>{null==b||b(...e),_&&y&&(null==v||v(!1))}),[b,_,y,v]);void 0===w.role&&"nav"!==g&&(w.role="navigation");let x=`${E}-expand`;"string"==typeof r&&(x=`${x}-${r}`);const k=(0,o.useMemo)((()=>({onToggle:()=>null==v?void 0:v(!y),bsPrefix:E,expanded:!!y})),[E,y,v]);return(0,p.jsx)(f.Z.Provider,{value:k,children:(0,p.jsx)(a.Z.Provider,{value:S,children:(0,p.jsx)(g,{ref:t,...w,className:i()(m,E,r&&x,l&&`${E}-${l}`,u&&`bg-${u}`,h&&`sticky-${h}`,c&&`fixed-${c}`)})})})}));S.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},S.displayName="Navbar";const x=Object.assign(S,{Brand:u.Z,Collapse:m,Offcanvas:w,Text:E,Toggle:v})},22338:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,as:n,...r},o)=>{e=(0,a.vE)(e,"navbar-brand");const l=n||(r.href?"a":"span");return(0,s.jsx)(l,{...r,ref:o,className:i()(t,e)})}));l.displayName="NavbarBrand";const u=l},15462:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=n(2784).createContext(null);r.displayName="NavbarContext";const i=r},29578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r=n(72779),i=n.n(r),o=n(27452),a=n(2784),s=n(74111),l=n(58370),u=n(52780),c=n(68106),d=n(22037),f=n(50899),p=n(29658),h=n(52322);const m={[c.d0]:"show",[c.cn]:"show"},g=a.forwardRef((({bsPrefix:e,className:t,children:n,...r},o)=>(e=(0,p.vE)(e,"offcanvas"),(0,h.jsx)(f.Z,{ref:o,addEndListener:d.Z,...r,childRef:n.ref,children:(r,o)=>a.cloneElement(n,{...o,className:i()(t,n.props.className,(r===c.d0||r===c.Ix)&&`${e}-toggling`,m[r])})}))));g.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},g.displayName="OffcanvasToggling";const y=g;var v=n(4905),b=n(15462),_=n(98491),w=n(74976),E=n(98550);function S(e){return(0,h.jsx)(y,{...e})}function x(e){return(0,h.jsx)(l.Z,{...e})}const k=a.forwardRef((({bsPrefix:e,className:t,children:n,"aria-labelledby":r,placement:l,show:u,backdrop:c,keyboard:d,scroll:f,onEscapeKeyDown:m,onShow:g,onHide:y,container:_,autoFocus:w,enforceFocus:k,restoreFocus:T,restoreFocusOptions:O,onEntered:C,onExit:A,onExiting:P,onEnter:M,onEntering:D,onExited:R,backdropClassName:L,manager:N,...I},j)=>{const B=(0,a.useRef)();e=(0,p.vE)(e,"offcanvas");const{onToggle:F}=(0,a.useContext)(b.Z)||{},Y=(0,o.Z)((()=>{null==F||F(),null==y||y()})),H=(0,a.useMemo)((()=>({onHide:Y})),[Y]);const V=(0,a.useCallback)((t=>(0,h.jsx)("div",{...t,className:i()(`${e}-backdrop`,L)})),[L,e]);return(0,h.jsx)(v.Z.Provider,{value:H,children:(0,h.jsx)(s.Z,{show:u,ref:j,backdrop:c,container:_,keyboard:d,autoFocus:w,enforceFocus:k&&!f,restoreFocus:T,restoreFocusOptions:O,onEscapeKeyDown:m,onShow:g,onHide:Y,onEnter:(e,...t)=>{e&&(e.style.visibility="visible"),null==M||M(e,...t)},onEntering:D,onEntered:C,onExit:A,onExiting:P,onExited:(e,...t)=>{e&&(e.style.visibility=""),null==R||R(...t)},manager:N||(f?(B.current||(B.current=new E.Z({handleContainerOverflow:!1})),B.current):(0,E.t)()),transition:S,backdropTransition:x,renderBackdrop:V,renderDialog:o=>(0,h.jsx)("div",{role:"dialog",...o,...I,className:i()(t,e,`${e}-${l}`),"aria-labelledby":r,children:n})})})}));k.displayName="Offcanvas",k.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};const T=Object.assign(k,{Body:u.Z,Header:_.Z,Title:w.Z})},52780:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("offcanvas-body")},98491:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(25501),l=n(52322);const u=o.forwardRef((({bsPrefix:e,className:t,...n},r)=>(e=(0,a.vE)(e,"offcanvas-header"),(0,l.jsx)(s.Z,{ref:r,...n,className:i()(t,e)}))));u.displayName="OffcanvasHeader",u.defaultProps={closeLabel:"Close",closeButton:!1};const c=u},74976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(89023);const i=(0,n(46879).Z)("h5"),o=(0,r.Z)("offcanvas-title",{Component:i})},3412:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var r=n(2784),i=n(72779),o=n.n(i),a=n(28316),s=n(33335),l=n(25879),u=n(76051),c=n(76909),d=n(28474),f=n(48273),p=n(52322);const h=r.forwardRef(((e,t)=>{const{flip:n,offset:i,placement:o,containerPadding:h,popperConfig:m={},transition:g}=e,[y,v]=(0,s.Z)(),[b,_]=(0,s.Z)(),w=(0,l.Z)(v,t),E=(0,d.Z)(e.container),S=(0,d.Z)(e.target),[x,k]=(0,r.useState)(!e.show),T=(0,u.Z)(S,y,(0,f.ZP)({placement:o,enableEvents:!!e.show,containerPadding:h||5,flip:n,offset:i,arrowElement:b,popperConfig:m}));e.show?x&&k(!1):e.transition||x||k(!0);const O=(...t)=>{k(!0),e.onExited&&e.onExited(...t)},C=e.show||g&&!x;if((0,c.Z)(y,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!C)return null;let A=e.children(Object.assign({},T.attributes.popper,{style:T.styles.popper,ref:w}),{popper:T,placement:o,show:!!e.show,arrowProps:Object.assign({},T.attributes.arrow,{style:T.styles.arrow,ref:_})});if(g){const{onExit:t,onExiting:n,onEnter:r,onEntering:i,onEntered:o}=e;A=(0,p.jsx)(g,{in:e.show,appear:!0,onExit:t,onExiting:n,onExited:O,onEnter:r,onEntering:i,onEntered:o,children:A})}return E?a.createPortal(A,E):null}));h.displayName="Overlay";const m=h;var g=n(82456),y=n(29658),v=n(35376);var b=n(58370),_=n(87895);const w={transition:b.Z,rootClose:!1,show:!1,placement:"top"};const E=r.forwardRef((({children:e,transition:t,popperConfig:n={},...i},a)=>{const s=(0,r.useRef)({}),[u,c]=function(){const e=(0,r.useRef)(null),t=(0,y.vE)(void 0,"popover"),n=(0,r.useMemo)((()=>({name:"offset",options:{offset:()=>e.current&&(0,g.Z)(e.current,t)?v.default.POPPER_OFFSET:[0,0]}})),[t]);return[e,[n]]}(),d=(0,l.Z)(a,u),f=!0===t?b.Z:t||void 0;return(0,p.jsx)(m,{...i,ref:d,popperConfig:{...n,modifiers:c.concat(n.modifiers||[])},transition:f,children:(n,{arrowProps:i,placement:a,popper:l,show:u})=>{var c,d;!function(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n((0,_.Z)(e))),t.ref=r.__wrapped||(r.__wrapped=e=>r((0,_.Z)(e)))}(n,i);const f=Object.assign(s.current,{state:null==l?void 0:l.state,scheduleUpdate:null==l?void 0:l.update,placement:a,outOfBoundaries:(null==l||null==(c=l.state)||null==(d=c.modifiersData.hide)?void 0:d.isReferenceHidden)||!1});return"function"==typeof e?e({...n,placement:a,show:u,...!t&&u&&{className:"show"},popper:f,arrowProps:i}):r.cloneElement(e,{...n,placement:a,arrowProps:i,popper:f,className:o()(e.props.className,!t&&u&&"show"),style:{...e.props.style,...n.style}})}})}));E.displayName="Overlay",E.defaultProps=w;const S=E},64463:(e,t,n)=>{"use strict";n.d(t,{Ol:()=>f,ZP:()=>u,mH:()=>p,o6:()=>h,s2:()=>d,t5:()=>m});var r=n(72779),i=n.n(r),o=n(2784),a=n(9959),s=n(52322);const l=o.forwardRef((({active:e,disabled:t,className:n,style:r,activeLabel:o,children:l,...u},c)=>{const d=e||t?"span":a.Z;return(0,s.jsx)("li",{ref:c,style:r,className:i()(n,"page-item",{active:e,disabled:t}),children:(0,s.jsxs)(d,{className:"page-link",disabled:t,...u,children:[l,e&&o&&(0,s.jsx)("span",{className:"visually-hidden",children:o})]})})}));l.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},l.displayName="PageItem";const u=l;function c(e,t,n=e){function r({children:e,...r}){return(0,s.jsxs)(l,{...r,children:[(0,s.jsx)("span",{"aria-hidden":"true",children:e||t}),(0,s.jsx)("span",{className:"visually-hidden",children:n})]})}return r.displayName=e,r}const d=c("First","«"),f=c("Prev","‹","Previous"),p=c("Ellipsis","…","More"),h=c("Next","›"),m=c("Last","»")},64882:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(64463),l=n(52322);const u=o.forwardRef((({bsPrefix:e,className:t,size:n,...r},o)=>{const s=(0,a.vE)(e,"pagination");return(0,l.jsx)("ul",{ref:o,...r,className:i()(t,s,n&&`${s}-${n}`)})}));u.displayName="Pagination";const c=Object.assign(u,{First:s.s2,Prev:s.Ol,Ellipsis:s.mH,Item:s.ZP,Next:s.o6,Last:s.t5})},35376:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(92500),l=n(62816),u=n(23758),c=n(52322);const d=o.forwardRef((({bsPrefix:e,placement:t,className:n,style:r,children:o,body:s,arrowProps:d,popper:f,show:p,...h},m)=>{const g=(0,a.vE)(e,"popover"),y=(0,a.SC)(),[v]=(null==t?void 0:t.split("-"))||[],b=(0,u.z)(v,y);return(0,c.jsxs)("div",{ref:m,role:"tooltip",style:r,"x-placement":v,className:i()(n,g,v&&`bs-popover-${b}`),...h,children:[(0,c.jsx)("div",{className:"popover-arrow",...d}),s?(0,c.jsx)(l.Z,{children:o}):o]})}));d.defaultProps={placement:"right"};const f=Object.assign(d,{Header:s.Z,Body:l.Z,POPPER_OFFSET:[0,8]})},62816:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("popover-body")},92500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("popover-header")},98856:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(21027),l=n(52322);function u(e,t,n){const r=(e-t)/(n-t)*100;return Math.round(1e3*r)/1e3}function c({min:e,now:t,max:n,label:r,visuallyHidden:o,striped:a,animated:s,className:c,style:d,variant:f,bsPrefix:p,...h},m){return(0,l.jsx)("div",{ref:m,...h,role:"progressbar",className:i()(c,`${p}-bar`,{[`bg-${f}`]:f,[`${p}-bar-animated`]:s,[`${p}-bar-striped`]:s||a}),style:{width:`${u(t,e,n)}%`,...d},"aria-valuenow":t,"aria-valuemin":e,"aria-valuemax":n,children:o?(0,l.jsx)("span",{className:"visually-hidden",children:r}):r})}const d=o.forwardRef((({isChild:e,...t},n)=>{if(t.bsPrefix=(0,a.vE)(t.bsPrefix,"progress"),e)return c(t,n);const{min:r,now:u,max:d,label:f,visuallyHidden:p,striped:h,animated:m,bsPrefix:g,variant:y,className:v,children:b,..._}=t;return(0,l.jsx)("div",{ref:n,..._,className:i()(v,g),children:b?(0,s.UI)(b,(e=>(0,o.cloneElement)(e,{isChild:!0}))):c({min:r,now:u,max:d,label:f,visuallyHidden:p,striped:h,animated:m,bsPrefix:g,variant:y},n)})}));d.displayName="ProgressBar",d.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1};const f=d},94325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,variant:t,animation:n,size:r,as:o="div",className:l,...u},c)=>{const d=`${e=(0,a.vE)(e,"spinner")}-${n}`;return(0,s.jsx)(o,{ref:c,...u,className:i()(l,d,r&&`${d}-${r}`,t&&`text-${t}`)})}));l.displayName="Spinner";const u=l},88429:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(13980),i=n.n(r),o=(n(2784),n(85571)),a=n(21729),s=n(57747);n(52322);const l={eventKey:i().oneOfType([i().string,i().number]),title:i().node.isRequired,disabled:i().bool,tabClassName:i().string},u=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};u.propTypes=l;const c=Object.assign(u,{Container:o.Z,Content:a.Z,Pane:s.Z})},85571:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});n(2784);var r=n(48983),i=n(56619),o=n(52322);const a=({transition:e,...t})=>(0,o.jsx)(r.Z,{...t,transition:(0,i.Z)(e)});a.displayName="TabContainer";const s=a},21729:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("tab-content")},57747:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(72779),i=n.n(r),o=n(2784),a=n(74135),s=n(65590),l=n(90593),u=n(21371),c=n(29658),d=n(56619),f=n(52322);const p=o.forwardRef((({bsPrefix:e,transition:t,...n},r)=>{const[{className:o,as:p="div",...h},{isActive:m,onEnter:g,onEntering:y,onEntered:v,onExit:b,onExiting:_,onExited:w,mountOnEnter:E,unmountOnExit:S,transition:x=a.Z}]=(0,u.W)({...n,transition:(0,d.Z)(t)}),k=(0,c.vE)(e,"tab-pane");return(0,f.jsx)(l.Z.Provider,{value:null,children:(0,f.jsx)(s.Z.Provider,{value:null,children:(0,f.jsx)(x,{in:m,onEnter:g,onEntering:y,onEntered:v,onExit:b,onExiting:_,onExited:w,mountOnEnter:E,unmountOnExit:S,children:(0,f.jsx)(p,{...h,ref:r,className:i()(o,k,m&&"active")})})})})}));p.displayName="TabPane";const h=p},45450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(52322);const l=o.forwardRef((({bsPrefix:e,className:t,striped:n,bordered:r,borderless:o,hover:l,size:u,variant:c,responsive:d,...f},p)=>{const h=(0,a.vE)(e,"table"),m=i()(t,h,c&&`${h}-${c}`,u&&`${h}-${u}`,n&&`${h}-striped`,r&&`${h}-bordered`,o&&`${h}-borderless`,l&&`${h}-hover`),g=(0,s.jsx)("table",{...f,className:m,ref:p});if(d){let e=`${h}-responsive`;return"string"==typeof d&&(e=`${e}-${d}`),(0,s.jsx)("div",{className:e,children:g})}return g}))},29658:(e,t,n)=>{"use strict";n.d(t,{SC:()=>u,ZP:()=>c,vE:()=>l});var r=n(2784),i=n(52322);const o=r.createContext({prefixes:{}}),{Consumer:a,Provider:s}=o;function l(e,t){const{prefixes:n}=(0,r.useContext)(o);return e||n[t]||t}function u(){const{dir:e}=(0,r.useContext)(o);return"rtl"===e}const c=function({prefixes:e={},dir:t,children:n}){const o=(0,r.useMemo)((()=>({prefixes:{...e},dir:t})),[e,t]);return(0,i.jsx)(s,{value:o,children:n})}},19701:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(2784),i=n(72779),o=n.n(i),a=n(50616),s=n(68106),l=n(58370),u=n(52322);const c={[s.d0]:"showing",[s.Ix]:"showing show"},d=r.forwardRef(((e,t)=>(0,u.jsx)(l.Z,{...e,ref:t,transitionClasses:c})));d.displayName="ToastFade";const f=d;var p=n(9761),h=n(59702),m=n(29658),g=n(17126);const y=r.forwardRef((({bsPrefix:e,className:t,transition:n=f,show:i=!0,animation:s=!0,delay:l=5e3,autohide:c=!1,onClose:d,bg:p,...h},y)=>{e=(0,m.vE)(e,"toast");const v=(0,r.useRef)(l),b=(0,r.useRef)(d);(0,r.useEffect)((()=>{v.current=l,b.current=d}),[l,d]);const _=(0,a.Z)(),w=!(!c||!i),E=(0,r.useCallback)((()=>{w&&(null==b.current||b.current())}),[w]);(0,r.useEffect)((()=>{_.set(E,v.current)}),[_,E]);const S=(0,r.useMemo)((()=>({onClose:d})),[d]),x=!(!n||!s),k=(0,u.jsx)("div",{...h,ref:y,className:o()(e,t,p&&`bg-${p}`,!x&&(i?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,u.jsx)(g.Z.Provider,{value:S,children:x&&n?(0,u.jsx)(n,{in:i,unmountOnExit:!0,children:k}):k})}));y.displayName="Toast";const v=Object.assign(y,{Body:h.Z,Header:p.Z})},59702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(89023).Z)("toast-body")},17126:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2784).createContext({onClose(){}})},9761:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(72779),i=n.n(r),o=n(2784),a=n(27452),s=n(29658),l=n(30016),u=n(17126),c=n(52322);const d=o.forwardRef((({bsPrefix:e,closeLabel:t,closeVariant:n,closeButton:r,className:d,children:f,...p},h)=>{e=(0,s.vE)(e,"toast-header");const m=(0,o.useContext)(u.Z),g=(0,a.Z)((e=>{null==m||null==m.onClose||m.onClose(e)}));return(0,c.jsxs)("div",{ref:h,...p,className:i()(e,d),children:[f,r&&(0,c.jsx)(l.default,{"aria-label":t,variant:n,onClick:g,"data-dismiss":"toast"})]})}));d.displayName="ToastHeader",d.defaultProps={closeLabel:"Close",closeButton:!0};const f=d},56562:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(70561),l=n(52322);const u=()=>{},c=o.forwardRef((({bsPrefix:e,name:t,className:n,checked:r,type:o,onChange:c,value:d,disabled:f,id:p,inputRef:h,...m},g)=>(e=(0,a.vE)(e,"btn-check"),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{className:e,name:t,type:o,value:d,ref:h,autoComplete:"off",checked:!!r,disabled:!!f,onChange:c||u,id:p}),(0,l.jsx)(s.default,{...m,ref:g,className:i()(n,f&&"disabled"),type:void 0,as:"label",htmlFor:p})]}))));c.displayName="ToggleButton";const d=c},80408:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(2784),i=n(47677),o=n.n(i),a=n(20267),s=n(89263),l=n(21027),u=n(23184),c=n(56562),d=n(52322);const f=r.forwardRef(((e,t)=>{const{children:n,type:i,name:c,value:f,onChange:p,...h}=(0,a.Ch)(e,{value:"onChange"}),m=()=>null==f?[]:[].concat(f);return"radio"!==i||c||o()(!1),(0,d.jsx)(u.default,{...h,ref:t,children:(0,l.UI)(n,(e=>{const t=m(),{value:n,onChange:o}=e.props;return r.cloneElement(e,{type:i,name:e.name||c,checked:-1!==t.indexOf(n),onChange:(0,s.Z)(o,(e=>((e,t)=>{if(!p)return;const n=m(),r=-1!==n.indexOf(e);"radio"!==i?p(r?n.filter((t=>t!==e)):[...n,e],t):!r&&p&&p(e,t)})(n,e)))})}))})}));f.defaultProps={type:"radio",vertical:!1};const p=Object.assign(f,{Button:c.default})},31071:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(72779),i=n.n(r),o=n(2784),a=n(29658),s=n(23758),l=n(52322);const u=o.forwardRef((({bsPrefix:e,placement:t,className:n,style:r,children:o,arrowProps:u,popper:c,show:d,...f},p)=>{e=(0,a.vE)(e,"tooltip");const h=(0,a.SC)(),[m]=(null==t?void 0:t.split("-"))||[],g=(0,s.z)(m,h);return(0,l.jsxs)("div",{ref:p,style:r,role:"tooltip","x-placement":m,className:i()(n,e,`bs-tooltip-${g}`),...f,children:[(0,l.jsx)("div",{className:"tooltip-arrow",...u}),(0,l.jsx)("div",{className:`${e}-inner`,children:o})]})}));u.defaultProps={placement:"right"},u.displayName="Tooltip";const c=u},50899:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(2784),i=n(68106),o=n(25879),a=n(87895),s=n(52322);const l=r.forwardRef((({onEnter:e,onEntering:t,onEntered:n,onExit:l,onExiting:u,onExited:c,addEndListener:d,children:f,childRef:p,...h},m)=>{const g=(0,r.useRef)(null),y=(0,o.Z)(g,p),v=e=>{y((0,a.Z)(e))},b=e=>t=>{e&&g.current&&e(g.current,t)},_=(0,r.useCallback)(b(e),[e]),w=(0,r.useCallback)(b(t),[t]),E=(0,r.useCallback)(b(n),[n]),S=(0,r.useCallback)(b(l),[l]),x=(0,r.useCallback)(b(u),[u]),k=(0,r.useCallback)(b(c),[c]),T=(0,r.useCallback)(b(d),[d]);return(0,s.jsx)(i.ZP,{ref:m,...h,onEnter:_,onEntered:E,onEntering:w,onExit:S,onExited:k,onExiting:x,addEndListener:T,nodeRef:g,children:"function"==typeof f?(e,t)=>f(e,{...t,ref:v}):r.cloneElement(f,{ref:v})})}))},89263:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(...e){return e.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(...n){e.apply(this,n),t.apply(this,n)}}),null)}},89023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(72779),i=n.n(r),o=/-(.)/g;var a=n(2784),s=n(29658),l=n(52322);const u=e=>{return e[0].toUpperCase()+(t=e,t.replace(o,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function c(e,{displayName:t=u(e),Component:n,defaultProps:r}={}){const o=a.forwardRef((({className:t,bsPrefix:r,as:o=n||"div",...a},u)=>{const c=(0,s.vE)(r,e);return(0,l.jsx)(o,{ref:u,className:i()(t,c),...a})}));return o.defaultProps=r,o.displayName=t,o}},46879:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(2784),i=n(72779),o=n.n(i),a=n(52322);const s=e=>r.forwardRef(((t,n)=>(0,a.jsx)("div",{...t,ref:n,className:o()(t.className,e)})))},56619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(58370);function i(e){return"boolean"==typeof e?e?r.Z:void 0:e}},23758:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(2784);r.Component;function i(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}},86026:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Accordion:()=>r.default,AccordionButton:()=>a.Z,AccordionCollapse:()=>o.Z,AccordionContext:()=>i.Z,Alert:()=>s.default,Anchor:()=>l,Badge:()=>u.default,Breadcrumb:()=>c.default,BreadcrumbItem:()=>d.Z,Button:()=>f.default,ButtonGroup:()=>p.default,ButtonToolbar:()=>h.default,Card:()=>m.default,CardGroup:()=>y,CardImg:()=>g.Z,Carousel:()=>v.default,CarouselItem:()=>b.Z,CloseButton:()=>_.default,Col:()=>w.Z,Collapse:()=>E.Z,Container:()=>K,Dropdown:()=>S.default,DropdownButton:()=>L,Fade:()=>N.Z,Figure:()=>J.default,FloatingLabel:()=>Y.Z,Form:()=>I.default,FormCheck:()=>B.Z,FormControl:()=>j.Z,FormFloating:()=>F.Z,FormGroup:()=>H.Z,FormLabel:()=>V.Z,FormSelect:()=>U.Z,FormText:()=>q.Z,Image:()=>Z.default,InputGroup:()=>Q.default,ListGroup:()=>X.default,ListGroupItem:()=>ee.Z,Modal:()=>te.default,ModalBody:()=>ne.Z,ModalDialog:()=>re.Z,ModalFooter:()=>ie.Z,ModalTitle:()=>oe.Z,Nav:()=>ae.default,NavDropdown:()=>de,NavItem:()=>fe.Z,NavLink:()=>ue.Z,Navbar:()=>se.default,NavbarBrand:()=>le.Z,Offcanvas:()=>pe.default,OffcanvasBody:()=>ge.Z,OffcanvasHeader:()=>he.Z,OffcanvasTitle:()=>me.Z,Overlay:()=>ye.default,OverlayTrigger:()=>ke,PageItem:()=>Te.ZP,Pagination:()=>Oe.default,Placeholder:()=>De,PlaceholderButton:()=>Pe,Popover:()=>Re.default,PopoverBody:()=>Ne.Z,PopoverHeader:()=>Le.Z,ProgressBar:()=>Ie.default,Ratio:()=>Be,Row:()=>He,SSRProvider:()=>ze,Spinner:()=>Ve.default,SplitButton:()=>We,Stack:()=>Ze,Tab:()=>Je.default,TabContainer:()=>Qe.Z,TabContent:()=>Xe.Z,TabPane:()=>tt.Z,Table:()=>et.default,Tabs:()=>lt,ThemeProvider:()=>G.ZP,Toast:()=>ut.default,ToastBody:()=>ct.Z,ToastContainer:()=>ht,ToastHeader:()=>dt.Z,ToggleButton:()=>mt.default,ToggleButtonGroup:()=>gt.default,Tooltip:()=>yt.default,useAccordionButton:()=>a.k});var r=n(82304),i=n(80412),o=n(52823),a=n(367),s=n(22736);const l=n(9959).Z;var u=n(23444),c=n(43450),d=n(29803),f=n(70561),p=n(23184),h=n(82228),m=n(21708),g=n(51849);const y=(0,n(89023).Z)("card-group");var v=n(45608),b=n(27837),_=n(30016),w=n(12594),E=n(94489),S=n(46491),x=n(2784),k=n(13980),T=n.n(k),O=n(96781),C=n(36663);const A=T().oneOf(["start","end"]),P=T().oneOfType([A,T().shape({sm:A}),T().shape({md:A}),T().shape({lg:A}),T().shape({xl:A}),T().shape({xxl:A})]);var M=n(52322);const D={id:T().string,href:T().string,onClick:T().func,title:T().node.isRequired,disabled:T().bool,align:P,menuRole:T().string,renderMenuOnMount:T().bool,rootCloseEvent:T().string,menuVariant:T().oneOf(["dark"]),bsPrefix:T().string,variant:T().string,size:T().string},R=x.forwardRef((({title:e,children:t,bsPrefix:n,rootCloseEvent:r,variant:i,size:o,menuRole:a,renderMenuOnMount:s,disabled:l,href:u,id:c,menuVariant:d,...f},p)=>(0,M.jsxs)(S.default,{ref:p,...f,children:[(0,M.jsx)(O.Z,{id:c,href:u,size:o,variant:i,disabled:l,childBsPrefix:n,children:e}),(0,M.jsx)(C.Z,{role:a,renderOnMount:s,rootCloseEvent:r,variant:d,children:t})]})));R.displayName="DropdownButton",R.propTypes=D;const L=R;var N=n(58370),I=n(16083),j=n(26266),B=n(23117),F=n(59610),Y=n(39981),H=n(10863),V=n(30650),q=n(96904),U=n(88567),W=n(72779),z=n.n(W),G=n(29658);const $=x.forwardRef((({bsPrefix:e,fluid:t,as:n="div",className:r,...i},o)=>{const a=(0,G.vE)(e,"container"),s="string"==typeof t?`-${t}`:"-fluid";return(0,M.jsx)(n,{ref:o,...i,className:z()(r,t?`${a}${s}`:a)})}));$.displayName="Container",$.defaultProps={fluid:!1};const K=$;var Z=n(3299),J=n(59831),Q=n(9203),X=n(88304),ee=n(12860),te=n(69153),ne=n(7637),re=n(27467),ie=n(19731),oe=n(31599),ae=n(69862),se=n(53817),le=n(22338),ue=n(6198);const ce=x.forwardRef((({id:e,title:t,children:n,bsPrefix:r,className:i,rootCloseEvent:o,menuRole:a,disabled:s,active:l,renderMenuOnMount:u,menuVariant:c,...d},f)=>{const p=(0,G.vE)(void 0,"nav-item");return(0,M.jsxs)(S.default,{ref:f,...d,className:z()(i,p),children:[(0,M.jsx)(S.default.Toggle,{id:e,eventKey:null,active:l,disabled:s,childBsPrefix:r,as:ue.Z,children:t}),(0,M.jsx)(S.default.Menu,{role:a,renderOnMount:u,rootCloseEvent:o,variant:c,children:n})]})}));ce.displayName="NavDropdown";const de=Object.assign(ce,{Item:S.default.Item,ItemText:S.default.ItemText,Divider:S.default.Divider,Header:S.default.Header});var fe=n(77029),pe=n(29578),he=n(98491),me=n(74976),ge=n(52780),ye=n(3412),ve=n(18786),be=n(50616),_e=(n(45982),n(20267)),we=n(25879),Ee=n(87895);function Se(e,t,n){const[r]=t,i=r.currentTarget,o=r.relatedTarget||r.nativeEvent[n];o&&o===i||(0,ve.Z)(i,o)||e(...t)}function xe({trigger:e,overlay:t,children:n,popperConfig:r={},show:i,defaultShow:o=!1,onToggle:a,delay:s,placement:l,flip:u=l&&-1!==l.indexOf("auto"),...c}){const d=(0,x.useRef)(null),f=(0,we.Z)(d,n.ref),p=(0,be.Z)(),h=(0,x.useRef)(""),[m,g]=(0,_e.$c)(i,o,a),y=function(e){return e&&"object"==typeof e?e:{show:e,hide:e}}(s),{onFocus:v,onBlur:b,onClick:_}="function"!=typeof n?x.Children.only(n).props:{},w=(0,x.useCallback)((()=>{p.clear(),h.current="show",y.show?p.set((()=>{"show"===h.current&&g(!0)}),y.show):g(!0)}),[y.show,g,p]),E=(0,x.useCallback)((()=>{p.clear(),h.current="hide",y.hide?p.set((()=>{"hide"===h.current&&g(!1)}),y.hide):g(!1)}),[y.hide,g,p]),S=(0,x.useCallback)(((...e)=>{w(),null==v||v(...e)}),[w,v]),k=(0,x.useCallback)(((...e)=>{E(),null==b||b(...e)}),[E,b]),T=(0,x.useCallback)(((...e)=>{g(!m),null==_||_(...e)}),[_,g,m]),O=(0,x.useCallback)(((...e)=>{Se(w,e,"fromElement")}),[w]),C=(0,x.useCallback)(((...e)=>{Se(E,e,"toElement")}),[E]),A=null==e?[]:[].concat(e),P={ref:e=>{f((0,Ee.Z)(e))}};return-1!==A.indexOf("click")&&(P.onClick=T),-1!==A.indexOf("focus")&&(P.onFocus=S,P.onBlur=k),-1!==A.indexOf("hover")&&(P.onMouseOver=O,P.onMouseOut=C),(0,M.jsxs)(M.Fragment,{children:["function"==typeof n?n(P):(0,x.cloneElement)(n,P),(0,M.jsx)(ye.default,{...c,show:m,onHide:E,flip:u,placement:l,popperConfig:r,target:d.current,children:t})]})}xe.defaultProps={defaultShow:!1,trigger:["hover","focus"]};const ke=xe;var Te=n(64463),Oe=n(64882);function Ce({animation:e,bg:t,bsPrefix:n,size:r,...i}){n=(0,G.vE)(n,"placeholder");const[{className:o,...a}]=(0,w.r)(i);return{...a,className:z()(o,e?`${n}-${e}`:n,r&&`${n}-${r}`,t&&`bg-${t}`)}}const Ae=x.forwardRef(((e,t)=>{const n=Ce(e);return(0,M.jsx)(f.default,{...n,ref:t,disabled:!0,tabIndex:-1})}));Ae.displayName="PlaceholderButton";const Pe=Ae,Me=x.forwardRef((({as:e="span",...t},n)=>{const r=Ce(t);return(0,M.jsx)(e,{...r,ref:n})}));Me.displayName="Placeholder";const De=Object.assign(Me,{Button:Pe});var Re=n(35376),Le=n(92500),Ne=n(62816),Ie=n(98856);const je=x.forwardRef((({bsPrefix:e,className:t,children:n,aspectRatio:r,style:i,...o},a)=>{e=(0,G.vE)(e,"ratio");const s="number"==typeof r;return(0,M.jsx)("div",{ref:a,...o,style:{...i,...s&&{"--bs-aspect-ratio":(l=r,l<=0||l>100?"100%":l<1?100*l+"%":`${l}%`)}},className:z()(e,t,!s&&`${e}-${r}`),children:x.Children.only(n)});var l}));je.defaultProps={aspectRatio:"1x1"};const Be=je,Fe=["xxl","xl","lg","md","sm","xs"],Ye=x.forwardRef((({bsPrefix:e,className:t,as:n="div",...r},i)=>{const o=(0,G.vE)(e,"row"),a=`${o}-cols`,s=[];return Fe.forEach((e=>{const t=r[e];let n;delete r[e],null!=t&&"object"==typeof t?({cols:n}=t):n=t;const i="xs"!==e?`-${e}`:"";null!=n&&s.push(`${a}${i}-${n}`)})),(0,M.jsx)(n,{ref:i,...r,className:z()(t,o,...s)})}));Ye.displayName="Row";const He=Ye;var Ve=n(94325);const qe={id:T().string,toggleLabel:T().string,href:T().string,target:T().string,onClick:T().func,title:T().node.isRequired,type:T().string,disabled:T().bool,align:P,menuRole:T().string,renderMenuOnMount:T().bool,rootCloseEvent:T().string,bsPrefix:T().string,variant:T().string,size:T().string},Ue=x.forwardRef((({id:e,bsPrefix:t,size:n,variant:r,title:i,type:o,toggleLabel:a,children:s,onClick:l,href:u,target:c,menuRole:d,renderMenuOnMount:h,rootCloseEvent:m,...g},y)=>(0,M.jsxs)(S.default,{ref:y,...g,as:p.default,children:[(0,M.jsx)(f.default,{size:n,variant:r,disabled:g.disabled,bsPrefix:t,href:u,target:c,onClick:l,type:o,children:i}),(0,M.jsx)(S.default.Toggle,{split:!0,id:e,size:n,variant:r,disabled:g.disabled,childBsPrefix:t,children:(0,M.jsx)("span",{className:"visually-hidden",children:a})}),(0,M.jsx)(S.default.Menu,{role:d,renderOnMount:h,rootCloseEvent:m,children:s})]})));Ue.propTypes=qe,Ue.defaultProps={toggleLabel:"Toggle dropdown",type:"button"},Ue.displayName="SplitButton";const We=Ue;const ze=n(14267).HK;const Ge=["xxl","xl","lg","md","sm","xs"];function $e(e){const t=[];return Object.entries(e).forEach((([e,n])=>{null!=n&&("object"==typeof n?Ge.forEach((r=>{const i=n[r];if(null!=i){const n="xs"!==r?`-${r}`:"";t.push(`${e}${n}-${i}`)}})):t.push(`${e}-${n}`))})),t}const Ke=x.forwardRef((({as:e="div",bsPrefix:t,className:n,direction:r,gap:i,...o},a)=>(t=(0,G.vE)(t,"horizontal"===r?"hstack":"vstack"),(0,M.jsx)(e,{...o,ref:a,className:z()(n,t,...$e({gap:i}))}))));Ke.displayName="Stack";const Ze=Ke;var Je=n(88429),Qe=n(85571),Xe=n(21729),et=n(45450),tt=n(57747),nt=n(48983),rt=n(21027),it=n(56619);function ot(e){let t;return(0,rt.Ed)(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function at(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,id:o}=e.props;return null==t?null:(0,M.jsx)(fe.Z,{as:"li",role:"presentation",children:(0,M.jsx)(ue.Z,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,children:t})})}const st=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i,unmountOnExit:o,children:a,activeKey:s=ot(a),...l}=(0,_e.Ch)(e,{activeKey:"onSelect"});return(0,M.jsxs)(nt.Z,{id:t,activeKey:s,onSelect:n,transition:(0,it.Z)(r),mountOnEnter:i,unmountOnExit:o,children:[(0,M.jsx)(ae.default,{...l,role:"tablist",as:"ul",children:(0,rt.UI)(a,at)}),(0,M.jsx)(Xe.Z,{children:(0,rt.UI)(a,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,(0,M.jsx)(tt.Z,{...t})}))})]})};st.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},st.displayName="Tabs";const lt=st;var ut=n(19701),ct=n(59702),dt=n(9761);const ft={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},pt=x.forwardRef((({bsPrefix:e,position:t,className:n,as:r="div",...i},o)=>(e=(0,G.vE)(e,"toast-container"),(0,M.jsx)(r,{ref:o,...i,className:z()(e,t&&`position-absolute ${ft[t]}`,n)}))));pt.displayName="ToastContainer";const ht=pt;var mt=n(56562),gt=n(80408),yt=n(31071)},87895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(28316);function i(e){return e&&"setState"in e?r.findDOMNode(e):null!=e?e:null}},22037:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(8258),i=n(30268);function o(e,t){const n=(0,r.Z)(e,t)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function a(e,t){const n=o(e,"transitionDuration"),r=o(e,"transitionDelay"),a=(0,i.Z)(e,(n=>{n.target===e&&(a(),t(n))}),n+r)}},4102:(e,t,n)=>{"use strict";function r(e){e.offsetHeight}n.d(t,{Z:()=>r})},45021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(47677),n(2784),n(25879);function r(e,t){return e}},52967:(e,t,n)=>{"use strict";var r=n(2784),i=n(37320),o=n(14616);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var l=!1,u=null,c=!1,d=null,f={onError:function(e){l=!0,u=e}};function p(e,t,n,r,i,o,a,c,d){l=!1,u=null,s.apply(f,arguments)}var h=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,s,f,h){if(p.apply(this,arguments),l){if(!l)throw Error(a(198));var m=u;l=!1,u=null,c||(c=!0,d=m)}}(r,t,void 0,e),e.currentTarget=null}var v=null,b={};function _(){if(v)for(var e in b){var t=b[e],n=v.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!E[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;if(S.hasOwnProperty(l))throw Error(a(99,l));S[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&w(u[i],s,l);i=!0}else o.registrationName?(w(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function w(e,t,n){if(x[e])throw Error(a(100,e));x[e]=t,k[e]=t.eventTypes[n].dependencies}var E=[],S={},x={},k={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(a(102,t));b[t]=r,n=!0}}n&&_()}var O=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),C=null,A=null,P=null;function M(e){if(e=m(e)){if("function"!=typeof C)throw Error(a(280));var t=e.stateNode;t&&(t=h(t),C(e.stateNode,e.type,t))}}function D(e){A?P?P.push(e):P=[e]:A=e}function R(){if(A){var e=A,t=P;if(P=A=null,M(e),t)for(e=0;e<t.length;e++)M(t[e])}}function L(e,t){return e(t)}function N(e,t,n,r,i){return e(t,n,r,i)}function I(){}var j=L,B=!1,F=!1;function Y(){null===A&&null===P||(I(),R())}function H(e,t,n){if(F)return e(t,n);F=!0;try{return j(e,t,n)}finally{F=!1,Y()}}var V=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,U={},W={};function z(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new z(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new z(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new z(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new z(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new z(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new z(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new z(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new z(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new z(e,5,!1,e.toLowerCase(),null,!1)}));var $=/[\-:]([a-z])/g;function K(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($,K);G[t]=new z(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($,K);G[t]=new z(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($,K);G[t]=new z(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new z(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new z(e,1,!1,e.toLowerCase(),null,!0)}));var Z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(W,e)||!q.call(U,e)&&(V.test(e)?W[e]=!0:(U[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var Q=/^(.*)[\\\/]/,X="function"==typeof Symbol&&Symbol.for,ee=X?Symbol.for("react.element"):60103,te=X?Symbol.for("react.portal"):60106,ne=X?Symbol.for("react.fragment"):60107,re=X?Symbol.for("react.strict_mode"):60108,ie=X?Symbol.for("react.profiler"):60114,oe=X?Symbol.for("react.provider"):60109,ae=X?Symbol.for("react.context"):60110,se=X?Symbol.for("react.concurrent_mode"):60111,le=X?Symbol.for("react.forward_ref"):60112,ue=X?Symbol.for("react.suspense"):60113,ce=X?Symbol.for("react.suspense_list"):60120,de=X?Symbol.for("react.memo"):60115,fe=X?Symbol.for("react.lazy"):60116,pe=X?Symbol.for("react.block"):60121,he="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=he&&e[he]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ae:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ge(e.type);case pe:return ge(e.render);case fe:if(e=1===e._status?e._result:null)return ge(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Q,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Se(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xe(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function ke(e,t){xe(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Oe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function De(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Le="http://www.w3.org/1999/xhtml",Ne="http://www.w3.org/2000/svg";function Ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Be,Fe,Ye=(Fe=function(e,t){if(e.namespaceURI!==Ne||"innerHTML"in e)e.innerHTML=t;else{for((Be=Be||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Fe(e,t)}))}:Fe);function He(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ve(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Ue={},We={};function ze(e){if(Ue[e])return Ue[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in We)return Ue[e]=n[t];return e}O&&(We=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ge=ze("animationend"),$e=ze("animationiteration"),Ke=ze("animationstart"),Ze=ze("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qe=new("function"==typeof WeakMap?WeakMap:Map);function Xe(e){var t=Qe.get(e);return void 0===t&&(t=new Map,Qe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var at=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(at=it(at,e)),e=at,at=null,e){if(ot(e,st),at)throw Error(a(95));if(c)throw e=d,c=!1,d=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!O)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var dt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>dt.length&&dt.push(e)}function pt(e,t,n,r){if(dt.length){var i=dt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ht(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Mn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<E.length;l++){var u=E[l];u&&(u=u.extractEvents(r,t,o,i,a))&&(s=it(s,u))}lt(s)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Kt(t,"scroll",!0);break;case"focus":case"blur":Kt(t,"focus",!0),Kt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Kt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&$t(e,t)}n.set(e,null)}}var gt,yt,vt,bt=!1,_t=[],wt=null,Et=null,St=null,xt=new Map,kt=new Map,Tt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=At(t,n,r,i,o),null!==t&&(null!==(t=Dn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Dt(e){var t=Mn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){vt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Dn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Lt(e,t,n){Rt(e)&&n.delete(t)}function Nt(){for(bt=!1;0<_t.length;){var e=_t[0];if(null!==e.blockedOn){null!==(e=Dn(e.blockedOn))&&gt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:_t.shift()}null!==wt&&Rt(wt)&&(wt=null),null!==Et&&Rt(Et)&&(Et=null),null!==St&&Rt(St)&&(St=null),xt.forEach(Lt),kt.forEach(Lt)}function It(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Nt)))}function jt(e){function t(t){return It(t,e)}if(0<_t.length){It(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==wt&&It(wt,e),null!==Et&&It(Et,e),null!==St&&It(St,e),xt.forEach(t),kt.forEach(t),n=0;n<Tt.length;n++)(r=Tt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Tt.shift()}var Bt={},Ft=new Map,Yt=new Map,Ht=["abort","abort",Ge,"animationEnd",$e,"animationIteration",Ke,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ze,"transitionEnd","waiting","waiting"];function Vt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Yt.set(r,t),Ft.set(r,o),Bt[i]=o}}Vt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Vt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Vt(Ht,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ut=0;Ut<qt.length;Ut++)Yt.set(qt[Ut],0);var Wt=o.unstable_UserBlockingPriority,zt=o.unstable_runWithPriority,Gt=!0;function $t(e,t){Kt(t,e,!1)}function Kt(e,t,n){var r=Yt.get(t);switch(void 0===r?2:r){case 0:r=Zt.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=Qt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Zt(e,t,n,r){B||I();var i=Qt,o=B;B=!0;try{N(i,e,t,n,r)}finally{(B=o)||Y()}}function Jt(e,t,n,r){zt(Wt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){if(Gt)if(0<_t.length&&-1<Ot.indexOf(e))e=At(null,e,t,n,r),_t.push(e);else{var i=Xt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<Ot.indexOf(e))e=At(i,e,t,n,r),_t.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return wt=Mt(wt,e,t,n,r,i),!0;case"dragenter":return Et=Mt(Et,e,t,n,r,i),!0;case"mouseover":return St=Mt(St,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return xt.set(o,Mt(xt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,kt.set(o,Mt(kt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=pt(e,r,null,t);try{H(ht,e)}finally{ft(e)}}}}function Xt(e,t,n,r){if(null!==(n=Mn(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=pt(e,r,n,t);try{H(ht,e)}finally{ft(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Le;function un(e,t){var n=Xe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=k[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function dn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=dn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=dn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$?",vn="$!",bn=null,_n=null;function wn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"==typeof setTimeout?setTimeout:void 0,xn="function"==typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Tn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===vn||n===yn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+On,An="__reactEventHandlers$"+On,Pn="__reactContainere$"+On;function Mn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Tn(e);null!==e;){if(n=e[Cn])return n;e=Tn(e)}return t}n=(e=n).parentNode}return null}function Dn(e){return!(e=e[Cn]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Rn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ln(e){return e[An]||null}function Nn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function In(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}function jn(e,t,n){(t=In(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Nn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Fn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=In(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Yn(e){e&&e.dispatchConfig.registrationName&&Fn(e._targetInst,null,e)}function Hn(e){ot(e,Bn)}var Vn=null,qn=null,Un=null;function Wn(){if(Un)return Un;var e,t,n=qn,r=n.length,i="value"in Vn?Vn.value:Vn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Un=i.slice(e,1<t?1-t:void 0)}function zn(){return!0}function Gn(){return!1}function $n(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?zn:Gn,this.isPropagationStopped=Gn,this}function Kn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Zn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Jn(e){e.eventPool=[],e.getPooled=Kn,e.release=Zn}i($n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){this.isPersistent=zn},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),$n.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},$n.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Jn(n),n},Jn($n);var Qn=$n.extend({data:null}),Xn=$n.extend({data:null}),er=[9,13,27,32],tr=O&&"CompositionEvent"in window,nr=null;O&&"documentMode"in document&&(nr=document.documentMode);var rr=O&&"TextEvent"in window&&!nr,ir=O&&(!tr||nr&&8<nr&&11>=nr),or=String.fromCharCode(32),ar={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},sr=!1;function lr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var cr=!1;var dr={eventTypes:ar,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var o=ar.compositionStart;break e;case"compositionend":o=ar.compositionEnd;break e;case"compositionupdate":o=ar.compositionUpdate;break e}o=void 0}else cr?lr(e,n)&&(o=ar.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=ar.compositionStart);return o?(ir&&"ko"!==n.locale&&(cr||o!==ar.compositionStart?o===ar.compositionEnd&&cr&&(i=Wn()):(qn="value"in(Vn=r)?Vn.value:Vn.textContent,cr=!0)),o=Qn.getPooled(o,t,n,r),i?o.data=i:null!==(i=ur(n))&&(o.data=i),Hn(o),i=o):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return ur(t);case"keypress":return 32!==t.which?null:(sr=!0,or);case"textInput":return(e=t.data)===or&&sr?null:e;default:return null}}(e,n):function(e,t){if(cr)return"compositionend"===e||!tr&&lr(e,t)?(e=Wn(),Un=qn=Vn=null,cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Xn.getPooled(ar.beforeInput,t,n,r)).data=e,Hn(t)):t=null,null===i?t:null===t?i:[i,t]}},fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!fr[e.type]:"textarea"===t}var hr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mr(e,t,n){return(e=$n.getPooled(hr.change,e,t,n)).type="change",D(n),Hn(e),e}var gr=null,yr=null;function vr(e){lt(e)}function br(e){if(we(Rn(e)))return e}function _r(e,t){if("change"===e)return t}var wr=!1;function Er(){gr&&(gr.detachEvent("onpropertychange",Sr),yr=gr=null)}function Sr(e){if("value"===e.propertyName&&br(yr))if(e=mr(yr,e,ut(e)),B)lt(e);else{B=!0;try{L(vr,e)}finally{B=!1,Y()}}}function xr(e,t,n){"focus"===e?(Er(),yr=n,(gr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&Er()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return br(yr)}function Tr(e,t){if("click"===e)return br(t)}function Or(e,t){if("input"===e||"change"===e)return br(t)}O&&(wr=ct("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:hr,_isInputEventSupported:wr,extractEvents:function(e,t,n,r){var i=t?Rn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=_r;else if(pr(i))if(wr)a=Or;else{a=kr;var s=xr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Tr);if(a&&(a=a(e,t)))return mr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Oe(i,"number",i.value)}},Ar=$n.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Dr(){return Mr}var Rr=0,Lr=0,Nr=!1,Ir=!1,jr=Ar.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Dr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Rr;return Rr=e.screenX,Nr?"mousemove"===e.type?e.screenX-t:0:(Nr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Lr;return Lr=e.screenY,Ir?"mousemove"===e.type?e.screenY-t:0:(Ir=!0,0)}}),Br=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Fr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Yr={eventTypes:Fr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Mn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=jr,l=Fr.mouseLeave,u=Fr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Br,l=Fr.pointerLeave,u=Fr.pointerEnter,c="pointer");if(e=null==a?o:Rn(a),o=null==t?o:Rn(t),(l=s.getPooled(l,a,n,r)).type=c+"leave",l.target=e,l.relatedTarget=o,(n=s.getPooled(u,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=a)&&c)e:{for(u=c,a=0,e=s=r;e;e=Nn(e))a++;for(e=0,t=u;t;t=Nn(t))e++;for(;0<a-e;)s=Nn(s),a--;for(;0<e-a;)u=Nn(u),e--;for(;a--;){if(s===u||s===u.alternate)break e;s=Nn(s),u=Nn(u)}s=null}else s=null;for(u=s,s=[];r&&r!==u&&(null===(a=r.alternate)||a!==u);)s.push(r),r=Nn(r);for(r=[];c&&c!==u&&(null===(a=c.alternate)||a!==u);)r.push(c),c=Nn(c);for(c=0;c<s.length;c++)Fn(s[c],"bubbled",l);for(c=r.length;0<c--;)Fn(r[c],"captured",n);return 0==(64&i)?[l]:[l,n]}};var Hr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Vr=Object.prototype.hasOwnProperty;function qr(e,t){if(Hr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vr.call(t,n[r])||!Hr(e[n[r]],t[n[r]]))return!1;return!0}var Ur=O&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zr=null,Gr=null,$r=null,Kr=!1;function Zr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Kr||null==zr||zr!==dn(n)?null:("selectionStart"in(n=zr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},$r&&qr($r,n)?null:($r=n,(e=$n.getPooled(Wr.select,Gr,e,t)).type="select",e.target=zr,Hn(e),e))}var Jr={eventTypes:Wr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Xe(i),o=k.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Rn(t):window,e){case"focus":(pr(i)||"true"===i.contentEditable)&&(zr=i,Gr=t,$r=null);break;case"blur":$r=Gr=zr=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Kr=!1,Zr(n,r);case"selectionchange":if(Ur)break;case"keydown":case"keyup":return Zr(n,r)}return null}},Qr=$n.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xr=$n.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Ar.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Ar.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Dr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),oi=jr.extend({dataTransfer:null}),ai=Ar.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Dr}),si=$n.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),li=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ui={eventTypes:Bt,extractEvents:function(e,t,n,r){var i=Ft.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=oi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ai;break;case Ge:case $e:case Ke:e=Qr;break;case Ze:e=si;break;case"scroll":e=Ar;break;case"wheel":e=li;break;case"copy":case"cut":case"paste":e=Xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Br;break;default:e=$n}return Hn(t=e.getPooled(i,t,n,r)),t}};if(v)throw Error(a(101));v=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),h=Ln,m=Dn,g=Rn,T({SimpleEventPlugin:ui,EnterLeaveEventPlugin:Yr,ChangeEventPlugin:Cr,SelectEventPlugin:Jr,BeforeInputEventPlugin:dr});var ci=[],di=-1;function fi(e){0>di||(e.current=ci[di],ci[di]=null,di--)}function pi(e,t){di++,ci[di]=e.current,e.current=t}var hi={},mi={current:hi},gi={current:!1},yi=hi;function vi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function bi(e){return null!=(e=e.childContextTypes)}function _i(){fi(gi),fi(mi)}function wi(e,t,n){if(mi.current!==hi)throw Error(a(168));pi(mi,t),pi(gi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,ge(t)||"Unknown",o));return i({},n,{},r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,yi=mi.current,pi(mi,e),pi(gi,gi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ei(e,t,yi),r.__reactInternalMemoizedMergedChildContext=e,fi(gi),fi(mi),pi(mi,e)):fi(gi),pi(gi,n)}var ki=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Oi=o.unstable_cancelCallback,Ci=o.unstable_requestPaint,Ai=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Di=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,Ii={},ji=o.unstable_shouldYield,Bi=void 0!==Ci?Ci:function(){},Fi=null,Yi=null,Hi=!1,Vi=Ai(),qi=1e4>Vi?Ai:function(){return Ai()-Vi};function Ui(){switch(Pi()){case Mi:return 99;case Di:return 98;case Ri:return 97;case Li:return 96;case Ni:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Mi;case 98:return Di;case 97:return Ri;case 96:return Li;case 95:return Ni;default:throw Error(a(332))}}function zi(e,t){return e=Wi(e),ki(e,t)}function Gi(e,t,n){return e=Wi(e),Ti(e,t,n)}function $i(e){return null===Fi?(Fi=[e],Yi=Ti(Mi,Zi)):Fi.push(e),Ii}function Ki(){if(null!==Yi){var e=Yi;Yi=null,Oi(e)}Zi()}function Zi(){if(!Hi&&null!==Fi){Hi=!0;var e=0;try{var t=Fi;zi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(t){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ti(Mi,Ki),t}finally{Hi=!1}}}function Ji(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Qi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Xi={current:null},eo=null,to=null,no=null;function ro(){no=to=eo=null}function io(e){var t=Xi.current;fi(Xi),e.type._context._currentValue=t}function oo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ao(e,t){eo=e,no=to=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(La=!0),e.firstContext=null)}function so(e,t){if(no!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(no=e,t=1073741823),t={context:e,observedBits:t,next:null},null===to){if(null===eo)throw Error(a(308));to=t,eo.dependencies={expirationTime:0,firstContext:t,responders:null}}else to=to.next=t;return e._currentValue}var lo=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fo(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function po(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ho(e,t){var n=e.alternate;null!==n&&co(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function mo(e,t,n,r){var o=e.updateQueue;lo=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==a){l=a.next;var u=o.baseState,c=0,d=null,f=null,p=null;if(null!==l)for(var h=l;;){if((s=h.expirationTime)<r){var m={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(f=p=m,d=u):p=p.next=m,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),pl(s,h.suspenseConfig);e:{var g=e,y=h;switch(s=t,m=n,y.tag){case 1:if("function"==typeof(g=y.payload)){u=g.call(m,u,s);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=y.payload)?g.call(m,u,s):g))break e;u=i({},u,s);break e;case 2:lo=!0}}null!==h.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[h]:s.push(h))}if(null===(h=h.next)||h===l){if(null===(s=o.shared.pending))break;h=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===p?d=u:p.next=f,o.baseState=d,o.baseQueue=p,hl(c),e.expirationTime=c,e.memoizedState=u}}function go(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var yo=Z.ReactCurrentBatchConfig,vo=(new r.Component).refs;function bo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var _o={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=el(),i=yo.suspense;(i=fo(r=tl(r,e,i),i)).payload=t,null!=n&&(i.callback=n),po(e,i),nl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=el(),i=yo.suspense;(i=fo(r=tl(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),po(e,i),nl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=el(),r=yo.suspense;(r=fo(n=tl(n,e,r),r)).tag=2,null!=t&&(r.callback=t),po(e,r),nl(e,n)}};function wo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!qr(n,r)||!qr(i,o))}function Eo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"==typeof o&&null!==o?o=so(o):(i=bi(t)?yi:mi.current,o=(r=null!=(r=t.contextTypes))?vi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_o,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function So(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_o.enqueueReplaceState(t,t.state,null)}function xo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vo,uo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=so(o):(o=bi(t)?yi:mi.current,i.context=vi(e,o)),mo(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(bo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_o.enqueueReplaceState(i,i.state,null),mo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function To(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===vo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Oo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Co(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=To(e,t,n),r.return=e,r):((r=Nl(n.type,n.key,n.props,null,e.mode,r)).ref=To(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Il(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Nl(t.type,t.key,t.props,null,e.mode,n)).ref=To(e,null,t),n.return=e,n;case te:return(t=Bl(t,e.mode,n)).return=e,t}if(ko(t)||me(t))return(t=Il(t,e.mode,n,null)).return=e,t;Oo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(ko(n)||me(n))return null!==i?null:d(e,t,n,r,null);Oo(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||me(r))return d(t,e=e.get(n)||null,r,i,null);Oo(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(i,d),u;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(i,d);m<s.length;m++)null!==(g=h(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=me(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var d=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(i,v.value,u))&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=h(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===ne&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case ee:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===ne){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=To(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===ne?((r=Il(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Nl(o.type,o.key,o.props,null,e.mode,l)).ref=To(e,r,o),l.return=e,e=l)}return s(e);case te:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Bl(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=jl(o,e.mode,l)).return=e,e=r),s(e);if(ko(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(c&&Oo(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ao=Co(!0),Po=Co(!1),Mo={},Do={current:Mo},Ro={current:Mo},Lo={current:Mo};function No(e){if(e===Mo)throw Error(a(174));return e}function Io(e,t){switch(pi(Lo,t),pi(Ro,e),pi(Do,Mo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:je(null,"");break;default:t=je(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}fi(Do),pi(Do,t)}function jo(){fi(Do),fi(Ro),fi(Lo)}function Bo(e){No(Lo.current);var t=No(Do.current),n=je(t,e.type);t!==n&&(pi(Ro,e),pi(Do,n))}function Fo(e){Ro.current===e&&(fi(Do),fi(Ro))}var Yo={current:0};function Ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===yn||n.data===vn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Vo(e,t){return{responder:e,props:t}}var qo=Z.ReactCurrentDispatcher,Uo=Z.ReactCurrentBatchConfig,Wo=0,zo=null,Go=null,$o=null,Ko=!1;function Zo(){throw Error(a(321))}function Jo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hr(e[n],t[n]))return!1;return!0}function Qo(e,t,n,r,i,o){if(Wo=o,zo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,qo.current=null===e||null===e.memoizedState?wa:Ea,e=n(r,i),t.expirationTime===Wo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,$o=Go=null,t.updateQueue=null,qo.current=Sa,e=n(r,i)}while(t.expirationTime===Wo)}if(qo.current=_a,t=null!==Go&&null!==Go.next,Wo=0,$o=Go=zo=null,Ko=!1,t)throw Error(a(300));return e}function Xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$o?zo.memoizedState=$o=e:$o=$o.next=e,$o}function ea(){if(null===Go){var e=zo.alternate;e=null!==e?e.memoizedState:null}else e=Go.next;var t=null===$o?zo.memoizedState:$o.next;if(null!==t)$o=t,Go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Go=e).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===$o?zo.memoizedState=$o=e:$o=$o.next=e}return $o}function ta(e,t){return"function"==typeof t?t(e):t}function na(e){var t=ea(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.expirationTime;if(c<Wo){var d={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,o=r):l=l.next=d,c>zo.expirationTime&&(zo.expirationTime=c,hl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),pl(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,Hr(r,t.memoizedState)||(La=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ra(e){var t=ea(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Hr(o,t.memoizedState)||(La=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ia(e){var t=Xo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ta,lastRenderedState:e}).dispatch=ba.bind(null,zo,e),[t.memoizedState,e]}function oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=zo.updateQueue)?(t={lastEffect:null},zo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function aa(){return ea().memoizedState}function sa(e,t,n,r){var i=Xo();zo.effectTag|=e,i.memoizedState=oa(1|t,n,void 0,void 0===r?null:r)}function la(e,t,n,r){var i=ea();r=void 0===r?null:r;var o=void 0;if(null!==Go){var a=Go.memoizedState;if(o=a.destroy,null!==r&&Jo(r,a.deps))return void oa(t,n,o,r)}zo.effectTag|=e,i.memoizedState=oa(1|t,n,o,r)}function ua(e,t){return sa(516,4,e,t)}function ca(e,t){return la(516,4,e,t)}function da(e,t){return la(4,2,e,t)}function fa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function pa(e,t,n){return n=null!=n?n.concat([e]):null,la(4,2,fa.bind(null,t,e),n)}function ha(){}function ma(e,t){return Xo().memoizedState=[e,void 0===t?null:t],e}function ga(e,t){var n=ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Jo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ya(e,t){var n=ea();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Jo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function va(e,t,n){var r=Ui();zi(98>r?98:r,(function(){e(!0)})),zi(97<r?97:r,(function(){var r=Uo.suspense;Uo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Uo.suspense=r}}))}function ba(e,t,n){var r=el(),i=yo.suspense;i={expirationTime:r=tl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===zo||null!==o&&o===zo)Ko=!0,i.expirationTime=Wo,zo.expirationTime=Wo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Hr(s,a))return}catch(e){}nl(e,r)}}var _a={readContext:so,useCallback:Zo,useContext:Zo,useEffect:Zo,useImperativeHandle:Zo,useLayoutEffect:Zo,useMemo:Zo,useReducer:Zo,useRef:Zo,useState:Zo,useDebugValue:Zo,useResponder:Zo,useDeferredValue:Zo,useTransition:Zo},wa={readContext:so,useCallback:ma,useContext:so,useEffect:ua,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,sa(4,2,fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sa(4,2,e,t)},useMemo:function(e,t){var n=Xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ba.bind(null,zo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Xo().memoizedState=e},useState:ia,useDebugValue:ha,useResponder:Vo,useDeferredValue:function(e,t){var n=ia(e),r=n[0],i=n[1];return ua((function(){var n=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ia(!1),n=t[0];return t=t[1],[ma(va.bind(null,t,e),[t,e]),n]}},Ea={readContext:so,useCallback:ga,useContext:so,useEffect:ca,useImperativeHandle:pa,useLayoutEffect:da,useMemo:ya,useReducer:na,useRef:aa,useState:function(){return na(ta)},useDebugValue:ha,useResponder:Vo,useDeferredValue:function(e,t){var n=na(ta),r=n[0],i=n[1];return ca((function(){var n=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=na(ta),n=t[0];return t=t[1],[ga(va.bind(null,t,e),[t,e]),n]}},Sa={readContext:so,useCallback:ga,useContext:so,useEffect:ca,useImperativeHandle:pa,useLayoutEffect:da,useMemo:ya,useReducer:ra,useRef:aa,useState:function(){return ra(ta)},useDebugValue:ha,useResponder:Vo,useDeferredValue:function(e,t){var n=ra(ta),r=n[0],i=n[1];return ca((function(){var n=Uo.suspense;Uo.suspense=void 0===t?null:t;try{i(e)}finally{Uo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ra(ta),n=t[0];return t=t[1],[ga(va.bind(null,t,e),[t,e]),n]}},xa=null,ka=null,Ta=!1;function Oa(e,t){var n=Dl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ca(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Aa(e){if(Ta){var t=ka;if(t){var n=t;if(!Ca(e,t)){if(!(t=kn(n.nextSibling))||!Ca(e,t))return e.effectTag=-1025&e.effectTag|2,Ta=!1,void(xa=e);Oa(xa,n)}xa=e,ka=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Ta=!1,xa=e}}function Pa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xa=e}function Ma(e){if(e!==xa)return!1;if(!Ta)return Pa(e),Ta=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=ka;t;)Oa(e,t),t=kn(t.nextSibling);if(Pa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ka=kn(e.nextSibling);break e}t--}else"$"!==n&&n!==vn&&n!==yn||t++}e=e.nextSibling}ka=null}}else ka=xa?kn(e.stateNode.nextSibling):null;return!0}function Da(){ka=xa=null,Ta=!1}var Ra=Z.ReactCurrentOwner,La=!1;function Na(e,t,n,r){t.child=null===e?Po(t,null,n,r):Ao(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var o=t.ref;return ao(t,i),r=Qo(e,t,n,r,o,i),null===e||La?(t.effectTag|=1,Na(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Qa(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Rl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ba(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:qr)(i,r)&&e.ref===t.ref)?Qa(e,t,o):(t.effectTag|=1,(e=Ll(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ba(e,t,n,r,i,o){return null!==e&&qr(e.memoizedProps,r)&&e.ref===t.ref&&(La=!1,i<o)?(t.expirationTime=e.expirationTime,Qa(e,t,o)):Ya(e,t,n,r,o)}function Fa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ya(e,t,n,r,i){var o=bi(n)?yi:mi.current;return o=vi(t,o),ao(t,i),n=Qo(e,t,n,r,o,i),null===e||La?(t.effectTag|=1,Na(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Qa(e,t,i))}function Ha(e,t,n,r,i){if(bi(n)){var o=!0;Si(t)}else o=!1;if(ao(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Eo(t,n,r),xo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=so(u):u=vi(t,u=bi(n)?yi:mi.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&So(t,a,r,u),lo=!1;var f=t.memoizedState;a.state=f,mo(t,r,a,i),l=t.memoizedState,s!==r||f!==l||gi.current||lo?("function"==typeof c&&(bo(t,n,c,r),l=t.memoizedState),(s=lo||wo(t,n,s,r,f,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,co(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Qi(t.type,s),l=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=so(u):u=vi(t,u=bi(n)?yi:mi.current),(d="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&So(t,a,r,u),lo=!1,l=t.memoizedState,a.state=l,mo(t,r,a,i),f=t.memoizedState,s!==r||l!==f||gi.current||lo?("function"==typeof c&&(bo(t,n,c,r),f=t.memoizedState),(c=lo||wo(t,n,s,r,l,f,u))?(d||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Va(e,t,n,r,o,i)}function Va(e,t,n,r,i,o){Fa(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),Qa(e,t,o);r=t.stateNode,Ra.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ao(t,e.child,null,o),t.child=Ao(t,null,s,o)):Na(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function qa(e){var t=e.stateNode;t.pendingContext?wi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&wi(0,t.context,!1),Io(e,t.containerInfo)}var Ua,Wa,za,Ga={dehydrated:null,retryTime:0};function $a(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Yo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),pi(Yo,1&a),null===e){if(void 0!==o.fallback&&Aa(t),s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ga,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Po(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Ll(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Ll(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ga,t.child=n,i}return n=Ao(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ga,t.child=o,n}return t.memoizedState=null,t.child=Ao(t,e,o.children,n)}function Ka(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),oo(e.return,t)}function Za(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ja(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Na(e,t,r.children,n),0!=(2&(r=Yo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n);else if(19===e.tag)Ka(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Yo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ho(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Za(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ho(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Za(t,!0,n,null,o,t.lastEffect);break;case"together":Za(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&hl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function es(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return bi(t.type)&&_i(),null;case 3:return jo(),fi(gi),fi(mi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ma(t)||(t.effectTag|=4),null;case 5:Fo(t),n=No(Lo.current);var o=t.type;if(null!==e&&null!=t.stateNode)Wa(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=No(Do.current),Ma(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[Cn]=t,r[An]=s,o){case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)$t(Je[e],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"form":$t("reset",r),$t("submit",r);break;case"details":$t("toggle",r);break;case"input":Se(r,s),$t("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r),un(n,"onChange");break;case"textarea":Me(r,s),$t("invalid",r),un(n,"onChange")}for(var l in an(o,s),e=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"==typeof u?r.textContent!==u&&(e=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(e=["children",""+u]):x.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(o){case"input":_e(r),Te(r,s,!0);break;case"textarea":_e(r),Re(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Ie(o)),e===ln?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Cn]=t,e[An]=r,Ua(e,t),t.stateNode=e,l=sn(o,r),o){case"iframe":case"object":case"embed":$t("load",e),u=r;break;case"video":case"audio":for(u=0;u<Je.length;u++)$t(Je[u],e);u=r;break;case"source":$t("error",e),u=r;break;case"img":case"image":case"link":$t("error",e),$t("load",e),u=r;break;case"form":$t("reset",e),$t("submit",e),u=r;break;case"details":$t("toggle",e),u=r;break;case"input":Se(e,r),u=Ee(e,r),$t("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),$t("invalid",e),un(n,"onChange");break;case"textarea":Me(e,r),u=Pe(e,r),$t("invalid",e),un(n,"onChange");break;default:u=r}an(o,u);var c=u;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?rn(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&Ye(e,d):"children"===s?"string"==typeof d?("textarea"!==o||""!==d)&&He(e,d):"number"==typeof d&&He(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=d&&un(n,s):null!=d&&J(e,s,d,l))}switch(o){case"input":_e(e),Te(e,r,!1);break;case"textarea":_e(e),Re(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=cn)}wn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)za(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=No(Lo.current),No(Do.current),Ma(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return fi(Yo),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ma(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Yo.current)?Ns===Cs&&(Ns=As):(Ns!==Cs&&Ns!==As||(Ns=Ps),0!==Ys&&null!==Ds&&(Hl(Ds,Ls),Vl(Ds,Ys)))),(n||r)&&(t.effectTag|=4),null);case 4:return jo(),null;case 10:return io(t),null;case 17:return bi(t.type)&&_i(),null;case 19:if(fi(Yo),null===(r=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(s=r.rendering)){if(o)Xa(r,!1);else if(Ns!==Cs||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Ho(s))){for(t.effectTag|=64,Xa(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return pi(Yo,1&Yo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Ho(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Xa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Xa(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=qi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Yo.current,pi(Yo,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function ts(e){switch(e.tag){case 1:bi(e.type)&&_i();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(jo(),fi(gi),fi(mi),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Fo(e),null;case 13:return fi(Yo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fi(Yo),null;case 4:return jo(),null;case 10:return io(e),null;default:return null}}function ns(e,t){return{value:e,source:t,stack:ye(t)}}Ua=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,l,u=t.stateNode;switch(No(Do.current),e=null,n){case"input":a=Ee(u,a),r=Ee(u,r),e=[];break;case"option":a=Ce(u,a),r=Ce(u,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Pe(u,a),r=Pe(u,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(u.onclick=cn)}for(s in an(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in u=a[s])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var c=r[s];if(u=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(s,c)):"children"===s?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(x.hasOwnProperty(s)?(null!=c&&un(o,s),e||u===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},za=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var rs="function"==typeof WeakSet?WeakSet:Set;function is(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function os(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Tl(e,t)}else t.current=null}function as(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function ss(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ls(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function us(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ls(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Qi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&go(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}go(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&wn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&jt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function cs(e,t,n){switch("function"==typeof Pl&&Pl(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;zi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){Tl(i,e)}}e=e.next}while(e!==r)}))}break;case 1:os(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Tl(e,t)}}(t,n);break;case 5:os(t);break;case 4:gs(e,t,n)}}function ds(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ds(t)}function fs(e){return 5===e.tag||3===e.tag||4===e.tag}function ps(e){e:{for(var t=e.return;null!==t;){if(fs(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(He(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||fs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?hs(e,n,t):ms(e,n,t)}function hs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(hs(e,t,n),e=e.sibling;null!==e;)hs(e,t,n),e=e.sibling}function ms(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ms(e,t,n),e=e.sibling;null!==e;)ms(e,t,n),e=e.sibling}function gs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,d=u;;)if(cs(l,d,c),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===u)break e;for(;null===d.sibling;){if(null===d.return||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(cs(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ys(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ss(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[An]=r,"input"===e&&"radio"===r.type&&null!=r.name&&xe(n,r),sn(e,i),t=sn(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?rn(n,l):"dangerouslySetInnerHTML"===s?Ye(n,l):"children"===s?He(n,l):J(n,s,l,t)}switch(e){case"input":ke(n,r);break;case"textarea":De(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,jt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Vs=qi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void vs(t);case 19:return void vs(t);case 17:return}throw Error(a(163))}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new rs),t.forEach((function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var bs="function"==typeof WeakMap?WeakMap:Map;function _s(e,t,n){(n=fo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,Ws=r),is(e,t)},n}function ws(e,t,n){(n=fo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return is(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===zs?zs=new Set([this]):zs.add(this),is(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Es,Ss=Math.ceil,xs=Z.ReactCurrentDispatcher,ks=Z.ReactCurrentOwner,Ts=16,Os=32,Cs=0,As=3,Ps=4,Ms=0,Ds=null,Rs=null,Ls=0,Ns=Cs,Is=null,js=1073741823,Bs=1073741823,Fs=null,Ys=0,Hs=!1,Vs=0,qs=null,Us=!1,Ws=null,zs=null,Gs=!1,$s=null,Ks=90,Zs=null,Js=0,Qs=null,Xs=0;function el(){return 0!=(48&Ms)?1073741821-(qi()/10|0):0!==Xs?Xs:Xs=1073741821-(qi()/10|0)}function tl(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Ui();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(Ms&Ts))return Ls;if(null!==n)e=Ji(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Ji(e,150,100);break;case 97:case 96:e=Ji(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ds&&e===Ls&&--e,e}function nl(e,t){if(50<Js)throw Js=0,Qs=null,Error(a(185));if(null!==(e=rl(e,t))){var n=Ui();1073741823===t?0!=(8&Ms)&&0==(48&Ms)?sl(e):(ol(e),0===Ms&&Ki()):ol(e),0==(4&Ms)||98!==n&&99!==n||(null===Zs?Zs=new Map([[e,t]]):(void 0===(n=Zs.get(e))||n>t)&&Zs.set(e,t))}}function rl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ds===i&&(hl(t),Ns===Ps&&Hl(i,Ls)),Vl(i,t)),i}function il(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function ol(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=$i(sl.bind(null,e));else{var t=il(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=el();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ii&&Oi(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?$i(sl.bind(null,e)):Gi(r,al.bind(null,e),{timeout:10*(1073741821-t)-qi()}),e.callbackNode=t}}}function al(e,t){if(Xs=0,t)return ql(e,t=el()),ol(e),null;var n=il(e);if(0!==n){if(t=e.callbackNode,0!=(48&Ms))throw Error(a(327));if(Sl(),e===Ds&&n===Ls||cl(e,n),null!==Rs){var r=Ms;Ms|=Ts;for(var i=fl();;)try{gl();break}catch(t){dl(e,t)}if(ro(),Ms=r,xs.current=i,1===Ns)throw t=Is,cl(e,n),Hl(e,n),ol(e),t;if(null===Rs)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ns,Ds=null,r){case Cs:case 1:throw Error(a(345));case 2:ql(e,2<n?2:n);break;case As:if(Hl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=bl(i)),1073741823===js&&10<(i=Vs+500-qi())){if(Hs){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,cl(e,n);break}}if(0!==(o=il(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(_l.bind(null,e),i);break}_l(e);break;case Ps:if(Hl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=bl(i)),Hs&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,cl(e,n);break}if(0!==(i=il(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Bs?r=10*(1073741821-Bs)-qi():1073741823===js?r=0:(r=10*(1073741821-js)-5e3,0>(r=(i=qi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(_l.bind(null,e),r);break}_l(e);break;case 5:if(1073741823!==js&&null!==Fs){o=js;var s=Fs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=qi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Hl(e,n),e.timeoutHandle=Sn(_l.bind(null,e),r);break}}_l(e);break;default:throw Error(a(329))}if(ol(e),e.callbackNode===t)return al.bind(null,e)}}return null}function sl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Ms))throw Error(a(327));if(Sl(),e===Ds&&t===Ls||cl(e,t),null!==Rs){var n=Ms;Ms|=Ts;for(var r=fl();;)try{ml();break}catch(t){dl(e,t)}if(ro(),Ms=n,xs.current=r,1===Ns)throw n=Is,cl(e,t),Hl(e,t),ol(e),n;if(null!==Rs)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ds=null,_l(e),ol(e)}return null}function ll(e,t){var n=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=n)&&Ki()}}function ul(e,t){var n=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=n)&&Ki()}}function cl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xn(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&_i();break;case 3:jo(),fi(gi),fi(mi);break;case 5:Fo(r);break;case 4:jo();break;case 13:case 19:fi(Yo);break;case 10:io(r)}n=n.return}Ds=e,Rs=Ll(e.current,null),Ls=t,Ns=Cs,Is=null,Bs=js=1073741823,Fs=null,Ys=0,Hs=!1}function dl(e,t){for(;;){try{if(ro(),qo.current=_a,Ko)for(var n=zo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wo=0,$o=Go=zo=null,Ko=!1,null===Rs||null===Rs.return)return Ns=1,Is=t,Rs=null;e:{var i=e,o=Rs.return,a=Rs,s=t;if(t=Ls,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&Yo.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var h=d.memoizedProps;f=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!c)}}if(f){var m=d.updateQueue;if(null===m){var g=new Set;g.add(l),d.updateQueue=g}else m.add(l);if(0==(2&d.mode)){if(d.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=fo(1073741823,null);y.tag=2,po(a,y)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new bs,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var b=Ol.bind(null,i,l,a);l.then(b,b)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((ge(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(a))}5!==Ns&&(Ns=2),s=ns(s,a),d=o;do{switch(d.tag){case 3:l=s,d.effectTag|=4096,d.expirationTime=t,ho(d,_s(d,l,t));break e;case 1:l=s;var _=d.type,w=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===zs||!zs.has(w)))){d.effectTag|=4096,d.expirationTime=t,ho(d,ws(d,l,t));break e}}d=d.return}while(null!==d)}Rs=vl(Rs)}catch(e){t=e;continue}break}}function fl(){var e=xs.current;return xs.current=_a,null===e?_a:e}function pl(e,t){e<js&&2<e&&(js=e),null!==t&&e<Bs&&2<e&&(Bs=e,Fs=t)}function hl(e){e>Ys&&(Ys=e)}function ml(){for(;null!==Rs;)Rs=yl(Rs)}function gl(){for(;null!==Rs&&!ji();)Rs=yl(Rs)}function yl(e){var t=Es(e.alternate,e,Ls);return e.memoizedProps=e.pendingProps,null===t&&(t=vl(e)),ks.current=null,t}function vl(e){Rs=e;do{var t=Rs.alternate;if(e=Rs.return,0==(2048&Rs.effectTag)){if(t=es(t,Rs,Ls),1===Ls||1!==Rs.childExpirationTime){for(var n=0,r=Rs.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Rs.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Rs.firstEffect),null!==Rs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Rs.firstEffect),e.lastEffect=Rs.lastEffect),1<Rs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Rs:e.firstEffect=Rs,e.lastEffect=Rs))}else{if(null!==(t=ts(Rs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Rs.sibling))return t;Rs=e}while(null!==Rs);return Ns===Cs&&(Ns=5),null}function bl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function _l(e){var t=Ui();return zi(99,wl.bind(null,e,t)),null}function wl(e,t){do{Sl()}while(null!==$s);if(0!=(48&Ms))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=bl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ds&&(Rs=Ds=null,Ls=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ms;Ms|=Os,ks.current=null,bn=Gt;var s=mn();if(gn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{l.nodeType,d.nodeType}catch(e){l=null;break e}var f=0,p=-1,h=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var b;y!==l||0!==c&&3!==y.nodeType||(p=f+c),y!==d||0!==u&&3!==y.nodeType||(h=f+u),3===y.nodeType&&(f+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===l&&++m===c&&(p=f),v===d&&++g===u&&(h=f),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===p||-1===h?null:{start:p,end:h}}else l=null}l=l||{start:0,end:0}}else l=null;_n={activeElementDetached:null,focusedElem:s,selectionRange:l},Gt=!1,qs=i;do{try{El()}catch(e){if(null===qs)throw Error(a(330));Tl(qs,e),qs=qs.nextEffect}}while(null!==qs);qs=i;do{try{for(s=e,l=t;null!==qs;){var _=qs.effectTag;if(16&_&&He(qs.stateNode,""),128&_){var w=qs.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&_){case 2:ps(qs),qs.effectTag&=-3;break;case 6:ps(qs),qs.effectTag&=-3,ys(qs.alternate,qs);break;case 1024:qs.effectTag&=-1025;break;case 1028:qs.effectTag&=-1025,ys(qs.alternate,qs);break;case 4:ys(qs.alternate,qs);break;case 8:gs(s,c=qs,l),ds(c)}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(a(330));Tl(qs,e),qs=qs.nextEffect}}while(null!==qs);if(E=_n,w=mn(),_=E.focusedElem,l=E.selectionRange,w!==_&&_&&_.ownerDocument&&hn(_.ownerDocument.documentElement,_)){null!==l&&gn(_)&&(w=l.start,void 0===(E=l.end)&&(E=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(E,_.value.length)):(E=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),c=_.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!E.extend&&s>l&&(c=l,l=s,s=c),c=pn(_,s),d=pn(_,l),c&&d&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==d.node||E.focusOffset!==d.offset)&&((w=w.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),s>l?(E.addRange(w),E.extend(d.node,d.offset)):(w.setEnd(d.node,d.offset),E.addRange(w))))),w=[];for(E=_;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<w.length;_++)(E=w[_]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Gt=!!bn,_n=bn=null,e.current=n,qs=i;do{try{for(_=e;null!==qs;){var S=qs.effectTag;if(36&S&&us(_,qs.alternate,qs),128&S){w=void 0;var x=qs.ref;if(null!==x){var k=qs.stateNode;switch(qs.tag){case 5:w=k;break;default:w=k}"function"==typeof x?x(w):x.current=w}}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(a(330));Tl(qs,e),qs=qs.nextEffect}}while(null!==qs);qs=null,Bi(),Ms=o}else e.current=n;if(Gs)Gs=!1,$s=e,Ks=t;else for(qs=i;null!==qs;)t=qs.nextEffect,qs.nextEffect=null,qs=t;if(0===(t=e.firstPendingTime)&&(zs=null),1073741823===t?e===Qs?Js++:(Js=0,Qs=e):Js=0,"function"==typeof Al&&Al(n.stateNode,r),ol(e),Us)throw Us=!1,e=Ws,Ws=null,e;return 0!=(8&Ms)||Ki(),null}function El(){for(;null!==qs;){var e=qs.effectTag;0!=(256&e)&&as(qs.alternate,qs),0==(512&e)||Gs||(Gs=!0,Gi(97,(function(){return Sl(),null}))),qs=qs.nextEffect}}function Sl(){if(90!==Ks){var e=97<Ks?97:Ks;return Ks=90,zi(e,xl)}}function xl(){if(null===$s)return!1;var e=$s;if($s=null,0!=(48&Ms))throw Error(a(331));var t=Ms;for(Ms|=Os,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ss(5,n),ls(5,n)}}catch(t){if(null===e)throw Error(a(330));Tl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Ms=t,Ki(),!0}function kl(e,t,n){po(e,t=_s(e,t=ns(n,t),1073741823)),null!==(e=rl(e,1073741823))&&ol(e)}function Tl(e,t){if(3===e.tag)kl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){kl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===zs||!zs.has(r))){po(n,e=ws(n,e=ns(t,e),1073741823)),null!==(n=rl(n,1073741823))&&ol(n);break}}n=n.return}}function Ol(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ds===e&&Ls===n?Ns===Ps||Ns===As&&1073741823===js&&qi()-Vs<500?cl(e,Ls):Hs=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,ol(e)))}function Cl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=tl(t=el(),e,null)),null!==(e=rl(e,t))&&ol(e)}Es=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)La=!0;else{if(r<n){switch(La=!1,t.tag){case 3:qa(t),Da();break;case 5:if(Bo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:bi(t.type)&&Si(t);break;case 4:Io(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,pi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?$a(e,t,n):(pi(Yo,1&Yo.current),null!==(t=Qa(e,t,n))?t.sibling:null);pi(Yo,1&Yo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Ja(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),pi(Yo,Yo.current),!r)return null}return Qa(e,t,n)}La=!1}}else La=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=vi(t,mi.current),ao(t,n),i=Qo(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,bi(r)){var o=!0;Si(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&bo(t,r,s,e),i.updater=_o,t.stateNode=i,i._reactInternalFiber=t,xo(t,r,e,n),t=Va(null,t,r,!0,o,n)}else t.tag=0,Na(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Rl(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===de)return 14}return 2}(i),e=Qi(i,e),o){case 0:t=Ya(null,t,i,e,n);break e;case 1:t=Ha(null,t,i,e,n);break e;case 11:t=Ia(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Qi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ya(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 3:if(qa(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,co(e,t),mo(t,r,null,n),(r=t.memoizedState.element)===i)Da(),t=Qa(e,t,n);else{if((i=t.stateNode.hydrate)&&(ka=kn(t.stateNode.containerInfo.firstChild),xa=t,i=Ta=!0),i)for(n=Po(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Na(e,t,r,n),Da();t=t.child}return t;case 5:return Bo(t),null===e&&Aa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,En(r,i)?s=null:null!==o&&En(r,o)&&(t.effectTag|=16),Fa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Na(e,t,s,n),t=t.child),t;case 6:return null===e&&Aa(t),null;case 13:return $a(e,t,n);case 4:return Io(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ao(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:Qi(r,i),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(pi(Xi,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=Hr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!gi.current){t=Qa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=fo(n,null)).tag=2,po(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),oo(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,ao(t,n),r=r(i=so(i,o.unstable_observedBits)),t.effectTag|=1,Na(e,t,r,n),t.child;case 14:return o=Qi(i=t.type,t.pendingProps),ja(e,t,i,o=Qi(i.type,o),r,n);case 15:return Ba(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,bi(r)?(e=!0,Si(t)):e=!1,ao(t,n),Eo(t,r,i),xo(t,r,i,n),Va(null,t,r,!0,e,n);case 19:return Ja(e,t,n)}throw Error(a(156,t.tag))};var Al=null,Pl=null;function Ml(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Dl(e,t,n,r){return new Ml(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=Dl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Rl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ne:return Il(n.children,i,o,t);case se:s=8,i|=7;break;case re:s=8,i|=1;break;case ie:return(e=Dl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ue:return(e=Dl(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=o,e;case ce:return(e=Dl(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:s=10;break e;case ae:s=9;break e;case le:s=11;break e;case de:s=14;break e;case fe:s=16,r=null;break e;case pe:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dl(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Il(e,t,n,r){return(e=Dl(7,e,r,t)).expirationTime=n,e}function jl(e,t,n){return(e=Dl(6,e,null,t)).expirationTime=n,e}function Bl(e,t,n){return(t=Dl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Hl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Vl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function ql(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ul(e,t,n,r){var i=t.current,o=el(),s=yo.suspense;o=tl(o,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(bi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(bi(u)){n=Ei(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=fo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),po(i,t),nl(i,o),o}function Wl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Gl(e,t){zl(e,t),(e=e.alternate)&&zl(e,t)}function $l(e,t,n){var r=new Fl(e,t,n=null!=n&&!0===n.hydrate),i=Dl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,uo(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Xe(t);Ot.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wl(a);s.call(e)}}Ul(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new $l(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Wl(a);l.call(e)}}ul((function(){Ul(t,a,e,i)}))}return Wl(a)}function Jl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ql(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(t))throw Error(a(200));return Jl(e,t,null,n)}$l.prototype.render=function(e){Ul(e,this._internalRoot,null,null)},$l.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ul(null,e,null,(function(){t[Pn]=null}))},gt=function(e){if(13===e.tag){var t=Ji(el(),150,100);nl(e,t),Gl(e,t)}},yt=function(e){13===e.tag&&(nl(e,3),Gl(e,3))},vt=function(e){if(13===e.tag){var t=el();nl(e,t=tl(t,e,null)),Gl(e,t)}},C=function(e,t,n){switch(t){case"input":if(ke(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ln(r);if(!i)throw Error(a(90));we(r),ke(r,i)}}}break;case"textarea":De(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},L=ll,N=function(e,t,n,r,i){var o=Ms;Ms|=4;try{return zi(98,e.bind(null,t,n,r,i))}finally{0===(Ms=o)&&Ki()}},I=function(){0==(49&Ms)&&(function(){if(null!==Zs){var e=Zs;Zs=null,e.forEach((function(e,t){ql(t,e),ol(t)})),Ki()}}(),Sl())},j=function(e,t){var n=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=n)&&Ki()}};var Xl={Events:[Dn,Rn,Ln,T,S,Hn,function(e){ot(e,Yn)},D,R,Qt,lt,Sl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Al=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Pl=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Mn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xl,t.createPortal=Ql,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Ms))throw Error(a(187));var n=Ms;Ms|=1;try{return zi(99,e.bind(null,t))}finally{Ms=n,Ki()}},t.hydrate=function(e,t,n){if(!Kl(t))throw Error(a(200));return Zl(null,e,t,!0,n)},t.render=function(e,t,n){if(!Kl(t))throw Error(a(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(a(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_createPortal=function(e,t){return Ql(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Zl(e,t,n,!1,r)},t.version="16.14.0"},28316:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(52967)},26097:(e,t,n)=>{"use strict";var r=n(32193),i=n(86640);e.exports=function(){return r.apply(this,i(arguments)).on("cloned",e);function e(e){t(e),i(e.getElementsByTagName("*")).forEach(t)}function t(e){e.removeAttribute("data-reactid")}}},66866:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return E(e)||w(e)===c},t.isConcurrentMode=E,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===s||e===a||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},t.typeOf=w},48570:(e,t,n)=>{"use strict";e.exports=n(66866)},68106:(e,t,n)=>{"use strict";n.d(t,{cn:()=>f,d0:()=>d,Wj:()=>c,Ix:()=>p,ZP:()=>g});var r=n(31461),i=n(36981),o=n(2784),a=n(28316);const s=!1,l=o.createContext(null);var u="unmounted",c="exited",d="entering",f="entered",p="exiting",h=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=c,r.appearStatus=d):i=f:i=t.unmountOnExit||t.mountOnEnter?u:c,r.state={status:i},r.nextCallback=null,r}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:c}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==f&&(t=d):n!==d&&n!==f||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===d?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===c&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[a.findDOMNode(this),r],o=i[0],l=i[1],u=this.getTimeouts(),c=r?u.appear:u.enter;!e&&!n||s?this.safeSetState({status:f},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,l),this.safeSetState({status:d},(function(){t.props.onEntering(o,l),t.onTransitionEnd(c,(function(){t.safeSetState({status:f},(function(){t.props.onEntered(o,l)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:a.findDOMNode(this);t&&!s?(this.props.onExit(r),this.safeSetState({status:p},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:c},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:c},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(l.Provider,{value:null},"function"==typeof n?n(e,i):o.cloneElement(o.Children.only(n),i))},t}(o.Component);function m(){}h.contextType=l,h.propTypes={},h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},h.UNMOUNTED=u,h.EXITED=c,h.ENTERING=d,h.ENTERED=f,h.EXITING=p;const g=h},11837:(e,t,n)=>{"use strict";var r=n(2784),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},83426:(e,t,n)=>{"use strict";var r=n(37320),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function w(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var S=E.prototype=new w;S.constructor=E,r(S,_.prototype),S.isPureReactComponent=!0;var x={current:null},k=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&!T.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:x.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,P=[];function M(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function R(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+N(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+N(i=e[l],l);s+=R(i,u,n,r)}else if(null===e||"object"!=typeof e?u=null:u="function"==typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"==typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)s+=R(i=i.value,u=t+N(i,l++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function L(e,t,n){return null==e?0:R(e,"",t,n)}function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function I(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?B(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function B(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),L(e,j,t=M(t,o,r,i)),D(t)}var F={current:null};function Y(){var e=F.current;if(null===e)throw Error(y(321));return e}var H={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return B(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,I,t=M(null,null,t,n)),D(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return B(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=_,t.Fragment=s,t.Profiler=u,t.PureComponent=E,t.StrictMode=l,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return Y().useCallback(e,t)},t.useContext=function(e,t){return Y().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return Y().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return Y().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return Y().useLayoutEffect(e,t)},t.useMemo=function(e,t){return Y().useMemo(e,t)},t.useReducer=function(e,t,n){return Y().useReducer(e,t,n)},t.useRef=function(e){return Y().useRef(e)},t.useState=function(e){return Y().useState(e)},t.version="16.14.0"},2784:(e,t,n)=>{"use strict";e.exports=n(83426)},52322:(e,t,n)=>{"use strict";e.exports=n(11837)},17073:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function u(e){var t=void 0===e?"undefined":P(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,r,d,f,p){p=p||[];var h=(d=d||[]).slice(0);if(void 0!==f){if(r){if("function"==typeof r&&r(h,f))return;if("object"===(void 0===r?"undefined":P(r))){if(r.prefilter&&r.prefilter(h,f))return;if(r.normalize){var m=r.normalize(h,f,e,t);m&&(e=m[0],t=m[1])}}}h.push(f)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var g=void 0===e?"undefined":P(e),y=void 0===t?"undefined":P(t),v="undefined"!==g||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(f),b="undefined"!==y||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(f);if(!v&&b)n(new o(h,t));else if(!b&&v)n(new a(h,e));else if(u(e)!==u(t))n(new i(h,e,t));else if("date"===u(e)&&e-t!=0)n(new i(h,e,t));else if("object"===g&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(h,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var _;for(e.length,_=0;_<e.length;_++)_>=t.length?n(new s(h,_,new a(void 0,e[_]))):c(e[_],t[_],n,r,h,_,p);for(;_<t.length;)n(new s(h,_,new o(void 0,t[_++])))}else{var w=Object.keys(e),E=Object.keys(t);w.forEach((function(i,o){var a=E.indexOf(i);a>=0?(c(e[i],t[i],n,r,h,i,p),E=l(E,a)):c(e[i],void 0,n,r,h,i,p)})),E.forEach((function(e){c(void 0,t[e],n,r,h,e,p)}))}p.length=p.length-1}else e!==t&&("number"===g&&isNaN(e)&&isNaN(t)||n(new i(h,e,t)))}function d(e,t,n,r){return r=r||[],c(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function f(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":f(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":f(e[t],n.index,n.item);break;case"D":e=l(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function p(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":f(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=l(e,t)}return e}function m(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":h(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}}function g(e,t,n){e&&t&&c(e,t,(function(r){n&&!n(e,t,r)||p(e,t,r)}))}function y(e){return"color: "+R[e].color+"; font-weight: bold"}function v(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}function b(e,t,n,r){var i=d(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=v(e);n.log.apply(n,["%c "+R[t].text,y(t)].concat(M(r)))})):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}function _(e,t,n,r){switch(void 0===e?"undefined":P(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,M(n)):e[r];case"function":return e(t);default:return e}}function w(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+r),n&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}function E(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,o=void 0===i?w(t):i,a=t.collapsed,s=t.colors,l=t.level,u=t.diff,c=void 0===t.titleFormatter;e.forEach((function(i,d){var f=i.started,p=i.startedTime,h=i.action,m=i.prevState,g=i.error,y=i.took,v=i.nextState,w=e[d+1];w&&(v=w.prevState,y=w.started-f);var E=r(h),S="function"==typeof a?a((function(){return v}),h,i):a,x=C(p),k=s.title?"color: "+s.title(E)+";":"",T=["color: gray; font-weight: lighter;"];T.push(k),t.timestamp&&T.push("color: gray; font-weight: lighter;"),t.duration&&T.push("color: gray; font-weight: lighter;");var O=o(E,x,y);try{S?s.title&&c?n.groupCollapsed.apply(n,["%c "+O].concat(T)):n.groupCollapsed(O):s.title&&c?n.group.apply(n,["%c "+O].concat(T)):n.group(O)}catch(e){n.log(O)}var A=_(l,E,[m],"prevState"),P=_(l,E,[E],"action"),M=_(l,E,[g,m],"error"),D=_(l,E,[v],"nextState");if(A)if(s.prevState){var R="color: "+s.prevState(m)+"; font-weight: bold";n[A]("%c prev state",R,m)}else n[A]("prev state",m);if(P)if(s.action){var L="color: "+s.action(E)+"; font-weight: bold";n[P]("%c action    ",L,E)}else n[P]("action    ",E);if(g&&M)if(s.error){var N="color: "+s.error(g,m)+"; font-weight: bold;";n[M]("%c error     ",N,g)}else n[M]("error     ",g);if(D)if(s.nextState){var I="color: "+s.nextState(v)+"; font-weight: bold";n[D]("%c next state",I,v)}else n[D]("next state",v);u&&b(m,v,n,S);try{n.groupEnd()}catch(e){n.log("—— log end ——")}}))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},L,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(u){if("function"==typeof o&&!o(n,u))return e(u);var c={};l.push(c),c.started=A.now(),c.startedTime=new Date,c.prevState=r(n()),c.action=u;var d=void 0;if(a)try{d=e(u)}catch(e){c.error=i(e)}else d=e(u);c.took=A.now()-c.started,c.nextState=r(n());var f=t.diff&&"function"==typeof s?s(n,u):t.diff;if(E(l,Object.assign({},t,{diff:f})),l.length=0,c.error)throw c.error;return d}}}}var x,k,T=function(e,t){return new Array(t+1).join(e)},O=function(e,t){return T("0",t-e.toString().length)+e},C=function(e){return O(e.getHours(),2)+":"+O(e.getMinutes(),2)+":"+O(e.getSeconds(),2)+"."+O(e.getMilliseconds(),3)},A="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},D=[];x="object"===(void 0===n.g?"undefined":P(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(k=x.DeepDiff)&&D.push((function(){void 0!==k&&x.DeepDiff===d&&(x.DeepDiff=k,k=void 0)})),t(i,r),t(o,r),t(a,r),t(s,r),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:g,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return void 0!==k},enumerable:!0},noConflict:{value:function(){return D&&(D.forEach((function(e){e()})),D=null),d},enumerable:!0}});var R={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},L={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?S()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=L,e.createLogger=S,e.logger=N,e.default=N,Object.defineProperty(e,"__esModule",{value:!0})}(t)},14069:(e,t)=>{"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var r=n();r.withExtraArgument=n,t.Z=r},46475:(e,t)=>{"use strict";var n,r,i,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,l=null,u=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(u,0),e}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,f=window.Date,p=window.setTimeout,h=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=f.now();t.unstable_now=function(){return f.now()-g}}var y=!1,v=null,b=-1,_=5,w=0;o=function(){return t.unstable_now()>=w},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,S=E.port2;E.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();w=e+_;try{v(!0,e)?S.postMessage(null):(y=!1,v=null)}catch(e){throw S.postMessage(null),e}}else y=!1},n=function(e){v=e,y||(y=!0,S.postMessage(null))},r=function(e,n){b=p((function(){e(t.unstable_now())}),n)},i=function(){h(b),b=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<O(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>O(a,n))void 0!==l&&0>O(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>O(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function O(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],A=[],P=1,M=null,D=3,R=!1,L=!1,N=!1;function I(e){for(var t=k(A);null!==t;){if(null===t.callback)T(A);else{if(!(t.startTime<=e))break;T(A),t.sortIndex=t.expirationTime,x(C,t)}t=k(A)}}function j(e){if(N=!1,I(e),!L)if(null!==k(C))L=!0,n(B);else{var t=k(A);null!==t&&r(j,t.startTime-e)}}function B(e,n){L=!1,N&&(N=!1,i()),R=!0;var a=D;try{for(I(n),M=k(C);null!==M&&(!(M.expirationTime>n)||e&&!o());){var s=M.callback;if(null!==s){M.callback=null,D=M.priorityLevel;var l=s(M.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?M.callback=l:M===k(C)&&T(C),I(n)}else T(C);M=k(C)}if(null!==M)var u=!0;else{var c=k(A);null!==c&&r(j,c.startTime-n),u=!1}return u}finally{M=null,D=a,R=!1}}function F(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Y=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||R||(L=!0,n(B))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return k(C)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Y,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:F(e)}else a=F(e),l=s;return e={id:P++,callback:o,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,x(A,e),null===k(C)&&e===k(A)&&(N?i():N=!0,r(j,l-s))):(e.sortIndex=a,x(C,e),L||R||(L=!0,n(B))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();I(e);var n=k(C);return n!==M&&null!==M&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<M.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},14616:(e,t,n)=>{"use strict";e.exports=n(46475)},45966:function(e,t,n){e.exports=function(){"use strict";var e=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var t=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n};function r(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var i=r((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach((function(r,s){void 0===a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))})),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],i)})),Object.keys(r).forEach((function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)})),a}function o(e,t,o){var a=Array.isArray(t),s=(o||{arrayMerge:r}).arrayMerge||r;return a?Array.isArray(e)?s(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))})),o=r((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),a=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},s=o.svg,l=o.xlink,u={};u[s.name]=s.uri,u[l.name]=l.uri;var c=function(e,t){void 0===e&&(e="");var n=i(u,t||{});return"<svg "+a(n)+">"+e+"</svg>"};return function(e){function n(){e.apply(this,arguments)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},n.createFromExistingNode=function(e){return new n({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},n.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},n.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},n.prototype.render=function(){var e=this.stringify();return t(c(e)).childNodes[0]},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(n.prototype,r),n}(e)}()},10045:function(e,t,n){e.exports=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var t=e((function(e,t){!function(t,n){e.exports=n()}(0,(function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(e){return Array.isArray(e)?[]:{}}function n(n,r){return r&&!0===r.clone&&e(n)?o(t(n),n,r):n}function r(t,r,i){var a=t.slice();return r.forEach((function(r,s){void 0===a[s]?a[s]=n(r,i):e(r)?a[s]=o(t[s],r,i):-1===t.indexOf(r)&&a.push(n(r,i))})),a}function i(t,r,i){var a={};return e(t)&&Object.keys(t).forEach((function(e){a[e]=n(t[e],i)})),Object.keys(r).forEach((function(s){e(r[s])&&t[s]?a[s]=o(t[s],r[s],i):a[s]=n(r[s],i)})),a}function o(e,t,o){var a=Array.isArray(t),s=(o||{arrayMerge:r}).arrayMerge||r;return a?Array.isArray(e)?s(e,t,o):n(t,o):i(e,t,o)}return o.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return o(e,n,t)}))},o}))}));function r(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map((function(e){e(n)})),(e["*"]||[]).map((function(e){e(t,n)}))}}}var i=e((function(e,t){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};t.default=n,e.exports=t.default})),o=function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},a=i.svg,s=i.xlink,l={};l[a.name]=a.uri,l[s.name]=s.uri;var u,c=function(e,n){void 0===e&&(e="");var r=t(l,n||{});return"<svg "+o(r)+">"+e+"</svg>"},d=i.svg,f=i.xlink,p={attrs:(u={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},u[d.name]=d.uri,u[f.name]=f.uri,u)},h=function(e){this.config=t(p,e||{}),this.symbols=[]};h.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},h.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},h.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},h.prototype.has=function(e){return null!==this.find(e)},h.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return c(t,e)},h.prototype.toString=function(){return this.stringify()},h.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var m=function(e){var t=e.id,n=e.viewBox,r=e.content;this.id=t,this.viewBox=n,this.content=r};m.prototype.stringify=function(){return this.content},m.prototype.toString=function(){return this.stringify()},m.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var g=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},y=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return g(c(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(m),v={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},b=function(e){return Array.prototype.slice.call(e,0)},_={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},w=function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!1,!1,t),window.dispatchEvent(n)},E=function(e){var t=[];return b(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},S=function(e){return(e||window.location.href).split("#")[0]},x=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,r){w(e,{oldUrl:r,newUrl:n})}))}])},k="linearGradient, radialGradient, pattern, mask, clipPath",T=function(e,t){return void 0===t&&(t=k),b(e.querySelectorAll("symbol")).forEach((function(e){b(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e};function O(e,t){return b(e).reduce((function(e,n){if(!n.attributes)return e;var r=b(n.attributes),i=t?r.filter(t):r;return e.concat(i)}),[])}var C=i.xlink.uri,A="xlink:href",P=/[{}|\\\^\[\]`"<>]/g;function M(e){return e.replace(P,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}function D(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(e,t,n){return b(e).forEach((function(e){var r=e.getAttribute(A);if(r&&0===r.indexOf(t)){var i=r.replace(t,n);e.setAttributeNS(C,A,i)}})),e}var L,N=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],I=N.map((function(e){return"["+e+"]"})).join(","),j=function(e,t,n,r){var i=M(n),o=M(r);O(e.querySelectorAll(I),(function(e){var t=e.localName,n=e.value;return-1!==N.indexOf(t)&&-1!==n.indexOf("url("+i)})).forEach((function(e){return e.value=e.value.replace(new RegExp(D(i),"g"),o)})),R(t,i,o)},B={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},F=function(e){function n(n){var i=this;void 0===n&&(n={}),e.call(this,t(v,n));var o=r();this._emitter=o,this.node=null;var a=this.config;if(a.autoConfigure&&this._autoConfigure(n),a.syncUrlsWithBaseTag){var s=document.getElementsByTagName("base")[0].getAttribute("href");o.on(B.MOUNT,(function(){return i.updateUrls("#",s)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,l),a.locationChangeAngularEmitter&&x(a.locationChangeEvent),o.on(B.MOUNT,(function(e){a.moveGradientsOutsideSymbol&&T(e)})),o.on(B.SYMBOL_MOUNT,(function(e){a.moveGradientsOutsideSymbol&&T(e.parentNode),(_.isIE()||_.isEdge())&&E(e)}))}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},n.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter=void 0!==window.angular),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=_.isFirefox())},n.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,r=t.newUrl;this.updateUrls(n,r)},n.prototype.add=function(t){var n=this,r=e.prototype.add.call(this,t);return this.isMounted&&r&&(t.mount(n.node),this._emitter.emit(B.SYMBOL_MOUNT,t.node)),r},n.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e;return n.node=r,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(B.SYMBOL_MOUNT,e.node)})),b(r.querySelectorAll("symbol")).forEach((function(e){var t=y.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(B.MOUNT,r),r},n.prototype.destroy=function(){var e=this,t=e.config,n=e.symbols,r=e._emitter;n.forEach((function(e){return e.destroy()})),r.off("*"),window.removeEventListener(t.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},n.prototype.mount=function(e,t){void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1);var n=this;if(n.isMounted)return n.node;var r="string"==typeof e?document.querySelector(e):e,i=n.render();return this.node=i,t&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(B.MOUNT,i),i},n.prototype.render=function(){return g(this.stringify())},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},n.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return j(this.node,n,S(e)+"#",S(t)+"#"),!0},Object.defineProperties(n.prototype,i),n}(h),Y=e((function(e){var t;t=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}},e.exports=t()})),H="__SVG_SPRITE_NODE__",V="__SVG_SPRITE__";window[V]?L=window[V]:(L=new F({attrs:{id:H,"aria-hidden":"true"}}),window[V]=L);var q=function(){var e=document.getElementById(H);e?L.attach(e):L.mount(document.body,!0)};return document.body?q():Y(q),L}()},87287:(e,t,n)=>{e.exports=n(9431)},9431:(e,t,n)=>{"use strict";e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(71635),a=(r=o)&&r.__esModule?r:{default:r};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e;var s=(0,a.default)(i);t.default=s},71635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.Symbol;"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable";return t}},58911:e=>{var t;t="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},e.exports=t},69723:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=t},61771:function(e,t){"use strict";var n,r,i;r=[],void 0===(i="function"==typeof(n=function(){function e(){return!0}function t(){return!1}function n(){}function r(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],o={name:"any",test:e},a=[],s=[],l={types:i,conversions:s,ignore:a};function u(e){var t=$(l.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return o;var n=$(l.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function c(e){return e===o?999:l.types.indexOf(e)}function d(e){var t=$(l.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function f(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),o=e.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")}function p(e,t){var n=d(e);if(t===n)return e;for(var r=0;r<l.conversions.length;r++){var i=l.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)}function h(e){return e.map((function(e){var t=e.types.map(S);return(e.restParam?"...":"")+t.join("|")})).join(",")}function m(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(F).filter(Y).filter(B),i=M(t,r),o=r.map((function(e){var t=u(e);return{name:e,typeIndex:c(t),test:t.test,conversion:null,conversionIndex:-1}})),a=i.map((function(e){var n=u(e.from);return{name:e.from,typeIndex:c(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:o.concat(a),restParam:n}}function g(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(F).map((function(e,t,r){var i=m(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(V)?null:{params:r,fn:t}}function y(e){var t=U(e);return!!t&&t.restParam}function v(e){return e.types.some((function(e){return null!=e.conversion}))}function b(t){if(t&&0!==t.types.length){if(1===t.types.length)return u(t.types[0].name).test;if(2===t.types.length){var n=u(t.types[0].name).test,r=u(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return u(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function _(e){var t,n,r;if(y(e)){var i=(t=q(e).map(b)).length,o=b(U(e)),a=function(e){for(var t=i;t<e.length;t++)if(!o(e[t]))return!1;return!0};return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return a(e)&&e.length>=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=b(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=b(e[0]),r=b(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(b),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function w(e,t){return t<e.params.length?e.params[t]:y(e.params)?U(e.params):null}function E(e,t,n){var r=w(e,t);return(r?n?r.types.filter(x):r.types:[]).map(S)}function S(e){return e.name}function x(e){return null===e.conversion||void 0===e.conversion}function k(e,t){var n=K(Z(e,(function(e){return E(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function T(e,t,n){var r,i,o,a=e||"unnamed",s=n;for(o=0;o<t.length;o++){var l=s.filter((function(e){var n=b(w(e,o));return(o<e.params.length||y(e.params))&&n(t[o])}));if(0===l.length){if((i=k(s,o)).length>0){var u=d(t[o]);return(r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+u+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:u,expected:i},r}}else s=l}var c=s.map((function(e){return y(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,c))return i=k(s,o),(r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;var f=Math.max.apply(null,c);return t.length>f?((r=new TypeError("Too many arguments in function "+a+" (expected: "+f+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:f},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:t.map(d)},r)}function O(e){for(var t=999,n=0;n<e.types.length;n++)x(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function C(e){for(var t=999,n=0;n<e.types.length;n++)x(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function A(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=v(e)-v(t))||0!=(n=O(e)-O(t))?n:C(e)-C(t)}function P(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!=(r=e.params.some(v)-t.params.some(v)))return r;for(n=0;n<i;n++)if(0!=(r=v(e.params[n])-v(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=A(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function M(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}function D(e,t){var n=t;if(e.some(v)){var r=y(e),i=e.map(R);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,o=0;o<n;o++)e[o]=i[o](arguments[o]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(null,e)}}var o=n;if(y(e)){var a=e.length-1;o=function(){return n.apply(null,W(arguments,0,a).concat([W(arguments,a)]))}}return o}function R(e){var t,n,r,i,o=[],a=[];switch(e.types.forEach((function(e){e.conversion&&(o.push(u(e.conversion.from).test),a.push(e.conversion.convert))})),a.length){case 0:return function(e){return e};case 1:return t=o[0],r=a[0],function(e){return t(e)?r(e):e};case 2:return t=o[0],n=o[1],r=a[0],i=a[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<a.length;t++)if(o[t](e))return a[t](e);return e}}}function L(e){var t={};return e.forEach((function(e){e.params.some(v)||N(e.params,!0).forEach((function(n){t[h(n)]=e.fn}))})),t}function N(e,t){function n(e,r,i){if(r<e.length){var o,a=e[r],s=t?a.types.filter(x):a.types;if(a.restParam){var l=s.filter(x);o=l.length<s.length?[l,s]:[s]}else o=s.map((function(e){return[e]}));return Z(o,(function(t){return n(e,r+1,i.concat([t]))}))}return[i.map((function(t,n){return{types:t,restParam:n===e.length-1&&y(e)}}))]}return n(e,0,[])}function I(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!G(E(e,r,!0),E(t,r,!0)))return!1;var i=e.params.length,o=t.params.length,a=y(e.params),s=y(t.params);return a?s?i===o:o>=i:s?i>=o:i===o}function j(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return g(e,r[e],l.conversions)})).filter(H).forEach((function(e){var t=$(i,(function(t){return I(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+h(t.params)+'" and "'+h(e.params)+'".');i.push(e)}));var o=Z(i,(function(e){return(e?N(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(H);o.sort(P);var a=o[0]&&o[0].params.length<=2&&!y(o[0].params),s=o[1]&&o[1].params.length<=2&&!y(o[1].params),u=o[2]&&o[2].params.length<=2&&!y(o[2].params),c=o[3]&&o[3].params.length<=2&&!y(o[3].params),d=o[4]&&o[4].params.length<=2&&!y(o[4].params),f=o[5]&&o[5].params.length<=2&&!y(o[5].params),p=a&&s&&u&&c&&d&&f,m=o.map((function(e){return _(e.params)})),v=a?b(o[0].params[0]):t,w=s?b(o[1].params[0]):t,E=u?b(o[2].params[0]):t,S=c?b(o[3].params[0]):t,x=d?b(o[4].params[0]):t,k=f?b(o[5].params[0]):t,O=a?b(o[0].params[1]):t,C=s?b(o[1].params[1]):t,A=u?b(o[2].params[1]):t,M=c?b(o[3].params[1]):t,R=d?b(o[4].params[1]):t,j=f?b(o[5].params[1]):t,B=o.map((function(e){return D(e.params,e.fn)})),F=a?B[0]:n,Y=s?B[1]:n,V=u?B[2]:n,q=c?B[3]:n,U=d?B[4]:n,W=f?B[5]:n,z=a?o[0].params.length:-1,G=s?o[1].params.length:-1,K=u?o[2].params.length:-1,J=c?o[3].params.length:-1,Q=d?o[4].params.length:-1,X=f?o[5].params.length:-1,ee=p?6:0,te=o.length,ne=function(){for(var t=ee;t<te;t++)if(m[t](arguments))return B[t].apply(null,arguments);throw T(e,arguments,o)},re=function(e,t){return arguments.length===z&&v(e)&&O(t)?F.apply(null,arguments):arguments.length===G&&w(e)&&C(t)?Y.apply(null,arguments):arguments.length===K&&E(e)&&A(t)?V.apply(null,arguments):arguments.length===J&&S(e)&&M(t)?q.apply(null,arguments):arguments.length===Q&&x(e)&&R(t)?U.apply(null,arguments):arguments.length===X&&k(e)&&j(t)?W.apply(null,arguments):ne.apply(null,arguments)};try{Object.defineProperty(re,"name",{value:e})}catch(e){}return re.signatures=L(o),re}function B(e){return-1===l.ignore.indexOf(e)}function F(e){return e.trim()}function Y(e){return!!e}function H(e){return null!==e}function V(e){return 0===e.types.length}function q(e){return e.slice(0,e.length-1)}function U(e){return e[e.length-1]}function W(e,t,n){return Array.prototype.slice.call(e,t,n)}function z(e,t){return-1!==e.indexOf(t)}function G(e,t){for(var n=0;n<e.length;n++)if(z(t,e[n]))return!0;return!1}function $(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function K(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}function Z(e,t){return Array.prototype.concat.apply([],e.map(t))}function J(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(r.signatures&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}return(l=j("typed",{"string, Object":j,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return j(J(t),e)},"...Function":function(e){for(var t,n=J(e),r={},i=0;i<e.length;i++){var o=e[i];if("object"!=typeof o.signatures)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;for(var a in o.signatures)if(o.signatures.hasOwnProperty(a))if(r.hasOwnProperty(a)){if(o.signatures[a]!==r[a])throw(t=new Error('Signature "'+a+'" is defined twice')).data={signature:a},t}else r[a]=o.signatures[a]}return j(n,r)}})).create=r,l.types=i,l.conversions=s,l.ignore=a,l.convert=p,l.find=f,l.addType=function(e){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");l.types.push(e)},l.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");l.conversions.push(e)},l}return r()})?n.apply(t,r):n)||(e.exports=i)},20267:(e,t,n)=>{"use strict";n.d(t,{Ch:()=>u,$c:()=>l});var r=n(7896),i=n(31461),o=n(2784);n(47677);function a(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t,n){var r=(0,o.useRef)(void 0!==e),i=(0,o.useState)(t),a=i[0],s=i[1],l=void 0!==e,u=r.current;return r.current=l,!l&&u&&a!==t&&s(t),[l?e:a,(0,o.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}function u(e,t){return Object.keys(t).reduce((function(n,o){var u,c=n,d=c[a(o)],f=c[o],p=(0,i.Z)(c,[a(o),o].map(s)),h=t[o],m=l(f,d,e[h]),g=m[0],y=m[1];return(0,r.Z)({},p,((u={})[o]=g,u[h]=y,u))}),e)}function c(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function d(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function f(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}c.__suppressDeprecationWarning=!0,d.__suppressDeprecationWarning=!0,f.__suppressDeprecationWarning=!0},35029:function(e,t,n){e.exports=function(){var e="1.12.1",t="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},r=Array.prototype,i=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,a=r.push,s=r.slice,l=i.toString,u=i.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,f=Array.isArray,p=Object.keys,h=Object.create,m=c&&ArrayBuffer.isView,g=isNaN,y=isFinite,v=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_=Math.pow(2,53)-1;function w(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function E(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function S(e){return null===e}function x(e){return void 0===e}function k(e){return!0===e||!1===e||"[object Boolean]"===l.call(e)}function T(e){return!(!e||1!==e.nodeType)}function O(e){var t="[object "+e+"]";return function(e){return l.call(e)===t}}var C=O("String"),A=O("Number"),P=O("Date"),M=O("RegExp"),D=O("Error"),R=O("Symbol"),L=O("ArrayBuffer"),N=O("Function"),I=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof I&&(N=function(e){return"function"==typeof e||!1});var j=N,B=O("Object"),F=d&&B(new DataView(new ArrayBuffer(8))),Y="undefined"!=typeof Map&&B(new Map),H=O("DataView");function V(e){return null!=e&&j(e.getInt8)&&L(e.buffer)}var q=F?V:H,U=f||O("Array");function W(e,t){return null!=e&&u.call(e,t)}var z=O("Arguments");!function(){z(arguments)||(z=function(e){return W(e,"callee")})}();var G=z;function $(e){return!R(e)&&y(e)&&!isNaN(parseFloat(e))}function K(e){return A(e)&&g(e)}function Z(e){return function(){return e}}function J(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=_}}function Q(e){return function(t){return null==t?void 0:t[e]}}var X=Q("byteLength"),ee=J(X),te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ne(e){return m?m(e)&&!q(e):ee(e)&&te.test(l.call(e))}var re=c?ne:Z(!1),ie=Q("length");function oe(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}function ae(e,t){t=oe(t);var n=b.length,r=e.constructor,o=j(r)&&r.prototype||i,a="constructor";for(W(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=b[n])in e&&e[a]!==o[a]&&!t.contains(a)&&t.push(a)}function se(e){if(!E(e))return[];if(p)return p(e);var t=[];for(var n in e)W(e,n)&&t.push(n);return v&&ae(e,t),t}function le(e){if(null==e)return!0;var t=ie(e);return"number"==typeof t&&(U(e)||C(e)||G(e))?0===t:0===ie(se(e))}function ue(e,t){var n=se(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0}function ce(e){return e instanceof ce?e:this instanceof ce?void(this._wrapped=e):new ce(e)}function de(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,X(e))}ce.VERSION=e,ce.prototype.value=function(){return this._wrapped},ce.prototype.valueOf=ce.prototype.toJSON=ce.prototype.value,ce.prototype.toString=function(){return String(this._wrapped)};var fe="[object DataView]";function pe(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&he(e,t,n,r)}function he(e,t,n,r){e instanceof ce&&(e=e._wrapped),t instanceof ce&&(t=t._wrapped);var i=l.call(e);if(i!==l.call(t))return!1;if(F&&"[object Object]"==i&&q(e)){if(!q(t))return!1;i=fe}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(t);case"[object ArrayBuffer]":case fe:return he(de(e),de(t),n,r)}var a="[object Array]"===i;if(!a&&re(e)){if(X(e)!==X(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,u=t.constructor;if(s!==u&&!(j(s)&&s instanceof s&&j(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!pe(e[c],t[c],n,r))return!1}else{var d,f=se(e);if(c=f.length,se(t).length!==c)return!1;for(;c--;)if(!W(t,d=f[c])||!pe(e[d],t[d],n,r))return!1}return n.pop(),r.pop(),!0}function me(e,t){return pe(e,t)}function ge(e){if(!E(e))return[];var t=[];for(var n in e)t.push(n);return v&&ae(e,t),t}function ye(e){var t=ie(e);return function(n){if(null==n)return!1;var r=ge(n);if(ie(r))return!1;for(var i=0;i<t;i++)if(!j(n[e[i]]))return!1;return e!==Se||!j(n[ve])}}var ve="forEach",be="has",_e=["clear","delete"],we=["get",be,"set"],Ee=_e.concat(ve,we),Se=_e.concat(we),xe=["add"].concat(_e,ve,be),ke=Y?ye(Ee):O("Map"),Te=Y?ye(Se):O("WeakMap"),Oe=Y?ye(xe):O("Set"),Ce=O("WeakSet");function Ae(e){for(var t=se(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Pe(e){for(var t=se(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Me(e){for(var t={},n=se(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function De(e){var t=[];for(var n in e)j(e[n])&&t.push(n);return t.sort()}function Re(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,l=0;l<s;l++){var u=a[l];t&&void 0!==n[u]||(n[u]=o[u])}return n}}var Le=Re(ge),Ne=Re(se),Ie=Re(ge,!0);function je(){return function(){}}function Be(e){if(!E(e))return{};if(h)return h(e);var t=je();t.prototype=e;var n=new t;return t.prototype=null,n}function Fe(e,t){var n=Be(e);return t&&Ne(n,t),n}function Ye(e){return E(e)?U(e)?e.slice():Le({},e):e}function He(e,t){return t(e),e}function Ve(e){return U(e)?e:[e]}function qe(e){return ce.toPath(e)}function Ue(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function We(e,t,n){var r=Ue(e,qe(t));return x(r)?n:r}function ze(e,t){for(var n=(t=qe(t)).length,r=0;r<n;r++){var i=t[r];if(!W(e,i))return!1;e=e[i]}return!!n}function Ge(e){return e}function $e(e){return e=Ne({},e),function(t){return ue(t,e)}}function Ke(e){return e=qe(e),function(t){return Ue(t,e)}}function Ze(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}function Je(e,t,n){return null==e?Ge:j(e)?Ze(e,t,n):E(e)&&!U(e)?$e(e):Ke(e)}function Qe(e,t){return Je(e,t,1/0)}function Xe(e,t,n){return ce.iteratee!==Qe?ce.iteratee(e,t):Je(e,t,n)}function et(e,t,n){t=Xe(t,n);for(var r=se(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o}function tt(){}function nt(e){return null==e?tt:function(t){return We(e,t)}}function rt(e,t,n){var r=Array(Math.max(0,e));t=Ze(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function it(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}ce.toPath=Ve,ce.iteratee=Qe;var ot=Date.now||function(){return(new Date).getTime()};function at(e){var t=function(t){return e[t]},n="(?:"+se(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}var st={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=at(st),ut=at(Me(st)),ct=ce.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},dt=/(.)^/,ft={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},pt=/\\|'|\r|\n|\u2028|\u2029/g;function ht(e){return"\\"+ft[e]}var mt=/^\s*(\w|\$)+\s*$/;function gt(e,t,n){!t&&n&&(t=n),t=Ie({},t,ce.templateSettings);var r=RegExp([(t.escape||dt).source,(t.interpolate||dt).source,(t.evaluate||dt).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,(function(t,n,r,a,s){return o+=e.slice(i,s).replace(pt,ht),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t})),o+="';\n";var a,s=t.variable;if(s){if(!mt.test(s))throw new Error(s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return a.call(this,e,ce)};return l.source="function("+s+"){\n"+o+"}",l}function yt(e,t,n){var r=(t=qe(t)).length;if(!r)return j(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=j(o)?o.call(e):o}return e}var vt=0;function bt(e){var t=++vt+"";return e?e+t:t}function _t(e){var t=ce(e);return t._chain=!0,t}function wt(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=Be(e.prototype),a=e.apply(o,i);return E(a)?a:o}var Et=w((function(e,t){var n=Et.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return wt(e,r,this,this,a)};return r}));Et.placeholder=ce;var St=w((function(e,t,n){if(!j(e))throw new TypeError("Bind must be called on a function");var r=w((function(i){return wt(e,r,t,this,n.concat(i))}));return r})),xt=J(ie);function kt(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,o=0,a=ie(e);o<a;o++){var s=e[o];if(xt(s)&&(U(s)||G(s)))if(t>1)kt(s,t-1,n,r),i=r.length;else for(var l=0,u=s.length;l<u;)r[i++]=s[l++];else n||(r[i++]=s)}return r}var Tt=w((function(e,t){var n=(t=kt(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=St(e[r],e)}return e}));function Ot(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return W(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}var Ct=w((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),At=Et(Ct,ce,1);function Pt(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:ot(),r=null,a=e.apply(i,o),r||(i=o=null)},u=function(){var u=ot();s||!1!==n.leading||(s=u);var c=t-(u-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=u,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u}function Mt(e,t,n){var r,i,o,a,s,l=function(){var u=ot()-i;t>u?r=setTimeout(l,t-u):(r=null,n||(a=e.apply(s,o)),r||(o=s=null))},u=w((function(u){return s=this,o=u,i=ot(),r||(r=setTimeout(l,t),n&&(a=e.apply(s,o))),a}));return u.cancel=function(){clearTimeout(r),r=o=s=null},u}function Dt(e,t){return Et(t,e)}function Rt(e){return function(){return!e.apply(this,arguments)}}function Lt(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Nt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function It(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var jt=Et(It,2);function Bt(e,t,n){t=Xe(t,n);for(var r,i=se(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r}function Ft(e){return function(t,n,r){n=Xe(n,r);for(var i=ie(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}var Yt=Ft(1),Ht=Ft(-1);function Vt(e,t,n,r){for(var i=(n=Xe(n,r,1))(t),o=0,a=ie(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o}function qt(e,t,n){return function(r,i,o){var a=0,l=ie(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(s.call(r,a,l),K))>=0?o+a:-1;for(o=e>0?a:l-1;o>=0&&o<l;o+=e)if(r[o]===i)return o;return-1}}var Ut=qt(1,Yt,Vt),Wt=qt(-1,Ht);function zt(e,t,n){var r=(xt(e)?Yt:Bt)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Gt(e,t){return zt(e,$e(t))}function $t(e,t,n){var r,i;if(t=Ze(t,n),xt(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=se(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e}function Kt(e,t,n){t=Xe(t,n);for(var r=!xt(e)&&se(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o}function Zt(e){var t=function(t,n,r,i){var o=!xt(t)&&se(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var l=o?o[s]:s;r=n(r,t[l],l,t)}return r};return function(e,n,r,i){var o=arguments.length>=3;return t(e,Ze(n,i,4),r,o)}}var Jt=Zt(1),Qt=Zt(-1);function Xt(e,t,n){var r=[];return t=Xe(t,n),$t(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function en(e,t,n){return Xt(e,Rt(Xe(t)),n)}function tn(e,t,n){t=Xe(t,n);for(var r=!xt(e)&&se(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0}function nn(e,t,n){t=Xe(t,n);for(var r=!xt(e)&&se(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1}function rn(e,t,n,r){return xt(e)||(e=Ae(e)),("number"!=typeof n||r)&&(n=0),Ut(e,t,n)>=0}var on=w((function(e,t,n){var r,i;return j(t)?i=t:(t=qe(t),r=t.slice(0,-1),t=t[t.length-1]),Kt(e,(function(e){var o=i;if(!o){if(r&&r.length&&(e=Ue(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))}));function an(e,t){return Kt(e,Ke(t))}function sn(e,t){return Xt(e,$e(t))}function ln(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=xt(e)?e:Ae(e)).length;s<l;s++)null!=(r=e[s])&&r>o&&(o=r);else t=Xe(t,n),$t(e,(function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)}));return o}function un(e,t,n){var r,i,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,l=(e=xt(e)?e:Ae(e)).length;s<l;s++)null!=(r=e[s])&&r<o&&(o=r);else t=Xe(t,n),$t(e,(function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)}));return o}function cn(e,t,n){if(null==t||n)return xt(e)||(e=Ae(e)),e[it(e.length-1)];var r=xt(e)?Ye(e):Ae(e),i=ie(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=it(a,o),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)}function dn(e){return cn(e,1/0)}function fn(e,t,n){var r=0;return t=Xe(t,n),an(Kt(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function pn(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=Xe(r,i),$t(n,(function(t,i){var a=r(t,i,n);e(o,t,a)})),o}}var hn=pn((function(e,t,n){W(e,n)?e[n].push(t):e[n]=[t]})),mn=pn((function(e,t,n){e[n]=t})),gn=pn((function(e,t,n){W(e,n)?e[n]++:e[n]=1})),yn=pn((function(e,t,n){e[n?0:1].push(t)}),!0),vn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function bn(e){return e?U(e)?s.call(e):C(e)?e.match(vn):xt(e)?Kt(e,Ge):Ae(e):[]}function _n(e){return null==e?0:xt(e)?e.length:se(e).length}function wn(e,t,n){return t in n}var En=w((function(e,t){var n={},r=t[0];if(null==e)return n;j(r)?(t.length>1&&(r=Ze(r,t[1])),t=ge(e)):(r=wn,t=kt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n})),Sn=w((function(e,t){var n,r=t[0];return j(r)?(r=Rt(r),t.length>1&&(n=t[1])):(t=Kt(kt(t,!1,!1),String),r=function(e,n){return!rn(t,n)}),En(e,r,n)}));function xn(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function kn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:xn(e,e.length-t)}function Tn(e,t,n){return s.call(e,null==t||n?1:t)}function On(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Tn(e,Math.max(0,e.length-t))}function Cn(e){return Xt(e,Boolean)}function An(e,t){return kt(e,t,!1)}var Pn=w((function(e,t){return t=kt(t,!0,!0),Xt(e,(function(e){return!rn(t,e)}))})),Mn=w((function(e,t){return Pn(e,t)}));function Dn(e,t,n,r){k(t)||(r=n,n=t,t=!1),null!=n&&(n=Xe(n,r));for(var i=[],o=[],a=0,s=ie(e);a<s;a++){var l=e[a],u=n?n(l,a,e):l;t&&!n?(a&&o===u||i.push(l),o=u):n?rn(o,u)||(o.push(u),i.push(l)):rn(i,l)||i.push(l)}return i}var Rn=w((function(e){return Dn(kt(e,!0,!0))}));function Ln(e){for(var t=[],n=arguments.length,r=0,i=ie(e);r<i;r++){var o=e[r];if(!rn(t,o)){var a;for(a=1;a<n&&rn(arguments[a],o);a++);a===n&&t.push(o)}}return t}function Nn(e){for(var t=e&&ln(e,ie).length||0,n=Array(t),r=0;r<t;r++)n[r]=an(e,r);return n}var In=w(Nn);function jn(e,t){for(var n={},r=0,i=ie(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Bn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function Fn(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(s.call(e,r,r+=t));return n}function Yn(e,t){return e._chain?ce(t).chain():t}function Hn(e){return $t(De(e),(function(t){var n=ce[t]=e[t];ce.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),Yn(this,n.apply(ce,e))}})),ce}$t(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=r[e];ce.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Yn(this,n)}})),$t(["concat","join","slice"],(function(e){var t=r[e];ce.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Yn(this,e)}}));var Vn=Hn({__proto__:null,VERSION:e,restArguments:w,isObject:E,isNull:S,isUndefined:x,isBoolean:k,isElement:T,isString:C,isNumber:A,isDate:P,isRegExp:M,isError:D,isSymbol:R,isArrayBuffer:L,isDataView:q,isArray:U,isFunction:j,isArguments:G,isFinite:$,isNaN:K,isTypedArray:re,isEmpty:le,isMatch:ue,isEqual:me,isMap:ke,isWeakMap:Te,isSet:Oe,isWeakSet:Ce,keys:se,allKeys:ge,values:Ae,pairs:Pe,invert:Me,functions:De,methods:De,extend:Le,extendOwn:Ne,assign:Ne,defaults:Ie,create:Fe,clone:Ye,tap:He,get:We,has:ze,mapObject:et,identity:Ge,constant:Z,noop:tt,toPath:Ve,property:Ke,propertyOf:nt,matcher:$e,matches:$e,times:rt,random:it,now:ot,escape:lt,unescape:ut,templateSettings:ct,template:gt,result:yt,uniqueId:bt,chain:_t,iteratee:Qe,partial:Et,bind:St,bindAll:Tt,memoize:Ot,delay:Ct,defer:At,throttle:Pt,debounce:Mt,wrap:Dt,negate:Rt,compose:Lt,after:Nt,before:It,once:jt,findKey:Bt,findIndex:Yt,findLastIndex:Ht,sortedIndex:Vt,indexOf:Ut,lastIndexOf:Wt,find:zt,detect:zt,findWhere:Gt,each:$t,forEach:$t,map:Kt,collect:Kt,reduce:Jt,foldl:Jt,inject:Jt,reduceRight:Qt,foldr:Qt,filter:Xt,select:Xt,reject:en,every:tn,all:tn,some:nn,any:nn,contains:rn,includes:rn,include:rn,invoke:on,pluck:an,where:sn,max:ln,min:un,shuffle:dn,sample:cn,sortBy:fn,groupBy:hn,indexBy:mn,countBy:gn,partition:yn,toArray:bn,size:_n,pick:En,omit:Sn,first:kn,head:kn,take:kn,initial:xn,last:On,rest:Tn,tail:Tn,drop:Tn,compact:Cn,flatten:An,without:Mn,uniq:Dn,unique:Dn,union:Rn,intersection:Ln,difference:Pn,unzip:Nn,transpose:Nn,zip:In,object:jn,range:Bn,chunk:Fn,mixin:Hn,default:ce});return Vn._=Vn,Vn}()},38725:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},19157:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},26426:(e,t,n)=>{var r=n(19157),i=n(38725);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},45982:e=>{"use strict";var t=function(){};e.exports=t},77182:(e,t,n)=>{var r,i;r=[n(29497),n(7324),n(38291)],void 0===(i=function(e,t,n){"use strict";var r;(function(e,t,n){var r=/^(\S+)\s*(.*)$/,i=e.isFunction(n)?n("body")[0]:null;t.Courier={},t.Courier.add=function(n){var o={setElement:n.setElement};function a(t){e.isFunction(t.$el.data)&&!t.$el.data("view")&&t.$el.data("view",t)}function s(t,n,i){var o=[];for(var a in t){var s=a.match(r),l=s[1],u=s[2];new RegExp(l.replace("*","[\\w]*")).test(n.name)&&(""!==u&&i._getChildViewNamed(u)!==n.source||o.push({eventName:l,subviewName:u,value:t[a]}))}return o.length>1&&(o=e.sortBy(o,(function(e){var t=e.eventName.replace("*","");return-((""!==e.subviewName?1e3:0)+t.length)}))),o.length?o[0].value:null}n.spawn=function(t,r){if(e.isString(t))t={name:t,data:r};else if(e.isUndefined(t.name))throw new Error("Undefined message name.");t.source=n,t.data=t.data||{},this.trigger(t.name,t.data);for(var i,o,a="!"===t.name[t.name.length-1],l=this._getParentView();l;){if(e.isObject(l.onMessages)&&null!==(o=s(l.onMessages,t,l))){var u=o;if(e.isFunction(u)||(u=l[o]),!u)throw new Error('Method "'+o+'" does not exist');var c=u.call(l,t.data,t.source,t.name);if(a)return c}i=!1;var d=e.result(l,"passMessages");if(e.isObject(d))if(null!==(o=s(d,t,l))){if("."===o);else{if(!e.isString(o))throw new TypeError("Values of passMessages hash should be strings.");t.name=o}i=!0}else a&&(i=!0);if(a&&(i=!0),!i)break;t.source=l,l=l._getParentView()}if(a)throw new Error('Round trip message "'+t.name+'" was not handled. All round trip messages must be handled.')},e.isFunction(n._getParentView)||(n._getParentView=function(){for(var e=null,n=this.$el.parent();n.length>0&&n[0]!==i;){var r=n.data("view");if(r&&r instanceof t.View){e=r;break}n=n.parent()}return e}),e.isFunction(n._getChildViewNamed)||(n._getChildViewNamed=function(t){return e.isObject(this.subviews)?this.subviews[t]:null}),n.setElement=function(e,t){var r=o.setElement.call(this,e,t);return a(n),r},n.$el&&a(n)},t.Courier})((r={Backbone:e,_:t,$:n})._,r.Backbone,r.jQuery||r.Zepto||r.$)}.apply(t,r))||(e.exports=i)},29497:(e,t,n)=>{var r,i;r=[n(7324),n(38291)],void 0===(i=function(e,t){var n,r={jQuery:t,_:e,Backbone:void 0};return(n=r).Backbone=function(e,t,n,r){var i=e.Backbone,o=[],a=(o.push,o.slice);o.splice,t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,r){if(!u(this,"once",e,[t,r])||!t)return this;var i=this,o=n.once((function(){i.off(e,o),t.apply(this,arguments)}));return o._callback=t,this.on(e,o,r)},off:function(e,t,r){var i,o,a,s,l,c,d,f;if(!this._events||!u(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(l=0,c=(s=e?[e]:n.keys(this._events)).length;l<c;l++)if(e=s[l],a=this._events[e]){if(this._events[e]=i=[],t||r)for(d=0,f=a.length;d<f;d++)o=a[d],(t&&t!==o.callback&&t!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var o=!t&&!r;for(var a in r||"object"!=typeof t||(r=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,r,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[a];return this}},l=/\s+/,u=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}},d={listenTo:"on",listenToOnce:"once"};n.each(d,(function(e,t){s[t]=function(t,r,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=n.uniqueId("l"))]=t,i||"object"!=typeof r||(i=this),t[e](r,i,this),this}})),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var f=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(f.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var i,o,a,s,l,u,c,d;if(null==e)return this;if("object"==typeof e?(o=e,r=t):(o={})[e]=t,r||(r={}),!this._validate(o,r))return!1;for(i in a=r.unset,l=r.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o)t=o[i],n.isEqual(d[i],t)||s.push(i),n.isEqual(c[i],t)?delete this.changed[i]:this.changed[i]=t,a?delete d[i]:d[i]=t;if(!l){s.length&&(this._pending=r);for(var f=0,p=s.length;f<p;f++)this.trigger("change:"+s[f],this,d[s[f]],r)}if(u)return this;if(!l)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(i[o],t=e[o])||((r||(r={}))[o]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,o,a,s=this.attributes;if(null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},s,i)),void 0===r.parse&&(r.parse=!0);var l=this,u=r.success;return r.success=function(e){l.attributes=s;var t=l.parse(e,r);if(r.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!l.set(t,r))return!1;u&&u(l,e,r),l.trigger("sync",l,e,r)},j(this,r),"patch"==(o=this.isNew()?"create":r.patch?"patch":"update")&&(r.attrs=i),a=this.sync(o,this,r),i&&r.wait&&(this.attributes=s),a},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;j(this,e);var o=this.sync("delete",this,e);return e.wait||i(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||I();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,(function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}}));var h=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(h.prototype,s,{model:f,initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var r,i,o,a,s=!n.isArray(e);for(t||(t={}),r=0,i=(e=s?[e]:n.clone(e)).length;r<i;r++)(a=e[r]=this.get(e[r]))&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger("remove",a,this,t)),this._removeReference(a,t));return s?e[0]:e},set:function(e,t){(t=n.defaults({},t,m)).parse&&(e=this.parse(e,t));var r,i,o,a,s,l,u,c=!n.isArray(e);e=c?e?[e]:[]:n.clone(e);var d=t.at,p=this.model,h=this.comparator&&null==d&&!1!==t.sort,g=n.isString(this.comparator)?this.comparator:null,y=[],v=[],b={},_=t.add,w=t.merge,E=t.remove,S=!(h||!_||!E)&&[];for(r=0,i=e.length;r<i;r++){if(o=(s=e[r]||{})instanceof f?a=s:s[p.prototype.idAttribute||"id"],l=this.get(o))E&&(b[l.cid]=!0),w&&(s=s===a?a.attributes:s,t.parse&&(s=l.parse(s,t)),l.set(s,t),h&&!u&&l.hasChanged(g)&&(u=!0)),e[r]=l;else if(_){if(!(a=e[r]=this._prepareModel(s,t)))continue;y.push(a),this._addReference(a,t)}a=l||a,!S||!a.isNew()&&b[a.id]||S.push(a),b[a.id]=!0}if(E){for(r=0,i=this.length;r<i;++r)b[(a=this.models[r]).cid]||v.push(a);v.length&&this.remove(v,t)}if(y.length||S&&S.length)if(h&&(u=!0),this.length+=y.length,null!=d)for(r=0,i=y.length;r<i;r++)this.models.splice(d+r,0,y[r]);else{S&&(this.models.length=0);var x=S||y;for(r=0,i=x.length;r<i;r++)this.models.push(x[r])}if(u&&this.sort({silent:!0}),!t.silent){for(r=0,i=y.length;r<i;r++)(a=y[r]).trigger("add",a,this,t);(u||S&&S.length)&&this.trigger("sort",this,t)}return c?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"]((function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0}))},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?n.clone(e):{}).parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(y,(function(e){h.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}}));var v=["groupBy","countBy","sortBy","indexBy"];n.each(v,(function(e){h.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}}));var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var i=t.match(_),o=i[1],a=i[2];r=n.bind(r,this),o+=".delegateEvents"+this.cid,""===a?this.$el.on(o,r):this.$el.on(o,a,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,i){var o=S[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||I()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1),"PATCH"===a.type&&E&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var E=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var x=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,O=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(x.prototype,s,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,(function(n){var a=o._extractParameters(e,n);o.execute(i,a),o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a)})),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(C,"\\$&").replace(k,"(?:$1)?").replace(T,(function(e,t){return t?e:"([^/?]+)"})).replace(O,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,(function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null}))}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,D=/msie [\w.]+/,R=/\/$/,L=/#.*$/;A.started=!1,n.extend(A.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(R,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(P,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,o=D.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(M,"/"),o&&this._wantsHashChange){var a=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!A.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(L,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new A;var N=function(e,t){var r,i=this;r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};f.extend=h.extend=x.extend=b.extend=A.extend=N;var I=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$),r.Backbone}.apply(t,r))||(e.exports=i)},52956:function(e,t,n){var r,i;!function(o,a){"use strict";r=[n(29497),n(7324),n(38291)],void 0!==(i=function(){return a.apply(o,arguments)}.apply(t,r))&&(e.exports=i)}("object"==typeof n.g?n.g:this,(function(e,t,n){"use strict";var r=this,i=e.View,o=Array.prototype.push,a=Array.prototype.concat,s=Array.prototype.splice,l=String.prototype.trim?t.bind(String.prototype.trim.call,String.prototype.trim):n.trim,u=e.View.extend({_render:function(){var e=this,t=e.__manager__,n=e.beforeRender,r=e.deferred();return e.hasRendered&&e._removeViews(),t.callback=function(){delete t.isAsync,delete t.callback,e.trigger("beforeRender",e),e._viewRender(t).render().done((function(){r.resolve()}))},n&&n.call(e,e),t.isAsync||t.callback(),r.promise()},_applyTemplate:function(e,r,i){t.isString(e)&&(r.noel?(e=n.parseHTML(e,!0),this.$el.slice(1).remove(),this.$el.replaceWith(e),this.setElement(e,!1)):this.html(this.$el,e)),i.resolveWith(this,[this])},_viewRender:function(e){var n,r,i,o=this;function a(t,r){var a;e.callback=function(t){delete e.isAsync,delete e.callback,o._applyTemplate(t,e,i)},u.cache(n,r),r&&(a=o.renderTemplate.call(o,r,t)),e.isAsync||o._applyTemplate(a,e,i)}return{render:function(){var s=o.serialize,l=o.template;return i=o.deferred(),t.isFunction(s)&&(s=s.call(o)),e.callback=function(t){delete e.isAsync,delete e.callback,a(s,t)},"string"==typeof l&&(n=o.prefix+l),(r=u.cache(n))?(a(s,r),i):("string"==typeof l?r=o.fetchTemplate.call(o,o.prefix+l):"function"==typeof l?r=l:null!=l&&(r=o.fetchTemplate.call(o,l)),e.isAsync||a(s,r),i)}}},constructor:function(n){this.manage=!0,t.extend(this,n),e.View.apply(this,arguments)},async:function(){var e=this.__manager__;return e.isAsync=!0,e.callback},promise:function(){return this.__manager__.renderDeferred.promise()},renderViews:function(){var e=this,t=e.__manager__,n=e.deferred(),r=e.getViews().map((function(e){return e.render().__manager__.renderDeferred})).value();return t.renderDeferred=n.promise(),e.when(r).done((function(){n.resolveWith(e,[e])})),e},insertView:function(e,t){return t?this.setView(e,t,!0):this.setView(e,!0)},insertViews:function(e){return t.isArray(e)?this.setViews({"":e}):(t.each(e,(function(n,r){e[r]=t.isArray(n)?n:[n]})),this.setViews(e))},getView:function(e){return null==e&&(e=arguments[1]),this.getViews(e).first().value()},getViews:function(e){var n;return"string"==typeof e?(e=this.sections[e]||e,n=this.views[e]||[],t.chain([].concat(n))):(n=t.chain(this.views).map((function(e){return t.isArray(e)?e:[e]}),this).flatten(),"object"==typeof e?n.where(e):"function"==typeof e?n.filter(e):n)},removeView:function(e){return this.getViews(e).each((function(e){e.remove()}))},setView:function(e,t,n){var r,i,o=this;if("string"!=typeof e&&(n=t,t=e,e=""),!(r=t.__manager__))throw new Error("The argument associated with selector '"+e+"' is defined and a View.  Set `manage` property to true for Backbone.View instances.");return r.parent=o,i=r.selector=o.sections[e]||e,n?(o.views[i]=a.call([],o.views[e]||[],t),o.__manager__.insert=!0,t):(o.removeView(e),o.views[i]=t)},setViews:function(e){return t.each(e,(function(e,n){if(t.isArray(e))return t.each(e,(function(e){this.insertView(n,e)}),this);this.setView(n,e)}),this),this},render:function(){var e=this,n=e.__manager__,i=n.parent,a=i&&i.__manager__,s=e.deferred();function l(){var o;function l(){var i=r.console,o=e.afterRender;o&&o.call(e,e),e.trigger("afterRender",e),n.noel&&e.$el.length>1&&t.isFunction(i.warn)&&!e.suppressWarnings&&(i.warn("`el: false` with multiple top level elements is not supported."),t.isFunction(i.trace)&&i.trace())}return t.each(e.views,(function(n,r){t.isArray(n)&&e.htmlBatch(e,n,r)})),i&&!n.insertedViaFragment&&(e.contains(i.el,e.el)||i.partial(i.$el,e.$el,a,n)),e.delegateEvents(),e.hasRendered=!0,(o=n.queue.shift())?o():delete n.queue,a&&a.queue?i.once("afterRender",l):l(),s.resolveWith(e,[e])}function u(){e._render().done((function(){if(!t.keys(e.views).length)return l();var n=t.map(e.views,(function(n){var r=t.isArray(n);return r&&n.length?e.when(t.map(n,(function(e){return e.__manager__.insertedViaFragment=!0,e.render().__manager__.renderDeferred}))):r?n:n.render().__manager__.renderDeferred}));e.when(n).done(l)}))}return n.queue?o.call(n.queue,u):(n.queue=[],u()),e.__manager__.renderDeferred=s,e},remove:function(){return u._removeView(this,!0),this._remove.apply(this,arguments)}},{_cache:{},_removeViews:function(e,t){"boolean"==typeof e&&(t=e,e=this),(e=e||this).getViews().each((function(e){(e.hasRendered||t)&&u._removeView(e,t)}))},_removeView:function(e,n){var r,i=e.__manager__,o=i.parent&&i.parent.__manager__;if(!("boolean"==typeof e.keep?e.keep:e.options.keep)&&o&&!0===o.insert||n){if(u.cleanViews(e),e._removeViews(!0),e.$el.remove(),!i.parent)return;if(r=i.parent.views[i.selector],t.isArray(r))return t.each(t.clone(r),(function(e,t){e&&e.__manager__===i&&s.call(r,t,1)}));delete i.parent.views[i.selector]}},cache:function(e,t){return e in this._cache&&null==t?this._cache[e]:null!=e&&null!=t?this._cache[e]=t:void 0},cleanViews:function(n){t.each(a.call([],n),(function(n){n.unbind(),n.model instanceof e.Model&&n.model.off(null,null,n),n.collection instanceof e.Collection&&n.collection.off(null,null,n),n.stopListening(),t.isFunction(n.cleanup)&&n.cleanup()}))},configure:function(n){t.extend(u.prototype,n),n.manage&&(e.View.prototype.manage=!0),!1===n.el&&(e.View.prototype.el=!1),!0===n.suppressWarnings&&(e.View.prototype.suppressWarnings=!0)},setupView:function(n,r){r=r||{},t.each(a.call([],n),(function(n){if(!n.__manager__){var i,o,a=u.prototype;t.defaults(n,{views:{},sections:{},__manager__:{},_removeViews:u._removeViews,_removeView:u._removeView},u.prototype),n.options=r,t.extend(n,r),n._remove=e.View.prototype.remove,n.render=u.prototype.render,n.remove!==a.remove&&(n._remove=n.remove,n.remove=a.remove),i=r.views||n.views,t.keys(i).length&&(o=i,n.views={},t.each(o,(function(e,t){"function"==typeof e&&(o[t]=e.call(n,n))})),n.setViews(o))}}))}});u.VERSION="0.9.5",e.Layout=u,e.View=function(e){var t;("el"in(e=e||{})?!1===e.el:!1===this.el)&&(t=!0),(e.manage||this.manage)&&u.setupView(this,e),this.__manager__&&(this.__manager__.noel=t,this.__manager__.suppressWarnings=e.suppressWarnings),i.apply(this,arguments)},e.View.extend=i.extend,e.View.prototype=i.prototype;var c={prefix:"",deferred:function(){return n.Deferred()},fetchTemplate:function(e){return t.template(n(e).html())},renderTemplate:function(e,t){return l(e(t))},serialize:function(){return this.model?t.clone(this.model.attributes):{}},partial:function(e,t,n,r){var i;r.selector&&(n.noel?(i=e.filter(r.selector),e=i.length?i:e.find(r.selector)):e=e.find(r.selector)),n.insert?this.insert(e,t):this.html(e,t)},html:function(e,t){e.html(t)},htmlBatch:function(e,r,i){var o=e.__manager__,a={selector:i},s=t.reduce(r,(function(t,r){var i=("boolean"==typeof r.keep?r.keep:r.options.keep)&&n.contains(e.el,r.el);return r.el&&!i&&t.push(r.el),t}),[]);return this.partial(e.$el,n(s),o,a)},insert:function(e,t){e.append(t)},when:function(e){return n.when.apply(null,e)},contains:function(e,t){return n.contains(e,t)}};return t.extend(u.prototype,c),u}))},31742:(e,t,n)=>{var r,i;r=[n(38291)],void 0===(i=function(e){var t={},n=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},toStr:function(e){return n.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){e.each(t,(function(e,t){return n(t,e)}))},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,(function(e,i){if(!(r=n.call(null,i,e,t)))return!1})),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,(function(e,i){if(r=n.call(null,i,e,t))return!1})),!!r):r},mixin:e.extend,getUniqueId:(t=0,function(){return t++}),templatify:function(t){return e.isFunction(t)?t:function(){return String(t)}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var o,a,s=this,l=arguments;return o=function(){r=null,n||(i=e.apply(s,l))},a=n&&!r,clearTimeout(r),r=setTimeout(o,t),a&&(i=e.apply(s,l)),i}},throttle:function(e,t){var n,r,i,o,a,s;return a=0,s=function(){a=new Date,i=null,o=e.apply(n,r)},function(){var l=new Date,u=t-(l-a);return n=this,r=arguments,u<=0?(clearTimeout(i),i=null,a=l,o=e.apply(n,r)):i||(i=setTimeout(s,u)),o}},noop:function(){}};var t}(),r=function(){"use strict";return{nonword:t,whitespace:e,obj:{nonword:r(t),whitespace:r(e)}};function e(e){return(e=n.toStr(e))?e.split(/\s+/):[]}function t(e){return(e=n.toStr(e))?e.split(/\W+/):[]}function r(e){return function(){var t=[].slice.call(arguments,0);return function(r){var i=[];return n.each(t,(function(t){i=i.concat(e(n.toStr(r[t])))})),i}}}}(),i=function(){"use strict";function t(t){this.maxSize=n.isNumber(t)?t:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function r(){this.head=this.tail=null}function i(e,t){this.key=e,this.val=t,this.prev=this.next=null}return n.mixin(t.prototype,{set:function(e,t){var n,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new i(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new r}}),n.mixin(r.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),t}(),o=function(){"use strict";var e,t;try{(e=window.localStorage).setItem("~~~","!"),e.removeItem("~~~")}catch(t){e=null}function r(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+n.escapeRegExChars(this.prefix))}return t=e&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),a(e.getItem(this._prefix(t)))},set:function(t,r,a){return n.isNumber(a)?e.setItem(this._ttlKey(t),o(i()+a)):e.removeItem(this._ttlKey(t)),e.setItem(this._prefix(t),o(r))},remove:function(t){return e.removeItem(this._ttlKey(t)),e.removeItem(this._prefix(t)),this},clear:function(){var t,n,r=[],i=e.length;for(t=0;t<i;t++)(n=e.key(t)).match(this.keyMatcher)&&r.push(n.replace(this.keyMatcher,""));for(t=r.length;t--;)this.remove(r[t]);return this},isExpired:function(t){var r=a(e.getItem(this._ttlKey(t)));return!!(n.isNumber(r)&&i()>r)}}:{get:n.noop,set:n.noop,remove:n.noop,clear:n.noop,isExpired:n.noop},n.mixin(r.prototype,t),r;function i(){return(new Date).getTime()}function o(e){return JSON.stringify(n.isUndefined(e)?null:e)}function a(e){return JSON.parse(e)}}(),a=function(){"use strict";var t=0,r={},o=6,a=new i(10);function s(t){var r;t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?(r=t.transport,function(t,i){var o=e.Deferred();return r(t,i,a,s),o;function a(e){n.defer((function(){o.resolve(e)}))}function s(e){n.defer((function(){o.reject(e)}))}}):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new i(0):a}return s.setMaxPendingRequests=function(e){o=e},s.resetCache=function(){a.reset()},n.mixin(s.prototype,{_get:function(e,n,i){var a,s=this;function l(t){i&&i(null,t),s._cache.set(e,t)}function u(){i&&i(!0)}function c(){t--,delete r[e],s.onDeckRequestArgs&&(s._get.apply(s,s.onDeckRequestArgs),s.onDeckRequestArgs=null)}this.cancelled||e!==this.lastUrl||((a=r[e])?a.done(l).fail(u):t<o?(t++,r[e]=this._send(e,n).done(l).fail(u).always(c)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,t,r){var i;return n.isFunction(t)&&(r=t,t={}),this.cancelled=!1,this.lastUrl=e,(i=this._cache.get(e))?n.defer((function(){r&&r(null,i)})):this._get(e,t,r),!!i},cancel:function(){this.cancelled=!0}}),s}(),s=function(){"use strict";function t(t){(t=t||{}).datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}return n.mixin(t.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var t=this;e=n.isArray(e)?e:[e],n.each(e,(function(e){var i,o;i=t.datums.push(e)-1,o=r(t.datumTokenizer(e)),n.each(o,(function(e){var n,r,o;for(n=t.trie,r=e.split("");o=r.shift();)(n=n.children[o]||(n.children[o]={ids:[],children:{}})).ids.push(i)}))}))},get:function(e){var t,i,o=this;return t=r(this.queryTokenizer(e)),n.each(t,(function(e){var t,n,r,a;if(i&&0===i.length)return!1;for(t=o.trie,n=e.split("");t&&(r=n.shift());)t=t.children[r];if(!t||0!==n.length)return i=[],!1;a=t.ids.slice(0),i=i?function(e,t){var n=0,r=0,i=[];e=e.sort(s),t=t.sort(s);var o=e.length,a=t.length;for(;n<o&&r<a;)e[n]<t[r]?n++:(e[n]>t[r]||(i.push(e[n]),n++),r++);return i;function s(e,t){return e-t}}(i,a):a})),i?n.map(function(e){for(var t={},n=[],r=0,i=e.length;r<i;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}(i),(function(e){return o.datums[e]})):[]},reset:function(){this.datums=[],this.trie={ids:[],children:{}}},serialize:function(){return{datums:this.datums,trie:this.trie}}}),t;function r(e){return e=n.filter(e,(function(e){return!!e})),e=n.map(e,(function(e){return e.toLowerCase()}))}}(),l=function(){"use strict";return{local:function(e){return e.local||null},prefetch:function(t){var r,i;i={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=t.prefetch||null)&&(r=n.isString(r)?{url:r}:r,(r=n.mixin(i,r)).thumbprint="0.10.5"+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&e.error("prefetch requires url to be set"));return r},remote:function(t){var r,i;i={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(r=t.remote||null)&&(r=n.isString(r)?{url:r}:r,(r=n.mixin(i,r)).rateLimiter=/^throttle$/i.test(r.rateLimitBy)?(o=r.rateLimitWait,function(e){return n.throttle(e,o)}):function(e){return function(t){return n.debounce(t,e)}}(r.rateLimitWait),r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",delete r.rateLimitBy,delete r.rateLimitWait,!r.url&&e.error("remote requires url to be set"));var o;return r}}}();return function(t){"use strict";var i,u;function c(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=function(e){return n.isFunction(e)?t:r;function t(t){return t.sort(e)}function r(e){return e}}(t.sorter),this.dupDetector=t.dupDetector||d,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}return i=t.Bloodhound,u={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.Bloodhound=c,c.noConflict=function(){return t.Bloodhound=i,c},c.tokenizers=r,n.mixin(c.prototype,{_loadPrefetch:function(t){var n,r,i=this;return(n=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(n),r=e.Deferred().resolve()):r=e.ajax(t.url,t.ajax).done((function(e){i.clear(),i.add(t.filter?t.filter(e):e),i._saveToStorage(i.index.serialize(),t.thumbprint,t.ttl)})),r},_getFromRemote:function(e,t){var n,r,i=this;if(this.transport)return e=e||"",r=encodeURIComponent(e),n=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(n,this.remote.ajax,(function(e,n){t(e?[]:i.remote.filter?i.remote.filter(n):n)}))},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(u.data,e,n),this.storage.set(u.protocol,location.protocol,n),this.storage.set(u.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(u.data),n.protocol=this.storage.get(u.protocol),n.thumbprint=this.storage.get(u.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){var t,r=this,i=this.local;return t=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),i&&t.done((function(){r.add(n.isFunction(i)?i():i)})),this.transport=this.remote?new a(this.remote):null,this.initPromise=t.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,t){var r=this,i=[],o=!1;i=this.index.get(e),(i=this.sorter(i).slice(0,this.limit)).length<this.limit?o=this._getFromRemote(e,(function(e){var o=i.slice(0);n.each(e,(function(e){return!n.some(o,(function(t){return r.dupDetector(e,t)}))&&o.push(e),o.length<r.limit})),t&&t(r.sorter(o))})):this._cancelLastRemoteRequest(),o||(i.length>0||!this.transport)&&t&&t(i)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return n.bind(this.get,this)}}),c;function d(){return!1}}(t),t.Bloodhound}.apply(t,r))||(e.exports=i)},66496:(e,t,n)=>{e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return i(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r={},i="(?:^|\\s)",o="(?:\\s|$)";function a(e){var t=r[e];return t?t.lastIndex=0:r[e]=t=new RegExp(i+e+o,"g"),t}function s(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t}function l(e,t){e.className=e.className.replace(a(t)," ").trim()}t.exports={add:s,rm:l}},{}],2:[function(e,t,r){(function(n){"use strict";var r=e("contra/emitter"),i=e("crossvent"),o=e("./classes"),a=document,s=a.documentElement,l=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u="onpropertychange"in document&&!!window.matchMedia,c=!!window.MSInputMethodContext&&!!document.documentMode;function d(e,t){var n,u,d,E,x,T,O,C,A,P,M;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var D,R=null,L=null,N=null,I=t||{};void 0===I.moves&&(I.moves=y),void 0===I.accepts&&(I.accepts=y),void 0===I.invalid&&(I.invalid=Z),void 0===I.containers&&(I.containers=e||[]),void 0===I.isContainer&&(I.isContainer=g),void 0===I.copy&&(I.copy=!1),void 0===I.copySortSource&&(I.copySortSource=!1),void 0===I.revertOnSpill&&(I.revertOnSpill=!1),void 0===I.removeOnSpill&&(I.removeOnSpill=!1),void 0===I.direction&&(I.direction="vertical"),void 0===I.ignoreInputTextSelection&&(I.ignoreInputTextSelection=!0),void 0===I.mirrorContainer&&(I.mirrorContainer=a.body),void 0===I.snapMirrorToCorner&&(I.snapMirrorToCorner=!1);var j=r({containers:I.containers,start:$,end:J,cancel:ne,remove:te,destroy:V,canMove:G,dragging:!1});return!0===I.removeOnSpill&&j.on("over",se).on("out",le),F(),j;function B(e){return-1!==j.containers.indexOf(e)||I.isContainer(e)}function F(e){var t=e?"remove":"add";f(I.mirrorContainer,t,"mousedown",U),f(window,t,"mouseup",X)}function Y(e){f(s,e?"remove":"add","mousemove",W)}function H(e){var t=e?"remove":"add";i[t](s,"selectstart",q),i[t](s,"click",q)}function V(){F(!0),X({})}function q(e){D&&e.preventDefault()}function U(e){if(T=e.clientX,O=e.clientY,1===p(e)&&!e.metaKey&&!e.ctrlKey){var t=e.target,n=z(t);if(n){D=n;var r=h(n.item);E=k("pageX",e)-r.left,x=k("pageY",e)-r.top,Y(),"mousedown"===e.type&&(w(t)?t.focus():e.preventDefault()),e.stopPropagation(),"touchstart"===e.type&&e.preventDefault()}}}function W(e){if(D)if(0!==p(e)){if(void 0===e.clientX||e.clientX!==T||void 0===e.clientY||e.clientY!==O){if(I.ignoreInputTextSelection){var t=k("clientX",e),n=k("clientY",e);if(w(a.elementFromPoint(t,n)))return}var r=D;for(Y(!0),H(),J(),K(r),L=d;L&&"none"===window.getComputedStyle(L).getPropertyValue("transform");)L=L.parentElement;if(L)try{N=I.transformMatrix.getInverseMatrix(L,{removeTranslation:!0})}catch(e){}o.add(P||d,"gu-transit"),ue(),ae(e)}}else X({})}function z(e){if(!(j.dragging&&n||B(e))){for(var t=e;_(e)&&!1===B(_(e));){if(I.invalid(e,t))return;if(!(e=_(e)))return}var r=_(e);if(r&&!I.invalid(e,t)&&I.moves(e,r,t,S(e)))return{item:e,source:r}}}function G(e){return!!z(e)}function $(e){var t=z(e);t&&K(t)}function K(e){he(e.item,e.source)&&(P=e.item.cloneNode(!0),j.emit("cloned",P,e.item,"copy")),u=e.source,d=e.item,C=A=S(e.item),j.dragging=!0,j.emit("drag",d,u)}function Z(){return!1}function J(){if(j.dragging){var e=P||d;ee(e,_(e))}}function Q(){D=!1,Y(!0),H(!0)}function X(e){if(Q(),j.dragging){var t=P||d,r=k("clientX",e),i=k("clientY",e),o=oe(m(n,r,i),r,i);o&&(P&&I.copySortSource||!P||o!==u)?ee(t,o):I.removeOnSpill?te():ne()}}function ee(e,t){var n=_(e);P&&I.copySortSource&&t===u&&n.removeChild(d),ie(t)?j.emit("cancel",e,u,u):j.emit("drop",e,t,u,A),re()}function te(){if(j.dragging){var e=P||d,t=_(e);t&&t.removeChild(e),j.emit(P?"cancel":"remove",e,t,u),re()}}function ne(e){if(j.dragging){var t=arguments.length>0?e:I.revertOnSpill,n=P||d,r=_(d),i=ie(r);!1===i&&t&&(P?P.parentNode&&P.parentNode.removeChild(P):u.insertBefore(n,u.contains(C)?C:null)),i||t?j.emit("cancel",n,u,u):j.emit("drop",n,r,u,A),re()}}function re(){var e=P||d;Q(),ce(),e&&o.rm(e,"gu-transit"),M&&clearTimeout(M),j.dragging=!1,R&&j.emit("out",e,R,u),j.emit("dragend",e),u=d=P=C=A=M=R=null,L=null,N=null}function ie(e,t){var r;return r=void 0!==t?t:n?A:S(P||d),e===u&&r===C}function oe(e,t,n){for(var r=e;r&&!i();)r=_(r);return r;function i(){if(!1===B(r))return!1;var i=de(r,e),o=pe(r,i,t,n);return!!ie(r,o)||I.accepts(d,r,u,o)}}function ae(e){if(n){e.preventDefault();var t=k("clientX",e),r=k("clientY",e),i=t-E,o=r-x;if(N&&L&&!c){var a=L.getBoundingClientRect();i=i-a.left-a.width/2,o=o-a.top-a.height/2;var s=I.transformMatrix.transformPoint({x:i,y:o},N);i=s.x+L.scrollLeft+L.offsetWidth/2,o=s.y+L.scrollTop+L.offsetHeight/2}requestAnimationFrame((function(){if(n&&(n.style.left=i+"px",n.style.top=o+"px",l&&!L)){var e=n.getBoundingClientRect(),t=2;(e.top<o-t||e.top>o+t||e.left<i-t||e.left>i+t)&&(i+=i-e.left,o+=o-e.top,n.style.left=i+"px",n.style.top=o+"px")}}));var f=P||d,p=m(n,t,r),h=oe(p,t,r);j.emit("move",f,{clientX:t,clientY:r,pageX:k("pageX",e),pageY:k("pageY",e)},p);var g=null!==h&&h!==R;(g||null===h)&&(T(),R=h,w());var y=_(f);if(h!==u||!P||I.copySortSource){var v;if(null!==de(h,p))v=fe(h,f,g,t,r);else{if(!0!==I.revertOnSpill||P)return void(P&&y&&y.removeChild(f));v=C,h=u}(null===v&&g||v!==f&&v!==S(f))&&(A=v,h.insertBefore(f,v),j.emit("shadow",f,h,u))}else y&&y.removeChild(f)}function b(e){j.emit(e,f,R,u)}function w(){g&&b("over")}function T(){R&&b("out")}}function se(e){o.rm(e,"gu-hide")}function le(e){j.dragging&&o.add(e,"gu-hide")}function ue(){if(!n){if(d.getBoundingClientRect(),n=d.cloneNode(!0),I.snapMirrorToCorner||(n.style.width=d.offsetWidth+"px",n.style.height=d.offsetHeight+"px"),o.rm(n,"gu-transit"),o.add(n,"gu-mirror"),I.mirrorContainer.appendChild(n),f(s,"add","mousemove",ae),o.add(I.mirrorContainer,"gu-unselectable"),I.snapMirrorToCorner){var e;"snapToTheLeft"===I.snapMirrorToCorner?e=E-n.clientWidth:"snapToTheRight"===I.snapMirrorToCorner&&(e=E);var t=x;if(N&&L&&!c){var r=I.transformMatrix.transformPoint({x:e,y:t},N);e=r.x,t=r.y}n.style.cssText+="margin-left:"+e+"px!important",n.style.cssText+="margin-top:"+t+"px !important"}j.emit("cloned",n,d,"mirror")}}function ce(){n&&(o.rm(I.mirrorContainer,"gu-unselectable"),f(s,"remove","mousemove",ae),_(n).removeChild(n),n=null)}function de(e,t){for(var n=t;n!==e&&_(n)!==e;)n=_(n);return n===s?null:n}function fe(e,t,n,r,i){var o,a,s,l,u,c,d=e.children.length;for(o=0;o<d;o++)if(l=(s=e.children[o]).getBoundingClientRect(),u=s.getClientRects(),c=p(t,s),m(r,i,l)&&f(u[0]))for(a=0;a<u.length;a++)if(m(r,i,u[a]))return h(s,c);return n?null:S(t);function f(e){var n=t.getBoundingClientRect();return r<e.left+n.width&&i<e.top+n.height}function p(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING}function h(e,t){return t?S(e):e}function m(e,t,n){return e>n.left&&e<n.right&&t>n.top&&t<n.bottom}}function pe(e,t,n,r){var i="horizontal"===I.direction;return t!==e?a():o();function o(){var t,o,a,s=e.children.length;for(t=0;t<s;t++){if(a=(o=e.children[t]).getBoundingClientRect(),i&&a.left+a.width/2>n)return o;if(!i&&a.top+a.height/2>r)return o}return null}function a(){var e=t.getBoundingClientRect();return s(i?n>e.left+v(e)/2:r>e.top+b(e)/2)}function s(e){return e?S(t):t}}function he(e,t){return"boolean"==typeof I.copy?I.copy:I.copy(e,t)}}function f(e,t,r,o){var a={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},s={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},l={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};n.navigator.pointerEnabled?i[t](e,s[r],o):n.navigator.msPointerEnabled?i[t](e,l[r],o):(i[t](e,a[r],o),i[t](e,r,o))}function p(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function h(e){var t=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{top:n.top-t.top,left:n.left-t.left}}function m(e,t,n){return void 0!==t&&void 0!==n?a.elementFromPoint(t,n):null}function g(){return!1}function y(){return!0}function v(e){return e.width||e.right-e.left}function b(e){return e.height||e.bottom-e.top}function _(e){return e.parentNode===a?null:e.parentNode}function w(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||E(e)}function E(e){return!!e&&"false"!==e.contentEditable&&("true"===e.contentEditable||E(_(e)))}function S(e){return e.nextElementSibling||t();function t(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}}function x(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function k(e,t){var n=x(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}u&&(m=function(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=a.elementFromPoint(t,n),i.className=o,r}),t.exports=d}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":4,crossvent:8}],3:[function(e,t,n){"use strict";var r=e("ticky");t.exports=function(e,t,n){e&&r((function(){e.apply(n||null,t||[])}))}},{ticky:6}],4:[function(e,t,n){"use strict";var r=e("atoa"),i=e("./debounce");t.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(o[t]||[]).slice(0);return function(){var o=r(arguments),s=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===o.length?o[0]:o;return a.forEach((function(r){n.async?i(r,o,s):r.apply(s,o),r._once&&e.off(t,r)})),e}},e}},{"./debounce":3,atoa:5}],5:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],6:[function(e,t,n){var r;r="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=r},{}],7:[function(e,t,r){(function(e){var n=e.CustomEvent;function r(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}t.exports=r()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,r){(function(n){"use strict";var r=e("custom-event"),i=e("./eventmap"),o=n.document,a=u,s=d,l=[];function u(e,t,n,r){return e.addEventListener(t,n,r)}function c(e,t,n){return e.attachEvent("on"+t,m(e,t,n))}function d(e,t,n,r){return e.removeEventListener(t,n,r)}function f(e,t,n){var r=g(e,t,n);if(r)return e.detachEvent("on"+t,r)}function p(e,t,n){var a=-1===i.indexOf(t)?l():s();function s(){var e;return o.createEvent?(e=o.createEvent("Event")).initEvent(t,!0,!0):o.createEventObject&&(e=o.createEventObject()),e}function l(){return new r(t,{detail:n})}e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function h(e,t,r){return function(t){var i=t||n.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function m(e,t,n){var r=g(e,t,n)||h(e,t,n);return l.push({wrapper:r,element:e,type:t,fn:n}),r}function g(e,t,n){var r=y(e,t,n);if(r){var i=l[r].wrapper;return l.splice(r,1),i}}function y(e,t,n){var r,i;for(r=0;r<l.length;r++)if((i=l[r]).element===e&&i.type===t&&i.fn===n)return r}n.addEventListener||(a=c,s=f),t.exports={add:a,remove:s,fabricate:p}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":9,"custom-event":7}],9:[function(e,t,r){(function(e){"use strict";var n=[],r="",i=/^on/;for(r in e)i.test(r)&&n.push(r.slice(2));t.exports=n}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)},9146:function(module,exports){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){"use strict";var root=this,dust={},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",loggingLevels=[DEBUG,INFO,WARN,ERROR,NONE],EMPTY_FUNC=function(){},logger={},originalLog,loggerContext;function Context(e,t,n,r){this.stack=e,this.global=t,this.blocks=n,this.templateName=r}function Stack(e,t,n,r){this.tail=t,this.isObject=e&&"object"==typeof e,this.head=e,this.index=n,this.of=r}function Stub(e){this.head=new Chunk(this),this.callback=e,this.out=""}function Stream(){this.head=new Chunk(this)}function Chunk(e,t,n){this.root=e,this.next=t,this.data=[],this.flushable=!1,this.taps=n}for(var f in dust.debugLevel=NONE,dust.config={whitespace:!1},dust._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",notexists:"nx",block:"b",partial:"p",helper:"h"},root&&root.console&&root.console.log&&(loggerContext=root.console,originalLog=root.console.log),logger.log=loggerContext?function(){logger.log="function"==typeof originalLog?function(){originalLog.apply(loggerContext,arguments)}:function(){var e=Array.prototype.slice.apply(arguments).join(" ");originalLog(e)},logger.log.apply(this,arguments)}:function(){},dust.log=function(e,t){t=t||INFO,dust.debugLevel!==NONE&&dust.indexInArray(loggingLevels,t)>=dust.indexInArray(loggingLevels,dust.debugLevel)&&(dust.logQueue||(dust.logQueue=[]),dust.logQueue.push({message:e,type:t}),logger.log("[DUST "+t+"]: "+e))},dust.helpers={},dust.cache={},dust.register=function(e,t){e&&(dust.cache[e]=t)},dust.render=function(e,t,n){var r=new Stub(n).head;try{dust.load(e,r,Context.wrap(t,e)).end()}catch(e){r.setError(e)}},dust.stream=function(e,t){var n=new Stream,r=n.head;return dust.nextTick((function(){try{dust.load(e,n.head,Context.wrap(t,e)).end()}catch(e){r.setError(e)}})),n},dust.renderSource=function(e,t,n){return dust.compileFn(e)(t,n)},dust.compileFn=function(e,t){t=t||null;var n=dust.loadSource(dust.compile(e,t));return function(e,r){var i=r?new Stub(r):new Stream;return dust.nextTick((function(){"function"==typeof n?n(i.head,Context.wrap(e,t)).end():dust.log(new Error("Template ["+t+"] cannot be resolved to a Dust function"),ERROR)})),i}},dust.load=function(e,t,n){var r=dust.cache[e];return r?r(t,n):dust.onLoad?t.map((function(t){dust.onLoad(e,(function(r,i){if(r)return t.setError(r);dust.cache[e]||dust.loadSource(dust.compile(i,e)),dust.cache[e](t,n).end()}))})):t.setError(new Error("Template Not Found: "+e))},dust.loadSource=function(source,path){return eval(source)},Array.isArray?dust.isArray=Array.isArray:dust.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},dust.indexInArray=function(e,t,n){if(n=+n||0,Array.prototype.indexOf)return e.indexOf(t,n);if(null==e)throw new TypeError('cannot call method "indexOf" of null');var r=e.length;for(Math.abs(n)===1/0&&(n=0),n<0&&(n+=r)<0&&(n=0);n<r;n++)if(e[n]===t)return n;return-1},dust.nextTick=function(e){setTimeout(e,0)},dust.isEmpty=function(e){return!(!dust.isArray(e)||e.length)||0!==e&&!e},dust.filter=function(e,t,n){if(n)for(var r=0,i=n.length;r<i;r++){var o=n[r];"s"===o?t=null:"function"==typeof dust.filters[o]?e=dust.filters[o](e):dust.log("Invalid filter ["+o+"]",WARN)}return t&&(e=dust.filters[t](e)),e},dust.filters={h:function(e){return dust.escapeHtml(e)},j:function(e){return dust.escapeJs(e)},u:encodeURI,uc:encodeURIComponent,js:function(e){return JSON?JSON.stringify(e):(dust.log("JSON is undefined.  JSON stringify has not been used on ["+e+"]",WARN),e)},jp:function(e){return JSON?JSON.parse(e):(dust.log("JSON is undefined.  JSON parse has not been used on ["+e+"]",WARN),e)}},dust.makeBase=function(e){return new Context(new Stack,e)},Context.wrap=function(e,t){return e instanceof Context?e:new Context(new Stack(e),{},null,t)},Context.prototype.get=function(e,t){return"string"==typeof e&&("."===e[0]&&(t=!0,e=e.substr(1)),e=e.split(".")),this._get(t,e)},Context.prototype._get=function(e,t){var n,r,i,o,a,s=this.stack,l=1;if(r=t[0],i=t.length,e&&0===i)o=s,s=s.head;else{if(e)s&&(s=s.head?s.head[r]:void 0);else{for(;s&&(!s.isObject||(o=s.head,void 0===(n=s.head[r])));)s=s.tail;s=void 0!==n?n:this.global?this.global[r]:void 0}for(;s&&l<i;)o=s,s=s[t[l]],l++}return"function"==typeof s?((a=function(){try{return s.apply(o,arguments)}catch(e){throw dust.log(e,ERROR),e}}).__dustBody=!!s.__dustBody,a):(void 0===s&&dust.log("Cannot find the value for reference [{"+t.join(".")+"}] in template ["+this.getTemplateName()+"]"),s)},Context.prototype.getPath=function(e,t){return this._get(e,t)},Context.prototype.push=function(e,t,n){return new Context(new Stack(e,this.stack,t,n),this.global,this.blocks,this.getTemplateName())},Context.prototype.rebase=function(e){return new Context(new Stack(e),this.global,this.blocks,this.getTemplateName())},Context.prototype.current=function(){return this.stack.head},Context.prototype.getBlock=function(e,t,n){"function"==typeof e&&(e=e(new Chunk,this).data.join(""));var r=this.blocks;if(r){for(var i,o=r.length;o--;)if(i=r[o][e])return i}else dust.log("No blocks for context[{"+e+"}] in template ["+this.getTemplateName()+"]",DEBUG)},Context.prototype.shiftBlocks=function(e){var t,n=this.blocks;return e?(t=n?n.concat([e]):[e],new Context(this.stack,this.global,t,this.getTemplateName())):this},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var e=this.head;e;){if(!e.flushable)return e.error?(this.callback(e.error),dust.log("Chunk error ["+e.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.out+=e.data.join(""),e=e.next,this.head=e}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var e=this.head;e;){if(!e.flushable)return e.error?(this.emit("error",e.error),dust.log("Chunk error ["+e.error+"] thrown. Ceasing to render this template.",WARN),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",e.data.join("")),e=e.next,this.head=e}this.emit("end")},Stream.prototype.emit=function(e,t){if(!this.events)return dust.log("No events to emit",INFO),!1;var n=this.events[e];if(!n)return dust.log("Event type ["+e+"] does not exist",WARN),!1;if("function"==typeof n)n(t);else if(dust.isArray(n))for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i](t);else dust.log("Event Handler ["+n+"] is not of a type that is handled by emit",WARN)},Stream.prototype.on=function(e,t){return this.events||(this.events={}),this.events[e]?"function"==typeof this.events[e]?this.events[e]=[this.events[e],t]:this.events[e].push(t):t?this.events[e]=t:dust.log("Callback for type ["+e+"] does not exist. Listener not registered.",WARN),this},Stream.prototype.pipe=function(e){return this.on("data",(function(t){try{e.write(t,"utf8")}catch(e){dust.log(e,ERROR)}})).on("end",(function(){try{return e.end()}catch(e){dust.log(e,ERROR)}})).on("error",(function(t){e.error(t)})),this},Chunk.prototype.write=function(e){var t=this.taps;return t&&(e=t.go(e)),this.data.push(e),this},Chunk.prototype.end=function(e){return e&&this.write(e),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(e){var t=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,t,this.taps);this.next=n,this.flushable=!0;try{e(n)}catch(e){dust.log(e,ERROR),n.setError(e)}return t},Chunk.prototype.tap=function(e){var t=this.taps;return this.taps=t?t.push(e):new Tap(e),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(e,t){return e(this,t)},Chunk.prototype.reference=function(e,t,n,r){return"function"==typeof e&&(e=e.apply(t.current(),[this,t,null,{auto:n,filters:r}]))instanceof Chunk?e:dust.isEmpty(e)?this:this.write(dust.filter(e,n,r))},Chunk.prototype.section=function(e,t,n,r){if("function"==typeof e&&!e.__dustBody){try{e=e.apply(t.current(),[this,t,n,r])}catch(e){return dust.log(e,ERROR),this.setError(e)}if(e instanceof Chunk)return e}var i=n.block,o=n.else;if(r&&(t=t.push(r)),dust.isArray(e)){if(i){var a=e.length,s=this;if(a>0){t.stack.head&&(t.stack.head.$len=a);for(var l=0;l<a;l++)t.stack.head&&(t.stack.head.$idx=l),s=i(s,t.push(e[l],l,a));return t.stack.head&&(t.stack.head.$idx=void 0,t.stack.head.$len=void 0),s}if(o)return o(this,t)}}else if(!0===e){if(i)return i(this,t)}else if(e||0===e){if(i)return i(this,t.push(e))}else if(o)return o(this,t);return dust.log("Not rendering section (#) block in template ["+t.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.exists=function(e,t,n){var r=n.block,i=n.else;if(dust.isEmpty(e)){if(i)return i(this,t)}else if(r)return r(this,t);return dust.log("Not rendering exists (?) block in template ["+t.getTemplateName()+"], because above key was not found",DEBUG),this},Chunk.prototype.notexists=function(e,t,n){var r=n.block,i=n.else;if(dust.isEmpty(e)){if(r)return r(this,t)}else if(i)return i(this,t);return dust.log("Not rendering not exists (^) block check in template ["+t.getTemplateName()+"], because above key was found",DEBUG),this},Chunk.prototype.block=function(e,t,n){var r=n.block;return e&&(r=e),r?r(this,t):this},Chunk.prototype.partial=function(e,t,n){var r;return(r=dust.makeBase(t.global)).blocks=t.blocks,t.stack&&t.stack.tail&&(r.stack=t.stack.tail),n&&(r=r.push(n)),"string"==typeof e&&(r.templateName=e),r=r.push(t.stack.head),"function"==typeof e?this.capture(e,r,(function(e,t){r.templateName=r.templateName||e,dust.load(e,t,r).end()})):dust.load(e,this,r)},Chunk.prototype.helper=function(e,t,n,r){var i=this;if(!dust.helpers[e])return dust.log("Invalid helper ["+e+"]",WARN),i;try{return dust.helpers[e](i,t,n,r)}catch(t){return dust.log("Error in "+e+" helper: "+t,ERROR),i.setError(t)}},Chunk.prototype.capture=function(e,t,n){return this.map((function(r){var i=new Stub((function(e,t){e?r.setError(e):n(t,r)}));e(i.head,t).end()}))},Chunk.prototype.setError=function(e){return this.error=e,this.root.flush(),this},Chunk.prototype)dust._aliases[f]&&(Chunk.prototype[dust._aliases[f]]=Chunk.prototype[f]);function Tap(e,t){this.head=e,this.tail=t}Tap.prototype.push=function(e){return new Tap(e,this)},Tap.prototype.go=function(e){for(var t=this;t;)e=t.head(e),t=t.tail;return e};var HCHARS=/[&<>"']/,AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(e){return"string"==typeof e&&HCHARS.test(e)?e.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):e};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;return dust.escapeJs=function(e){return"string"==typeof e?e.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):e},dust}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},82602:(e,t,n)=>{var r,i;r=[n(38291)],void 0===(i=function(e){return e.fn.autoGrowInput=function(t){var n=e.extend({maxWidth:500,minWidth:20,comfortZone:0},t),r="oninput"in document.createElement("input")?"input":"keydown";return this.filter("input:text").each((function(){var i=e(this),o=(n.minWidth||i.width()," "),a=t&&"comfortZone"in t?n.comfortZone:parseInt(i.css("fontSize")),s=e("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),whiteSpace:"nowrap"}).attr("aria-hidden",!0),l=function(e){if(o!==(o=i.val())||"autogrow"!=!e.type){o||(o=i.attr("placeholder")||""),s.html(o.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));var t=s.width()+a,r="function"==typeof n.maxWidth?n.maxWidth():n.maxWidth;t>r?t=r:t<n.minWidth&&(t=n.minWidth),t!=i.width()&&i.width(t)}};s.insertAfter(i),i.on(r+".autogrow autogrow",l),l()})),this},e}.apply(t,r))||(e.exports=i)},96386:(e,t,n)=>{var r,i;r=[n(38291)],void 0===(i=function(e){!function(e){var t,n,r=document.attachEvent,i=!1,o=e.fn.resize;if(e.fn.resize=function(t){return this.each((function(){this==window?o.call(jQuery?jQuery(this):e(this),t):w(this,t)}))},e.fn.removeResize=function(e){return this.each((function(){E(this,e)}))},!r){var a=(n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},function(e){return n(e)}),s=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)});function l(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth}function u(e){var t=this;l(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}var c=!1,d="",f="animationstart",p="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="",g=document.createElement("fakeelement");if(void 0!==g.style.animationName&&(c=!0),!1===c)for(var y=0;y<p.length;y++)if(void 0!==g.style[p[y]+"AnimationName"]){(m=p[y])+"Animation",d="-"+m.toLowerCase()+"-",f=h[y],c=!0;break}var v="resizeanim",b="@"+d+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",_=d+"animation: 1ms "+v+"; "}var w=function(e,t){r?e.attachEvent("onresize",t):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),function(){if(!i){var e=(b||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),i=!0}}(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),l(e),e.addEventListener("scroll",u,!0),f&&e.__resizeTriggers__.addEventListener(f,(function(t){t.animationName==v&&l(e)}))),e.__resizeListeners__.push(t))},E=function(e,t){r?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",u),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}(e)}.apply(t,r))||(e.exports=i)},89031:(e,t,n)=>{var r,i;r=[n(38291),n(20394)],void 0===(i=function(e,t){"use strict";var n=1e3,r=!1,i=e([]),o=function(n,r){var o=n.data("livestampdata");if("number"==typeof r&&(r*=1e3),n.removeAttr("data-livestamp").removeData("livestamp"),r=t(r),t.isMoment(r)&&!isNaN(+r)){var a=e.extend({},{original:n.contents()},o);a.moment=t(r),n.data("livestampdata",a).empty(),i.push(n[0])}},a=function(){r||(s.update(),setTimeout(a,n))},s={update:function(){e("[data-livestamp]").each((function(){var t=e(this);o(t,t.data("livestamp"))}));var n=[];i.each((function(){var r=e(this),i=r.data("livestampdata");if(void 0===i)n.push(this);else if(t.isMoment(i.moment)){var o=r.html(),a=i.moment.fromNow();if(o!=a){var s=e.Event("change.livestamp");r.trigger(s,[o,a]),s.isDefaultPrevented()||r.html(a)}}})),i=i.not(n)},pause:function(){r=!0},resume:function(){r=!1,a()},interval:function(e){if(void 0===e)return n;n=e}},l={add:function(n,r){return"number"==typeof r&&(r*=1e3),r=t(r),t.isMoment(r)&&!isNaN(+r)&&(n.each((function(){o(e(this),r)})),s.update()),n},destroy:function(t){return i=i.not(t),t.each((function(){var n=e(this),r=n.data("livestampdata");if(void 0===r)return t;n.html(r.original?r.original:"").removeData("livestampdata")})),t},isLivestamp:function(e){return void 0!==e.data("livestampdata")}};e.livestamp=s,e((function(){s.resume()})),e.fn.livestamp=function(e,t){return l[e]||(t=e,e="add"),l[e](this,t)}}.apply(t,r))||(e.exports=i)},20394:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t;function n(){return t.apply(null,arguments)}function r(e){t=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,n,r){return yt(e,t,n,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(e){return null==e._pf&&(e._pf=c()),e._pf}function f(e){if(null==e._isValid){var t=d(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function p(e){var t=u(NaN);return null!=e?l(d(t),e):d(t).userInvalidated=!0,t}var h=n.momentProperties=[];function m(e,t){var n,r,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=d(t)),void 0!==t._locale&&(e._locale=t._locale),h.length>0)for(n in h)void 0!==(i=t[r=h[n]])&&(e[r]=i);return e}var g=!1;function y(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===g&&(g=!0,n.updateOffset(this),g=!1)}function v(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e):Math.floor(e)}function _(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=b(t)),n}function w(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&_(e[r])!==_(t[r]))&&a++;return a+o}function E(){}var S,x={};function k(e){return e?e.toLowerCase().replace("_","-"):e}function T(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=k(e[o]).split("-")).length,n=(n=k(e[o+1]))?n.split("-"):null;t>0;){if(r=O(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&w(i,n,!0)>=t-1)break;t--}o++}return null}function O(t){if(!x[t]&&e&&e.exports)try{C(S._abbr)}catch(e){}return x[t]}function C(e,t){var n;return e&&(n=void 0===t?P(e):A(e,t))&&(S=n),S._abbr}function A(e,t){return null!==t?(t.abbr=e,x[e]=x[e]||new E,x[e].set(t),C(e),x[e]):(delete x[e],null)}function P(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return S;if(!i(e)){if(t=O(e))return t;e=[e]}return T(e)}var M={};function D(e,t){var n=e.toLowerCase();M[n]=M[n+"s"]=M[t]=e}function R(e){return"string"==typeof e?M[e]||M[e.toLowerCase()]:void 0}function L(e){var t,n,r={};for(n in e)s(e,n)&&(t=R(n))&&(r[t]=e[n]);return r}function N(e,t){return function(r){return null!=r?(j(this,e,r),n.updateOffset(this,t),this):I(this,e)}}function I(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function j(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function B(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if("function"==typeof this[e=R(e)])return this[e](t);return this}function F(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Y=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},q={};function U(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(q[e]=i),t&&(q[t[0]]=function(){return F(i.apply(this,arguments),t[1],t[2])}),n&&(q[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,r=e.match(Y);for(t=0,n=r.length;t<n;t++)q[r[t]]?r[t]=q[r[t]]:r[t]=W(r[t]);return function(i){var o="";for(t=0;t<n;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function G(e,t){return e.isValid()?(t=$(t,e.localeData()),V[t]=V[t]||z(t),V[t](e)):e.localeData().invalidDate()}function $(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(H.lastIndex=0;n>=0&&H.test(e);)e=e.replace(H,r),H.lastIndex=0,n-=1;return e}var K=/\d/,Z=/\d\d/,J=/\d{3}/,Q=/\d{4}/,X=/[+-]?\d{6}/,ee=/\d\d?/,te=/\d{1,3}/,ne=/\d{1,4}/,re=/[+-]?\d{1,6}/,ie=/\d+/,oe=/[+-]?\d+/,ae=/Z|[+-]\d\d:?\d\d/gi,se=/[+-]?\d+(\.\d{1,3})?/,le=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ue={};function ce(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function de(e,t,n){ue[e]=ce(t)?t:function(e){return e&&n?n:t}}function fe(e,t){return s(ue,e)?ue[e](t._strict,t._locale):new RegExp(pe(e))}function pe(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function me(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=_(e)}),n=0;n<e.length;n++)he[e[n]]=r}function ge(e,t){me(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function ye(e,t,n){null!=t&&s(he,e)&&he[e](t,n._a,n,e)}var ve=0,be=1,_e=2,we=3,Ee=4,Se=5,xe=6;function ke(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}U("M",["MM",2],"Mo",(function(){return this.month()+1})),U("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),U("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),D("month","M"),de("M",ee),de("MM",ee,Z),de("MMM",le),de("MMMM",le),me(["M","MM"],(function(e,t){t[be]=_(e)-1})),me(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[be]=i:d(n).invalidMonth=e}));var Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function Oe(e){return this._months[e.month()]}var Ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ae(e){return this._monthsShort[e.month()]}function Pe(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=u([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function Me(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),ke(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n)),e}function De(e){return null!=e?(Me(this,e),n.updateOffset(this,!0),this):I(this,"Month")}function Re(){return ke(this.year(),this.month())}function Le(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[be]<0||n[be]>11?be:n[_e]<1||n[_e]>ke(n[ve],n[be])?_e:n[we]<0||n[we]>24||24===n[we]&&(0!==n[Ee]||0!==n[Se]||0!==n[xe])?we:n[Ee]<0||n[Ee]>59?Ee:n[Se]<0||n[Se]>59?Se:n[xe]<0||n[xe]>999?xe:-1,d(e)._overflowDayOfYear&&(t<ve||t>_e)&&(t=_e),d(e).overflow=t),e}function Ne(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Ie(e,t){var n=!0;return l((function(){return n&&(Ne(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)}),t)}var je={};function Be(e,t){je[e]||(Ne(t),je[e]=!0)}n.suppressDeprecationWarnings=!1;var Fe=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ye=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],He=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ve=/^\/?Date\((\-?\d+)/i;function qe(e){var t,n,r=e._i,i=Fe.exec(r);if(i){for(d(e).iso=!0,t=0,n=Ye.length;t<n;t++)if(Ye[t][1].exec(r)){e._f=Ye[t][0];break}for(t=0,n=He.length;t<n;t++)if(He[t][1].exec(r)){e._f+=(i[6]||" ")+He[t][0];break}r.match(ae)&&(e._f+="Z"),ct(e)}else e._isValid=!1}function Ue(e){var t=Ve.exec(e._i);null===t?(qe(e),!1===e._isValid&&(delete e._isValid,n.createFromInputFallback(e))):e._d=new Date(+t[1])}function We(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<1970&&s.setFullYear(e),s}function ze(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Ge(e){return $e(e)?366:365}function $e(e){return e%4==0&&e%100!=0||e%400==0}n.createFromInputFallback=Ie("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),U(0,["YY",2],0,(function(){return this.year()%100})),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),D("year","y"),de("Y",oe),de("YY",ee,Z),de("YYYY",ne,Q),de("YYYYY",re,X),de("YYYYYY",re,X),me(["YYYYY","YYYYYY"],ve),me("YYYY",(function(e,t){t[ve]=2===e.length?n.parseTwoDigitYear(e):_(e)})),me("YY",(function(e,t){t[ve]=n.parseTwoDigitYear(e)})),n.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var Ke=N("FullYear",!1);function Ze(){return $e(this.year())}function Je(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),o<i-7&&(o+=7),r=vt(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function Qe(e){return Je(e,this._week.dow,this._week.doy).week}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),de("w",ee),de("ww",ee,Z),de("W",ee),de("WW",ee,Z),ge(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=_(e)}));var Xe={dow:0,doy:6};function et(){return this._week.dow}function tt(){return this._week.doy}function nt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function rt(e){var t=Je(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function it(e,t,n,r,i){var o,a=6+i-r,s=ze(e,0,1+a).getUTCDay();return s<i&&(s+=7),{year:(o=1+a+7*(t-1)-s+(n=null!=n?1*n:i))>0?e:e-1,dayOfYear:o>0?o:Ge(e-1)+o}}function ot(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function at(e,t,n){return null!=e?e:null!=t?t:n}function st(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function lt(e){var t,n,r,i,o=[];if(!e._d){for(r=st(e),e._w&&null==e._a[_e]&&null==e._a[be]&&ut(e),e._dayOfYear&&(i=at(e._a[ve],r[ve]),e._dayOfYear>Ge(i)&&(d(e)._overflowDayOfYear=!0),n=ze(i,0,e._dayOfYear),e._a[be]=n.getUTCMonth(),e._a[_e]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[we]&&0===e._a[Ee]&&0===e._a[Se]&&0===e._a[xe]&&(e._nextDay=!0,e._a[we]=0),e._d=(e._useUTC?ze:We).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[we]=24)}}function ut(e){var t,n,r,i,o,a,s;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=at(t.GG,e._a[ve],Je(vt(),1,4).year),r=at(t.W,1),i=at(t.E,1)):(o=e._locale._week.dow,a=e._locale._week.doy,n=at(t.gg,e._a[ve],Je(vt(),o,a).year),r=at(t.w,1),null!=t.d?(i=t.d)<o&&++r:i=null!=t.e?t.e+o:o),s=it(n,r,i,a,o),e._a[ve]=s.year,e._dayOfYear=s.dayOfYear}function ct(e){if(e._f!==n.ISO_8601){e._a=[],d(e).empty=!0;var t,r,i,o,a,s=""+e._i,l=s.length,u=0;for(i=$(e._f,e._locale).match(Y)||[],t=0;t<i.length;t++)o=i[t],(r=(s.match(fe(o,e))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&d(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),q[o]?(r?d(e).empty=!1:d(e).unusedTokens.push(o),ye(o,r,e)):e._strict&&!r&&d(e).unusedTokens.push(o);d(e).charsLeftOver=l-u,s.length>0&&d(e).unusedInput.push(s),!0===d(e).bigHour&&e._a[we]<=12&&e._a[we]>0&&(d(e).bigHour=void 0),e._a[we]=dt(e._locale,e._a[we],e._meridiem),lt(e),Le(e)}else qe(e)}function dt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ft(e){var t,n,r,i,o;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ct(t),f(t)&&(o+=d(t).charsLeftOver,o+=10*d(t).unusedTokens.length,d(t).score=o,(null==r||o<r)&&(r=o,n=t));l(e,n||t)}function pt(e){if(!e._d){var t=L(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],lt(e)}}function ht(e){var t=new y(Le(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function mt(e){var t=e._i,n=e._f;return e._locale=e._locale||P(e._l),null===t||void 0===n&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),v(t)?new y(Le(t)):(i(n)?ft(e):n?ct(e):o(t)?e._d=t:gt(e),e))}function gt(e){var t=e._i;void 0===t?e._d=new Date:o(t)?e._d=new Date(+t):"string"==typeof t?Ue(e):i(t)?(e._a=a(t.slice(0),(function(e){return parseInt(e,10)})),lt(e)):"object"==typeof t?pt(e):"number"==typeof t?e._d=new Date(t):n.createFromInputFallback(e)}function yt(e,t,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,ht(o)}function vt(e,t,n,r){return yt(e,t,n,r,!1)}U("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),de("DDD",te),de("DDDD",J),me(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=_(e)})),n.ISO_8601=function(){};var bt=Ie("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",(function(){var e=vt.apply(null,arguments);return e<this?this:e})),_t=Ie("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",(function(){var e=vt.apply(null,arguments);return e>this?this:e}));function wt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return vt();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Et(){return wt("isBefore",[].slice.call(arguments,0))}function St(){return wt("isAfter",[].slice.call(arguments,0))}function xt(e){var t=L(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=P(),this._bubble()}function kt(e){return e instanceof xt}function Tt(e,t){U(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+F(~~(e/60),2)+t+F(~~e%60,2)}))}Tt("Z",":"),Tt("ZZ",""),de("Z",ae),de("ZZ",ae),me(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Ct(e)}));var Ot=/([\+\-]|\d\d)/gi;function Ct(e){var t=(e||"").match(ae)||[],n=((t[t.length-1]||[])+"").match(Ot)||["-",0,0],r=60*n[1]+_(n[2]);return"+"===n[0]?r:-r}function At(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(v(e)||o(e)?+e:+vt(e))-+r,r._d.setTime(+r._d+i),n.updateOffset(r,!1),r):vt(e).local()}function Pt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Mt(e,t){var r,i=this._offset||0;return null!=e?("string"==typeof e&&(e=Ct(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(r=Pt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?Kt(this,Ut(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Pt(this)}function Dt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Rt(e){return this.utcOffset(0,e)}function Lt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pt(this),"m")),this}function Nt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ct(this._i)),this}function It(e){return e=e?vt(e).utcOffset():0,(this.utcOffset()-e)%60==0}function jt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bt(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var e={};if(m(e,this),(e=mt(e))._a){var t=e._isUTC?u(e._a):vt(e._a);this._isDSTShifted=this.isValid()&&w(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ft(){return!this._isUTC}function Yt(){return this._isUTC}function Ht(){return this._isUTC&&0===this._offset}n.updateOffset=function(){};var Vt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,qt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function Ut(e,t){var n,r,i,o=e,a=null;return kt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(a=Vt.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:_(a[_e])*n,h:_(a[we])*n,m:_(a[Ee])*n,s:_(a[Se])*n,ms:_(a[xe])*n}):(a=qt.exec(e))?(n="-"===a[1]?-1:1,o={y:Wt(a[2],n),M:Wt(a[3],n),d:Wt(a[4],n),h:Wt(a[5],n),m:Wt(a[6],n),s:Wt(a[7],n),w:Wt(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Gt(vt(o.from),vt(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new xt(o),kt(e)&&s(e,"_locale")&&(r._locale=e._locale),r}function Wt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Gt(e,t){var n;return t=At(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n}function $t(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(Be(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=r,r=i),Kt(this,Ut(n="string"==typeof n?+n:n,r),e),this}}function Kt(e,t,r,i){var o=t._milliseconds,a=t._days,s=t._months;i=null==i||i,o&&e._d.setTime(+e._d+o*r),a&&j(e,"Date",I(e,"Date")+a*r),s&&Me(e,I(e,"Month")+s*r),i&&n.updateOffset(e,a||s)}Ut.fn=xt.prototype;var Zt=$t(1,"add"),Jt=$t(-1,"subtract");function Qt(e,t){var n=e||vt(),r=At(n,this).startOf("day"),i=this.diff(r,"days",!0),o=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,vt(n)))}function Xt(){return new y(this)}function en(e,t){return"millisecond"===(t=R(void 0!==t?t:"millisecond"))?+this>+(e=v(e)?e:vt(e)):(v(e)?+e:+vt(e))<+this.clone().startOf(t)}function tn(e,t){var n;return"millisecond"===(t=R(void 0!==t?t:"millisecond"))?+this<+(e=v(e)?e:vt(e)):(n=v(e)?+e:+vt(e),+this.clone().endOf(t)<n)}function nn(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function rn(e,t){var n;return"millisecond"===(t=R(t||"millisecond"))?+this==+(e=v(e)?e:vt(e)):(n=+vt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function on(e,t,n){var r,i,o=At(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return"year"===(t=R(t))||"month"===t||"quarter"===t?(i=an(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:b(i)}function an(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))}function sn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():G(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function un(e){var t=G(this,e||n.defaultFormat);return this.localeData().postformat(t)}function cn(e,t){return this.isValid()?Ut({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.from(vt(),e)}function fn(e,t){return this.isValid()?Ut({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pn(e){return this.to(vt(),e)}function hn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=P(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var mn=Ie("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function gn(){return this._locale}function yn(e){switch(e=R(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function vn(e){return void 0===(e=R(e))||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function bn(){return+this._d-6e4*(this._offset||0)}function _n(){return Math.floor(+this/1e3)}function wn(){return this._offset?new Date(+this):this._d}function En(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xn(){return f(this)}function kn(){return l({},d(this))}function Tn(){return d(this).overflow}function On(e,t){U(0,[e,e.length],0,t)}function Cn(e,t,n){return Je(vt([e,11,31+t-n]),t,n).week}function An(e){var t=Je(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Pn(e){var t=Je(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Mn(){return Cn(this.year(),1,4)}function Dn(){var e=this.localeData()._week;return Cn(this.year(),e.dow,e.doy)}function Rn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}U(0,["gg",2],0,(function(){return this.weekYear()%100})),U(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),On("gggg","weekYear"),On("ggggg","weekYear"),On("GGGG","isoWeekYear"),On("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),de("G",oe),de("g",oe),de("GG",ee,Z),de("gg",ee,Z),de("GGGG",ne,Q),de("gggg",ne,Q),de("GGGGG",re,X),de("ggggg",re,X),ge(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=_(e)})),ge(["gg","GG"],(function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)})),U("Q",0,0,"quarter"),D("quarter","Q"),de("Q",K),me("Q",(function(e,t){t[be]=3*(_(e)-1)})),U("D",["DD",2],"Do","date"),D("date","D"),de("D",ee),de("DD",ee,Z),de("Do",(function(e,t){return e?t._ordinalParse:t._ordinalParseLenient})),me(["D","DD"],_e),me("Do",(function(e,t){t[_e]=_(e.match(ee)[0],10)}));var Ln=N("Date",!0);function Nn(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}U("d",0,"do","day"),U("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),U("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),U("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),de("d",ee),de("e",ee),de("E",ee),de("dd",le),de("ddd",le),de("dddd",le),ge(["dd","ddd","dddd"],(function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:d(n).invalidWeekday=e})),ge(["d","e","E"],(function(e,t,n,r){t[r]=_(e)}));var In="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function jn(e){return this._weekdays[e.day()]}var Bn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Fn(e){return this._weekdaysShort[e.day()]}var Yn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Hn(e){return this._weekdaysMin[e.day()]}function Vn(e){var t,n,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(n=vt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function qn(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nn(e,this.localeData()),this.add(e-t,"d")):t}function Un(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wn(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function zn(e,t){U(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Gn(e,t){return t._meridiemParse}function $n(e){return"p"===(e+"").toLowerCase().charAt(0)}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,(function(){return this.hours()%12||12})),zn("a",!0),zn("A",!1),D("hour","h"),de("a",Gn),de("A",Gn),de("H",ee),de("h",ee),de("HH",ee,Z),de("hh",ee,Z),me(["H","HH"],we),me(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),me(["h","hh"],(function(e,t,n){t[we]=_(e),d(n).bigHour=!0}));var Kn=/[ap]\.?m?\.?/i;function Zn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var Jn=N("Hours",!0);U("m",["mm",2],0,"minute"),D("minute","m"),de("m",ee),de("mm",ee,Z),me(["m","mm"],Ee);var Qn=N("Minutes",!1);U("s",["ss",2],0,"second"),D("second","s"),de("s",ee),de("ss",ee,Z),me(["s","ss"],Se);var Xn,er=N("Seconds",!1);for(U("S",0,0,(function(){return~~(this.millisecond()/100)})),U(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),U(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),U(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),U(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),U(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),U(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),D("millisecond","ms"),de("S",te,K),de("SS",te,Z),de("SSS",te,J),Xn="SSSS";Xn.length<=9;Xn+="S")de(Xn,ie);function tr(e,t){t[xe]=_(1e3*("0."+e))}for(Xn="S";Xn.length<=9;Xn+="S")me(Xn,tr);var nr=N("Milliseconds",!1);function rr(){return this._isUTC?"UTC":""}function ir(){return this._isUTC?"Coordinated Universal Time":""}U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var or=y.prototype;or.add=Zt,or.calendar=Qt,or.clone=Xt,or.diff=on,or.endOf=vn,or.format=un,or.from=cn,or.fromNow=dn,or.to=fn,or.toNow=pn,or.get=B,or.invalidAt=Tn,or.isAfter=en,or.isBefore=tn,or.isBetween=nn,or.isSame=rn,or.isValid=xn,or.lang=mn,or.locale=hn,or.localeData=gn,or.max=_t,or.min=bt,or.parsingFlags=kn,or.set=B,or.startOf=yn,or.subtract=Jt,or.toArray=En,or.toObject=Sn,or.toDate=wn,or.toISOString=ln,or.toJSON=ln,or.toString=sn,or.unix=_n,or.valueOf=bn,or.year=Ke,or.isLeapYear=Ze,or.weekYear=An,or.isoWeekYear=Pn,or.quarter=or.quarters=Rn,or.month=De,or.daysInMonth=Re,or.week=or.weeks=nt,or.isoWeek=or.isoWeeks=rt,or.weeksInYear=Dn,or.isoWeeksInYear=Mn,or.date=Ln,or.day=or.days=qn,or.weekday=Un,or.isoWeekday=Wn,or.dayOfYear=ot,or.hour=or.hours=Jn,or.minute=or.minutes=Qn,or.second=or.seconds=er,or.millisecond=or.milliseconds=nr,or.utcOffset=Mt,or.utc=Rt,or.local=Lt,or.parseZone=Nt,or.hasAlignedHourOffset=It,or.isDST=jt,or.isDSTShifted=Bt,or.isLocal=Ft,or.isUtcOffset=Yt,or.isUtc=Ht,or.isUTC=Ht,or.zoneAbbr=rr,or.zoneName=ir,or.dates=Ie("dates accessor is deprecated. Use date instead.",Ln),or.months=Ie("months accessor is deprecated. Use month instead",De),or.years=Ie("years accessor is deprecated. Use year instead",Ke),or.zone=Ie("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Dt);var ar=or;function sr(e){return vt(1e3*e)}function lr(){return vt.apply(null,arguments).parseZone()}var ur={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function cr(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}var dr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function fr(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])}var pr="Invalid date";function hr(){return this._invalidDate}var mr="%d",gr=/\d{1,2}/;function yr(e){return this._ordinal.replace("%d",e)}function vr(e){return e}var br={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function _r(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function wr(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function Er(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var Sr=E.prototype;function xr(e,t,n,r){var i=P(),o=u().set(r,t);return i[n](o,e)}function kr(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return xr(e,t,n,i);var o,a=[];for(o=0;o<r;o++)a[o]=xr(e,o,n,i);return a}function Tr(e,t){return kr(e,t,"months",12,"month")}function Or(e,t){return kr(e,t,"monthsShort",12,"month")}function Cr(e,t){return kr(e,t,"weekdays",7,"day")}function Ar(e,t){return kr(e,t,"weekdaysShort",7,"day")}function Pr(e,t){return kr(e,t,"weekdaysMin",7,"day")}Sr._calendar=ur,Sr.calendar=cr,Sr._longDateFormat=dr,Sr.longDateFormat=fr,Sr._invalidDate=pr,Sr.invalidDate=hr,Sr._ordinal=mr,Sr.ordinal=yr,Sr._ordinalParse=gr,Sr.preparse=vr,Sr.postformat=vr,Sr._relativeTime=br,Sr.relativeTime=_r,Sr.pastFuture=wr,Sr.set=Er,Sr.months=Oe,Sr._months=Te,Sr.monthsShort=Ae,Sr._monthsShort=Ce,Sr.monthsParse=Pe,Sr.week=Qe,Sr._week=Xe,Sr.firstDayOfYear=tt,Sr.firstDayOfWeek=et,Sr.weekdays=jn,Sr._weekdays=In,Sr.weekdaysMin=Hn,Sr._weekdaysMin=Yn,Sr.weekdaysShort=Fn,Sr._weekdaysShort=Bn,Sr.weekdaysParse=Vn,Sr.isPM=$n,Sr._meridiemParse=Kn,Sr.meridiem=Zn,C("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=Ie("moment.lang is deprecated. Use moment.locale instead.",C),n.langData=Ie("moment.langData is deprecated. Use moment.localeData instead.",P);var Mr=Math.abs;function Dr(){var e=this._data;return this._milliseconds=Mr(this._milliseconds),this._days=Mr(this._days),this._months=Mr(this._months),e.milliseconds=Mr(e.milliseconds),e.seconds=Mr(e.seconds),e.minutes=Mr(e.minutes),e.hours=Mr(e.hours),e.months=Mr(e.months),e.years=Mr(e.years),this}function Rr(e,t,n,r){var i=Ut(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Lr(e,t){return Rr(this,e,t,1)}function Nr(e,t){return Rr(this,e,t,-1)}function Ir(e){return e<0?Math.floor(e):Math.ceil(e)}function jr(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Ir(Fr(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=b(o/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,n=b(t/60),l.hours=n%24,a+=b(n/24),s+=i=b(Br(a)),a-=Ir(Fr(i)),r=b(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function Br(e){return 4800*e/146097}function Fr(e){return 146097*e/4800}function Yr(e){var t,n,r=this._milliseconds;if("month"===(e=R(e))||"year"===e)return t=this._days+r/864e5,n=this._months+Br(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Fr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Hr(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12)}function Vr(e){return function(){return this.as(e)}}var qr=Vr("ms"),Ur=Vr("s"),Wr=Vr("m"),zr=Vr("h"),Gr=Vr("d"),$r=Vr("w"),Kr=Vr("M"),Zr=Vr("y");function Jr(e){return this[(e=R(e))+"s"]()}function Qr(e){return function(){return this._data[e]}}var Xr=Qr("milliseconds"),ei=Qr("seconds"),ti=Qr("minutes"),ni=Qr("hours"),ri=Qr("days"),ii=Qr("months"),oi=Qr("years");function ai(){return b(this.days()/7)}var si=Math.round,li={s:45,m:45,h:22,d:26,M:11};function ui(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ci(e,t,n){var r=Ut(e).abs(),i=si(r.as("s")),o=si(r.as("m")),a=si(r.as("h")),s=si(r.as("d")),l=si(r.as("M")),u=si(r.as("y")),c=i<li.s&&["s",i]||1===o&&["m"]||o<li.m&&["mm",o]||1===a&&["h"]||a<li.h&&["hh",a]||1===s&&["d"]||s<li.d&&["dd",s]||1===l&&["M"]||l<li.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,ui.apply(null,c)}function di(e,t){return void 0!==li[e]&&(void 0===t?li[e]:(li[e]=t,!0))}function fi(e){var t=this.localeData(),n=ci(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}var pi=Math.abs;function hi(){var e,t,n=pi(this._milliseconds)/1e3,r=pi(this._days),i=pi(this._months);e=b(n/60),t=b(e/60),n%=60,e%=60;var o=b(i/12),a=i%=12,s=r,l=t,u=e,c=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var mi=xt.prototype;mi.abs=Dr,mi.add=Lr,mi.subtract=Nr,mi.as=Yr,mi.asMilliseconds=qr,mi.asSeconds=Ur,mi.asMinutes=Wr,mi.asHours=zr,mi.asDays=Gr,mi.asWeeks=$r,mi.asMonths=Kr,mi.asYears=Zr,mi.valueOf=Hr,mi._bubble=jr,mi.get=Jr,mi.milliseconds=Xr,mi.seconds=ei,mi.minutes=ti,mi.hours=ni,mi.days=ri,mi.weeks=ai,mi.months=ii,mi.years=oi,mi.humanize=fi,mi.toISOString=hi,mi.toString=hi,mi.toJSON=hi,mi.locale=hn,mi.localeData=gn,mi.toIsoString=Ie("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",hi),mi.lang=mn,U("X",0,0,"unix"),U("x",0,0,"valueOf"),de("x",oe),de("X",se),me("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),me("x",(function(e,t,n){n._d=new Date(_(e))})),n.version="2.10.6",r(vt),n.fn=ar,n.min=Et,n.max=St,n.utc=u,n.unix=sr,n.months=Tr,n.isDate=o,n.locale=C,n.invalid=p,n.duration=Ut,n.isMoment=v,n.weekdays=Cr,n.parseZone=lr,n.localeData=P,n.isDuration=kt,n.monthsShort=Or,n.weekdaysMin=Pr,n.defineLocale=A,n.weekdaysShort=Ar,n.normalizeUnits=R,n.relativeTimeThreshold=di;var gi=n,yi=(gi.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}}),gi.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),vi={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},bi=(gi.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return vi[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return yi[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}}),gi.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}}),{1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"}),_i={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},wi=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},Ei={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},Si=function(e){return function(t,n,r,i){var o=wi(t),a=Ei[e][wi(t)];return 2===o&&(a=a[n?0:1]),a.replace(/%d/i,t)}},xi=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"],ki=(gi.defineLocale("ar",{months:xi,monthsShort:xi,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:Si("s"),m:Si("m"),mm:Si("m"),h:Si("h"),hh:Si("h"),d:Si("d"),dd:Si("d"),M:Si("M"),MM:Si("M"),y:Si("y"),yy:Si("y")},preparse:function(e){return e.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return _i[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return bi[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}}),{1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"});function Ti(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function Oi(e,t,n){return"m"===n?t?"хвіліна":"хвіліну":"h"===n?t?"гадзіна":"гадзіну":e+" "+Ti({mm:t?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:t?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n],+e)}function Ci(e,t){return{nominative:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_"),accusative:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function Ai(e,t){return{nominative:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),accusative:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_")}[/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}gi.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var t=e%10,n=e%100-t,r=e>=100?100:null;return e+(ki[t]||ki[n]||ki[r])},week:{dow:1,doy:7}}),gi.defineLocale("be",{months:Ci,monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:Ai,weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:Oi,mm:Oi,h:Oi,hh:Oi,d:"дзень",dd:Oi,M:"месяц",MM:Oi,y:"год",yy:Oi},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}}),gi.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}});var Pi={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},Mi={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"},Di=(gi.defineLocale("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return Mi[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return Pi[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকেল|রাত/,isPM:function(e){return/^(দুপুর|বিকেল|রাত)$/.test(e)},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকেল":"রাত"},week:{dow:0,doy:6}}),{1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"}),Ri={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};function Li(e,t,n){return e+" "+ji({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function Ni(e){switch(Ii(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function Ii(e){return e>9?Ii(e%10):e}function ji(e,t){return 2===t?Bi(e):e}function Bi(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}function Fi(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}gi.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return Ri[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return Di[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,isPM:function(e){return/^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(e)},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}}),gi.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:Li,h:"un eur",hh:"%d eur",d:"un devezh",dd:Li,M:"ur miz",MM:Li,y:"ur bloaz",yy:Ni},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4}}),gi.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:Fi,mm:Fi,h:Fi,hh:Fi,d:"dan",dd:Fi,M:"mjesec",MM:Fi,y:"godinu",yy:Fi},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),gi.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}});var Yi="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),Hi="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function Vi(e){return e>1&&e<5&&1!=~~(e/10)}function qi(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"pár sekund":"pár sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?i+(Vi(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?i+(Vi(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?i+(Vi(e)?"dny":"dní"):i+"dny";case"M":return t||r?"měsíc":"měsícem";case"MM":return t||r?i+(Vi(e)?"měsíce":"měsíců"):i+"měsíci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?i+(Vi(e)?"roky":"let"):i+"lety"}}function Ui(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}function Wi(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}gi.defineLocale("cs",{months:Yi,monthsShort:Hi,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++)r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return r}(Yi,Hi),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:qi,m:qi,mm:qi,h:qi,hh:qi,d:qi,dd:qi,M:qi,MM:qi,y:qi,yy:qi},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},ordinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}}),gi.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}}),gi.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Ui,mm:"%d Minuten",h:Ui,hh:"%d Stunden",d:Ui,dd:Ui,M:Ui,MM:Ui,y:Ui,yy:Ui},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:Wi,mm:"%d Minuten",h:Wi,hh:"%d Stunden",d:Wi,dd:Wi,M:Wi,MM:Wi,y:Wi,yy:Wi},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n=this._calendarEl[e],r=t&&t.hours();return"function"==typeof n&&(n=n.apply(t)),n.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}}),gi.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),gi.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),gi.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}}),gi.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}});var zi="Ene._Feb._Mar._Abr._May._Jun._Jul._Ago._Sep._Oct._Nov._Dic.".split("_"),Gi="Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_");function $i(e,t,n,r){var i={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}gi.defineLocale("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:function(e,t){return/-MMM-/.test(t)?Gi[e.month()]:zi[e.month()]},weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mié._Jue._Vie._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),gi.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:$i,m:$i,mm:$i,h:$i,hh:$i,d:$i,dd:"%d päeva",M:$i,MM:$i,y:$i,yy:$i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var Ki={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},Zi={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"},Ji=(gi.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return Zi[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return Ki[e]})).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}}),"nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" ")),Qi=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",Ji[7],Ji[8],Ji[9]];function Xi(e,t,n,r){var i="";switch(n){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"m":return r?"minuutin":"minuutti";case"mm":i=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":i=r?"tunnin":"tuntia";break;case"d":return r?"päivän":"päivä";case"dd":i=r?"päivän":"päivää";break;case"M":return r?"kuukauden":"kuukausi";case"MM":i=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":i=r?"vuoden":"vuotta"}return i=eo(e,r)+" "+i}function eo(e,t){return e<10?t?Qi[e]:Ji[e]:e}gi.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:Xi,m:Xi,mm:Xi,h:Xi,hh:Xi,d:Xi,dd:Xi,M:Xi,MM:Xi,y:Xi,yy:Xi},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(e){return e+(1===e?"er":"e")}}),gi.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}});var to="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),no="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),ro=(gi.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,t){return/-MMM-/.test(t)?no[e.month()]:to[e.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}}),gi.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return"uns segundos"===e?"nuns segundos":"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}}),gi.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),io={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function oo(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}gi.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return io[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return ro[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}}),gi.defineLocale("hr",{months:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:oo,mm:oo,h:oo,hh:oo,d:"dan",dd:oo,M:"mjesec",MM:oo,y:"godinu",yy:oo},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}});var ao="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function so(e,t,n,r){var i=e;switch(n){case"s":return r||t?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" óra":" órája");case"hh":return i+(r||t?" óra":" órája");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hónap":" hónapja");case"MM":return i+(r||t?" hónap":" hónapja");case"y":return"egy"+(r||t?" év":" éve");case"yy":return i+(r||t?" év":" éve")}return""}function lo(e){return(e?"":"[múlt] ")+"["+ao[this.day()]+"] LT[-kor]"}function uo(e,t){return{nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function co(e,t){return"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_")[e.month()]}function fo(e,t){return"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_")[e.day()]}function po(e){return e%100==11||e%10!=1}function ho(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return t?"mínúta":"mínútu";case"mm":return po(e)?i+(t||r?"mínútur":"mínútum"):t?i+"mínúta":i+"mínútu";case"hh":return po(e)?i+(t||r?"klukkustundir":"klukkustundum"):i+"klukkustund";case"d":return t?"dagur":r?"dag":"degi";case"dd":return po(e)?t?i+"dagar":i+(r?"daga":"dögum"):t?i+"dagur":i+(r?"dag":"degi");case"M":return t?"mánuður":r?"mánuð":"mánuði";case"MM":return po(e)?t?i+"mánuðir":i+(r?"mánuði":"mánuðum"):t?i+"mánuður":i+(r?"mánuð":"mánuði");case"y":return t||r?"ár":"ári";case"yy":return po(e)?i+(t||r?"ár":"árum"):i+(t||r?"ár":"ári")}}function mo(e,t){return{nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")}[/D[oD] *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function go(e,t){return{nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")}[/(წინა|შემდეგ)/.test(t)?"accusative":"nominative"][e.day()]}function yo(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function vo(e){return _o(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function bo(e){return _o(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function _o(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return _o(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return _o(e)}return _o(e/=1e3)}gi.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return lo.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return lo.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:so,m:so,mm:so,h:so,hh:so,d:so,dd:so,M:so,MM:so,y:so,yy:so},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),gi.defineLocale("hy-am",{months:uo,monthsShort:co,weekdays:fo,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}}),gi.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),gi.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:ho,m:ho,mm:ho,h:"klukkustund",hh:ho,d:ho,dd:ho,M:ho,MM:ho,y:ho,yy:ho},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),gi.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}}),gi.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}}),gi.defineLocale("ka",{months:mo,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:go,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(წამი|წუთი|საათი|წელი)/.test(e)?e.replace(/ი$/,"ში"):e+"ში"},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}}),gi.defineLocale("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}}),gi.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}}),gi.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:vo,past:bo,s:"e puer Sekonnen",m:yo,mm:"%d Minutten",h:yo,hh:"%d Stonnen",d:yo,dd:"%d Deeg",M:yo,MM:"%d Méint",y:yo,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var wo={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},Eo="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_");function So(e,t,n,r){return t?"kelios sekundės":r?"kelių sekundžių":"kelias sekundes"}function xo(e,t){return{nominative:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),accusative:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function ko(e,t,n,r){return t?Oo(n)[0]:r?Oo(n)[1]:Oo(n)[2]}function To(e){return e%10==0||e>10&&e<20}function Oo(e){return wo[e].split("_")}function Co(e,t,n,r){var i=e+" ";return 1===e?i+ko(e,t,n[0],r):t?i+(To(e)?Oo(n)[1]:Oo(n)[0]):r?i+Oo(n)[1]:i+(To(e)?Oo(n)[1]:Oo(n)[2])}function Ao(e,t){var n=-1===t.indexOf("dddd HH:mm"),r=Eo[e.day()];return n?r:r.substring(0,r.length-2)+"į"}gi.defineLocale("lt",{months:xo,monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:Ao,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:So,m:ko,mm:Co,h:ko,hh:Co,d:ko,dd:Co,M:ko,MM:Co,y:ko,yy:Co},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}});var Po={m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function Mo(e,t,n){return n?t%10==1&&11!==t?e[2]:e[3]:t%10==1&&11!==t?e[0]:e[1]}function Do(e,t,n){return e+" "+Mo(Po[n],e,t)}function Ro(e,t,n){return Mo(Po[n],e,t)}function Lo(e,t){return t?"dažas sekundes":"dažām sekundēm"}gi.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:Lo,m:Ro,mm:Do,h:Ro,hh:Do,d:Ro,dd:Do,M:Ro,MM:Do,y:Ro,yy:Do},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var No={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,n){var r=No.words[n];return 1===n.length?t?r[0]:r[1]:e+" "+No.correctGrammaticalCase(e,r)}},Io=(gi.defineLocale("me",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sri.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:No.translate,mm:No.translate,h:No.translate,hh:No.translate,d:"dan",dd:No.translate,M:"mjesec",MM:No.translate,y:"godinu",yy:No.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),gi.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}}),gi.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,isPM:function(e){return/^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(e)},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),jo={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},Bo=(gi.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return jo[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return Io[e]}))},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात्री"===t?e<4?e:e+12:"सकाळी"===t?e:"दुपारी"===t?e>=10?e:e+12:"सायंकाळी"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात्री":e<10?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}}),gi.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),gi.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}}),{1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"}),Fo={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"},Yo=(gi.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return Fo[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return Bo[e]}))},week:{dow:1,doy:4}}),gi.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tirs_ons_tors_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",LTS:"H.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H.mm",LLLL:"dddd D. MMMM YYYY [kl.] H.mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),{1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"}),Ho={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},Vo=(gi.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return Ho[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return Yo[e]}))},meridiemParse:/राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<3?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"बेलुका"===t||"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राती":e<10?"बिहान":e<15?"दिउँसो":e<18?"बेलुका":e<20?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}}),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_")),qo="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),Uo=(gi.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,t){return/-MMM-/.test(t)?qo[e.month()]:Vo[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}}),gi.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),"styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_")),Wo="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function zo(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function Go(e,t,n){var r=e+" ";switch(n){case"m":return t?"minuta":"minutę";case"mm":return r+(zo(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return r+(zo(e)?"godziny":"godzin");case"MM":return r+(zo(e)?"miesiące":"miesięcy");case"yy":return r+(zo(e)?"lata":"lat")}}function $o(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}function Ko(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function Zo(e,t,n){return"m"===n?t?"минута":"минуту":e+" "+Ko({mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n],+e)}function Jo(e,t){return{nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function Qo(e,t){return{nominative:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function Xo(e,t){return{nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")}[/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}gi.defineLocale("pl",{months:function(e,t){return""===t?"("+Wo[e.month()]+"|"+Uo[e.month()]+")":/D MMMM/.test(t)?Wo[e.month()]:Uo[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:Go,mm:Go,h:Go,hh:Go,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:Go,y:"rok",yy:Go},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"}),gi.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}}),gi.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:$o,h:"o oră",hh:$o,d:"o zi",dd:$o,M:"o lună",MM:$o,y:"un an",yy:$o},week:{dow:1,doy:7}}),gi.defineLocale("ru",{months:Jo,monthsShort:Qo,weekdays:Xo,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:Zo,mm:Zo,h:"час",hh:Zo,d:"день",dd:Zo,M:"месяц",MM:Zo,y:"год",yy:Zo},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}}),gi.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},ordinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}});var ea="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),ta="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function na(e){return e>1&&e<5}function ra(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"pár sekúnd":"pár sekundami";case"m":return t?"minúta":r?"minútu":"minútou";case"mm":return t||r?i+(na(e)?"minúty":"minút"):i+"minútami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?i+(na(e)?"hodiny":"hodín"):i+"hodinami";case"d":return t||r?"deň":"dňom";case"dd":return t||r?i+(na(e)?"dni":"dní"):i+"dňami";case"M":return t||r?"mesiac":"mesiacom";case"MM":return t||r?i+(na(e)?"mesiace":"mesiacov"):i+"mesiacmi";case"y":return t||r?"rok":"rokom";case"yy":return t||r?i+(na(e)?"roky":"rokov"):i+"rokmi"}}function ia(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami";case"d":return t||r?"en dan":"enim dnem";case"dd":return i+=1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi";case"M":return t||r?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci";case"y":return t||r?"eno leto":"enim letom";case"yy":return i+=1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti"}}gi.defineLocale("sk",{months:ea,monthsShort:ta,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++)r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return r}(ea,ta),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:ra,m:ra,mm:ra,h:ra,hh:ra,d:ra,dd:ra,M:ra,MM:ra,y:ra,yy:ra},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:ia,m:ia,mm:ia,h:ia,hh:ia,d:ia,dd:ia,M:ia,MM:ia,y:ia,yy:ia},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),gi.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});var oa={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,n){var r=oa.words[n];return 1===n.length?t?r[0]:r[1]:e+" "+oa.correctGrammaticalCase(e,r)}},aa=(gi.defineLocale("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:oa.translate,mm:oa.translate,h:oa.translate,hh:oa.translate,d:"дан",dd:oa.translate,M:"месец",MM:oa.translate,y:"годину",yy:oa.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),{words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,t,n){var r=aa.words[n];return 1===n.length?t?r[0]:r[1]:e+" "+aa.correctGrammaticalCase(e,r)}}),sa=(gi.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:aa.translate,mm:aa.translate,h:aa.translate,hh:aa.translate,d:"dan",dd:aa.translate,M:"mesec",MM:aa.translate,y:"godinu",yy:aa.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}}),gi.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t||2===t?"a":"e")},week:{dow:1,doy:4}}),gi.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t||"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}}),gi.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"H นาฬิกา m นาที s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H นาฬิกา m นาที",LLLL:"วันddddที่ D MMMM YYYY เวลา H นาฬิกา m นาที"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}}),gi.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),{1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"});function la(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts"," "+e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras"," "+e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas"," "+e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen"," "+e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars"," "+e+" ars"]};return r||t?i[n][0]:i[n][1].trim()}function ua(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function ca(e,t,n){return"m"===n?t?"хвилина":"хвилину":"h"===n?t?"година":"годину":e+" "+ua({mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n],+e)}function da(e,t){return{nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")}[/D[oD]? *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function fa(e,t){return{nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")}[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]}function pa(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}gi.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(e){if(0===e)return e+"'ıncı";var t=e%10,n=e%100-t,r=e>=100?100:null;return e+(sa[t]||sa[n]||sa[r])},week:{dow:1,doy:7}}),gi.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY LT",LLLL:"dddd, [li] D. MMMM [dallas] YYYY LT"},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:la,m:la,mm:la,h:la,hh:la,d:la,dd:la,M:la,MM:la,y:la,yy:la},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}}),gi.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}}),gi.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}}),gi.defineLocale("uk",{months:da,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:fa,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:pa("[Сьогодні "),nextDay:pa("[Завтра "),lastDay:pa("[Вчора "),nextWeek:pa("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return pa("[Минулої] dddd [").call(this);case 1:case 2:case 4:return pa("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:ca,mm:ca,h:"годину",hh:ca,d:"день",dd:ca,M:"місяць",MM:ca,y:"рік",yy:ca},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}}),gi.defineLocale("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}}),gi.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}}),gi.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var e,t;return e=gi().startOf("week"),t=this.unix()-e.unix()>=604800?"[下]":"[本]",0===this.minutes()?t+"dddAh点整":t+"dddAh点mm"},lastWeek:function(){var e,t;return e=gi().startOf("week"),t=this.unix()<e.unix()?"[上]":"[本]",0===this.minutes()?t+"dddAh点整":t+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),gi.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}});var ha=gi;return ha.locale("en"),ha}()},19366:(e,t,n)=>{var r,i;r=[n(38291)],void 0===(i=function(e){var t,n=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}}(),r=(t=0,window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-t)),t=r+n,setTimeout((function(){e(r+n)}),n)});function i(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function o(e){return s.isWrapped(e)?e=[].slice.call(e):s.isNode(e)&&(e=[e]),e}var a,s={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&void 0!==e.length&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||window.Zepto&&window.Zepto.zepto.isZ(e))},isSVG:function(e){return window.SVGElement&&e instanceof window.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},l=!1;if(e.fn&&e.fn.jquery?(a=e,l=!0):a=window.Velocity.Utilities,n<=8&&!l)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(n<=7)){var u=400,c="swing",d={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:window.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:document.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:a,Redirects:{},Easings:{},Promise:window.Promise,defaults:{queue:"",duration:u,easing:c,begin:void 0,complete:void 0,progress:void 0,display:void 0,visibility:void 0,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){a.data(e,"velocity",{isSVG:s.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};void 0!==window.pageYOffset?(d.State.scrollAnchor=window,d.State.scrollPropertyLeft="pageXOffset",d.State.scrollPropertyTop="pageYOffset"):(d.State.scrollAnchor=document.documentElement||document.body.parentNode||document.body,d.State.scrollPropertyLeft="scrollLeft",d.State.scrollPropertyTop="scrollTop");var f=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function e(t,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,d=1e-4;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,l.tension=t,l.friction=r,a=(o=null!==i)?(c=e(t,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>d&&Math.abs(s.v)>d;);return o?function(e){return u[e*(u.length-1)|0]}:c}}();d.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},a.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],(function(e,t){d.Easings[t[0]]=v.apply(null,t[1])}));var p=d.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<p.Lists.colors.length;e++){var t="color"===p.Lists.colors[e]?"0 0 0 1":"255 255 255 1";p.Hooks.templates[p.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,i,o;if(n)for(r in p.Hooks.templates){o=(i=p.Hooks.templates[r])[0].split(" ");var a=i[1].match(p.RegEx.valueSplit);"Color"===o[0]&&(o.push(o.shift()),a.push(a.shift()),p.Hooks.templates[r]=[o.join(" "),a.join(" ")])}for(r in p.Hooks.templates)for(var e in o=(i=p.Hooks.templates[r])[0].split(" ")){var s=r+o[e],l=e;p.Hooks.registered[s]=[r,l]}},getRoot:function(e){var t=p.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return p.RegEx.valueUnwrap.test(t)&&(t=t.match(p.RegEx.valueUnwrap)[1]),p.Values.isCSSNullValue(t)&&(t=p.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=p.Hooks.registered[e];if(n){var r=n[0],i=n[1];return(t=p.Hooks.cleanRootPropertyValue(r,t)).toString().match(p.RegEx.valueSplit)[i]}return t},injectValue:function(e,t,n){var r=p.Hooks.registered[e];if(r){var i,o=r[0],a=r[1];return(i=(n=p.Hooks.cleanRootPropertyValue(o,n)).toString().match(p.RegEx.valueSplit))[a]=t,i.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return r=p.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(p.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,r){if(n<=8)switch(e){case"name":return"filter";case"extract":var i=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=i?i[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return r}}},register:function(){n<=9||d.State.isGingerbread||(p.Lists.transformsBase=p.Lists.transformsBase.concat(p.Lists.transforms3D));for(var e=0;e<p.Lists.transformsBase.length;e++)!function(){var t=p.Lists.transformsBase[e];p.Normalizations.registered[t]=function(e,n,r){switch(e){case"name":return"transform";case"extract":return void 0===g(n)||void 0===g(n).transformCache[t]?/^scale/i.test(t)?1:0:g(n).transformCache[t].replace(/[()]/g,"");case"inject":var i=!1;switch(t.substr(0,t.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":d.State.isAndroid&&void 0===g(n).transformCache[t]&&r<1&&(r=1),i=!/(\d)$/i.test(r);break;case"skew":case"rotate":i=!/(deg|\d)$/i.test(r)}return i||(g(n).transformCache[t]="("+r+")"),g(n).transformCache[t]}}}();for(e=0;e<p.Lists.colors.length;e++)!function(){var t=p.Lists.colors[e];p.Normalizations.registered[t]=function(e,r,i){switch(e){case"name":return t;case"extract":var o;if(p.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=void 0!==s[i]?s[i]:s.black:p.RegEx.isHex.test(i)?a="rgb("+p.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(p.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return n<=8||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return n<=8?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(n<=8?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||d.State.isAndroid&&!d.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(d.State.prefixMatches[e])return[d.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;n<r;n++){var i;if(i=0===n?e:t[n]+e.replace(/^\w/,(function(e){return e.toUpperCase()})),s.isString(d.State.prefixElement.style[i]))return d.State.prefixMatches[e]=i,[i,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,t,r,i){function o(e,t){var r=0;if(n<=8)r=a.css(e,t);else{var s,l=!1;function u(){l&&p.setPropertyValue(e,"display","none")}if(/^(width|height)$/.test(t)&&0===p.getPropertyValue(e,"display")&&(l=!0,p.setPropertyValue(e,"display",p.Values.getDisplayType(e))),!i){if("height"===t&&"border-box"!==p.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(p.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(p.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(p.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(p.getPropertyValue(e,"paddingBottom"))||0);return u(),c}if("width"===t&&"border-box"!==p.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var f=e.offsetWidth-(parseFloat(p.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(p.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(p.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(p.getPropertyValue(e,"paddingRight"))||0);return u(),f}}s=void 0===g(e)?window.getComputedStyle(e,null):g(e).computedStyle?g(e).computedStyle:g(e).computedStyle=window.getComputedStyle(e,null),(n||d.State.isFirefox)&&"borderColor"===t&&(t="borderTopColor"),""!==(r=9===n&&"filter"===t?s.getPropertyValue(t):s[t])&&null!==r||(r=e.style[t]),u()}if("auto"===r&&/^(top|right|bottom|left)$/i.test(t)){var h=o(e,"position");("fixed"===h||"absolute"===h&&/top|left/i.test(t))&&(r=a(e).position()[t]+"px")}return r}var s;if(p.Hooks.registered[t]){var l=t,u=p.Hooks.getRoot(l);void 0===r&&(r=p.getPropertyValue(e,p.Names.prefixCheck(u)[0])),p.Normalizations.registered[u]&&(r=p.Normalizations.registered[u]("extract",e,r)),s=p.Hooks.extractValue(l,r)}else if(p.Normalizations.registered[t]){var c,f;"transform"!==(c=p.Normalizations.registered[t]("name",e))&&(f=o(e,p.Names.prefixCheck(c)[0]),p.Values.isCSSNullValue(f)&&p.Hooks.templates[t]&&(f=p.Hooks.templates[t][1])),s=p.Normalizations.registered[t]("extract",e,f)}return/^[\d-]/.test(s)||(s=g(e)&&g(e).isSVG&&p.Names.SVGAttribute(t)?/^(height|width)$/i.test(t)?e.getBBox()[t]:e.getAttribute(t):o(e,p.Names.prefixCheck(t)[0])),p.Values.isCSSNullValue(s)&&(s=0),d.debug>=2&&console.log("Get "+t+": "+s),s},setPropertyValue:function(e,t,r,i,o){var a=t;if("scroll"===t)o.container?o.container["scroll"+o.direction]=r:"Left"===o.direction?window.scrollTo(r,o.alternateValue):window.scrollTo(o.alternateValue,r);else if(p.Normalizations.registered[t]&&"transform"===p.Normalizations.registered[t]("name",e))p.Normalizations.registered[t]("inject",e,r),a="transform",r=g(e).transformCache[t];else{if(p.Hooks.registered[t]){var s=t,l=p.Hooks.getRoot(t);i=i||p.getPropertyValue(e,l),r=p.Hooks.injectValue(s,r,i),t=l}if(p.Normalizations.registered[t]&&(r=p.Normalizations.registered[t]("inject",e,r),t=p.Normalizations.registered[t]("name",e)),a=p.Names.prefixCheck(t)[0],n<=8)try{e.style[a]=r}catch(e){d.debug&&console.log("Browser does not support ["+r+"] for ["+a+"]")}else g(e)&&g(e).isSVG&&p.Names.SVGAttribute(t)?e.setAttribute(t,r):e.style[a]=r;d.debug>=2&&console.log("Set "+t+" ("+a+"): "+r)}return[a,r]},flushTransformCache:function(e){var t="";if((n||d.State.isAndroid&&!d.State.isChrome)&&g(e).isSVG){function r(t){return parseFloat(p.getPropertyValue(e,t))}var i={translate:[r("translateX"),r("translateY")],skewX:[r("skewX")],skewY:[r("skewY")],scale:1!==r("scale")?[r("scale"),r("scale")]:[r("scaleX"),r("scaleY")],rotate:[r("rotateZ"),0,0]};a.each(g(e).transformCache,(function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(t+=e+"("+i[e].join(" ")+") ",delete i[e])}))}else{var o,s;a.each(g(e).transformCache,(function(r){if(o=g(e).transformCache[r],"transformPerspective"===r)return s=o,!0;9===n&&"rotateZ"===r&&(r="rotate"),t+=r+o+" "})),s&&(t="perspective"+s+" "+t)}p.setPropertyValue(e,"transform",t)}};p.Hooks.register(),p.Normalizations.register(),d.hook=function(e,t,n){var r=void 0;return e=o(e),a.each(e,(function(e,i){if(void 0===g(i)&&d.init(i),void 0===n)void 0===r&&(r=d.CSS.getPropertyValue(i,t));else{var o=d.CSS.setPropertyValue(i,t,n);"transform"===o[0]&&d.CSS.flushTransformCache(i),r=o}})),r};var h=function(){function e(){return t?k.promise||null:n}var t,n,r,l,c,f,m=arguments[0]&&(a.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||s.isString(arguments[0].properties));if(s.isWrapped(this)?(t=!1,r=0,l=this,n=this):(t=!0,r=1,l=m?arguments[0].elements:arguments[0]),l=o(l)){m?(c=arguments[0].properties,f=arguments[0].options):(c=arguments[r],f=arguments[r+1]);var y=l.length,v=0;if("stop"!==c&&!a.isPlainObject(f)){var E=r+1;f={};for(var S=E;S<arguments.length;S++)s.isArray(arguments[S])||!/^(fast|normal|slow)$/i.test(arguments[S])&&!/^\d/.test(arguments[S])?s.isString(arguments[S])||s.isArray(arguments[S])?f.easing=arguments[S]:s.isFunction(arguments[S])&&(f.complete=arguments[S]):f.duration=arguments[S]}var x,k={promise:null,resolver:null,rejecter:null};switch(t&&d.Promise&&(k.promise=new d.Promise((function(e,t){k.resolver=e,k.rejecter=t}))),c){case"scroll":x="scroll";break;case"reverse":x="reverse";break;case"stop":a.each(l,(function(e,t){g(t)&&g(t).delayTimer&&(clearTimeout(g(t).delayTimer.setTimeout),g(t).delayTimer.next&&g(t).delayTimer.next(),delete g(t).delayTimer)}));var T=[];return a.each(d.State.calls,(function(e,t){t&&a.each(t[1],(function(n,r){var i=s.isString(f)?f:"";if(void 0!==f&&t[2].queue!==i)return!0;a.each(l,(function(t,n){n===r&&(void 0!==f&&(a.each(a.queue(n,i),(function(e,t){s.isFunction(t)&&t(null,!0)})),a.queue(n,i,[])),g(n)&&""===i&&a.each(g(n).tweensContainer,(function(e,t){t.endValue=t.currentValue})),T.push(e))}))}))})),a.each(T,(function(e,t){w(t,!0)})),k.promise&&k.resolver(l),e();default:if(!a.isPlainObject(c)||s.isEmptyObject(c)){if(s.isString(c)&&d.Redirects[c]){var O=(P=a.extend({},f)).duration,C=P.delay||0;return!0===P.backwards&&(l=a.extend(!0,[],l).reverse()),a.each(l,(function(e,t){parseFloat(P.stagger)?P.delay=C+parseFloat(P.stagger)*e:s.isFunction(P.stagger)&&(P.delay=C+P.stagger.call(t,e,y)),P.drag&&(P.duration=parseFloat(O)||(/^(callout|transition)/.test(c)?1e3:u),P.duration=Math.max(P.duration*(P.backwards?1-e/y:(e+1)/y),.75*P.duration,200)),d.Redirects[c].call(t,t,P||{},e,y,l,k.promise?k:void 0)})),e()}var A="Velocity: First argument ("+c+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(A)):console.log(A),e()}x="start"}var P,M,D={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];if(a.each(l,(function(e,t){s.isNode(t)&&I.call(t)})),(P=a.extend({},d.defaults,f)).loop=parseInt(P.loop),M=2*P.loop-1,P.loop)for(var L=0;L<M;L++){var N={delay:P.delay,progress:P.progress};L===M-1&&(N.display=P.display,N.visibility=P.visibility,N.complete=P.complete),h(l,"reverse",N)}return e()}function I(){var e,t=this,n=a.extend({},d.defaults,f),r={};switch(void 0===g(t)&&d.init(t),parseFloat(n.delay)&&!1!==n.queue&&a.queue(t,n.queue,(function(e){d.velocityQueueEntryFlag=!0,g(t).delayTimer={setTimeout:setTimeout(e,parseFloat(n.delay)),next:e}})),n.duration.toString().toLowerCase()){case"fast":n.duration=200;break;case"normal":n.duration=u;break;case"slow":n.duration=600;break;default:n.duration=parseFloat(n.duration)||1}function o(o){if(n.begin&&0===v)try{n.begin.call(l,l)}catch(e){setTimeout((function(){throw e}),1)}if("scroll"===x){var u,h,m,w=/^x$/i.test(n.axis)?"Left":"Top",E=parseFloat(n.offset)||0;n.container?s.isWrapped(n.container)||s.isNode(n.container)?(n.container=n.container[0]||n.container,m=(u=n.container["scroll"+w])+a(t).position()[w.toLowerCase()]+E):n.container=null:(u=d.State.scrollAnchor[d.State["scrollProperty"+w]],h=d.State.scrollAnchor[d.State["scrollProperty"+("Left"===w?"Top":"Left")]],m=a(t).offset()[w.toLowerCase()]+E),r={scroll:{rootPropertyValue:!1,startValue:u,currentValue:u,endValue:m,unitType:"",easing:n.easing,scrollData:{container:n.container,direction:w,alternateValue:h}},element:t},d.debug&&console.log("tweensContainer (scroll): ",r.scroll,t)}else if("reverse"===x){if(!g(t).tweensContainer)return void a.dequeue(t,n.queue);"none"===g(t).opts.display&&(g(t).opts.display="auto"),"hidden"===g(t).opts.visibility&&(g(t).opts.visibility="visible"),g(t).opts.loop=!1,g(t).opts.begin=null,g(t).opts.complete=null,f.easing||delete n.easing,f.duration||delete n.duration,n=a.extend({},g(t).opts,n);var S=a.extend(!0,{},g(t).tweensContainer);for(var T in S)if("element"!==T){var O=S[T].startValue;S[T].startValue=S[T].currentValue=S[T].endValue,S[T].endValue=O,s.isEmptyObject(f)||(S[T].easing=n.easing),d.debug&&console.log("reverse tweensContainer ("+T+"): "+JSON.stringify(S[T]),t)}r=S}else if("start"===x){function C(e,r){var i=void 0,o=void 0,a=void 0;return s.isArray(e)?(i=e[0],!s.isArray(e[1])&&/^[\d-]/.test(e[1])||s.isFunction(e[1])||p.RegEx.isHex.test(e[1])?a=e[1]:(s.isString(e[1])&&!p.RegEx.isHex.test(e[1])||s.isArray(e[1]))&&(o=r?e[1]:b(e[1],n.duration),void 0!==e[2]&&(a=e[2]))):i=e,r||(o=o||n.easing),s.isFunction(i)&&(i=i.call(t,v,y)),s.isFunction(a)&&(a=a.call(t,v,y)),[i||0,o,a]}for(var A in g(t).tweensContainer&&!0===g(t).isAnimating&&(S=g(t).tweensContainer),a.each(c,(function(e,t){if(RegExp("^"+p.Lists.colors.join("$|^")+"$").test(e)){var n=C(t,!0),r=n[0],i=n[1],o=n[2];if(p.RegEx.isHex.test(r)){for(var a=["Red","Green","Blue"],s=p.Values.hexToRgb(r),l=o?p.Values.hexToRgb(o):void 0,u=0;u<a.length;u++){var d=[s[u]];i&&d.push(i),void 0!==l&&d.push(l[u]),c[e+a[u]]=d}delete c[e]}}})),c){var P=C(c[A]),M=P[0],L=P[1],N=P[2];A=p.Names.camelCase(A);var I=p.Hooks.getRoot(A),j=!1;if(g(t).isSVG||!1!==p.Names.prefixCheck(I)[1]||void 0!==p.Normalizations.registered[I]){(void 0!==n.display&&null!==n.display&&"none"!==n.display||void 0!==n.visibility&&"hidden"!==n.visibility)&&/opacity|filter/.test(A)&&!N&&0!==M&&(N=0),n._cacheValues&&S&&S[A]?(void 0===N&&(N=S[A].endValue+S[A].unitType),j=g(t).rootPropertyValueCache[I]):p.Hooks.registered[A]?void 0===N?(j=p.getPropertyValue(t,I),N=p.getPropertyValue(t,A,j)):j=p.Hooks.templates[I][1]:void 0===N&&(N=p.getPropertyValue(t,A));var B,F,Y,H=!1;if(N=(B=q(A,N))[0],Y=B[1],M=(B=q(A,M))[0].replace(/^([+-\/*])=/,(function(e,t){return H=t,""})),F=B[1],N=parseFloat(N)||0,M=parseFloat(M)||0,"%"===F&&(/^(fontSize|lineHeight)$/.test(A)?(M/=100,F="em"):/^scale/.test(A)?(M/=100,F=""):/(Red|Green|Blue)$/i.test(A)&&(M=M/100*255,F="")),/[\/*]/.test(H))F=Y;else if(Y!==F&&0!==N)if(0===M)F=Y;else{e=e||U();var V=/margin|padding|left|right|width|text|word|letter/i.test(A)||/X$/.test(A)||"x"===A?"x":"y";switch(Y){case"%":N*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:N*=e[Y+"ToPx"]}switch(F){case"%":N*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:N*=1/e[F+"ToPx"]}}switch(H){case"+":M=N+M;break;case"-":M=N-M;break;case"*":M*=N;break;case"/":M=N/M}r[A]={rootPropertyValue:j,startValue:N,currentValue:N,endValue:M,unitType:F,easing:L},d.debug&&console.log("tweensContainer ("+A+"): "+JSON.stringify(r[A]),t)}else d.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.");function q(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,(function(e){return n=e,""})),n||(n=p.Values.getUnitType(e)),[r,n]}function U(){var e={myParent:t.parentNode||document.body,position:p.getPropertyValue(t,"position"),fontSize:p.getPropertyValue(t,"fontSize")},n=e.position===D.lastPosition&&e.myParent===D.lastParent,r=e.fontSize===D.lastFontSize;D.lastParent=e.myParent,D.lastPosition=e.position,D.lastFontSize=e.fontSize;var i=100,o={};if(r&&n)o.emToPx=D.lastEmToPx,o.percentToPxWidth=D.lastPercentToPxWidth,o.percentToPxHeight=D.lastPercentToPxHeight;else{var s=g(t).isSVG?document.createElementNS("http://www.w3.org/2000/svg","rect"):document.createElement("div");d.init(s),e.myParent.appendChild(s),a.each(["overflow","overflowX","overflowY"],(function(e,t){d.CSS.setPropertyValue(s,t,"hidden")})),d.CSS.setPropertyValue(s,"position",e.position),d.CSS.setPropertyValue(s,"fontSize",e.fontSize),d.CSS.setPropertyValue(s,"boxSizing","content-box"),a.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],(function(e,t){d.CSS.setPropertyValue(s,t,"100%")})),d.CSS.setPropertyValue(s,"paddingLeft","100em"),o.percentToPxWidth=D.lastPercentToPxWidth=(parseFloat(p.getPropertyValue(s,"width",null,!0))||1)/i,o.percentToPxHeight=D.lastPercentToPxHeight=(parseFloat(p.getPropertyValue(s,"height",null,!0))||1)/i,o.emToPx=D.lastEmToPx=(parseFloat(p.getPropertyValue(s,"paddingLeft"))||1)/i,e.myParent.removeChild(s)}return null===D.remToPx&&(D.remToPx=parseFloat(p.getPropertyValue(document.body,"fontSize"))||16),null===D.vwToPx&&(D.vwToPx=parseFloat(window.innerWidth)/100,D.vhToPx=parseFloat(window.innerHeight)/100),o.remToPx=D.remToPx,o.vwToPx=D.vwToPx,o.vhToPx=D.vhToPx,d.debug>=1&&console.log("Unit ratios: "+JSON.stringify(o),t),o}}r.element=t}r.element&&(p.Values.addClass(t,"velocity-animating"),R.push(r),""===n.queue&&(g(t).tweensContainer=r,g(t).opts=n),g(t).isAnimating=!0,v===y-1?(d.State.calls.length>1e4&&(d.State.calls=i(d.State.calls)),d.State.calls.push([R,l,n,null,k.resolver]),!1===d.State.isTicking&&(d.State.isTicking=!0,_())):v++)}!1!==d.mock&&(!0===d.mock?n.duration=n.delay=1:(n.duration*=parseFloat(d.mock)||1,n.delay*=parseFloat(d.mock)||1)),n.easing=b(n.easing,n.duration),n.begin&&!s.isFunction(n.begin)&&(n.begin=null),n.progress&&!s.isFunction(n.progress)&&(n.progress=null),n.complete&&!s.isFunction(n.complete)&&(n.complete=null),void 0!==n.display&&null!==n.display&&(n.display=n.display.toString().toLowerCase(),"auto"===n.display&&(n.display=d.CSS.Values.getDisplayType(t))),void 0!==n.visibility&&null!==n.visibility&&(n.visibility=n.visibility.toString().toLowerCase()),n.mobileHA=n.mobileHA&&d.State.isMobile&&!d.State.isGingerbread,!1===n.queue?n.delay?setTimeout(o,n.delay):o():a.queue(t,n.queue,(function(e,t){if(!0===t)return k.promise&&k.resolver(l),!0;d.velocityQueueEntryFlag=!0,o()})),""!==n.queue&&"fx"!==n.queue||"inprogress"===a.queue(t)[0]||a.dequeue(t)}};(d=a.extend(h,d)).animate=h;var m=window.requestAnimationFrame||r;return d.State.isMobile||void 0===document.hidden||document.addEventListener("visibilitychange",(function(){document.hidden?(m=function(e){return setTimeout((function(){e(!0)}),16)},_()):m=window.requestAnimationFrame||r})),e.Velocity=d,e!==window&&(e.fn.velocity=h,e.fn.velocity.defaults=d.defaults),a.each(["Down","Up"],(function(e,t){d.Redirects["slide"+t]=function(e,n,r,i,o,s){var l=a.extend({},n),u=l.begin,c=l.complete,f={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},p={};void 0===l.display&&(l.display="Down"===t?"inline"===d.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){for(var n in u&&u.call(o,o),f){p[n]=e.style[n];var r=d.CSS.getPropertyValue(e,n);f[n]="Down"===t?[r,0]:[0,r]}p.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in p)e.style[t]=p[t];c&&c.call(o,o),s&&s.resolver(o)},d(e,f,l)}})),a.each(["In","Out"],(function(e,t){d.Redirects["fade"+t]=function(e,n,r,i,o,s){var l=a.extend({},n),u={opacity:"In"===t?1:0},c=l.complete;l.complete=r!==i-1?l.begin=null:function(){c&&c.call(o,o),s&&s.resolver(o)},void 0===l.display&&(l.display="In"===t?"auto":"none"),d(this,u,l)}})),d}function g(e){var t=a.data(e,"velocity");return null===t?void 0:t}function y(e){return function(t){return Math.round(t*e)*(1/e)}}function v(e,t,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="Float32Array"in window;if(4!==arguments.length)return!1;for(var d=0;d<4;++d)if("number"!=typeof arguments[d]||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var f=c?new Float32Array(l):new Array(l);function p(e,t){return 1-3*t+3*e}function h(e,t){return 3*t-6*e}function m(e){return 3*e}function g(e,t,n){return((p(t,n)*e+h(t,n))*e+m(t))*e}function y(e,t,n){return 3*p(t,n)*e*e+2*h(t,n)*e+m(t)}function v(t,r){for(var o=0;o<i;++o){var a=y(r,e,n);if(0===a)return r;r-=(g(r,e,n)-t)/a}return r}function b(){for(var t=0;t<l;++t)f[t]=g(t*u,e,n)}function _(t,r,i){var o,l,u=0;do{(o=g(l=r+(i-r)/2,e,n)-t)>0?i=l:r=l}while(Math.abs(o)>a&&++u<s);return l}function w(t){for(var r=0,i=1,a=l-1;i!=a&&f[i]<=t;++i)r+=u;--i;var s=r+(t-f[i])/(f[i+1]-f[i])*u,c=y(s,e,n);return c>=o?v(t,s):0==c?s:_(t,r,r+u)}var E=!1;function S(){E=!0,e==t&&n==r||b()}var x=function(i){return E||S(),e===t&&n===r?i:0===i?0:1===i?1:g(w(i),t,r)};x.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var k="generateBezier("+[e,t,n,r]+")";return x.toString=function(){return k},x}function b(e,t){var n=e;return s.isString(e)?d.Easings[e]||(n=!1):n=s.isArray(e)&&1===e.length?y.apply(null,e):s.isArray(e)&&2===e.length?f.apply(null,e.concat([t])):!(!s.isArray(e)||4!==e.length)&&v.apply(null,e),!1===n&&(n=d.Easings[d.defaults.easing]?d.defaults.easing:c),n}function _(e){if(e)for(var t=(new Date).getTime(),n=0,r=d.State.calls.length;n<r;n++)if(d.State.calls[n]){var i=d.State.calls[n],o=i[0],l=i[2],u=i[3],c=!!u;u||(u=d.State.calls[n][3]=t-16);for(var f=Math.min((t-u)/l.duration,1),h=0,y=o.length;h<y;h++){var v=o[h],b=v.element;if(g(b)){var E=!1;if(void 0!==l.display&&null!==l.display&&"none"!==l.display){if("flex"===l.display){a.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],(function(e,t){p.setPropertyValue(b,"display",t)}))}p.setPropertyValue(b,"display",l.display)}for(var S in void 0!==l.visibility&&"hidden"!==l.visibility&&p.setPropertyValue(b,"visibility",l.visibility),v)if("element"!==S){var x,k=v[S],T=s.isString(k.easing)?d.Easings[k.easing]:k.easing;if(1===f)x=k.endValue;else if(x=k.startValue+(k.endValue-k.startValue)*T(f),!c&&x===k.currentValue)continue;if(k.currentValue=x,p.Hooks.registered[S]){var O=p.Hooks.getRoot(S),C=g(b).rootPropertyValueCache[O];C&&(k.rootPropertyValue=C)}var A=p.setPropertyValue(b,S,k.currentValue+(0===parseFloat(x)?"":k.unitType),k.rootPropertyValue,k.scrollData);p.Hooks.registered[S]&&(p.Normalizations.registered[O]?g(b).rootPropertyValueCache[O]=p.Normalizations.registered[O]("extract",null,A[1]):g(b).rootPropertyValueCache[O]=A[1]),"transform"===A[0]&&(E=!0)}l.mobileHA&&void 0===g(b).transformCache.translate3d&&(g(b).transformCache.translate3d="(0px, 0px, 0px)",E=!0),E&&p.flushTransformCache(b)}}void 0!==l.display&&"none"!==l.display&&(d.State.calls[n][2].display=!1),void 0!==l.visibility&&"hidden"!==l.visibility&&(d.State.calls[n][2].visibility=!1),l.progress&&l.progress.call(i[1],i[1],f,Math.max(0,u+l.duration-t),u),1===f&&w(n)}d.State.isTicking&&m(_)}function w(e,t){if(!d.State.calls[e])return!1;for(var n=d.State.calls[e][0],r=d.State.calls[e][1],i=d.State.calls[e][2],o=d.State.calls[e][4],s=!1,l=0,u=n.length;l<u;l++){var c=n[l].element;if(t||i.loop||("none"===i.display&&p.setPropertyValue(c,"display",i.display),"hidden"===i.visibility&&p.setPropertyValue(c,"visibility",i.visibility)),!0!==i.loop&&(void 0===a.queue(c)[1]||!/\.velocityQueueEntryFlag/i.test(a.queue(c)[1]))&&g(c)){g(c).isAnimating=!1,g(c).rootPropertyValueCache={};var f=!1;a.each(p.Lists.transforms3D,(function(e,t){var n=/^scale/.test(t)?1:0,r=g(c).transformCache[t];void 0!==g(c).transformCache[t]&&new RegExp("^\\("+n+"[^.]").test(r)&&(f=!0,delete g(c).transformCache[t])})),i.mobileHA&&(f=!0,delete g(c).transformCache.translate3d),f&&p.flushTransformCache(c),p.Values.removeClass(c,"velocity-animating")}if(!t&&i.complete&&!i.loop&&l===u-1)try{i.complete.call(r,r)}catch(e){setTimeout((function(){throw e}),1)}o&&!0!==i.loop&&o(r),!0!==i.loop||t||(a.each(g(c).tweensContainer,(function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360)})),d(c,"reverse",{loop:!0,delay:i.delay})),!1!==i.queue&&a.dequeue(c,i.queue)}d.State.calls[e]=!1;for(var h=0,m=d.State.calls.length;h<m;h++)if(!1!==d.State.calls[h]){s=!0;break}!1===s&&(d.State.isTicking=!1,delete d.State.calls,d.State.calls=[])}jQuery.fn.velocity=jQuery.fn.animate}.apply(t,r))||(e.exports=i)},50633:()=>{},7896:(e,t,n)=>{"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:()=>r})},36981:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{Z:()=>i})},31461:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>({704:"bundles/utils/workers/WebAudioRecorderMp3.worker",877:"bundles/ckeditor4/ckeditor"}[e]+".js"),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,o;if(void 0!==n)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=a[s];if(l.getAttribute("src")==e){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.src=e),inProgress[e]=[t];var u=(t,n)=>{i.onerror=i.onload=null,clearTimeout(c);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={335:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[o,a,s]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)s(__webpack_require__)}for(t&&t(n);l<o.length;l++)i=o[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";__webpack_require__(29166)})(),(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{AB_ENDPOINTS:()=>Wn,AB_ENTITY_TYPES:()=>qn,AB_STANDARD_ANCESTOR_TYPES:()=>Kn,AB_STANDARD_FIELDS:()=>Un,AB_STANDARD_TYPES:()=>$n,BROWSER_MODES:()=>Zn,HIERARCHY_PREFIX:()=>Gn,NAME:()=>Vn,OFFSET_KEY:()=>Qn,SEARCH_DEBOUNCE:()=>Jn,SELECT_MODES:()=>zn});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{getAlignableStandardsByCode:()=>ci,getAllStandards:()=>li,getAncestorStandards:()=>di,getAppliedAlignableStandardGuids:()=>bi,getAppliedAlignableStandards:()=>_i,getAreStandardsEnabled:()=>Jr,getAuthorities:()=>ri,getBrowserState:()=>ni,getEntitiesState:()=>ti,getIsABStandardsBrowserOpen:()=>Qr,getIsDirty:()=>wi,getIsFetching:()=>ei,getPublications:()=>ii,getSections:()=>si,getSelectedAlignableStandardGuids:()=>yi,getSelectedAlignableStandards:()=>vi,getSelectedAuthorityGuid:()=>fi,getSelectedPublicationGuid:()=>pi,getSelectedSectionGuid:()=>mi,getSelectedTopicGuid:()=>hi,getStandardSearchCode:()=>gi,getStandards:()=>ui,getTopics:()=>ai,hasNextPage:()=>Xr});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{applyAlignableStandards:()=>Qi,closeBrowser:()=>zi,fetchABEntities:()=>Gi,fetchAlignableStandardsByCode:()=>Ki,fetchStandards:()=>$i,getABEntities:()=>Zi,getAlignableStandardsByCode:()=>ro,getStandards:()=>no,openBrowser:()=>Wi,selectABEntity:()=>Ji,selectAlignableStandards:()=>Xi,setAppliedAlignableStandards:()=>eo,setStandardSearchCode:()=>to});var r=__webpack_require__(29497),i=__webpack_require__.n(r),o=__webpack_require__(7324),a=__webpack_require__.n(o),s=__webpack_require__(82462),l=__webpack_require__.n(s);__webpack_require__(21778),__webpack_require__(24863),__webpack_require__(478),__webpack_require__(66636),__webpack_require__(28129),__webpack_require__(69238),__webpack_require__(77318),__webpack_require__(97525),__webpack_require__(36605),__webpack_require__(19358),__webpack_require__(23805),__webpack_require__(33613),__webpack_require__(24029),__webpack_require__(84330),__webpack_require__(79791),__webpack_require__(86935),__webpack_require__(10836),__webpack_require__(24970),__webpack_require__(55681),__webpack_require__(54712),__webpack_require__(75711),__webpack_require__(6173),__webpack_require__(38147),__webpack_require__(73179),__webpack_require__(58115),__webpack_require__(75153),__webpack_require__(85046),__webpack_require__(38897),__webpack_require__(155),__webpack_require__(63188),__webpack_require__(96880),__webpack_require__(34095),__webpack_require__(90837),__webpack_require__(67759),__webpack_require__(2647),__webpack_require__(613),__webpack_require__(20744),__webpack_require__(85505),__webpack_require__(5528),__webpack_require__(23235),__webpack_require__(48367),__webpack_require__(71250),__webpack_require__(49309),__webpack_require__(53339),__webpack_require__(8129),__webpack_require__(57205),__webpack_require__(81471),__webpack_require__(99234),__webpack_require__(38487),__webpack_require__(28667),__webpack_require__(47457),__webpack_require__(46804),__webpack_require__(52956),__webpack_require__(77182);i().Layout.configure({manage:!0,fetchTemplate:function(e){return function(t){var n;return l().render(e,t,(function(e,t){if(e)throw e;n=t})),n}},renderTemplate:function(e,t){return this.i18n&&(t=a().extend({i18n:this.i18n},t)),e(t)}});var u=i().View.prototype.delegateEvents;i().View.prototype.delegateEvents=function(e){if(!e&&!(e=a().result(this,"events")))return this;var t={};a().each(e,(function(e,n){a().isArray(e)&&3===e.length&&(n=e[0]+" "+e[1],e=e[2]),t[n]=e})),u.call(this,t)},i().View.prototype.dispatch=function(e){e&&this.getContext().app.shell.dispatch(e)},i().View.prototype.getParentView=function(){return this.options&&this.options.parentView||this.__manager__&&this.__manager__.parent||this._getParentView()},i().View.prototype.getContext=function(){a().isFunction(this.spawn)||i().Courier.add(this);var e=this.getParentView();return e?e.getContext():null};const c=i();var d=__webpack_require__(38291),f=__webpack_require__.n(d),p={published:"published",unpublished:"unpublished",archived:"archived"};const h={getValidStatuses:function(){return p},isValid:function(e){return a().contains(p,e)},getStatusesFromStatusQuery:function(e,t){var n=a().values(p);return t&&t.length&&(n=a().intersection(t,n)),a().contains(n,e)?[e]:t&&t.length?n:[p.published,p.unpublished]}};function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=["_validateType","_validateConstraints","_validateMaxLength","_validateRegex","_validateForbidden"];const y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t}var t,n,r;return t=e,(n=[{key:"validate",value:function(e){var t=this,n=null;return g.forEach((function(r){n||(n=t[r](e))})),n}},{key:"getName",value:function(){return this._options.name}},{key:"_validateType",value:function(e){return a().isString(e)?null:"".concat(this._options.name," must be a string")}},{key:"_validateConstraints",value:function(e){if(this._options.constraints&&!a().contains(this._options.constraints,e)){var t=this._options.constraints.join(", ");return"".concat(this._options.name," must be one of (").concat(t,")")}return null}},{key:"_validateMaxLength",value:function(e){var t=this._options;return t.maxLength&&e.length>t.maxLength?"".concat(t.name," must not have more than ").concat(t.maxLength," characters"):null}},{key:"_validateRegex",value:function(e){return this._options.regex&&!this._options.regex.test(e)?"".concat(this._options.name," must not contain invalid characters"):null}},{key:"_validateForbidden",value:function(e){var t=this._options.forbidden;if(t&&t.length){var n=a().isString(e)?e.trim().toLowerCase():e;if(a().contains(t,n))return"".concat(this._options.name,' must not be: "').concat(n,'"')}return null}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=[new y({name:"status",constraints:a().values(h.getValidStatuses())}),new y({name:"reference",maxLength:150,regex:/^[\x20-\x21,\x23-\x26,\x28-\x5F,\x61-\x7E]+$/,forbidden:["new",""]}),new y({name:"title",maxLength:150}),new y({name:"description",maxLength:1e3}),new y({name:"rendering_type",maxLength:1e3})];const _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorUtil=t}var t,n,r;return t=e,(n=[{key:"validateAttribute",value:function(e,t,n){var r=a().find(b,(function(t){return t.getName()===e})).validate(t);return!r||(this.errorUtil.handle({id:this.errorUtil.errorsArray.length,method:n,attribute:e,message:r},!0,!1),!1)}}])&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return"[object Function]"===Object.prototype.toString.call(e)}const S=(k=!1,E(window.Promise)&&E(window.Promise.all)&&E(window.Promise.resolve)&&E(window.Promise.reject)&&E((x=new Promise((function(e,t){e()}))).then)&&E(x.catch)&&(k=!0),k?window.Promise:function(){var e,t,n,r=Object.prototype.toString,i="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(t){e=function(e,t,n){return e[t]=n,e}}function o(e,r){n.add(e,r),t||(t=i(n.drain))}function a(e){var t,n=w(e);return null===e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,n){var r,i;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(new TypeError("Promise-chain cycle")):(i=a(r))?i.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function u(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=a(e))?o((function(){var r=new f(n);try{t.call(e,(function(){u.apply(r,arguments)}),(function(){c.apply(r,arguments)}))}catch(e){c.call(r,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&o(s,n))}catch(e){c.call(new f(n),e)}}}function c(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&o(s,t))}function d(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then((function(e){n(i,e)}),r)}(i)}function f(e){this.def=e,this.triggered=!1}function p(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(e){if("function"!=typeof e)throw new TypeError("Not a function");if(0!==this.__NPO__)throw new TypeError("Not a promise");this.__NPO__=1;var t=new p(this);this.then=function(e,n){var r={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return r.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw new TypeError("Not a function");r.resolve=e,r.reject=t})),t.chain.push(r),0!==t.state&&o(s,t),r.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){u.call(t,e)}),(function(e){c.call(t,e)}))}catch(e){c.call(t,e)}}n=function(){var e,n,r;function i(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,o){r=new i(t,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var r=e;for(e=n=t=void 0;r;)r.fn.call(r.self),r=r.next}}}();var m=e({},"constructor",h,!1);return h.prototype=m,e(m,"__NPO__",0,!1),e(h,"resolve",(function(e){return e&&"object"==w(e)&&1===e.__NPO__?e:new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError("Not a function");t(e)}))})),e(h,"reject",(function(e){return new this((function(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError("Not a function");n(e)}))})),e(h,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(new TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw new TypeError("Not a function");var i=e.length,o=new Array(i),a=0;d(t,e,(function(e,t){o[e]=t,++a===i&&n(o)}),r)}))})),e(h,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(new TypeError("Not an array")):new t((function(n,r){if("function"!=typeof n||"function"!=typeof r)throw new TypeError("Not a function");d(t,e,(function(e,t){n(t)}),r)}))})),h}());var x,k,T=__webpack_require__(31742),O=__webpack_require__.n(T),C=function(e){this.DEFAULTS={highlightTag:"strong",suggestionsLimit:20,tagTypeSuffix:":",endpoint_tagsearch:"/itembank/tagging/tags/search",endpoint_supplementary:"/itembank/tagging/tags"},this.MATCH_PREFIXABLES_PATTERN="(\\s|-|_|:)+",this.config=a().extend({},this.DEFAULTS,e),this.data={},this.comms=e.comms};a().extend(C.prototype,{fetch:function(e){var t={query:e};this.itemBankSettings&&(t.itemBankSettings=this.itemBankSettings);var n={url:a().getNested(this,"config.advanced.url")||this.DEFAULTS.endpoint_tagsearch,action:"get",data:t};this.currentFetch&&delete this.currentFetch;var r=a().bind((function(e,t){this.comms.request(n).done(a().bind((function(t){this.setTags(t),e(this.data.tags),delete this.currentFetch}),this)).fail(a().bind((function(e){t(e),delete this.currentFetch}),this))}),this);return this.currentFetch=new S(r),this.currentFetch},fetchSupplementaryTags:function(){var e={url:a().getNested(this,"config.supplementary.url")||this.DEFAULTS.endpoint_supplementary,action:"get",data:{types:this.config.supplementary.data}},t=a().bind((function(t,n){if(this.data.supplementaryTags)return delete this.currentSupplementaryFetch,t(this.data.supplementaryTags);this.comms.request(e).done(a().bind((function(e){this.setSupplementaryTags(this.config.supplementaryTags,e.data),delete this.currentSupplementaryFetch,t(this.data.supplementaryTags)}),this)).fail(a().bind((function(e){n(e),delete this.currentSupplementaryFetch}),this))}),this);return this.currentSupplementaryFetch=new S(t),this.currentSupplementaryFetch},fetchSuggestions:function(e,t){var n=a().extend({exclude:[]},t);return new S(a().bind((function(r,i){this.fetch(e).then(a().bind((function(){return n.exclude.length&&this.removeSelectedTags(n.exclude),this.initializeSuggestionEngine()}),this),i).then(a().bind((function(n){r(this.getSuggestions(e,n,t))}),this),i)}),this))},getSuggestions:function(e,t,n){var r;return t.get(e,(function(e){r=e})),n.shouldHighlight&&a().each(r,(function(t){this.highlightSuggestion(t,e,n)}),this),{suggestionFor:e,tags:r}},highlightSuggestion:function(e,t,n){var r=n.highlightWith||this.DEFAULTS.highlightTag,i=a().chain(this.tokenize(t)).map((function(e){return e.toLowerCase()})).sortBy((function(e){return e.length})).reverse().uniq(!0).value(),o=["<",r,">$&</",r,">"].join(""),s=this.MATCH_PREFIXABLES_PATTERN,l=function(e){return a().each(i,(function(t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(new RegExp(["(^|",s,")(",t,")"].join(""),"gi"),(function(e){var t=e.replace(new RegExp(["^",s].join("")),"");return t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),e.replace(new RegExp(["(",t,")$"].join("")),o)}))})),e};e.typeHighlighted=l([this.escapeTagChars(e.type),this.config.tagTypeSuffix].join("")),e.nameHighlighted=l(this.escapeTagChars(e.name))},escapeTagChars:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},removeSelectedTags:function(e){a().each(e,(function(e){this.data.tags=a().reject(this.data.tags,(function(t){return e.type===t.type&&e.name===t.name}))}),this)},initializeSuggestionEngine:function(){var e=new(O())({local:this.data.tags,limit:this.config.suggestionsLimit,datumTokenizer:a().bind((function(e){var t=[e.type,this.config.tagTypeSuffix].join(""),n=this.tokenize(t),r=this.tokenize(e.name);var i=n.concat(r),o=[];return a().each(i,(function(e){for(var t=1;t<e.length;)o.push(e.substring(t,e.length)),o.push(e.substring(t,e.length).split("").reverse().join("")),t++})),i.concat(o)}),this),queryTokenizer:this.tokenize});return new S((function(t,n){e.initialize().done((function(){t(e)})).fail(n)}))},setTags:function(e){this.data.tags=e.data},setSupplementaryTags:function(e,t){this.data.supplementaryTags=[],a().each(e,(function(e){a().has(e.tag,"name")?this.data.supplementaryTags.push({type:e.tag.type,label:e.tag.label,values:e.tag.name}):this.data.supplementaryTags.push(this.getUnfilteredSupplementaryTags(e,t))}),this)},getUnfilteredSupplementaryTags:function(e,t){var n={type:e.tag.type,label:e.tag.label,values:[]};return a().each(t,(function(e){e.type===n.type&&n.values.push(e.name)}),this),n},setItemBankSettings:function(e){this.itemBankSettings=e},tokenize:function(){var e=O().tokenizers.whitespace.apply(this,arguments),t=[];return a().isArray(e)&&e.forEach((function(e){if(-1!==e.indexOf(":")){var n=e.split(":",2);t.push(n[0]),""!==n[1]&&t.push(n[1])}else t.push(e)})),t}});const A=C;function P(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D={reference:"",content:"",title:"",referenceOrContent:"",referenceOrDescription:"",titleOrReferenceOrDescription:"",sort:"desc",sort_field:"updated",status:"",tags:{all:[],either:[],exclude:[],defaults:{}},hierarchyReference:null,hierarchyPath:[],supplementaryTags:[],widgetType:"",filteredWorkflowState:null},R=["supplementaryTags","hierarchyPath"],L=["defaults"],N=c.Model.extend({initialize:function(e){this.registerDefaults(),this.set(e)},getKeys:function(e){var t;return a().isFunction(e)?(t=[],a().each(this.attributes,(function(n,r){e(n)&&t.push(r)}))):t=this.keys(),t},getKeysForNestableValues:function(){return this.getKeys(a().isObject)},getKeysForStringValues:function(){return this.getKeys(a().isString)},getKeysForBooleanValues:function(){return this.getKeys(a().isBoolean())},getSimpleKeys:function(){return a().unique([].concat(P(this.getKeysForStringValues()),P(this.getKeysForBooleanValues())))},getKeysForTagsWithValues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0},t=[];return a().each(a().omit(this.get("tags"),"defaults"),(function(n,r){a().filter(n,e).length&&t.push(r)})),t},getLastTag:function(e){return a().last(this.getTags(e))},getTagAfter:function(e,t){var n=this.getTagIndex(e,t);return this.getTags(e)[n+1]},getTagBefore:function(e,t){var n=this.getTagIndex(e,t);return this.getTags(e)[n-1]},getTagIndex:function(e,t){return a().indexOf(this.getAdvancedTags(e),t)},getTags:function(e){return this.get("tags")[e]},getAdvancedTags:function(e){return a().filter(this.get("tags")[e],(function(e){return!a().has(e,"source")}))},getTagSearchTypes:function(){return a().keys(this.get("tags"))},hasSearch:function(e){var t=a().omit(this.attributes,"sort","sort_field","tags"),n=this.attributes.tags;e&&(t=a().omit(t,e));var r=!a().every(a().map(t,a().isEmpty)),i=!a().every(a().map(n,a().isEmpty));return r||i},insertTagAfter:function(e,t,n){var r=this.getTags(e),i=this.getTagIndex(e,t);a().isUndefined(n.source)||(r=a().without(r,a().findWhere(r,{source:n.source,type:n.type}))),r.splice(i+1,0,n),this.setTags(e,r)},isDifferent:function(e){var t=this.toJSON({cleanTags:!0});return!a().isEqual(t,e)},isEmpty:function(){var e,t;return!!a().isEqual(this.attributes,D)||(e=this.getKeysForStringValues(),t=a().filter(e,(function(e){return this.get(e)}),this),!this.getKeysForTagsWithValues().length&&!t.length)},pushTag:function(e,t){var n=this.getTags(e);n.push(t),this.setTags(e,n)},registerDefaults:function(){this.set(a().cloneDeep(D))},reset:function(e){this.registerDefaults(),this.set(e)},removeTag:function(e,t){var n=a().without(this.getTags(e),t);a().has(t,"source")&&this.trigger("remove:tag:"+t.source,t.type),this.setTags(e,n)},removeWorkflowState:function(){this.set("filteredWorkflowState",null)},getHierarchyDefaultByType:function(e,t){var n;return a().isObject(this.get("tags").defaults[t])&&a().isObject(this.get("tags").defaults[t][e])&&(n=this.get("tags").defaults[t][e]),n},removeTagByType:function(e,t){a().each(this.get("tags")[e],(function(n){n.type!==t||a().isUndefined(n.source)||"hierarchy"!==n.source||(this.removeTag("all",n),this.setHierarchyPath(a().without(this.getTags(e),n)))}),this)},mergeExistingTagTypes:function(e,t){var n=this.get("tags")[t],r=[];a().each(n,(function(e){r.push(e.type+":"+e.name)})),a().each(e,(function(e){a().contains(r,e.type+":"+e.name)||n.push(e)})),this.setTags(t,n)},set:function(e,t){"tags"!==e?(a().isObject(e)&&e.tags&&(this.hasHierarchyTags(e.tags)&&(e.browse=this.createHierachyBrowseObject(e.tags.all,e.hierarchyReference),a().isArray(e.tags.all)&&(e.tags.all=this.stripHierarchyTags(e.tags.all))),this.setEachTagsCategory(e.tags),delete e.tags),a().isObject(e)&&e.browse&&(this.setHierarchyReference(e.browse.hierarchy.reference),a().isArray(e.browse.hierarchy.tags)&&(a().isObject(this.get("tags").defaults)&&(this.get("tags").defaults.hierarchy={}),this.mergeExistingTagTypes(this.setTagSource(e.browse.hierarchy.tags,"hierarchy"),"all"),this.processHierarchyDefaults(e.browse.hierarchy.tags)),a().isArray(e.browse.tags)&&(a().isObject(this.get("tags").defaults)&&(this.get("tags").defaults.supplementary={}),this.mergeExistingTagTypes(this.setTagSource(e.browse.tags,"supplementary"),"all"),this.setSupplementaryTags(e.browse.tags,!0)),delete e.browse),c.Model.prototype.set.apply(this,arguments)):this.setEachTagsCategory(t)},processHierarchyDefaults:function(e){a().each(e,(function(e){a().isObject(this.get("tags").defaults)&&(this.get("tags").defaults.hierarchy[e.type]=e),this.trigger("change:hierarchy:default",e.type)}),this)},stripHierarchyTags:function(e){var t=[];return a().each(e,(function(e){a().has(e,"source")||t.push(e)})),t},createHierachyBrowseObject:function(e,t){var n={hierarchy:{reference:t,tags:[]},tags:[]};return a().each(e,(function(e){a().has(e,"source")&&"hierarchy"===e.source&&n.hierarchy.tags.push(e),a().has(e,"source")&&"supplementary"===e.source&&n.tags.push(e)})),n},hasHierarchyTags:function(e){var t,n=!1;if(a().isArray(e.all))for(t=0;t<e.all.length;t++)if(a().has(e.all[t],"source")){n=!0;break}return n},setTagSource:function(e,t){var n=[];return a().each(e,(function(e){n.push(a().extend(e,{source:t}))})),n},setHierarchyReference:function(e){this.set("hierarchyReference",e)},setHierarchyPath:function(e){a().isArray(e)&&this.set("hierarchyPath",e)},setSupplementaryTags:function(e,t){a().isArray(e)&&(this.set("supplementaryTags",e),t&&a().each(e,(function(e){a().isObject(this.get("tags").defaults)&&a().isObject(this.get("tags").defaults.supplementary)&&(this.get("tags").defaults.supplementary[e.type]=e),this.trigger("change:supplementaryTag",e.type)}),this))},addSupplementaryTags:function(e,t){var n=this.get("supplementaryTags");(n=a().without(n,a().findWhere(n,{type:e}))).push({name:t,type:e,source:"supplementary"}),this.setSupplementaryTags(n)},setWorkflowState:function(e){a().isString(e)&&this.set("filteredWorkflowState",e)},removeSupplementaryTags:function(e){var t=this.get("supplementaryTags");t=a().without(t,a().findWhere(t,{type:e})),this.setSupplementaryTags(t)},setEachTagsCategory:function(e){a().each(e,(function(e,t){this.setTags(t,e)}),this)},setTags:function(e,t){this.attributes.tags=this.attributes.tags||{},this.get("tags")[e]=t,this.trigger("change"),this.trigger("change:tags"),this.trigger("change:tags:"+e)},toJSON:function(e){var t=a().extend({cleanTags:!1},e),n=a().cloneDeep(c.Model.prototype.toJSON.call(this));return n=a().pick(n,(function(e){return a().isNotEmpty(e)||a().isBoolean(e)})),(n=a().omit(n,R)).tags=a().omit(n.tags,L),t.cleanTags&&(a().each(n.tags,(function(e,t){a().isEmpty(e)?delete n.tags[t]:n.tags[t]=a().map(e,(function(e){return a().omit(e,["nameHighlighted","typeHighlighted"])}))})),a().isEmpty(n.tags)&&delete n.tags),n},toURIComponent:function(){return JSON.stringify(this.toJSON({cleanTags:!0}))}});N.DEFAULTS=D;const I=N;var j=".lrn.lrn-author",B=800,F=1170,Y=/\$\$|\\\(|\\\)|\\\[|\\\]/g,H="YYYY-MM-DD HH:mm:ss",V=__webpack_require__(19366),q=__webpack_require__.n(V);const U={isRtl:function(){return"rtl"===window.LearnosityAuthor._internal.config.textDirection},getTextDirection:function(){return window.LearnosityAuthor._internal.config.textDirection},getEndDirection:function(){return"rtl"===window.LearnosityAuthor._internal.config.textDirection?"left":"right"}};var W=function(e){e.domElementSelector?this.$el=f()(j).find(e.domElementSelector):this.$el=f()(e.el),this.cid=a().uniqueId(this.ID_PREFIX),this.events={},this.tooltipContent={},this.tooltipStyles={},this.$tooltipped=this.$el.find(this.SELECTORS.tooltipped),this.$tooltipped.attr("tabindex","0"),this.$tooltipped.each(a().bind(this.cacheTooltipContent,this)),this.appendTooltipWrapper(),this.createNamespacedEvents(),this.addListeners()};a().extend(W.prototype,{ANIMATION_DURATION:300,DESCRIBED_BY_ATTR:"data-authorapi-describedby",EVENTS_TO_BE_NAMESPACED:["blur","focus","mouseenter","mouseleave"],ID_PREFIX:"lrn_authorapi_tooltip_",SELECTORS:{tooltipContent:'[data-authorapi-selector="tooltip"]',tooltipped:'[data-authorapi-selector="tooltipped"]'},STYLES:{tooltip:"lrn-tooltip",wrapperOuter:"lrn",wrapperInner:"lrn-author-ui"},addListeners:function(){this.$tooltipped.on(this.events.focus,a().bind(this.onMouseover,this)),this.$tooltipped.on(this.events.blur,a().bind(this.onMouseout,this)),this.$tooltipped.on(this.events.mouseenter,a().bind(this.onMouseover,this)),this.$tooltipped.on(this.events.mouseleave,a().bind(this.onMouseout,this))},appendTooltip:function(e,t){var n,r,i=e.offset(),o=e.innerWidth();this.$wrapper.children().first().empty().append(t),n=t.innerHeight(),r=t.innerWidth(),t.css({opacity:0,top:i.top-n,left:i.left-r/2+o/2})},appendTooltipWrapper:function(){var e='<div class="'+this.STYLES.wrapperOuter+'">';e+='<div class="'+this.STYLES.wrapperInner+'">',e+="</div></div>",this.$wrapper=f()(e),f()("body").append(this.$wrapper)},cacheTooltipContent:function(e,t){var n,r=f()(t),i=r.find(this.SELECTORS.tooltipContent),o=[this.cid,e].join("_");i.length?(n=i.html(),this.tooltipStyles[o]=i.attr("class"),i.remove()):(n=r.attr("title"),r.attr("title","")),r.attr(this.DESCRIBED_BY_ATTR,o),this.tooltipContent[o]=n},cleanup:function(){this.removeListeners(),this.$wrapper&&(this.$wrapper.remove(),this.$wrapper=null),this.$tooltipped=null,this.tooltipContent=null},createNamespacedEvents:function(){a().each(this.EVENTS_TO_BE_NAMESPACED,(function(e){var t=[e,this.cid].join(".");this.events[e]=t}),this)},generateTooltip:function(e){var t=f()("<div/>").attr("role","tooltip").attr("id",e).addClass(this.STYLES.tooltip).addClass(this.tooltipStyles[e]).html(this.tooltipContent[e]);return U.isRtl()&&t.attr("dir","rtl"),t},onMouseout:function(e){var t=f()(e.currentTarget),n=t.attr(this.DESCRIBED_BY_ATTR),r=f()("#"+n);t.attr("aria-describedby",""),this.removeTooltip(r)},onMouseover:function(e){var t=f()(e.currentTarget),n=t.attr(this.DESCRIBED_BY_ATTR),r=f()("#"+n);r&&r.is(":visible")||(r=this.generateTooltip(n),this.appendTooltip(t,r),this.showTooltip(r),t.attr("aria-describedby",n))},removeListeners:function(){this.$tooltipped&&a().each(this.events,(function(e){this.$tooltipped.off(e)}),this)},removeTooltip:function(e){e.velocity("reverse",{display:"none"})},showTooltip:function(e){e.velocity({opacity:1},{display:"block",duration:this.ANIMATION_DURATION})}});const z=W;var G=__webpack_require__(20394),$=__webpack_require__.n(G);__webpack_require__(89031);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var i=te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(o,e);var t,n,r,i=X(o);function o(){return Z(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"STYLES",get:function(){return{modifiedTooltipVisible:"lrn-tooltip-visible",activeItem:"lrn-list-view-item-active"}}},{key:"events",get:function(){return[["click",this.SELECTORS.flyoutToggle.tags,a().partial(this.toggleFlyout,"tags")]]}},{key:"SELECTORS",get:function(){return{dateType:'[data-authorapi-datetime-type="livestamp"]'}}},{key:"MAX_DISPLAY_NUMBER",get:function(){return{TAGS:3}}},{key:"ANIMATIONS",get:function(){return{flyoutWidth:{tags:"80%",questions:"30%"}}}},{key:"NUM_TAGS_COLUMNS",get:function(){return 3}},{key:"IDEAL_TAG_COUNT_PER_COLUMN",get:function(){return 5}},{key:"flyoutActiveMessage",get:function(){throw new Error("This is an abstract method, it needs to be overwritten.")}},{key:"flyoutInactiveMessage",get:function(){throw new Error("This is an abstract method, it needs to be overwritten.")}},{key:"applyLivestamp",value:function(e,t,n){-t.diff($().utc(),"hours")<=24?e.livestamp(e.attr("datetime")):e.text(t.format(n))}},{key:"formatTime",value:function(e,t){var n=f()(t),r=n.attr("datetime"),i=$().utc(r,H).local(),o=this.i18n.get("toolTipDateFormat");n.attr("datetime",i.format(H)),n.data("authorapi-selector","local-time"),"livestamp"===n.data("authorapi-datetime-type")?this.applyLivestamp(n,i,o):this.formatTooltip(n,i,o)}},{key:"formatTooltip",value:function(e,t,n){var r="";""!==this.i18n.get("toolTipDateTimeSeparator")&&(r="["+this.i18n.get("toolTipDateTimeSeparator")+"] ");var i=n+" "+r+this.i18n.get("toolTipTimeFormat");e.html(t.format(i))}},{key:"toggleFlyout",value:function(e,t){this.showingFlyout?this.closeTagsFlyout(t,!0):(this.showingFlyout=this.$(this.SELECTORS.flyout[e]).velocity({opacity:1,width:this.ANIMATIONS.flyoutWidth[e]},{display:"block",duration:450,easing:[.75,-.23,.3,1.08]}),this.$el.addClass(this.STYLES.activeItem),this.spawn(this.flyoutActiveMessage),f()(document).on("mousedown touchstart",this.closeTagsFlyout))}},{key:"closeTagsFlyout",value:function(e,t){var n=this.showingFlyout.is(e.target)||this.showingFlyout.find(e.target).length;!t&&n||(this.showingFlyout.velocity("reverse",{display:"none"}),this.$el.removeClass(this.STYLES.activeItem),this.spawn(this.flyoutInactiveMessage),this.showingFlyout=void 0,f()(document).off("mousedown touchstart",this.closeTagsFlyout))}},{key:"getUserNameArray",value:function(e){var t={};return a().each(e,(function(e,n){a().isString(e)&&(t[n]=e.trim())})),t.first_name||t.surname?[t.first_name,t.surname]:t.email?t.email:t.id}},{key:"getUserName",value:function(e){var t;return"created"===this.searchModel.get("sort_field")&&a().isObject(e.created_by)?t=this.getUserNameArray(e.created_by):a().isObject(e.last_updated_by)&&(t=this.getUserNameArray(e.last_updated_by)),a().isArray(t)&&2===t.length&&(t=t.join(" ")),t||(t="Manual User"),t.trim()}}])&&J(t.prototype,n),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(){return(le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ue(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function ue(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(o,e);var t,n,r,i=de(o);function o(){return ae(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return a().extend(le(pe(o.prototype),"SELECTORS",this),{selectItem:'[data-authorapi-selector="select-item"]',selectItemInput:'[data-authorapi-selector="select-item-input"]',selectItemCheckboxSpan:".lrn-check-box-span",openItem:'[data-authorapi-selector="open-item"]',utcTime:'[data-authorapi-selector="utc-time"]',flyout:{tags:'[data-authorapi-selector="tags-flyout"]',questions:'[data-authorapi-selector="questions-flyout"]'},flyoutToggle:{tags:'[data-authorapi-selector="item-tags-toggle"]',questions:'[data-authorapi-selector="item-questions-toggle"]'}})}},{key:"template",get:function(){return"itemList/item"}},{key:"isShowingTags",get:function(){return!1}},{key:"unassignedWorkflowState",get:function(){return"unassigned"}},{key:"isShowingQuestions",get:function(){return!1}},{key:"MAX_DISPLAY_NUMBER",get:function(){return a().extend(le(pe(o.prototype),"MAX_DISPLAY_NUMBER",this),{QUESTIONS:2})}},{key:"FEATURE_LABEL_BASE",get:function(){return"featureTooltip"}},{key:"events",get:function(){return[].concat(ie(le(pe(o.prototype),"events",this)),[["click",this.SELECTORS.flyoutToggle.tags,a().partial(this.toggleFlyout,"tags")],["click",this.SELECTORS.flyoutToggle.questions,a().partial(this.toggleFlyout,"questions")],["click",this.SELECTORS.openItem,"openItem"],["click",this.SELECTORS.selectItem,"handleSelectItemClick"]])}},{key:"flyoutActiveMessage",get:function(){return"itemActive"}},{key:"flyoutInactiveMessage",get:function(){return"itemInactive"}},{key:"initialize",value:function(){c.Courier.add(this),this.tagsFlyoutIsHidden=!0,this.questionsFlyoutIsHidden=!0,this.closeTagsFlyout=a().bind(this.closeTagsFlyout,this),""!==this.i18n.get("dateTimeLocale")&&$().locale(this.i18n.get("dateTimeLocale"))}},{key:"afterRender",value:function(){this.$(this.SELECTORS.utcTime).each(a().bind(this.formatTime,this))}},{key:"serialize",value:function(){var e,t,n=this,r=this.model.toJSON().item,i=this.model.getFormattedTags({splitInto:this.NUM_TAGS_COLUMNS,idealCountPerSplit:this.IDEAL_TAG_COUNT_PER_COLUMN}),o=this.model.getFormattedTags();this.model.tagHelper.isTagsFormatV2(o)||(o=this.model.tagHelper.convertTagsV1toV2(o),i=i.map((function(e){return n.model.tagHelper.convertTagsV1toV2(e)})));var s=this.getContext(),l=s.abAlignedTagTypeUtil;if(s.app.initOptionsModel.getABStandardsConfig().enable&&(o=l.filterNonABTags(o),i=i.map((function(e){return l.filterNonABTags(e)}))),r.tags=o,r.tagsCount=o.length,r.display_content=r.display_content?r.display_content.replace(Y,""):" ",this.isShowingQuestions||(e=r.questions.length)>this.MAX_DISPLAY_NUMBER.QUESTIONS&&(r.allQuestions=r.questions,r.questions=r.questions.slice(0,this.MAX_DISPLAY_NUMBER.QUESTIONS),r.exceedQuestions=e-this.MAX_DISPLAY_NUMBER.QUESTIONS),this.isShowingTags||((t=r.tags.length)>this.MAX_DISPLAY_NUMBER.TAGS?(r.tags=r.tags.slice(0,this.MAX_DISPLAY_NUMBER.TAGS),r.exceedTags=t-this.MAX_DISPLAY_NUMBER.TAGS):t>=1?r.exceedTag=1:0===t&&(r.noTags=!0)),r.tagColumns={},a().times(i.length,(function(e){r.tagColumns["column"+(e+1)]=i[e]})),r.config=this.options.config,r.config&&r.config.url&&(r.href=r.config.url.replace(/:reference/g,window.encodeURIComponent(r.reference))),"updated"===this.searchModel.get("sort_field")?(r.utcDatetime=r.dt_updated,r.labelUpdated=!0):(r.utcDatetime=r.dt_created,r.labelUpdated=!1),r.user_name=this.getUserName(r),r.status={value:this.model.get("status"),label:this.i18n.getStatusLabel(this.model.get("status"))},this.workflow){var u=a().getNested(this.model.attributes,"authoring_workflow.state");if(u&&u!==this.unassignedWorkflowState){var c=a().findWhere(this.workflow.workflow_states,{reference:u}),d=this.i18n.getLabelIgnoreCase("workflowState".concat(u));r.workflowState=d||c&&c.label||""}else r.workflowState=this.i18n.get("workflowUnassigned")}r.showTitle=a().getNested(this.options,"config.title.show"),r.showReference=r.showTitle&&a().getNested(this.options,"config.title.show_reference");var f=r.showTitle&&r.title?r.title:this.i18n.get("itemListUntitledItem");return r.itemName=r.showTitle?f:r.reference,r.itemReferenceTooltip=this.i18n.get("itemListReferenceTooltip"),r.selectEnabled=this.itemSelectEnabled,r.selected=this.selected,r.features.length&&(r.features=this.mapFeatureLabels(r.features)),r}},{key:"mapFeatureLabels",value:function(e){var t=this;return a().map(e,(function(e){return a().extend(e,{name:t.i18n.getFeatureTooltip(e.type)?t.i18n.getFeatureTooltip(e.type):e.name})}),this)}},{key:"openItem",value:function(e){(e.shiftKey||e.ctrlKey||e.metaKey)&&e.currentTarget.href||(e.preventDefault(),this.spawn("openItem",this.model))}},{key:"handleSelectItemClick",value:function(){var e=!this.$(this.SELECTORS.selectItemInput).prop("checked");this.updateSelectBox(e)}},{key:"setSelectBox",value:function(e){this.$(this.SELECTORS.selectItemInput).prop("checked",e)}},{key:"updateSelectBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setSelectBox(e);var n=this.$(this.SELECTORS.selectItemCheckboxSpan);e?n.css("color","white"):n.css("color",""),t||this.spawn("itemSelectChange",{item:this.model,checked:e})}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(ne);const me=function(e,t,n){return n=n||"",f()(e).find(":contains("+n+")").addBack().contents().filter((function(){if(this.nodeType===Node.TEXT_NODE)return this.textContent.match(t)}))},ge=function(e){setTimeout((function(){var t=f()(e),n=/{{var:([a-z0-9 _]+)}}/gi,r=".lrn-mq-var-container",i="[mathquill-command-id]",o=".mq-root-block",a=".lrn-qe-dyn-var",s=".lrn-author-dyn-var",l=me(t,n,"{{");l.each((function(e,t){var r=document.createElement("span");r.innerHTML=t.textContent.replace(n,'<span class="lrn-author-dyn-var"><marker class="lrn-i-dynamic-data"></marker><content>$1</content></span>'),t.parentNode.replaceChild(r,t)})),(l=t.find(r)).each((function(e,t){t=f()(t);var n="",r=t.find(i);if(0===r.length&&(r=t.find(o)),r.each((function(e,t){n+=t.textContent})),!t.find(a).length&&!t.find(s).length){var l=document.createElement("span");l.innerHTML='<span class="lrn-author-dyn-var"><marker class="lrn-i-dynamic-data"></marker><content>'+n+"</content></span>",t.empty(),t.append(l)}}))}),1e3)};function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var i=Se(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(o,e);var t,n,r,i=we(o);function o(){return ve(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{itemList:'[data-authorapi-view="item-list"]'}}},{key:"STYLES",get:function(){return{listOverlay:"lrn-list-view-overlay",listLoading:"lrn-list-view-loading",listLoaded:"lrn-list-view-loaded",listInitialLoad:"lrn-list-view-initial-load"}}},{key:"template",get:function(){return"itemList/items"}},{key:"onMessages",get:function(){return{itemActive:"showOverlay",itemInactive:"hideOverlay",itemSelectChange:"onItemSelectChange"}}},{key:"passMessages",get:function(){return{openItem:"."}}},{key:"selectedItems",get:function(){return this._selectedItems},set:function(e){e&&(this._selectedItems=e,this.reorderable&&this.reorderable.updateReferences(this.selectedItems))}},{key:"initialize",value:function(e){c.Courier.add(this),this.items=[],this.itemViews=[],this.firstLoad=!0,this.metricsUtil=e.metricsUtil,this.selectedItems=[],this._referenceIsEqual=a().bind(this._referenceIsEqual,this)}},{key:"afterRender",value:function(){this.firstLoad&&this.$el.addClass(this.STYLES.listInitialLoad),this.$el.addClass(this.STYLES.listLoaded),ge(".lrn-list-view")}},{key:"addItemView",value:function(e){this.referenceToCompare=e.get("reference");var t=!!a().find(this.selectedItems,this._referenceIsEqual),n=new he({el:!1,config:this.options.config.item,model:e,searchModel:this.searchModel,i18n:this.i18n,metricsUtil:this.metricsUtil,itemSelectEnabled:this.itemSelectEnabled,workflow:this.workflow,selected:t});this.itemViews.push(n),this.insertView(this.SELECTORS.itemList,n)}},{key:"cleanup",value:function(){c.Layout.cleanViews(this.itemViews),this.itemViews=[],this.tooltipUtil&&this.tooltipUtil.cleanup()}},{key:"remove",value:function(){this.cleanup(),c.Layout.prototype.remove.call(this)}},{key:"renderItems",value:function(e){return this.items=e,this.hasError=!1,this.firstLoad&&(this.$el.removeClass(this.STYLES.listInitialLoad),delete this.firstLoad),this.activityEditMode&&a().each(this.items,(function(e){e.unset("addedToActivity")})),this.$el.removeClass(this.STYLES.listLoading),this.hideOverlay(),this.cleanup(),a().each(this.items,this.addItemView,this),this.render(),this.tooltipUtil=new z({el:this.el}),this}},{key:"renderError",value:function(){return this.items=[],this.hasError=!0,this.firstLoad&&(this.$el.removeClass(this.STYLES.listInitialLoad),delete this.firstLoad),this.$el.removeClass(this.STYLES.listLoading),this.hideOverlay(),this.cleanup(),this.render(),this}},{key:"serialize",value:function(){return{hasItems:!!this.items.length||this.firstLoad,hasCustomEmptyStateImage:!!this.i18n.get("itemListEmptyStateImageURL"),hasError:this.hasError}}},{key:"showLoader",value:function(){return this.$el.addClass(this.STYLES.listLoading),this.$el.removeClass(this.STYLES.listLoaded),this.showOverlay(),this}},{key:"showOverlay",value:function(){this.$(this.SELECTORS.itemList).addClass(this.STYLES.listOverlay)}},{key:"hideOverlay",value:function(){this.$(this.SELECTORS.itemList).removeClass(this.STYLES.listOverlay)}},{key:"fireSelectedItemsChanged",value:function(){this.spawn("selectedItemsChanged")}},{key:"clearSelectedItemReferences",value:function(){return 0!==this.selectedItems.length&&(this.itemViews.forEach((function(e){e.updateSelectBox(!1,!0)})),this.selectedItems=[],this.fireSelectedItemsChanged(),!0)}},{key:"onItemSelectChange",value:function(e){this.referenceToCompare=e.item.get("reference"),e.checked?a().find(this.selectedItems,this._referenceIsEqual)||this.selectedItems.push(e.item):this.selectedItems=a().reject(this.selectedItems,this._referenceIsEqual),this.fireSelectedItemsChanged()}},{key:"_referenceIsEqual",value:function(e){return this.referenceToCompare===e.get("reference")}}])&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.Layout);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var i=Me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(o,e);var t,n,r,i=Ae(o);function o(){return Te(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"USES_LEGACY_PAGINATE",get:function(){return!1}},{key:"ANIMATION_DURATION",get:function(){return 150}},{key:"STYLES",get:function(){return{sortDropdownActive:"lrn-active"}}},{key:"CLASSES",get:function(){return{hide:"lrn-hide"}}},{key:"SELECTORS",get:function(){return{sortButton:'[data-authorapi-selector="sort-order-toggle"]',sortDropdownPanel:'[data-authorapi-selector="sort-order-panel"]',sortInputs:'[data-authorapi-selector="sort-order"]'}}},{key:"events",get:function(){return{'click [data-authorapi-selector="pagination-next"]':"getNext",'click [data-authorapi-selector="pagination-previous"]':"getPrevious",'change [data-authorapi-selector="sort-order"]':"sort",'click [data-authorapi-selector="sort-order-toggle"]':"toggleSortDropdown",'click [data-authorapi-selector="display-total"]':"displayTotal"}}},{key:"template",get:function(){return"shared/pagination"}},{key:"initialize",value:function(e){var t=e.pageMetadata,n=e.searchModel,r=e.config;c.Courier.add(this),this.templateData={shouldShowSort:r&&r.showSort,fetchingTotal:!1},this.searchModel=n,this.setPageMetadata(t),this.jQNamespace=this.NAMESPACE+"_"+this.cid}},{key:"beforeRender",value:function(){this.shouldRestoreSortButtonFocus=this.getSortButton().is(":focus")}},{key:"afterRender",value:function(){this.templateData.isNextLoading=!1,this.templateData.isPreviousLoading=!1,this.searchModel&&this.$(this.getSortSelector()).prop("checked",!0),this.shouldRestoreSortButtonFocus&&(this.getSortButton().focus(),delete this.shouldRestoreSortButtonFocus)}},{key:"getNext",value:function(){this.spawn("getNext")}},{key:"getPrevious",value:function(){this.spawn("getPrevious")}},{key:"getSortSelector",value:function(){return this.SELECTORS.sortInputs+'[value="'+this.searchModel.get("sort_field")+'"][data-authorapi-sort-direction="'+this.searchModel.get("sort")+'"]'}},{key:"getSortButton",value:function(){return this.$(this.SELECTORS.sortButton)}},{key:"hideSortPanel",value:function(){var e=this.$(this.SELECTORS.sortDropdownPanel),t=this.getSortButton();e.velocity({opacity:0,marginTop:0},{display:"none",duration:this.ANIMATION_DURATION}),f()(document).off("click."+this.jQNamespace),t.focus()}},{key:"remove",value:function(){f()(document).off("click."+this.jQNamespace),c.View.prototype.remove.call(this)}},{key:"setPageMetadata",value:function(e){a().extend(this.templateData,e),a().isUndefined(this.templateData.total)||(this.templateData.fetchingTotal=!1)}},{key:"renderWithPageMetadata",value:function(e){this.setPageMetadata(e),this.render()}},{key:"showNextLoader",value:function(e){this.setPageMetadata(e),this.templateData.isNextLoading=!0,this.render()}},{key:"showPreviousLoader",value:function(e){this.setPageMetadata(e),this.templateData.isPreviousLoading=!0,this.render()}},{key:"showSortPanel",value:function(e){e&&e.stopPropagation();var t=this.$(this.SELECTORS.sortDropdownPanel);t.velocity({opacity:1,marginTop:".25em"},{display:"block",duration:this.ANIMATION_DURATION}),f()(document).on("click."+this.jQNamespace,a().bind((function(e){f()(e.target).closest(this.SELECTORS.sortDropdownPanel)[0]!==t[0]&&this.toggleSortDropdown()}),this))}},{key:"sort",value:function(e){var t=this.$(e.target).prop("checked");this.$(this.SELECTORS.sortInputs).prop("checked",!1),this.$(e.target).prop("checked",!0),t&&this.searchModel&&this.searchModel.set({sort_field:this.$(e.target).val(),sort:this.$(e.target).data("authorapi-sort-direction")}),this.hideSortPanel(),t&&this.spawn(this.searchEntitiesMessage,{changedSort:t})}},{key:"toggleSortDropdown",value:function(e){var t=this.getSortButton(),n=this.$(this.SELECTORS.sortDropdownPanel);t.toggleClass(this.STYLES.sortDropdownActive),n.velocity("stop"),t.hasClass(this.STYLES.sortDropdownActive)?this.showSortPanel(e):this.hideSortPanel()}},{key:"displayTotal",value:function(){this.spawn("displayTotal"),this.templateData.fetchingTotal=!0,this.render()}},{key:"serialize",value:function(){var e=this.templateData,t=a().getNested(this.config,"title.show"),n=this.templateData.fetchingTotal?"":this.CLASSES.hide;return a().extend({},e,{isLoading:(e.isNextLoading||e.isPreviousLoading)&&this.USES_LEGACY_PAGINATE,shouldDisablePrevious:!e.hasPrevious||e.isPreviousLoading,shouldDisableNext:!e.hasNext||e.isNextLoading,showTitle:t,sortAtoZField:t?"title":"reference",shouldShowTotal:!a().isUndefined(e.total),shouldShowNextSpinner:e.isNextLoading&&!this.USES_LEGACY_PAGINATE,extraClasses:n})}}])&&Oe(t.prototype,n),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fe(e);if(t){var i=Fe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(o,e);var t,n,r,i=je(o);function o(){return Le(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"searchEntitiesMessage",get:function(){return"searchItems"}}])&&Ne(t.prototype,n),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(De);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(){return(Ue="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=We(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function We(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ke(e)););return e}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var i=Ke(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){if(t&&("object"===He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}(o,e);var t,n,r,i=Ge(o);function o(){return Ve(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"template",get:function(){return"itemList/toolbar/hierarchyTagSpinner"}},{key:"defaultDelay",get:function(){return 300}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ue(Ke(o.prototype),"initialize",this).call(this,e),this.delay=e.delay||this.defaultDelay,this._state="hidden"}},{key:"afterRender",value:function(){return"visible"===this._state?this.el.style.display="":this.el.style.display="none",this}},{key:"show",value:function(){var e=this;return"hidden"===this._state&&(this._state="waiting",setTimeout((function(){"waiting"===e._state&&(e._state="visible",e.render())}),this.delay)),this}},{key:"hide",value:function(){return this._state="hidden",this.render()}}])&&qe(t.prototype,n),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);const Je=c.View.extend({FADE_IN_DURATION:0,FADE_OUT_DURATION:150,NAMESPACE:"lrn_author",STYLES:{dropdownActive:"lrn-active"},events:{'click [data-authorapi-selector="dropdown-button"]':"togglePanel",'click [data-authorapi-selector="dropdown-option"]':"selectOption"},SELECTORS:{dropdownButton:'[data-authorapi-selector="dropdown-button"]',dropdownButtonText:'[data-authorapi-selector="dropdown-button"] span:first-child',dropdownPanel:'[data-authorapi-selector="dropdown-panel"]',dropdownOption:'[data-authorapi-selector="dropdown-option"]'},template:"shared/dropdown",initialize:function(e){c.Courier.add(this),this.selectOptions=e.selectOptions,this.handleDefaultSelection();var t=this.findSelected();this.initialButtonText=t?t.title:"",this.jQNamespace=this.NAMESPACE+"_"+this.cid},setSelected:function(e){a().each(this.selectOptions,(function(t){t.selected=t.value===e})),this.handleDefaultSelection();var t=this.findSelected();if(t){var n=t.title,r=t.value;this.$(this.SELECTORS.dropdownButtonText).text(n),this.$(this.SELECTORS.dropdownOption).prop("checked",!1),this.$(this.SELECTORS.dropdownOption+'[value="'+r+'"]').prop("checked",!0)}},togglePanel:function(){var e=this.$(this.SELECTORS.dropdownButton),t=this.$(this.SELECTORS.dropdownPanel);e.toggleClass(this.STYLES.dropdownActive),t.velocity("stop"),e.hasClass(this.STYLES.dropdownActive)?this.showPanel():this.hidePanel()},showPanel:function(){var e=this,t=this.$(this.SELECTORS.dropdownPanel),n=this.$(this.SELECTORS.dropdownButton);q().animate(t[0],{opacity:1},{display:"block",duration:this.FADE_IN_DURATION}).then((function(){if(e.findSelected()){var t=e.findSelected().value;e.$(e.SELECTORS.dropdownOption+'[value="'+t+'"]').focus()}})),f()(document).on("keyup."+this.jQNamespace,(function(t){27===t.keyCode&&e.togglePanel()})),f()(document).on("click."+this.jQNamespace,(function(r){var i=f()(r.target).closest(e.SELECTORS.dropdownPanel)[0],o=f()(r.target).closest(e.SELECTORS.dropdownButton)[0],a=t[0],s=n[0];i!==a&&o!==s&&e.togglePanel()}))},hidePanel:function(){var e=this.$(this.SELECTORS.dropdownPanel);this.$(this.SELECTORS.dropdownButton).focus(),e.velocity({opacity:0},{display:"none",duration:this.FADE_OUT_DURATION}),f()(document).off("click."+this.jQNamespace),f()(document).off("keyup."+this.jQNamespace)},selectOption:function(e){var t=this.$(e.target).prop("value");this.setSelected(t),this.togglePanel(),this.callback(t)},findSelected:function(){return a().find(this.selectOptions,{selected:!0})},handleDefaultSelection:function(){!this.findSelected()&&this.selectOptions.length&&(this.selectOptions[0].selected=!0)},serialize:function(){return{selectOptions:this.selectOptions,initialButtonText:this.initialButtonText}}});var Qe=c.View.extend({SELECTORS:{nextLevelWrapper:'[data-authorapi-selector="hierarchy-tags-wrapper"]',spinner:'[data-authorapi-selector="hierarchy-tags-spinner"]',dropdownWrapper:'[data-authorapi-selector="dropdown-wrapper"]'},onMessages:{removeTag:"removeTag"},template:"itemList/toolbar/hierarchyTagSelect",initialize:function(e){var t=this;c.Courier.add(this),this.tags=e.tags,this.tagType=a().size(this.tags)>0?this.tags[0].type:"",this.path=e.path,this.hierarchyReference=e.hierarchyReference,this.dataManager=e.dataManager,this.selected=e.selected,this.listenTo(this.model,"remove:tag:hierarchy",this.removeSelected),this.listenTo(this.model,"change:hierarchy:default",this.changeHierarchyTagDefault),this.spinner=new Ze,a().isObject(this.selected)&&this.changeHierarchyTag(this.selected.name),this.dropdownView=new Je({selectOptions:this.getSelectOptions(this.tags),callback:function(e){return t.changeHierarchyTag(e)}})},getSelectOptions:function(e){var t=[];return t.push({value:"",title:"--",description:"",selected:!1}),a().each(e,(function(e){t.push({value:e.name,title:e.name,description:e.description?e.description:"",selected:!!e.selected})})),t},afterRender:function(){this.$(this.SELECTORS.dropdownWrapper)[0].appendChild(this.dropdownView.el),this.dropdownView.render(),this.insertView(this.SELECTORS.spinner,this.spinner).render()},cleanup:function(){this.tag&&this.model.removeTag("all",this.tag)},removeSelected:function(e){e===this.tagType&&(this.dropdownView.setSelected(""),this.removeView(this.SELECTORS.nextLevelWrapper))},renderNextTagType:function(e,t){var n=this.model.getHierarchyDefaultByType([t[0].type],"hierarchy"),r=new Qe({model:this.model,dataManager:this.dataManager,path:e,hierarchyReference:this.hierarchyReference,tags:t,selected:n});this.setView(this.SELECTORS.nextLevelWrapper,r).render()},changeHierarchyTagDefault:function(e){e===this.tagType&&(this.selected=this.model.get("tags").defaults.hierarchy[this.tagType],this.selected&&this.changeHierarchyTag(this.selected.name))},changeHierarchyTag:function(e){var t=this;if(a().isEmpty(e))return this.removeView(this.SELECTORS.nextLevelWrapper),this.model.removeTag("all",this.lastSelected),void this.model.setHierarchyPath(a().clone(this.path));this.model.get("tags").defaults.hierarchy={};var n=a().find(this.tags,(function(t){return t.name===e})),r=a().clone(this.path);r.push(n),this.model.setHierarchyPath(r),this.tag=a().extend(n,{source:"hierarchy"}),this.model.insertTagAfter("all",0,a().extend(this.tag)),this.removeView(this.SELECTORS.nextLevelWrapper),this.spinner.show(),this.dataManager.getHierarchyNodes({reference:this.hierarchyReference,path:r}).then((function(e){var n=e.data;a().isUndefined(t.selected)||(t.dropdownView.setSelected(t.selected.name),delete t.selected),a().size(n)>0&&t.renderNextTagType(r,n),t.spinner.hide()}),(function(){t.spinner.hide()})),this.lastSelected=n},serialize:function(){return{type:this.tagType,viewId:this.cid,path:this.path}}});const Xe=Qe,et=c.View.extend({SELECTORS:{tagsWrapper:'[data-authorapi-selector="hierarchy-tags-wrapper"]',spinner:'[data-authorapi-selector="hierarchy-tags-spinner"]',hierarchyDropdownWrapper:'[data-authorapi-selector="hierarchy-dropdown-wrapper"]'},template:"itemList/toolbar/hierarchySelect",initialize:function(e){var t=this;c.Courier.add(this),this.hierarchies=a().filter(this.hierarchies,(function(e){return!1!==e.enable})),this.dataManager=e.dataManager,e.model.on("change:hierarchyReference",this.changeHierarchy,this),this.spinner=new Ze,a().isNull(e.model.get("hierarchyReference"))||this.changeHierarchy(),this.dropdownView=new Je({selectOptions:this.getSelectOptions(this.hierarchies),callback:function(e){return t.model.setHierarchyReference(e)}})},getSelectOptions:function(e){var t=[];return e.length>1&&t.push({value:"",title:this.i18n.get("labelAllItems"),description:"",selected:!1}),a().each(e,(function(e){t.push({value:e.reference,title:e.label?e.label:e.reference,selected:!!e.default})})),t},afterRender:function(){var e;1===a().size(this.hierarchies)&&(e=this.hierarchies[0].reference,this.fetchHierarchy(e)),this.insertView(this.SELECTORS.spinner,this.spinner).render(),this.$(this.SELECTORS.hierarchyDropdownWrapper)[0].appendChild(this.dropdownView.el),this.dropdownView.render()},renderTags:function(e,t){var n=this.model.getHierarchyDefaultByType([t[0].type],"hierarchy"),r=new Xe({model:this.model,dataManager:this.dataManager,path:[],hierarchyReference:e,tags:t,selected:n,i18n:this.i18n});this.setView(this.SELECTORS.tagsWrapper,r).render()},fetchHierarchy:function(e){var t=this,n=this.dataManager.comms.errorUtil;this.removeView(this.SELECTORS.tagsWrapper),this.spinner.show(),this.dataManager.getHierarchyNodes({reference:e}).then((function(r){var i=r.data;a().size(i)>0?t.renderTags(e,i):n.handle({id:65101,method:"fetchHierarchy",message:"Tag hierarchy with reference "+e+" not found."},!0,!1),t.spinner.hide()}),(function(){t.spinner.hide()}))},changeHierarchy:function(){var e=this.model.get("hierarchyReference");a().isEmpty(e)?this.removeView(this.SELECTORS.tagsWrapper):this.fetchHierarchy(e)},serialize:function(){return{viewId:this.cid}}});const tt=c.View.extend({SELECTORS:{dropdownWrapper:'[data-authorapi-selector="dropdown-wrapper"]'},template:"itemList/toolbar/supplementaryTagSelect",initialize:function(e){var t=this;c.Courier.add(this),this.tag=e.tag,this.selected=e.selected,e.model.on("change:supplementaryTag",this.selectDefault,this),this.listenTo(this.model,"remove:tag:supplementary",this.removeSelected),this.dropdownView=new Je({selectOptions:this.getSelectOptions(this.tag.name,this.selected),callback:function(e){return t.selectTag(e)}})},getSelectOptions:function(e,t){var n=[],r=t&&t.name?t.name:null;return n.push({value:"",title:"--",description:"",selected:!1}),a().each(e,(function(e){n.push({value:e,title:e,description:"",selected:r===e})})),n},afterRender:function(){this.$(this.SELECTORS.dropdownWrapper)[0].appendChild(this.dropdownView.el),this.dropdownView.render()},removeSelected:function(e){e===this.tag.type&&this.dropdownView.setSelected("")},selectTag:function(e){var t;if(a().isEmpty(e))return this.model.removeTag("all",this.lastSelected),void this.model.removeSupplementaryTags(this.tag.type);t={name:e,source:"supplementary",type:this.tag.type},this.model.insertTagAfter("all",0,t),this.model.addSupplementaryTags(this.tag.type,e),this.lastSelected=t},selectDefault:function(e){if(e===this.tag.type){var t=a().findWhere(this.model.get("supplementaryTags"),{type:this.tag.type});t&&this.dropdownView.setSelected(t.name)}},serialize:function(){return{viewId:this.cid,type:this.tag.type,label:this.tag.label?this.tag.label:this.tag.type}}});const nt=c.View.extend({initialize:function(e){c.Courier.add(this),this.errorUtil=this.dataManager.comms.errorUtil,this.controls=this.getOrderedBrowseControls(),this.dataManager=e.dataManager},getOrderedBrowseControls:function(){var e=this.options.controls,t=[],n=[],r=this,i=!1;a().each(e,(function(e){switch(e.type){case"hierarchy":t.push(e),i=!1;break;case"tag":n.push(e),i=!0;break;case"separator":i?n.push(e):t.push(e);break;default:return void r.errorUtil.handle({id:65010,method:"hierarchy.getOrderedBrowseControls",message:"Tag browse control of type "+e.type+" not supported."},!0,!1)}}));var o=a().last(t);return o&&"separator"!==o.type&&t.push({type:"separator"}),t.push.apply(t,n),t},beforeRender:function(){var e=this;!!a().findWhere(this.controls,{type:"tag"})?this.options.tagsUtil.fetchSupplementaryTags().then((function(){e.insertControlViews()})):this.insertControlViews()},insertControlViews:function(){var e=this;a().each(this.controls,(function(t){switch(t.type){case"tag":e.renderTagControl(t);break;case"hierarchy":e.renderHierarchyControl(t);break;case"separator":e.renderSeparatorControl(t);break;default:return void e.errorUtil.handle({id:65010,method:"hierarchy.beforeRender",message:"Tag browse control of type "+t.type+" not supported."},!0,!1)}}))},renderHierarchyControl:function(e){var t=new et({model:this.model,dataManager:this.dataManager,hierarchies:e.hierarchies,i18n:this.i18n});this.insertView(t).render()},renderSeparatorControl:function(){var e=c.View.extend({tagName:"hr"});this.insertView(new e).render()},renderTagControl:function(e){var t=e.tag,n=a().find(this.options.tagsUtil.data.supplementaryTags,(function(e){return e.type===t.type}));if(n.values.length){t.name=n.values;var r=this.model.getHierarchyDefaultByType(t.type,"supplementary"),i=new tt({model:this.model,dataManager:this.dataManager,tagsUtil:this.options.tagsUtil,tag:t,selected:r,i18n:this.i18n});this.insertView(i).render()}else this.errorUtil.handle({id:65100,method:"renderTagControl",message:"Tag type "+t.type+" not found."},!0,!1)}});__webpack_require__(82602);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var i=ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(o,e);var t,n,r,i=st(o);function o(){return it(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"events",get:function(){return{'click [data-authorapi-selector="delete-btn"]':"triggerRemove"}}},{key:"template",get:function(){return"shared/tag"}},{key:"initialize",value:function(e){c.Courier.add(this),this.criterion=e.criterion,this.tag=e.tag}},{key:"triggerRemove",value:function(){this.spawn("removeTag")}},{key:"serialize",value:function(){return this.tag}}])&&ot(t.prototype,n),r&&ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View),dt=__webpack_require__(71335),ft=__webpack_require__.n(dt);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bt(e);if(t){var i=bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vt(this,n)}}function vt(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(o,e);var t,n,r,i=yt(o);function o(){return ht(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"events",get:function(){return{click:"add"}}},{key:"template",get:function(){return this.isHandleBarsEnabled()?ft():"shared/suggestedTag"}},{key:"isHandleBarsEnabled",value:function(){return this.getContext().app.initOptionsModel.getConfig().beta_flags.handlebars}},{key:"initialize",value:function(e){c.Courier.add(this),this.tag=e.tag,this.isSelected=!1}},{key:"add",value:function(){this.spawn("addTag",this.tag)}},{key:"deselect",value:function(){return this.isSelected=!1,this.render()}},{key:"select",value:function(){return this.isSelected=!0,this.render()}},{key:"serialize",value:function(){return a().extend({},this.tag,{isSelected:this.isSelected})}}])&&mt(t.prototype,n),r&&mt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var i=Ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(o,e);var t,n,r,i=kt(o);function o(){return Et(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"KEYS",get:function(){return{backspace:8,del:46,down:40,enter:13,up:38,right:39,left:37}}},{key:"LABELS",get:function(){return{all:"Tags",either:"Either Tags",exclude:"Exclude Tags"}}},{key:"MIN_CHARS_FOR_AUTOCOMPLETE",get:function(){return 2}},{key:"SELECTORS",get:function(){return{input:'[data-authorapi-selector="tag-search-input"]',inputWrapper:'[data-authorapi-selector="tag-search-input-wrapper"]',searchContainer:'[data-authorapi-selector="tag-search-container"]',suggestions:'[data-authorapi-view="tag-search-suggestions"]'}}},{key:"STYLES",get:function(){return{focus:"lrn-tags-search-focus",showAutocomplete:"lrn-autocomplete-active"}}},{key:"events",get:function(){return{click:"focusInput",'blur [data-authorapi-selector="tag-search-input"]':"handleBlur",'focus [data-authorapi-selector="tag-search-input"]':"handleFocus",'keydown [data-authorapi-selector="tag-search-input"]':"handleKeydown",'keyup [data-authorapi-selector="tag-search-input"]':"autocomplete"}}},{key:"onMessages",get:function(){return{addTag:"addTag",removeTag:"removeTag"}}},{key:"template",get:function(){return"shared/tagSearch"}},{key:"initialize",value:function(e){c.Courier.add(this),this.tagsUtil=e.tagsUtil,this.currentInputValue="",this.suggestedTagViews=[],this.shouldFocusAfterRender=!1,this.tagBeforeInput=void 0,this.addListeners(),this.fetchTagSuggestions=a().debounce(this.fetchTagSuggestions,500)}},{key:"addListeners",value:function(){var e="change:tags:"+this.searchType;this.listenTo(this.model,e,this.render)}},{key:"addSelectedSuggestion",value:function(){var e=this.getSelectedSuggestionIndex();e>=0&&(this.getSuggestionViews()[e].add(),this.hideSuggestions())}},{key:"addTag",value:function(e){var t=this.tagBeforeInput;this.shouldFocusAfterRender=!0,this.tagBeforeInput=e,this.model.insertTagAfter(this.searchType,t,e)}},{key:"afterRender",value:function(){this.$input=this.$(this.SELECTORS.input),this.$inputWrapper=this.$(this.SELECTORS.inputWrapper),this.repositionInput(),this.shouldFocusAfterRender&&(this.focusInput(),this.shouldFocusAfterRender=!1)}},{key:"appendSuggestions",value:function(e){this.removeView(this.SELECTORS.suggestions),a().each(e,(function(e){var t=new _t({el:!1,tag:e,i18n:this.i18n});this.insertView(this.SELECTORS.suggestions,t),t.render()}),this)}},{key:"autocomplete",value:function(e){var t;this.shouldSkipAutocomplete(e)||(t=f()(e.currentTarget).val(),this.currentInputValue=t,t.length>=this.MIN_CHARS_FOR_AUTOCOMPLETE&&"keyup"===e.type?this.fetchTagSuggestions.apply(this):this.hideSuggestions())}},{key:"fetchTagSuggestions",value:function(){this.$el.find(".lrn-form-control").addClass(this.STYLES.fetching),this.tagsUtil.fetchSuggestions(this.currentInputValue,{exclude:this.model.getTags(this.searchType),shouldHighlight:!0}).then(a().bind(this.showSuggestions,this))}},{key:"getAdvancedTags",value:function(){var e=this.model.getAdvancedTags(this.searchType),t=this.getContext();return t.app.initOptionsModel.getABStandardsConfig().enable&&(e=t.abAlignedTagTypeUtil.filterNonABTags(e)),e}},{key:"beforeRender",value:function(){var e=this.getAdvancedTags();a().each(e,(function(e){var t=new ct({tagName:"li",tag:e,i18n:this.i18n});this.insertView(this.SELECTORS.searchContainer,t),this.listenTo(t,"remove",this.removeTag)}),this),this.shouldFocusAfterRender||(this.tagBeforeInput=a().last(e))}},{key:"deselectSuggestion",value:function(e){e>=0&&this.getSuggestionViews()[e].deselect()}},{key:"focusInput",value:function(){this.$(this.SELECTORS.input).focus()}},{key:"getSelectedSuggestionIndex",value:function(){var e,t=this.getSuggestionViews(),n=-1;for(e=0;e<t.length;e++)if(t[e].isSelected){n=e;break}return n}},{key:"getSuggestionViews",value:function(){return this.views[this.SELECTORS.suggestions]||[]}},{key:"handleBlur",value:function(){this.hideSuggestions(),this.$el.removeClass(this.STYLES.focus)}},{key:"handleFocus",value:function(e){this.$el.addClass(this.STYLES.focus),this.autocomplete(e)}},{key:"handleKeydown",value:function(e){if(this.keyEventIsDirectional(e))this.navigate(e);else{if(this.shouldAddSuggestion(e))return e.preventDefault(),this.addSelectedSuggestion();this.shouldRemoveTagBeforeInput(e)?(e.preventDefault(),this.removeTagBeforeInput()):this.shouldRemoveTagAfterInput(e)&&this.removeTagAfterInput()}}},{key:"hideSuggestions",value:function(){a().defer(a().bind((function(){(document.activeElement===this.$input[0]||!f().contains(this.el,document.activeElement))&&this.$(this.SELECTORS.suggestions).removeClass(this.STYLES.showAutocomplete).empty()}),this))}},{key:"keyEventIsDirectional",value:function(e){var t=[this.KEYS.up,this.KEYS.right,this.KEYS.down,this.KEYS.left];return a().contains(t,e.keyCode)}},{key:"moveInputLeft",value:function(){var e,t;this.tagBeforeInput&&(e=this.model,t=this.searchType,this.tagBeforeInput=e.getTagBefore(t,this.tagBeforeInput),this.repositionInput(),this.focusInput())}},{key:"moveInputRight",value:function(){var e=this.model,t=this.searchType;e.getLastTag(t)!==this.tagBeforeInput&&(this.tagBeforeInput=e.getTagAfter(t,this.tagBeforeInput),this.repositionInput(),this.focusInput())}},{key:"navigate",value:function(e){if(this.keyEventIsDirectional(e)&&(e.keyCode!==this.KEYS.left&&e.keyCode!==this.KEYS.right||!this.$input.val()))switch(e.keyCode){case this.KEYS.up:this.navigateSuggestionsUp(e);break;case this.KEYS.right:this.moveInputRight();break;case this.KEYS.down:this.navigateSuggestionsDown(e);break;case this.KEYS.left:this.moveInputLeft()}}},{key:"navigateSuggestionsUp",value:function(e){var t=this.getSuggestionViews(),n=this.getSelectedSuggestionIndex();t&&t.length&&n>0&&(this.deselectSuggestion(n),this.selectSuggestion(n-1)),e.preventDefault()}},{key:"navigateSuggestionsDown",value:function(e){var t=this.getSuggestionViews(),n=this.getSelectedSuggestionIndex();n===t.length-1||(this.deselectSuggestion(n),this.selectSuggestion(n+1)),e.preventDefault()}},{key:"removeTag",value:function(e,t){this.model.removeTag(this.searchType,t.tag)}},{key:"removeTagAfterInput",value:function(){var e=this.model,t=this.searchType,n=e.getTagAfter(t,this.tagBeforeInput)||e.getLastTag(t),r=this.tagBeforeInput;n&&(this.model.removeTag(t,n),this.tagBeforeInput=r,this.repositionInput(),this.focusInput())}},{key:"removeTagBeforeInput",value:function(){var e,t,n;this.tagBeforeInput&&(t=(n=this.model).getTagBefore(this.searchType,this.tagBeforeInput),e=this.tagBeforeInput,n.removeTag(this.searchType,e),this.tagBeforeInput=t,this.repositionInput(),this.focusInput())}},{key:"repositionInput",value:function(){var e;this.tagBeforeInput?(e=this.model.getTagIndex(this.searchType,this.tagBeforeInput),this.$(this.SELECTORS.searchContainer).children().not(this.$inputWrapper).eq(e).after(this.$inputWrapper)):this.$(this.SELECTORS.searchContainer).prepend(this.$inputWrapper)}},{key:"selectSuggestion",value:function(e){this.getSuggestionViews()[e].select()}},{key:"serialize",value:function(){var e=this.getAdvancedTags();return{inputId:this.options.inputId,isBasic:!!this.options.isBasic,labelName:this.LABELS[this.options.searchType],hasTags:!!e.length}}},{key:"shouldAddSuggestion",value:function(e){return e.keyCode===this.KEYS.enter&&this.getSelectedSuggestionIndex()>=0}},{key:"shouldRemoveTagAfterInput",value:function(e){return e.keyCode===this.KEYS.del&&!this.$input.val()}},{key:"shouldRemoveTagBeforeInput",value:function(e){return e.keyCode===this.KEYS.backspace&&!this.$input.val()}},{key:"shouldSkipAutocomplete",value:function(e){return this.keyEventIsDirectional(e)||this.shouldAddSuggestion(e)||this.shouldRemoveTagBeforeInput(e)||this.shouldRemoveTagAfterInput(e)}},{key:"showSuggestions",value:function(e){this.$el.find(".lrn-form-control").removeClass(this.STYLES.fetching),e.suggestionFor===this.currentInputValue&&e.tags.length?(this.appendSuggestions(e.tags),this.$(this.SELECTORS.suggestions).addClass(this.STYLES.showAutocomplete)):this.hideSuggestions()}}])&&St(t.prototype,n),r&&St(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var i=Nt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(e,t){if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}(o,e);var t,n,r,i=Rt(o);function o(){return Pt(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{basicSearchInput:'[data-authorapi-selector="search-basic-input"]',advancedSearch:'[data-authorapi-selector="search-advanced"]',advancedTags:'[data-authorapi-selector="tags-advanced"]',hideAdvanced:'[data-authorapi-selector="hide-advanced"]',searchTagHierarchy:'[data-authorapi-selector="search-hierarchy"]',searchTagHierarchyButton:'[data-authorapi-target="search-hierarchy"]',suggestedTag:'[data-authorapi-selector="suggested-tag"]',tagDeleteButton:'[data-authorapi-selector="delete-btn"]',panelInputs:"input, .lrn-dropdown-button",searchButton:'[type="submit"]',activePanel:".lrn-popup-active"}}},{key:"CLASSES",get:function(){return{advancedVisible:"lrn-popup-active"}}},{key:"events",get:function(){return{submit:"search",'keydown [data-authorapi-selector="expand-advanced"]':"handleKeydownOnAdvanced",'keyup [data-authorapi-selector="expand-advanced"]':"preventDefaultBehaviour",'keyup [data-authorapi-selector="hide-advanced"]':"preventDefaultBehaviour",'click [data-authorapi-selector="expand-advanced"]':"showAdvanced",'click [data-authorapi-selector="hide-advanced"]':"hideAdvanced"}}},{key:"addListeners",value:function(){this.listenTo(this.model,"change",this.updateSimpleFields)}},{key:"preventDefaultBehaviour",value:function(e){e.preventDefault()}},{key:"autoFocusBasicField",value:function(e){var t=e===this.SELECTORS.advancedTags;e===this.SELECTORS.searchTagHierarchy?this.$(this.SELECTORS.searchTagHierarchyButton).focus():t?a().find(this.tagSearchViews,(function(e){return e.isBasic})).focusInput():this.$(this.SELECTORS.basicSearchInput).focus()}},{key:"cacheFields",value:function(){var e=this.model.getSimpleKeys();a().each(e,(function(e){var t='[name="'+e+'"]';this.fields[e]=this.$(t)}),this)}},{key:"generateTagsInputIds",value:function(){var e=this.model.getTagSearchTypes();e.push("basic"),this.tagsInputIds=a().object(e,a().map(e,(function(e){return this.INPUT_ID_PREFIX+"tags_"+e+"_"+this.cid}),this))}},{key:"hideAdvanced",value:function(e){this.toggleAdvanced(e,!1)}},{key:"remove",value:function(){a()(this.tagSearchViews).invoke("remove"),this.updateHideListener(),c.View.prototype.remove.call(this)}},{key:"renderTagSearchInputs",value:function(){var e=this.model.getTagSearchTypes(),t=a().object(e,a().map(e,(function(e){return'[data-authorapi-view="tags-'+e+'"]'})));a().each(t,(function(e,t){var n,r,i;this.$(e).each(a().bind((function(e,o){r="basic"===f()(o).data("authorapi-tag-search"),(i={el:o,isBasic:r,model:this.model,searchType:t,tagsUtil:this.options.tagsUtil,i18n:this.i18n,parentView:this}).inputId=r?this.tagsInputIds.basic:this.tagsInputIds[t];var a=f()(o).data("authorapi-viewport");a&&a.length&&(i.inputId+="-viewport-".concat(a)),(n=new Ct(i)).render(),this.tagSearchViews.push(n)}),this))}),this)}},{key:"search",value:function(e){this.spawn("search"),e.preventDefault()}},{key:"handleKeydownOnAdvanced",value:function(e){13!==e.which&&32!==e.which||(e.preventDefault(),this.toggleAdvanced(e,!0,!0))}},{key:"showAdvanced",value:function(e){this.toggleAdvanced(e,!0)}},{key:"toggleAdvanced",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.CLASSES.advancedVisible;e?this.toggleAdvancedAndAutoFocus(e,t,n):this.$(this.SELECTORS.advancedSearch).add(this.$(this.SELECTORS.advancedTags)).add(this.$(this.SELECTORS.hierarchySearchPopup)).toggleClass(r,t),this.updateHideListener(t,e)}},{key:"toggleAdvancedAndAutoFocus",value:function(e,t,n){var r=this.CLASSES.advancedVisible,i='[data-authorapi-selector="'+f()(e.currentTarget).data(this.EXPAND_TARGET_ATTR)+'"]',o=this.$(i);if(o.toggleClass(r,t),t){var a=this.SELECTORS.panelInputs;n&&(a=this.SELECTORS.hideAdvanced),o.find(a).first().focus()}else this.autoFocusBasicField(i)}},{key:"updateModel",value:function(e){var t=f()(e.currentTarget),n=t.attr("name"),r=f().trim(t.val());this.model.set(n,r)}},{key:"updateSimpleFields",value:function(){var e=this.model.getSimpleKeys();a().each(a().keys(this.model.changed),(function(t){if(a().contains(e,t)&&this.fields&&this.fields[t]){var n=this.fields[t].not(":focus");1===n.length&&"checkbox"===n[0].type?n.prop("checked",this.model.changed[t]):n.val(this.model.changed[t])}}),this)}},{key:"updateHideListener",value:function(e,t){var n,r=".hide-advanced-search."+this.cid,i="mousedown"+r+" touchstart"+r+" keydown"+r,o=this;f()(document).off(i),e&&(t&&(n=f()(t.target)),f()(document).on(i,(function(e){if("keydown"!==e.type){var t=o.getSelectorForClosenessCheck();f()(e.target).closest(t).length||o.toggleAdvanced(null,!1)}else o.handleKeyDownEvent(n,e)})))}},{key:"handleKeyDownEvent",value:function(e,t){if(!this.$(this.SELECTORS.suggestedTag).length)if(9!==t.which){var n=f()(t.target),r=27===t.which,i=13===t.which||32===t.which,o="hide-advanced"===n.data("authorapi-selector");(r||i&&o)&&(t.preventDefault(),this.toggleAdvanced(null,!1),e&&e.focus())}else this.handleTabEvent(t)}},{key:"handleTabEvent",value:function(e){var t,n=this.$(this.SELECTORS.activePanel),r=f()(e.target);e.shiftKey?"hide-advanced"===r.data("authorapi-selector")&&(t=this.SELECTORS.searchButton):"submit"===r.attr("type")&&(t=this.SELECTORS.hideAdvanced),t&&(e.preventDefault(),n.find(t).focus())}},{key:"getSelectorForClosenessCheck",value:function(){return this.SELECTORS.advancedTags+","+this.SELECTORS.advancedSearch+","+this.SELECTORS.suggestedTag+","+this.SELECTORS.tagDeleteButton}}])&&Mt(t.prototype,n),r&&Mt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);const jt={getStatusOptions:function(e,t,n){var r=[{value:"",selected:!a().contains(h.getValidStatuses(),t),text:"--"},{value:"published",selected:"published"===t,text:n.get("labelPublished")},{value:"unpublished",selected:"unpublished"===t,text:n.get("labelUnpublished")},{value:"archived",selected:"archived"===t,text:n.get("labelArchived")}];return e.length&&(r=a().filter(r,(function(t){return""===t.value||a().contains(e,t.value)}))),r}};function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ut(e);if(t){var i=Ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qt(this,n)}}function qt(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(o,e);var t,n,r,i=Vt(o);function o(){return Ft(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{dropdownWrapper:'[data-authorapi-selector="dropdown-wrapper"]'}}},{key:"template",get:function(){return"partials/toolbar/searchWorkflow"}},{key:"initialize",value:function(e){var t=this;c.Courier.add(this),this.workflowStates=e.workflowStates,this.selected=e.selected,this.listenTo(this.model,"change:filteredWorkflowState",this.updateDropdown),this.dropdownView=new Je({selectOptions:this.getSelectOptions(this.workflowStates,this.selected),callback:function(e){return t.selectWorkflowState(e)}})}},{key:"getSelectOptions",value:function(e,t){var n=this,r=[];return r.push({value:"",title:"--",selected:!1}),a().each(e,(function(e){var i=n.i18n.getLabelIgnoreCase("workflowState".concat(e.reference))||e.label;r.push({value:e.reference,title:i,selected:t===e.label})})),r}},{key:"afterRender",value:function(){this.$(this.SELECTORS.dropdownWrapper)[0].appendChild(this.dropdownView.el),this.dropdownView.render()}},{key:"selectWorkflowState",value:function(e){a().isEmpty(e)?this.model.removeWorkflowState():(this.model.setWorkflowState(e),this.lastSelected=e)}},{key:"updateDropdown",value:function(){var e=this.model.get("filteredWorkflowState");this.dropdownView.setSelected(e)}},{key:"serialize",value:function(){return{viewId:this.cid}}}])&&Yt(t.prototype,n),r&&Yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View),zt=__webpack_require__(2784),Gt=__webpack_require__(28316),$t=zt.createContext(null);var Kt=function(e){e()},Zt=function(){return Kt};var Jt={notify:function(){},get:function(){return[]}};function Qt(e,t){var n,r=Jt;function i(){a.onStateChange&&a.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Zt(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Jt)},getListeners:function(){return r}};return a}var Xt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?zt.useLayoutEffect:zt.useEffect;const en=function(e){var t=e.store,n=e.context,r=e.children,i=(0,zt.useMemo)((function(){var e=Qt(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),o=(0,zt.useMemo)((function(){return t.getState()}),[t]);Xt((function(){var e=i.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,o]);var a=n||$t;return zt.createElement(a.Provider,{value:i},r)};var tn=__webpack_require__(7896),nn=__webpack_require__(31461),rn=__webpack_require__(73463),on=__webpack_require__.n(rn),an=__webpack_require__(48570),sn=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ln=["reactReduxForwardedRef"],un=[],cn=[null,null];function dn(e,t){var n=e[1];return[t.payload,n+1]}function fn(e,t,n){Xt((function(){return e.apply(void 0,t)}),n)}function pn(e,t,n,r,i,o,a){e.current=r,t.current=i,n.current=!1,o.current&&(o.current=null,a())}function hn(e,t,n,r,i,o,a,s,l,u){if(e){var c=!1,d=null,f=function(){if(!c){var e,n,f=t.getState();try{e=r(f,i.current)}catch(e){n=e,d=e}n||(d=null),e===o.current?a.current||l():(o.current=e,s.current=e,a.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=f,n.trySubscribe(),f();return function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var mn=function(){return[null,0]};function gn(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,a=void 0===o?"connectAdvanced":o,s=n.renderCountProp,l=void 0===s?void 0:s,u=n.shouldHandleStateChanges,c=void 0===u||u,d=n.storeKey,f=void 0===d?"store":d,p=(n.withRef,n.forwardRef),h=void 0!==p&&p,m=n.context,g=void 0===m?$t:m,y=(0,nn.Z)(n,sn),v=g;return function(t){var n=t.displayName||t.name||"Component",r=i(n),o=(0,tn.Z)({},y,{getDisplayName:i,methodName:a,renderCountProp:l,shouldHandleStateChanges:c,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=y.pure;var u=s?zt.useMemo:function(e){return e()};function d(n){var r=(0,zt.useMemo)((function(){var e=n.reactReduxForwardedRef,t=(0,nn.Z)(n,ln);return[n.context,e,t]}),[n]),i=r[0],a=r[1],s=r[2],l=(0,zt.useMemo)((function(){return i&&i.Consumer&&(0,an.isContextConsumer)(zt.createElement(i.Consumer,null))?i:v}),[i,v]),d=(0,zt.useContext)(l),f=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(d)&&Boolean(d.store);var p=f?n.store:d.store,h=(0,zt.useMemo)((function(){return function(t){return e(t.dispatch,o)}(p)}),[p]),m=(0,zt.useMemo)((function(){if(!c)return cn;var e=Qt(p,f?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,f,d]),g=m[0],y=m[1],b=(0,zt.useMemo)((function(){return f?d:(0,tn.Z)({},d,{subscription:g})}),[f,d,g]),_=(0,zt.useReducer)(dn,un,mn),w=_[0][0],E=_[1];if(w&&w.error)throw w.error;var S=(0,zt.useRef)(),x=(0,zt.useRef)(s),k=(0,zt.useRef)(),T=(0,zt.useRef)(!1),O=u((function(){return k.current&&s===x.current?k.current:h(p.getState(),s)}),[p,w,s]);fn(pn,[x,S,T,s,O,k,y]),fn(hn,[c,p,g,h,x,S,T,k,y,E],[p,g,h]);var C=(0,zt.useMemo)((function(){return zt.createElement(t,(0,tn.Z)({},O,{ref:a}))}),[a,t,O]);return(0,zt.useMemo)((function(){return c?zt.createElement(l.Provider,{value:b},C):C}),[l,C,b])}var p=s?zt.memo(d):d;if(p.WrappedComponent=t,p.displayName=d.displayName=r,h){var m=zt.forwardRef((function(e,t){return zt.createElement(p,(0,tn.Z)({},e,{reactReduxForwardedRef:t}))}));return m.displayName=r,m.WrappedComponent=t,on()(m,t)}return on()(p,t)}}function yn(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function vn(e,t){if(yn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!yn(e[n[i]],t[n[i]]))return!1;return!0}function bn(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function _n(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function wn(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=_n(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=_n(i),i=r(t,n)),i},r}}const En=[function(e){return"function"==typeof e?wn(e):void 0},function(e){return e?void 0:bn((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?bn((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"==typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];const Sn=[function(e){return"function"==typeof e?wn(e):void 0},function(e){return e?void 0:bn((function(){return{}}))}];function xn(e,t,n){return(0,tn.Z)({},n,e,t)}const kn=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?i&&o(l,r)||(r=l):(a=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return xn}}];var Tn=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function On(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function Cn(e,t,n,r,i){var o,a,s,l,u,c=i.areStatesEqual,d=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function h(i,p){var h,m,g=!d(p,a),y=!c(i,o);return o=i,a=p,g&&y?(s=e(o,a),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):g?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):y?(h=e(o,a),m=!f(h,s),s=h,m&&(u=n(s,l,a)),u):u}return function(i,c){return p?h(i,c):(s=e(o=i,a=c),l=t(r,a),u=n(s,l,a),p=!0,u)}}function An(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=(0,nn.Z)(t,Tn),a=n(e,o),s=r(e,o),l=i(e,o);return(o.pure?Cn:On)(a,s,l,e,o)}var Pn=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Mn(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Dn(e,t){return e===t}function Rn(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?gn:n,i=t.mapStateToPropsFactories,o=void 0===i?Sn:i,a=t.mapDispatchToPropsFactories,s=void 0===a?En:a,l=t.mergePropsFactories,u=void 0===l?kn:l,c=t.selectorFactory,d=void 0===c?An:c;return function(e,t,n,i){void 0===i&&(i={});var a=i,l=a.pure,c=void 0===l||l,f=a.areStatesEqual,p=void 0===f?Dn:f,h=a.areOwnPropsEqual,m=void 0===h?vn:h,g=a.areStatePropsEqual,y=void 0===g?vn:g,v=a.areMergedPropsEqual,b=void 0===v?vn:v,_=(0,nn.Z)(a,Pn),w=Mn(e,o,"mapStateToProps"),E=Mn(t,s,"mapDispatchToProps"),S=Mn(n,u,"mergeProps");return r(d,(0,tn.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:S,pure:c,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:y,areMergedPropsEqual:b},_))}}const Ln=Rn();var Nn;Nn=Gt.unstable_batchedUpdates,Kt=Nn;var In=__webpack_require__(13980),jn=__webpack_require__.n(In);function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const Fn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.components={}}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){this.components[e]=t}},{key:"remove",value:function(e){delete this.components[e]}},{key:"get",value:function(e){return this.components[e]}}])&&Bn(t.prototype,n),r&&Bn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const Hn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainContainer=t,this.scrollSettingsMap=new Map}var t,n,r;return t=e,(n=[{key:"save",value:function(e){for(var t,n=this.mainContainer.parentElement;n;){if(n.scrollTop){t=n;break}n=n.parentElement}if(t){var r={scrollValue:t.scrollTop,scrolledParent:t};this.scrollSettingsMap.set(e,r)}}},{key:"apply",value:function(e){var t=this.scrollSettingsMap.get(e);t&&(f()(t.scrolledParent).scrollTop(t.scrollValue),this.scrollSettingsMap.delete(e))}},{key:"delete",value:function(e){this.scrollSettingsMap.delete(e)}}])&&Yn(t.prototype,n),r&&Yn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Vn="abStandards",qn=Object.freeze({AUTHORITY:"authority",PUBLICATION:"publication",TOPIC:"topic",SECTION:"section",STANDARD:"standard"}),Un=["seq","number","statement.descr","children","utilizations","standard_type"],Wn={STANDARDS:"/abconnect/standards"},zn=Object.freeze({SINGLE:"singleSelect",MULTI:"multiSelect"}),Gn="lrn_ab_standard_",$n=["organizational","curriculum area","performance/grade","discipline","context","sub-context","theme","sub-theme","objective","sub-objective","extender","other","example"],Kn=["authority","publication","topic","section"],Zn={BROWSE:"browse",SEARCH:"search"},Jn=500,Qn="offset";function Xn(e){return function(e){if(Array.isArray(e))return er(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),nr(this,"isAbTag",(function(e){return n.isAlignedAbTag(e)||n.isHierarchyAbTag(e)})),nr(this,"isAlignedAbTag",(function(e){return e.type.toLowerCase()===n.alignedTagType.toLowerCase()})),nr(this,"isHierarchyAbTag",(function(e){var t=e.type.toLowerCase();return[].concat(Xn($n),Xn(Kn)).map((function(e){return"".concat(Gn).concat(e)})).some((function(e){return t===e.toLowerCase()}))})),this.alignedTagType=t}var t,n,r;return t=e,(n=[{key:"filterABTags",value:function(e){return e.filter(this.isAbTag)}},{key:"filterAlignedABTags",value:function(e){return e.filter(this.isAlignedAbTag)}},{key:"filterNonABTags",value:function(e){var t=this;return e.filter((function(e){return!t.isAbTag(e)}))}}])&&tr(t.prototype,n),r&&tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const ir={i18n:jn().object,metricsUtil:jn().object,app:jn().object,dom:jn().instanceOf(HTMLElement).isRequired,activityManager:jn().object,publicEvents:jn().object,qeManager:jn().object,consumerSettings:jn().object,componentRegister:jn().instanceOf(Fn).isRequired,abAlignedTagTypeUtil:jn().instanceOf(rr).isRequired,scrollPositionHelper:jn().instanceOf(Hn).isRequired};function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dr(e);if(t){var i=dr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ur(this,n)}}function ur(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cr(e)}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(o,e);var t,n,r,i=lr(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).childContext={};var r=cr(n);return a().each(e,(function(e,t){"children"!==t&&"ref"!==t&&(r.childContext[t]=e)})),n}return t=o,(n=[{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return this.props.children}}])&&ar(t.prototype,n),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);fr.childContextTypes=ir;const pr=fr;var hr={render:function(e,t,n,r){var i=n.app.shell,o=zt.createElement(en,{store:i.getStore()},zt.createElement(pr,n,e));Gt.render(o,t,r)},unmountComponentAtNode:function(e){return Gt.unmountComponentAtNode(e)}};const mr=hr;var gr=__webpack_require__(64711);function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tr(e);if(t){var i=Tr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kr(this,n)}}function kr(e,t){if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sr(e,t)}(o,e);var t,n,r,i=xr(o);function o(){return wr(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.hasFocus&&this.domElement&&this.domElement.focus()}},{key:"handleMouseLeave",value:function(){this.props.onMouseLeave&&this.props.onMouseLeave()}},{key:"render",value:function(){var e,t=this,n="lrn-btn",r="lrn-author-btn",i="lrn-btn-primary",o="lrn-btn-sec",s="lrn-btn-default",l="lrn-author-btn-outline",u="lrn-btn-small",c="lrn-btn-lg",d=!0===this.props.lds?gr.zx:"button",f=this.props.lds?{size:Pr("size",this.props.size),variant:Pr("variant",[this.props.variant,this.props.color])}:{};return zt.createElement(d,_r({ref:function(e){return t.domElement=e},type:"button",className:a().classNames(n,r,(e={},Or(e,u,"small"===this.props.size),Or(e,c,"large"===this.props.size),Or(e,l,"outlined"===this.props.variant),Or(e,i,"primary"===this.props.color),Or(e,o,"secondary"===this.props.color),Or(e,s,"default"===this.props.color),e),this.props.className,this.props.extraClasses),onClick:this.props.onClick,disabled:this.props.disabled,"data-authorapi-selector":this.props.dataAuthorApiSelector,"data-authorapi-tooltip":this.props.dataAuthorApiTooltip,onMouseLeave:function(){return t.handleMouseLeave()},onBlur:function(){return t.handleMouseLeave()},style:this.props.style},f),this.props.text||this.props.children)}}])&&Er(t.prototype,n),r&&Er(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Or(Cr,"defaultProps",{lds:!1});const Ar=Cr;var Pr=function(e,t){if("size"===e&&"string"==typeof t)return{small:"sm",large:"lg",medium:void 0}[t];if("variant"===e&&Array.isArray(t)){var n=vr(t,2),r=n[0],i=void 0===r?void 0:r,o=n[1];return[!!i&&{outlined:"outline"}[i],{undefined:"secondary",default:"secondary",primary:"primary",secondary:"dark"}[void 0===o?"undefined":o]].filter(Boolean).join("-")}},Mr="abStandards/browser/OPEN",Dr="abStandards/browser/CLOSE",Rr="abStandards/browser/SET_STANDARD_SEARCH_CODE",Lr="abStandards/FETCH_AB_ENTITIES",Nr="abStandards/RECEIVE_AB_ENTITIES",Ir="abStandards/FAIL_AB_ENTITIES",jr="abStandards/SELECT_AB_ENTITY",Br="abStandards/FETCH_STANDARDS",Fr="abStandards/browser/SET_APPLIED_ALIGNABLE_STANDARDS",Yr="abStandards/browser/APPLY_ALIGNABLE_STANDARDS",Hr="abStandards/browser/SELECT_ALIGNABLE_STANDARDS";function Vr(e){var t=Wr.indexOf(e);if(-1===t)throw new Error("Expected entityType to be one of ".concat(Wr.join(", "),".")+" Encountered ".concat(e," instead"));return t}function qr(e){var t=function(e){var t=Vr(e);return Wr.slice(t+1)}(e);return t&&t.length>0?t[0]:null}var Ur,Wr=[qn.AUTHORITY,qn.PUBLICATION,qn.TOPIC,qn.SECTION,qn.STANDARD];function zr(e){return(a().getNested(e,"relationships.children.data")||[]).length>0}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $r,Kr,Zr,Jr=function(e){return!0===a().getNested(e,"initOptions.config.global.ab_standards.enable")},Qr=function(e){return!0===e.abStandards.browser.isOpen},Xr=function(e){var t=gi(e);if(t){var n=ti(e,qn.STANDARD).byCode;return!a().isEmpty(n)&&n[t]&&n[t].nextOffset>0}},ei=function(e){return Object.keys(qn).reduce((function(t,n){var r=qn[n],i=ti(e,r).isFetching;return t[r]=i,t}),{})},ti=function(e,t){return e.abStandards[Si(t)]},ni=function(e,t){return e.abStandards.browser[Si(t)]},ri=function(e){var t=ti(e,qn.AUTHORITY),n=t.allGuids,r=t.byGuid;return n.map((function(e){return r[e]})).sort(xi("name"))},ii=function(e){var t=fi(e);if(!t)return[];var n=ti(e,qn.PUBLICATION),r=n.byGuid;return(n.byParentGuid[t]||[]).map((function(e){return r[e]})).sort(xi("name"))},oi=function(e,t){var n,r=0===(n=Vr(t))?null:Wr[n-1];return r?ni(e,r).selectedGuid:null},ai=function(e){var t=oi(e,qn.TOPIC);if(!t)return[];var n=ti(e,qn.TOPIC),r=n.byGuid;return(n.byParentGuid[t]||[]).map((function(e){return r[e]})).sort(xi("name",{name:"adopt_year",ascending:!1}))},si=function(e){var t=oi(e,qn.SECTION);if(!t)return[];var n=ti(e,qn.SECTION),r=n.byGuid;return(n.byParentGuid[t]||[]).map((function(e){return r[e]})).sort(xi("seq"))},li=function(e){var t=ti(e,qn.STANDARD).byGuid;return Object.keys(t).map((function(e){return t[e]})).filter(Boolean).sort(xi("seq"))||[]},ui=function(e){var t=mi(e);if(!t)return[];var n=ti(e,qn.STANDARD),r=n.byGuid,i=n.byParentGuid,o=ni(e,qn.STANDARD).selectedAncestorGuids,a=o.length;return(i[a>0?o[a-1]:t]||[]).map((function(e){return r[e]})).filter(Boolean).sort(xi("seq"))||[]},ci=function(e){var t=gi(e);if(!t)return[];var n=ti(e,qn.STANDARD),r=n.byGuid,i=n.byCode;return(i[t]&&i[t].data?i[t].data:[]).map((function(e){return r[e]})).filter(Boolean)},di=function(e){if(!mi(e))return[];var t=ti(e,qn.STANDARD).byGuid;return ni(e,qn.STANDARD).selectedAncestorGuids.map((function(e){return t[e]}))},fi=function(e){return ni(e,qn.AUTHORITY).selectedGuid},pi=function(e){return ni(e,qn.PUBLICATION).selectedGuid},hi=function(e){return ni(e,qn.TOPIC).selectedGuid},mi=function(e){return ni(e,qn.SECTION).selectedGuid},gi=function(e){return ni(e,qn.STANDARD).searchCode},yi=function(e){return ni(e,qn.STANDARD).selectedAlignableGuids},vi=function(e){var t=yi(e),n=ti(e,qn.STANDARD).byGuid;return t.map((function(e){return n[e]})).filter(Boolean).sort(xi("code"))||[]},bi=function(e){return e.abStandards.appliedAlignableGuids},_i=function(e){return bi(e).map((function(t){return ti(e,qn.STANDARD).byGuid[t]})).filter(Boolean)},wi=function(e){return!a().isEqual(bi(e),ni(e,qn.STANDARD).selectedAlignableGuids)},Ei=(Gr(Ur={},qn.AUTHORITY,"authorities"),Gr(Ur,qn.PUBLICATION,"publications"),Gr(Ur,qn.TOPIC,"topics"),Gr(Ur,qn.SECTION,"sections"),Gr(Ur,qn.STANDARD,"standards"),Ur),Si=function(e){return Ei[e]},xi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(var r=0;r<t.length;r++){var i=t[r],o=void 0;if("string"!=typeof i&&(o=i.ascending,i=i.name),void 0===o&&(o=!0),e[i]<n[i])return o?-1:1;if(e[i]>n[i])return o?1:-1}return 0}},ki=__webpack_require__(14442),Ti="x-origin-frame",Oi="application/x-www-form-urlencoded; charset=UTF-8",Ci=0,Ai=[];function Pi(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}function Mi(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}function Di(){this.headers={}}function Ri(e){var t,n=[],r=function(e,t){n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(e instanceof Array)for(var i,o=e.length-1;o>=0;o--)r((i=e[o]).name,i.value);else for(var a in e)e.hasOwnProperty(a)&&(t=e[a],"[object String]"!==Object.prototype.toString.call(t)&&(t=ki.Z.stringify(t)),r(a,t));return n.join("&").replace(/%20/g,"+")}Di.prototype.iFrame=null,Di.prototype.open=function(e,t,n){this.method=e,this.url=t},Di.prototype.setRequestHeader=function(e,t){this.headers[e]=t},Di.prototype.getResponseHeader=function(e){return this.responseHeaders[e]},Di.prototype.send=function(e){if(this.iFrame){var t,n=Ci++,r=this,i={method:this.method,url:this.url,headers:this.headers,data:e,requestId:n},o=!1;t=function(e){var i;if(o=!0,0===r.url.indexOf(e.origin)){try{i=ki.Z.parse(e.data),r.responseHeaders=function(e){var t,n,r,i,o,a={};if(!e)return a;t=e.split("\r\n");for(var s=0;s<t.length;s++)(o=(n=t[s]).indexOf(": "))>0&&(r=n.substring(0,o),i=n.substring(o+2),a[r]=i);return a}(i.headers)}catch(e){i={id:-1,status:-1,responseText:"Error parsing JSON from iframe message"}}i.id===n&&(Mi(window,"message",t),r.status=i.status,r.responseText=i.responseText,i.status>0?r.onload.call(r):r.onerror.call(r))}},Pi(window,"message",t),this.iFrame.contentWindow.postMessage(ki.Z.stringify(i),Kr),setTimeout((function(){o||(r.status=0,r.responseText="Request timed out",r.onerror.call(r))}),3e4)}else!1!==this.iFrameLoadingTimeout?Ai.push([this,e]):(this.status=0,this.responseText="The fallback iframe failed to load",this.onerror.call(this))};const Li={convertDataToQueryString:Ri,request:function(e){(e=e||{}).data=Ri(e.data),e.method=e.method||"GET",e.error=e.error instanceof Function?e.error:function(){},e.success=e.success instanceof Function?e.success:function(){},e.parseResponse=!e.hasOwnProperty("parseResponse")||e.parseResponse;var t=new Zr;if("GET"===e.method){var n="?";-1!==e.url.indexOf("?")&&(n+="&"),e.url+=n+e.data}if(t.open(e.method,$r+e.url),e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&t.setRequestHeader(r,e.headers[r]);function i(t,n){if(e.parseResponse)try{n=ki.Z.parse(n)}catch(e){}e.error.call(null,{status:t,response:n})}t.setRequestHeader("Content-Type",Oi),t.onload=function(){var n=t.responseText;if(t.status>=200&&t.status<=300)try{n&&n.length>0&&e.parseResponse&&(n=ki.Z.parse(n));try{e.success.call(null,{status:t.status,response:n})}catch(e){console.error(e),i(-1,e.name+" on success handler, msg: "+e.message)}}catch(e){i(-1,"error parsing response: "+e.message+". Response: "+n)}else i(t.status,n)},t.onerror=function(){i(t.status,t.responseText)},t.send("POST"===e.method||"PUT"===e.method?e.data:null)},init:function(e){if("string"!=typeof(e=e||{}).baseUrl)throw"baseUrl must be a string.";if(!Kr&&"string"!=typeof e.iframeBaseUrl)throw"iframeBaseUrl must be a string.";$r=e.baseUrl||$r,Kr=e.iframeBaseUrl||Kr;var t,n,r,i,o="/xdomain",a="."+Ti;if(document.querySelectorAll)t=document.querySelectorAll(a);else{t=[];for(var s=document.getElementsByTagName("iframe"),l=s.length-1;l>=0;l--)-1!==s[l].className.indexOf(a)&&t.push(s[l])}for(var u=t.length-1;u>=0;u--)-1!==t[u].src.indexOf(Kr+o)&&(n=t[u]);return Zr=Di,void 0===n&&((n=document.createElement("iframe")).className=Ti,n.frameBorder=0,n.marginWidth=0,n.marginHeight=0,n.style.width=0,n.style.height=0,n.style.position="absolute",n.style.top="-1000px",n.src=Kr+o,n.setAttribute("data-authorapi-selector","author-xdomain-iframe"),document.body.appendChild(n)),i=setTimeout((function(){Di.prototype.iFrameLoadingTimeout=!0}),5e3),r=function(e){if(0===Kr.indexOf(e.origin)&&ki.Z.parse(e.data).ready){Di.prototype.iFrame=n,Di.prototype.iFrameLoadingTimeout=!1,clearTimeout(i);for(var t=0;t<Ai.length;t++)Ai[t][0].send(Ai[t][1]);Ai=[],Mi(window,"message",r)}},Pi(window,"message",r),"[object Function]"==Object.prototype.toString.call(e.wrongIframeMsgCallback)&&Pi(window,"message",(function(t){if(0===Kr.indexOf(t.origin)){var n=ki.Z.parse(t.data);n.error&&e.wrongIframeMsgCallback(n.error,n.data)}})),this}};function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ii,ji=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.security=t,this.errorUtil=n,this.ACTION={GET:"get",SET:"set",UPDATE:"update"}}var t,n,r;return t=e,(n=[{key:"setSecurity",value:function(e){this.security=e}},{key:"setRequestData",value:function(e){this.requestData=e}},{key:"request",value:function(e){var t=new(f().Deferred),n=this.errorUtil,r={action:e.action||this.ACTION.GET,security:this.security};return this.requestData&&(r.request=this.requestData),e.data&&(r.usrequest=e.data),Li.request({url:e.url,method:"POST",data:r,success:function(e){t.resolve(e.response)},error:function(n){return t.reject(n.response,e.disableErrorAlert,e.disableErrorTracking)}}),t.fail(n.handle),t.promise()}}])&&Ni(t.prototype,n),r&&Ni(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}function Yi(e,t,n){return e.data.meta.facets.filter((function(e){return e.facet===t}))[0].details.map((function(e){return Object.keys(n).reduce((function(t,r){return t[r]=e.data[n[r]],t}),{})}))}function Hi(e){return{guid:e.id,seq:e.attributes.seq,type:e.attributes.standard_type,number:e.attributes.number,code:e.attributes.number.prefix_enhanced||e.attributes.statement.descr.substring(0,25),description:e.attributes.statement.descr,alignable:(t=e,t.attributes.utilizations.some((function(e){return"alignable"===e.type}))),hasChildren:zr(e)};var t}function Vi(e,t){var n={"filter[standards]":"(section.guid EQ '".concat(t,"' AND level EQ 1)"),"fields[standards]":Un.join(","),"sort[standards]":"seq"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(n))}).then((function(e){return e.data.data.map((function(e){return Hi(e)}))}))}function qi(e,t){var n={"filter[standards]":"(parent.guid EQ '".concat(t,"')"),"fields[standards]":Un.join(","),"sort[standards]":"seq"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(n))}).then((function(e){return e.data.data.map((function(e){return Hi(e)}))}))}var Ui=(Bi(Ii={},qn.AUTHORITY,(function(e){var t="document.publication.authorities",n={"filter[standards]":"status EQ 'active'",facet:t,limit:0},r={guid:"guid",name:"descr"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(n))}).then((function(e){return Yi(e,t,r)}))})),Bi(Ii,qn.PUBLICATION,(function(e,t){var n="document.publication",r={"filter[standards]":"(document.publication.authorities.guid EQ '".concat(t,"' AND status EQ 'active')"),facet:n,limit:0},i={guid:"guid",name:"descr"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(r))}).then((function(e){return Yi(e,n,i)}))})),Bi(Ii,qn.TOPIC,(function(e,t){var n="document",r={"filter[standards]":"(document.publication.guid EQ '".concat(t,"' AND status EQ 'active')"),facet:n,limit:0},i={guid:"guid",name:"descr",adopt_year:"adopt_year"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(r))}).then((function(e){return Yi(e,n,i)}))})),Bi(Ii,qn.SECTION,(function(e,t){var n="section",r={"filter[standards]":"(document.guid EQ '".concat(t,"' AND status EQ 'active')"),facet:n,limit:0},i={guid:"guid",name:"descr",seq:"seq"};return e.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(r))}).then((function(e){return Yi(e,n,i)}))})),Bi(Ii,qn.STANDARD,(function(e){return e===qn.STANDARD?qi:Vi})),Ii);var Wi=function(){return{type:Mr}},zi=function(){return{type:Dr}},Gi=function(e,t,n){return function(r,i,o){return r({type:Lr,entityType:e,parentEntityType:n,data:t}),function(e,t,n,r){if(!(t in Ui))throw new Error("Expected entityType to be one of ".concat(Object.keys(Ui).join(", "),".")+" Encountered ".concat(t," instead"));if(r&&!(r in Ui))throw new Error("Expected parentEntityType to be one of ".concat(Object.keys(Ui).join(", "),".")+" Encountered ".concat(r," instead"));return(t===qn.STANDARD?Ui[t](r):Ui[t])(e,n)}(uo(o),e,t,n).then((function(n){return r(ao(e,n,{parentGuid:t}))}),(function(n){throw r(so(e,n,{parentGuid:t})),n}))}},$i=function(e){return function(t,n,r){return t({type:Br,data:e,entityType:qn.STANDARD}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)return S.resolve([]);var n={"filter[standards]":"(guid in (".concat(encodeURI(t.join(",")),"))"),"fields[standards]":Un.join(","),"sort[standards]":"seq",facet_summary:"_none",limit:100};return S.resolve(e.request({url:"/abconnect/standards?".concat(Fi(n))})).then((function(e){return e.data.data.map((function(e){return Hi(e)}))}))}(uo(r),e).then((function(e){return t(ao(qn.STANDARD,e))}),(function(e){throw t(so(qn.STANDARD,e)),e}))}},Ki=function(e,t){return function(n,r,i){return n({type:Br,data:e,entityType:qn.STANDARD,offset:t}),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t.length)return S.resolve([]);var r={"filter[standards]":"status EQ 'active' AND (query(number.prefix_enhanced, '".concat(t,"')) AND utilizations.type EQ 'alignable'"),"fields[standards]":Un.join(","),limit:100,handler:"by_code"};return n>0&&(r=a().extend(r,{offset:n})),S.resolve(e.request({url:"/abconnect/standards?".concat(Fi(r))})).then((function(e){return e.data}))}(uo(i),e,t).then((function(t){var r=function(e,t){return new URLSearchParams(e).get(t)}(t.next,Qn)||0;n(ao(qn.STANDARD,t.data,{code:e,nextOffset:r}))}),(function(t){throw n(so(qn.STANDARD,t,{code:e})),t}))}},Zi=function(e,t,n){return function(r,i){lo(i(),e,t)&&r(Gi(e,t,n))}},Ji=function(e,t){return function(n){n({type:jr,entityType:e,data:t});var r=e===qn.STANDARD?qn.STANDARD:qr(e);t&&r&&n(Zi(r,t,e))}},Qi=function(e){return{type:Yr,data:e}},Xi=function(e){return{type:Hr,data:e}},eo=function(e){return{type:Fr,data:e}},to=function(e){return{type:Rr,data:e}},no=function(e){return function(t,n){io(n(),e)&&t($i(e))}},ro=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{next:!1},t=e.next;return function(e,n){var r=n(),i=gi(r),o=ti(r,qn.STANDARD).byCode,a=0;t&&(a=o[i]&&o[i].nextOffset),oo(r,i,t)&&e(Ki(i,a))}},io=function(e,t){var n=ti(e,qn.STANDARD).byGuid;return t.some((function(e){return!n[e]}))},oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return!1;var r=ti(e,qn.STANDARD),i=r.byCode,o=i[t.trim()];return!o||0===o.data.length||n&&o.nextOffset},ao=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.parentGuid,i=n.code,o=n.nextOffset;return{type:Nr,entityType:e,data:t,parentGuid:r,code:i,nextOffset:o}},so=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.parentGuid,i=n.guids;return{type:Ir,entityType:e,data:t,parentGuid:r,guids:i}},lo=function(e,t,n){var r=ti(e,t),i=r.isFetching,o=r.byParentGuid,a=r.allGuids,s=t===qn.AUTHORITY?a:o[n];return!(i||s&&s.length)},uo=function(e){return(e.app?e.app:e).component.comms};const co="object"==typeof global&&global&&global.Object===Object&&global;var fo="object"==typeof self&&self&&self.Object===Object&&self;const po=(co||fo||Function("return this")()).Symbol;var ho=Object.prototype,mo=ho.hasOwnProperty,go=ho.toString,yo=po?po.toStringTag:void 0;const vo=function(e){var t=mo.call(e,yo),n=e[yo];try{e[yo]=void 0;var r=!0}catch(e){}var i=go.call(e);return r&&(t?e[yo]=n:delete e[yo]),i};var bo=Object.prototype.toString;const _o=function(e){return bo.call(e)};var wo=po?po.toStringTag:void 0;const Eo=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":wo&&wo in Object(e)?vo(e):_o(e)};const So=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);const xo=function(e){return null!=e&&"object"==typeof e};var ko=Function.prototype,To=Object.prototype,Oo=ko.toString,Co=To.hasOwnProperty,Ao=Oo.call(Object);const Po=function(e){if(!xo(e)||"[object Object]"!=Eo(e))return!1;var t=So(e);if(null===t)return!0;var n=Co.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oo.call(n)==Ao};var Mo=__webpack_require__(87287),Do=__webpack_require__.n(Mo),Ro="@@redux/INIT";function Lo(e,t,n){var r;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Lo)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){return o}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return u(),s.push(e),function(){if(t){t=!1,u();var n=s.indexOf(e);s.splice(n,1)}}}function f(e){if(!Po(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:Ro}),(r={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Ro})}})[Do()]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[Do()]=function(){return this},e},r}function No(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Io(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o=Object.keys(n);var a=void 0;try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Ro}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Ro+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){a=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],u=n[l],c=e[l],d=u(c,t);if(void 0===d){var f=No(l,t);throw new Error(f)}i[l]=d,r=r||d!==c}return r?i:e}}function jo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Fo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,l={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map((function(e){return e(l)})),s=jo.apply(void 0,o)(a.dispatch),Bo({},a,{dispatch:s})}}}function Yo(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ho(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wo={authorities:{byGuid:{},allGuids:[],isFetching:!1},publications:{byParentGuid:{},byGuid:{},isFetching:!1},topics:{byParentGuid:{},byGuid:{},isFetching:!1},sections:{byParentGuid:{},byGuid:{},isFetching:!1},standards:{byParentGuid:{},byGuid:{},byCode:{},isFetching:!1},appliedAlignableGuids:[],browser:{isOpen:!1,authorities:{selectedGuid:null},publications:{selectedGuid:null},topics:{selectedGuid:null},sections:{selectedGuid:null},standards:{searchCode:"",selectedAncestorGuids:[],selectedAlignableGuids:[]}}},zo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wo.browser.isOpen,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mr:return!0;case Dr:return!1;default:return e}};function Go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:return t.parentGuid?qo(qo({},e),{},Uo({},t.parentGuid,t.data.map((function(e){return e.guid})))):e;default:return e}}function $o(e,t,n){return function(r,i){var o=void 0===r;return t(i)||o?e(r,i,n):r}}var Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:return qo(qo({},e),t.data.reduce((function(e,t){return e[t.guid]=t,e}),{}));default:return e}},Zo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:if(!t.code)return e;var n=e[t.code],r=(t.data||[]).map((function(e){return e.guid})),i=n?(e[t.code].data||[]).concat(r):r,o=t.nextOffset;return qo(qo({},e),{},Uo({},t.code,{data:i,nextOffset:o}));default:return e}},Jo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:var n=a().uniq([].concat(Yo(e),Yo(t.data.map((function(e){return e.guid})))));return n;default:return e}},Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;switch(t.type){case Lr:var r=n!==t.entityType;return r?null:e;case jr:return n!==t.entityType?null:t.data;default:return e}},Xo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jr:if(t.entityType!==qn.STANDARD)return[];var n=e.indexOf(t.data);return-1===n?[].concat(Yo(e),[t.data]):e.slice(0,n+1);default:return e}},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rr:return t.data||"";default:return e}},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Hr:return t.data;default:return e}},na=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lr:return!0;case Nr:return!1;case Br:return!0;case Ir:return!1;default:return e}},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fr:return t.data;default:return e}},ia=function(e){return function(t){return t.entityType===e}},oa=function(e){return function(t){return-1!==e.indexOf(t.entityType)}};function aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Object.keys(e).reduce((function(r,i){var o=e[i];return r[i]=$o(o,t,n),r}),{})}function sa(e){return(sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ca(e,t){return(ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pa(e);if(t){var i=pa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fa(this,n)}}function fa(e,t){if(t&&("object"===sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ha,ma,ga,ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ca(e,t)}(o,e);var t,n,r,i=da(o);function o(){return la(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.extraClasses,n=e.isLoading,r=e.overlaySpinner,i={height:"100%"};if(n){var o=r?"opacity":"display";i[o]={display:"none",opacity:"0.5"}[o]}return zt.createElement("div",{className:t},n&&zt.createElement("div",{className:"lrn-author-loading-panel"},zt.createElement("div",{className:"lrn-spinner"},zt.createElement("div",{className:"lrn-bounce1"}),zt.createElement("div",{className:"lrn-bounce2"}),zt.createElement("div",{className:"lrn-bounce3"}))),zt.createElement("div",{style:i},this.props.children))}}])&&ua(t.prototype,n),r&&ua(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);ga={isLoading:!1,overlaySpinner:!1},(ma="defaultProps")in(ha=ya)?Object.defineProperty(ha,ma,{value:ga,enumerable:!0,configurable:!0,writable:!0}):ha[ma]=ga;const va=ya;function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wa(e,t){return(wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xa(e);if(t){var i=xa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sa(this,n)}}function Sa(e,t){if(t&&("object"===ba(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ka=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t)}(o,e);var t,n,r,i=Ea(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"render",value:function(){return Gt.createPortal(this.props.children,this.props.container)}}])&&_a(t.prototype,n),r&&_a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);var Ta=__webpack_require__(73212);function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pa(e,t){return(Pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ra(e);if(t){var i=Ra(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Da(this,n)}}function Da(e,t){if(t&&("object"===Oa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const La=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pa(e,t)}(o,e);var t,n,r,i=Ma(o);function o(){return Ca(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this;return zt.createElement("div",{ref:function(t){return e.el=t}},this.props.children)}},{key:"componentDidMount",value:function(){this.restoreFocus=(0,Ta.Z)(this.el)}},{key:"componentWillUnmount",value:function(){a().isFunction(this.restoreFocus)&&setTimeout(this.restoreFocus)}}])&&Aa(t.prototype,n),r&&Aa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);var Na=110,Ia=190,ja=13,Ba=27,Fa=32;function Ya(e){var t=e.keyCode;return!!t&&(t===Ia||t===Na)}function Ha(e){var t=e.keyCode;return!!t&&(t!==ja&&t!==Fa)}function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function za(e,t){return(za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Za(e);if(t){var i=Za(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $a(this,n)}}function $a(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ka(e)}function Ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qa=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&za(e,t)}(a,t);var n,r,i,o=Ga(a);function a(){var e;Ua(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ja(Ka(e=o.call.apply(o,[this].concat(n))),"rootContainer",e.context.dom||document.body),Ja(Ka(e),"handleKeyDown",(function(t){e.props.isHidden||t.keyCode===Ba&&(t.stopPropagation(),e.props.onClose(!0))})),e}return n=a,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t;return this.props.isHidden&&(t={visibility:"hidden"}),zt.createElement(ka,{container:this.rootContainer},zt.createElement(La,null,zt.createElement(e,qa({},this.props,{style:t}))))}}])&&Wa(n.prototype,r),i&&Wa(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}(zt.Component);return Ja(t,"contextTypes",{dom:jn().instanceOf(HTMLElement).isRequired}),Ja(t,"defaultProps",{isHidden:!1,onClose:a().noop}),t.displayName="WithBaseModal(".concat(function(e){return e.displayName||"Component"}(e),")"),t};var Xa="lrn-author-modal-v2",es={root:Xa,content:"".concat(Xa,"-content"),header:["".concat(Xa,"-header"),"lrn-author-ui-no-preview"],title:"".concat(Xa,"-title"),closeButton:"".concat(Xa,"-close-btn"),body:"".concat(Xa,"-body"),footer:"".concat(Xa,"-footer")};const ts=function(e){var t=e.children;return zt.createElement("div",{className:es.body},t)};function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ls(e);if(t){var i=ls(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ss(this,n)}}function ss(e,t){if(t&&("object"===ns(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ls(e){return(ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&os(e,t)}(o,e);var t,n,r,i=as(o);function o(){return rs(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return zt.createElement("button",{type:"button","data-authorapi-selector":this.props.authorApiSelector,className:a().classNames("lrn-button","lrn-author-exit-button",this.props.className),onClick:this.props.onClick},zt.createElement("span",{className:"lrn-sr-only"},this.context.i18n.get("closeButtonAriaLabel")),zt.createElement("span",{className:"lrn-author-cross-container"},zt.createElement("span",{className:"lrn-author-inner-cross-container"},zt.createElement("span",{"aria-roledescription":"presentation",className:"lrn-i-cross"}))))}}])&&is(t.prototype,n),r&&is(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(us,"contextTypes",{i18n:jn().object});const cs=us;const ds=function(e){var t=e.title,n=e.onClose,r=e.children;return zt.createElement("div",{className:a().classNames(es.header)},zt.createElement("div",{className:es.title},t),zt.createElement(cs,{className:es.closeButton,onClick:n}),r)};const fs=function(e){var t=e.children;return zt.createElement("div",{className:es.footer},t)};const ps=Qa((function(e){var t=e.className,n=e.style,r=e.title,i=e.onClose,o=e.children,s=e.footer;return zt.createElement("div",{className:a().classNames(es.root,t),style:n},zt.createElement("div",{className:a().classNames(es.content)},zt.createElement(ds,{title:r,onClose:i}),zt.createElement(ts,null,o),s&&zt.createElement(fs,null,s)))}));function hs(e){return(hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ys(e,t){return(ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_s(e);if(t){var i=_s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bs(this,n)}}function bs(e,t){if(t&&("object"===hs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _s(e){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ws="lrn-author-input-wrapper-with-icon",Es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ys(e,t)}(o,e);var t,n,r,i=vs(o);function o(){return ms(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"valueAsNumber",get:function(){return parseFloat(this.value)}},{key:"value",get:function(){return this.inputEl&&this.inputEl.value}},{key:"render",value:function(){var e=this,t=this.props,n=t.inputDataAuthorApiSelector,r=t.dataAuthorApiSelector,i=t.defaultValue,o=t.description,a=t.className,s=t.onBlur,l=t.onChange,u=t.disabled,c=t.label,d=t.type,f=t.direction,p=t.maxLength,h=t.maxValue,m=t.startIconClassName,g=this.props.value,y=m&&m.length>0;return g="number"===d?void 0===g?"":g:g||"",zt.createElement("div",{className:a,"data-authorapi-selector":r},zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("label",{className:"lrn-form-label-name",htmlFor:c},c)),zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12"},zt.createElement("div",{className:"lrn-form-group"},o&&o.length>0&&zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},o),zt.createElement("div",{className:y&&ws},y&&zt.createElement("span",{className:m}),zt.createElement("input",{id:c,type:d,className:"lrn-form-control",ref:function(t){e.inputEl=t},"data-authorapi-selector":n,value:g,defaultValue:i,onChange:l,onBlur:s,disabled:u,dir:f,maxLength:p,max:h}))))))}}])&&gs(t.prototype,n),r&&gs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Es,"defaultProps",{className:"",type:"text"});const Ss=Es;function xs(e){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="function"==typeof t;if(n&&!r)throw new Error("element must be a function when runCallback is true."+"Encountered: ".concat(xs(t)," instead"));return e.reduce((function(r,i,o){return o<e.length-1?r=r.concat(i,n?t(o):t):r.push(i),r}),[])}var Ts={value:"--",text:"--"},Os=function(e){return!Boolean(e)||e===Ts.value},Cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length?[Ts].concat(e):e},As=function(e){return Cs(e.map((function(e){return{value:e.guid,text:e.name}})))},Ps=function(e){return Cs(e.map((function(e){var t=e.guid,n=e.name,r=e.adopt_year;return{value:t,text:r&&r.length?"".concat(n," (").concat(r,")"):n}})))};function Ms(e){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bs(e);if(t){var i=Bs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Is(this,n)}}function Is(e,t){if(t&&("object"===Ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return js(e)}function js(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bs(e){return(Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ls(e,t)}(o,e);var t,n,r,i=Ns(o);function o(){var e;Ds(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fs(js(e=i.call.apply(i,[this].concat(n))),"buildOption",(function(e,t){return zt.createElement("option",{key:t,value:e.value},e.text)})),Fs(js(e),"buildOptGroup",(function(t,n){return zt.createElement("optgroup",{label:t.text,key:n},(t.options||[]).map(e.buildOption))})),e}return t=o,(n=[{key:"buildSelectOptions",value:function(e){var t=this;return e.map((function(e,n){return e.options?t.buildOptGroup(e,n):t.buildOption(e,n)}))}},{key:"render",value:function(){var e=this.props.flushBottom?"":"lrn-form-group";return zt.createElement("div",{className:a().classNames(this.props.className,{disabled:this.props.disabled}),"data-authorapi-selector":this.props.dataAuthorApiSelector},this.props.label&&zt.createElement("label",{className:"lrn-form-label-name"},this.props.label),zt.createElement("div",{className:e},this.props.description&&this.props.description.length>0&&zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},this.props.description),zt.createElement("div",{className:a().classNames("lrn-custom-select",{disabled:this.props.disabled})},zt.createElement("select",{className:"lrn-form-control","data-authorapi-selector":this.props.inputDataAuthorApiSelector,onChange:this.props.onChange,disabled:this.props.disabled,value:this.props.value},this.buildSelectOptions(this.props.options)))))}}])&&Rs(t.prototype,n),r&&Rs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Fs(Ys,"defaultProps",{onChange:function(){},options:[]});const Hs=Ys;const Vs=function(e){var t=e.fields,n=e.onFieldChange;return zt.createElement("div",null,t.map((function(e){var t=e.label,r=e.entityType,i=e.options,o=e.value,a=e.disabled;return zt.createElement(Hs,{key:r,label:t,options:i,value:o||"",disabled:a,onChange:n.bind(undefined,r)})})))};var qs=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Us=function(e,t){return!(!a().isString(e)||!a().isString(t))&&e.substr(0,t.length)===t};const Ws=function(e){return e.replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))};var zs=__webpack_require__(21706),Gs=__webpack_require__.n(zs);function $s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qs(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){Js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Gs())}const Xs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$s(this,e),this.setLabels(t)}var t,n,r;return t=e,(n=[{key:"setLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._labels=a().extend(Qs(),e)}},{key:"get",value:function(e){return this._labels[e]}},{key:"getLabelIgnoreCase",value:function(e){return a().find(this._labels,(function(t,n){return n.toLowerCase()===e.toLowerCase()}))}},{key:"getLabelWithValueParameter",value:function(e){var t=e.labelKey,n=e.value,r=this.get(t);return null==n?r:r&&r.replace(/%value%/g,n)}},{key:"getLabelsStartingWith",value:function(e){return a().pick(this._labels,(function(t,n){return n.substr(0,e.length)===e}))}},{key:"getCKEditorLabels",value:function(){var e=this.getLabelsStartingWith("ckeditor."),t={};return a().each(e,(function(e,n){for(var r=n.split("."),i=r.length-1,o=t,a=1;a<r.length;a++){var s=r[a];o[s]||(o[s]={}),a<i?o=o[s]:a===i&&(o[s]=e)}})),t}},{key:"getStatusLabel",value:function(e){var t=h.getValidStatuses(),n="";return e===t.published?n=this.get("labelPublished"):e===t.unpublished?n=this.get("labelUnpublished"):e===t.archived&&(n=this.get("labelArchived")),n}},{key:"getSortMessage",value:function(e,t){var n={created:{label:"sortTypeCreated",desc:"sortTypeByNewest",asc:"sortTypeByOldest"},updated:{label:"sortTypeUpdated",desc:"sortTypeByNewest",asc:"sortTypeByOldest"},reference:{label:"sortTypeAlphabetical",desc:"sortTypeZA",asc:"sortTypeAZ"},title:{label:"sortTypeAlphabeticalTitle",desc:"sortTypeZA",asc:"sortTypeAZ"}};if(null==n[e]||null==n[e][t])return"";var r=this.get(n[e].label)||"",i=this.get(n[e][t])||"";return(this.get("ariaLiveListSortedBy")||"").replace(/%sortField%/,r).replace(/%sortOrder%/,i)}},{key:"getFeatureTooltip",value:function(e){var t;switch(e){case"imagetool":t=this.get("featureTooltipImagetool");break;case"calculator":t=this.get("featureTooltipCalculator");break;case"audioplayer":t=this.get("featureTooltipAudioPlayer");break;case"sharedpassage":t=this.get("featureTooltipPassage");break;case"videoplayer":t=this.get("featureTooltipVideoPlayer");break;default:t=null}return t}},{key:"getMathGenValidationType",value:function(e){e=Ws(e);var t=qs(e);return this.get("mathGenValidation".concat(t))}}])&&Ks(t.prototype,n),r&&Ks(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tl="lrn-author-breadcrumbs",nl={root:tl,inner:"".concat(tl,"-inner"),item:"".concat(tl,"-item"),itemTruncated:"".concat(tl,"-item-truncated"),separator:"".concat(tl,"-separator")};var rl=function(e,t){var n=e.separator,r=e.truncateItems,i=e.children,o=t.i18n,s=zt.Children.toArray(i).map((function(e,t){return zt.createElement("li",{className:a().classNames(nl.item,el({},nl.itemTruncated,!0===r)),key:"child-".concat(t)},e)}));return zt.createElement("nav",{"aria-label":o.get("standardsBrowserBreadCrumbAriaLabel"),className:nl.root},zt.createElement("ol",{className:nl.inner},function(e,t){return ks(e,(function(e){return zt.createElement("li",{"aria-hidden":!0,key:"separator-".concat(e),className:nl.separator},t)}),!0)}(s,n)))};rl.defaultProps={separator:zt.createElement("span",{className:a().classNames("lrn-i-next","lrn-i-next-small")}),truncateItems:!1},rl.contextTypes={i18n:jn().instanceOf(Xs)};const il=rl;var ol="lrn-author-list",al={root:ol,item:"".concat(ol,"-item"),itemLink:"".concat(ol,"-item-link")},sl="link";const ll=function(e){var t=e.children;return zt.createElement("ul",{className:al.root},t)};function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cl=function(e){var t=e.children,n=e.variant,r=e.onClick;return zt.createElement("li",{onClick:r,className:a().classNames(al.item,ul({},al.itemLink,n===sl))},t)};var dl=function(e){var t=e.sections,n=void 0===t?[]:t,r=e.onSelect;return zt.createElement(ll,null,n.map((function(e){var t=e.guid,n=e.name;return zt.createElement(cl,{variant:"link",key:t,onClick:r.bind(undefined,t)},n)})))};dl.defaultProps={onSelect:a().noop};const fl=dl;var pl="lrn-author-chip",hl={root:pl,closeButton:"".concat(pl,"-close-btn")};const ml=function(e){var t=e.children,n=e.ariaLabel,r=e.onClose;return zt.createElement("span",{"aria-label":n,className:hl.root},t,r&&zt.createElement("a",{href:"#",className:hl.closeButton,onClick:function(e){e.preventDefault(),r()}},zt.createElement("span",{className:"lrn-i-cross"})))};var gl="lrn-author-ab-standard",yl={root:gl,code:"".concat(gl,"-code"),description:"".concat(gl,"-description")},vl=function(e,t){var n=e.code,r=e.description,i=t.i18n;return zt.createElement("div",{className:yl.root},zt.createElement(ml,{ariaLabel:i.get("standardCodeAriaLabel"),className:yl.code},n||r.substring(0,25)),zt.createElement("p",{"aria-label":i.get("standardDescriptionAriaLabel"),className:yl.description},r))};vl.contextTypes={i18n:jn().instanceOf(Xs)};const bl=vl;function _l(e){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function El(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sl(e,t){return(Sl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tl(e);if(t){var i=Tl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kl(this,n)}}function kl(e,t){if(t&&("object"===_l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tl(e){return(Tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sl(e,t)}(o,e);var t,n,r,i=xl(o);function o(){return wl(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return zt.createElement("button",{type:"button","data-authorapi-selector":this.props.authorApiSelector,className:a().classNames("lrn-author-icon-button",this.props.className),onClick:this.props.onClick},zt.createElement("span",{className:"lrn-author-icon-button-container"},zt.createElement("span",{className:"lrn-author-icon-button-inner-container"},this.props.children)))}}])&&El(t.prototype,n),r&&El(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function Cl(e){return(Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ml(e,t){return(Ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nl(e);if(t){var i=Nl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rl(this,n)}}function Rl(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ll(e)}function Ll(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ml(e,t)}(o,e);var t,n,r,i=Dl(o);function o(){var e;Al(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Il(Ll(e=i.call.apply(i,[this].concat(n))),"onKeyDown",(function(e){e.keyCode===Fa&&e.preventDefault()})),Il(Ll(e),"onKeyUp",(function(t){var n=Ll(e).inputEl;Ha(t)||(n&&a().isFunction(n.click)&&n.click(),t.currentTarget.focus())})),e}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props.uniqueId?this.props.uniqueId:"checkbox_".concat(a().uuid()),n=this.props.disabled?"lrn-check-box-disabled":"",r=this.props.className?this.props.className:"",i=this.props.value||"",o=this.props.isFlushBottom?"lrn-author-checkbox-flush-bottom":"",s="lrn-author-checkbox-container\n            ".concat(n,"\n            ").concat(o,"\n            ").concat(r),l=a().isUndefined(this.props.tabIndex)?0:this.props.tabIndex;return zt.createElement("div",{className:s},zt.createElement("input",{type:"checkbox",id:t,className:"lrn-author-checkbox",onChange:this.props.onChange,checked:this.props.checked,"data-authorapi-selector":this.props.selector,"data-is-checked":!!this.props.checked,disabled:this.props.disabled,ref:function(t){return e.inputEl=t},tabIndex:"-1"}),zt.createElement("label",{"aria-checked":this.props.checked,"aria-labelledby":"".concat(t,"_description"),className:"lrn-author-checkbox-label",htmlFor:t,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,role:"checkbox",tabIndex:l},i),zt.createElement("span",{id:"".concat(t,"_description"),className:"lrn-author-checkbox-label-description lrn-ellipses"},this.props.description))}}])&&Pl(t.prototype,n),r&&Pl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);jl.contextTypes={i18n:jn().object};const Bl=jl;var Fl=void 0,Yl=function(e){var t=e.standards,n=void 0===t?[]:t,r=e.selectedAlignableStandardGuids,i=e.selectMode,o=e.onSelect,s=e.onDrillDown;return zt.createElement(ll,null,n.map((function(e){var t=e.guid,n=e.code,l=e.description,u=e.alignable,c=e.hasChildren;return zt.createElement(cl,{key:t,onClick:s&&!u&&c?function(e){e.stopPropagation(),s(t)}:null},zt.createElement("label",{style:{display:"flex",padding:"15px 18px"},htmlFor:"select-".concat(t)},u&&zt.createElement("div",{style:{margin:"0 5px"}},i===zn.SINGLE?zt.createElement("input",{type:"radio",name:"alignable",id:"select-".concat(t),checked:a().contains(r,t),onChange:o.bind(Fl,t)}):zt.createElement(Bl,{uniqueId:"select-".concat(t),checked:a().contains(r,t),onChange:o.bind(Fl,t)})),zt.createElement("div",{style:{marginLeft:"5px",flexGrow:1}},zt.createElement(bl,{key:t,code:n,description:l})),s&&c&&zt.createElement("div",{style:{marginLeft:"20px",alignSelf:"center"}},zt.createElement(Ol,{onClick:function(e){e.stopPropagation(),s(t)}},zt.createElement("span",{className:"lrn-i-next"})))))})))};Yl.defaultProps={onSelect:a().noop};const Hl=Yl;var Vl=function(e,t){var n=e.disabled,r=e.onClick,i=e.lds,o=t.i18n;return zt.createElement(Ar,{disabled:n,onClick:r,size:"large",color:"primary",lds:i},o.get("standardsBrowserDoneButton"))};Vl.contextTypes={i18n:jn().instanceOf(Xs)};const ql=Ln((function(e){return{lds:e.initOptions.config.beta_flags.lds}}))(Vl);var Ul=function(e,t){var n=e.disabled,r=e.onClick,i=e.lds,o=t.i18n;return zt.createElement(Ar,{disabled:n,onClick:r,size:"large",color:"primary",lds:i},o.get("standardsBrowserNextButton"))};Ul.contextTypes={i18n:jn().instanceOf(Xs)};const Wl=Ln((function(e){return{lds:e.initOptions.config.beta_flags.lds}}))(Ul);function zl(e){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kl(e,t){return(Kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ql(e);if(t){var i=Ql(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jl(this,n)}}function Jl(e,t){if(t&&("object"===zl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kl(e,t)}(o,e);var t,n,r,i=Zl(o);function o(){return Gl(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this;return zt.createElement("div",{style:this.getStyle(),className:"lrn-author-yes-no-prompt"},zt.createElement("div",{className:"lrn-author-prompt-container lrn-author-confirm-discard"},zt.createElement("div",{className:this.getTextDivClasses()},zt.createElement("p",null,this.props.text)),this.getDescription(),zt.createElement("div",{className:"lrn-author-prompt-footer lrn-author-confirm-discard-footer"},zt.createElement("ul",null,zt.createElement("li",null,zt.createElement(Ar,{size:"large",hasFocus:!0,color:"default",text:this.props.noLabel,onClick:function(){return e.props.onClickNo()},lds:this.props.lds})),zt.createElement("li",null,zt.createElement(Ar,{size:"large",color:"primary",text:this.props.yesLabel,onClick:function(){return e.props.onClickYes()},lds:this.props.lds}))))))}},{key:"getStyle",value:function(){var e={};return this.props.positionAbsolute&&(e={position:"absolute",left:0,top:0,height:"100%",width:"100%",padding:"20px"}),this.props.applyZIndex&&a().extend(e,{zIndex:1}),e}},{key:"getTextDivClasses",value:function(){return a().classNames(["lrn-author-prompt-text","lrn-author-confirm-discard-title"])}},{key:"getDescription",value:function(){return!!this.props.description&&zt.createElement("div",{className:"lrn-author-prompt-description"},zt.createElement("p",null,this.props.description))}}])&&$l(t.prototype,n),r&&$l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const eu=Ln((function(e){return{lds:e.initOptions.config.beta_flags.lds}}))(Xl);function tu(e){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nu=["children"];function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ou(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function au(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lu(e,t){return(lu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=du(e);if(t){var i=du(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cu(this,n)}}function cu(e,t){if(t&&("object"===tu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const fu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lu(e,t)}(o,e);var t,n,r,i=uu(o);function o(){return au(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=ou(e,nu),r=zt.Children.map(t,(function(e){return zt.cloneElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}));return zt.createElement("div",{className:"lrn-author-toggle-button-group"},r)}}])&&su(t.prototype,n),r&&su(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bu(e);if(t){var i=bu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vu(this,n)}}function vu(e,t){if(t&&("object"===pu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bu(e){return(bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _u=["lrn-author-toggle-button"],wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gu(e,t)}(o,e);var t,n,r,i=yu(o);function o(){return hu(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this,t=a().classNames(_u,{active:this.props.activeMode===this.props.toggleValue});return zt.createElement("button",{className:t,onClick:function(){return e.props.onToggleMode(e.props.toggleValue)},role:"button"},this.props.label)}}])&&mu(t.prototype,n),r&&mu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wu,"defaultProps",{onToggleMode:a().noop,activeMode:""});const Eu=wu;function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(n),!0).forEach((function(t){Lu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e,t){return(Au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ru(e);if(t){var i=Ru(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mu(this,n)}}function Mu(e,t){if(t&&("object"===Su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Du(e)}function Du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ru(e){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nu=function(e){var t=e.children,n=e.className;return zt.createElement("div",{className:a().classNames(Fu.screen,n)},t)},Iu=function(e){var t=e.children,n=e.className;return zt.createElement("div",{className:a().classNames(Fu.sections,Fu.row,n)},t)},ju=function(e,t){var n=e.selectedAlignableStandards,r=e.selectAlignableStandards,i=t.i18n;return n?zt.createElement("div",{className:Fu.standardsTray},n.map((function(e){return zt.createElement(ml,{key:e.guid,ariaLabel:i.get("standardCodeAriaLabel"),onClose:function(){return r(a().without(a().pluck(n,"guid"),e.guid))}},e.code)}))):null};ju.contextTypes={i18n:jn().instanceOf(Xs)};var Bu="lrn-author-ab-standards-browser",Fu={root:a().classNames(Bu,"lrn-author-ui","lrn-author-ui-no-preview"),sections:"".concat(Bu,"-sections"),row:"".concat(Bu,"-row"),footer:"".concat(Bu,"-footer"),loadingWrapper:"".concat(Bu,"-loading-wrapper"),screen:"".concat(Bu,"-screen"),standardsTray:"".concat(Bu,"-standards-tray"),entryScreen:"".concat(Bu,"-entry-screen"),searchResults:"".concat(Bu,"-search-results"),searchResultsEmpty:"".concat(Bu,"-search-results-empty"),scrollable:"".concat(Bu,"-scrollable"),scrollDisabled:"".concat(Bu,"-scroll-disabled"),fullHeight:"".concat(Bu,"-full-height"),loadMoreWrapper:"".concat(Bu,"-load-more-wrapper")},Yu=1,Hu=2,Vu=3,qu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Au(e,t)}(o,e);var t,n,r,i=Pu(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Lu(Du(t=i.call(this,e)),"state",{pageIndex:Yu,showDiscardChanges:!1,mode:Zn.BROWSE,isPendingDebouncedFunctionCall:!1}),Lu(Du(t),"gotoNext",(function(){var e=t.state.pageIndex;t.setState({pageIndex:e+1})})),Lu(Du(t),"gotoPage",(function(e){t.setState({pageIndex:e})})),Lu(Du(t),"handleFieldChange",(function(e,n){var r=n.currentTarget.value,i=r===Ts.value?null:r;t.props.selectABEntity(e,i)})),Lu(Du(t),"handleSectionSelect",(function(e){t.props.selectABEntity(qn.SECTION,e),t.gotoNext()})),Lu(Du(t),"handleStandardSelect",(function(e){if(t.getStandardByGuid(e).alignable){var n,r=a().contains(t.props.selectedAlignableStandardGuids,e);n=t.props.selectMode===zn.SINGLE?[e]:r?a().without(t.props.selectedAlignableStandardGuids,e):a().uniq(t.props.selectedAlignableStandardGuids.concat([e])),t.props.selectAlignableStandards(n)}})),Lu(Du(t),"handleStandardSelectFromSearchResult",(function(e){var n=Tu(t.props.allStandards.filter((function(t){return t.guid===e})),1)[0];if(!n)throw new Error("[Developer error]: Standard with guid: ".concat(e," not found ")+"in the store");if(n.alignable){var r,i=a().contains(t.props.selectedAlignableStandardGuids,e);r=t.props.selectMode===zn.SINGLE?[e]:i?a().without(t.props.selectedAlignableStandardGuids,e):a().uniq(t.props.selectedAlignableStandardGuids.concat([e])),t.props.selectAlignableStandards(r)}})),Lu(Du(t),"handleDrillDown",(function(e){t.props.selectABEntity(qn.STANDARD,e)})),Lu(Du(t),"handleDone",(function(){t.props.setAppliedAlignableStandards(t.props.selectedAlignableStandardGuids),t.props.applyAlignableStandards(t.props.selectedAlignableStandardGuids),t.props.onClose()})),Lu(Du(t),"handleAllBreadCrumbClick",(function(){var e=t.props.selectedTopicGuid;t.props.selectABEntity(qn.TOPIC,e),t.gotoPage(Yu)})),Lu(Du(t),"handleTopicBreadCrumbClick",(function(){var e=t.props.selectedTopicGuid;t.props.selectABEntity(qn.TOPIC,e),t.gotoPage(Hu)})),Lu(Du(t),"handleSectionBreadCrumbClick",(function(){var e=t.props.selectedSectionGuid;t.props.selectABEntity(qn.SECTION,e),t.gotoPage(Vu)})),Lu(Du(t),"handleStandardBreadCrumbClick",(function(e){t.props.selectABEntity(qn.STANDARD,e)})),Lu(Du(t),"handleClickClose",(function(){t.props.isDirty&&t.props.selectMode===zn.MULTI?t.setState({showDiscardChanges:!0}):t.props.onClose()})),Lu(Du(t),"handleDiscardChangesYes",(function(){t.setState({showDiscardChanges:!1}),t.props.onClose()})),Lu(Du(t),"handleDiscardChangesNo",(function(){t.setState({showDiscardChanges:!1})})),Lu(Du(t),"shouldDisableDoneButton",(function(){if(t.props.selectMode===zn.MULTI)return!t.props.isDirty;var e=t.props.standards,n=void 0===e?[]:e,r=t.props.alignableStandardsByCode,i=void 0===r?[]:r,o=n.concat(i);return!t.props.selectedAlignableStandardGuids.length||o.every((function(e){return!t.isAlignableStandardSelected(e)}))})),Lu(Du(t),"isAlignableStandardSelected",(function(e){var n=e.guid;return a().contains(t.props.selectedAlignableStandardGuids,n)}));var n=e.getAlignableStandardsByCode;return t.debouncedGetAlignableStandardsByCode=a().debounce((function(){n(),t.setState({isPendingDebouncedFunctionCall:!1})}),Jn),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isOpen,n=e.getABEntities;t&&n(qn.AUTHORITY)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.isOpen,i=n.authorities,o=n.publications,a=n.topics,s=n.getABEntities;r&&!e.isOpen&&s(qn.AUTHORITY),[{current:i,previous:e.authorities,entityType:qn.AUTHORITY},{current:o,previous:e.publications,entityType:qn.PUBLICATION},{current:a,previous:e.topics,entityType:qn.TOPIC}].forEach((function(e){var n=e.current,r=e.previous,i=e.entityType;n.length>0&&(n.length!==r.length||n[0].guid!==r[0].guid)&&n.length&&t.props.selectABEntity(i,n[0].guid)}))}},{key:"getStandardByGuid",value:function(e){var t=Tu(this.props.standards.filter((function(t){return t.guid===e})),1)[0];if(!t)throw new Error("[Developer error]: Standard with guid: ".concat(e," should exist in ")+"the currently displayed list of standards");return t}},{key:"renderBreadCrumbs",value:function(){var e=this,t=this.props,n=t.topics,r=t.selectedTopicGuid,i=t.sections,o=t.selectedSectionGuid,s=t.ancestorStandards,l=this.context.i18n,u=Tu(n.filter((function(e){return e.guid===r})),1)[0],c=Tu(i.filter((function(e){return e.guid===o})),1)[0],d=u&&"".concat(u.name," (").concat(u.adopt_year,")"),f=c&&c.name;return zt.createElement("div",{className:Fu.row},zt.createElement(il,{truncateItems:!0},zt.createElement("span",{onClick:this.handleAllBreadCrumbClick},l.get("standardsBrowserAllBreadCrumb")),u&&zt.createElement("span",{title:d,onClick:c?this.handleTopicBreadCrumbClick:a().noop},d),c&&zt.createElement("span",{title:f,onClick:s&&s.length?this.handleSectionBreadCrumbClick:a().noop},f),s.map((function(t,n){var r=t.guid,i=t.number,o=void 0===i?{}:i,l=t.description,u=o.raw||o.enhanced,c=u?"".concat(u," ").concat(l):l;return zt.createElement("span",{title:c,key:r,onClick:n<s.length-1?e.handleStandardBreadCrumbClick.bind(e,r):a().noop},c)}))))}},{key:"renderPrimaryNavigation",value:function(){var e=this.context.i18n;return zt.createElement("div",{className:Fu.row},zt.createElement(fu,{onToggleMode:this.onToggleMode.bind(this),activeMode:this.state.mode},zt.createElement(Eu,{toggleValue:Zn.BROWSE,label:e.get("standardsBrowserCategorySearchLabel")}),zt.createElement(Eu,{toggleValue:Zn.SEARCH,label:e.get("standardsBrowserCodeSearchLabel")})))}},{key:"onToggleMode",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){var e,t,n,r=this,i=this.props,o=i.areStandardsEnabled,s=i.isOpen,l=i.isFetching,u=i.authorities,c=i.publications,d=i.sections,f=i.standards,p=i.alignableStandardsByCode,h=i.setStandardSearchCode,m=i.standardSearchCode,g=i.selectedAuthorityGuid,y=i.selectedPublicationGuid,v=i.selectedTopicGuid,b=i.selectedAlignableStandards,_=i.selectedAlignableStandardGuids,w=i.selectMode,E=i.isHidden,S=i.hasNextPage,x=i.getAlignableStandardsByCode,k=this.context.i18n,T=this.state,O=T.pageIndex,C=T.showDiscardChanges,A=k.get("standardsBrowserTitle");if(v&&1!==O){var P=Tu(u.filter((function(e){return e.guid===g})),1)[0],M=Tu(c.filter((function(e){return e.guid===y})),1)[0],D=["".concat(A,": ").concat(P.name),zt.createElement("span",{key:1,className:"lrn-i-next lrn-i-next-small"}),M.name],R=ks([D[0],D[2]],">").join(" ");A=zt.createElement("span",{title:R},ks(D," ")),t=this.renderBreadCrumbs()}var L=this.renderPrimaryNavigation(),N=function(e){var t=e.authorities,n=e.publications,r=e.topics,i=e.selectedAuthorityGuid,o=e.selectedPublicationGuid,a=e.selectedTopicGuid,s=e.isFetching,l=e.i18n;return[{label:l.get("standardsBrowserAuthorityLabel"),entityType:qn.AUTHORITY,options:As(t),value:i,disabled:s[qn.AUTHORITY]||Os(i)},{label:l.get("standardsBrowserPublicationLabel"),entityType:qn.PUBLICATION,options:As(n),value:o,disabled:s[qn.PUBLICATION]||Os(o)},{label:l.get("standardsBrowserTopicLabel"),entityType:qn.TOPIC,options:Ps(r),value:a,disabled:s[qn.TOPIC]||Os(a)}]}(ku(ku({},this.props),{},{i18n:k})),I=(b||[]).length>0&&w===zn.MULTI&&zt.createElement(ju,{selectedAlignableStandards:b,selectAlignableStandards:this.props.selectAlignableStandards}),j=!C&&O===Yu,B=!C&&O===Hu,F=!C&&O===Vu,Y=this.state.mode===Zn.SEARCH,H=(p||[]).length>0,V=this.state.isPendingDebouncedFunctionCall&&!H||l[qn.STANDARD],q=V?"":k.get("standardsBrowserSearchEmpty");return!j||l[qn.AUTHORITY]||Y?(F&&f.some((function(e){return!0===e.alignable}))||Y)&&(n=zt.createElement("div",{className:Fu.footer},zt.createElement(ql,{disabled:this.shouldDisableDoneButton(),onClick:this.handleDone}))):n=zt.createElement("div",{className:Fu.footer},zt.createElement(Wl,{disabled:N.some((function(e){return Os(e.value)})),onClick:this.gotoNext})),o&&s?zt.createElement(ps,{title:A,onClose:this.handleClickClose,className:Fu.root,footer:n,isHidden:E},C&&zt.createElement(eu,{positionAbsolute:!0,applyZIndex:!0,text:k.get("standardsBrowserDiscardChangesTitle"),onClickYes:this.handleDiscardChangesYes,onClickNo:this.handleDiscardChangesNo,yesLabel:k.get("standardsBrowserDiscardChangesYes"),noLabel:k.get("standardsBrowserDiscardChangesNo")}),j&&!Y&&zt.createElement(Nu,{className:a().classNames(Fu.loadingWrapper,Fu.entryScreen)},L,zt.createElement(va,{isLoading:l[qn.AUTHORITY]},zt.createElement(Vs,{fields:N,onFieldChange:this.handleFieldChange})),I),B&&!Y&&zt.createElement(Nu,null,L,t,zt.createElement(Iu,{className:Fu.loadingWrapper},zt.createElement(va,{isLoading:l[qn.SECTION]},zt.createElement(fl,{sections:d,onSelect:this.handleSectionSelect}))),I),F&&!Y&&zt.createElement(Nu,null,L,t,zt.createElement(Iu,{className:Fu.loadingWrapper},zt.createElement(va,{isLoading:V},(f||[]).length>0&&zt.createElement(Hl,{standards:f,selectedAlignableStandardGuids:_,onSelect:this.handleStandardSelect,selectMode:w,onDrillDown:this.handleDrillDown}))),I),Y&&zt.createElement(Nu,{className:a().classNames(Fu.loadingWrapper,Fu.entryScreen)},L,zt.createElement("div",{className:Fu.row},zt.createElement(Ss,{value:m,label:k.get("standardsBrowserSearchLabel"),startIconClassName:"lrn-i-search",onChange:function(e){r.setState({isPendingDebouncedFunctionCall:!0});var t=e.currentTarget.value;h(t),r.debouncedGetAlignableStandardsByCode()}})),zt.createElement(Iu,{className:a().classNames(Fu.searchResults,Fu.loadingWrapper,Lu({},Fu.searchResultsEmpty,!H||!V))},zt.createElement(va,{isLoading:V,overlaySpinner:!0,extraClasses:a().classNames(Fu.scrollable,(e={},Lu(e,Fu.fullHeight,V||H),Lu(e,Fu.scrollDisabled,V),e))},H?zt.createElement(Hl,{standards:p,selectedAlignableStandardGuids:_,onSelect:this.handleStandardSelectFromSearchResult,selectMode:w}):zt.createElement("span",null,q),S&&zt.createElement("div",{className:Fu.loadMoreWrapper},zt.createElement(Ar,{text:k.get("standardsBrowserLoadMoreButton"),variant:"outlined",onClick:function(){return x({next:!0})},disabled:V})))),I)):null}}])&&Cu(t.prototype,n),r&&Cu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Lu(qu,"defaultProps",{selectMode:zn.SINGLE,authorities:[],publications:[],topics:[],sections:[],standards:[],isHidden:!1}),qu.contextTypes={i18n:jn().instanceOf(Xs)};const Uu=Ln((function(e){return{areStandardsEnabled:Jr(e),isOpen:Qr(e),authorities:ri(e),publications:ii(e),topics:ai(e),sections:si(e),standards:ui(e),allStandards:li(e),standardSearchCode:gi(e),alignableStandardsByCode:ci(e),ancestorStandards:di(e),selectedAuthorityGuid:fi(e),selectedPublicationGuid:pi(e),selectedTopicGuid:hi(e),selectedSectionGuid:mi(e),selectedAlignableStandards:vi(e),selectedAlignableStandardGuids:yi(e),isFetching:ei(e),isDirty:wi(e),hasNextPage:Xr(e)}}),{onClose:zi,getABEntities:Zi,getAlignableStandardsByCode:ro,setStandardSearchCode:to,selectABEntity:Ji,applyAlignableStandards:Qi,setAppliedAlignableStandards:eo,selectAlignableStandards:Xi})(qu);function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $u(e,t){return($u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qu(e);if(t){var i=Qu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zu(this,n)}}function Zu(e,t){if(t&&("object"===Wu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ju(e)}function Ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qu(e){return(Qu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ec="lrn-author-ab-standards-list",tc={root:ec,item:"".concat(ec,"-item"),description:"".concat(ec,"-description"),emptyWrapper:"".concat(ec,"-empty-wrapper"),emptyHeader:"".concat(ec,"-empty-header"),emptyDescription:"".concat(ec,"-empty-description")},nc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$u(e,t)}(o,e);var t,n,r,i=Ku(o);function o(){var e;zu(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xu(Ju(e=i.call.apply(i,[this].concat(n))),"handleCheckboxChange",(function(t,n){e.props.onSelectChange({guid:t,selected:n.currentTarget.checked})})),e}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.standards,r=t.selectable,i=this.context.i18n;return zt.createElement("div",{className:tc.root},0===n.length?zt.createElement("div",{className:tc.emptyWrapper},zt.createElement("div",null,zt.createElement("p",{className:tc.emptyHeader},i.get("linkedStandardsModalEmptyHeader")),zt.createElement("span",{className:tc.emptyDescription},i.get("linkedStandardsModalEmptyDescription")))):n.map((function(t){return zt.createElement("div",{className:tc.item,key:t.guid},r&&zt.createElement(Bl,{checked:!0===t.selected,onChange:e.handleCheckboxChange.bind(e,t.guid)}),zt.createElement(bl,{code:t.code,description:t.description}))})))}}])&&Gu(t.prototype,n),r&&Gu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Xu(nc,"contextTypes",{i18n:jn().object}),Xu(nc,"defaultProps",{selectable:!1,onSelectChange:a().noop});const rc={actions:n,constants:e,reducer:function(e,t){var n=Io({authorities:Io(aa({byGuid:Ko,allGuids:Jo,isFetching:na},ia(qn.AUTHORITY),qn.AUTHORITY)),publications:Io(aa({byGuid:Ko,byParentGuid:Go,isFetching:na},ia(qn.PUBLICATION),qn.PUBLICATION)),topics:Io(aa({byGuid:Ko,byParentGuid:Go,isFetching:na},ia(qn.TOPIC),qn.TOPIC)),sections:Io(aa({byGuid:Ko,byParentGuid:Go,isFetching:na},ia(qn.SECTION),qn.SECTION)),standards:Io(aa({byGuid:Ko,byCode:Zo,byParentGuid:Go,isFetching:na},ia(qn.STANDARD),qn.STANDARD)),browser:Io({isOpen:zo,authorities:Io({selectedGuid:$o(Qo,ia(qn.AUTHORITY),qn.AUTHORITY)}),publications:Io({selectedGuid:$o(Qo,oa([qn.AUTHORITY,qn.PUBLICATION]),qn.PUBLICATION)}),topics:Io({selectedGuid:$o(Qo,oa([qn.AUTHORITY,qn.PUBLICATION,qn.TOPIC]),qn.TOPIC)}),sections:Io({selectedGuid:$o(Qo,oa([qn.AUTHORITY,qn.PUBLICATION,qn.TOPIC,qn.SECTION]),qn.SECTION)}),standards:Io({searchCode:ea,selectedAncestorGuids:Xo,selectedAlignableGuids:ta})}),appliedAlignableGuids:ra})(e,t);return t.type===Mr&&(n.browser.standards=a().clone(n.browser.standards),n.browser.standards.selectedAlignableGuids=n.appliedAlignableGuids),n},selectors:t,initialState:Wo};function ic(e,t){var n=e.onClick;return zt.createElement(Ar,{size:"large",variant:"outlined",onClick:n,extraClasses:"lrn-btn-full-width"},zt.createElement("span",{className:"lrn-i-filter"}),zt.createElement("span",{className:"lrn-item"},t.i18n.get("standardsButtonText")))}ic.contextTypes={i18n:jn().object};var oc={onClick:rc.actions.openBrowser};const ac=Ln(null,oc)(ic);function sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const lc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.allowed_workflow_states?t.allowed_workflow_states=t.allowed_workflow_states.map((function(e){return e.toUpperCase()})):t.allowed_workflow_states=t.workflow_states.map((function(e){return e.reference.toUpperCase()})),this.workflowSettings=t}var t,n,r;return t=e,(n=[{key:"states",get:function(){return this.workflowSettings.workflow_states}},{key:"allowedStates",get:function(){return this.workflowSettings.allowed_workflow_states}},{key:"isFiltered",get:function(){return this.workflowSettings.isFiltered}},{key:"initialState",get:function(){return this.workflowSettings.initial_state_reference}},{key:"getStateData",value:function(e){return a().findWhere(this.states,{reference:e})}},{key:"getAvailableStates",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.states.filter((function(n){return!t||e.allowedStates.indexOf(n.reference)>-1})).map((function(e){return{label:e.label,reference:e.reference}}));return a().sortBy(n,"label")}},{key:"getAvailableTransitionStates",value:function(e){var t=a().findWhere(this.states,{reference:e}),n=this.allowedStates.indexOf(e)>-1,r=[];if(!t||!n)return r;var i=t.workflow_transitions;return i&&(r=i.map((function(e){return{text:e.to_state_label,value:e.to_state_reference}}))),r}}])&&sc(t.prototype,n),r&&sc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uc(e){return(uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){fc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mc(){return(mc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=gc(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function gc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_c(e)););return e}function yc(e,t){return(yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_c(e);if(t){var i=_c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bc(this,n)}}function bc(e,t){if(t&&("object"===uc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(o,e);var t,n,r,i=vc(o);function o(){return pc(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"INPUT_ID_PREFIX",get:function(){return"lrn_search_"}},{key:"EXPAND_TARGET_ATTR",get:function(){return"authorapi-target"}},{key:"SELECTORS",get:function(){return a().extend(mc(_c(o.prototype),"SELECTORS",this),{hierarchySearchPopup:'[data-authorapi-selector="search-hierarchy"]',hierarchyControls:'[data-authorapi-selector="hierarchy-controls-wrapper"]',tagSearchHTML:".lrn-form-tags-section",tagSearchWrapper:".lrn-form-tags-section-wrapper",generalSearchWrapper:".lrn-itemlist-general-search",showAdvancedSearchButton:'.lrn-input-group-btn[data-authorapi-target="search-advanced"]',standardsButtonWrapper:'[data-authorapi-selector="standards-button-wrapper"]',workflowButtonWrapper:'[data-authorapi-selector="workflow-select-wrapper"]',searchCheckboxLabel:'[data-authorapi-selector="search-control-checkbox-label"]',showInfoField:'[data-authorapi-selector="show-info-field-',infoFieldToggler:'[data-authorapi-selector="info-field-toggler-'})}},{key:"HIDDEN_WIDGET_TYPES",get:function(){return["counter","scrollablepassage","formula","formula_dev"]}},{key:"OPTGROUP_COMMON",get:function(){return["mcq","clozeassociation","clozedropdown","clozeformula","longtextV2","sharedpassage"]}},{key:"events",get:function(){var e,t,n=a().extend(It.prototype.events,(fc(e={'change [data-authorapi-selector="general-search"] input':"updateModel",'change [data-authorapi-selector="general-search"] select':"updateModel",'keyup [data-authorapi-selector="general-search"] input':"updateModel"},"click ".concat(this.SELECTORS.searchCheckboxLabel),"handleCheckboxClick"),fc(e,"keydown ".concat(this.SELECTORS.searchCheckboxLabel),"handleCheckboxKeydown"),e));return this.showEnableLeftPartialRefMatch&&(n=a().extend(n,(fc(t={},"keydown ".concat(this.SELECTORS.basicSearchInput),"handleKeydownOnAdvanced"),fc(t,"click ".concat(this.SELECTORS.basicSearchInput),"showAdvanced"),t))),n}},{key:"handleCheckboxKeydown",value:function(e){e.keyCode!==Fa&&e.keyCode!==ja||(e.preventDefault(),this.handleCheckboxClick(e))}},{key:"handleCheckboxClick",value:function(e){var t=this.$(e.currentTarget).attr("id"),n=this.$("#".concat(t,"_input")),r=n.prop("checked"),i=n.attr("name");n.prop("checked",!r),this.model.set(i,!r)}},{key:"inputEvents",get:function(){return{buildGeneralSearch:"buildGeneralSearch",resetGeneralSearch:"resetGeneralSearch"}}},{key:"template",get:function(){return"itemList/toolbar/search"}},{key:"initialize",value:function(){c.Courier.add(this),this.fields={},this.addListeners(),this.tagSearchViews=[],this.generateTagsInputIds(),this.initOptionsModel=this.dataManager.initOptionsModel,this.searchConfig=this.initOptionsModel.getItemSearchConfig(this.isItemPicker);var e=this.dataManager.initOptionsModel.getItemWorkflow();e&&(this.workflowUtil=new lc(e)),this.showEnableLeftPartialRefMatch=this.searchConfig.controls.indexOf("reference")>-1&&this.initOptionsModel.isTogglingOfLeftWildcardEnabled(),this.showItembankSearchTooltip=this.initOptionsModel.getItembankSearchEnabled(),this.showEnableLeftPartialRefMatch&&a().isUndefined(this.model.get("enableLeftPartialRefMatch"))&&this.model.set("enableLeftPartialRefMatch",!1)}},{key:"remove",value:function(){this.removeStandardsButton(),c.View.prototype.remove.call(this)}},{key:"renderStandardsButton",value:function(){var e=this.el.querySelector(this.SELECTORS.standardsButtonWrapper),t=this.serialize(),n=t.search||t.add;e&&mr.render(zt.createElement(zt.Fragment,null,zt.createElement(ac,null),n&&zt.createElement("div",{className:"lrn-author-vertical-divider lrn-col-lg-only"})),e,this.getContext())}},{key:"removeStandardsButton",value:function(){var e=this.el.querySelector(this.SELECTORS.standardsButtonWrapper);e&&mr.unmountComponentAtNode(e)}},{key:"afterRender",value:function(){if(this.renderStandardsButton(),this.cacheFields(),this.renderHierarchyControls(),this.renderTagSearchInputs(),this.renderWorkflowSearch(),this.options.shouldBuildGeneralSearch&&this.buildGeneralSearch(),this.showItembankSearchTooltip){var e=this.SELECTORS.infoFieldToggler+'ReferenceToken"]';this.$el.find(e).on("click",function(){this.$el.find(this.SELECTORS.showInfoField+'ReferenceToken"]').toggleClass("lrn-hide").toggleClass("lrn-author-flex")}.bind(this))}}},{key:"renderWorkflowSearch",value:function(){if(this.workflowUtil){var e=this.workflowUtil.getAvailableStates();this.workflowUtil.isFiltered||e.push({label:this.i18n.get("workflowUnassigned"),reference:"Unassigned"});var t=new Wt({model:this.model,workflowStates:e,selected:this.model.get("filteredWorkflowState"),i18n:this.i18n});this.insertView(this.SELECTORS.workflowButtonWrapper,t),t.render()}}},{key:"renderHierarchyControls",value:function(){var e,t=this,n=this.initOptionsModel.getBrowseControls();a().isEmpty(n)||(e=this.$(this.SELECTORS.hierarchyControls),a().each(e,(function(e){new nt({el:e,model:t.model,dataManager:t.dataManager,controls:n,tagsUtil:t.options.tagsUtil,i18n:t.i18n}).render()})))}},{key:"serialize",value:function(){var e={},t={},n=this.options.widgetTypePossibilities,r=this.model.get("widgetType"),i=this.initOptionsModel.getABStandardsConfig();if(r||(e.noWidgetType=!0),a().each(this.OPTGROUP_COMMON,(function(e){a().has(n.questions,e)&&(t[e]=n.questions[e]),a().has(n.features,e)&&(t[e]=n.features[e])})),e.widgetGroups=[this.getWidgetListForDisplay("Common",t,!1),this.getWidgetListForDisplay("Questions",n.questions,!0,r),this.getWidgetListForDisplay("Features",n.features,!0,r)],e.viewId=this.INPUT_ID_PREFIX+this.cid,a().each(this.tagsInputIds,(function(t,n){e[n+"TagsId"]=t})),this.addControlData(e),e.statusOptions=jt.getStatusOptions(this.initOptionsModel.getRestrictedStatuses(),this.model.get("status"),this.i18n),e.add=this.options.config.add,e.showHierarchy=!this.hierarchyControlsDisabled&&!a().isEmpty(this.initOptionsModel.getBrowseControls()),e.showWidgetSearch=this.searchConfig.widget_type,e.showTagSearch=this.searchConfig.show&&this.searchConfig.tags.show,e.searchControls=this.searchConfig.controls,e.defaultExtraClass="",this.workflowUtil&&!this.isItemPicker&&(e.showWorkflowSearch=!0),e.showStatusSearch=this.searchConfig.status,this.showTagSearch=e.showTagSearch,this.showOneControlOnly=!(1!==e.controls.length||this.showEnableLeftPartialRefMatch||e.showWidgetSearch||e.showStatusSearch||e.showWorkflowSearch),e.showAdvancedSearch=!this.showOneControlOnly||this.showTagSearch,e.showAdvancedSearch||(e.defaultExtraClass="lrn-form-control-with-border"),e.showGeneralSearch=this.searchConfig.show,e.showStandardsButton=i.enable&&i.filter,this.showEnableLeftPartialRefMatch){e.showEnableLeftPartialRefMatch=!0;var o=a().capitalize(e.searchControls[0]);e.i18nAdvancedPlaceholder=this.i18n.get("searchAdvancedPlaceholder".concat(o))}return e.search=this.searchConfig.show||e.showHierarchy,e}},{key:"addControlData",value:function(e){e.controls=[],a().each(this.searchConfig.controls,(function(t,n){var r=a().capitalize(t),i=this.i18n.get("search"+r),o=this.i18n.get("search"+r+"Placeholder"),s={currentValue:this.model.get(t),name:t,i18nLabel:i,i18nPlaceholder:o};"reference"===t&&(this.showEnableLeftPartialRefMatch&&(s=dc(dc({},s),this._addPartialMatchControl())),this.showItembankSearchTooltip&&(s=dc(dc({},s),this._addFieldInfoToggler("ReferenceToken")))),e.controls.push(s),0===n&&(e.generalSearchDefault=s)}),this)}},{key:"_addFieldInfoToggler",value:function(e){return{showInfoToggler:!0,infoName:e,i18nInfoText:this.i18n.get("searchField"+e+"Info"),i18nFieldTogglerInfo:this.i18n.get("searchFieldTogglerInfo")}}},{key:"_addPartialMatchControl",value:function(){var e="enableLeftPartialRefMatch",t={showCheckbox:!0,checkboxName:e,selected:this.model.get(e),i18nCheckboxLabel:this.i18n.get(e+"Label"),i18nCheckboxText:this.i18n.get(e+"Text")};return t.i18nPlaceholder=this.i18n.get("searchBeginningReferencePlaceholder"),t}},{key:"changeAdvancedSearchVisibility",value:function(e){this.$el.find(this.SELECTORS.showAdvancedSearchButton).toggleClass("lrn-hide",e),this.$el.find(this.SELECTORS.advancedSearch).toggleClass("lrn-hide",e),this.$el.find(this.SELECTORS.basicSearchInput).toggleClass("lrn-form-control-with-border",e)}},{key:"resetGeneralSearch",value:function(){this.generalSearchIsBuilt&&(this.$el.find(this.SELECTORS.generalSearchWrapper+" "+this.SELECTORS.tagSearchHTML).appendTo(this.SELECTORS.tagSearchWrapper),this.generalSearchIsBuilt=!1),this.showOneControlOnly&&this.showTagSearch&&this.changeAdvancedSearchVisibility(!0)}},{key:"buildGeneralSearch",value:function(){this.generalSearchIsBuilt||(this.$el.find(this.SELECTORS.tagSearchWrapper+" "+this.SELECTORS.tagSearchHTML).appendTo(this.SELECTORS.generalSearchWrapper),this.generalSearchIsBuilt=!0),this.showOneControlOnly&&this.showTagSearch&&this.changeAdvancedSearchVisibility(!1)}},{key:"getWidgetListForDisplay",value:function(e,t,n,r){var i=this,o=[];return a().each(t,(function(e,t){a().contains(i.HIDDEN_WIDGET_TYPES,t)||o.push({value:t,prettyName:e,selected:r===t})})),{label:e,widgetList:n?a().sortBy(o,"prettyName"):o}}},{key:"getSelectorForClosenessCheck",value:function(){return mc(_c(o.prototype),"getSelectorForClosenessCheck",this).call(this)+","+this.SELECTORS.hierarchySearchPopup}},{key:"disableHierarchyControls",value:function(){this.hierarchyControlsDisabled=!0}}])&&hc(t.prototype,n),r&&hc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(It);const Ec=function(){return function(e,t,n){var r=n.component.getSearchModel(),i=n.shell.getContext().abAlignedTagTypeUtil.filterNonABTags(r.get("tags").all);r.setTags("all",i),n.component.componentView.navigateToSearchQuery()}};function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ac(e);if(t){var i=Ac(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cc(this,n)}}function Cc(e,t){if(t&&("object"===Sc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ac(e){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tc(e,t)}(o,e);var t,n,r,i=Oc(o);function o(){return xc(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.abStandardsEnabled,n=e.appliedAlignableStandard,r=this.context.i18n,i=n&&n.code?n.code:"";return t&&n?zt.createElement("span",null,zt.createElement("dt",{"data-authorapi-selector":"standard-tags-title"},r.get("standardsFilterText"),":"),zt.createElement("dd",null,zt.createElement("div",{className:"lrn-label-group"},zt.createElement("div",{className:"lrn-label-group-inner"},zt.createElement("div",{className:"lrn-label lrn-text-small"},i),zt.createElement("button",{type:"button",className:"lrn-label-group-btn lrn-i-cross","aria-label":"Remove standard","data-authorapi-selector":"delete-btn",onClick:this.props.clearStandards}))))):null}}])&&kc(t.prototype,n),r&&kc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Pc.contextTypes={i18n:jn().object};const Mc=Ln((function(e){return{abStandardsEnabled:rc.selectors.getAreStandardsEnabled(e),appliedAlignableStandard:rc.selectors.getAppliedAlignableStandards(e)[0]}}),{clearStandards:Ec})(Pc);function Dc(e){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nc(e,t){return(Nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bc(e);if(t){var i=Bc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jc(this,n)}}function jc(e,t){if(t&&("object"===Dc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Bc(e){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nc(e,t)}(o,e);var t,n,r,i=Ic(o);function o(){return Rc(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{allTagsTitle:'[data-authorapi-selector="all-tags-title"]',eitherTagsTitle:'[data-authorapi-selector="either-tags-title"]',excludeTagsTitle:'[data-authorapi-selector="exclude-tags-title"]',standardsFilterWrapper:'[data-authorapi-selector="standards-filter-wrapper"]'}}},{key:"events",get:function(){return{'click [data-authorapi-selector="remove-criterion-btn"]':"removeCriterion",'click [data-authorapi-selector="clear-btn"]':"clearSearch"}}},{key:"onMessages",get:function(){return{removeTag:"removeTag"}}},{key:"template",get:function(){return"shared/searchState"}},{key:"initialize",value:function(){c.Courier.add(this),this.tagViews=[],this.showStatusSearch=!0,this.options.config&&!1===this.options.config.showStatusSearch&&(this.showStatusSearch=!1)}},{key:"removeStandardsFilterButton",value:function(){var e=this.el.querySelector(this.SELECTORS.standardsFilterWrapper);e&&mr.unmountComponentAtNode(e)}},{key:"renderStandardsFilterButton",value:function(){var e=this.el.querySelector(this.SELECTORS.standardsFilterWrapper);e&&mr.render(zt.createElement(Mc,null),e,this.getContext())}},{key:"afterRender",value:function(){this.model.hasSearch(this.omitKeys)&&this.renderStandardsFilterButton(),this.renderTags()}},{key:"remove",value:function(){this.removeStandardsFilterButton(),c.View.prototype.remove.call(this)}},{key:"beforeRender",value:function(){a()(this.tagViews).invoke("remove"),this.tagViews=[]}},{key:"clearSearch",value:function(){this.spawn("clearSearch")}},{key:"getTagsCriteria",value:function(){var e=this.getContext(),t=e.abAlignedTagTypeUtil,n=e.app.initOptionsModel.getABStandardsConfig().enable?function(e){return!t.isAbTag(e)}:void 0;return this.model.getKeysForTagsWithValues(n)}},{key:"removeCriterion",value:function(e){var t=f()(e.currentTarget).data("criterion");this.model.set(t,""),this.spawn("search",{removeCriterion:!0})}},{key:"orderHierarchyTags",value:function(e){return a().filter(e,(function(e){return"hierarchy"===e.source}))}},{key:"removeTag",value:function(e,t){var n,r,i;if(t.tag.source&&"hierarchy"===t.tag.source){n=a().indexOf(this.model.get("hierarchyPath"),t.tag),r=this.orderHierarchyTags(this.model.get("tags").all),i=Math.abs(n-r.length);for(var o=0;o<i;o++)this.model.removeTag("all",r[o])}else this.model.removeTag(t.criterion,t.tag);this.spawn("search",{removeTag:!0})}},{key:"renderTags",value:function(){var e=this.getContext(),t=e.abAlignedTagTypeUtil,n=e.app.initOptionsModel.getABStandardsConfig().enable,r=this.getTagsCriteria();a().each(r,(function(e){var r=this.$(this.SELECTORS[e+"TagsTitle"]),i=this.model.getTags(e);n&&(i=t.filterNonABTags(i)),a().each(i,(function(t){var n=new ct({tagName:"dd",tag:t,criterion:e,i18n:this.i18n});r.after(n.render().el)}),this)}),this)}},{key:"serialize",value:function(){var e,t={},n=this.model.getSimpleKeys(),r=this.getTagsCriteria(),i=this.model.get("status");return!1===this.showStatusSearch&&(n=a().without(n,"status")),a().each(n,(function(e){t[e]=this.model.get(e)}),this),a().each(r,(function(e){t[e+"Tags"]=!0})),a().isEmpty(i)||!1===this.showStatusSearch||(t.status={value:i,label:this.i18n.getStatusLabel(i)}),t.showTitle=a().getNested(this.options,"config.title.show"),this.omitKeys=[],this.isActivity&&(t.showTitle?(e="titleOrReferenceOrDescription",t.searchStringName=this.i18n.get("searchTitleReferenceDescription"),this.omitKeys.push("referenceOrDescription")):(e="referenceOrDescription",t.searchStringName=this.i18n.get("searchReferenceDescription"),this.omitKeys.push("titleOrReferenceOrDescription")),t.searchString=this.model.get(e),t.criterion=e),!1===this.showStatusSearch&&this.omitKeys.push("status"),t.hasSearch=this.model.hasSearch(this.omitKeys),t}}])&&Lc(t.prototype,n),r&&Lc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return(qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zc(e);if(t){var i=zc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wc(this,n)}}function Wc(e,t){if(t&&("object"===Yc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zc(e){return(zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qc(e,t)}(o,e);var t,n,r,i=Uc(o);function o(){return Hc(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"MESSAGES",get:function(){return{search:"search"}}},{key:"onMessages",get:function(){return{clearSearch:"clearSearch",search:"search"}}},{key:"search",value:function(e){this.spawn(this.MESSAGES.search,e)}},{key:"clearSearch",value:function(){this.searchModel.reset(),this.render().search({clearSearch:!0})}},{key:"getSearchQuery",value:function(){return this.searchModel.toJSON()}},{key:"_getFocusable",value:function(){var e=["a[href]",'input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","area[href]","iframe","object","embed"].join();return this.$(e)}},{key:"focus",value:function(){var e=this._getFocusable();e&&e.length&&e.first().focus()}}])&&Vc(t.prototype,n),r&&Vc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.Layout);function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jc(e,t){return(Jc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ed(e);if(t){var i=ed(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xc(this,n)}}function Xc(e,t){if(t&&("object"===$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ed(e){return(ed=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var td,nd,rd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jc(e,t)}(o,e);var t,n,r,i=Qc(o);function o(){return Kc(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"MESSAGES",get:function(){return{search:"searchItems"}}},{key:"SELECTORS",get:function(){return{searchOutlet:'[data-authorapi-view="search"]',stateOutlet:'[data-authorapi-view="state"]'}}},{key:"events",get:function(){return{'click [data-authorapi-selector="toolbar-new-item-btn"]':"createNewItem"}}},{key:"template",get:function(){return"itemList/toolbar"}},{key:"initialize",value:function(e){this.componentController=e.componentController,c.Courier.add(this),this.dataManager=e.dataManager,this.searchModel=e.searchModel,this.initOptionsModel=e.dataManager.initOptionsModel,this.isItemPicker=e.isItemPicker}},{key:"beforeRender",value:function(){this.searchView=new wc({el:!1,model:this.searchModel,tagsUtil:this.options.tagsUtil,dataManager:this.dataManager,widgetTypePossibilities:this.options.questionFeatureList,config:this.options.config,componentController:this.componentController,i18n:this.i18n,shouldBuildGeneralSearch:this.options.shouldBuildGeneralSearch,isItemPicker:this.isItemPicker,initOptionsModel:this.initOptionsModel}),this.stateView=new Fc({model:this.searchModel,config:this.options.config,i18n:this.i18n,initOptionsModel:this.initOptionsModel}),this.insertView(this.SELECTORS.searchOutlet,this.searchView),this.insertView(this.SELECTORS.stateOutlet,this.stateView)}},{key:"remove",value:function(){c.View.prototype.remove.call(this)}},{key:"createNewItem",value:function(){this.spawn("createNewItem")}},{key:"onSearchItems",value:function(){this.searchView.hideAdvanced(),this.stateView.render()}},{key:"serialize",value:function(){return this.options.config}}])&&Zc(t.prototype,n),r&&Zc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gc),id={duplicateItemConfirm:"itemduplicate:confirm",duplicateActivityConfirmationScreenOpen:"activityduplicate:confirmationscreen:open",duplicateActivityConfirmationScreenClose:"activityduplicate:confirmationscreen:close",navigate:"navigate",openItem:"open:item",renderItem:"render:item",renderWidgets:"render:widgets",save:"save",saveSuccess:"save:success",saveError:"save:error",saveActivity:"save:activity",saveActivitySuccess:"save:activity:success",duplicateActivitySuccess:"activityduplicate:success",duplicateActivityError:"activityduplicate:error",saveActivityError:"save:activity:error",addWidget:"add:widget",openActivity:"open:activity",renderItemList:"render:itemlist",renderItemListError:"render:itemlist:error",renderActivityList:"render:activitylist",renderQuestionList:"render:questionlist",renderActivity:"render:activity",itemEditChanged:"itemedit:changed",itemListSelectionChanged:"itemlist:selection:changed",itemSettingsApplied:"itemsettings:applied",activityEditItemsAdded:"activityedit:items:added",activityEditItemCreate:"activityedit:item:create",activityEditItemEdit:"activityedit:item:edit",activityEditSaveableChanged:"activityedit:saveable:changed",questionEditValidationChanged:"questionedit:validation:changed"},od=[];function ad(e){if("string"!=typeof e)throw new Error("`PublicEvent` must have an event name");if(!ad.eventNameIsValid(e))throw new Error("`PublicEvent` must have a whitelisted event name");this.name=e,this.data={},this._internal={isDefaultPrevented:!1}}ad.EVENTS=id,nd=ad.prototype,ad.eventNameIsValid=function(e){var t,n=!1,r=ad.getValidEvents();for(t=0;t<r.length;t++)e===r[t]&&(n=!0);return n},ad.getValidEvents=function(){if(!od.length)for(td in id)id.hasOwnProperty(td)&&od.push(id[td]);return od},nd.isDefaultPrevented=function(){return this._internal.isDefaultPrevented},nd.preventDefault=function(e){this._internal.isDefaultPrevented=!0,a().isEmpty(e)||(this._internal.preventArguments=e)},nd.setData=function(e,t){a().extend({clone:!0},t).clone?this.data=a().cloneDeep(e):this.data=e};const sd=ad,ld=c.View.extend({SELECTORS:{items:'[data-authorapi-view="items"]',mainContainer:j},END_POINTS:{advanced:"/itembank/tagging/tags/search",supplementary:"/itembank/tagging/tags"},template:"itemList/itemList",onMessages:{createNewItem:"createNewItem",getNext:"getNext",getPrevious:"getPrevious",openItem:"openItem",searchItems:"navigateToSearchQuery",selectedItemsChanged:"fireSelectedItemsChanged",displayTotal:"fetchTotal"},passMessages:{startLoadingRequest:".",completeLoadingRequest:"."},initialize:function(e,t,n,r){var i=this,o=e.componentController.app,s=e.initOptionsModel,l=e.itemModel,u=e.search,d={comms:t.comms,advanced:{url:this.END_POINTS.advanced}},p=this.initOptionsModel.getSupplementaryTags();if(c.Courier.add(this),this.dataManager=t,this.initOptionsModel=s,this.$mainContainer=f()(this.SELECTORS.mainContainer),this.itemCollection=t.getItemCollection(this.getItemCollectionName()),this.itemCollection.on("fetchNext:finished",(function(){a()(i.itemsPaginationViews).invoke("renderWithPageMetadata",i.itemCollection.getPageMetadata())})),this.metricsUtil=r,this.app=o,l&&l.saved){var h=l.get("item_id"),m=this.itemCollection.find((function(e){return e.get("item_id")===h})),g=a().getNested(this.initOptionsModel.attributes.config,"global.workflow.item.allowed_workflow_states");m&&this.itemCollection.remove(m),g&&!this.itemHasAllowedWorkflowState(l,g)||this.itemCollection.addNew(l)}a().isArray(p)&&a().extend(d,{supplementaryTags:p,supplementary:{data:this.initOptionsModel.getSupplementaryTagTypes(),url:this.END_POINTS.supplementary}}),this.initOptionsModel.getItemWorkflow()&&(this.options.config.item.status=!1),this.tagsUtil=new A(d),this.setSearch(u)},itemHasAllowedWorkflowState:function(e,t){return-1!==t.indexOf(a().getNested(e.attributes,"authoring_workflow.state"))},fetchTotal:function(){var e=this,t=function(){var t=a().extend({fetchingTotal:!1},e.itemCollection.getPageMetadata());a()(e.itemsPaginationViews).invoke("renderWithPageMetadata",t)};this.itemCollection.fetchTotal().then(t).catch(t)},getItemCollectionName:function(){return this.mode},afterRender:function(){var e=this;if(this.spawn("startLoadingRequest","renderItemList"),this.options.noFetch)return this.renderToolbar(),this.renderItems(this.itemCollection.getItemsForCurrentPage()),void this.spawn("completeLoadingRequest","renderItemList");var t=this.getSearch().toJSON({cleanTags:!0});this.itemCollection.fetchInitial(t).then((function(t){e.renderToolbar(),e.renderItems(t),e.componentController.completeLoadingRequest("renderItemList")}))},beforeRender:function(){this.itemsView=new xe({config:this.options.config,el:!1,searchModel:this.getSearch(),isStriped:!0,i18n:this.i18n,metricsUtil:this.metricsUtil,itemSelectEnabled:this.initOptionsModel.isItemListSelectionEnabled(),workflow:this.initOptionsModel.getItemWorkflow()}),this.insertView(this.SELECTORS.items,this.itemsView.showLoader())},createNewItem:function(){this.router.navigate("items/new")},getNext:function(){var e=this.itemCollection.getNextPageMetadata();this.storeCurrentScrollPosition(),e.isCached||(this.spawn("startLoadingRequest","getNextPage"),this.itemsView.showLoader()),a()(this.itemsPaginationViews).invoke("showNextLoader",e),this.searchingItems=!0,this.itemCollection.fetchNext().then(a().bind((function(e){this.renderItems(e),this.setScrollPosition(),this.spawn("completeLoadingRequest","getNextPage")}),this))},getPrevious:function(){var e=this.itemCollection.getPreviousPageMetadata();this.storeCurrentScrollPosition(),e.isCached||(this.spawn("startLoadingRequest","getPreviousPage"),this.itemsView.showLoader()),a()(this.itemsPaginationViews).invoke("showPreviousLoader",e),this.searchingItems=!0,this.itemCollection.fetchPrevious().then(a().bind((function(e){this.renderItems(e),this.setScrollPosition(),this.spawn("completeLoadingRequest","getPreviousPage")}),this))},storeCurrentScrollPosition:function(){var e;this.scrolledParent||(this.$mainContainer.parents().each((function(){var t=f()(this);if(t.scrollTop())return e=t,!1})),e&&(this.scrolledParent=e,this.scrollOffset=e.scrollTop()))},setScrollPosition:function(){this.scrolledParent&&this.scrollOffset&&(this.scrolledParent.scrollTop(this.scrollOffset),delete this.scrolledParent,delete this.scrollOffset)},getSearch:function(){return this.options.state.get("search")},renderItems:function(e){var t=this.itemCollection.currentPage,n=new sd(sd.EVENTS.renderItemList);delete this.searchingItems,t!==this.lastPageRendered&&(this.itemsView.renderItems(e),this.renderPagination(),this.lastPageRendered=t),this.spawn("removeHeight"),this.spawn("publicEvent",n)},renderError:function(){var e=new sd(sd.EVENTS.renderItemListError);delete this.searchingItems,this.itemsView.renderError(),this.removePagination(),this.spawn("removeHeight"),this.spawn("publicEvent",e)},renderToolbar:function(){var e=this.itemCollection.getQuestionFeatureList(),t=a().extend({title:a().getNested(this.config,"item.title")||{}},this.config.toolbar);this.toolbarView=new rd({questionFeatureList:e,tagsUtil:this.tagsUtil,dataManager:this.dataManager,config:t,searchModel:this.getSearch(),i18n:this.i18n,shouldBuildGeneralSearch:this.shouldBuildGeneralSearch}),this.insertView('[data-authorapi-view="toolbar"]',this.toolbarView),this.toolbarView.render(),this.spawn("applyBreakpoints")},createPagination:function(e,t,n){var r=new Ye({pageMetadata:t,searchModel:this.getSearch(),config:n,i18n:this.i18n});return this.insertView(e,r),r},removePagination:function(){a()(this.itemsPaginationViews).invoke("remove"),this.itemsPaginationViews=null},renderPagination:function(){var e=this.itemCollection.getPageMetadata(),t=!a().isBoolean(this.config.sort)||this.config.sort,n=a().getNested(this.config,"item.title")||{};this.itemsPaginationViews?a()(this.itemsPaginationViews).invoke("setPageMetadata",e):this.itemsPaginationViews=[this.createPagination('[data-authorapi-view="pagination-1"]',e,{showSort:t,title:n}),this.createPagination('[data-authorapi-view="pagination-2"]',e)],a()(this.itemsPaginationViews).invoke("render")},openItem:function(e){this.router.navigateToItem(e.get("reference"))},navigateToSearchQuery:function(){this.searchingItems||this.router.navigateToItemSearchQuery(null,!0)},fireSelectedItemsChanged:function(){var e=new sd(sd.EVENTS.itemListSelectionChanged);e.setData({itemRefs:this.getSelectedItemReferences()}),this.spawn("publicEvent",e)},searchItems:function(e){var t=this;if(!this.searchingItems){var n=this.setSearch(e);this.searchingItems=!0,delete this.lastPageRendered,this.itemsView.showLoader(),this.toolbarView&&(this.toolbarView.onSearchItems(),this.itemCollection.fetchSearchResults(n).then(a().bind(this.renderItems,this)).catch((function(){t.renderError()})))}},setSearch:function(e){var t=this.options.state.get("search");return t||(t=new I,this.options.state.set("search",t)),this.validateSearch(e),t.isDifferent(e)&&t.reset(e),t.toJSON({cleanTags:!0})},cleanup:function(){this.$el.addClass("lrn-hide").css({opacity:0,display:"none"})},resetGeneralSearch:function(){this.toolbarView&&this.toolbarView.searchView&&this.toolbarView.searchView.resetGeneralSearch()},buildGeneralSearch:function(){this.toolbarView&&this.toolbarView.searchView&&this.toolbarView.searchView.buildGeneralSearch()},clearSelectedItemReferences:function(){return!!this.itemsView&&this.itemsView.clearSelectedItemReferences()},getSelectedItemReferences:function(){return this.itemsView?a().map(this.itemsView.selectedItems,(function(e){return e.get("reference")})):[]},validateSearch:function(e){this.validateWorkflow(e),this.validateStatus(e)},validateWorkflow:function(e){var t=e&&e.filteredWorkflowState;t&&(this.initOptionsModel.getItemWorkflow()||this.initOptionsModel.getActivityWorkflow()||(console.error("No workflow is set so filtered state "+'"'.concat(t,'" will be ignored.')),delete e.filteredWorkflowState))},validateStatus:function(e){var t,n=e&&e.status;n&&(t||h.isValid(n)||(t='Filtered status "'.concat(n,'" is not valid, so will be ignored.')),t&&(console.error(t),delete e.status))}},{LIMIT_MIN:0,LIMIT_MAX:50});function ud(e){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fd(e,t){return(fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=md(e);if(t){var i=md(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hd(this,n)}}function hd(e,t){if(t&&("object"===ud(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function md(e){return(md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fd(e,t)}(o,e);var t,n,r,i=pd(o);function o(){return cd(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"initialize",value:function(e){rd.prototype.initialize.call(this,e)}},{key:"beforeRender",value:function(){rd.prototype.beforeRender.call(this),this.searchView.disableHierarchyControls()}}])&&dd(t.prototype,n),r&&dd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(rd);function yd(e){return function(e){if(Array.isArray(e))return vd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bd=["header_element","resource_button","slider_element","try_again_button","notepad_button","stickynote_add_button","stickynote_visibility_button","drawing_mode_button","drawing_visibility_button"],_d=[{reference:"e883731f-6fb8-43b3-992b-14f53cdf8350",name:"assessConfigMain",regions:"main",thumbnail:"main",internal_preset:!0},{reference:"74d5c2ff-8c4f-48ae-9fd2-0567a1d70221",name:"assessConfigHorizontal",regions:"horizontal",thumbnail:"long",internal_preset:!0},{reference:"2be1013a-ae8f-4755-b6d9-833c8b2e2b4b",name:"assessConfigHorizontalFixed",regions:"horizontal-fixed",thumbnail:"sticky",internal_preset:!0}];function wd(e,t){var n;return a().isString(e)&&""!==e.trim()?n={id:xd({reference:e},t),reference:e}:a().isObject(e)&&(n=a().cloneDeep(e)).organisation_id===t&&delete n.organisation_id,n}function Ed(e,t){var n=[];return a().each(e,(function(e){var r=wd(e,t);r&&n.push(r)})),n}function Sd(e,t){window.LearnosityAssess&&a().isFunction(window.LearnosityAssess[t])?e():a().delay((function(){return Sd(e,t)}),50)}function xd(e,t){var n=e.reference;return a().has(e,"organisation_id")&&t&&e.organisation_id!==t&&(n+="_"+e.organisation_id.toString()),a().has(e,"item_pool_id")&&e.item_pool_id&&(n+="_"+e.item_pool_id),n}const kd={getTemplates:function(e){return this.getEnabledPlayerTemplateConfigs(e)},getDefaultTemplateConfig:function(e,t){var n=a().getNested(e,"default_player_template");t=t||this.getEnabledPlayerTemplateConfigs(e);var r=a().findWhere(t,{reference:n});return r||(t?t[0]:{})},getRegions:function(e){return this.getDefaultTemplateConfig(e).regions},getLabelBundle:function(e){return this.getDefaultTemplateConfig(e).labelBundle},getQuestionsApiActivity:function(e){return this.getDefaultTemplateConfig(e).questionsApiActivity},getTemplateProperties:function(e){return a().without.apply(a(),[a().keys(e)].concat(["custom_template","internal_preset","name","reference","thumbnail","json"]))},setOrganisationIdInItems:function(e,t){if(!t)return e;a().each(["intro_item","outro_item"],(function(n){var r="data.config.navigation."+n,i=a().getNested(e,r);i&&(e.data.config.navigation[n]=wd(i,t))}));var n=a().getNested(e,"data.config.navigation.resource_items");a().isArray(n)&&(e.data.config.navigation.resource_items=Ed(n,t));var r=a().getNested(e,"data.sections");a().isArray(r)&&a().each(r,(function(n,r){a().isJsonObject(n)&&a().isArray(n.items)&&(e.data.sections[r].items=Ed(n.items,t))}));var i=e.data.items;return i&&i.length?(e.data.items=Ed(i,t),e):e},getPresetRegions:function(e){return new S((function(t){Sd((function(){var n=window.LearnosityAssess.getRegionPresets();if(a().isObject(n[e])){var r=a().cloneDeep(n[e]);a().each(r,(function(e,t){r[t]=a().filter(e,(function(e){return!a().contains(bd,e.type)}))})),t(r)}else t({})}),"getRegionPresets")}))},translateTemplatePresets:function(e){var t=this;this.translatedPlayerTemplatesPresets=[],a().each(_d,(function(n){var r=a().clone(n);r.name=e.get(n.name),t.translatedPlayerTemplatesPresets.push(r)}),this)},getAssessApiLabels:function(){return new S((function(e){Sd((function(){e(window.LearnosityAssess.getLabels())}),"getLabels")}))},getEnabledPlayerTemplateConfigs:function(e){var t=a().getNested(e,"player_templates")||[],n=a().getNested(e,"enabled_player_templates"),r=[].concat(yd(this.translatedPlayerTemplatesPresets),yd(t)),i=[],o=[],s=0;if(t.forEach((function(e){e.thumbnail="custom"})),a().isArray(n)){if(!n.length)return[];n.length&&n.forEach((function(e){var t=a().findWhere(r,{reference:e});t?o.push(t):i.push(e)}))}else o=r;var l=[];return o=a().filter(o,(function(e){var t=!a().isUndefined(e.reference)&&e.reference.length>0&&!a().isUndefined(e.name)&&e.name.length>0,n=-1===l.indexOf(e.reference);return t?l.push(e.reference):s++,n||console.error("Template reference ".concat(e.reference," is not unique, so ")+"only the first occurrence was included."),t&&n})),s>0&&console.error("".concat(s," template").concat(s>1?"s":""," ")+"did not contain reference and/or name and so "+"".concat(s>1?"were":"was"," not included.")),n&&n.length===i.length?console.error("None of the references passed in enabled_player_templates match any player_template or default references."):i.length&&console.error("Some template references passed in enabled_player_templates were not found and so have not been included. Template "+"references: ".concat(i.join(", "))),o},getItemIdForItemsApi:xd};var Td=function(e,t){a().keys(e).length>0?t.removeClass("lrn-hide"):t.addClass("lrn-hide")};const Od=c.View.extend({template:"components/loadingPanel",initialize:function(){this.loadingStack={}},startLoadingRequest:function(e){this.loadingStack[e]=e,Td(this.loadingStack,this.$el)},completeLoadingRequest:function(e){delete this.loadingStack[e],Td(this.loadingStack,this.$el)}});var Cd="timeout",Ad="onError",Pd="failedCheck",Md=[],Dd={questions:"LearnosityApp",questionEditor:"LearnosityQuestionEditor",items:"LearnosityItems",assess:"LearnosityAssess"};function Rd(e,t,n){var r=a().keys(Dd);if(e&&!a().contains(r,e))throw"Unsupported argument value, please use ".concat(r);if(t&&!a().has(window.LearnosityAuthor._internal.config,t))throw"Property ".concat(t," does not exist in the _.internals.config object");if(n&&!a().has(window.LearnosityAuthor._internal.config,n))throw"Property ".concat(n," does not exist in the _.internals.config object")}const Ld={require:function(e,t){var n=a().findWhere(Md,{src:e});return a().isObject(n)?n.promise:function(e,t){var n={src:e,promise:{}};return n.promise=new S((function(n,r){if(t())n();else{var i=document.getElementsByTagName("head")[0],o=document.createElement("script"),s=U.getTextDirection();a().isNull(s)||o.setAttribute("data-lrn-dir",s);var l=setTimeout((function(){o.removeEventListener?(o.removeEventListener("load",u),o.removeEventListener("error",c)):o.onreadystatechange=null,r({src:e,error:Cd})}),3e4);o.type="text/javascript",o.async=!0,o.src=e,o.addEventListener("load",u),o.addEventListener("error",c),i.appendChild(o)}function u(){clearTimeout(l),t()?n():r({src:e,error:Pd})}function c(){clearTimeout(l),r({src:e,error:Ad})}})),Md.push(n),n.promise}(e,t)},generateUrl:function(e,t){var n="".concat(e,"ApiVersion"),r="".concat(e,"ApiUrl");Rd(e,n,r);var i=window.LearnosityAuthor._internal.config,o=i[r],a=i[n];if(t){var s=this.getConcreteApiVersion(e);return"".concat(o).concat(s,"/").concat(t)}return"".concat(o).concat(a?"?".concat(a):"")},getConcreteApiVersion:function(e){Rd(e);var t=Dd[e];if(!window[t])throw"".concat(e," API must be preloaded before hitting endpoint.");return a().getNested(window[t],"versions.concrete")},loadLearnosityApi:function(e){try{return this.require(this.generateUrl(e),(function(){return a().isObject(window[Dd[e]])&&a().isFunction(window[Dd[e]].init)}))}catch(e){console.error(e)}}};function Nd(e){return(Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Id(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bd(){return(Bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Fd(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Fd(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qd(e)););return e}function Yd(e,t){return(Yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qd(e);if(t){var i=qd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vd(this,n)}}function Vd(e,t){if(t&&("object"===Nd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qd(e){return(qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ud=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yd(e,t)}(o,e);var t,n,r,i=Hd(o);function o(){return Id(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"template",get:function(){return this.activityEditMode?"activityEdit/activityItem":"activityEdit/pickerItem"}},{key:"SELECTORS",get:function(){return a().extend(Bd(qd(o.prototype),"SELECTORS",this),{previewItem:'[data-authorapi-selector="open-item-preview"]',closePreview:'[data-authorapi-selector="close-item-preview"]',listViewContracted:".lrn-list-view-contracted",listViewExtended:".lrn-list-view-extended",questionWrapper:'[data-authorapi-selector="lrn-question-wrapper"]',itemOverlay:'[data-authorapi-selector="item-overlay"]',itemNumber:'[data-authorapi-selector="activity-item-number"]'})}},{key:"events",get:function(){return[["click",this.SELECTORS.flyoutToggle.tags,a().partial(this.toggleFlyout,"tags")],["click",this.SELECTORS.flyoutToggle.questions,a().partial(this.toggleFlyout,"questions")],["click",this.SELECTORS.selectItem,"handleSelectItemClick"],["click",this.SELECTORS.previewItem,"renderItem"],["click",this.SELECTORS.closePreview,"closePreview"]]}},{key:"initialize",value:function(){Bd(qd(o.prototype),"initialize",this).call(this),this.schemasUtil=this.dataManager.getSchemasUtil()}},{key:"serialize",value:function(){return a().extend(Bd(qd(o.prototype),"serialize",this).call(this),{selected:this.selected||this.model.get("addedToActivity"),number:this.listPosition,hasNumber:!!this.listPosition,itemId:this.model.get("item_id"),multiSelect:!this.itemType})}},{key:"handleSelectItemClick",value:function(){var e=!this.$(this.SELECTORS.selectItemInput).prop("checked");if(this.itemType){var t="resourceItem"===this.itemType?"resourceSelectChange":"introOutroSelectChange";this.spawn(t,{item:this.model,itemView:this,checked:e})}else this.updateSelectBox(e)}},{key:"updateSelectBox",value:function(e){this.model.get("addedToActivity")||(this.listPosition&&this.$el.toggleClass("lrn-list-selected-activity",!!e),Bd(qd(o.prototype),"updateSelectBox",this).call(this,e))}},{key:"afterRender",value:function(){this.checkAddedToActivity()}},{key:"checkAddedToActivity",value:function(){this.model.get("addedToActivity")&&(this.closePreview(),this.$(this.SELECTORS.itemOverlay).css({display:"block"}))}},{key:"toggleFloatingFeatureVisibility",value:function(e){var t=["imagetool"],n=a().filter(this.model.attributes.features,(function(e){return t.indexOf(e.type)>-1})),r=e?"":"none";n.forEach((function(e){var t=f()('[data-lrn-float*="'.concat(e.reference,'"]'));t&&t.css({display:r})}))}},{key:"closePreview",value:function(){var e=this.$(this.SELECTORS.listViewContracted),t=this.$(this.SELECTORS.listViewExtended),n={opacity:0,"z-index":-1,height:0,overflow:"hidden"};this.activityEditMode?a().extend(n,{"padding-top":0,"padding-bottom":0}):(a().extend(n,{padding:0}),e.css({opacity:1,position:"relative",height:"auto","z-index":"auto"})),t.css(n),this.toggleFloatingFeatureVisibility(!1),this.togglePreviewButtons(!1)}},{key:"renderItem",value:function(){var e=this.$(this.SELECTORS.listViewExtended);this.disablePreviewFlag||(this.loadingPanel=new Od({el:!1,i18n:this.i18n}),this.questionWrapper=e.find(this.SELECTORS.questionWrapper),this.togglePreviewButtons(!0),this.$(this.SELECTORS.closePreview).find(".lrn-i-cross").hide(),this.$(this.SELECTORS.closePreview).find(".lrn-spinner-save").show(),this.$(this.SELECTORS.closePreview).attr("disabled","disabled"),this.itemFetched?(this.isFirstLoad=!0,this.openPreview(),this.toggleFloatingFeatureVisibility(!0)):(this.itemFetched=!0,this.questionWrapper.prepend(this.loadingPanel.render().$el),this.loadingPanel.startLoadingRequest("loadItemPreview"),this.fetchAndDisplayItem(),this.spawn("updatePreviewActionState",{disablePreviewFlag:!0})))}},{key:"openPreview",value:function(){if(this.isFirstLoad){this.isFirstLoad=!1,this.$(this.SELECTORS.closePreview).find(".lrn-i-cross").show(),this.$(this.SELECTORS.closePreview).find(".lrn-spinner-save").hide(),this.$(this.SELECTORS.closePreview).removeAttr("disabled");var e=this.$(this.SELECTORS.listViewContracted),t=this.$(this.SELECTORS.listViewExtended),n={opacity:1,height:this.$('[data-authorapi-selector="lrn-question-wrapper"]').outerHeight()+(this.activityEditMode?25:0),"z-index":"auto",width:"100%"};this.activityEditMode?a().extend(n,{"padding-top":"15px","padding-bottom":"15px"}):(a().extend(n,{transition:"height 0.5s"}),e.css({opacity:0,position:"absolute",height:0,"z-index":-1})),t.css(n),this.spawn("updatePreviewActionState",{disablePreviewFlag:!1}),this.$(this.SELECTORS.closePreview).parent('[data-authorapi-selector="tooltipped"]').focus()}}},{key:"fetchAndDisplayItem",value:function(){var e=this,t=Ld.loadLearnosityApi("questions"),n=this.dataManager.fetchItem(this.model);return S.all([t,n]).then((function(t){var n=a().last(t),r=S.resolve();a().getNested(n,"data.questionsApiSecurity")||(r=e.dataManager.getQuestionsActivity()),r.then((function(t){t&&(n.data||(n.data={}),n.data.questionsApiSecurity=t.data),n.data.item&&(e.setQuestionFeatureDetails(n.data.item),e.loadingPanel.completeLoadingRequest("loadItemPreview"),e.questionsApiSecurity=n.data.questionsApiSecurity,e.model.setDataAndWidgetInstances(n),e.questionWrapper.html(e.model.get("content")),e.initQuestionsApi())}))}))}},{key:"setQuestionFeatureDetails",value:function(e){e.questions&&(e.questions=this.schemasUtil.getDetailedQuestions(e.questions)),e.features&&(e.features=this.schemasUtil.getDetailedFeatures(e.features))}},{key:"initQuestionsApi",value:function(){var e,t,n,r=[];if(this.questionsApp)return r=a().union(a().keys(this.questionsApp.getQuestions()),a().keys(this.questionsApp.getFeatures())),this.hasAppendedQuestions=!0,this.model.get("widgetInstances").each((function(i){a().contains(r,i.get("reference"))&&(t=a().uuid(),e=i.get("reference"),i.set("reference",t),n=this.getWidgetType(i.get("widget_type")),this.$el.find("span."+n+"-"+e).removeClass(n+"-"+e).addClass(n+"-"+t))}),this),this.isFirstLoad=!0,void this.questionsApp.append(this.buildQuestionsOptions(this.model));var i=a().merge(this.questionsApi.init_options,this.buildQuestionsOptions(this.model)),o={readyListener:this.questionsAppReadyListener,errorListener:this.questionsAppErrorListener,metricsContext:this.metricsUtil.getContext()};this.responses&&(i.responses=this.responses,i.state="resume"),this.removed||(this.isFirstLoad=!0,this.questionsApp=window.LearnosityApp.init(i,o),this.spawn("onInitQuestionsApp",this.questionsApp))}},{key:"errorHandler",value:function(){this.isFirstLoad&&(this.$(this.SELECTORS.closePreview).find(".lrn-i-cross").show(),this.$(this.SELECTORS.closePreview).find(".lrn-spinner-save").hide(),this.closePreview(),this.togglePreviewButtons(!1))}},{key:"addScrollingIfRequired",value:function(){var e=this.$(this.SELECTORS.questionWrapper);e[0].scrollHeight>500&&e.css({"overflow-y":"scroll"})}},{key:"buildQuestionsOptions",value:function(e){var t={},n=function(e){return"feature"===e.get("widget_type")?t.feature_id=e.get("reference"):t.response_id=e.get("reference"),a().extend({},e.get("data"),t)};return a().extend({},this.questionsApiSecurity,{questions:e.get("widgetInstances").where({widget_type:"response"}).map(n),features:e.get("widgetInstances").where({widget_type:"feature"}).map(n)})}},{key:"getWidgetType",value:function(e){return"response"===e?"question":"feature"}},{key:"setQuestionsApp",value:function(e){this.questionsApp=e}},{key:"togglePreviewButtons",value:function(e){this.$(this.SELECTORS.closePreview).parents(".lrn-activity-preview-toggle").toggleClass("lrn-hide",!e),this.$(this.SELECTORS.previewItem).parents(".lrn-activity-preview-toggle").toggleClass("lrn-hide",e)}},{key:"updateNumber",value:function(e){this.$(this.SELECTORS.itemNumber).text(e+1)}},{key:"updatePreviewActionState",value:function(e){this.disablePreviewFlag=e.disablePreviewFlag}}])&&jd(t.prototype,n),r&&jd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(he),Wd="ACTIVITY_NO_ITEMS_TO_LOAD",zd="ACTIVITY_EDIT_ADD_ITEMS",Gd="ACTIVITY_EDIT_CLEAR_ITEM_PICKER_SEARCH_STATES",$d="ACTIVITY_EDIT_CLEAR_LOADING",Kd="ACTIVITY_EDIT_DUPLICATE_ACTIVITY_COPY_ITEMS",Zd="ACTIVITY_EDIT_DUPLICATE_ACTIVITY_ERROR",Jd="ACTIVITY_EDIT_DUPLICATE_ACTIVITY_LOADING",Qd="ACTIVITY_EDIT_DUPLICATE_ACTIVITY_SUCCESS",Xd="ACTIVITY_EDIT_FETCH_ACTIVITY_LOADED",ef="ACTIVITY_EDIT_FETCH_ACTIVITY_LOADING",tf="ACTIVITY_EDIT_FETCH_ACTIVITY_PRELOADED",nf="ACTIVITY_EDIT_FETCH_ITEMS_LOADED",rf="ACTIVITY_EDIT_FETCH_ITEMS_LOADING",of="ACTIVITY_EDIT_FETCH_RESOURCE_ITEMS_LOADING",af="FORCE_UPDATE_TOOLTIP",sf="ACTIVITY_EDIT_INIT_NEW_ACTIVITY",lf="ACTIVITY_EDIT_ITEMS_API_RESTART",uf="ACTIVITY_EDIT_ITEM_PREVIEW_QUESTIONS_API_LOAD_STATE",cf="ACTIVITY_EDIT_PREVIEW_LOADED",df="ACTIVITY_EDIT_PREVIEW_LOADING",ff="ACTIVITY_EDIT_REMOVE_ANNOTATIONS_CONFIG",pf="ACTIVITY_EDIT_REMOVE_ITEMS",hf="ACTIVITY_EDIT_RESET_INTRO_ITEM",mf="ACTIVITY_EDIT_RESET_NUMBER_OF_DELETED_ITEMS",gf="ACTIVITY_EDIT_RESET_OUTRO_ITEM",yf="ACTIVITY_EDIT_ADD_INTRO_ITEM",vf="ACTIVITY_EDIT_ADD_OUTRO_ITEM",bf="ACTIVITY_EDIT_SET_RESOURCE_ITEM",_f="ACTIVITY_EDIT_RESET_RESOURCE_ITEM",wf="ACTIVITY_EDIT_SAVE_ACTIVITY_ERROR",Ef="ACTIVITY_EDIT_SAVE_ACTIVITY_LOADING",Sf="ACTIVITY_EDIT_SAVE_ACTIVITY_SUCCESS",xf="ACTIVITY_EDIT_SAVE_TEMPLATES_SUCCESS",kf="SCHEMAS_UPDATE_QUESTION_FEATURE_LIST",Tf="ACTIVITY_EDIT_SET_IS_IN_ITEM_PICKER",Of="ACTIVITY_EDIT_SET_ITEM_PICKER_SEARCH_STATES",Cf="ACTIVITY_EDIT_SET_ITEM_SAVEABLE",Af="ACTIVITY_EDIT_SET_MODE",Pf="ACTIVITY_EDIT_SET_RESOURCE_ITEM_CONTENT",Mf="ACTIVITY_EDIT_SET_REGION_TEMPLATES",Df="ACTIVITY_EDIT_TB_DELETE_REGION_TEMPLATE",Rf="ACTIVITY_EDIT_TB_EDIT_TEMPLATE",Lf="ACTIVITY_EDIT_TB_READY_FOR_DRAG",Nf="ACTIVITY_EDIT_TB_RESET",If="ACTIVITY_EDIT_TB_UPDATE_ELEMENTS",jf="ACTIVITY_EDIT_TB_UPDATE_ELEMENT_FOCUS",Bf="ACTIVITY_EDIT_TB_UPDATE_EXPANDED_REGION",Ff="ACTIVITY_EDIT_TB_UPDATE_LABELBUNDLE_CONFIG",Yf="ACTIVITY_EDIT_TB_UPDATE_PLAYER_NAME",Hf="ACTIVITY_EDIT_TB_UPDATE_REFERENCE",Vf="ACTIVITY_EDIT_TB_UPDATE_REGION_CONFIG",qf="ACTIVITY_EDIT_TB_UPDATE_REGION_FOCUS",Uf="ACTIVITY_EDIT_TB_UPDATE_REGION_NAMES",Wf="ACTIVITY_EDIT_TB_UPDATE_SHOW_ANIMATION_ON_APPEAR",zf="ACTIVITY_EDIT_TB_UPDATE_UNASSIGNED_ELEMENTS_ORDER",Gf="ACTIVITY_EDIT_TOGGLE_CHECKED_STATE",$f="ACTIVITY_EDIT_TOGGLE_DIRTY_STATE",Kf="ACTIVITY_EDIT_TOGGLE_MODE",Zf="ACTIVITY_EDIT_TOGGLE_SELECT_ALL",Jf="ACTIVITY_EDIT_TOGGLE_SHOW_INTRO_ITEM",Qf="ACTIVITY_EDIT_TOGGLE_SHOW_OUTRO_ITEM",Xf="ACTIVITY_EDIT_TRIGGER_RENDER_ACTIVITY",ep="ACTIVITY_EDIT_TRIGGER_SAVEABLE_CHANGED",tp="ACTIVITY_EDIT_UPDATE_ACTIVITY",np="ACTIVITY_EDIT_UPDATE_ACTIVITY_IGNORE_QUESTION_ATTRIBUTES",rp="ACTIVITY_EDIT_UPDATE_ACTIVITY_JSON",ip="ACTIVITY_EDIT_UPDATE_ACTIVITY_JSON_CONFIG",op="ACTIVITY_EDIT_UPDATE_ACTIVITY_JSON_DATA",ap="ACTIVITY_EDIT_UPDATE_ACTIVITY_METADATA",sp="ACTIVITY_EDIT_UPDATE_ACTIVITY_TAGS",lp="ACTIVITY_EDIT_UPDATE_DRAGGED_ELEMENT_DATA",up="ACTIVITY_EDIT_UPDATE_HOVERED_ELEMENT_INDEX",cp="ACTIVITY_EDIT_UPDATE_HOVERED_REGION_INFO",dp="ACTIVITY_EDIT_UPDATE_ITEM",fp="ACTIVITY_EDIT_UPDATE_ITEMS",pp="ACTIVITY_EDIT_UPDATE_ITEM_UI_STATE",hp="ACTIVITY_EDIT_UPDATE_REGION_TEMPLATE",mp="ACTIVITY_EDIT_UPDATE_SELECTED_ELEMENT_DATA",gp="ACTIVITY_EDIT_UPDATE_SETTING_UI_STATE",yp="ACTIVITY_EDIT_UPDATE_SHOW_DUPLICATE_MESSAGE",vp="ACTIVITY_EDIT_UPDATE_UI_STATE",bp="ACTIVITY_EDIT_UPDATE_ADDITIONAL_TB_CONFIG",_p="ACTIVITY_EDIT_UPDATE_TB_SOURCE_INVALID";const wp=function(e){return{type:zd,data:{items:e}}};const Ep=function(e){return{type:Pf,data:e}};function Sp(e){return(Sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tp(){return(Tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Op(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Op(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mp(e)););return e}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mp(e);if(t){var i=Mp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pp(this,n)}}function Pp(e,t){if(t&&("object"===Sp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mp(e){return(Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cp(e,t)}(o,e);var t,n,r,i=Ap(o);function o(){return xp(this,o),i.apply(this,arguments)}return t=o,r=[{key:"LIMIT_MAX",get:function(){return 150}}],(n=[{key:"template",get:function(){return"activityEdit/items"}},{key:"SELECTORS",get:function(){return a().extend(Tp(Mp(o.prototype),"SELECTORS",this),{selectAllItemsForActivity:'[data-authorapi-selector="select-all-items-for-activity"]',selectAllItemsForActivityInput:'[data-authorapi-selector="select-all-items-for-activity-input"]',addItemsButton:'[data-authorapi-selector="add-items-to-activity"]',successMessage:'[data-authorapi-selector="success-message"]',successMessageTextSpan:'[data-authorapi-selector="success-message-text"]',successMessageDummyButton:'[data-authorapi-selector="success-message-dummy-button"]'})}},{key:"onMessages",get:function(){return a().extend(Tp(Mp(o.prototype),"onMessages",this),{onInitQuestionsApp:"onInitQuestionsApp",updatePreviewActionState:"onUpdatePreviewActionState",introOutroSelectChange:"addIntroOutroItemToActivity",resourceSelectChange:"updateResourceItem"})}},{key:"onUpdatePreviewActionState",value:function(e){a().each(this.itemViews,(function(t){t.updatePreviewActionState(e)}))}},{key:"events",get:function(){return[["click",this.SELECTORS.selectAllItemsForActivity,"handleSelectAllItemsClick"],["click",this.SELECTORS.addItemsButton,"addItemsToActivity"],["blur",this.SELECTORS.successMessageDummyButton,"hideSuccessMessage"]]}},{key:"initialize",value:function(e){this.activityEditMode=e.activityEditMode,this.app=e.app,Tp(Mp(o.prototype),"initialize",this).call(this,e)}},{key:"setItemsInActivity",value:function(e){this.itemsInActivity=e}},{key:"setItemBankSettings",value:function(e){delete this.itemPoolId,this.organisationId=e.organisation_id,e.item_pool_id&&(this.itemPoolId=e.item_pool_id)}},{key:"handleSelectAllItemsClick",value:function(){var e=this.$(this.SELECTORS.selectAllItemsForActivityInput),t=!e.prop("checked");e.prop("checked",t),a()(this.itemViews).invoke("updateSelectBox",t)}},{key:"addItemsToActivity",value:function(){var e,t=this.app.initOptionsModel.getOrganisationId(),n=this.selectedItems.length,r=this,i=new sd(sd.EVENTS.activityEditItemsAdded);a().each(this.selectedItems,(function(t){t.set({addedToActivity:!0}),t.get("organisation_id")?(e={reference:t.get("reference"),organisation_id:t.get("organisation_id")},t.get("item_pool_id")&&(e.item_pool_id=t.get("item_pool_id")),r.itemsInActivity.push(e)):r.itemsInActivity.push(t.get("reference"))})),this.app.shell.dispatch(wp(a().map(this.selectedItems,(function(n){var r=n.get("organisation_id");return e={reference:n.get("reference")},r!==t&&(e.organisation_id=r),n.get("item_pool_id")&&(e.item_pool_id=n.get("item_pool_id")),e})))),i.setData(void 0),this.app.component.triggerPublicEvent(i),this.selectedItems=[],a()(this.itemViews).invoke("checkAddedToActivity"),this.updateAddButton(),this.updateSuccessMessage(n)}},{key:"getActionData",value:function(e){var t=e.item.get("reference"),n=this.app.initOptionsModel.getOrganisationId(),r={id:kd.getItemIdForItemsApi({reference:t,organisation_id:e.item.get("organisation_id"),item_pool_id:e.item.get("item_pool_id")},n),reference:t};return e.item.get("organisation_id")!==n&&(r.organisation_id=e.item.get("organisation_id")),e.item.get("item_pool_id")&&(r.item_pool_id=e.item.get("item_pool_id")),r}},{key:"addIntroOutroItemToActivity",value:function(e){if("introItem"===this.itemType||"outroItem"===this.itemType){var t=this.getActionData(e),n="introItem"===this.itemType?yf:vf;this.selectedItems=[],this.app.shell.dispatch({type:n,data:t}),this.selectedItems=[],this.updateAddButton(),this.spawn("backToActivityEditView")}}},{key:"updateResourceItem",value:function(e){var t=this.getActionData(e);this.app.shell.dispatch(Ep({resourceItem:e.item.attributes})),this.app.shell.dispatch({type:bf,data:t}),this.updateAddButton(),this.spawn("backToActivityEditView")}},{key:"addItemView",value:function(e){this.referenceToCompare=e.get("reference");var t=this,n=!!a().find(this.selectedItems,this._referenceIsEqual),r=this.isReferenceInActivityItems(e.get("reference"));e.set({addedToActivity:r}),this.searchModel||(this.searchModel=new c.Model);var i=new Ud({el:!1,config:this.options.config.item,i18n:this.i18n,model:e,searchModel:this.searchModel,dataManager:this.dataManager,questionsApi:this.options.config.questions_api,questionsAppReadyListener:function(){a()(t.itemViews).invoke("openPreview"),t.addScrollingToItemViews(),t.questionsAppReadyListener()},questionsAppErrorListener:function(){a()(t.itemViews).invoke("errorHandler"),a()(t.itemViews).invoke("updatePreviewActionState",{disablePreviewFlag:!1})},selected:n,activityEditMode:this.activityEditMode,listPosition:this.activityEditMode?this.itemViews.length+1:null,itemType:this.itemType,metricsUtil:this.metricsUtil});this.itemViews.push(i),this.insertView(this.SELECTORS.itemList,i)}},{key:"addScrollingToItemViews",value:function(){a()(this.itemViews).invoke("addScrollingIfRequired")}},{key:"serialize",value:function(){var e=this.selectedItems.length,t="";0===e?(e=" ",t="disabled"):e=" "+e+" ";var n=this.i18n.get("activityEditAddItems").replace(/%number%/,e);return a().extend(Tp(Mp(o.prototype),"serialize",this).call(this),{showHeader:!this.activityEditMode&&!this.itemType,addItems:n,disabled:t,allSelected:this.allItemsSelected()})}},{key:"onItemSelectChange",value:function(e){Tp(Mp(o.prototype),"onItemSelectChange",this).call(this,e),this.activityEditMode||this.updateAddButton()}},{key:"updateAddButton",value:function(){var e=this.$(this.SELECTORS.addItemsButton),t=this.selectedItems.length,n=this.$(this.SELECTORS.selectAllItemsForActivityInput);if(t>0)return e.prop("disabled",!1),void(this.itemType||(e.find("span").text(this.i18n.get("activityEditAddItems").replace(/%number%/," "+t+" ")),n.prop("checked",this.allItemsSelected())));e.prop("disabled",!0),this.itemType||e.find("span").text(this.i18n.get("activityEditAddItems").replace(/%number%/," "))}},{key:"updateSuccessMessage",value:function(e){this.$(this.SELECTORS.successMessageTextSpan).text(this.i18n.get("addItemsSuccessMessage").replace(/%number%/,e)),this.$(this.SELECTORS.successMessage).css("opacity","1"),this.$(this.SELECTORS.successMessageDummyButton).focus()}},{key:"hideSuccessMessage",value:function(){this.$(this.SELECTORS.successMessage).css("opacity","0")}},{key:"allItemsSelected",value:function(){var e=this,t=!0,n=0;return this.itemsInActivity&&(n=this.itemsInActivity.length),!(0===this.selectedItems.length||this.selectedItems.length<this.items.length-n)&&(a().each(this.items,(function(n){e.referenceToCompare=n.get("reference"),a().find(e.selectedItems,e._referenceIsEqual)||!e.itemsInActivity||e.isReferenceInActivityItems(n.get("reference"))||(t=!1)})),t)}},{key:"onInitQuestionsApp",value:function(e){a()(this.itemViews).invoke("setQuestionsApp",e),this.spawn("onInitQuestionsApp",e)}},{key:"getSelectedItemsCount",value:function(){return this.selectedItems.length}},{key:"isReferenceInActivityItems",value:function(e){var t=this,n=this.app.initOptionsModel.getOrganisationId();return this.itemsInActivity&&!!a().find(this.itemsInActivity,(function(r){var i=r.reference===e,o=r.organisation_id?t.organisationId===r.organisation_id:t.organisationId===n,a=t.itemPoolId||"",s=r.item_pool_id||"";return i&&o&&a===s}),this)}},{key:"_referenceIsEqual",value:function(e){var t=e.get("item_pool_id")||"",n=e.get("organisation_id")||"";return this.referenceToCompare===e.get("reference")&&t===(this.itemPoolId||"")&&n===(this.organisationId||"")}}])&&kp(t.prototype,n),r&&kp(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(xe);function Rp(e){return(Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ip(e,t){return(Ip=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fp(e);if(t){var i=Fp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bp(this,n)}}function Bp(e,t){if(t&&("object"===Rp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fp(e){return(Fp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ip(e,t)}(o,e);var t,n,r,i=jp(o);function o(){return Lp(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{selectedItemBank:'[data-authorapi-selector="selected-item-bank"]',selectedItemBankSpan:'[data-authorapi-selector="selected-item-bank-span"]',itemBankListPopup:'[data-authorapi-selector="item-list-popup"]',selectedItemBankListElement:".lrn-item-bank-list-item-active"}}},{key:"CLASSES",get:function(){return{selectedItemBankActive:"lrn-selected-item-bank-active",itemBankListPopupActive:"lrn-item-bank-list-popup-active",itemBankListElementActive:"lrn-item-bank-list-item-active"}}},{key:"INPUT_ID_PREFIX",get:function(){return"lrn_item_list_"}},{key:"events",get:function(){return{'click [data-authorapi-selector="selected-item-bank"]':"toggleItemBankListPopup",'click [data-authorapi-selector="item-list-element"]':"updateSelectedItemBank"}}},{key:"template",get:function(){return"activityEdit/toolbar/itemBankList"}},{key:"initialize",value:function(e){c.Courier.add(this),this.itemBankList=e.itemBankList,this.i18n=e.i18n,this.selectedItemBank=e.selectedItemBank}},{key:"serialize",value:function(){var e=this,t={itemBankList:[]};return t.viewId=this.INPUT_ID_PREFIX+this.cid,t.label=this.i18n.get("itemBankListLabel"),t.switchLabel=this.i18n.get("itemBankListSwitch"),a().each(this.itemBankList,(function(n,r){var i=!1;(i=a().isNumber(e.selectedItemBank)?e.selectedItemBank===r:!!n.is_default)&&(t.selectedItemBank=n.item_bank_name),t.itemBankList.push({index:r,name:n.item_bank_name,isSelected:i})}),this),t}},{key:"toggleItemBankListPopup",value:function(e){var t=this.$(this.SELECTORS.itemBankListPopup);if(t.hasClass(this.CLASSES.itemBankListPopupActive))return t.removeClass(this.CLASSES.itemBankListPopupActive),this.$(this.SELECTORS.selectedItemBank).removeClass(this.CLASSES.selectedItemBankActive),void this.updateHideListener(!1);e&&(t.addClass(this.CLASSES.itemBankListPopupActive),this.$(this.SELECTORS.selectedItemBank).addClass(this.CLASSES.selectedItemBankActive),this.updateHideListener(!0))}},{key:"updateSelectedItemBank",value:function(e){var t=this.$(e.target),n=this.$(this.SELECTORS.selectedItemBankListElement);t.is(n)||(n.removeClass(this.CLASSES.itemBankListElementActive),t.addClass(this.CLASSES.itemBankListElementActive),this.$(this.SELECTORS.selectedItemBankSpan).text(t.data("name")),this.spawn("itemBankChange",{index:t.data("value")}),this.toggleItemBankListPopup())}},{key:"updateHideListener",value:function(e){var t=".hide-item-bank-popup."+this.cid,n="mousedown"+t+" touchstart"+t,r=this;f()(document).off(n),e&&f()(document).on(n,(function(e){var t=r.SELECTORS.selectedItemBank+","+r.SELECTORS.itemBankListPopup;f()(e.target).closest(t).length||r.toggleItemBankListPopup(!1)}))}}])&&Np(t.prototype,n),r&&Np(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);const Hp=function(e){return{type:ap,data:e}};function Vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vp(Object(n),!0).forEach((function(t){Up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wp=function(e){var t=e.reference,n=e.description;return function(e,r){var i="activities/new/adaptive"===r().ui.navigate.route.url?{adaptive:{}}:null,o={type:sf,data:{activity:{activity_id:-1,reference:t,title:null,description:n,difficulty:null,data:qp(qp({rendering_type:"assess",items:[]},i),{},{config:{configuration:{idle_timeout:{interval:300}},navigation:{auto_save:{save_interval_duration:300},show_intro:!0,show_outro:!0}}})}}},a=r().initOptions.config.activity_edit,s=kd.getDefaultTemplateConfig(a);s&&kd.getTemplateProperties(s).forEach((function(e){var t=s[e];t&&(o.data.activity.data.config[e]=t)}));Ld.loadLearnosityApi("assess").then((function(){!function(e,t,n){e(t),n&&e(Hp({player_template_reference:n.reference}))}(e,o,s)}))}};var zp=function(e){["data.adaptive","data.config.configuration.reading_mode"].forEach((function(t){var n=a().getNested(e,t);n&&a().isArray(n)&&a().isEmpty(n)&&a().setNested(e,t,{})}))},Gp=function(e,t){var n=!1,r=a().clone(e.items)||[];return a().each(["intro_item","outro_item"],(function(t){var n=a().getNested(e,"config.navigation."+t);n&&r.push(n)})),r.length&&a().isJsonObject(r[0])&&a().each(r,(function(e){(e.organisation_id&&e.organisation_id!==t||e.item_pool_id)&&(n=!0)})),n},$p=function(e){return(a().getNested(e,"sections")||[]).some((function(e){return e.items&&e.items.length>0}))};function Kp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qp=function(e,t){return t.request({url:a().getNested(e,"url")||"/".concat("itembank","/").concat("itemsforactivityedit"),action:"get",data:e.payload})},Xp=function(e){return{type:nf,data:e}},eh=function(e){return function(t,n,r){var i=r.component.comms,o=Qp(e,i);t(function(e){return{type:of,data:e}}(e)),o.then((function(e){var n=e.data[0];t(Ep({resourceItem:n}))}))}};const th=function(e){return function(t,n,r){var i=r.component.comms,o=n(),s=r.component.dataManager,l=!a().isEmpty(a().getNested(o,"schemas.features"))&&!a().isEmpty(a().getNested(o,"schemas.questions")),u=[],c=o.activityEdit.organisationId;if(0!==e.payload.items.length){u.push(Qp(e,i)),l?u.push(S.resolve()):u.push(s.getSchemasUtil().fetchQuestionFeatureList());t(function(e){return{type:rf,data:e}}(e)),S.all(u).then((function(n){var r,i=Kp(n,2),o=i[0],s=i[1],u=[],d=a().isArrayOfObjects(e.payload.items),f="";a().each(e.payload.items,(function(e,t){var n=e;d&&(n=e.reference,f=e.organisation_id||c,r=e.item_pool_id||"");var i=a().find(o.data,(function(e){var t=e.reference===n;if(d){var i=e.item_pool_id||"";return t&&e.organisation_id===f&&i===r}return t}));if(i)u.push(i);else{var s=a().cloneDeep(e);if(!d)s={reference:s};s.organisation_id||(s.organisation_id=c),s.item_id="missing_or_restricted_item_"+t,s.isRestrictedOrMissing=!0,u.push(s)}})),t(Xp(Jp({},e.activityId,u))),l||t(function(e){return{type:kf,data:e}}(s))}))}else t(Xp(Jp({},e.activityId,[])))}};var nh=function(e){return function(t,n,r){var i=(a().getNested(n(),"activityEdit.cachedActivities")||{})[e.payload.reference];if(i)return rh(i,t),void t(function(e){return{type:tf,data:e}}({activity:i}));var o=r.component.comms.request({url:"/itembank/activityeditor",data:e.payload});t(function(e){return{type:ef,data:e}}(e)),o.then((function(n){var i=r.initOptionsModel.getOrganisationId();if(n.data.activity)n.data.activity=kd.setOrganisationIdInItems(n.data.activity,i),zp(n.data.activity),rh(n.data.activity,t),t(function(e){return{type:Xd,data:e}}(n.data));else{var o=a().getNested(e,"payload.reference")||"";t(Wp({reference:o,description:""})),t(function(e){return{type:$d,data:e}}())}}))}},rh=function(e,t){var n=function(e){return(a().getNested(e,"data.config.navigation.resource_items")||[])[0]}(e);n&&t(eh({activityId:e.data.activity_id,payload:{items:[n]}}))};const ih=function(e){return{type:Of,data:e}};var oh="a11yMessage/SET",ah="a11yMessage/CLEAR";var sh;function lh(e){return function(t){setTimeout((function(){clearTimeout(sh),t({type:oh,payload:{text:e}}),sh=setTimeout((function(){sh=void 0,t({type:ah})}),2e3)}),200)}}var uh={INITIAL_RENDER:"initialRender",REMOVE_CRITERION:"removeCriterion",REMOVE_TAG:"removeTag",ON_RESULTS_RENDERED:"o,ResultsRendered",CHANGED_SORT:"changedSort",CLEAR_SEARCH:"clearSearch"};function ch(e){var t=void 0;if(!e)return t;var n=a().find(Object.keys(uh),(function(t){return!0===e[uh[t]]}));return n&&(t=uh[n]),t}const dh=function(e){return{type:Tf,data:e}};var fh="NAVIGATE",ph="NAVIGATE_VIA_BACKBONE_ROUTER",hh="SCORE_UPDATE",mh="UI_CHANGE_ACTIVE_TAB",gh=fh;const yh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:gh,data:e,fromOutside:t,fromModule:n}};const vh=function(){return{type:Jd}};const bh=function(e){return{type:Zd,data:e}};const _h=function(e){return function(t,n,r){var i=n(),o=e.newReference,s=a().getNested(i,"ui.navigate.route.params.reference"),l=r.component.dataManager;t(vh()),l.duplicateActivity(s,o,e.duplicatePassages).fail((function(e){var n=e.meta||e;t(bh(n))}))}};const wh=function(e){return{type:yp,data:e}};var Eh=function(e){return Us(e.ui.navigate.route.path,"activities/:reference/items/")},Sh=function(e){var t=a().getNested(e,"ui.navigate.route.path")||"";return Us(t,"activities/:reference")||Us(t,"activities/new")},xh=function(e){return e.a11yMessage.text},kh=function(e){return a().getNested(e,"activityEdit.activityJson.reference")},Th=function(e){var t=e.activityJson.activity_id,n=a().cloneDeep(a().getNested(e.activityJson,"data.items"))||[],r=a().cloneDeep(a().getNested(e,"items.".concat(t)))||[],i=e.organisationId;return a().map(r,(function(e){var t=a().find(n,(function(t){var n=!t.matched&&t.reference===e.reference;return(n=(n=n&&(e.item_pool_id?t.item_pool_id===e.item_pool_id:!t.item_pool_id))&&(e.organisation_id===i?!t.organisation_id:t.organisation_id===e.organisation_id))&&(t.matched=!0),n}));return!!t&&{item:e,activityItem:a().omit(t,"matched")}})).filter(Boolean)},Oh=function(e){return!(!Sh(e)&&!Ch(e))&&("customize_labels"!==e.activityEdit.mode&&(!e.activityEdit.isSaving&&!e.activityEdit.isDuplicatingActivity&&(Eh(e)?e.activityEdit.itemSaveable:e.activityEdit.isDirty)))},Ch=function(e){return a().getNested(e,"activityEdit.isInItemPicker")},Ah=function(e){return a().getNested(e,"activityEdit.resourceItem")||null},Ph=function(e){return a().getNested(e,"activityEdit.loadingItems")||a().getNested(e,"activityEdit.loadingResourceItems")},Mh=function(e){return a().getNested(e,"activityEdit.loadedItems")&&a().getNested(e,"activityEdit.loadedResourceItems")},Dh=__webpack_require__(51739);function Rh(e,t){this._initialize(e,t)}a().extend(Rh.prototype,Dh.NB.prototype,{getID:function(){return this._id},getLabel:function(){return this._label},setLabel:function(e){return["tab"].indexOf(this._type)>-1&&(this._label=e),this._label},getVerticalDivider:function(){return this._vertical_divider||!1},setVerticalDivider:function(e){this._vertical_divider=e},getScroll:function(){return this._scroll||{enabled:!1}},setScroll:function(e){this._scroll=e},getWidth:function(){return this._width},setWidth:function(e){this._width=e},getRegions:function(){return this._regions},getFirstLeafNode:function(){return this.hasRegions()?this.getRegions()[0].getFirstLeafNode():this},getAllLeafNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.hasRegions()?this.getRegions().reduce((function(e,t){return t.getAllLeafNodes(e),e}),e):e.push(this),e},getAllWidgets:function(){var e=a().clone(this._widgets);return this._regions.forEach((function(t){e=e.concat(t.getAllWidgets())})),e},findElementToRender:function(e){var t=a().find(this._elementsToRender,(function(t){return t.ID===e}));return t||a().each(this.getRegions(),(function(n){var r=n.findElementToRender(e);r&&(t=r)})),t},toJSON:function(e){return"migration"===e?this._toJSON(["widget_type"]):this._toJSON()},hasParent:function(){return!!this._parent},hasWidgets:function(){return this._widgets&&!!this._widgets.length},hasRegions:function(){return this._regions&&!!this._regions.length},getAvailableDropzones:function(e){var t=[];if(this._regions.length)this._regions.forEach((function(n){var r=n.getAvailableDropzones(e);t=t.concat(r)}));else for(var n=0;n<this._elementsToRender.length;n++){var r=this._elementsToRender[n],i=this._elementsToRender[n+1];"dropzone"===r.type&&(e&&(r.ID==="".concat(e,"-top")||r.ID==="".concat(e,"-bottom")||!a().isUndefined(i)&&i.ID===e)||t.push(r.ID))}return t},getHoverableDropzones:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];if(this._regions.length){var r=function(e,n){var r=a().find(t,(function(t){return t.nodePath===e._parent.getPath()})),i=r?r.activeTabIndex:0;return e._type===Rh.TYPES.tab&&n!==i};this._regions.forEach((function(e,t){r(e,t)&&(n=n.concat({type:e._type,id:e._id}))})),this._regions.forEach((function(i,o){if(i._type!==Rh.TYPES.tab||!r(i,o)){var a=i.getHoverableDropzones(e,t);n=n.concat(a)}}))}else for(var i=0;i<this._elementsToRender.length;i++){var o=this._elementsToRender[i],s=this._elementsToRender[i+1];o.type===Rh.TYPES.dropzone&&(e&&(o.ID==="".concat(e,"-top")||o.ID==="".concat(e,"-bottom")||!a().isUndefined(s)&&s.ID===e)||n.push({type:o.type,id:o.ID}))}return n},preOrderTraversal:function(e){e(this),this.getRegions().forEach((function(t){return t.preOrderTraversal(e)}))},getWidgetReferencesInOrder:function(){var e=[];return this.preOrderTraversal((function(t){t._widgets&&(e=e.concat(t._widgets.map((function(e){return e.reference}))))})),e},getElementsToRender:function(){return this._elementsToRender},shouldRenderVerticalDivider:function(){var e=!(!this._parent||!this._parent._vertical_divider),t=!(!this._parent||!this._parent._regions.length||this._parent._regions[0]!==this);return"column"===this._type&&e&&t},_getNewWidgetIndex:function(e){var t=this._findNodeByElementId(e.ID);if(e.widgetID){var n=a().findIndex(t._widgets,{reference:e.widgetID});return"top"===e.suffix?n:n+1}return 0},moveWidget:function(e){var t=e.draggedElReference,n=this._findNodeByElementId(e.dropzoneElReference),r=this._findNodeByElementId(t),i=a().findWhere(r._widgets,{reference:t}),o={ID:e.dropzoneElReference};if(n._widgets.length){var s=new RegExp("(.+)-(.+)");o.widgetID=o.ID.match(s)[1],o.suffix=o.ID.match(s)[2]}o.widgetID!==t&&(r.removeWidget(t),n._widgets.splice(this._getNewWidgetIndex(o),0,i))},removeWidget:function(e){var t=this._findNodeByElementId(e);t._widgets=a().reject(t._widgets,(function(t){return t.reference===e}))},addWidget:function(e,t){(t?this.findNodeById(t):this.getFirstLeafNode())._widgets.push(e)},findNodeById:function(e){if(this.getID()===e)return this;var t,n=this.getRegions();for(t=0;t<n.length;t++){var r=n[t].findNodeById(e);if(r)return r}return null},moveWidgetsTo:function(e){e._widgets=this._widgets,this._widgets=[]},remove:function(){var e,t=this,n=this._parent,r=n.getRegions(),i=a().findIndex(r,(function(e){return e.getID()===t.getID()}));r.splice(i,1),e=n.hasRegions()?n.getFirstLeafNode():n,this.getAllWidgets().forEach((function(t){e._widgets.push(t)}))},getPath:function(){var e=this;if(!this._parent)return"";var t=this._parent,n=0;return a().each(t.getRegions(),(function(t,r){t===e&&(n=r)})),t.getPath()+".regions[".concat(n,"]")},getHighestNodeID:function(){var e=this.getID();return this.getRegions().forEach((function(t){var n=t.getHighestNodeID();n>e&&(e=n)})),e},_findNodeByElementId:function(e){if(this._elementsToRender.some((function(t){return t.ID===e})))return this;var t=null;return this.getRegions().forEach((function(n){var r=n._findNodeByElementId(e);r&&(t=r)})),t},_addWidgetTypes:function(e){0!==e.length&&(this._regions.length?this._regions.forEach((function(t){t._addWidgetTypes(e)})):this._widgets.length>0&&this._widgets.forEach((function(t){e.forEach((function(e){t.reference===e.reference&&(t.widget_type=e.widget_type)}))})))},_buildElementsToRender:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._elementsToRender=[],n||(n=1),this._regions.length?this._regions.forEach((function(t){n+=t._buildElementsToRender(e,n)})):(this._widgets.length||this._elementsToRender.push({type:"dropzone",ID:n}),this._widgets.forEach((function(n,r){var i=a().find(e,(function(e){return n.reference===e.reference}));0===r&&t._elementsToRender.push({type:"dropzone",ID:"".concat(n.reference,"-top")}),t._elementsToRender.push(a().extend(i,{type:"widget",ID:n.reference})),t._elementsToRender.push({type:"dropzone",ID:"".concat(n.reference,"-bottom")})}))),n}}),Rh.isRegionJsonValid=Dh.NB.isRegionJsonValid,Rh.REGIONS_THAT_CAN_HAVE_WIDGETS=["tab","column"],Rh.MAX_NUMBER_OF_WIDGETS=10,Rh.TYPES={tab:"tab",tabs:"tabs",dropzone:"dropzone",column:"column"};const Lh=Rh;function Nh(){this._nodeClass=Lh}a().extend(Nh.prototype,Dh.LR.prototype,{build:function(e,t){e=a().cloneDeep(e),t=a().cloneDeep(t);var n=Dh.LR.prototype.build.call(this,e);return!1!==n&&(n._addWidgetTypes(t),n._buildElementsToRender(t)),n}});const Ih=Nh,jh="itemSettingsTabBar",Bh=130,Fh=15,Yh=25,Hh=500,Vh=500,qh="item_edit";var Uh="edit",Wh="preview",zh=new Ih,Gh=function(e){return e.ui.flags.activeMode},$h=function(e){return a().getNested(e,"itemData.current.item")&&!a().getNested(e,"itemData.current.item.definition")},Kh=function(e){return a().getNested(e,"itemData.original.item.reference")},Zh=function(e){var t=Gh(e),n=function(e){return e.itemData.current.widgetInstances}(e);if("edit"!==t||!n.length||$h(e))return!1;var r=function(e){return e.itemData.current.item.definition}(e),i=zh.build(r,n).getAllLeafNodes().length;return n.length>1||i>1},Jh=function(e){var t=a().getNested(e,"ui.tab.".concat(jh,".activeTabName"));return{mode:e.mode.current,showItemSettings:e.showItemSettings,showWorkflowSettings:e.showWorkflowSettings,originalItemReference:Kh(e),settingsTab:t,widgetReference:e.widgetReference,contentSearch:e.contentSearch}},Qh=function(e){return e.showItemSettings||e.showWorkflowSettings||im(e)},Xh=function(e){return e.ui.questionEditViewMode},em=function(e){if(Qh(e)||e.itemState.flags.fetching||function(e){return e.ui.flags.linkedStandardsOpen}(e)||e.itemState.flags.isSaving||"questionlist"===e.mode.current)return!1;var t=e.itemState.flags.isDirty,n=e.itemData.current.widgetInstances,r=t&&n.length>0;if("widget"===e.mode.current){var i=Xh(e);r="tileView"!==i&&("editView"===i&&!e.itemState.flags.widgetIsMissingValidation)}return r},tm=function(e){return a().getNested(e,"itemData.current.item.dynamic_content_data")},nm=function(e){return!!e.itemState.flags.showCorrectAnswers},rm=function(e){return!!a().getNested(e,"itemData.current.item.definition.scroll.enabled")},im=function(e){return!!a().getNested(e,"ui.flags.isHistoryTakeoverOpen")},om=function(e,t){return{type:mh,data:{tabBarId:e,tabName:t}}};const am=function(e,t){return function(n,r,i){var o=i.onChangeRoute;if(o){var a=Jh(r());a.settingsTab=t,o(a).then((function(r){r&&n(om(e,t))}))}else n(om(e,t))}};function sm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var um=["data.config.region_overrides","data.config.labelBundle","data.config.annotations_api_init_options.modules","data.config.annotations_api_init_options"],cm=function(e){return{type:Sf,data:e}},dm=["reference"],fm=function(e,t,n){if(!a().getNested(e(),"activityEdit.isDirty"))return hm();var r=Tm(e);return mm(r,dm),n&&n.duplicatedActivityId&&(r.duplicated_activity_id=n.duplicatedActivityId),t.component.comms.request({url:a().getNested(n,"url")||"/itembank/activities",action:"set",data:{activity:r}})},pm=function(e,t){var n=e();if(!a().getNested(n,"activityEdit.customRegionTemplatesNeedSave"))return hm();var r=a().getNested(n,"activityEdit.customRegionTemplates")||[];return t.component.comms.request({url:"/itembank/activities/playertemplates",action:"set",data:{activity_player_templates:r}})},hm=function(){return S.resolve({noActionOnResolve:!0})},mm=function(e,t){a().each(t,(function(t){var n=a().getNested(e,t);a().isString(n)&&a().setNested(e,t,n.trim())}))},gm=function(e,t){!0===e.meta.status&&t({type:xf})},ym=function(e,t,n){var r=a().getNested(e,"data.activity")||{};n&&(t(function(e){return{type:Kd,data:e}}({oldId:n,newId:r.activity_id})),t(wh({show:!0})));zp(r),t(cm(r))},vm=function(e,t,n){var r=t(),i=a().getNested(e,"data.activity")||{},o=a().getNested(i,"reference")||"",s=a().getNested(r,"ui.navigate.route.path"),l=a().getNested(r,"ui.navigate.route.params.reference");Ch(r)||"activities/new"!==s&&o===l?"activities/:reference/items/new"===s&&_m(e,t,n):bm(e,n)},bm=function(e,t){var n=a().getNested(e,"data.activity")||{},r=a().getNested(n,"reference")||"",i=window.encodeURIComponent(r);t(yh({currentLocation:"activities/".concat(i)}))},_m=function(e,t,n){n(yh({currentLocation:wm(t)},!1,!0)),n(am("activityEditModeTabBar",Em(e)))},wm=function(e){var t=xm(e),n=a().getNested(e(),"ui.navigate.route.params.reference"),r=t.data.items,i=r[r.length-1];return["activities",window.encodeURIComponent(n),"items",window.encodeURIComponent(i.id)].join("/")},Em=function(e){var t=a().getNested(e,"data.activity")||{},n=a().getNested(t,"data.adaptive");return n&&a().isJsonObject(n)?"adaptive":"items"},Sm=function(e,t,n){var r=e.meta||e,i=r.code||1e4;t(function(e){return{type:wf,data:e}}(r)),n&&t(wh({show:!0,errorCode:i}))},xm=function(e){var t=e(),n=a().getNested(t,"activityEdit.activityJson.activity_id"),r=a().getNested(t,"activityEdit.activityJson"),i=a().deepExtend({},r);return-1===n&&delete i.activity_id,i},km=function(e,t){var n=new sd(sd.EVENTS.saveActivity);return n.setData(e),t.component.triggerPublicEvent(n),n},Tm=function(e){var t=xm(e);return a().each(um,(function(e){var n=a().getNested(t,e);!a().isUndefined(n)&&a().isEmpty(n)&&a().deleteNested(t,e)})),t};const Om=function(e){return function(t,n,r){var i=r.i18n,o=xm(n),s=km(o,r),l=[],u=a().isObject(e)&&e.duplicatedActivityId,c=a().getNested(o.data,"config.administration.pwd");a().isUndefined(c)||/^[a-f0-9]{64}$/gi.test(c)?s.isDefaultPrevented()||(t(function(e){return{type:Ef,data:e}}(o)),l.push(fm(n,r,e)),l.push(pm(n,r)),S.all(l).then((function(e){var r=sm(e,2),i=r[0],a=r[1];a.noActionOnResolve||gm(a,t),i.noActionOnResolve?t(cm(o)):(ym(i,t,u),vm(i,n,t))})).catch((function(e){Sm(e,t,u)}))):alert(i.get("assessAdminPasswordError"))}};const Cm=function(e){return{type:Af,data:e}};function Am(e){return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mm(e,t){return(Mm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lm(e);if(t){var i=Lm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rm(this,n)}}function Rm(e,t){if(t&&("object"===Am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lm(e){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mm(e,t)}(o,e);var t,n,r,i=Dm(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={duplicatePopoverActive:!1},t}return t=o,(n=[{key:"componentDidUpdate",value:function(){this.state.duplicatePopoverActive&&f()(".lrn-btn-save-popover-button").focus()}},{key:"render",value:function(){var e=this.context.i18n,t=this.props.buttonStates,n=t.isSaving,r=t.isSaved,i=t.isEnabled,o=this.props.duplicateEnabled,s=["lrn-btn-save","lrn-btn"],l="lrn-author-save-button-group",u="lrn-btn-save-popover";return n?s.push("lrn-btn-saving"):r?s.push("lrn-btn-success"):s.push("lrn-btn-primary"),o&&(l+=" lrn-btn-save-dropdown-active"),this.state.duplicatePopoverActive||(u+=" lrn-popover-hide"),zt.createElement("div",{className:l,"data-authorapi-selector":"save-group"},zt.createElement("button",{type:"button",className:a().classNames(s),disabled:!i,onClick:this.onSave.bind(this),"data-authorapi-selector":"save"},zt.createElement("span",{className:"lrn-i-save"}),zt.createElement("div",{className:"lrn-spinner-save"},e.get("loadingText")),zt.createElement("span",{className:"lrn-author-inline-block lrn-author-margin-left-xs"},e.get("saveButton"))),o?zt.createElement("button",{type:"button",className:"lrn-btn-save-dropdown",onClick:this.toggleSavePopover.bind(this),onMouseDown:function(e){return e.preventDefault()},disabled:!!this.props.duplicateDropdownDisabled},zt.createElement("span",{className:"lrn-i-arrow"})):null,o?zt.createElement("div",{className:u},zt.createElement("ul",null,zt.createElement("li",null,zt.createElement("button",{type:"button",onMouseDown:this.onDuplicate.bind(this),onBlur:this.toggleSavePopover.bind(this,!1),className:"lrn-btn-save-popover-button"},this.props.duplicateButtonText)))):null)}},{key:"toggleSavePopover",value:function(e){if(!this.props.duplicateDropdownDisabled){var t=a().isBoolean(e)?e:!this.state.duplicatePopoverActive;this.setState({duplicatePopoverActive:t})}}},{key:"onSave",value:function(){this.props.save()}},{key:"onDuplicate",value:function(){this.props.buttonStates.isEnabled&&this.props.duplicationWarning&&!confirm(this.props.duplicationWarning)||(this.toggleSavePopover(!1),this.props.duplicate())}}])&&Pm(t.prototype,n),r&&Pm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Nm.contextTypes={i18n:jn().object};const Im=Nm;function jm(e){return(jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ym(e,t){return(Ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qm(e);if(t){var i=qm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vm(this,n)}}function Vm(e,t){if(t&&("object"===jm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qm(e){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Um=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ym(e,t)}(o,e);var t,n,r,i=Hm(o);function o(){return Bm(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"duplicateActivity",value:function(){this.props.setActivityEditMode("confirm_duplicate")}},{key:"render",value:function(){var e=this.context.i18n,t=this.props.showDuplicate&&!this.props.newActivity&&!this.props.isDuplicatingActivity&&!this.props.isSaving,n={isSaving:this.props.isSaving,isSaved:this.props.isSaved,isEnabled:this.props.isDirty&&!this.props.isSaving},r=this.props.deepCopyEnabled&&e.get("duplicateActivityWarning");return zt.createElement(Im,{duplicationWarning:r,duplicateButtonText:e.get("duplicateActivityButton"),duplicateEnabled:t,save:this.props.saveActivity,duplicate:a().bind(this.duplicateActivity,this),buttonStates:n})}}])&&Fm(t.prototype,n),r&&Fm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Um.contextTypes={i18n:jn().object};const Wm=Ln((function(e){return{deepCopyEnabled:e.confirmActivityDuplicate.deepCopy,isDirty:e.activityEdit.isDirty||e.activityEdit.customRegionTemplatesNeedSave,isSaved:e.activityEdit.isSaved,isSaving:e.activityEdit.isSaving,isDuplicatingActivity:e.activityEdit.isDuplicatingActivity,newActivity:e.activityEdit.newActivityJsonSet,showDuplicate:e.activityEdit.duplicateShow&&!Ch(e),ui:e.ui}}),{saveActivity:Om,setActivityEditMode:Cm})(Um);function zm(e){return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Km(e,t){return(Km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qm(e);if(t){var i=Qm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jm(this,n)}}function Jm(e,t){if(t&&("object"===zm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qm(e){return(Qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xm="lrn-author-message-icon-end",eg="lrn-author-message-icon",tg="lrn-author-message-text",ng={error:zt.createElement("span",{className:"lrn-i-exclamation-circle"}),info:zt.createElement("span",{className:"lrn-i-help"})},rg=function(e){var t="right"===e.iconPosition?Xm:eg,n={icon:!1!==e.icon&&zt.createElement("div",{tabIndex:"0",key:"icon",className:t,"data-authorapi-tooltip":e.iconTooltip},e.icon||ng[e.type]),content:zt.createElement("span",{key:"content",className:tg},e.children)},r=Object.keys(n);"right"===e.iconPosition&&r.reverse();var i=r.map((function(e){return n[e]}));return zt.createElement(zt.Fragment,null,i)},ig=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Km(e,t)}(o,e);var t,n,r,i=Zm(o);function o(){return Gm(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.icon,r=e.type,i=e.iconTooltip,o=e.iconPosition;return zt.createElement(rg,{icon:n,type:r,iconTooltip:i,iconPosition:o},t)}}])&&$m(t.prototype,n),r&&$m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function og(e){return(og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ig,"defaultProps",{iconTooltip:"",iconPosition:"left"});var ag=["children","className","icon","type","iconPosition","onDismiss","iconTooltip"];function sg(){return(sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lg(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ug(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dg(e,t){return(dg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hg(e);if(t){var i=hg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pg(this,n)}}function pg(e,t){if(t&&("object"===og(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hg(e){return(hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mg={root:"lrn-author-message",icon:"lrn-author-message-icon",dismiss:"lrn-author-message-dismiss",text:"lrn-author-message-text",error:"lrn-author-message-error",info:"lrn-author-message-info"},gg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dg(e,t)}(o,e);var t,n,r,i=fg(o);function o(){return ug(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.icon,i=e.type,o=e.iconPosition,s=e.onDismiss,l=e.iconTooltip,u=lg(e,ag);return zt.createElement("div",sg({className:a().classNames(mg.root,mg[i],n)},u),zt.createElement(ig,{iconTooltip:l,icon:r,type:i,iconPosition:o},t),s&&zt.createElement("div",{className:mg.dismiss},zt.createElement(cs,{onClick:s})))}}])&&cg(t.prototype,n),r&&cg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function yg(e){return(yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _g(){return(_g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=wg(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function wg(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kg(e)););return e}function Eg(e,t){return(Eg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kg(e);if(t){var i=kg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xg(this,n)}}function xg(e,t){if(t&&("object"===yg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kg(e){return(kg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gg,"defaultProps",{iconTooltip:"",iconPosition:"left"});var Tg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eg(e,t)}(o,e);var t,n,r,i=Sg(o);function o(){return vg(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"template",get:function(){return"activityEdit/itemListForActivityList"}},{key:"SELECTORS",get:function(){return a().extend(_g(kg(o.prototype),"SELECTORS",this),{backBtn:'[data-authorapi-selector="back"]',itemBankListOutlet:'[data-authorapi-view="itembank-list"]',saveButtonWrapper:'[data-authorapi-selector="activity-save-button-wrapper"]',messageWrapper:'[data-authorapi-selector="item-picker-message-wrapper"]'})}},{key:"events",get:function(){return[["click",this.SELECTORS.backBtn,"backToActivityEditView"]]}},{key:"onMessages",get:function(){return a().extend(_g(kg(o.prototype),"onMessages",this),{onInitQuestionsApp:"onInitQuestionsApp",backToActivityEditView:"backToActivityEditView",itemBankChange:"onItemBankChange"})}},{key:"initialize",value:function(e,t,n,r){this.chosenItemBankName=e.ibName,ld.prototype.initialize.call(this,e,t,n,r),a().getNested(this.initOptionsModel.getConfig(),"activity_edit.item_search.filter")&&this.itemCollection.enableActivityEditFilter()}},{key:"remove",value:function(){this.removeSaveButton(),this.removeResourceItemPickerMessage(),this.dispatch(dh(!1)),c.View.prototype.remove.call(this)}},{key:"getItemCollectionName",value:function(){return"introItem"===this.itemType?"item_list_for_intro_item":"outroItem"===this.itemType?"item_list_for_outro_item":this.mode}},{key:"renderToolbar",value:function(){if(!this.toolbarView){var e=this.itemCollection.getQuestionFeatureList(),t=a().extend({title:a().getNested(this.config,"item.title")||{}},this.config.toolbar);t.showStatusSearch=!1,t.add&&(t.add=!1),this.toolbarView=new gd({questionFeatureList:e,tagsUtil:this.tagsUtil,dataManager:this.dataManager,config:t,searchModel:this.getSearch(),i18n:this.i18n,isItemPicker:!0}),this.insertView('[data-authorapi-view="toolbar"]',this.toolbarView)}this.toolbarView.render(),!this.itemBankListView&&this.itemBankList?(this.itemBankListView=new Yp({itemBankList:this.itemBankList,selectedItemBank:this.selectedItemBankIndex,i18n:this.i18n}),this.insertView(this.SELECTORS.itemBankListOutlet,this.itemBankListView),this.itemBankListView.render()):this.itemBankListView&&this.itemBankList&&(this.itemBankListView.selectedItemBank=this.selectedItemBankIndex,this.itemBankListView.render()),this.spawn("applyBreakpoints")}},{key:"beforeRender",value:function(){this.itemsView=new Dp({app:this.app,config:this.options.config,el:!1,searchModel:this.getSearch(),dataManager:this.dataManager,questionsAppReadyListener:this.questionsAppReadyListener,itemsInActivity:this.itemsInActivity,activity:this.activity,i18n:this.i18n,metricsUtil:this.metricsUtil,itemType:this.itemType}),this.insertView(this.SELECTORS.items,this.itemsView.showLoader()),Ld.loadLearnosityApi("questions")}},{key:"afterRender",value:function(){this.itemType||this.renderSaveButton(),this.dispatch(dh(!0));var e=this.app.shell.getState(),t=this;this.renderReason=uh.INITIAL_RENDER,this.spawn("startLoadingRequest","renderItemListForActivityList"),"new"===this.activityReference&&(this.activityReference=a().uuid(),this.app.shell.dispatch(Wp({reference:this.activityReference,description:""})),e=this.app.shell.getState());var n=a().getNested(e,"activityEdit");if(n.isNewActivity||n.activityLoaded&&n.activityJson.reference===this.activityReference)this.fetchItems();else{var r=this.app.shell.subscribe((function(){e=t.app.shell.getState(),!0===a().getNested(e,"activityEdit.activityLoaded")&&(t.fetchItems(),r())}));this.app.shell.dispatch(nh({payload:{reference:this.activityReference}}))}}},{key:"getIsSaveButtonEnabled",value:function(){return a().getNested(this.getContext().app.initOptionsModel.getConfig(),"activity_edit.save.show")}},{key:"isResourceItemPicker",value:function(){var e=a().getNested(this.initOptionsModel.getConfig(),"activity_edit.resource_item.show");return"resourceItem"===this.itemType&&e}},{key:"renderSaveButton",value:function(){var e=this.el.querySelector(this.SELECTORS.saveButtonWrapper);e&&mr.render(zt.createElement(Wm,null),e,this.getContext())}},{key:"renderResourceItemPickerMessage",value:function(){var e=this.i18n,t=this.el.querySelector(this.SELECTORS.messageWrapper);t&&mr.render(zt.createElement(gg,{type:"info"},e.get("resourceItemPickerInfoText")),t,this.getContext())}},{key:"removeSaveButton",value:function(){var e=this.el.querySelector(this.SELECTORS.saveButtonWrapper);e&&mr.unmountComponentAtNode(e)}},{key:"removeResourceItemPickerMessage",value:function(){var e=this.el.querySelector(this.SELECTORS.messageWrapper);e&&mr.unmountComponentAtNode(e)}},{key:"fetchItems",value:function(){var e=this.app.shell.getState();this.itemsInActivity=a().clone(a().getNested(e,"activityEdit.activityJson.data.items"))||[];var t=a().getNested(e,"activityEdit.activityJson.data.config.navigation.resource_items")||[];if(t.length&&this.itemsInActivity.push(t[0]),a().each(["intro_item","outro_item"],a().bind((function(t){var n=a().getNested(e,"activityEdit.activityJson.data.config.navigation."+t);n&&this.itemsInActivity.push(n)}),this)),this.itemsView.setItemsInActivity(this.itemsInActivity),this.handleItemBankSettings(),this.isResourceItemPicker()&&this.renderResourceItemPickerMessage(),this.itemCollection.hasFetched)return this.renderToolbar(),this.renderItems(this.itemCollection.getItemsForCurrentPage()),void this.spawn("completeLoadingRequest","renderItemListForActivityList");var n=this.getSearch();n.set("status","published"),this.itemCollection.fetchInitial(n.toJSON()).then(a().bind((function(e){this.renderToolbar(),this.renderItems(e),this.spawn("completeLoadingRequest","renderItemListForActivityList")}),this))}},{key:"renderItems",value:function(e){ld.prototype.renderItems.call(this,e),this.handleA11yMessage()}},{key:"searchItems",value:function(e){var t=!1;e.ibName&&(t=!0,this.chosenItemBankName=e.ibName,delete e.ibName),this.handleItemBankSettings(t),(this.itemBankChanged||t)&&(this.itemBankChanged=!1,this.itemBankListView&&this.renderToolbar()),ld.prototype.searchItems.call(this,e)}},{key:"handleItemBankSettings",value:function(e){this.hasNoItemBankList||(this.itemBankList||(this.itemBankList=this.initOptionsModel.getActivityEditItemBanks()),this.itemBankList?(a().isNumber(this.selectedItemBankIndex)&&!e||this.setItemBankIndexFromName(this.chosenItemBankName),this.itemBankSettings=this.itemBankList[this.selectedItemBankIndex],this.itemCollection.setItemBankSettings(this.itemBankSettings),this.tagsUtil.setItemBankSettings(this.itemBankSettings),this.itemsView.setItemBankSettings(this.itemBankSettings)):(this.itemsView.setItemBankSettings({organisation_id:this.initOptionsModel.getOrganisationId()}),this.hasNoItemBankList=!0))}},{key:"setItemBankIndexFromName",value:function(e){var t=a().findIndex(this.itemBankList,(function(t){return t.item_bank_name===e}));-1===t&&(t=0),this.setSelectedItemBankIndex(t)}},{key:"setSelectedItemBankIndex",value:function(e){this.selectedItemBankIndex=e}},{key:"setSearch",value:function(e){var t=this.options.state.get("search");return t||(t=new I,this.options.state.set("search",t)),t.isDifferent(e)&&t.reset(e),t.set("status","published"),this.toolbarView&&(this.toolbarView.render(),this.spawn("applyBreakpoints")),t.toJSON({cleanTags:!0})}},{key:"serialize",value:function(){var e=this.initOptionsModel.getItemSearchConfig(!0),t=this.config.back,n=this.getIsSaveButtonEnabled();return{showBackButton:t,showSaveButton:n,showNavbar:t||n,showMessage:this.isResourceItemPicker(),search:e.show,itemBankList:!!this.config.item_banks}}},{key:"navigateToSearchQuery",value:function(e){var t=this.activityReference,n=this.toolbarView.searchModel.toJSON({cleanTags:!0}),r=this.itemBankList&&this.itemBankList[this.selectedItemBankIndex]&&this.itemBankList[this.selectedItemBankIndex].item_bank_name;this.searchingItems||(e&&e.clearSearch&&(this.dataManager.getItemCollection(this.getItemCollectionName()).hasFetched=!1),this.renderReason=ch(e),"introItem"!==this.itemType?"outroItem"!==this.itemType?this.router.navigateToItemForActivitySearchQuery(t,JSON.stringify(n),r):this.router.navigateToOutroItemPicker(t,JSON.stringify(n),r):this.router.navigateToIntroItemPicker(t,JSON.stringify(n),r))}},{key:"handleA11yMessage",value:function(){var e,t=!1;switch(this.renderReason){case void 0:case uh.ON_RESULTS_RENDERED:case uh.REMOVE_TAG:case uh.REMOVE_CRITERION:t=!0,e=this.i18n.get("ariaLiveSearchResultsUpdated");break;case uh.CHANGED_SORT:var n=this.getSearch().attributes,r=n.sort_field,i=n.sort;e=this.i18n.getSortMessage(r,i);break;case uh.CLEAR_SEARCH:t=!0,e=this.i18n.get("ariaLiveSearchFiltersCleared");break;case uh.INITIAL_RENDER:t=!0}t&&this.toolbarView.focus(),e&&this.dispatch(lh(e)),delete this.renderReason}},{key:"onInitQuestionsApp",value:function(e){this.questionsApp=e}},{key:"onItemBankChange",value:function(e){var t=a().getNested(this.config,"toolbar.search.show");this.setSelectedItemBankIndex(e.index),this.itemsView.showLoader(),delete this.lastPageRendered,this.itemBankChanged=!0,t?this.toolbarView.clearSearch():this.navigateToSearchQuery({clearSearch:!0})}},{key:"backToActivityEditView",value:function(){var e=this.itemsView.getSelectedItemsCount(),t=this.dataManager.getItemCollection("item_for_activity_list");if(e){var n=this.i18n.get("backWithSelectedItems").replace(/%number%/,e);if("introItem"===this.itemType&&(n=this.i18n.get("backWithIntroItem")),"outroItem"===this.itemType&&(n=this.i18n.get("backWithOutroItem")),!window.confirm(n))return}this.itemType||this.itemsInActivity.forEach((function(e){var n=t.findWhere({reference:e});n&&n.unset("addedToActivity")}));var r=this.itemType?qs(this.itemType):"ItemPicker",i="last".concat(r,"SearchState"),o=this.router._locationState.current;this.app.shell.dispatch(ih({field:i,lastLocation:o})),this.itemType=void 0,this.router.navigateToActivity(this.activityReference)}},{key:"questionsReady",value:function(){this.itemsView.afterRender()}}])&&bg(t.prototype,n),r&&bg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(ld);function Og(e){return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pg(e,t){return(Pg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rg(e);if(t){var i=Rg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dg(this,n)}}function Dg(e,t){if(t&&("object"===Og(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Rg(e){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pg(e,t)}(o,e);var t,n,r,i=Mg(o);function o(){return Cg(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"searchEntitiesMessage",get:function(){return"searchActivities"}}])&&Ag(t.prototype,n),r&&Ag(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(De);function Ng(e){return(Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ig(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bg(){return(Bg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Fg(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Fg(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qg(e)););return e}function Yg(e,t){return(Yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qg(e);if(t){var i=qg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vg(this,n)}}function Vg(e,t){if(t&&("object"===Ng(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qg(e){return(qg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ug=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yg(e,t)}(o,e);var t,n,r,i=Hg(o);function o(){return Ig(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return a().extend(Bg(qg(o.prototype),"SELECTORS",this),{newActivityBtn:'[data-authorapi-selector="toolbar-new-activity-btn"]',adaptiveBtn:'[data-authorapi-selector="toolbar-new-adaptive-btn"]',adaptiveDropdownBtn:'[data-authorapi-selector="adaptive-dropdown"]'})}},{key:"INPUT_ID_PREFIX",get:function(){return"lrn_search_"}},{key:"EXPAND_TARGET_ATTR",get:function(){return"authorapi-target"}},{key:"CLASSES",get:function(){return a().extend(Bg(qg(o.prototype),"CLASSES",this),{lrnAuthorHide:"lrn-author-btn-dropdown-menu-is-hidden",menu:"lrn-author-btn-dropdown-menu",adaptiveWhiteBorder:"lrn-author-dropdown-btn-white-border",lrnAuthorBtnDropdown:"lrn-author-btn-dropdown",lrnIArrow:"lrn-i-arrow"})}},{key:"VIEWPORTS",get:function(){return{SMALL:"small",MEDIUM:"medium",LARGE:"large"}}},{key:"events",get:function(){return a().extend(Bg(qg(o.prototype),"events",this),{'change [data-authorapi-selector="activity-search"] input':"updateModel",'change [data-authorapi-selector="activity-search"] select':"updateModel",'keyup [data-authorapi-selector="activity-search"] input':"updateModel",'click [data-authorapi-selector="adaptive-dropdown"]':"toggleAdaptiveBtn",'blur [data-authorapi-selector="toolbar-new-adaptive-btn"]':"hideAdaptiveMenu",'focus [data-authorapi-selector="toolbar-new-adaptive-btn"]':"showAdaptiveMenu"})}},{key:"template",get:function(){return"activityList/toolbar/search"}},{key:"initialize",value:function(e){var t=e.dataManager,n=e.config;c.Courier.add(this),this.dataManager=t,this.fields={},this.addListeners(),this.toolbarConfig=n,this.tagSearchViews=[],this.generateTagsInputIds(),this.initOptionsModel=this.dataManager.initOptionsModel}},{key:"afterRender",value:function(){this.cacheFields(),this.renderTagSearchInputs()}},{key:"serialize",value:function(){var e=this,t=a().extend({},this.toolbarConfig,{inActivityList:!0,showTitle:a().getNested(this.toolbarConfig,"title.show")});return t.viewId=this.INPUT_ID_PREFIX+this.cid,a().each(this.tagsInputIds,(function(e,n){t[n+"TagsId"]=e})),a().each(this.VIEWPORTS,(function(n){var r="".concat(n,"Viewport");t[r]={},a().each(e.tagsInputIds,(function(e,i){t[r][i+"TagsId"]="".concat(e,"-viewport-").concat(n),t[r].viewport=n})),t[r].viewIdWithViewport="".concat(t.viewId,"-viewport_").concat(n)})),t.showTitle?(t.searchStringName=this.i18n.get("searchTitleReferenceDescription"),t.searchString=this.model.get("titleOrReferenceOrDescription")):(t.searchStringName=this.i18n.get("searchReferenceDescription"),t.searchString=this.model.get("referenceOrDescription")),t.statusOptions=jt.getStatusOptions(a().getNested(this.initOptionsModel.getConfig(),"activity_list.filter.restricted.status")||[],this.model.get("status"),this.i18n),t}},{key:"hideAdaptiveMenu",value:function(){this.$el.find(this.SELECTORS.adaptiveBtn).addClass(this.CLASSES.lrnAuthorHide)}},{key:"showAdaptiveMenu",value:function(){this.$el.find(this.SELECTORS.adaptiveBtn).removeClass(this.CLASSES.lrnAuthorHide)}},{key:"toggleAdaptiveBtn",value:function(){this.$el.find(this.SELECTORS.adaptiveBtn).toggleClass(this.CLASSES.lrnAuthorHide)}}])&&jg(t.prototype,n),r&&jg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(It);function Wg(e){return(Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $g(e,t){return($g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jg(e);if(t){var i=Jg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zg(this,n)}}function Zg(e,t){if(t&&("object"===Wg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jg(e){return(Jg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$g(e,t)}(o,e);var t,n,r,i=Kg(o);function o(){return zg(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"MESSAGES",get:function(){return{search:"searchActivities"}}},{key:"SELECTORS",get:function(){return{searchOutlet:'[data-authorapi-view="activity-list-search"]',stateOutlet:'[data-authorapi-view="activity-list-state"]'}}},{key:"events",get:function(){return{'click [data-authorapi-selector="toolbar-new-activity-btn"]':"createNewActivity",'click [data-authorapi-selector="toolbar-new-adaptive-btn"]':"createNewAdativeActivity",'touchstart [data-authorapi-selector="toolbar-new-adaptive-btn"]':"createNewAdativeActivity"}}},{key:"template",get:function(){return"activityList/toolbar"}},{key:"initialize",value:function(e){var t=e.dataManager,n=e.searchModel,r=e.config,i=e.tagsUtil;c.Courier.add(this),this.tagsUtil=i,this.dataManager=t,this.searchModel=n,this.toolbarConfig=r}},{key:"beforeRender",value:function(){this.searchView=new Ug({el:!1,model:this.searchModel,tagsUtil:this.tagsUtil,dataManager:this.dataManager,config:this.toolbarConfig,i18n:this.i18n,initOptionsModel:this.options.dataManager.initOptionsModel}),this.stateView=new Fc({model:this.searchModel,i18n:this.i18n,isActivity:!0,config:this.toolbarConfig,initOptionsModel:this.options.dataManager.initOptionsModel}),this.insertView(this.SELECTORS.searchOutlet,this.searchView),this.insertView(this.SELECTORS.stateOutlet,this.stateView)}},{key:"createNewActivity",value:function(){this.spawn("createNewActivity",{isAdaptive:!1})}},{key:"createNewAdativeActivity",value:function(){this.spawn("createNewActivity",{isAdaptive:!0})}},{key:"onSearchActivities",value:function(){this.searchView.hideAdvanced(),this.stateView.render()}},{key:"serialize",value:function(){return this.toolbarConfig}}])&&Gg(t.prototype,n),r&&Gg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gc);function Xg(e){return(Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ey(e){return function(e){if(Array.isArray(e))return ty(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ty(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ty(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ny(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iy(){return(iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=oy(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function oy(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uy(e)););return e}function ay(e,t){return(ay=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uy(e);if(t){var i=uy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ly(this,n)}}function ly(e,t){if(t&&("object"===Xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uy(e){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ay(e,t)}(o,e);var t,n,r,i=sy(o);function o(){return ny(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"events",get:function(){return[["click",'[data-authorapi-selector="open-activity"]',"openActivity"]].concat(ey(iy(uy(o.prototype),"events",this)))}},{key:"SELECTORS",get:function(){return a().extend(iy(uy(o.prototype),"SELECTORS",this),{utcTime:'[data-authorapi-selector="activity-utc-time"]',flyout:{tags:'[data-authorapi-selector="activity-tags-flyout"]'},flyoutToggle:{tags:'[data-authorapi-selector="activity-tags-toggle"]'}})}},{key:"template",get:function(){return"activityList/activity"}},{key:"flyoutActiveMessage",get:function(){return"activityActive"}},{key:"flyoutInactiveMessage",get:function(){return"activityInactive"}},{key:"initialize",value:function(){c.Courier.add(this);var e=this.i18n.get("dateTimeLocale");this.closeTagsFlyout=a().bind(this.closeTagsFlyout,this),""!==e&&$().locale(e)}},{key:"afterRender",value:function(){this.$(this.SELECTORS.utcTime).each(a().bind(this.formatTime,this))}},{key:"serialize",value:function(){var e=this,t=this.model.toJSON(),n=a().getNested(t,"data.config.time.max_time"),r=this.model.getFormattedTags({splitInto:this.NUM_TAGS_COLUMNS,idealCountPerSplit:this.IDEAL_TAG_COUNT_PER_COLUMN}),i=a().getNested(this.options,"config.title.show");t.tags=this.model.getFormattedTags();var o=t.tags.length;return t.tagsCount=o,this.model.tagHelper.isTagsFormatV2(t.tags)||(t.tags=this.model.tagHelper.convertTagsV1toV2(t.tags)),o>this.MAX_DISPLAY_NUMBER.TAGS?(t.tags=t.tags.slice(0,this.MAX_DISPLAY_NUMBER.TAGS),t.exceedTags=o-this.MAX_DISPLAY_NUMBER.TAGS):o>=1?t.exceedTag=1:0===o&&(t.noTags=!0),a().isEmpty(t.data.items)&&(t.noItems=0),a().isArray(t.data.items)&&1===t.data.items.length&&(t.containsOnlyOneItem=!0),n&&(t.maxTime=~~(n/60)),a().isEmpty(t.description)&&(t.description=" "),t.showStatus=a().getNested(this.options,"config.status"),t.tagColumns={},a().times(r.length,(function(n){var i=r[n];e.model.tagHelper.isTagsFormatV2(r[n])||(i=e.model.tagHelper.convertTagsV1toV2(r[n])),t.tagColumns["column"+(n+1)]=i})),"updated"===this.searchModel.get("sort_field")?(t.utcDatetime=t.dt_updated,t.labelUpdated=!0):(t.utcDatetime=t.dt_created,t.labelUpdated=!1),t.user_name=this.getUserName(t),t.status={value:this.model.get("status"),label:this.i18n.getStatusLabel(this.model.get("status"))},i?(t.activityName=t.title?t.title:this.i18n.get("activityListUntitledActivity"),t.showReference=a().getNested(this.options,"config.title.show_reference")):t.activityName=t.reference,t.activityReferenceTooltip=this.i18n.get("activityListReferenceTooltip"),t}},{key:"openActivity",value:function(e){(e.shiftKey||e.ctrlKey||e.metaKey)&&e.currentTarget.href||(e.preventDefault(),this.spawn("openActivity",this.model))}}])&&ry(t.prototype,n),r&&ry(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(ne);function dy(e){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function py(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hy(e,t){return(hy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function my(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yy(e);if(t){var i=yy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gy(this,n)}}function gy(e,t){if(t&&("object"===dy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function yy(e){return(yy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hy(e,t)}(o,e);var t,n,r,i=my(o);function o(){return fy(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"SELECTORS",get:function(){return{activityList:'[data-authorapi-view="activity-list"]'}}},{key:"STYLES",get:function(){return{listOverlay:"lrn-list-view-overlay",listLoading:"lrn-list-view-loading",listInitialLoad:"lrn-list-view-initial-load"}}},{key:"onMessages",get:function(){return{activityActive:"showOverlay",activityInactive:"hideOverlay"}}},{key:"passMessages",get:function(){return{openActivity:"."}}},{key:"template",get:function(){return"activityList/activities"}},{key:"initialize",value:function(e){var t=e.searchModel,n=e.config;c.Courier.add(this),this.searchModel=t,this.activities=[],this.activityViews=[],this.config=n,this.firstLoad=!0}},{key:"afterRender",value:function(){this.firstLoad&&this.$el.addClass(this.STYLES.listInitialLoad)}},{key:"cleanup",value:function(){c.Layout.cleanViews(this.activityViews),this.activityViews=[],this.tooltipUtil&&this.tooltipUtil.cleanup()}},{key:"remove",value:function(){this.cleanup(),c.Layout.prototype.remove.call(this)}},{key:"renderActivities",value:function(e){var t=this,n=this;return this.activities=e,this.firstLoad&&(this.$el.removeClass(this.STYLES.listInitialLoad),delete this.firstLoad),this.$el.removeClass(this.STYLES.listLoading),this.hideOverlay(),this.cleanup(),a().each(this.activities,(function(e){var r=new cy({el:!1,config:t.config,model:e,searchModel:n.searchModel,i18n:t.i18n});n.activityViews.push(r),n.insertView(n.SELECTORS.activityList,r)})),this.render(),this.tooltipUtil=new z({el:this.el}),this}},{key:"serialize",value:function(){return{hasActivities:!!this.activities.length,hasCustomEmptyStateImage:!!this.i18n.get("activityListEmptyStateImageURL")}}},{key:"showLoader",value:function(){return this.$el.addClass(this.STYLES.listLoading),this.showOverlay(),this}},{key:"showOverlay",value:function(){this.$(this.SELECTORS.activityList).addClass(this.STYLES.listOverlay)}},{key:"hideOverlay",value:function(){this.$(this.SELECTORS.activityList).removeClass(this.STYLES.listOverlay)}}])&&py(t.prototype,n),r&&py(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.Layout);function by(e){return(by="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ey(e,t){return(Ey=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ky(e);if(t){var i=ky(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xy(this,n)}}function xy(e,t){if(t&&("object"===by(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ky(e){return(ky=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ty=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ey(e,t)}(o,e);var t,n,r,i=Sy(o);function o(){return _y(this,o),i.apply(this,arguments)}return t=o,r=[{key:"LIMIT_MIN",get:function(){return 1}},{key:"LIMIT_MAX",get:function(){return 50}}],(n=[{key:"SELECTORS",get:function(){return{paginationView1:'[data-authorapi-view="activity-list-pagination-1"]',paginationView2:'[data-authorapi-view="activity-list-pagination-2"]',activityListToolbar:'[data-authorapi-view="activity-list-toolbar"]',activities:'[data-authorapi-view="activities"]',mainContainer:j}}},{key:"template",get:function(){return"activityList/activityList"}},{key:"onMessages",get:function(){return{createNewActivity:"createNewActivity",createNewAdaptiveActivity:"createNewAdaptiveActivity",openActivity:"openActivity",getNext:"getNext",getPrevious:"getPrevious",searchActivities:"navigateToSearchQuery",displayTotal:"fetchTotal"}}},{key:"passMessages",get:function(){return{startLoadingRequest:".",completeLoadingRequest:"."}}},{key:"initialize",value:function(e,t){var n=this,r=e.initOptionsModel,i=e.state,o=e.config,s=e.search,l=e.noFetch,u=e.activityModel,d=e.componentController,p=e.isSaved;if(c.Courier.add(this),this.$mainContainer=f()(this.SELECTORS.mainContainer),this.dataManager=t,this.activityListConfig=o,this.activityCollection=t.getActivityCollection(),this.componentState=i,this.initOptionsModel=r,this.tagsUtil=d.app.tagsUtil,this.noFetch=l,this.setSearch(s),u&&p){var h=u.get("activity_id"),m=this.activityCollection.find((function(e){return e.get("activity_id")===h}));m&&this.activityCollection.remove(m),this.activityCollection.addNew(u)}this.activityCollection.on("fetchNext:finished",(function(){a()(n.activitiesPaginationViews).invoke("renderWithPageMetadata",n.activityCollection.getPageMetadata())}))}},{key:"afterRender",value:function(){var e=this,t=this.getSearch().toJSON({cleanTags:!0});if(this.renderReason=uh.INITIAL_RENDER,this.spawn("startLoadingRequest","renderActivityList"),this.noFetch)return e.renderToolbar(),e.renderPagination(),e.renderActivities(this.activityCollection.getItemsForCurrentPage()),void e.spawn("completeLoadingRequest","renderActivityList");this.activityCollection.fetchInitial(t).then((function(t){e.renderToolbar(),e.renderPagination(),e.renderActivities(t),e.componentController.completeLoadingRequest("renderActivityList")}))}},{key:"beforeRender",value:function(){this.activitiesView=new vy({searchModel:this.getSearch(),config:this.options.config,i18n:this.i18n}),this.insertView(this.SELECTORS.activities,this.activitiesView.showLoader())}},{key:"createNewActivity",value:function(e){var t=e.isAdaptive?"activities/new/adaptive":"activities/new";this.router.navigate(t)}},{key:"openActivity",value:function(e){this.router.navigateToActivity(e.get("reference"))}},{key:"renderActivities",value:function(e){var t=this.activityCollection.currentPage,n=new sd(sd.EVENTS.renderActivityList);delete this.searchingActivities,t!==this.lastPageRendered&&(this.activitiesView.renderActivities(e),this.renderPagination(),this.lastPageRendered=t),this.spawn("removeHeight"),this.spawn("publicEvent",n),this.handleA11yMessage()}},{key:"handleA11yMessage",value:function(){var e,t=!1;switch(this.renderReason){case void 0:e=this.i18n.get("ariaLiveSearchResultsUpdated");break;case uh.REMOVE_TAG:case uh.REMOVE_CRITERION:t=!0,e=this.i18n.get("ariaLiveSearchResultsUpdated");break;case uh.CHANGED_SORT:var n=this.getSearch().attributes,r=n.sort_field,i=n.sort;e=this.i18n.getSortMessage(r,i);break;case uh.CLEAR_SEARCH:t=!0,e=this.i18n.get("ariaLiveSearchFiltersCleared");break;case uh.INITIAL_RENDER:t=!0}t&&this.toolbarView.focus(),e&&this.dispatch(lh(e)),delete this.renderReason}},{key:"setSearch",value:function(e){var t=this.componentState.get("search");return t||(t=new I,this.componentState.set("search",t)),t.isDifferent(e)&&t.reset(e),t.toJSON({cleanTags:!0})}},{key:"getSearch",value:function(){return this.componentState.get("search")}},{key:"renderToolbar",value:function(){var e=a().extend({title:a().getNested(this.config,"title")||{}},this.activityListConfig.toolbar);this.toolbarView=new Qg({config:e,tagsUtil:this.tagsUtil,dataManager:this.dataManager,searchModel:this.getSearch(),i18n:this.i18n}),this.insertView(this.SELECTORS.activityListToolbar,this.toolbarView),this.toolbarView.render()}},{key:"renderPagination",value:function(){var e=this.activityCollection.getPageMetadata(),t=a().getNested(this.config,"title")||{};this.activitiesPaginationViews?a()(this.activitiesPaginationViews).invoke("setPageMetadata",e):this.activitiesPaginationViews=[this.createPagination(this.SELECTORS.paginationView1,e,{showSort:!0,title:t}),this.createPagination(this.SELECTORS.paginationView2,e)],a()(this.activitiesPaginationViews).invoke("render")}},{key:"createPagination",value:function(e,t,n){var r=new Lg({pageMetadata:t,searchModel:this.getSearch(),config:n,i18n:this.i18n});return this.insertView(e,r),r}},{key:"getNext",value:function(){var e=this,t=this.activityCollection.getNextPageMetadata();this.storeCurrentScrollPosition(),t.isCached||(this.spawn("startLoadingRequest","getNextPage"),this.activitiesView.showLoader()),a()(this.activitiesPaginationViews).invoke("showNextLoader",t),this.searchingActivities=!0,this.activityCollection.fetchNext().then((function(t){e.renderActivities(t),e.setScrollPosition(),e.spawn("completeLoadingRequest","getNextPage")}))}},{key:"getPrevious",value:function(){var e=this,t=this.activityCollection.getPreviousPageMetadata();this.storeCurrentScrollPosition(),t.isCached||(this.spawn("startLoadingRequest","getPreviousPage"),this.activitiesView.showLoader()),a()(this.activitiesPaginationViews).invoke("showPreviousLoader",t),this.searchingActivities=!0,this.activityCollection.fetchPrevious().then((function(t){e.renderActivities(t),e.setScrollPosition(),e.spawn("completeLoadingRequest","getPreviousPage")}))}},{key:"storeCurrentScrollPosition",value:function(){var e;this.scrolledParent||(this.$mainContainer.parents().each((function(){var t=f()(this);if(t.scrollTop())return e=t,!1})),e&&(this.scrolledParent=e,this.scrollOffset=e.scrollTop()))}},{key:"setScrollPosition",value:function(){this.scrolledParent&&this.scrollOffset&&(this.scrolledParent.scrollTop(this.scrollOffset),delete this.scrolledParent,delete this.scrollOffset)}},{key:"navigateToSearchQuery",value:function(e){this.searchingActivities||(this.router.navigateToActivityListSearchQuery(null,!0),this.renderReason=ch(e))}},{key:"searchActivities",value:function(e){if(!this.searchingActivities){var t=this,n=this.setSearch(e);this.searchingActivities=!0,delete this.lastPageRendered,this.activitiesView.showLoader(),this.toolbarView&&(this.toolbarView.onSearchActivities(),this.activityCollection.fetchSearchResults(n).then((function(e){return t.renderActivities(e)})))}}},{key:"fetchTotal",value:function(){var e=this,t=function(){var t=a().extend({fetchingTotal:!1},e.activityCollection.getPageMetadata());a()(e.activitiesPaginationViews).invoke("renderWithPageMetadata",t)};this.activityCollection.fetchTotal().then(t).catch(t)}}])&&wy(t.prototype,n),r&&wy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.View);const Oy=c.Collection.extend({STORAGE_NAMESPACE:"lrn_author_",model:c.Model,initialize:function(e,t){var n="";t.uuid&&(n=t.uuid),this.options=t,this._storageKey=this.STORAGE_NAMESPACE+n},getComponentState:function(e){var t=this.findWhere({component:e});return t||(t=this.add({component:e})),t},retrieve:function(e){return this._getStorage()[e]},store:function(e,t){var n,r=this._storageKey,i=this._getStorage(r);i[e]=t,n=window.JSON.stringify(i),window.sessionStorage.setItem(r,n)},removeFromStorage:function(e){this.store(e)},_getStorage:function(e){var t=e||this._storageKey,n=window.sessionStorage.getItem(t);return n?window.JSON.parse(n):{}}});function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ay=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"isTagsFormatV2",value:function(e){var t=!0;return a().each(e,(function(e){a().each(["type","name"],(function(n){a().isString(e[n])&&e[n].trim()||(t=!1)}))})),t}},{key:"convertTagsV1toV2",value:function(e){if(a().isEmpty(e))return[];var t=[];return a().each(e,(function(e){a().each(e.tags,(function(n){t.push({type:e.type,name:n.name})}))})),t}},{key:"convertTagsV2toV1",value:function(e){if(a().isEmpty(e))return[];var t=a().uniq(a().pluck(e,"type")),n={},r=[];return a().each(t,(function(e){n[e]=[]})),a().each(e,(function(e){n[e.type].push({name:e.name})})),a().each(n,(function(e,t){r.push({type:t,tags:e})})),r}},{key:"isValidTagsV2",value:function(e){return!(a().isUndefined(e)||!a().isArray(e)||0!==e.length&&!this.isTagsFormatV2(e)&&(console.warn("Each tag needs to have a value for type and name."),1))}}])&&Cy(t.prototype,n),r&&Cy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Py(e){return(Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function My(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ry(e,t){return(Ry=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ly(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Iy(e);if(t){var i=Iy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ny(this,n)}}function Ny(e,t){if(t&&("object"===Py(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ry(e,t)}(o,e);var t,n,r,i=Ly(o);function o(){return My(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"initialize",value:function(){this.tagHelper=new Ay}},{key:"getFormattedTags",value:function(e){var t=this.get("tags")||[];return this.splitFormattedTags(t,e)}},{key:"splitFormattedTags",value:function(e,t){var n,r;if(!t)return e;var i=a().extend({splitInto:1,idealCountPerSplit:e.length},t),o=[];return r=[],n=i.idealCountPerSplit,e.length>i.splitInto*i.idealCountPerSplit&&(n=Math.ceil(e.length/i.splitInto)),a().each(e,(function(t,i){var a=i===e.length-1,s=(i+1)%n==0;r.push(t),(a||s)&&o.push(r),s&&(r=[])})),o}},{key:"getTags",value:function(){var e=this.get("tags");return a().isEmpty(e)?[]:this.tagHelper.isTagsFormatV2(e)?this.tagHelper.convertTagsV2toV1(e):e}},{key:"setTags",value:function(){throw new Error("This is an abstract method, it needs to be overwritten.")}},{key:"isValidTags",value:function(e){var t=!0;return!(a().isUndefined(e)||!a().isArray(e))&&(0===e.length||(this.tagHelper.isTagsFormatV2(e)?console.warn("You can't use v2 formatted tag objects with v1 tag setters!"):(a().each(e,(function(e){return a().isObject(e)&&a().isString(e.type)&&e.type.trim()&&a().isArray(e.tags)&&e.tags.length?void a().each(e.tags,(function(e){if(!a().isString(e.name)||!e.name.trim())return t=!1,!1})):(t=!1,!1)})),t||console.warn("Each tag needs to have a value for type and name."),t)))}},{key:"prepareTagsCount",value:function(){var e=0;if(this.has("tags")){var t=this.get("tags");e=this.tagHelper.isTagsFormatV2(t)?t.length:this.tagHelper.convertTagsV1toV2(t).length}this.set("tagsCount",e)}}])&&Dy(t.prototype,n),r&&Dy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.Model);function By(e){return(By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hy(e,t){return(Hy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uy(e);if(t){var i=Uy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qy(this,n)}}function qy(e,t){if(t&&("object"===By(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Uy(e){return(Uy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hy(e,t)}(o,e);var t,n,r,i=Vy(o);function o(){return Fy(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"RENDERING_TYPE",get:function(){return{ASSESS:"assess",INLINE:"inline"}}},{key:"isSaveable",value:function(){return a().contains([this.activitySave.STATES.enabled,this.activitySave.STATES.saving],this.activitySave.get("state"))}},{key:"initialize",value:function(e,t){jy.prototype.initialize(t),this.options=t,this.registerDefaults(),this.loadInitOptionsConfig(),a().isObject(e.reference)&&(this.activityJson=e.reference,e={user_name:e.user_name,reference:e.reference.item.reference});var n=a().merge(this.defaults,e);this.attributes=a().merge(this.attributes,n),this.shouldPersistActivity=!0,t.initOptionsModel&&(this.shouldPersistActivity=t.initOptionsModel.getActivitySaveOptions().persist),!this.has("items")&&this.canEdit()&&this.set("items",[]),this.has("rendering_type")||this.set("rendering_type",this.RENDERING_TYPE.ASSESS),this.comms=t.comms,this.activitySave=t.activitySave}},{key:"canEdit",value:function(){return!this.has("adaptive")&&!this.has("sections")}},{key:"url",get:function(){return"/itembank/activities"}},{key:"registerDefaults",value:function(){this.defaults={content:"",status:h.getValidStatuses().published,data:{items:[],rendering_type:"inline"}}}},{key:"loadInitOptionsConfig",value:function(){var e=a().getNested(this.options.dataManager.initOptionsModel.getItemsApiConfig(),"init_options");this.defaults.data=a().extend(this.defaults.data,e)}},{key:"prepareForEdit",value:function(){this.readyForEdit||(this.set("originalReference",this.get("reference")),this.readyForEdit=!0)}},{key:"updateContent",value:function(e){this.set(a().extend(this.attributes,e.data.activity)),this.originalAttributes||(this.originalAttributes=a().cloneDeep(this.attributes))}},{key:"setReference",value:function(e){return!(!a().isString(e)||this.get("reference")===e)&&(this.set("reference",e),this.activitySave.updateDirtyState(),e)}},{key:"fetch",value:function(){var e=this.options.schemasUtil.fetchQuestionFeatureList(),t=this.comms.request({url:"/itembank/activityeditor",data:{reference:this.get("reference")}});return new S((function(n,r){S.all([t,e]).then((function(e){n(e[0])})).catch(r)}))}},{key:"reset",value:function(){this.originalAttributes&&(this.attributes=this.originalAttributes,delete this.originalAttributes),this.activitySave.setDefaults()}},{key:"save",value:function(){var e=a().bind((function(e,t){this.parseResponseFromServer(e),t()}),this),t={activity:a().cloneDeep(this.attributes)},n=a().bind((function(n,r){this.get("activity_id")&&!t.activity.activity_id&&(t.activity.activity_id=this.get("activity_id")),this.shouldPersistActivity?this.comms.request({url:this.url,action:"set",data:t,disableErrorAlert:!0}).done(a().bind((function(t){e(t.data.activity,n)}),this)).fail(a().bind((function(e){this.saved=!1,r(e.meta)}),this)):e(t.activity,n)}),this);return this.saved=!0,this.activitySave.add(n)}},{key:"parseResponseFromServer",value:function(e){var t={};a().each(["originalReference","activity_id","dt_updated"],(function(n){e[n]&&(t[n]=e[n])})),this.set(t,{silent:!0}),this.originalAttributes=a().cloneDeep(e)}},{key:"checkItems",value:function(){var e=this.get("data");a().isArray(e.items)||(e.items=[])}},{key:"setTags",value:function(e){return!(!this.isValidTags(e)||a().isEqual(e,this.getTags()))&&(this.set("tags",e),this.activitySave.set("isDirty",!0),this.activitySave.activityHasChanged(),e)}},{key:"setTitle",value:function(e){return this.get("title")!==e&&(a().isString(e)&&""===e.trim()?this.set("title",null):this.set("title",e),this.activitySave.set("isDirty",!0),this.updateContent(),e)}},{key:"getValidStatuses",value:function(){return[h.getValidStatuses().published,h.getValidStatuses().unpublished,h.getValidStatuses().archived]}}])&&Yy(t.prototype,n),r&&Yy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(jy),zy=["comms","questionReferences","widgetInstances","userLayoutData"],Gy=["last_updated_by","itemJson","originalReference","display_content","tagsCount","user_name","questions","features"];function $y(e,t){var n=zy;return e.tagsCount||(e.tagsCount=0),t&&t.prettify&&(n=a().union(n,Gy)),a().omit(e,n)}function Ky(e,t){var n,r=e.widgetInstances;return r?(n=a().map(e[t],(function(e){return e.reference})),r=r.filter((function(e){return a().contains(n,e.get("reference"))})),a().map(r,(function(e){return e.toJSON()}))):[]}const Zy={convert:function(e,t){return a().cloneDeep({item:$y(e,t),questions:Ky(e,"questions"),features:Ky(e,"features")})},reverse:function(e){var t={item:a().cloneDeep(e.item),widgetInstances:[]};return a().each(e.questions,(function(e){t.widgetInstances.push(e)})),a().each(e.features,(function(e){t.widgetInstances.push(e)})),t}};function Jy(e){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ev(e,t){return(ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rv(e);if(t){var i=rv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nv(this,n)}}function nv(e,t){if(t&&("object"===Jy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rv(e){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}(o,e);var t,n,r,i=tv(o);function o(){return Qy(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"EXTERNAL_JSON_BLACKLIST",get:function(){return["id","item_id","tmp_ref","navigate","region_id","activity_count","workflow"]}},{key:"url",get:function(){return"/itembank/items"}},{key:"initialize",value:function(e,t){var n;jy.prototype.initialize(t),this.registerDefaults(),a().isObject(e.reference)&&(this.itemJson=e.reference,e={user_name:e.user_name,reference:e.reference.item.reference}),n=a().merge(this.defaults,e),this.attributes=a().merge(this.attributes,n),this.comms=t.comms,this.options=t,this.get("dt_created")||this.set("dt_created",$().utc().format()),this.get("dt_updated")||this.set("dt_updated",$().utc().format()),this.prepareTagsCount()}},{key:"fetch",value:function(){var e=this.options.schemasUtil.fetchQuestionFeatureList(),t=null;if(a().isObject(this.itemJson))t=S.resolve({data:Zy.reverse(this.itemJson)});else{var n={reference:this.get("reference")};this.get("organisation_id")&&(n.itemBankSettings={organisation_id:this.get("organisation_id")},this.get("item_pool_id")&&(n.itemBankSettings.item_pool_id=this.get("item_pool_id"))),t=this.comms.request({url:"/itembank/itemeditor",data:n})}return new S((function(n,r){S.all([t,e]).then((function(e){n(e[0])})).catch(r)}))}},{key:"toJSON",value:function(e){var t=a().assign({},this.attributes),n=Zy.convert(t,e);return e&&e.forExternalUse?a().omitDeep(n,this.EXTERNAL_JSON_BLACKLIST):n}},{key:"setDataAndWidgetInstances",value:function(e){this.set(e.data.item,{silent:!0});var t=this.get("widgetInstances");t||(t=new c.Collection,this.set({widgetInstances:t})),t.reset(),t.add(e.data.widgetInstances,{silent:!0})}},{key:"registerDefaults",value:function(){this.defaults={content:"",status:h.getValidStatuses().published}}}])&&Xy(t.prototype,n),r&&Xy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(jy);function ov(e){return(ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lv(e,t){return(lv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dv(e);if(t){var i=dv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cv(this,n)}}function cv(e,t){if(t&&("object"===ov(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dv(e){return(dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fv(e){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mv(e,t){return(mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vv(e);if(t){var i=vv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yv(this,n)}}function yv(e,t){if(t&&("object"===fv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vv(e){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mv(e,t)}(o,e);var t,n,r,i=gv(o);function o(){return pv(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"activityHasChanged",value:function(){this.get("state")!==this.STATES.saving&&(this.get("isDirty")?this.set("state",this.STATES.enabled):this.set("state",this.STATES.disabled))}},{key:"updateDirtyState",value:function(){this.set("isDirty",!0),this.activityHasChanged()}}])&&hv(t.prototype,n),r&&hv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lv(e,t)}(o,e);var t,n,r,i=uv(o);function o(){return av(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"EVENTS",get:function(){return{success:"saveChain:resolve",error:"saveChain:reject"}}},{key:"STATES",get:function(){return{disabled:"disabled",enabled:"enabled",saving:"saving",saved:"saved"}}},{key:"defaults",get:function(){return{state:"disabled",isDirty:!1}}},{key:"initialize",value:function(){this.saveQueue=[]}},{key:"add",value:function(e){var t=this.generateSaveChainPromise();return this.set("state",this.STATES.saving),this.set("isDirty",!1),this.saveQueue.length>1&&this.saveQueue.pop(),this.saveQueue.push(e),this.pendingSave?this.pendingSave.then(a().bind((function(){a().contains(this.saveQueue,e)&&(this.pendingSave=this.generateSavePromise(e))}),this)):this.pendingSave=this.generateSavePromise(e),t}},{key:"generateSaveChainPromise",value:function(){var e=this,t=this.EVENTS;return new S((function(n,r){e.on(t.success,n),e.on(t.error,r),e.on(t.success+" "+t.error,(function(){e.off(t.success,n),e.off(t.error,r),e.off(t.success+" "+t.error,this)}))}))}},{key:"generateSavePromise",value:function(e){return new S(e).then(a().bind((function(){this.saveQueue.shift(),delete this.pendingSave,a().isEmpty(this.saveQueue)&&this.onSaveChainSuccess()}),this)).catch(a().bind((function(e){this.saveQueue.shift(),delete this.pendingSave,a().isEmpty(this.saveQueue)&&this.onSaveChainFail(e)}),this))}},{key:"onSaveChainFail",value:function(e){this.set("state",this.STATES.enabled),this.set("isDirty",!0),this.trigger(this.EVENTS.error,e)}},{key:"onSaveChainSuccess",value:function(){this.get("isDirty")?this.set("state",this.STATES.enabled):this.set("state",this.STATES.saved),this.trigger(this.EVENTS.success)}},{key:"setDefaults",value:function(){this.set("isDirty",this.defaults.isDirty),this.set("state",this.defaults.state)}}])&&sv(t.prototype,n),r&&sv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(c.Model));const _v=c.Collection.extend({PAGES_PER_FETCH:2,initialize:function(){throw new Error("This is an abstract class, only subclasses should initialize it.")},addModels:function(){throw new Error("This is an abstract method, it needs to be overwritten.")},fetchInitial:function(){throw new Error("This is an abstract method, it needs to be overwritten.")},getExtraRequestData:function(){return{}},fetchTotal:function(){var e=this;return this.staleFetchTotalRequest=!1,new S((function(t,n){var r=a().extend({},e.state,e.getExtraRequestData());delete r.next,e.comms.request({url:e.countUrl,action:"get",data:r}).done((function(n){e.staleFetchTotalRequest||(e.total=n.meta.total,e.lastPage=Math.ceil(e.total/e.itemsPerPage)||1),t(n)})).fail((function(e){return n(e)}))}))},fetch:function(){var e=this.getExtraRequestData(),t=a().bind((function(t,n){var r=a().extend({},this.state,e);this.isFetching=!0,this.comms.request({url:this.url,action:"get",data:r}).done(a().bind((function(e){this.isFetching=!1,this.hasFetched=!0,t(e)}),this)).fail(a().bind((function(e){this.isFetching=!1,n(e),this.trigger("error:fetch",e)}),this))}),this);return new S(a().bind((function(e,n){var r=a().uniqueId(),i=a().bind((function(){this.isFetching||r!==this.fetchQueue[0]?this.once(this.onReadyEventName,i):(this.fetchQueue.shift(),t(e,n))}),this);this.fetchQueue.push(r),i()}),this))},fetchNext:function(){return new S(a().bind((function(e,t){if(!this.hasNext())return t("No items left to fetch");if(this.currentPage++,this.hasNextCachedWithPadding())return e(this.getItemsForCurrentPage());var n=this.getItemsForCurrentPage();n.length&&e(n),this.fetch().then(a().bind((function(t){this.addModels(t),this.trigger("fetchNext:finished"),n.length||e(this.getItemsForCurrentPage())}),this)).catch(a().bind((function(){this.trigger("fetchNext:failed"),t()}),this))}),this))},fetchPrevious:function(){return new S(a().bind((function(e,t){if(!this.hasPrevious())return t("No previous items");this.currentPage--,e(this.getItemsForCurrentPage())}),this))},fetchSearchResults:function(e){return this.refresh(e)},getNextPageMetadata:function(){return this.getPageMetadata(this.currentPage+1)},getPageMetadata:function(e){var t=a().isNumber(e)?e:this.currentPage,n=this.getItemsForPage(e).length,r=this.models.length,i=Math.min(r,t*this.itemsPerPage),o=0;return t>0&&r&&(o=(t-1)*this.itemsPerPage+1),{from:o,to:i,page:t,hasNext:this.hasNext(t),hasPrevious:this.hasPrevious(t),isNextLoading:!this.hasNext(t)&&this.isFetching,isCached:n,total:this.total}},getItemsForCurrentPage:function(){return 0===this.currentPage&&this.currentPage++,this.getItemsForPage(this.currentPage)},getItemsForPage:function(e){var t=e*this.itemsPerPage,n=t-this.itemsPerPage;return this.models.slice(n,t)},getLimit:function(){return this.itemsPerPage*this.PAGES_PER_FETCH},getPreviousPageMetadata:function(){return this.getPageMetadata(this.currentPage-1)},hasNext:function(e){var t=a().isNumber(e)?e:this.currentPage;return this.getItemsForPage(t+1).length>0},hasNextCachedWithPadding:function(){var e,t,n=this.currentPage,r=this.currentPage+this.PAGES_PER_FETCH-1;for(e=n;e<=r;e++){if(t=this.getItemsForPage(e),e>this.lastPage&&0!==this.lastPage)return!0;if(!t.length)return!1}return!0},hasPrevious:function(e){return(a().isNumber(e)?e:this.currentPage)>1},refresh:function(e){return this.reset(),this.resetPageMetadata(),this.fetchInitial(e)},resetPageMetadata:function(){this.currentPage=0,this.lastPage=0,this.total=void 0,this.staleFetchTotalRequest=!0},removeDuplicateTags:function(e){return a().uniq(e,(function(e){return e.name+":"+e.type}))},setState:function(e){e&&e.tags&&(e.tags.all=this.removeDuplicateTags(e.tags.all)),this.state=a().merge(e||{},{limit:this.getLimit()})}}),wv=_v.extend({PAGES_PER_FETCH:2,url:"/itembank/itemlist",countUrl:"/itembank/itemcount",model:iv,onReadyEventName:"itemsAdded",initialize:function(e,t){this.options=t,this.filterByWorkflowStates=!!t.filterByWorkflowStates,this.currentPage=0,this.lastPage=0,this.total=void 0,this.itemsPerPage=t.limit,this.isFetching=!1,this.hasFetched=!1,this.comms=t.comms,this.setState({sort:I.DEFAULTS.sort,sort_field:I.DEFAULTS.sort_field}),this.fetchQueue=[],this.schemasUtil=this.options.dataManager.getSchemasUtil()},addModels:function(e){var t=e.data;this.state.next=e.meta.next,a().forEach(t,(function(e){e.comms=this.comms,e.questions=this.schemasUtil.getDetailedQuestions(e.questions),e.features=this.schemasUtil.getDetailedFeatures(e.features)}),this),this.add(t,{comms:this.comms,initOptionsModel:this.options.initOptionsModel,schemasUtil:this.schemasUtil}),this.each((function(e){e.options.dataManager=this.options.dataManager}),this),e.meta.next||(this.total=this.models.length,this.lastPage=Math.ceil(this.total/this.itemsPerPage)||1),this.trigger("itemsAdded")},addNew:function(e){e.options.dataManager=this.options.dataManager,e.saved=void 0,e.prepareTagsCount(),this.unshift(e)},fetchInitial:function(e){var t=this;return this.resetPageMetadata(),this.reset(),this.setState(e),S.all([t.schemasUtil.fetchQuestionFeatureList(),t.fetch()]).then((function(e){return t.addModels(e[1]),t.currentPage=1,t.getItemsForCurrentPage()}))},enableActivityEditFilter:function(){this.useActivityEditFilter=!0},setItemBankSettings:function(e){this.itemBankSettings=e},getExtraRequestData:function(){return{useActivityEditFilter:this.useActivityEditFilter,itemBankSettings:this.itemBankSettings,status:h.getStatusesFromStatusQuery(this.state.status,this.options.initOptionsModel.getRestrictedStatuses()),filterByWorkflowStates:this.filterByWorkflowStates}},getQuestionFeatureList:function(e){var t,n=a().extend({flattened:!1},e),r=this.schemasUtil.data;return r.questions.custom="Custom",n.flattened?(t={},a().each(r,(function(e){a().each(e,(function(e,n){t[n]=e}))})),t):r},setSearchQuery:function(e){this.searchQuery=e},getSearchQuery:function(){return this.searchQuery}});function Ev(e){return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kv(){return(kv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Tv(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Tv(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pv(e)););return e}function Ov(e,t){return(Ov=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pv(e);if(t){var i=Pv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Av(this,n)}}function Av(e,t){if(t&&("object"===Ev(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pv(e){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ov(e,t)}(o,e);var t,n,r,i=Cv(o);function o(){return Sv(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"url",get:function(){return"/itembank/activitylist"}},{key:"countUrl",get:function(){return"/itembank/activitycount"}},{key:"model",get:function(){return Wy}},{key:"onReadyEventName",get:function(){return"activitiesAdded"}},{key:"initialize",value:function(e,t){var n=t.comms,r=t.initOptionsModel,i=t.limit,o=t.dataManager,a=t.activitySave;this.currentPage=0,this.lastPage=0,this.initOptionsModel=r,this.comms=n,this.dataManager=o,this.activitySave=a,this.itemsPerPage=i,this.total=void 0,this.isFetching=!1,this.hasFetched=!1,this.setState({sort:I.DEFAULTS.sort,sort_field:I.DEFAULTS.sort_field}),this.fetchQueue=[]}},{key:"addNew",value:function(e){e.saved=void 0,e.prepareTagsCount(),this.unshift(e)}},{key:"addModels",value:function(e){var t=e.data;this.state.next=e.meta.next,this.add(t,{comms:this.comms,initOptionsModel:this.initOptionsModel,activitySave:this.activitySave,dataManager:this.dataManager,schemasUtil:this.dataManager.getSchemasUtil()}),e.meta.next||(this.total=this.models.length,this.lastPage=Math.ceil(this.total/this.itemsPerPage)||1),this.trigger("activitiesAdded")}},{key:"fetchInitial",value:function(e){var t=this;return this.resetPageMetadata(),this.reset(),this.setState(e),this.fetch().then((function(e){return t.addModels(e),t.currentPage=1,t.getItemsForCurrentPage()}))}},{key:"getExtraRequestData",value:function(){return{status:h.getStatusesFromStatusQuery(this.state.status,this.initOptionsModel.getConfig().activity_list.filter.restricted.status)}}},{key:"setState",value:function(e){var t=this.initOptionsModel.getConfig();a().getNested(t,"activity_list.title.show")?delete e.referenceOrDescription:delete e.titleOrReferenceOrDescription,kv(Pv(o.prototype),"setState",this).call(this,e)}}])&&xv(t.prototype,n),r&&xv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(_v);function Dv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const Rv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"END_POINTS",{QUESTION_FEATURE_NAME:"/questions/list/name/"}),this.url=window.LearnosityAuthor._internal.config.schemasApiUrl}var t,n,r;return t=e,(n=[{key:"getDetailedData",value:function(e,t){var n=this;if(e&&this.data)return a().isArray(e)?e.map((function(e){return{type:e.type,name:n.getDetailedName(e,t),reference:e.reference}})):{type:e,name:this.getDetailedName(e,t)}}},{key:"getDetailedName",value:function(e,t){var n=a().isObject(e)?e.type:e;if("custom"===n)return e.custom_type||"Custom";if("customfeature"===n)return e.custom_type||"Custom Feature";for(var r in t)if(t.hasOwnProperty(r)&&n===r)return t[r]}},{key:"deleteData",value:function(){delete this.data}},{key:"fetchQuestionFeatureList",value:function(){var e=this;return new S((function(t,n){if(e.data)return t(e.data);Ld.loadLearnosityApi("questions").then((function(){var r=Ld.getConcreteApiVersion("questions")||"latest",i=e.url+e.END_POINTS.QUESTION_FEATURE_NAME+r;fetch(i).then((function(e){return e.json()})).then((function(n){e.data={questions:n.data.responses,features:n.data.features},t(e.data)})).catch((function(e){console.log("Failed to retrieve schemas data: ",e),n(e)}))}))}))}},{key:"getDetailedQuestions",value:function(e){return this.getDetailedData(e,this.data.questions)}},{key:"getDetailedFeatures",value:function(e){return this.getDetailedData(e,this.data.features)}},{key:"getName",value:function(e,t){var n="feature"===e?"features":"questions";return this.data[n][t]}},{key:"getWidgetType",value:function(e){var t;return(a().has(this.data.features,e)||"customfeature"===e)&&(t="feature"),(a().has(this.data.questions,e)||"custom"===e)&&(t="response"),t}}])&&Dv(t.prototype,n),r&&Dv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Lv=c.Collection.extend({PAGES_PER_FETCH:2,initialize:function(){throw new Error("This is an abstract class, only subclasses should initialize it.")},addModels:function(){throw new Error("This is an abstract method, it needs to be overwritten.")},getExtraRequestData:function(){return{}},fetchInitial:function(){throw new Error("This is an abstract method, it needs to be overwritten.")},updateTotal:function(e){this.total=e,this.lastPage=Math.ceil(e/this.itemsPerPage)||1},getTotal:function(){return!!this.hasFetched&&this.total},fetch:function(){var e=a().bind((function(e,t){var n=a().extend({},this.state,this.getExtraRequestData());this.isFetching=!0,this.comms.request({url:this.url,action:"get",data:n}).done(a().bind((function(t){this.isFetching=!1,this.hasFetched=!0,e(t)}),this)).fail(a().bind((function(e){this.isFetching=!1,t(e),this.trigger("error:fetch",e)}),this))}),this);return new S(a().bind((function(t,n){var r=a().uniqueId(),i=a().bind((function(){this.isFetching||r!==this.fetchQueue[0]?this.once(this.onReadyEventName,i):(this.fetchQueue.shift(),e(t,n))}),this);this.fetchQueue.push(r),i()}),this))},fetchNext:function(){return new S(a().bind((function(e,t){if(!this.hasNext())return t("No items left to fetch");if(this.currentPage++,this.hasNextCachedWithPadding())return e(this.getItemsForCurrentPage());var n=this.getItemsForCurrentPage();n.length&&e(n),this.fetch().then(a().bind((function(t){this.addModels(t),this.trigger("fetchNext:finished"),n.length||e(this.getItemsForCurrentPage())}),this)).catch(a().bind((function(){this.trigger("fetchNext:failed"),t()}),this))}),this))},fetchPrevious:function(){return new S(a().bind((function(e,t){if(!this.hasPrevious())return t("No previous items");this.currentPage--,e(this.getItemsForCurrentPage())}),this))},fetchSearchResults:function(e){return this.refresh(e)},getNextPageMetadata:function(){return this.getPageMetadata(this.currentPage+1)},getPageMetadata:function(e){var t,n=a().isNumber(e)?e:this.currentPage,r=this.getItemsForPage(e).length,i=0;return t=n>0&&n===this.lastPage?this.total:n*this.itemsPerPage,n>0&&this.total&&(i=(n-1)*this.itemsPerPage+1),{from:i,to:t,page:n,hasNext:this.hasNext(n),hasPrevious:this.hasPrevious(n),total:this.total,isCached:r}},getItemsForCurrentPage:function(){return 0===this.currentPage&&this.currentPage++,this.getItemsForPage(this.currentPage)},getItemsForPage:function(e){var t=e*this.itemsPerPage,n=t-this.itemsPerPage;return this.models.slice(n,t)},getLimit:function(){return this.itemsPerPage*this.PAGES_PER_FETCH},getPreviousPageMetadata:function(){return this.getPageMetadata(this.currentPage-1)},hasNext:function(e){return(a().isNumber(e)?e:this.currentPage)!==this.lastPage},hasNextCachedWithPadding:function(){var e,t,n=this.currentPage,r=this.currentPage+this.PAGES_PER_FETCH-1;for(e=n;e<=r;e++){if(t=this.getItemsForPage(e),e>this.lastPage)return!0;if(!t.length)return!1}return!0},hasPrevious:function(e){return(a().isNumber(e)?e:this.currentPage)>1},refresh:function(e){return this.reset(),this.resetPageMetadata(),this.fetchInitial(e)},resetPageMetadata:function(){this.currentPage=0,this.lastPage=0,this.total=0},removeDuplicateTags:function(e){return a().uniq(e,(function(e){return e.name+":"+e.type}))},setState:function(e){e&&e.tags&&(e.tags.all=this.removeDuplicateTags(e.tags.all)),this.state=a().merge(e||{},{limit:this.getLimit()})}}).extend({url:"/itembank/features",onReadyEventName:"questionsAdded",initialize:function(e,t){this.options=t,this.currentPage=0,this.lastPage=0,this.itemsPerPage=t.limit,this.total=0,this.isFetching=!1,this.hasFetched=!1,this.comms=t.comms,this.fetchQueue=[],this.state={}},addModels:function(e){var t=e.meta.total,n=e.data;this.state.next=e.meta.next,this.add(n),a().isNumber(t)&&this.updateTotal(t),this.trigger("questionsAdded")},fetchInitial:function(e){var t={types:["sharedpassage"]};return a().isObject(e)&&(t.content_search=e.contentSearch),this.setState(t),this.resetPageMetadata(),this.reset(),this.fetch().then(a().bind((function(e){return this.addModels(e),this.currentPage++,this.getItemsForCurrentPage()}),this))}});function Nv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Iv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.comms=t.comms,this.initOptionsModel=t.initOptionsModel,this.hierarchyNodesFetch={},this.itemCollections={},this.activityDuplicationJobs=[],this.activityDuplicationCallback=t.activityDuplicationCallback,this.activityDuplicateJobPollCallback=t.activityDuplicateJobPollCallback,this.activityDuplicationPollInterval=window.LearnosityAuthor._internal.config.duplicationJobPollInterval}var t,n,r;return t=e,(n=[{key:"getActivity",value:function(e){var t=this.initOptionsModel.getUser();return new Wy(a().extend({},e,{user_name:[t.firstname,t.lastname].join(" ")}),{comms:this.comms,activitySave:this.getActivitySave(),schemasUtil:this.getSchemasUtil(),initOptionsModel:this.initOptionsModel,dataManager:this})}},{key:"getItem",value:function(e,t){var n,r=this.initOptionsModel.getUser();return this.itemCollection&&(n=this.itemCollection.findWhere({reference:e})),n||(n=new iv({reference:e,user_name:[r.firstname,r.lastname].join(" ")},{template:t,comms:this.comms,schemasUtil:this.getSchemasUtil(),initOptionsModel:this.initOptionsModel,dataManager:this})),n}},{key:"fetchActivity",value:function(e,t){return t||(e=a().isString(e)?this.getActivity({reference:e}):e,this.previousResponse=e.fetch()),this.previousResponse}},{key:"getItemsActivity",value:function(e){return this.comms.request({url:"/itemsactivity",data:{request:JSON.stringify(e)}})}},{key:"fetchItem",value:function(e,t){return t||(e=a().isString(e)?this.getItem(e):e,this.previousResponse=e.fetch()),this.previousResponse}},{key:"fetchSelectedItems",value:function(e){var t={references:e},n=this;return new S((function(e,r){n.comms.request({url:"/itembank/selecteditems",action:"get",data:t}).done((function(t){delete t.meta,e(t)})).fail((function(e){delete e.meta,r(e)}))}))}},{key:"getItemCollection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"item_list",t=arguments.length>1?arguments[1]:void 0;if(!this.itemCollections[e]){var n="item_list"===e;this.itemCollections[e]=new wv([],{comms:this.comms,initOptionsModel:this.initOptionsModel,limit:t||this.initOptionsModel.getItemListLimit(e),dataManager:this,filterByWorkflowStates:n})}return this.itemCollections[e]}},{key:"getActivityCollection",value:function(){return this.activityCollection||(this.activityCollection=new Mv([],{comms:this.comms,initOptionsModel:this.initOptionsModel,limit:this.initOptionsModel.getActivityListLimit(),dataManager:this,activitySave:this.getActivitySave()})),this.activityCollection}},{key:"getQuestionCollection",value:function(){return this.questionCollection||(this.questionCollection=new Lv([],{comms:this.comms,initOptionsModel:this.initOptionsModel,limit:this.initOptionsModel.getQuestionListLimit(),dataManager:this})),this.questionCollection}},{key:"getActivitySave",value:function(){return this.activitySave||(this.activitySave=new bv),this.activitySave}},{key:"getQuestionsActivity",value:function(){return this.comms.request({url:"/questionsactivity"})}},{key:"getSharedPassageItemCount",value:function(e,t){return this.comms.request({url:"/itembank/passageitemcount",data:{itemReference:e,widgetReference:t}})}},{key:"getHierarchyNodes",value:function(e){var t=JSON.stringify(e);return this.hierarchyNodesFetch[t]||(this.hierarchyNodesFetch[t]=this.comms.request({data:e,url:"/itembank/tagging/hierarchies/nodes"})),this.hierarchyNodesFetch[t]}},{key:"getSchemasUtil",value:function(){return this.schemasUtil||(this.schemasUtil=new Rv),this.schemasUtil}},{key:"duplicateActivity",value:function(e,t,n){if(!(this.activityDuplicationJobs.length>0)){var r=this,i=this.comms.request({url:"/itembank/duplicateactivity",action:"set",data:{activity_reference:e,new_reference:t,duplicate_shared_passages:n}});return this.timeAtDuplicationStart=(new Date).getTime()/1e3,i.done((function(e){var t=0===r.activityDuplicationJobs.length,n=a().getNested(e,"data.job_reference");n&&(r.activityDuplicationJobs.push(n),t&&(r.activityDuplicateJobPollCallback(r.getSecondsSinceDuplicationStart()),a().delay(a().bind(r.checkDuplicationJobs,r),r.activityDuplicationPollInterval)))}))}alert("An activity is currently duplicated, please wait until duplication has finished.")}},{key:"checkDuplicationJobs",value:function(){var e=this;this.activityDuplicationJobs.length>0&&this.comms.request({url:"/jobs",data:{organisation_id:this.initOptionsModel.getOrganisationId(),references:this.activityDuplicationJobs},disableErrorAlert:!0}).done((function(t){var n=a().filter(t.data,(function(e){return"completed"===e.status}));n.length>0&&(e.removeSuccessfulJobs(n),e.callDuplicationCallback(n)),e.activityDuplicationJobs.length>0&&(e.activityDuplicateJobPollCallback(e.getSecondsSinceDuplicationStart()),a().delay(a().bind(e.checkDuplicationJobs,e),e.activityDuplicationPollInterval))})).fail((function(){e.activityDuplicateJobPollCallback(e.getSecondsSinceDuplicationStart()),a().delay(a().bind(e.checkDuplicationJobs,e),e.activityDuplicationPollInterval)}))}},{key:"getSecondsSinceDuplicationStart",value:function(){var e=(new Date).getTime()/1e3-this.timeAtDuplicationStart;return e<0?0:Math.ceil(e)}},{key:"removeSuccessfulJobs",value:function(e){var t=this;a().each(e,(function(e){var n=t.activityDuplicationJobs.indexOf(e.reference);t.activityDuplicationJobs.splice(n,1)}))}},{key:"callDuplicationCallback",value:function(e){var t,n,r,i=!1;a().each(e,(function(e){a().each(e.results,(function(e,o){"meta"===o?a().isObject(e)&&!1===e.status&&(i=!0,r=e.message):(t=o,n=e)}))})),this.activityDuplicationCallback({originalReference:t,newReference:n,hasError:i,errorMessage:r})}}])&&Nv(t.prototype,n),r&&Nv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),jv=/(\/)?(\{.*?\})([\/\?]|$)/g,Bv=function(e){return e.replace(jv,(function(e,t,n,r){return t+encodeURIComponent(n)+r}))};const Fv=Bv,Yv=function(e){return a().map(e.split("/"),(function(e){return window.decodeURIComponent(e)})).join("/")};var Hv={escapeRegExp:/[\-{}\[\]+?.,\\\^$|#\s]/g,namedParam:/(\(\?)?:\w+/g,optionalParam:/\((.*?)\)/g,splatParam:/\*\w+/g};function Vv(e){this.options=e,this._handlers=[],this._locationState={current:null,previous:null},this.initialize.apply(this,arguments),this._bindRoutes()}a().extend(Vv.prototype,{ITEM_LIST_MODE_ROUTES:{items:"_showItemList","items/search/:query":"_showItemList"},ITEM_LIST_BLACKLIST:["items/duplicate"],routes:{},initialize:function(){},getLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._locationState.current;return!!t&&this._generateLocationData(t,{externalize:e})},truncateSearchParam:function(e,t){var n='"'.concat(t,'":"([^"]+)"'),r=new RegExp(n,"i"),i=Yv(e),o=i.match(r),a=o&&o[1];if(a&&a.length>250){console.log("Search query exceeds 250 characters for ".concat(t,". ")+"Only the first 250 characters will be used for search."),a=a.substring(0,250);var s='"'.concat(t,'":"').concat(a,'"');i=i.replace(r,s),e=Fv(i)}return e},navigate:function(e,t){e=this.truncateSearchParam(e,"referenceOrContent"),e=this.truncateSearchParam(e,"contentSearch");var n,r=a().extend({silent:!1},t),i={currentLocation:e,previousLocation:this._locationState.current};if(!this._shouldNavigate(e,r))return!1;var o=this._findHandler(e);if(o)n=o.route;else{if(n=this.options.controller.app.shell.canNavigate(e),i.noLegacyHandler=!0,!n)return this.options.controller.app.shell.navigate(i),!1;var s=a().bind(this._triggerOpenActivity,this),l="reference";if("items/"===n.path.substring(0,6)&&(s=a().bind(this._triggerOpenItem,this),l="itemReference"),s(n.params[l]).isDefaultPrevented())return!1}if(!r.silent){var u=this._generateLocationData(e,{route:n,externalize:!0});if(this._triggerNavigate(u).isDefaultPrevented())return!1}if(o||this.options.controller.changeComponent({mode:"none"}),this._locationState.current=e,o){var c=i.params=a().filter(this._extractParameters(o.regExp,e),(function(e){return null!==e}));o.action.apply(this,c)}return this.options.controller.app.shell.navigate(i),this._locationState.previous=this._locationState.current,!0},onPreventAction:function(){var e=this._locationState.previous;if(a().isString(e)){var t=this._generateLocationData(e);this._triggerNavigate(t),this._locationState.current=e}},_bindRoute:function(e,t){var n=this._routeToRegExp(t);if(a().isFunction(this[e])){var r=this[e];this._handlers.push({regExp:n,action:r,route:t})}},_bindRoutes:function(){a().each(this.routes,this._bindRoute,this)},_extractParameters:function(e,t){var n=Fv(t),r=e.exec(n).slice(1);return a().map(r,(function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null}))},_findHandler:function(e){var t=Fv(e);return a().find(this._handlers,(function(e){return t.match(e.regExp)}))},_generateLocationData:function(e,t){var n;if(t&&t.route)n=t.route;else{var r=this._findHandler(e);if(r)n=r&&r.route;else{var i=this.options.controller.app.shell.canNavigate(e);n=t&&t.externalize?i:i&&i.path}}var o={location:Yv(e),locationEncoded:Fv(e),route:n};return t&&t.externalize&&(o.route=this._externalizeRoute(o.route)),o},_externalizeRoute:function(e){var t=a().clone(e);return a().isString(e)?t=t.replace(/:itemReference/,":reference").replace(/:widgetReference/,":reference").replace(/:widgetData/,":data"):a().isJsonObject(e)&&a().isString(e.path)&&(a().each(["itemReference","widgetReference"],(function(e){if(t.params&&"new"===t.params[e]){var n=new RegExp(":"+e,"g");t.path=t.path.replace(n,"new")}})),t=t.path.replace(/:itemReference/,":reference").replace(/:widgetReference/,":reference").replace(/:widgetData/,":data")),t},_routeToRegExp:function(e){var t=Hv,n=e.replace(t.escapeRegExp,"\\$&").replace(t.optionalParam,"(?:$1)?").replace(t.namedParam,(function(e,t){return t?e:"([^/?]+)"})).replace(t.splatParam,"([^?]*?)");return new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")},_isBlacklisted:function(e){var t=this.getLocation().route;return a().contains(a().keys(this.ITEM_LIST_MODE_ROUTES),t)&&a().contains(this.ITEM_LIST_BLACKLIST,e)},_shouldNavigate:function(e,t){return!(!0!==t.forceNavigate||!this._isSearchRoute(e))||a().isString(e)&&e!==this._locationState.current&&!this._isBlacklisted(e)},_isSearchRoute:function(e){return!!a().isString(e)&&("items"===e||"activities"===e||(!!e.match(/(items|activities)\/search/)||(!!e.match(/questionList/)||!!e.match(/(pickIntroItem|pickOutroItem|searchItems)/))))},_triggerNavigate:function(e){var t=new sd(sd.EVENTS.navigate);return t.setData(e),this.options.controller.triggerPublicEvent(t),t}});const qv=Vv,Uv={createToggleDirtyState:function(e){return{type:$f,data:e}},createResetNumberOfDeletedItems:function(){return{type:mf}},createToggleMode:function(e){return{type:Kf,data:e}},createUpdateActivity:function(e){return{type:tp,data:e}},createUpdateActivityIgnoreQuestionAttributes:function(e){return{type:np,data:e}},createRemoveAnnotationsConfig:function(){return{type:ff}},createRemoveItems:function(){return{type:pf}},createUpdateItems:function(e){return{type:fp,data:e}},createUpdateItemUiState:function(e){return{type:pp,data:e}},createUpdateSettingsUiState:function(e){return{type:gp,data:e}},createToggleCheckedState:function(e){return{type:Gf,data:e}},createToggleSelectAllItems:function(){return{type:Zf}},createToggleShowIntroItem:function(){return{type:Jf}},createToggleShowOutroItem:function(){return{type:Qf}},createResetIntroItem:function(){return{type:hf}},createResetOutroItem:function(){return{type:gf}},resetResourceItem:function(){return{type:_f}},createUpdateButtonState:function(e){return{type:vp,data:e}},createUnloadQuestionsApi:function(e){return{type:uf,data:{itemId:e.itemId,loadState:!1}}},createToggleForceUpdateTooltip:function(){return{type:af}}};function Wv(e){return(Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $v(e,t){return($v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jv(e);if(t){var i=Jv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zv(this,n)}}function Zv(e,t){if(t&&("object"===Wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Jv(e){return(Jv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$v(e,t)}(o,e);var t,n,r,i=Kv(o);function o(){return zv(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;a().defer((function(){e.handleInputWidth()}))}},{key:"componentDidUpdate",value:function(){f()(this.input).trigger("autogrow")}},{key:"handleInputWidth",value:function(){f()(this.input).autoGrowInput({minWidth:70,maxWidth:570,comfortZone:5})}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"render",value:function(){var e=this,t=a().classNames("lrn-form-control",this.props.className);return this.props.editable?zt.createElement("span",{className:"lrn-author-name-wrapper"},zt.createElement("input",{className:t,type:"text","data-authorapi-selector":this.props.dataAuthorApiSelector,onBlur:this.props.onBlur,onChange:this.props.onChange,value:this.props.value,ref:function(t){e.input=t},disabled:this.props.disabled,placeholder:this.props.placeholder,maxLength:this.props.maxLength,"aria-label":this.props.ariaLabel}),zt.createElement("span",{className:"lrn-i-edit","data-authorapi-selector":this.props.editIconAuthorApiSelector,onClick:function(){return e.input.select()}})):zt.createElement("span",{className:"lrn-form-control","data-authorapi-selector":this.props.dataAuthorApiSelector},this.props.value)}}])&&Gv(t.prototype,n),r&&Gv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Qv,"defaultProps",{editable:!0,disabled:!1});const Xv=Qv;function eb(e){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rb(e,t){return(rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ib(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ab(e);if(t){var i=ab(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ob(this,n)}}function ob(e,t){if(t&&("object"===eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ab(e){return(ab=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rb(e,t)}(o,e);var t,n,r,i=ib(o);function o(){return tb(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props.showWarning,n=t?"lrn-author-template-warning":"";return zt.createElement("li",{"data-authorapi-selector":this.props.liSelector},zt.createElement("div",{className:"lrn-author-name-edit"},zt.createElement("span",{className:"lrn-author-name-label lrn-col-sm-none"},this.props.label),zt.createElement(Xv,{className:n,ref:this.props.inputRef,dataAuthorApiSelector:this.props.inputSelector,editIconAuthorApiSelector:this.props.iconSelector,onChange:function(t){return e.props.onChange(t)},onBlur:function(t){return e.props.onBlur(t)},value:this.props.editableName||"",maxLength:this.props.maxLength||150,placeholder:this.props.placeholder||"",ariaLabel:this.props.ariaLabel||"",disabled:this.props.disabled}),t&&zt.createElement(gg,{type:"error"},this.props.warningMessage)))}}])&&nb(t.prototype,n),r&&nb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);sb.contextTypes={i18n:jn().object};const lb=sb;function ub(e){return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fb(e,t){return(fb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gb(e);if(t){var i=gb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hb(this,n)}}function hb(e,t){if(t&&("object"===ub(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mb(e)}function mb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gb(e){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fb(e,t)}(o,e);var t,n,r,i=pb(o);function o(){var e;cb(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yb(mb(e=i.call.apply(i,[this].concat(n))),"toggleMode",(function(t){t.target&&t.target.blur(),e.props.toggleMode()})),e}return t=o,(n=[{key:"updateField",value:function(e,t){e&&this.props[e]!==t&&this.props.updateActivity({field:e,value:t})}},{key:"onChange",value:function(e){var t=this.isShowTitleEnabled()?"title":"reference";this.updateField(t,e.currentTarget.value)}},{key:"onBlur",value:function(e){var t=this.isShowTitleEnabled()?"title":"reference";this.updateField(t,e.currentTarget.value.trim())}},{key:"shouldComponentUpdate",value:function(e){var t=e.reference!==this.props.reference,n=e.title!==this.props.title,r=e.mode!==this.props.mode,i=e.disableMode!==this.props.disableMode,o=e.isItemEditVisible!==this.props.isItemEditVisible;return t||n||r||i||o}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=a().getNested(this.props,"activity.reference")||"",r="Activity reference: ".concat(n),i=a().getNested(this.props,"activity.title")||"",o="Activity title: ".concat(i),s=a().getNested(this.props.initOptions,"config.activity_edit"),l="preview"===this.props.mode,u=!a().getNested(s,"reference.edit"),c=l||!a().getNested(s,"title.edit"),d=a().getNested(s,"mode.show"),f=c?"":t.get("activityTitlePlaceholderText");return this.isShowTitleEnabled()||this.isShowReferenceEnabled()||d?zt.createElement("div",{className:"lrn-author-activity-toolbar lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-author-activity-toolbar-left lrn-ellipses"},zt.createElement("ul",{className:"lrn-author-activity-toolbar-controls lrn-author-item-toolbar-controls-alt"},this.isShowReferenceEnabled()&&zt.createElement(lb,{label:t.get("referenceLabel"),onChange:function(t){return e.onChange(t)},onBlur:function(t){return e.onBlur(t)},editableName:this.props.reference,ariaLabel:r,liSelector:"reference-display",inputSelector:"activity-reference-edit",iconSelector:"activity-reference-edit-icon",disabled:u}),this.isShowTitleEnabled()&&zt.createElement(lb,{label:t.get("titleLabel"),onChange:function(t){return e.onChange(t)},onBlur:function(t){return e.onBlur(t)},editableName:this.props.title||"",ariaLabel:o,liSelector:"title-display",inputSelector:"activity-title-edit",iconSelector:"activity-title-edit-icon",placeholder:f,disabled:c}))),zt.createElement("div",{className:"lrn-author-activity-toolbar-right"},zt.createElement("ul",{className:"lrn-author-activity-toolbar-controls lrn-author-item-toolbar-controls-alt"},d&&zt.createElement("li",{"data-authorapi-selector":"mode-display",className:this.props.disableMode?"lrn-author-disabled":""},zt.createElement("div",{className:"lrn-author-toolbar-toggle"},zt.createElement("label",{htmlFor:"lrn-author-activity-mode"},zt.createElement("span",{className:"lrn-sr-only"},t.get("editorEditMode"),":"),zt.createElement("input",{id:"lrn-author-activity-mode",className:"lrn-author-input",onChange:this.toggleMode,checked:"edit"===this.props.mode,type:"checkbox",disabled:this.props.disableMode}),zt.createElement("span",{className:"lrn-author-toggle-part lrn-author-toggle-left","data-lrn-author-toggle":"edit"},t.get("editorToggleEdit")),zt.createElement("span",{className:"lrn-author-toggle-part lrn-author-toggle-right","data-lrn-author-toggle":"preview"},t.get("editorTogglePreview")))))))):null}},{key:"isShowTitleEnabled",value:function(){return a().getNested(this.props.initOptions,"config.activity_edit.title.show")}},{key:"isShowReferenceEnabled",value:function(){return!this.isShowTitleEnabled()&&a().getNested(this.props.initOptions,"config.activity_edit.reference.show")}}])&&db(t.prototype,n),r&&db(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);vb.contextTypes={i18n:jn().object};const bb=Ln((function(e){var t=e.activityEdit.activityJson||{},n=e.activityEdit.loadingPreview,r=e.initOptions.config,i=n||"preview"!==r.activity_edit.mode.default&&!e.activityEdit.loadedItems,o=[];void 0!==t.activity_id&&(o=a().getNested(e,"activityEdit.items.".concat(t.activity_id))||[]);var s=void 0!==a().findWhere(o,{status:"unpublished"}),l=i||s;return{reference:t.reference||"",title:t.title||"",initOptions:e.initOptions,mode:e.activityEdit.mode,disableMode:l}}),{toggleMode:Uv.createToggleMode,updateActivity:Uv.createUpdateActivity})(vb);var _b={modules:{drawing:!0,texthighlight:!0,notepad:!0,stickynote:!0}},wb=1e4;function Eb(e){return(Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kb(e,t){return(kb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cb(e);if(t){var i=Cb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ob(this,n)}}function Ob(e,t){if(t&&("object"===Eb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cb(e){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ab=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kb(e,t)}(o,e);var t,n,r,i=Tb(o);function o(){return Sb(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"dispatchChange",value:function(e,t,n){if(e){var r=this.props[e],i=t.currentTarget.value;n&&n.trim&&(i=i.trim()),r!==i&&this.props.updateActivity({field:e,value:i})}}},{key:"onDescriptionKeyPress",value:function(e){var t=String.fromCharCode(e.keyCode),n=/[a-zA-Z0-9-_ ]/.test(t),r=["A","C"].indexOf(t)>-1&&(e.metaKey||e.ctrlKey);e.target.innerText.length>=1e3&&n&&!r&&e.preventDefault()}},{key:"onDescriptionChange",value:function(e){e.target.innerText!==this.props.activity.description&&this.props.updateActivity({field:"description",value:e.target.innerText})}},{key:"onDifficultyChange",value:function(e){var t=e.currentTarget.value;if(""!==t){if(t=parseFloat(t),!isNaN(t)){if(t>wb){var n=this.context.i18n.get("activityDifficultyError").replace(/%maxValue%/,wb);alert(n),t=wb}this.props.updateActivity({field:"adaptive.difficulty",value:t})}}else this.props.updateActivity({field:"adaptive.difficulty",value:null})}},{key:"getItemsAverageDifficulty",value:function(){var e=this.props.items;if(a().isEmpty(e))return"";var t=this.props.activity.activity_id,n=[];return e[t].forEach((function(e){var t=a().getNested(e,"adaptive.difficulty");a().isNumber(t)&&0!==t&&n.push(t)})),a().isEmpty(n)?"":(n.reduce((function(e,t){return e+t}))/n.length).toFixed(2)}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=this.props.activity||{},r=a().getNested(this.props.initOptions,"config.activity_edit.title.show"),i=a().getNested(this.props.initOptions,"config.activity_edit.reference.show"),o=a().getNested(this.props.initOptions,"config.activity_edit.reference.edit"),s=a().getNested(this.props.initOptions,"config.activity_edit.title.edit"),l=a().getNested(this.props.initOptions,"config.activity_edit.status.show"),u=a().getNested(this.props.initOptions,"config.activity_edit.difficulty.show"),c=a().getNested(this.props.initOptions,"config.activity_edit.difficulty.edit"),d=a().getNested(this.props.initOptions,"config.activity_edit.adaptive_fields.show"),f=[{value:"published",text:t.get("statusOptionsPublished")},{value:"unpublished",text:t.get("statusOptionsUnpublished")},{value:"archived",text:t.get("statusOptionsArchived")}],p=a().getNested(n,"description")||"",h=a().getNested(n,"adaptive.difficulty")||"",m=a().getNested(n,"adaptive.seeding_exposure")||"",g=a().getNested(n,"adaptive.operational_exposure")||"";return zt.createElement("div",{className:"lrn-author-ui-no-preview lrn-author-settings-details"},i&&zt.createElement(Ss,{label:t.get("settingsReferenceLabel"),value:this.props.reference,onChange:function(t){return e.dispatchChange("reference",t)},onBlur:function(t){return e.dispatchChange("reference",t,{trim:!0})},description:t.get("activityReferenceDescription"),disabled:!o,dataAuthorApiSelector:"activity-details-reference-section",inputDataAuthorApiSelector:"activity-details-reference",maxLength:150}),r&&zt.createElement(Ss,{label:t.get("settingsTitleLabel"),value:this.props.title?this.props.title:"",onChange:function(t){return e.dispatchChange("title",t)},onBlur:function(t){return e.dispatchChange("title",t,{trim:!0})},description:t.get("titleDescription"),disabled:!s,dataAuthorApiSelector:"activity-details-title-section",inputDataAuthorApiSelector:"activity-details-title",maxLength:150}),l&&zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Hs,{label:t.get("settingsStatusLabel"),options:f,value:this.props.status,onChange:function(t){return e.dispatchChange("status",t)},description:t.get("statusDescription"),dataAuthorApiSelector:"activity-details-status-section",inputDataAuthorApiSelector:"activity-details-status"}))),zt.createElement("div",{className:"lrn-form-group"},zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("label",{className:"lrn-form-label-name"},t.get("activityDescriptionHeader"))),zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},t.get("activityDescription")),zt.createElement("div",{className:"lrn-form-control-wrapper"},zt.createElement("div",{suppressContentEditableWarning:!0,contentEditable:!0,id:"activityRef",name:"description",onKeyDown:this.onDescriptionKeyPress.bind(this),onBlur:this.onDescriptionChange.bind(this),className:"lrn-form-control","data-authorapi-selector":"activity-description"},p))),u&&zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Ss,{type:"number",label:t.get("activitySettingsDifficultyLabel"),maxValue:wb,value:h,disabled:!c,onBlur:function(t){return e.onDifficultyChange(t)},onChange:function(t){return e.onDifficultyChange(t)},dataAuthorApiSelector:"activity-details-difficulty-section",inputDataAuthorApiSelector:"activity-details-difficulty"}))),d&&zt.createElement(zt.Fragment,null,zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Ss,{type:"number",label:t.get("activitySettingsSeedingExposureLabel"),value:m,disabled:!0,onBlur:function(){},onChange:function(){},dataAuthorApiSelector:"activity-details-seeding-exposure-section",inputDataAuthorApiSelector:"activity-details-seeding-exposure"}))),zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Ss,{type:"number",label:t.get("activitySettingsOperationalExposureLabel"),value:g,disabled:!0,onBlur:function(){},onChange:function(){},dataAuthorApiSelector:"activity-details-operational-exposure-section",inputDataAuthorApiSelector:"activity-details-operational-exposure"}))),zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Ss,{type:"number",label:t.get("activitySettingsItemsAverageDifficultyLabel"),value:this.getItemsAverageDifficulty(),disabled:!0,onBlur:function(){},onChange:function(){},dataAuthorApiSelector:"activity-details-items-average-difficulty-section",inputDataAuthorApiSelector:"activity-details-items-average-difficulty"})))))}}])&&xb(t.prototype,n),r&&xb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Ab.contextTypes={i18n:jn().object};const Pb=function(e){return Ln((function(e){return{reference:e.activityEdit.activityJson.reference,title:e.activityEdit.activityJson.title,status:e.activityEdit.activityJson.status,activity:e.activityEdit.activityJson,initOptions:e.initOptions,items:a().getNested(e,"activityEdit.items")}}),{updateActivity:Uv.createUpdateActivity})(e)}(Ab),Mb=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:ph,data:e,fromOutside:t,toOutside:!0}};const Db=function(){return{type:Wd}};var Rb=function(e,t,n){var r=function(t){return a().map(a().where(e.widgetInstances,{widget_type:t}),(function(e){return a().deepExtend({},e.data,"feature"===e.widget_type?{feature_id:e.reference}:{response_id:e.reference})}))};return a().deepExtend({},n,t,{questions:r("response"),features:r("feature")})},Lb=function(e){return{type:uf,data:{itemId:e.itemId,loadState:!!a().isUndefined(e.loadState)||e.loadState}}};const Nb=function(e,t){return function(n,r,i){var o,s=i.component.comms;if(e.questionsApp){var l=e.questionsApp,u=s.request({url:"/itembank/itemeditor",data:{reference:t.itemData.reference,itemBankSettings:t.itemData.itemBankSettings}});return n({type:"ACTIVITY_EDIT_ITEM_PREVIEW_QUESTIONS_API_LOADING"}),void u.then((function(t){o=t.data,l.append(Rb(o,e.security))}))}var c=[Ld.loadLearnosityApi("questions"),s.request({url:"/itembank/itemeditor",data:{reference:t.itemData.reference,itemBankSettings:t.itemData.itemBankSettings}})];n({type:"ACTIVITY_EDIT_ITEM_PREVIEW_QUESTIONS_API_LOADING"}),S.all(c).then((function(e){var r=a().last(e).data;s.request({url:"/questionsactivity"}).then((function(e){if(e.data){var i=Rb(r,e.data,t.initOptions),o=t.eventOptions;o.errorListener=function(){t.eventOptions.error(),n(Lb({itemId:t.itemData.id,loadState:!1}))},o.readyListener=function(){t.eventOptions.ready(),n(Lb({itemId:t.itemData.id}))},window.LearnosityApp.init(i,o)}}))}))}};const Ib=function(e,t,n){var r=t.organisation_id,i=t.item_pool_id||"",o=a().find(e,(function(e){if((e.item_pool_id||"")===i&&e.organisation_id===r)return!0}));return o&&o.item_bank_name||n.get("itemBankListDefaultItemBank")};const jb=function(e){return zt.createElement("div",null,zt.createElement("div",{className:"lrn-item-flag"}),zt.createElement("div",{className:"lrn-item-flag-link","data-authorapi-tooltip":e.tooltip},zt.createElement("span",{className:"lrn-i-".concat(e.icon)})))};function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hb(e,t){return(Hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wb(e);if(t){var i=Wb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qb(this,n)}}function qb(e,t){if(t&&("object"===Bb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ub(e)}function Ub(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wb(e){return(Wb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}(o,e);var t,n,r,i=Vb(o);function o(){var e;Fb(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zb(Ub(e=i.call.apply(i,[this].concat(n))),"handleEditItem",(function(){var t=window.encodeURIComponent(e.props.activityReference),n=window.encodeURIComponent(e.props.itemId||e.props.item.reference),r={currentLocation:"activities/".concat(t,"/items/").concat(n),previousLocation:e.props.routeUrl};e.context.publicEvents.trigger(sd.EVENTS.activityEditItemEdit),e.props.navigate(r)})),zb(Ub(e),"_getOffsetPreviewHeight",(function(){return e.props.questionsApiLoaded&&e.props.showPreview&&e.element?e.element.offsetHeight:0})),e}return t=o,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this,n=a().some(["uiState","sortOrder","schemas","item","questionsAlreadyLoading"],(function(n){return!a().isEqual(e[n],t.props[n])}));return this.height!==this._getOffsetPreviewHeight()&&(n=!0),n}},{key:"componentWillUnmount",value:function(){this.props.showPreview&&this.props.hidePreview(),this.props.questionsApiLoaded&&this.props.unloadQuestionsApi()}},{key:"toggleFloatingFeatureVisibility",value:function(){var e=["imagetool"],t=a().filter(this.props.item.features,(function(t){return e.indexOf(t.type)>-1})),n=this.props.showPreview?"":"none";t.forEach((function(e){var t=f()('[data-lrn-float*="'.concat(e.reference,'"]'));t&&t.css({display:n})}))}},{key:"onPreview",value:function(e){e.target&&e.target.blur(),this.props.questionsApiLoaded?this.props.togglePreviewState():this.props.questionsAlreadyLoading||(this.props.togglePreviewState(),this.loadPreview())}},{key:"componentDidUpdate",value:function(e){a().isEqual(this.props.item,e.item)||(this.props.unloadQuestionsApi(),this.props.showPreview&&this.loadPreview()),this.props.questionsApiLoaded&&this.toggleFloatingFeatureVisibility(),this.props.forceUpdateTooltip()}},{key:"getDisplayContent",value:function(){var e="";return this.props.item.display_content&&(e=this.props.item.display_content.replace(Y,"")),e}},{key:"isFromDefaultItemBank",value:function(){return this.props.item.organisation_id===this.props.defaultOrganisationId}},{key:"isFromItemBankWithWriteAccess",value:function(){var e=this.context.consumerSettings,t=this.props.item;return-1!==e.write_access_organisation_ids.indexOf(t.organisation_id)}},{key:"isPartOfAnItemPool",value:function(){return!!this.props.item.item_pool_id}},{key:"isEditable",value:function(){return!this.props.item.isRestrictedOrMissing&&!this.isPartOfAnItemPool()&&this.isFromItemBankWithWriteAccess()&&this.props.editItemEnabled}},{key:"renderItemName",value:function(){var e=this.context.i18n,t=["lrn-h3","lrn-list-view-heading","lrn-ellipses"],n=this.props,r=n.item.title||e.get("activityUntitledItem"),i=a().getNested(n.itemTitleConfig,"show")?r:n.item.reference,o={width:"100%"},s=this.isEditable(),l=n.item.status;return s&&t.push("lrn-author-editable-item"),zt.createElement("div",{className:"lrn-list-view-heading-wrapper"},s?zt.createElement("a",{className:a().classNames(t),onClick:this.handleEditItem,style:o},i,zt.createElement("span",{className:"lrn-i-next"})):zt.createElement("div",{className:a().classNames(t),style:o},i,this.props.editItemEnabled&&zt.createElement("span",{className:"lrn-i-read-only","data-authorapi-tooltip":e.get("itemReadOnly")})),n.showItemStatus&&zt.createElement("div",{className:"lrn-list-view-status"},zt.createElement("span",{className:"lrn-badge-round lrn-badge-round-".concat(l),"aria-label":e.getStatusLabel(l),"data-authorapi-tooltip":e.getStatusLabel(l)},zt.createElement("span",{className:"lrn-i-".concat(l)}))))}},{key:"renderAllQuestionsButton",value:function(e){if(e<1)return null;var t="+"+(this.context.i18n.get(e)||e);return zt.createElement("ul",{className:"lrn-list-view-labels lrn-list-unstyled lrn-text-small"},zt.createElement("li",null,zt.createElement("button",{className:"lrn-btn lrn-btn-default lrn-btn-lg lrn-label-action",type:"button",onClick:this.toggleFlyout.bind(this,"questions-flyout"),"data-authorapi-selector":"item-questions-toggle"},t)))}},{key:"renderHeading",value:function(){var e=this.context.i18n,t=this.props,n=a().getNested(t,"item.questions")||[],r=a().getNested(t,"item.features")||[],i=this.context.i18n.get("activityItemInfoNotAvailable"),o=this.props.item.isRestrictedOrMissing?i:this.getDisplayContent(),s=n.length-2,l=!1;return t.itemTitleConfig.show&&t.itemTitleConfig.show_reference&&(l=!0),zt.createElement("div",{className:"lrn-col-xs-9 lrn-col-md-10 lrn-col-lg-11"},this.renderItemName(),zt.createElement("div",{className:"lrn-list-view-desc lrn-ellipses"},o),this.renderWidgetLabels(n,"questions",2),zt.createElement("div",{className:"lrn-flyout lrn-flyout-left lrn-col-xs-3","data-authorapi-selector":"questions-flyout"},zt.createElement("button",{type:"button",onClick:this.toggleFlyout.bind(this,"questions-flyout"),className:"lrn-btn-full-width lrn-bubble-indicator lrn-bubble-indicator-background lrn-text-left","aria-label":"Number of questions","data-authorapi-selector":"questions-tags-toggle"},zt.createElement("span",{className:"lrn-i-cross lrn-text-align-right"}),zt.createElement("span",{className:"lrn-text-align-left"},this.context.i18n.get("questionFlyoutCloseButton"))),zt.createElement("ul",{className:"lrn-list-view-labels lrn-list-unstyled lrn-text-small"},this.renderWidgetLabels(n,"questions"))),zt.createElement("ul",{className:"lrn-list-view-labels lrn-list-view-features lrn-list-unstyled"},this.renderWidgetLabels(r,"features",-1)),this.renderAllQuestionsButton(s),l&&zt.createElement("div",{className:"lrn-list-view-heading-wrapper lrn-text-small"},zt.createElement("div",{className:"lrn-ellipses"},zt.createElement("div",{className:"lrn-list-view-alternative-reference lrn-ellipses","data-authorapi-tooltip":e.get("activityItemReferenceTooltip")},t.item.reference))))}},{key:"renderPreviewButtons",value:function(){var e=this.props.questionsAlreadyLoading&&!this.props.questionsApiLoaded?"lrn-author-disabled":"",t=this.context.i18n;return zt.createElement("div",{className:"lrn-col-xs-7 lrn-col-md-7 lrn-col-lg-6 lrn-author-inline"},this.props.showPreview?zt.createElement("button",{onClick:this.onPreview.bind(this),type:"button","data-authorapi-selector":"close-item-preview",className:"".concat("lrn-btn lrn-btn-default lrn-btn-lg lrn-close-preview"," ").concat(e),"data-authorapi-tooltip":t.get("itemClosePreviewHeading")},this.props.questionsApiLoaded?zt.createElement("span",{className:"lrn-i-cross"}):zt.createElement("span",{className:"lrn-spinner-save"})):zt.createElement("button",{onClick:this.onPreview.bind(this),type:"button","data-authorapi-selector":"open-item-preview",className:"lrn-btn lrn-btn-default lrn-btn-lg "+"".concat(e),"data-authorapi-tooltip":t.get("itemPreviewHeading")},zt.createElement("span",{className:"lrn-i-preview"})))}},{key:"renderDetailsList",value:function(){var e=!this.props.item.isRestrictedOrMissing&&this.renderPreviewButtons(),t=this.renderHeading(),n=!this.props.item.isRestrictedOrMissing&&this.renderTagsColumn(),r=!!this.props.itemBanks&&(this.isPartOfAnItemPool()||!this.isFromDefaultItemBank());return zt.createElement("div",{className:"lrn-col-xs-10 lrn-col-md-11 lrn-author-ui-no-preview\n        lrn-list-details lrn-author-flex"},zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-12 lrn-col-sm-9 lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-row lrn-row-narrow"},zt.createElement("div",{className:"lrn-col-xs-3 lrn-col-sm-2 lrn-col-md-2 lrn-col-lg-1"},zt.createElement("div",{className:"lrn-col-xs-5 lrn-col-md-5 lrn-col-lg-6 lrn-author-inline"},zt.createElement("span",{className:"lrn-i lrn-i-drag lrn-i-size-xs"})),e),t)),n,r&&zt.createElement(jb,{tooltip:Ib(this.props.itemBanks,this.props.item,this.context.i18n),icon:"link"}))}},{key:"render",value:function(){var e=this.props,t=this.props.sortOrder,n=e.selectAll,r=!!e.uiState.checked||n,i="lrn-list-view-item lrn-flyout-wrapper ".concat(r?"lrn-list-selected-activity":""),o=this.renderQuestionsApiWrapper(),a=this.renderDetailsList(),s=zt.createElement("span",{"data-authorapi-selector":"activity-item-number"},t);return this.elementHtmlId="activity_id_".concat(this.props.itemId),zt.createElement("li",{id:this.elementHtmlId},zt.createElement("div",{className:i},zt.createElement("div",{className:"lrn-list-view-item-overlay","data-authorapi-selector":"item-overlay"}),zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-2 lrn-col-md-1 lrn-list-view-col-first lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-5 lrn-list-view-col-number"},zt.createElement("div",{className:"lrn-check-box-wrapper"},s,".")),zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-7 lrn-check-box-wrapper"},zt.createElement("input",{type:"checkbox",className:"lrn-check-box-input","data-authorapi-selector":"select-item-for-activity-input",name:"item-select-for-activity",checked:r,readOnly:!0}),zt.createElement("span",{className:"lrn-i-tick lrn-check-box-span","data-authorapi-selector":"select-item-for-activity",onClick:e.changeCheckState}))),a),o)}},{key:"renderQuestionsApiWrapper",value:function(){var e=this,t=["lrn-list-view-col","lrn-col-xs-12","lrn-col-xs-full-width","lrn-list-activity-item-view-extended"].join(" ");return this.height=this._getOffsetPreviewHeight(),zt.createElement("div",{className:t},zt.createElement("div",{className:"lrn-row lrn-row-narrow "},zt.createElement("div",{className:"lrn-col-xs-2 lrn-col-lg-1"}),zt.createElement("div",{className:"lrn-col-xs-10 lrn-col-lg-11 lrn-author-activity-preview",style:{maxHeight:this.height}},zt.createElement("div",{key:this.props.itemContentKey,ref:function(t){e.element=t},"data-authorapi-selector":"lrn-question-wrapper",className:"lrn-question-wrapper lrn-list-view-col",dangerouslySetInnerHTML:{__html:this.props.itemContent}}))))}},{key:"getDisplayTags",value:function(){var e=this.context.abAlignedTagTypeUtil,t=this.props.abStandardsEnabled,n=a().getNested(this.props,"item.tags")||[];return t&&(n=e.filterNonABTags(n)),n}},{key:"renderTagsColumn",value:function(){var e=this.getDisplayTags(),t=a().size(e),n=0===t;return zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-none lrn-col-sm-3 lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-list-view-meta"},this.renderTagButton(t),this.renderTags(e,3)),zt.createElement("div",{className:"lrn-flyout lrn-flyout-right lrn-col-xs-4","data-authorapi-selector":"tags-flyout"},zt.createElement("button",{type:"button",onClick:this.toggleFlyout.bind(this,"tags-flyout"),className:"lrn-btn-full-width lrn-bubble-indicator lrn-bubble-indicator-background lrn-text-left","aria-label":this.context.i18n.get("tagCountAriaLabel"),disabled:n,"data-authorapi-selector":"item-tags-toggle"},zt.createElement("span",{className:"lrn-i-cross lrn-text-align-right"}),zt.createElement("span",{className:"lrn-text-align-left"},this.context.i18n.get("tagFlyoutCloseButton"))),this.renderTagFlyout()))}},{key:"renderTagFlyout",value:function(){var e=this.context.i18n,t=this.getDisplayTags(),n={},r=this.getFormattedTags(t,{splitInto:3,idealCountPerSplit:5});a().times(r.length,(function(e){n["column"+(e+1)]=r[e]}));var i=function(t){return a().map(t,(function(t,n){return zt.createElement("li",{key:n},e.get(t.type)||t.type,": ",zt.createElement("strong",null,e.get(t.name)||t.name))}))};return zt.createElement("div",{className:"lrn-eq-height-horizontal"},zt.createElement("ol",{className:"lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12"},i(n.column1)),zt.createElement("ol",{className:"lrn-eq-height-col-horizontal lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12"},i(n.column2)),zt.createElement("ol",{className:"lrn-eq-height-col lrn-list-unstyled lrn-text-small lrn-text-word-wrap lrn-col-xs-12"},i(n.column3)))}},{key:"getFormattedTags",value:function(e,t){var n=[];return a().each(e,(function(e){n.push({type:e.type,name:e.name})})),this.splitFormattedTags(n,t)}},{key:"splitFormattedTags",value:function(e,t){var n,r;if(!t)return e;var i=a().extend({splitInto:1,idealCountPerSplit:e.length},t),o=[];return r=[],n=i.idealCountPerSplit,e.length>i.splitInto*i.idealCountPerSplit&&(n=Math.ceil(e.length/i.splitInto)),a().each(e,(function(t,i){var a=i===e.length-1,s=(i+1)%n==0;r.push(t),(a||s)&&o.push(r),s&&(r=[])})),o}},{key:"renderWidgetLabels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"questions",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.context.i18n,o=[],s=this;return a().each(e.slice(r),(function(e,r){var l=e.type,u="schemas.".concat(t,".").concat(e.type),c=i.get(e.type)||a().getNested(s.props,u)||e.type,d="features"===t;if(!(-1!==n&&o.length>=n))if(d){var f="lrn-i-".concat(l);o.push(zt.createElement("li",{key:r,className:"lrn-activity-info-label","aria-label":c,title:c},zt.createElement("span",{className:f})))}else o.push(zt.createElement("li",{key:r,className:"lrn-activity-info-label"},c))})),zt.createElement("ul",{className:"lrn-list-view-labels lrn-list-unstyled lrn-text-small"},this.props.item.isRestrictedOrMissing?zt.createElement("li",null):o)}},{key:"toggleFlyout",value:function(e,t){var n=this,r='[id="'.concat(this.elementHtmlId,'"] ')+'[data-authorapi-selector="'.concat(e,'"]'),i=function e(t,r){if(n.showingFlyout){var i=n.showingFlyout.is(t.target)||n.showingFlyout.find(t.target).length;!r&&i||(n.showingFlyout.velocity("reverse",{display:"none"}),n.showingFlyout=void 0,f()(document).off("mousedown touchstart",e.bind(n)))}};this.showingFlyout?i(t,!0):(this.showingFlyout=f()(r).velocity({opacity:1,width:"80%"},{display:"block",duration:450,easing:[.75,-.23,.3,1.08]}),f()(document).on("mousedown touchstart",i.bind(this)))}},{key:"renderTagButton",value:function(e){var t=this,n=0===e,r="lrn-bubble-indicator lrn-text-left",i=function(e){return e};n||(r+=" lrn-bubble-indicator-background",i=t.toggleFlyout.bind(t,"tags-flyout"));var o=zt.createElement("span",{className:"lrn-col-xs-none"},this.context.i18n.get("viewAllTagsButton"));return zt.createElement("button",{type:"button",className:r,"aria-label":"Number of tags",onClick:i.bind(t),disabled:n},zt.createElement("span",{className:"lrn-i-tag"}),n?zt.createElement("span",null,this.context.i18n.get("noTagsPlaceholder")):zt.createElement("span",null,o," (",e,")"))}},{key:"renderTags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.context.i18n,r=[];return a().each(e,(function(e,i){var o=n.get(e.type)||e.type,a=n.get(e.name)||e.name;r.length<t&&r.push(zt.createElement("li",{key:i,className:"lrn-text-word-wrap lrn-ellipses"},zt.createElement("span",{className:"lrn-text-color-light"},o,":"),zt.createElement("span",{className:"lrn-text-weight-500"},a)))})),zt.createElement("ul",{className:"lrn-list-unstyled lrn-text-small"},r)}},{key:"loadPreview",value:function(){var e=this,t={reference:this.props.item.reference,id:this.props.itemId,itemBankSettings:{organisation_id:this.props.item.organisation_id}},n={ready:function(){},error:function(){e.props.showPreview&&e.props.hidePreview()},metricsContext:this.context.metricsUtil.getContext()};this.props.item.item_pool_id&&(t.itemBankSettings.item_pool_id=this.props.item.item_pool_id),this.props.applyQuestionsApiDomHook(this.props.item.content),this.props.initQuestionsApi({itemData:t,eventOptions:n,initOptions:{}})}}])&&Yb(t.prototype,n),r&&Yb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Gb.contextTypes={i18n:jn().object,metricsUtil:jn().object,consumerSettings:jn().object,publicEvents:jn().object,abAlignedTagTypeUtil:jn().instanceOf(rr).isRequired};const $b=Ln((function(e,t){var n=t.itemId,r="activityEdit.itemsUiState.".concat(n);return{itemTitleConfig:{show:a().getNested(e,"initOptions.config.activity_edit.item_title.show")||a().getNested(e,"initOptions.config.activity_edit.item.title.show"),show_reference:a().getNested(e,"initOptions.config.activity_edit.item.title.show_reference")},editItemEnabled:a().getNested(e,"initOptions.config.activity_edit.item.edit.allow"),showItemStatus:a().getNested(e,"initOptions.config.activity_edit.item.status.show"),questionsApiLoaded:a().getNested(e,"".concat(r,".questionsApiLoaded"))||!1,showPreview:a().getNested(e,"".concat(r,".showPreview"))||!1,itemContent:a().getNested(e,"".concat(r,".itemContent"))||null,itemContentKey:a().getNested(e,"".concat(r,".itemContentKey"))||null,schemas:e.schemas||{features:{},questions:{}},uiState:e.activityEdit.itemsUiState[n]||{},questionsAlreadyLoading:Object.keys(a().pick(e.activityEdit.itemsUiState,(function(e){return e.showPreview&&!e.questionsApiLoaded}))).length,itemBanks:a().getNested(e,"initOptions.config.activity_edit.item_search.item_banks"),defaultOrganisationId:e.activityEdit.organisationId,routeUrl:e.ui.navigate.route.url,activityReference:e.activityEdit.activityJson.reference,abStandardsEnabled:rc.selectors.getAreStandardsEnabled(e)}}),(function(e,t){return{initQuestionsApi:function(n){return e(Nb(t.questionsContext,n))},applyQuestionsApiDomHook:function(n){e(Uv.createUpdateItemUiState({itemId:t.itemId,stateType:"itemContent",stateValue:n})),e(Uv.createUpdateItemUiState({itemId:t.itemId,stateType:"itemContentKey",stateValue:a().uuid()}))},togglePreviewState:function(){e(Uv.createUpdateItemUiState({itemId:t.itemId,stateType:"showPreview",toggleState:!0,stateValue:!1}))},hidePreview:function(){e(Uv.createUpdateItemUiState({itemId:t.itemId,stateType:"showPreview",toggleState:!1,stateValue:!1}))},unloadQuestionsApi:function(){e(Uv.createUnloadQuestionsApi({itemId:t.itemId}))},changeCheckState:function(n){n.preventDefault(),e(Uv.createToggleCheckedState({itemId:t.itemId}))},forceUpdateTooltip:function(){return e(Uv.createToggleForceUpdateTooltip())},navigate:function(t){return e(yh(t))}}}))(Gb);var Kb=__webpack_require__(26097),Zb=__webpack_require__.n(Kb);function Jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this;this.defaultDragulaOptions={moves:function(e,n,r){var i=r.classList.contains("lrn-i-drag");if(i&&t.selectedItems&&t.selectedItems.length>0){if(t.selectedItems.length===t.itemMappings.length)return!1;var o=f()(e).attr("id");return t.selectedItems.indexOf(o)>-1}return i}}}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t,n,r){this.drake&&(this.drake.dragging=!1,this.drake.destroy());var i=a().clone(this.defaultDragulaOptions);i.mirrorContainer=e,this.drake=Zb()([e],i).on("drop",this.dropHandler(r,n).bind(this)),this.itemMappings=t}},{key:"dropHandler",value:function(e,t){return function(n,r){var i=this,o=[],s=this._getChildOrder(r);(s=this._handleMultiDrag(s,n)).forEach((function(e){var t=a().find(i.itemMappings,(function(t){return t.activityItem.id===e.replace("activity_id_","")}));o.push(t)})),e("".concat(t),o)}}},{key:"updateReferences",value:function(e){this.selectedItems=e}},{key:"_handleMultiDrag",value:function(e,t){var n=this,r=f()(t).attr("id"),i=[],o=e.slice();if(this.selectedItems&&this.selectedItems.length){o.forEach((function(e){e!==r&&n.selectedItems.indexOf(e)>-1&&i.push(e)}));var a=o.indexOf(r)+1;i.forEach((function(e){var t=o.indexOf(e),n=o.splice(t,1)[0];o.splice(a,0,n),a++}))}return o}},{key:"_getChildOrder",value:function(e){var t,n=[];for(t=0;t<e.children.length;t++){var r=f()(e.children[t]).attr("id");"gu-mirror"!==f()(e.children[t]).attr("class")&&n.push(r)}return n}}])&&Jb(t.prototype,n),r&&Jb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xb(e){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n_(e,t){return(n_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o_(e);if(t){var i=o_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return i_(this,n)}}function i_(e,t){if(t&&("object"===Xb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o_(e){return(o_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n_(e,t)}(o,e);var t,n,r,i=r_(o);function o(){return e_(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.name;return zt.createElement("div",{tabIndex:"0",className:"lrn-author-resource-item-name",onClick:this.props.onClick,"data-authorapi-tooltip":e},e||"")}}])&&t_(t.prototype,n),r&&t_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function s_(e){return(s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c_(e,t){return(c_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p_(e);if(t){var i=p_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f_(this,n)}}function f_(e,t){if(t&&("object"===s_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p_(e){return(p_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c_(e,t)}(o,e);var t,n,r,i=d_(o);function o(){return l_(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t=this.props.resourceItem,n=!!t,r=n?t.reference:"",i=n&&t.title?t.title:e.get("activityUntitledItem"),o=this.props.displayTitle?i:r;return zt.createElement("div",{className:"lrn-author-activity-resource-content"},zt.createElement(gg,{type:"info",iconPosition:"right",className:"lrn-author-resource-message",iconTooltip:e.get("activityEditResourceItemIconTooltip")},e.get("activityEditResourceItemText")),n&&zt.createElement(a_,{onClick:this.props.onClick,name:o}))}}])&&u_(t.prototype,n),r&&u_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);h_.contextTypes={i18n:jn().object};const m_=Ln((function(e){return{displayTitle:a().getNested(e,"initOptions.config.activity_edit.item_title.show")||a().getNested(e,"initOptions.config.activity_edit.item.title.show")||!1,resourceItem:Ah(e)}}))(h_);function g_(e){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b_(e,t){return(b_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function __(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E_(e);if(t){var i=E_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w_(this,n)}}function w_(e,t){if(t&&("object"===g_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E_(e){return(E_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b_(e,t)}(o,e);var t,n,r,i=__(o);function o(){return y_(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t=!!this.props.resourceItem;return zt.createElement("div",{className:"lrn-author-activity-resource-toggle"},t?zt.createElement(Ar,{onClick:this.props.resetResourceItem,extraClasses:"lrn-author-activity-button lrn-author-resource-delete-btn"},zt.createElement("span",{className:"lrn-i-trash"})):zt.createElement(Ar,{onClick:this.props.onClick,extraClasses:a().classNames("lrn-author-activity-button","lrn-author-resource-select-btn")},e.get("activityEditSelectResourceItemButtonText")))}}])&&v_(t.prototype,n),r&&v_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);S_.contextTypes={i18n:jn().object};const x_=Ln((function(e){return{resourceItem:Ah(e)}}),{resetResourceItem:Uv.resetResourceItem})(S_);function k_(e){return(k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C_(e,t){return(C_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D_(e);if(t){var i=D_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P_(this,n)}}function P_(e,t){if(t&&("object"===k_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M_(e)}function M_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D_(e){return(D_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L_={classNameResource:a().classNames("lrn-author-activity-resource-item","lrn-col-xs-12","lrn-col-sm-12","lrn-col-md-4")},N_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C_(e,t)}(o,e);var t,n,r,i=A_(o);function o(){var e;T_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R_(M_(e=i.call.apply(i,[this].concat(n))),"handleResourceNavigation",(function(){var t=[e.props.activityReference];e.props.createNavigateViaBackboneRouter({methodName:"navigateToResourcePicker",methodArgs:t})})),e}return t=o,(n=[{key:"render",value:function(){return zt.createElement("div",{className:L_.classNameResource},zt.createElement(m_,{onClick:this.handleResourceNavigation}),zt.createElement(x_,{onClick:this.handleResourceNavigation}))}}])&&O_(t.prototype,n),r&&O_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);N_.contextTypes={i18n:jn().object};const I_=Ln((function(e){return{activityReference:(a().getNested(e,"activityEdit.activityJson")||{}).reference}}),{createNavigateViaBackboneRouter:Mb})(N_);function j_(e){return(j_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y_(e,t){return(Y_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q_(e);if(t){var i=q_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V_(this,n)}}function V_(e,t){if(t&&("object"===j_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q_(e){return(q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y_(e,t)}(o,e);var t,n,r,i=H_(o);function o(){return B_(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"toggleShowIntroOutroItem",value:function(e){e?this.props.toggleShowIntroItem():this.props.toggleShowOutroItem()}},{key:"handleIntroOutroNavigation",value:function(e){var t=qs(e),n=a().getNested(this.props.activityEdit,"previousSearchStates.last".concat(t,"ItemSearchState")),r=n?"navigate":"navigateTo".concat(t,"ItemPicker"),i=n?[n]:[this.props.activityReference];this.props.createNavigateViaBackboneRouter({methodName:r,methodArgs:i})}},{key:"customizeOrReset",value:function(e){var t=e?"introItem":"outroItem";if(!1===this.props[t])return e?void this.handleIntroOutroNavigation("intro"):void this.handleIntroOutroNavigation("outro");e?this.props.resetIntroItem():this.props.resetOutroItem()}},{key:"renderResetCustomize",value:function(e,t){var n=this.context.i18n,r=e?"introItem":"outroItem",i=this.props[r]?n.get("resetIntroOutroItem"):n.get("customizeIntroOutroItem"),o=e?n.get("welcomeScreen"):n.get("exitScreen");this.props[r]&&(o+=" - "+n.get("customizedIntroOutroItem"));var a=zt.createElement("span",{className:t?"lrn-author-customize-reset":"",onClick:t?this.customizeOrReset.bind(this,e):void 0},i);return zt.createElement("div",{className:"lrn-author-activity-intro-outro-content lrn-col-xs-6"},o," (",a,")")}},{key:"componentDidMount",value:function(){a().isUndefined(this.props.showIntro)&&this.props.toggleShowIntroItem(),a().isUndefined(this.props.showIntro)&&this.props.toggleShowOutroItem()}},{key:"renderItemSettings",value:function(e){var t=e?this.props.showIntro:this.props.showOutro,n=e?"lrn-author-first":"lrn-author-second",r=this.props.showResourceItem,i=t?"":"lrn-author-activity-disabled-state",o=r?"lrn-col-md-4":"lrn-col-md-6",s="lrn-author-activity-intro-outro lrn-col-xs-12 "+"".concat(r?"lrn-col-sm-12":"lrn-col-sm-6"," ").concat(o," ").concat(n," ").concat(i),l=this.renderResetCustomize(e,t),u=e?"introItem":"outroItem",c=e?a().cloneDeep(this.props.introItem):a().cloneDeep(this.props.outroItem),d="introOutroEnable";c&&!c.organisation_id&&(c.organisation_id=this.props.defaultOrganisationId);var f=c&&c.organisation_id===this.props.defaultOrganisationId,p=c&&!!this.props.itemBanks&&(!!c.item_pool_id||!f);return zt.createElement("div",{className:s},l,zt.createElement("div",{className:"lrn-author-activity-intro-outro-toggle"},zt.createElement(Bl,{selector:d+" - "+u,value:this.context.i18n.get(d),onChange:this.toggleShowIntroOutroItem.bind(this,e),checked:t})),p&&zt.createElement(jb,{tooltip:Ib(this.props.itemBanks,c,this.context.i18n),icon:"link"}))}},{key:"render",value:function(){if(!1!==this.props.loading||"assess"!==this.props.renderingType)return null;var e=this.renderItemSettings(!0),t=this.renderItemSettings(!1);return zt.createElement("div",{className:"lrn-author-intro-outro-toolbar"},zt.createElement("ul",{className:"lrn-author-activity-toolbar-controls lrn-author-activity-toolbar-controls-alt"},zt.createElement("li",{className:"lrn-item-for-activity-list lrn-col-xs-2 lrn-col-md-1"}),zt.createElement("li",{className:"lrn-item-for-activity-list lrn-col-xs-10 lrn-col-md-11"},e,t,this.props.showResourceItem&&zt.createElement(I_,null))))}}])&&F_(t.prototype,n),r&&F_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);U_.contextTypes={i18n:jn().object};const W_=Ln((function(e){var t=a().getNested(e,"activityEdit.activityJson")||{},n=a().getNested(t,"data.config.navigation")||{},r=a().getNested(e,"initOptions.config.activity_edit.resource_item.show");return{activityEdit:e.activityEdit,showResourceItem:r,activityReference:t.reference,showIntro:n.show_intro||!1,showOutro:n.show_outro||!1,introItem:n.intro_item||!1,outroItem:n.outro_item||!1,renderingType:a().getNested(t,"data.rendering_type"),loading:Ph(e),itemBanks:a().getNested(e,"initOptions.config.activity_edit.item_search.item_banks"),defaultOrganisationId:e.activityEdit.organisationId}}),{createNavigateViaBackboneRouter:Mb,resetIntroItem:Uv.createResetIntroItem,resetOutroItem:Uv.createResetOutroItem,toggleShowIntroItem:Uv.createToggleShowIntroItem,toggleShowOutroItem:Uv.createToggleShowOutroItem})(U_);function z_(e){return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K_(e,t){return(K_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q_(e);if(t){var i=Q_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J_(this,n)}}function J_(e,t){if(t&&("object"===z_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q_(e){return(Q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K_(e,t)}(o,e);var t,n,r,i=Z_(o);function o(){return G_(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t=e.get("activityRemoveItems"),n=this.props.numberOfSelectedItems,r=n<1,i=r?"lrn-author-disabled":"",o="lrn-author-activity-button lrn-btn-i-xs "+"lrn-col-xs-none lrn-col-sm-none ".concat(i),a="lrn-author-activity-button lrn-btn-i-xs "+i;return zt.createElement("li",{"data-authorapi-selector":"removeItems"},zt.createElement("div",{className:"lrn-search-small"},zt.createElement("button",{className:a,type:"button","data-authorapi-tooltip":e.get("activityRemoveItems"),onClick:this.onClickRemoveItems.bind(this),disabled:r},zt.createElement("span",{className:"lrn-i lrn-i-trash lrn-i-size-xs lrn-i-top-none"}))),zt.createElement("button",{type:"button",onClick:this.onClickRemoveItems.bind(this),className:o,disabled:r},zt.createElement("span",{className:"lrn-i lrn-i-trash lrn-i-size-xs lrn-i-top-none"}),zt.createElement("span",{className:"lrn-author-button-text"},t),zt.createElement("span",{"data-authorapi-selector":"removeItemCount"},n>=1?" (".concat(n,") "):"")))}},{key:"onClickRemoveItems",value:function(){this.props.numberOfSelectedItems>0&&this.props.removeItems()}}])&&$_(t.prototype,n),r&&$_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);X_.contextTypes={i18n:jn().object};const ew=Ln((function(e){return{numberOfSelectedItems:a().size(a().filter(e.activityEdit.itemsUiState,(function(e){return e.checked})))}}),{removeItems:Uv.createRemoveItems})(X_);function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iw(e,t){return(iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ow(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lw(e);if(t){var i=lw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return aw(this,n)}}function aw(e,t){if(t&&("object"===tw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sw(e)}function sw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lw(e){return(lw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iw(e,t)}(o,e);var t,n,r,i=ow(o);function o(){var e;nw(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return uw(sw(e=i.call.apply(i,[this].concat(n))),"onAddItem",(function(){var t=e.props.activityReference,n={currentLocation:"activities/".concat(t,"/items/new"),previousLocation:e.props.url};e.context.publicEvents.trigger(sd.EVENTS.activityEditItemCreate),e.props.navigate(n)})),e}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t=["lrn-author-activity-button","lrn-btn-i-xs","lrn-btn-primary"],n=["lrn-i","lrn-i-plus-small","lrn-i-size-xs","lrn-i-top-none"];return zt.createElement("li",null,zt.createElement("div",{className:"lrn-search-small"},zt.createElement("button",{type:"button",onClick:this.onAddItem,className:a().classNames(t),"data-authorapi-tooltip":e.get("activityCreateItem")},zt.createElement("span",{className:a().classNames(n)}))),zt.createElement("button",{type:"button",onClick:this.onAddItem,className:a().classNames(t,"lrn-col-xs-none","lrn-col-sm-none")},zt.createElement("span",{className:a().classNames(n)}),zt.createElement("span",{className:"lrn-author-button-text"},e.get("activityCreateItem"))))}}])&&rw(t.prototype,n),r&&rw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);cw.contextTypes={i18n:jn().object,publicEvents:jn().object};const dw=Ln((function(e){return{url:e.ui.navigate.route.url,activityReference:a().getNested(e.activityEdit,"activityJson.reference")}}),{navigate:yh})(cw);function fw(e){return(fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mw(e,t){return(mw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vw(e);if(t){var i=vw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yw(this,n)}}function yw(e,t){if(t&&("object"===fw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vw(e){return(vw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mw(e,t)}(o,e);var t,n,r,i=gw(o);function o(){return pw(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"fetchItemsAndSchemasData",value:function(e){if(e.loadingItems)return!1;var t=a().getNested(this.props,"ui.navigate.route"),n=a().getNested(t,"params.reference")||"",r=a().getNested(e,"activityReference"),i=n.toLowerCase()===r.toLowerCase(),o="activities/new"===a().getNested(t,"path")||"activities/new/adaptive"===a().getNested(t,"path");a().size(e.itemsInActivity)>0&&(i||o)&&this.needToReloadItems(e)?e.fetchItemsAndSchemasData({activityId:e.activityId,payload:{items:e.itemsInActivity}}):e.activityLoaded&&0===a().size(e.itemsInActivity)&&!1!==e.loadingItems&&e.noItemsToLoad()}},{key:"needToReloadItems",value:function(e){return e.itemsInActivity.length>e.items.length||!a().every(e.itemsInActivity,(function(t){var n=a().isString(t)?{reference:t}:function(n){var r=t.item_pool_id||"",i=n.item_pool_id||"",o=t.organisation_id||e.defaultOrganisationId;return r===i&&t.reference===n.reference&&o===n.organisation_id};return a().some(e.items,n)}))}},{key:"updateReorderableSelected",value:function(e){if(this.reorderable){var t=[];for(var n in e.itemsUiState)e.itemsUiState.hasOwnProperty(n)&&e.itemsUiState[n].checked&&t.push("activity_id_".concat(n));this.reorderable.updateReferences(t)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fetchItemsAndSchemasData(e),this.updateReorderableSelected(e),this.oldNumDeletedItems=this.props.numberOfDeletedItems}},{key:"UNSAFE_componentWillMount",value:function(){this.reorderable=new Qb,this.questionsAppContext={}}},{key:"componentDidMount",value:function(){this.fetchItemsAndSchemasData(this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=!1;return e.selectAll!==this.props.selectAll&&(t=!0),e.loadingItems!==this.props.loadingItems&&(t=!0),e.loadedItems!==this.props.loadedItems&&(t=!0),JSON.stringify(e.items)!==JSON.stringify(this.props.items)&&(t=!0),JSON.stringify(e.itemsInActivity)!==JSON.stringify(this.props.itemsInActivity)&&(t=!0),e.numberOfDeletedItems!==this.props.numberOfDeletedItems&&(t=!0),t}},{key:"renderItems",value:function(){var e=this;if(!this.areItemsLoaded())return null;var t=this,n=[],r=this.context.i18n,i=Th(this.props.activityEdit);a().each(i,(function(r,i){n.push(zt.createElement($b,{selectAll:t.props.selectAll,item:r.item,itemId:r.activityItem.id,sortOrder:i+1,key:r.activityItem.id,questionsContext:e.questionsAppContext}))}));var o=this.props.activityId;return zt.createElement("div",{className:"lrn-item-for-activity-list lrn-item-for-activity-list-edit"},i.length>0?zt.createElement("div",{"data-authorapi-view":"items"},zt.createElement("ul",{ref:function(t){t&&(e.reorderable.add(t,i,o,(function(t,n){return e.props.changeOrder({field:t,value:n})})),e.updateReorderableSelected(e.props))},className:"lrn-list-view lrn-list-unstyled lrn-list-divider lrn-author-draggable","data-authorapi-view":"item-list"},n)):zt.createElement("div",{className:"lrn-list-view-empty lrn-author-ui-no-preview"},zt.createElement("span",{className:"lrn-list-view-empty-label"},r.get("itemListEmptyState")),zt.createElement("div",{className:"lrn-activity-view-empty-img"})))}},{key:"onFindItems",value:function(){var e=a().getNested(this.props.activityEdit,"previousSearchStates.lastItemPickerSearchState");e?this.props.createNavigateViaBackboneRouter({methodName:"navigate",methodArgs:[e]}):this.props.createNavigateViaBackboneRouter({methodName:"navigateToItemForActivitySearchQuery",methodArgs:[this.props.activityReference]})}},{key:"areItemsLoaded",value:function(){return this.props.activityLoaded&&!1===this.props.loadingItems}},{key:"renderCreateItemButton",value:function(){var e=a().getNested(this.props,"initOptions.config.activity_edit.item.add.show");return this.areItemsLoaded()&&e?zt.createElement(dw,null):null}},{key:"renderSelectAllCheckbox",value:function(){var e={paddingLeft:"0",paddingRight:"0",textAlign:"center",float:U.getEndDirection()},t={};U.isRtl()?t.marginLeft="0":t.marginRight="0";var n="";return this.props.items.length>0&&(n=zt.createElement("div",{className:"lrn-check-box-wrapper"},zt.createElement("input",{type:"checkbox",checked:this.props.selectAll,className:"lrn-check-box-input","data-authorapi-selector":"select-all-items-for-activity-input",readOnly:!0}),zt.createElement("span",{className:"lrn-i-tick lrn-check-box-span",onClick:this.props.toggleSelectAll.bind(this),"data-authorapi-selector":"select-all-items-for-activity"}))),zt.createElement("li",{className:"lrn-item-for-activity-list lrn-col-xs-2 lrn-col-md-1 lrn-col-lg-1",style:t},zt.createElement("div",{className:"lrn-list-view-col lrn-col-xs-7 lrn-list-view-col-first lrn-author-ui-no-preview",style:e},n))}},{key:"renderFindItemsButton",value:function(){var e=this,t=this.context.i18n,n=a().getNested(this.props,"initOptions.config.activity_edit.item_search.show");return this.areItemsLoaded()&&n?zt.createElement("li",{"data-authorapi-selector":"findItems"},zt.createElement("div",{className:"lrn-search-small"},zt.createElement("button",{type:"button",onClick:e.onFindItems.bind(e),className:"lrn-author-activity-button lrn-btn-i-xs lrn-btn-sec","data-authorapi-tooltip":t.get("activityFindItems")},zt.createElement("span",{className:"lrn-i lrn-i-search lrn-i-size-xs lrn-i-top-none"}))),zt.createElement("button",{type:"button",onClick:e.onFindItems.bind(e),className:"lrn-author-activity-button lrn-btn-i-xs lrn-btn-sec lrn-col-xs-none lrn-col-sm-none"},zt.createElement("span",{className:"lrn-i lrn-i-search lrn-i-size-xs lrn-i-top-none"}),zt.createElement("span",{className:"lrn-author-button-text"},t.get("activityFindItems")))):null}},{key:"renderMessageContainer",value:function(){var e=this.props.numberOfDeletedItems,t=0!==e?this.props.resetNumberOfDeletedItems:function(e){return e},n={opacity:1};if(0===e){if(!this.oldNumDeletedItems)return"";n.opacity=0,e=this.oldNumDeletedItems}var r=this.context.i18n.get("removeItemsSuccessMessage").replace(/%number%/,e);return zt.createElement("li",{className:"lrn-item-for-activity-list flex"},zt.createElement("div",{className:"lrn-success-message lrn-ellipses",style:n,"data-authorapi-selector":"success-message"},zt.createElement("button",{"data-authorapi-selector":"success-message-dummy-button",onBlur:t,ref:function(e){return e&&e.focus()}}),zt.createElement("span",{className:"lrn-i-tick"}),zt.createElement("span",{"data-authorapi-selector":"success-message-text"},r)))}},{key:"renderItemListToolbar",value:function(){var e={};return U.isRtl()?e.marginRight="-1px":e.marginLeft="-1px",zt.createElement("div",{"data-authorapi-view":"activity-item-toolbar",className:"lrn-author-ui-no-preview"},zt.createElement(W_,null),zt.createElement("div",{className:"lrn-author-activity-toolbar",style:e},zt.createElement("ul",{className:"lrn-author-activity-toolbar-controls lrn-author-activity-toolbar-controls-alt"},this.renderSelectAllCheckbox(),this.renderFindItemsButton(),this.renderCreateItemButton(),this.props.items.length>0?zt.createElement(ew,null):"",this.renderMessageContainer())))}},{key:"render",value:function(){return zt.createElement("div",null,this.renderItemListToolbar(),this.renderItems())}}])&&hw(t.prototype,n),r&&hw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);bw.contextTypes={i18n:jn().object};const _w=Ln((function(e,t){return{activityEdit:e.activityEdit,numberOfDeletedItems:a().getNested(e,"activityEdit.numberOfDeletedItems")||0,itemsInActivity:a().getNested(e.activityEdit.activityJson,"data.items")||[],activityReference:e.activityEdit.activityJson.reference,loadingItems:Ph(e),activityLoaded:e.activityEdit.activityLoaded,selectAll:e.activityEdit.selectAllItems,itemsUiState:e.activityEdit.itemsUiState,ui:e.ui,loadedItems:Mh(e),items:a().getNested(e,"activityEdit.items.".concat(t.activityId))||[],initOptions:e.initOptions,defaultOrganisationId:e.activityEdit.organisationId}}),{createNavigateViaBackboneRouter:Mb,toggleSelectAll:Uv.createToggleSelectAllItems,resetNumberOfDeletedItems:Uv.createResetNumberOfDeletedItems,fetchItemsAndSchemasData:th,changeOrder:Uv.createUpdateItems,noItemsToLoad:Db})(bw);var ww=__webpack_require__(11093),Ew=__webpack_require__.n(ww);function Sw(e){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tw(e,t){return(Tw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ow(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Aw(e);if(t){var i=Aw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cw(this,n)}}function Cw(e,t){if(t&&("object"===Sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Aw(e){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pw=["lrn-btn","lrn-btn-right","lrn-btn-responsive","lrn-author-btn-outline","lrn-btn-i-xs","lrn-btn-icon-left"],Mw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t)}(o,e);var t,n,r,i=Ow(o);function o(){return xw(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"_onClick",value:function(){this.props.onClick()}},{key:"getButton",value:function(e,t){var n=this.context.i18n,r=a().classNames.apply(a(),Pw);return zt.createElement(Ar,{className:r,onClick:this._onClick.bind(this),dataAuthorApiSelector:"new-player-template-button",dataAuthorApiTooltip:t?n.get("playerTemplateCreateButton"):void 0},zt.createElement("span",{className:"lrn-i-plus-small lrn-i-size-xs"}),e&&zt.createElement("span",{className:"lrn-col-xs-none lrn-text-no-wrap lrn-ellipses",style:{maxWidth:"125px",marginRight:"5px"}},n.get("playerTemplateCreateButton")))}},{key:"render",value:function(){return zt.createElement(zt.Fragment,null,zt.createElement("div",{className:"lrn-col-xs-none"},this.getButton(!0,!1)),zt.createElement("div",{className:"lrn-col-xs-only lrn-author-inline-block"},this.getButton(!1,!0)))}}])&&kw(t.prototype,n),r&&kw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Mw.contextTypes={i18n:jn().object};const Dw=Mw;const Rw=function(e){return{type:ip,data:{values:e}}};function Lw(e){return(Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iw(e,t){return(Iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fw(e);if(t){var i=Fw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bw(this,n)}}function Bw(e,t){if(t&&("object"===Lw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fw(e){return(Fw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}(o,e);var t,n,r,i=jw(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t))._isMounted=!1,n.state={availableRegionsReady:!1},n.maxHeightWhenVisible=600,n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,kd.getPresetRegions(this.props.regionPresets).then((function(t){e._isMounted&&(e.availableRegions=t,e.setState({availableRegionsReady:!0}))}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"isRegionElementEnabled",value:function(e,t){var n=e+"."+t;return!1!==this.props.regionOverrides[n]}},{key:"getRegionOptions",value:function(){var e=this,t=[];return a().each(this.availableRegions,(function(n,r){a().each(n,(function(n){t.push({regionName:r,elementDefinition:n,enabled:e.isRegionElementEnabled(r,n.type)})}))})),t}},{key:"updateRegionElement",value:function(e,t,n){var r=a().cloneDeep(this.props.regionOverrides),i=e+"."+t;n?r[i]=!1:delete r[i],this.props.updateRegionOverrides(r)}},{key:"toggleAnnotations",value:function(e){var t=a().cloneDeep(this.props.currentAnnotationsState);t.enabled=!e,this.updateAnnotationsOptions(t)}},{key:"updateAnnotationsOptionsElement",value:function(e,t){var n=a().cloneDeep(this.props.currentAnnotationsState);a().setNested(n,"annotations_api_init_options.modules.".concat(e),!t),this.updateAnnotationsOptions(n)}},{key:"_getAnnotationOptions",value:function(){for(var e=this,t=this.context.i18n,n=this.props.currentAnnotationsState.enabled,r=this.props.currentAnnotationsState.annotations_api_init_options,i=Object.keys(_b.modules),o=i.length,s=[],l=[],u=function(u){var c="annotations".concat(qs(i[u])),d=i[u],f="annotations".concat(qs(i[u]),"Description"),p=a().getNested(r,"modules.".concat(d))||!1,h=!n,m=!1;u%2==0?u!==o-1&&u!==o-2||(m=!0):u===o-1&&(m=!0),l.push(zt.createElement("div",{className:"lrn-col-xs-6",key:"annotationCheckBox"+u},zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},t.get(f)),zt.createElement(Bl,{value:t.get(c),onChange:function(){e.updateAnnotationsOptionsElement(d,p)},isFlushBottom:m,checked:p,disabled:h}))),u%2==1&&(s.push(e._wrapCheckboxes(u,l,!0)),l=[])},c=0;c<o;c++)u(c);return 1===l.length&&s.push(this._wrapCheckboxes(o-1,l,!0)),s}},{key:"_getAnnotationsElements",value:function(){var e=this,t=this.context.i18n,n=this.props.currentAnnotationsState.enabled;return zt.createElement("div",{key:"annotationsRow",className:"lrn-region-elements-section"},zt.createElement("div",{className:"lrn-region-row"},zt.createElement("div",{className:"lrn-col-xs-12",key:"annotationsCheckBox"},zt.createElement(Bl,{value:t.get("annotationsTools"),onChange:function(){e.toggleAnnotations(n)},checked:n}),zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},t.get("annotationsToolsDescription")))),zt.createElement("div",{className:"lrn-region-elements-subsection"},this._getAnnotationOptions()))}},{key:"getRegionElements",value:function(){for(var e=this,t=this.props.initOptions,n=this.getRegionOptions(),r=[],i=a().getNested(t,"config.activity_edit.annotations.enable"),o=[],s=function(t){var i=n[t].elementDefinition.default_label_option||n[t].elementDefinition.type;o.push(zt.createElement("div",{className:"lrn-col-xs-6",key:"regionCheckBox"+t},zt.createElement(Bl,{value:e.context.i18n.get(i),onChange:function(){e.updateRegionElement(n[t].regionName,n[t].elementDefinition.type,n[t].enabled)},checked:n[t].enabled}))),t%2==1&&(r.push(e._wrapCheckboxes(t,o)),o=[])},l=0;l<n.length;l++)s(l);return 1===o.length&&r.push(this._wrapCheckboxes(n.length-1,o)),i&&r.push(this._getAnnotationsElements()),r}},{key:"_wrapCheckboxes",value:function(e,t,n){var r=n?" lrn-region-row-borderless":"";return zt.createElement("div",{className:"lrn-region-row"+r,key:"regionRow"+e},t)}},{key:"render",value:function(){if(!this.state.availableRegionsReady)return null;var e=0;return this.props.showOptions&&(e=this.maxHeightWhenVisible),zt.createElement("div",{className:"lrn-region-elements-wrapper",style:{maxHeight:e}},this.getRegionElements())}},{key:"updateAnnotationsOptions",value:function(e){var t=a().getNested(e,"annotations_api_init_options.modules")||{},n=Object.keys(t).every((function(e){return!t[e]}));!1===e.enabled||n?this.props.removeAnnotationsOptions():!0===e.enabled&&this.props.updateAnnotationsOptions(e.annotations_api_init_options)}}])&&Nw(t.prototype,n),r&&Nw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Yw.contextTypes={i18n:jn().object};const Hw=function(e){return Ln((function(e){return{activityId:a().getNested(e,"activityEdit.activityJson.activity_id"),initOptions:e.initOptions||{},regionOverrides:a().getNested(e,"activityEdit.activityJson.data.config.region_overrides")||{}}}),(function(e){return{updateRegionOverrides:function(t){e(Rw({region_overrides:t}))},removeAnnotationsOptions:function(){e(Uv.createRemoveAnnotationsConfig())},updateAnnotationsOptions:function(t){e(Rw({annotations_api_init_options:t}))}}}))(e)}(Yw);function Vw(e){return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uw(e,t){return(Uw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ww(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$w(e);if(t){var i=$w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zw(this,n)}}function zw(e,t){if(t&&("object"===Vw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gw(e)}function Gw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $w(e){return($w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zw={confirmActive:"lrn-author-btn-confirm-active",deleteButton:["lrn-author-btn-confirm","lrn-btn","lrn-btn-small","lrn-btn-responsive","lrn-author-btn-outline","lrn-btn-i-xs","lrn-btn-icon-left","lrn-btn-display-on-hover","lrn-btn-display-on-hover-end"]},Jw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uw(e,t)}(o,e);var t,n,r,i=Ww(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Kw(Gw(t=i.call(this,e)),"handleClick",(function(){t.state.confirmActive&&t.props.onConfirm(),t.setState({confirmActive:!t.state.confirmActive})})),Kw(Gw(t),"handleMouseLeave",(function(){t.setState({confirmActive:!1})})),t.props.alignRight&&Zw.deleteButton.push("lrn-btn-right"),t.state={confirmActive:!1},t}return t=o,(n=[{key:"render",value:function(){var e=a().classNames(Zw.deleteButton,Kw({},Zw.confirmActive,this.state.confirmActive)),t=this.state.confirmActive?this.props.confirmText:this.props.defaultText;return zt.createElement(Ar,{onClick:this.handleClick,onMouseLeave:this.handleMouseLeave,dataAuthorApiSelector:this.props.dataAuthorApiSelector,className:e},!this.state.confirmActive&&zt.createElement("span",{className:this.props.iconClassName}),t)}}])&&qw(t.prototype,n),r&&qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Kw(Jw,"contextTypes",{i18n:jn().object});const Qw=Jw;var Xw=function(e,t){e.component.comms.request({url:"/itembank/activities/playertemplatelist",action:"get"}).then((function(e){t(function(e){return{type:Mf,data:e}}(e.data))}))};const eE=function(){return function(e,t,n){var r=t();a().isEmpty(r.activityEdit.customRegionTemplates)&&Xw(n,e)}};function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e){return function(e){if(Array.isArray(e))return rE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rE(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oE(e,t){return(oE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uE(e);if(t){var i=uE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sE(this,n)}}function sE(e,t){if(t&&("object"===tE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lE(e)}function lE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uE(e){return(uE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cE={enabled:!1,annotations_api_init_options:_b},dE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oE(e,t)}(o,e);var t,n,r,i=aE(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lE(t=i.call(this,e)),"toggleCustomisationOptions",(function(e,n){e.stopPropagation(),t.props.updateTemplateSettings({setting:"templateOptions",stateType:"show",stateValue:!t.shouldTemplateShowOptions(n)})})),t.state={enabledPlayerTemplates:[]},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.fetchActivityPlayerTemplates(),this.setEnabledPlayerTemplates()}},{key:"componentDidUpdate",value:function(e){this.props.customRegionTemplates.length!==e.customRegionTemplates.length&&this.setEnabledPlayerTemplates()}},{key:"render",value:function(){if(!this.state.enabledPlayerTemplates.length)return zt.createElement("div",null);var e=this.context.i18n;return zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-author-inline"},zt.createElement("label",{className:"lrn-form-label-name"},e.get("assessPlayerLayout")),this.getRegionButtonsWithLoadingWrapper()))}},{key:"getRegionButtonsWithLoadingWrapper",value:function(){return zt.createElement("div",{className:"lrn-row-wrapper"},zt.createElement(va,{isLoading:!this.props.customRegionTemplatesFetched},this.generateRegionButtons()))}},{key:"generateRegionButtons",value:function(){for(var e=[],t=0;t<this.state.enabledPlayerTemplates.length;t++)e.push(this.getTemplateButton(t));return e}},{key:"getTemplateButton",value:function(e){var t=this;return zt.createElement("div",{key:"RegionButton"+e},zt.createElement("div",{className:this.getButtonClasses(e),"data-authorapi-player-reference":this.state.enabledPlayerTemplates[e].reference,onClick:function(){return t.handleLayoutChange(e)}},this.getDisplayIcon(e),zt.createElement("label",{className:"lrn-ellipses"},this.getTemplateName(e)),this.getCustomisationButton(e),this.getTemplateBuilderOptions(e)),this.getRegionCustomiser(e))}},{key:"getButtonClasses",value:function(e){return a().classNames({"lrn-author-row-button":!0,active:this.isTemplateActive(e)})}},{key:"handleLayoutChange",value:function(e){if(!0!==this.isTemplateActive(e)){var t=this.getChosenTemplateIndex(),n=this.state.enabledPlayerTemplates[e].reference;this.props.updateActivityMetadata({player_template_reference:n}),this.props.updateTemplateSettings({setting:"templateOptions",stateType:"show",stateValue:!1}),this.props.changeTemplate(this.getValuesToUpdateOnTemplateChange(e,t))}}},{key:"getTemplateName",value:function(e){var t=a().isObject(this.props.config.region_overrides)&&!a().isEmpty(this.props.config.region_overrides),n=a().isObject(this.props.config.annotations_api_init_options),r=this.state.enabledPlayerTemplates[e].name;return this.isTemplateActive(e)&&this.isTemplateInternalPreset(e)&&(t||n)&&(r+="*"),r}},{key:"getDisplayIcon",value:function(e){var t=this.state.enabledPlayerTemplates[e],n="assess-thumbail-".concat(t.thumbnail," lrn-author-inline");return zt.createElement("div",{className:n})}},{key:"getCustomisationButton",value:function(e){var t=this;return this.shouldDisplayCustomisationOptions(e)&&zt.createElement("span",{onClick:function(n){t.toggleCustomisationOptions(n,e)},className:"lrn-btn-primary lrn-btn-small lrn-author-row-button-slim","data-authorapi-selector":"template-show-more-options-button"},a().getNested(this.props.settingsUiState,"templateOptions.show")?this.context.i18n.get("hideCustomizeRegionSettings"):this.context.i18n.get("showCustomizeRegionSettings"))}},{key:"getRegionCustomiser",value:function(e){var t=this.state.enabledPlayerTemplates[e].reference;return this.shouldDisplayCustomisationOptions(e)&&zt.createElement(Hw,{regionPresets:this.state.enabledPlayerTemplates[e].regions,templateReference:t,showOptions:this.shouldTemplateShowOptions(e),currentAnnotationsState:this.getAnnotationOptions(e)})}},{key:"shouldDisplayCustomisationOptions",value:function(e){return!!(a().getNested(this.props.initOptions,"config.activity_edit.customize_presets.enable")&&this.isTemplateActive(e)&&this.isTemplateInternalPreset(e))}},{key:"setEnabledPlayerTemplates",value:function(){var e=kd.getTemplates(this.props.initOptions.config.activity_edit),t=a().cloneDeep(this.props.customRegionTemplates);t.forEach((function(e){e.thumbnail="custom",e.custom_template=!0}));var n=[].concat(nE(e),nE(t));if(JSON.stringify(this.state.enabledPlayerTemplates)!==JSON.stringify(n)){var r=a().cloneDeep(this.state);r.enabledPlayerTemplates=n,this.setState(r)}}},{key:"getValuesToUpdateOnTemplateChange",value:function(e,t){return a().extend(this.getAttributesWithEmptyValues(t),this.getAttributesWithNewValues(e))}},{key:"getAttributesWithEmptyValues",value:function(e){var t,n=this.state.enabledPlayerTemplates[e],r={};return t=this.isCustomTemplate(e)?kd.getTemplateProperties(n.json):[].concat(nE(kd.getTemplateProperties(n)),["region_overrides","annotations_api_init_options","annotations"]),a().each(t,(function(e){r[e]=null})),r}},{key:"getAttributesWithNewValues",value:function(e){var t=this.state.enabledPlayerTemplates[e];return this.isCustomTemplate(e)?a().pick(t.json,kd.getTemplateProperties(t.json)):a().pick(t,kd.getTemplateProperties(t))}},{key:"handleDeleteTemplate",value:function(e){var t=this.state.enabledPlayerTemplates[e].reference;this.props.deleteTBTemplate({reference:t})}},{key:"getTemplateBuilderOptions",value:function(e){var t=this;if(a().getNested(this.props.initOptions,"config.activity_edit.player_template_builder.show")&&this.isCustomTemplate(e)&&this.isTemplateActive(e)){var n=this.context.i18n;return zt.createElement(zt.Fragment,null,zt.createElement("span",{className:a().classNames(["lrn-btn-primary","lrn-btn-small","lrn-author-row-button-slim"]),"data-authorapi-selector":"template-edit-btn",onClick:function(){return t.handleEditPlayerTemplate()}},n.get("playerTemplateEditButton")),zt.createElement(Qw,{dataAuthorApiSelector:"template-delete-btn",confirmText:n.get("playerTemplateConfirmDeleteButton"),defaultText:n.get("playerTemplateDeleteButton"),iconClassName:"lrn-i-trash",onConfirm:function(){return t.handleDeleteTemplate(e)}}))}}},{key:"handleEditPlayerTemplate",value:function(){this.props.setEditModeToPlayerTemplates(),this.props.updateTBEditTemplate()}},{key:"isTemplateActive",value:function(e){var t=this.props,n=this.state.enabledPlayerTemplates[e],r=kd.getDefaultTemplateConfig(this.props.initOptions.config.activity_edit,this.state.enabledPlayerTemplates),i=t.metadata.player_template_reference;return i?i===n.reference:t.activityId&&-1!==t.activityId?!!t.config.regions&&JSON.stringify(t.config.regions)===JSON.stringify(n.regions):a().getNested(r,"reference")===n.reference}},{key:"getChosenTemplateIndex",value:function(){var e=this;return a().findIndex(this.state.enabledPlayerTemplates,(function(t){return t.reference===e.props.metadata.player_template_reference}))}},{key:"isTemplateInternalPreset",value:function(e){return!(!this.state.enabledPlayerTemplates[e]||!this.state.enabledPlayerTemplates[e].internal_preset)}},{key:"isCustomTemplate",value:function(e){return!(!this.state.enabledPlayerTemplates[e]||!this.state.enabledPlayerTemplates[e].custom_template)}},{key:"shouldTemplateShowOptions",value:function(e){return this.isTemplateActive(e)&&this.isTemplateInternalPreset(e)&&!!a().getNested(this.props.settingsUiState,"templateOptions.show")}},{key:"getAnnotationOptions",value:function(e){if(!this.state.enabledPlayerTemplates[e].internal_preset)return{};var t=cE;if(this.isTemplateActive(e)){var n=a().getNested(this.props.config,"annotations_api_init_options");a().isUndefined(n)||(t={enabled:!0,annotations_api_init_options:n})}return t}}])&&iE(t.prototype,n),r&&iE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);dE.propTypes={config:jn().object,initOptions:jn().object},dE.contextTypes={i18n:jn().object};const fE=Ln((function(e){return{activityId:a().getNested(e,"activityEdit.activityJson.activity_id"),metadata:e.activityEdit.activityJson.metadata||{},config:e.activityEdit.activityJson.data&&e.activityEdit.activityJson.data.config||{},customRegionTemplates:e.activityEdit.customRegionTemplates||[],initOptions:e.initOptions||{config:{}},settingsUiState:e.activityEdit.settingsUiState,customRegionTemplatesFetched:e.activityEdit.customRegionTemplatesFetched||!1}}),(function(e){return{changeTemplate:function(t){e(Rw(t))},removeAnnotationsOptions:function(){e(Uv.createRemoveAnnotationsConfig())},setEditModeToPlayerTemplates:function(){e(Cm("player_templates"))},updateTemplateSettings:function(t){e(Uv.createUpdateSettingsUiState(t))},updateAnnotationsOptions:function(t){e(Rw({annotations_api_init_options:t}))},updateActivityMetadata:function(t){e(Hp(t))},updateTBEditTemplate:function(){e({type:Rf})},deleteTBTemplate:function(t){e(function(e){return{type:Df,data:e}}(t))},fetchActivityPlayerTemplates:function(){e(eE())}}}))(dE);var pE=function(e,t){var n=e.hours,r=e.mins,i=e.onHoursChange,o=e.onMinsChange;return zt.createElement("div",{className:"lrn-col-xs-5 lrn-author-flex"},zt.createElement("div",{className:"lrn-form-group lrn-col-xs-5"},zt.createElement("label",{className:"lrn-form-label-name"},t.i18n.get("hours")),zt.createElement("input",{className:"lrn-form-control",type:"number",min:"0",onChange:i,value:n})),zt.createElement("label",{className:"lrn-col-xs-2 semi-colon"},":"),zt.createElement("div",{className:"lrn-form-group lrn-col-xs-5"},zt.createElement("label",{className:"lrn-form-label-name"},t.i18n.get("minutes")),zt.createElement("input",{className:"lrn-form-control",type:"number",min:"0",max:"59",onChange:o,value:r})))};pE.contextTypes={i18n:jn().object};const hE=pE;function mE(e){return(mE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yE(e,t){return(yE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wE(e);if(t){var i=wE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bE(this,n)}}function bE(e,t){if(t&&("object"===mE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _E(e)}function _E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wE(e){return(wE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yE(e,t)}(o,e);var t,n,r,i=vE(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),EE(_E(t=i.call(this,e)),"hashPassword",(function(e){if(0!==e.value.length){var n=e.value.trim(),r=Ew()(n).toString();t.props.changeProperty(e.path,r,!1,!1)}})),EE(_E(t),"getSubmitCriteriaState",(function(){var e=a().getNested(t.props.config,"configuration.submit_criteria")||{};return{submit_criteria_enabled:a().has(e,"type")&&a().has(e,"threshold"),submit_criteria:e={type:e.type||"attempted",threshold:a().isUndefined(e.threshold)?0:e.threshold+""}}})),EE(_E(t),"getReadingModeWarningState",(function(){var e=a().getNested(t.props.config,"configuration.reading_mode.warning_time"),n=!a().isUndefined(e);return{enabled:n,inputValue:n?e+"":t.DEFAULT_READING_MODE_WARNING_TIME}})),EE(_E(t),"getAdminPanelState",(function(){var e=a().getNested(t.props.config,"administration")||{};return{admin_panel_enabled:a().isString(e.pwd,"pwd")||a().keys(e.pwd).includes("pwd"),admin_panel:e={pwd:e.pwd||"",options:a().isEmpty(e.options)?{show_save:!0,show_exit:!0,show_extend:!0}:e.options}}})),EE(_E(t),"getInputStateByType",(function(e){var n,r,i,o;switch(e){case"auto_save":n="navigation.auto_save",r="save_interval_duration";break;case"idle_timeout":n="configuration.idle_timeout",r="interval"}var s=a().getNested(t.props.config,n);return a().isBoolean(s)&&!s?(i=!1,o=300):a().isBoolean(s)&&s||a().isUndefined(s)?(i=!0,o=300):(i=!0,o=a().getNested(s,r)||300),{enabled:i,inputValue:o}})),t.state={reading_time_mins:0,reading_time_hours:0,activity_time_mins:0,activity_time_hours:0},t.HOURS_IN_SECONDS=3600,t.MINUTES_IN_SECONDS=60,t.DEFAULT_WARNING_TIME=60,t.DEFAULT_READING_MODE_WARNING_TIME=60,t.DEFAULT_LIMIT_TYPE="hard",t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.convertSecondsToTime(a().getNested(this.props.config,"time.max_time"),"max_time"),t=this.convertSecondsToTime(a().getNested(this.props.config,"configuration.reading_mode.reading_time"),"reading_time"),n=a().deepExtend(this.state,e,t);this.setState(a().deepExtend({},this.state,n))}},{key:"componentDidUpdate",value:function(){var e=this.props.config,t=a().getNested(e,"time.max_time")||0,n=a().getNested(e,"configuration.reading_mode.reading_time")||0,r={};t!==a().getNested(this.state,"max_time")&&(r=this.convertSecondsToTime(t,"max_time")),n!==a().getNested(this.state,"reading_time")&&(r=a().extend(r,this.convertSecondsToTime(n,"reading_time"))),a().isEmpty(r)||this.setState(a().deepExtend({},this.state,r))}},{key:"convertSecondsToTime",value:function(e,t){var n,r=e||0,i=Math.floor(r/this.HOURS_IN_SECONDS);r-=i*this.HOURS_IN_SECONDS;var o=Math.floor(r/this.MINUTES_IN_SECONDS);return"max_time"===t?n={activity_time_hours:i,activity_time_mins:o,max_time:e}:"reading_time"===t&&(n={reading_time_hours:i,reading_time_mins:o,reading_time:e||0}),n}},{key:"limitMinutes",value:function(e,t){var n=t.target;n.value.length>2&&(n.value=n.value.substr(0,2)),n.value>59&&(n.value=59),this.convertTimeToSeconds(e,t)}},{key:"convertTimeToSeconds",value:function(e,t){var n,r=parseInt(t.target.value)||0,i=0;switch(e){case"activity_time_hours":i+=r*this.HOURS_IN_SECONDS,i+=this.state.activity_time_mins*this.MINUTES_IN_SECONDS,n="time.max_time";break;case"activity_time_mins":i+=r*this.MINUTES_IN_SECONDS,i+=this.state.activity_time_hours*this.HOURS_IN_SECONDS,n="time.max_time";break;case"reading_time_hours":i+=r*this.HOURS_IN_SECONDS,i+=this.state.reading_time_mins*this.MINUTES_IN_SECONDS,n="configuration.reading_mode.reading_time";break;case"reading_time_mins":i+=r*this.MINUTES_IN_SECONDS,i+=this.state.reading_time_hours*this.HOURS_IN_SECONDS,n="configuration.reading_mode.reading_time"}t.preventDefault(),this.props.changeProperty(n,i)}},{key:"getCheckbox",value:function(e){if(!e.show)return null;var t=this.context.i18n,n=this.props;return zt.createElement(Bl,{selector:e.selector,value:t.get(e.selector),onChange:function(){return n.changeProperty(e.path,e.mirrorValue?e.value:!e.value,!1,!e.edit)},checked:e.value,disabled:!e.edit})}},{key:"getCheckboxWithInput",value:function(e){var t=this;if(!e.show)return null;var n=this.context.i18n,r=this.props,i=e.value.enabled,o=e.edit&&i?"":"lrn-author-option-disabled",a=e.edit?"":"lrn-author-option-disabled";return zt.createElement("div",{className:"lrn-form-group lrn-author-checkbox-grouped"},zt.createElement(Bl,{className:"lrn-author-checkbox-inline",uniqueId:e.selector,selector:e.selector,onChange:function(n){return t.onCheckboxWithInputChange(e,n)},checked:i,disabled:!e.edit,isFlushBottom:!0}),zt.createElement("div",{className:"lrn-author-checkbox-with-input-container"},zt.createElement("label",{htmlFor:e.selector,className:"lrn-author-checkbox-inline-label ".concat(a)},n.get(e.selector)),zt.createElement("input",{className:"lrn-form-control lrn-author-checkbox-inline-input "+o,"data-authorapi-selector":"".concat(e.selector,"Input"),value:e.value.inputValue,type:"number",onChange:function(t){r.changeProperty(e.path,parseInt(t.currentTarget.value,10),!1,!e.edit)},disabled:!e.edit||!i}),zt.createElement("label",{htmlFor:e.selector,className:"lrn-author-checkbox-inline-label ".concat(a)},n.get("assessOptionsSeconds"))))}},{key:"onCheckboxWithInputChange",value:function(e,t){var n=this.props;e.parentResetPath?t.currentTarget.checked?n.changeProperty(e.path,e.value.inputValue,!1,!e.edit):n.changeProperty(e.parentResetPath,!1,!1,!e.edit):n.changeProperty(e.path,t.currentTarget.checked?e.value.inputValue:void 0,!1,!e.edit)}},{key:"onSubmitCriteriaThresholdChange",value:function(e,t){var n=t.currentTarget.value;if(""!==n){if(n=parseInt(n,10)||0,!isNaN(n)){if(n>100){var r=this.context.i18n.get("assessSubmitCriteriaThresholdError").replace(/%maxValue%/,100);alert(r),n=100}this.props.changeProperty("".concat(e.path,".threshold"),n,!1,!e.edit)}}else this.props.changeProperty("".concat(e.path,".threshold"),0,!1,!e.edit)}},{key:"getSubmitCriteriaOption",value:function(e){var t=this,n=this.context.i18n;if(!e.show)return null;var r=this.props,i=e.value.submit_criteria_enabled,o=e.edit?"":"lrn-author-option-disabled",a=e.edit&&e.value.submit_criteria_enabled?"":"lrn-author-option-disabled",s=[{value:"attempted",text:n.get("assessSubmitCriteriaAttempted")},{value:"valid",text:n.get("assessSubmitCriteriaValid")}],l=n.get("".concat(e.selector,"1")),u=n.get("".concat(e.selector,"2"));return zt.createElement("div",{className:"lrn-form-group lrn-author-checkbox-grouped"},zt.createElement(Bl,{className:"lrn-author-checkbox-inline",uniqueId:e.selector,selector:e.selector,onChange:function(t){r.changeProperty(e.path,t.currentTarget.checked?e.value.submit_criteria:void 0,!1,!e.edit)},checked:i,disabled:!e.edit,isFlushBottom:!0}),zt.createElement("div",{className:"lrn-author-checkbox-with-input-container"},zt.createElement("label",{htmlFor:e.selector,className:"lrn-author-checkbox-inline-label ".concat(o)},l),zt.createElement("input",{className:"lrn-form-control lrn-author-checkbox-inline-input "+a,"data-authorapi-selector":"".concat(e.selector,"Threshold"),value:e.value.submit_criteria.threshold,type:"number",min:"0",max:"100",onChange:function(n){return t.onSubmitCriteriaThresholdChange(e,n)},disabled:!e.edit||!e.value.submit_criteria_enabled}),zt.createElement("label",{htmlFor:e.selector,className:"lrn-author-checkbox-inline-second-label ".concat(o)},u),zt.createElement("div",{className:"lrn-author-checkbox-inline-select"},zt.createElement(Hs,{options:s,inputDataAuthorApiSelector:"".concat(e.selector,"Type"),value:e.value.submit_criteria.type,onChange:function(t){r.changeProperty("".concat(e.path,".type"),t.currentTarget.value,!1,!e.edit)},disabled:!e.edit||!e.value.submit_criteria_enabled,flushBottom:!0}))))}},{key:"isTimeDisabled",value:function(e){var t=a().getNested(this.props.config,e);return a().isUndefined(t)||0===t}},{key:"getPlayerOption",value:function(e){var t="config.activity_edit.player."+e;return a().getNested(this.props.initOptions,t)}},{key:"getTimeBasedSettingsConfig",value:function(){var e=this.props.config,t=this.getInputStateByType("auto_save"),n=this.getPlayerOption("time.auto_save.ui.edit")&&this.getPlayerOption("time.auto_save.edit")&&t.enabled,r=this.getPlayerOption("time.auto_save.disable_force_save_on_quit.edit")&&this.getPlayerOption("time.auto_save.edit")&&t.enabled,i=this.getInputStateByType("idle_timeout"),o=a().getNested(e,"configuration.idle_timeout.countdown_time"),s=this.getPlayerOption("time.idle_timeout.edit")&&this.getPlayerOption("time.idle_timeout.countdown_time.edit")&&i.enabled,l=a().getNested(e,"time.warning_time"),u=a().getNested(e,"time.limit_type")?void 0:this.DEFAULT_LIMIT_TYPE,c=this.isTimeDisabled("time.max_time"),d=this.isTimeDisabled("configuration.reading_mode.reading_time"),f="reading_mode.goto_first_item_on_reading_time_completion";return{show:this.getPlayerOption("time.show"),assessWarningTime:{selector:"assessWarningTime",path:"time.warning_time",show:this.getPlayerOption("time.warning_time.show"),edit:this.getPlayerOption("time.warning_time.edit")&&!c,value:{enabled:a().isNumber(l),inputValue:l||this.DEFAULT_WARNING_TIME}},assessAutoSave:{selector:"assessAutoSave",path:"navigation.auto_save.save_interval_duration",parentResetPath:"navigation.auto_save",show:this.getPlayerOption("time.auto_save.show"),edit:this.getPlayerOption("time.auto_save.edit"),value:this.getInputStateByType("auto_save")},assessAutoSaveUI:{selector:"assessAutoSaveUI",path:"navigation.auto_save.ui",show:this.getPlayerOption("time.auto_save.show")&&this.getPlayerOption("time.auto_save.ui.show"),edit:n,value:a().getNested(e,"navigation.auto_save.ui")||!1},assessAutoSaveDisableForceSaveOnQuit:{selector:"assessAutoSaveDisableForceSaveOnQuit",path:"navigation.auto_save.disable_force_save_on_quit",show:this.getPlayerOption("time.auto_save.show")&&this.getPlayerOption("time.auto_save.disable_force_save_on_quit.show"),edit:r,value:a().getNested(e,"navigation.auto_save.disable_force_save_on_quit")||!1},assessReadingModeWarningTime:{selector:"assessReadingModeWarningTime",path:"configuration.reading_mode.warning_time",show:this.getPlayerOption("time.reading_mode.warning_time.show"),edit:this.getPlayerOption("time.reading_mode.warning_time.edit")&&!d,value:this.getReadingModeWarningState()},assessReadingModeFirstItemOnReadingTimeCompletion:{selector:"assessReadingModeFirstItemOnReadingTimeCompletion",path:"configuration.reading_mode.goto_first_item_on_reading_time_completion",show:this.getPlayerOption("time.".concat(f,".show")),edit:this.getPlayerOption("time.".concat(f,".edit"))&&!d,value:a().getNested(e,"configuration.".concat(f))||!1},assessIdleTimeout:{selector:"assessIdleTimeout",path:"configuration.idle_timeout.interval",parentResetPath:"configuration.idle_timeout",show:this.getPlayerOption("time.idle_timeout.show"),edit:this.getPlayerOption("time.idle_timeout.edit"),value:this.getInputStateByType("idle_timeout")},assessIdleTimeoutCountdown:{selector:"assessIdleTimeoutCountdown",path:"configuration.idle_timeout.countdown_time",show:this.getPlayerOption("time.idle_timeout.show")&&this.getPlayerOption("time.idle_timeout.countdown_time.show"),edit:s,value:{enabled:!a().isUndefined(o),inputValue:o||60}},assessLimitType:{selector:"assessLimitType",path:"time.limit_type",show:this.getPlayerOption("time.limit_type.show"),edit:this.getPlayerOption("time.limit_type.edit"),value:u}}}},{key:"getPlaybackSettingsConfig",value:function(){var e=this.props.config,t="config.activity_edit.player",n=a().getNested(e,"ignore_question_attributes")||[];return{show:a().getNested(this.props.initOptions,"".concat(t,".playback.show")),assessShuffleItems:{selector:"assessShuffle",path:"configuration.shuffle_items",show:this.getPlayerOption("playback.shuffle_items.show"),edit:this.getPlayerOption("playback.shuffle_items.edit"),value:a().getNested(e,"configuration.shuffle_items")||!1},assessScrollToTop:{selector:"assessScrollToTop",path:"navigation.scroll_to_top",show:this.getPlayerOption("playback.scroll_to_top.show"),edit:this.getPlayerOption("playback.scroll_to_top.edit"),value:!1!==a().getNested(e,"navigation.scroll_to_top")},assessScrollingIndicator:{selector:"assessScrollingIndicator",path:"navigation.scrolling_indicator",show:a().getNested(this.props.initOptions,"".concat(t,".playback.scrolling_indicator.show")),edit:this.getPlayerOption("playback.scrolling_indicator.edit"),value:a().getNested(e,"navigation.scrolling_indicator")||!1},assessShowAcknowledgements:{selector:"assessShowAcknowledgements",path:"navigation.show_acknowledgements",show:this.getPlayerOption("playback.show_acknowledgements.show"),edit:this.getPlayerOption("playback.show_acknowledgements.edit"),value:a().getNested(e,"navigation.show_acknowledgements")||!1},assessDistractorRationale:{selector:"assessDistractorRationale",show:this.getPlayerOption("playback.distractor_rationale.show"),edit:this.getPlayerOption("playback.distractor_rationale.edit"),value:!n.includes("metadata.distractor_rationale")},assessDistractorRationaleResponse:{selector:"assessDistractorRationaleResponseLevel",show:this.getPlayerOption("playback.distractor_rationale_response_level.show"),edit:this.getPlayerOption("playback.distractor_rationale_response_level.edit"),value:!n.includes("metadata.distractor_rationale_response_level")},assessWarningOnChange:{selector:"assessWarningOnChange",path:"navigation.warning_on_change",show:this.getPlayerOption("playback.warning_on_change.show"),edit:this.getPlayerOption("playback.warning_on_change.edit"),value:a().getNested(e,"navigation.warning_on_change")||!1},assessSubmitCriteria:{selector:"assessSubmitCriteria",path:"configuration.submit_criteria",show:this.getPlayerOption("playback.submit_criteria.show"),edit:this.getPlayerOption("playback.submit_criteria.edit"),value:this.getSubmitCriteriaState()},assessSkipSubmitConfirmation:{selector:"assessSkipSubmitConfirmation",path:"navigation.skip_submit_confirmation",show:this.getPlayerOption("playback.skip_submit_confirmation.show"),edit:this.getPlayerOption("playback.skip_submit_confirmation.edit"),value:!0!==a().getNested(e,"navigation.skip_submit_confirmation"),mirrorValue:!0}}}},{key:"getScoringSettingsConfig",value:function(){var e="config.activity_edit.player",t=a().getNested(this.props.config,"ignore_question_attributes")||[];return{show:a().getNested(this.props.initOptions,"".concat(e,".scoring.show")),assessValidation:{selector:"assessValidation",show:a().getNested(this.props.initOptions,"".concat(e,".scoring.client_side_scoring.show")),edit:a().getNested(this.props.initOptions,"".concat(e,".scoring.client_side_scoring.edit")),value:!t.includes("validation")}}}},{key:"getTextSettingsConfig",value:function(){var e=this.props.config,t="config.activity_edit.player";return{show:a().getNested(this.props.initOptions,"".concat(t,".text.show")),assessFontSize:{selector:"assessFontSize",path:"configuration.fontsize",show:a().getNested(this.props.initOptions,"".concat(t,".text.font_size.show")),edit:a().getNested(this.props.initOptions,"".concat(t,".text.font_size.edit")),value:a().getNested(e,"configuration.fontsize")||"normal"}}}},{key:"getAdministrationSettingsConfig",value:function(){var e=this.getAdminPanelState();return{show:a().getNested(this.props.initOptions,"".concat("config.activity_edit.player",".administration.show")),enabled:e.admin_panel_enabled,assessAdminPassword:{selector:"assessAdminPassword",path:"administration.pwd",edit:e.admin_panel_enabled,value:e.admin_panel.pwd},assessAdminShowExit:{selector:"assessAdminShowExit",path:"administration.options.show_exit",show:this.getPlayerOption("administration.show_exit.show"),edit:this.getPlayerOption("administration.show_exit.edit")&&e.admin_panel_enabled,value:e.admin_panel.options.show_exit},assessAdminShowExtend:{selector:"assessAdminShowExtend",path:"administration.options.show_extend",show:this.getPlayerOption("administration.show_extend.show"),edit:this.getPlayerOption("administration.show_extend.edit")&&e.admin_panel_enabled,value:e.admin_panel.options.show_extend},assessAdminShowSave:{selector:"assessAdminShowSave",path:"administration.options.show_save",show:this.getPlayerOption("administration.show_save.show"),edit:this.getPlayerOption("administration.show_save.edit")&&e.admin_panel_enabled,value:e.admin_panel.options.show_save}}}},{key:"getTimeSection",value:function(e){var t=this,n=!(a().getNested(e.assessWarningTime,"show")||a().getNested(e.assessReadingModeWarningTime,"show")||a().getNested(e.assessReadingModeFirstItemOnReadingTimeCompletion,"show")||a().getNested(e.assessAutoSave,"show")||a().getNested(e.assessAutoSaveUI,"show")||a().getNested(e.assessAutoSaveDisableForceSaveOnQuit,"show")||a().getNested(e.assessIdleTimeout,"show")||a().getNested(e.assessIdleTimeoutCountdown,"show")||a().getNested(e.assessLimitType,"show"));if(a().isEmpty(e)||!e.show||n)return null;var r="hard",i=this.context.i18n,o=this.isTimeDisabled("time.max_time"),s=a().getNested(e.assessLimitType,"show");return zt.createElement("div",{className:"lrn-author-settings-divider"},zt.createElement("h3",{className:"lrn-h3"},i.get("assessPlayerTimeSettings")),zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-5"},zt.createElement("label",{className:"lrn-form-label-name"},i.get("assessActivityTime"))),zt.createElement("div",{className:"lrn-col-xs-2"}),zt.createElement("div",{className:"lrn-col-xs-5"},zt.createElement("label",{className:"lrn-form-label-name"},i.get("assessReadingTime")))),zt.createElement("div",{className:"lrn-activity-label-grey lrn-author-flex"},zt.createElement(hE,{onHoursChange:this.convertTimeToSeconds.bind(this,"activity_time_hours"),hours:this.state.activity_time_hours,onMinsChange:this.limitMinutes.bind(this,"activity_time_mins"),mins:this.state.activity_time_mins}),zt.createElement("div",{className:"lrn-col-xs-2"}),zt.createElement(hE,{onHoursChange:this.convertTimeToSeconds.bind(this,"reading_time_hours"),hours:this.state.reading_time_hours,onMinsChange:this.limitMinutes.bind(this,"reading_time_mins"),mins:this.state.reading_time_mins})),this.getCheckboxWithInput(e.assessWarningTime),this.getCheckboxWithInput(e.assessReadingModeWarningTime),this.getCheckbox(e.assessReadingModeFirstItemOnReadingTimeCompletion),this.getCheckboxWithInput(e.assessAutoSave),zt.createElement("div",{className:"lrn-author-settings-nested"},this.getCheckbox(e.assessAutoSaveUI),this.getCheckbox(e.assessAutoSaveDisableForceSaveOnQuit)),this.getCheckboxWithInput(e.assessIdleTimeout),zt.createElement("div",{className:"lrn-author-settings-nested"},this.getCheckboxWithInput(e.assessIdleTimeoutCountdown)),s&&zt.createElement(Bl,{selector:e.assessLimitType.selector,value:i.get(e.assessLimitType.selector),onChange:function(n){t.props.changeProperty(e.assessLimitType.path,n.currentTarget.checked?r:void 0,!1,o||!e.assessLimitType.edit)},checked:a().getNested(this.props.config,"time.limit_type")===r,disabled:o||!e.assessLimitType.edit}))}},{key:"getPlaybackSection",value:function(e){var t=!(a().getNested(e.assessShuffleItems,"show")||a().getNested(e.assessScrollToTop,"show")||a().getNested(e.assessScrollingIndicator,"show")||a().getNested(e.assessShowAcknowledgements,"show")||a().getNested(e.assessDistractorRationale,"show")||a().getNested(e.assessDistractorRationaleResponse,"show")||a().getNested(e.assessWarningOnChange,"show")||a().getNested(e.assessSubmitCriteria,"show")||a().getNested(e.assessSkipSubmitConfirmation,"show"));if(a().isEmpty(e)||!e.show||t)return null;var n=this.props,r=this.context.i18n;return zt.createElement("div",{className:"lrn-author-settings-divider"},zt.createElement("h3",{className:"lrn-h3"},r.get("assessPlayerPlaybackSettings")),this.getCheckbox(e.assessShuffleItems),this.getCheckbox(e.assessScrollToTop),this.getCheckbox(e.assessScrollingIndicator),this.getCheckbox(e.assessShowAcknowledgements),e.assessDistractorRationale.show&&zt.createElement(Bl,{selector:"assessDistractorRationale",value:r.get("assessDistractorRationale"),onChange:function(){return n.updateIgnoreQuestionAttributes("ignore_question_attributes",e.assessDistractorRationale.value,"metadata.distractor_rationale",!e.assessDistractorRationale.edit)},checked:e.assessDistractorRationale.value,disabled:!e.assessDistractorRationale.edit}),e.assessDistractorRationaleResponse.show&&zt.createElement(Bl,{selector:"assessDistractorRationaleResponseLevel",value:r.get("assessDistractorRationaleResponseLevel"),onChange:function(){return n.updateIgnoreQuestionAttributes("ignore_question_attributes",e.assessDistractorRationaleResponse.value,"metadata.distractor_rationale_response_level",!e.assessDistractorRationaleResponse.edit)},checked:e.assessDistractorRationaleResponse.value,disabled:!e.assessDistractorRationaleResponse.edit}),this.getCheckbox(e.assessWarningOnChange),this.getSubmitCriteriaOption(e.assessSubmitCriteria),this.getCheckbox(e.assessSkipSubmitConfirmation))}},{key:"getScoringSection",value:function(e){if(a().isEmpty(e)||!e.show||!a().getNested(e.assessValidation,"show"))return null;var t=this.props,n=this.context.i18n;return zt.createElement("div",{className:"lrn-author-settings-divider"},zt.createElement("h3",{className:"lrn-h3"},n.get("assessPlayerScoringSettings")),e.assessValidation.show&&zt.createElement(Bl,{selector:"assessValidation",value:n.get("assessValidation"),onChange:function(){return t.updateIgnoreQuestionAttributes("ignore_question_attributes",e.assessValidation.value,"validation",!e.assessValidation.edit)},checked:e.assessValidation.value,disabled:!e.assessValidation.edit}))}},{key:"getTextSection",value:function(e){var t=this,n=a().getNested(this.props.initOptions,"config.activity_edit.override_labels.enable"),r=!n&&!a().getNested(e.assessFontSize,"show");if(a().isEmpty(e)||!e.show||r)return null;var i=this.context.i18n,o=e.assessFontSize,s=[{value:"small",text:i.get("assessFontSizeSmall")},{value:"normal",text:i.get("assessFontSizeNormal")},{value:"large",text:i.get("assessFontSizeLarge")},{value:"xlarge",text:i.get("assessFontSizeXLarge")},{value:"xxlarge",text:i.get("assessFontSizeXXLarge")}];return zt.createElement("div",{className:"lrn-author-settings-divider"},zt.createElement("h3",{className:"lrn-h3"},i.get("assessPlayerTextSettings")),o.show&&zt.createElement(zt.Fragment,null,zt.createElement("h3",{className:"lrn-author-settings-subtitle"},i.get("assessFontSizeLabel")),zt.createElement("h4",{className:"lrn-author-settings-description"},i.get("assessFontSizeDescription")),zt.createElement("div",{className:"lrn-row lrn-form-group"},zt.createElement("div",{className:"lrn-col-xs-12 lrn-col-sm-6"},zt.createElement(Hs,{options:s,inputDataAuthorApiSelector:o.selector,value:o.value,onChange:function(e){t.props.changeProperty("".concat(o.path),e.currentTarget.value,!1,!o.edit)},disabled:!o.edit,flushBottom:!0})))),n&&zt.createElement(zt.Fragment,null,zt.createElement("div",{className:"lrn-form-group"},zt.createElement("h3",{className:"lrn-author-settings-subtitle"},i.get("activityCustomizeLabelsLabel")),zt.createElement("h4",{className:"lrn-author-settings-description"},i.get("activityCustomizeLabelsDescription")),zt.createElement("span",{className:"lrn-btn lrn-btn-primary lrn-author-customize-labels",onClick:function(){return t.props.setEditModeToCustomizeLabels()}},zt.createElement("label",null,i.get("activityCustomizeLabels"))))))}},{key:"getAdministrationSection",value:function(e){var t=this;if(a().isEmpty(e)||!e.show)return null;var n=this.context.i18n,r={pwd:e.assessAdminPassword.value,options:{show_exit:e.assessAdminShowExit.value,show_extend:e.assessAdminShowExtend.value,show_save:e.assessAdminShowSave.value}},i=e.assessAdminPassword.edit?"":"lrn-author-settings-disabled",o=e.enabled?"":"lrn-author-settings-generate-button",s="lrn-form-control lrn-author-checkbox-inline-input ".concat(i),l=e.assessAdminShowExit.show||e.assessAdminShowExtend.show||e.assessAdminShowSave.show;return zt.createElement("div",{className:"lrn-author-settings-divider"},zt.createElement("h3",{className:"lrn-h3"},n.get("assessPlayerAdministrationSettings")),e.show&&zt.createElement(zt.Fragment,null,zt.createElement(Bl,{className:"lrn-author-checkbox-inline",selector:"assessAdminPanel",value:n.get("assessAdminPanel"),onChange:function(e){t.props.changeProperty("administration",e.currentTarget.checked?r:void 0,!1,!1)},checked:e.enabled}),zt.createElement("div",{className:"lrn-author-settings-nested"},zt.createElement("h4",{className:"lrn-author-settings-description"},n.get("assessAdminPanelDescription")),zt.createElement("h3",{className:"lrn-author-settings-subtitle-sm"},n.get("assessAdminPasswordLabel")),zt.createElement("div",{className:"lrn-author-settings-admin-pwd-container"},zt.createElement("input",{className:s,"data-authorapi-selector":e.assessAdminPassword.selector,value:e.assessAdminPassword.value,type:"text",onChange:function(n){t.props.changeProperty(e.assessAdminPassword.path,n.currentTarget.value,!1,!1)},disabled:!e.assessAdminPassword.edit}),zt.createElement("button",{className:"lrn-btn lrn-btn-primary lrn-author ".concat(o),disabled:!e.enabled||!e.assessAdminPassword.value,onClick:function(){return t.hashPassword(e.assessAdminPassword)}},zt.createElement("label",null,n.get("assessAdminPasswordButton")))),l&&zt.createElement("h3",{className:"lrn-author-settings-subtitle-lg"},n.get("assessAdminOptionsLabel")),this.getCheckbox(e.assessAdminShowSave),this.getCheckbox(e.assessAdminShowExit),this.getCheckbox(e.assessAdminShowExtend))))}},{key:"render",value:function(){var e=this,t=this.props,n=this.props.config,r=this.context.i18n,i=a().getNested(this.props.initOptions,"config.activity_edit.player_template_builder.show"),o=this.getTimeBasedSettingsConfig(),s=this.getPlaybackSettingsConfig(),l=this.getScoringSettingsConfig(),u=this.getTextSettingsConfig(),c=this.getAdministrationSettingsConfig(),d=this.getTimeSection(o),f=this.getPlaybackSection(s),p=this.getScoringSection(l),h=this.getTextSection(u),m=this.getAdministrationSection(c);return zt.createElement("div",{className:"lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12"},zt.createElement("div",{className:"lrn-form-group"},zt.createElement("label",{className:"lrn-form-label-name"},r.get("assessTitle")),zt.createElement("input",{className:"lrn-form-control",type:"text",onBlur:function(e){return t.changeProperty("title",e.target.value)},defaultValue:n.title})))),zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12"},zt.createElement("div",{className:"lrn-form-group"},zt.createElement("label",{className:"lrn-form-label-name"},r.get("assessSubtitle")),zt.createElement("input",{className:"lrn-form-control",type:"text",onBlur:function(e){return t.changeProperty("subtitle",e.target.value)},defaultValue:n.subtitle})))),zt.createElement(fE,null),zt.createElement("div",{className:"lrn-form-inline"},zt.createElement("div",{className:"lrn-form-group"},i&&zt.createElement("div",{className:"lrn-form-group lrn-author-tb-button-wrapper"},this.getTemplateBuilderFontPreloadElement(),zt.createElement(Dw,{onClick:function(){return e.props.setEditModeToPlayerTemplates()}}),zt.createElement("span",{className:"lrn-author-tb-create-button-description"},r.get("playerTemplateCreateButtonDescription"))))),d,f,h,m,p)}},{key:"getTemplateBuilderFontPreloadElement",value:function(){return zt.createElement(zt.Fragment,null,zt.createElement("button",{className:"lrn_btn lrn-author-tb-element-icon item-prev lrn-hide"}))}}])&&gE(t.prototype,n),r&&gE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);SE.propTypes={config:jn().object,initOptions:jn().object},SE.contextTypes={i18n:jn().object};const xE=Ln((function(e){return{config:e.activityEdit.activityJson.data&&e.activityEdit.activityJson.data.config||{},initOptions:e.initOptions||{},isSaved:e.activityEdit.isSaved,settingsUiState:e.activityEdit.settingsUiState}}),(function(e){return{setEditModeToCustomizeLabels:function(){e(Cm("customize_labels"))},setEditModeToPlayerTemplates:function(){e(Cm("player_templates"))},changeProperty:function(t,n,r,i){i||e(Uv.createUpdateActivity({field:"data.config.".concat(t),value:n,doNotExtend:r}))},updateIgnoreQuestionAttributes:function(t,n,r,i){i||e(Uv.createUpdateActivityIgnoreQuestionAttributes({field:"data.config.".concat(t),setValue:n,value:r}))}}}))(SE);var kE=__webpack_require__(23326),TE=__webpack_require__.n(kE),OE=__webpack_require__(66081),CE=__webpack_require__.n(OE);const AE=function(e){return{type:op,data:{source:e}}};const PE=function(e,t){return function(n,r){n(AE(e));var i={activityId:t,payload:{items:e.items}},o=r();n(th(i));var s=a().getNested(e,"config.navigation.resource_items"),l=Ah(o);if(s&&s.length){var u={activityId:t,payload:{items:[s[0]]}};n(eh(u))}else l&&n(Uv.resetResourceItem())}};function ME(e){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LE(e,t){return(LE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jE(e);if(t){var i=jE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return IE(this,n)}}function IE(e,t){if(t&&("object"===ME(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LE(e,t)}(o,e);var t,n,r,i=NE(o);function o(){return DE(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"updateCodeMirror",value:function(){var e=ki.Z.stringify(a().getNested(this.props,"activity.data")||{});this.codeMirror&&(this.codeMirror.setValue(CE()(e)),this.codeMirror.refresh())}},{key:"componentDidMount",value:function(){this.codeMirror||(this.codeMirror=TE().fromTextArea(this.textareaElement,{mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0})),this.updateCodeMirror(),this.registerCodeMirrorChangeListener()}},{key:"componentDidUpdate",value:function(e){ki.Z.stringify(a().getNested(this.props,"activity.data")||{})!==ki.Z.stringify(a().getNested(e,"activity.data")||{})&&this.updateCodeMirror(),this.props.enableSource||this.registerCodeMirrorChangeListener()}},{key:"componentWillUnmount",value:function(){this.props.enableSource&&this.props.changeEnabledState("okButton")}},{key:"registerCodeMirrorChangeListener",value:function(){var e=this;this.codeMirror.on("change",(function t(){e.codeMirror.off("change",t),e.props.changeEnabledState("okButton")}))}},{key:"handleOk",value:function(){var e=this.getAndValidateJsonData();e.alertMessage?alert(e.alertMessage):e.confirmMessage&&!confirm(e.confirmMessage)||(this.props.updateDraftActivity(e.data,this.props.activity.activity_id),this.props.changeEnabledState("okButton"))}},{key:"getAndValidateJsonData",value:function(){var e,t=this.context.i18n;try{e=ki.Z.parse(this.codeMirror.getValue())}catch(e){return{alertMessage:t.get("activitySourceError")}}return e.items=e.items||[],a().contains(["assess","inline"],e.rendering_type)?void 0!==a().getNested(this.props,"activity.data.adaptive")&&void 0===e.adaptive?{confirmMessage:t.get("activitySourceMissingAdaptiveError"),data:e}:{data:e}:{alertMessage:t.get("activitySourceRenderingTypeError")}}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=zt.createElement(Ar,{onClick:this.handleOk.bind(this),size:"large",color:"primary",dataAuthorApiSelector:"activity-source-okay",disabled:!this.props.enableSource,lds:this.props.lds},t.get("editorLayoutApply")),r=zt.createElement("div",{className:"lrn-author-ui-no-preview"},n);return zt.createElement("div",{className:"lrn-activity-source"},zt.createElement("div",{className:"lrn-activity-source-wrapper",dir:"ltr"},zt.createElement("textarea",{ref:function(t){return e.textareaElement=t},"data-authorapi-selector":"activity-source-textarea"})),zt.createElement("div",{className:"lrn-modal-footer",style:{maxWidth:"550px",marginLeft:"auto",marginRight:"auto"}},this.props.lds?r:n))}}])&&RE(t.prototype,n),r&&RE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);BE.contextTypes={i18n:jn().object};const FE=Ln((function(e){return{enableSource:a().getNested(e,"activityEdit.sourceUiState.okButton.enabled")||!1,lds:e.initOptions.config.beta_flags.lds,resourceItem:Ah(e)}}),(function(e){return{updateDraftActivity:function(t,n){return e(PE(t,n))},changeEnabledState:function(t){e(Uv.createUpdateButtonState({button:t,stateType:"enabled",toggleState:!0,stateValue:!1,editorType:"source"}))}}}))(BE);function YE(e){return(YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HE(Object(n),!0).forEach((function(t){qE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zE(e,t){return(zE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KE(e);if(t){var i=KE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $E(this,n)}}function $E(e,t){if(t&&("object"===YE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function KE(e){return(KE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zE(e,t)}(o,e);var t,n,r,i=GE(o);function o(){return UE(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"updateCodeMirror",value:function(){var e=ki.Z.stringify(a().getNested(this.props,"activity.data.adaptive")||{});this.codeMirror&&(this.codeMirror.setValue(CE()(e)),this.codeMirror.refresh())}},{key:"componentDidMount",value:function(){this.codeMirror||(this.codeMirror=TE().fromTextArea(this.textareaElement,{mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0})),this.updateCodeMirror(),this.registerCodeMirrorChangeListener()}},{key:"componentDidUpdate",value:function(e){ki.Z.stringify(a().getNested(this.props,"activity.data.adaptive")||{})!==ki.Z.stringify(a().getNested(e,"activity.data.adaptive")||{})&&this.updateCodeMirror(),this.props.enableAdaptive||this.registerCodeMirrorChangeListener()}},{key:"componentWillUnmount",value:function(){this.props.enableAdaptive&&this.props.changeEnabledState("okButton")}},{key:"registerCodeMirrorChangeListener",value:function(){var e=this;this.codeMirror.on("change",(function t(){e.codeMirror.off("change",t),e.props.changeEnabledState("okButton")}))}},{key:"handleOk",value:function(){var e=this.context.i18n,t=this.getJsonData();this.props.changeEnabledState("okButton");var n=VE(VE({},this.props.activity.data),{},{adaptive:t.data||{}});if(!t.containsError)return this.props.updateDraftActivity(n),void this.updateCodeMirror();t.errorMessage?alert(t.errorMessage):alert(e.get("activitySourceError"))}},{key:"getJsonData",value:function(){var e=!1;if(!this.codeMirror.getValue().trim())return{containsError:!1,data:{}};try{e=ki.Z.parse(this.codeMirror.getValue())}catch(e){return{containsError:!0}}return{containsError:!1,data:e}}},{key:"render",value:function(){var e=this,t=this.context.i18n;return zt.createElement("div",{className:"lrn-activity-source"},zt.createElement("div",{className:"lrn-activity-source-wrapper"},zt.createElement(gg,{type:"info"},t.get("activityEditAdaptiveConfigurationMessage")),zt.createElement("div",{dir:"ltr"},zt.createElement("textarea",{ref:function(t){return e.textareaElement=t},"data-authorapi-selector":"activity-source-textarea"}))),zt.createElement("div",{className:"lrn-modal-footer",style:{maxWidth:"550px",marginLeft:"auto",marginRight:"auto"}},zt.createElement("button",{onClick:this.handleOk.bind(this),type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-lg","data-authorapi-selector":"activity-source-okay",disabled:!this.props.enableAdaptive},t.get("adaptiveTabApplyButtonLabel"))))}}])&&WE(t.prototype,n),r&&WE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);ZE.contextTypes={i18n:jn().object};const JE=Ln((function(e){return{enableAdaptive:a().getNested(e,"activityEdit.adaptiveUiState.okButton.enabled")||!1}}),(function(e){return{updateDraftActivity:function(t){e(AE(t))},changeEnabledState:function(t){e(Uv.createUpdateButtonState({button:t,stateType:"enabled",toggleState:!0,stateValue:!1,editorType:"adaptive"}))}}}))(ZE);const QE=Ln((function(e,t){return{activeTab:a().getNested(e,"ui.tab.".concat(t.tabBarId,".activeTabName"))||t.defaultTab}}),(function(e,t){return{onClick:function(n,r){if(t.locationData)e(yh(t.locationData,!1));else{var i=r.currentTarget;if(!(i instanceof HTMLElement))return;var o=i.attributes.getNamedItem("data-tab-id"),s="";if(o)s=o.value;else{var l=a().getNested(i,"parentNode.parentNode");l.parentNode instanceof HTMLElement&&(s=l.attributes.getNamedItem("data-tab-id").value)}s!==n&&e(am(t.tabBarId,s))}}}}))((function(e){var t=e.activeTab===e.tabId,n=e.tabId,r=e.tabLabel,i="lrn-i ".concat(e.tabIcon," lrn-i-size-xs lrn-i-top-none"),o=e.tooltip,s=e.isDirty,l=a().classNames({"lrn-author-tab":!0,active:t});return zt.createElement("li",{role:"tab",className:l,"aria-selected":t},zt.createElement("a",{className:"lrn-author-tab-link",onClick:function(t){return e.onClick(e.activeTab,t)},"data-tab-id":n,"data-toggle":"tab","aria-label":r},zt.createElement("div",{className:"lrn-search-small","data-authorapi-tooltip":o},zt.createElement("span",{className:i}),s&&zt.createElement("div",{className:"lrn-author-settings-tab-circle"})),zt.createElement("div",{className:"lrn-author-tab-header"},zt.createElement("span",{className:"lrn-author-button-text"},e.children),s&&zt.createElement("div",{className:"lrn-author-settings-tab-circle"}))),zt.createElement("span",{className:"lrn-active-tab-marker"}))}));const XE=function(e){return zt.createElement("ul",{className:"lrn-author-nav lrn-author-nav-tabs lrn-author-ui-no-preview",ref:e.tabBarRef},e.children)};function eS(e){return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nS(e,t){return(nS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oS(e);if(t){var i=oS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iS(this,n)}}function iS(e,t){if(t&&("object"===eS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oS(e){return(oS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nS(e,t)}(o,e);var t,n,r,i=rS(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props.activeTab===this.props.tabId,n=t?"active":"";return t||this.props.alwaysShow?zt.createElement("div",{style:t?{}:{display:"none"},"data-tab-content":this.props.tabId,className:"tab-pane "+n,ref:function(t){e.props.container&&(e.props.container[e.props.position]=t)}},this.props.children):null}}])&&tS(t.prototype,n),r&&tS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const sS=Ln((function(e,t){return{activeTab:a().getNested(e,"ui.tab.".concat(t.tabBarId,".activeTabName"))||t.defaultTab}}))(aS);const lS=function(e){return zt.createElement("div",{className:"tab-content clearfix"},e.children)};function uS(e){return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dS(e,t){return(dS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hS(e);if(t){var i=hS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pS(this,n)}}function pS(e,t){if(t&&("object"===uS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hS(e){return(hS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const mS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dS(e,t)}(o,e);var t,n,r,i=fS(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,e,t),a().isFunction(n._setupStore)&&n._setupStore(),n}return t=o,(n=[{key:"_setupStore",value:function(){}}])&&cS(t.prototype,n),r&&cS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function gS(e,t,n){var r;return r=n?n+t[0].toUpperCase()+t.substring(1):t,e.get(r)}var yS="FETCH_TAG_SUGGESTIONS_LOADED",vS="FETCH_TAG_SUGGESTIONS_LOADING",bS="HIDE_TAG_SUGGESTIONS",_S="SET_TAGS",wS="SET_VISIBILITY_FLAG",ES="TAG_SEARCH_CHANGE";const SS=function(e){return{type:ES,data:e}};const xS=function(e){return{type:_S,data:e}};const kS=function(){return{type:bS}};function TS(e){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CS(e,t){return(CS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=MS(e);if(t){var i=MS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return PS(this,n)}}function PS(e,t){if(t&&("object"===TS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function MS(e){return(MS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DS="lrn-author-tag-suggestion";const RS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CS(e,t)}(o,e);var t,n,r,i=AS(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"handleTagSuggestedKeydown",value:function(e){var t=e.target.parentElement,n=t.previousElementSibling.className!==DS,r=a().isNull(t.nextElementSibling);40!==e.keyCode||r?38!==e.keyCode||n||t.previousElementSibling.firstChild.focus():t.nextElementSibling.firstChild.focus()}},{key:"render",value:function(){var e=this,t=this.props.tag.name,n=this.props.tag.type,r=this.props.tag.description;return zt.createElement("li",{className:DS},zt.createElement("button",{className:"lrn-author-tag-suggestion-button",onClick:function(){return e.props.onClick(e.props.tag)},onTouchStart:function(){return e.props.onTouchStart(e.props.tag)},onKeyDown:this.handleTagSuggestedKeydown.bind(this)},zt.createElement("h5",null,n,": ",t),r&&zt.createElement("p",null," ",r," ")))}}])&&OS(t.prototype,n),r&&OS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function LS(e){return(LS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IS(e,t){return(IS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=YS(e);if(t){var i=YS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BS(this,n)}}function BS(e,t){if(t&&("object"===LS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FS(e)}function FS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YS(e){return(YS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}(o,e);var t,n,r,i=jS(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e))._boundOnKeyDown=t._onKeyDown.bind(FS(t)),t._boundOnOutsideClick=t._onOutsideClick.bind(FS(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this._boundOnKeyDown),document.addEventListener("mousedown",this._boundOnOutsideClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._boundOnKeyDown),document.removeEventListener("mousedown",this._boundOnOutsideClick)}},{key:"_onOutsideClick",value:function(e){this.props.tagSuggestionsVisible&&this.tagSuggestionWrapperElement&&!this.tagSuggestionWrapperElement.contains(e.target)&&this.props.hideSuggestions()}},{key:"_onKeyDown",value:function(e){27===e.keyCode&&this.props.tagSuggestionsVisible&&(e.stopPropagation(),this.props.hideSuggestions())}},{key:"_handleTagSuggestedClick",value:function(e){this.props.setTags(this.props.tags.concat(e))}},{key:"_renderTagSuggestions",value:function(){var e=this,t=this.props.tagSuggestions,n=[];return a().each(t,(function(t){t.name&&n.push(zt.createElement(RS,{key:"".concat(t.type,"_").concat(t.name,"_suggestion"),tag:t,onClick:function(t){return e._handleTagSuggestedClick(t)},onTouchStart:function(t){return e._handleTagSuggestedClick(t)}}))})),n}},{key:"_renderNoSuggestions",value:function(){var e=gS(this.context.i18n,"taggingSuggestionsEmpty",this.props.labelPrefix);return zt.createElement("li",{className:"lrn-author-tag-no-suggestions",key:"suggestion_empty_state"},zt.createElement("h5",null,e))}},{key:"_renderSuggestionsTitle",value:function(){var e=gS(this.context.i18n,"taggingSuggestionsTitle",this.props.labelPrefix);return zt.createElement("li",{className:"lrn-author-tag-suggestions-title",key:"suggestion_title"},zt.createElement("h6",null,e))}},{key:"render",value:function(){var e=this,t=["lrn-author-settings-tag-search-suggestions"];return this.props.tagSuggestionsVisible||t.push("hidden"),zt.createElement("div",{ref:function(t){return e.tagSuggestionWrapperElement=t},className:a().classNames(t)},zt.createElement("ul",{className:"lrn-author-tag-suggestion-list"},a().isEmpty(this.props.tagSuggestions)?this._renderNoSuggestions():this._renderSuggestionsTitle(),this._renderTagSuggestions()))}}])&&NS(t.prototype,n),r&&NS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);HS.contextTypes={i18n:jn().object};const VS=Ln((function(e){return{tagSuggestions:e.tagSuggestions.list,tags:e.tags.list,tagSuggestionsVisible:e.tagSuggestions.visible,labelPrefix:e.labelPrefix}}),{setTags:xS,hideSuggestions:kS})(HS);function qS(e){return(qS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function US(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WS(e,t){return(WS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$S(e);if(t){var i=$S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GS(this,n)}}function GS(e,t){if(t&&("object"===qS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $S(e){return($S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KS="lrn-author-settings-tag-search",ZS="focus",JS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WS(e,t)}(o,e);var t,n,r,i=zS(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={isFocused:!1},t}return t=o,(n=[{key:"componentDidUpdate",value:function(e){!e.isVisible&&this.props.isVisible&&(this.setState({isFocused:!0}),this.input&&this.input.focus())}},{key:"handleInputFocus",value:function(){this.setState({isFocused:!0})}},{key:"handleInputBlur",value:function(){this.setState({isFocused:!1})}},{key:"handleInputChange",value:function(e){this.props.tagSearchChange(e.target.value)}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=[KS];this.state.isFocused&&n.push(ZS);var r=this.props.isLoadingSuggestions?zt.createElement("span",{className:"lrn-loading-icon"},zt.createElement("span",{className:"lrn-img-loading-spinner"})):zt.createElement("span",{className:"lrn-i-search"});return zt.createElement("div",{className:a().classNames(n)},r,zt.createElement("input",{type:"text",placeholder:gS(t,"taggingSearchPlaceholder",this.props.labelPrefix),onChange:this.handleInputChange.bind(this),onClick:this.handleInputFocus.bind(this),onBlur:this.handleInputBlur.bind(this),value:this.props.tagSearchValue,maxLength:255,ref:function(t){e.input=t},autoFocus:!0,"data-authorapi-selector":"tag-search-input"}),zt.createElement(VS,null))}}])&&US(t.prototype,n),r&&US(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);JS.contextTypes={i18n:jn().object};const QS=function(e){return Ln((function(e){return{isLoadingSuggestions:e.tagSuggestions.isLoading,tagSearchValue:e.tagSuggestions.tagSearchValue,isVisible:e.isVisible,labelPrefix:e.labelPrefix}}),{tagSearchChange:SS})(e)}(JS);var XS=["type"];function ex(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tx(e){return(tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ix(e,t){return(ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ox(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sx(e);if(t){var i=sx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ax(this,n)}}function ax(e,t){if(t&&("object"===tx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sx(e){return(sx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ix(e,t)}(o,e);var t,n,r,i=ox(o);function o(){return nx(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleTagDelete",value:function(e){var t=a().reject(this.props.tags,(function(t){return t.type===e.type&&t.name===e.name}));this.props.createSetTags(t)}},{key:"handleTagFocus",value:function(){this.props.hideSuggestions()}},{key:"getTags",value:function(){var e=this,t=[],n=function(e){var t=[];return(t=e.slice().sort((function(e,t){return e.type.toLowerCase()>t.type.toLowerCase()?1:-1}))).forEach((function(e){e.tags.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}))})),t}(function(e){var t=[],n={};return e.forEach((function(e){var t=e.type,r=ex(e,XS);t&&r.name&&(n[t]||(n[t]=[]),n[t].push(r))})),a().each(n,(function(e,n){var r={type:n,tags:[]};e.forEach((function(e){r.tags.push(e)})),t.push(r)})),t}(this.props.tags));return a().each(n,(function(n){var r=[];n.tags.forEach((function(t){var i={type:n.type,name:t.name},o=a().isEmpty(t.description)?void 0:t.description;r.push(zt.createElement("li",{className:"lrn-author-settings-tag",key:"".concat(t.name,"_tag")},zt.createElement("span",{"data-authorapi-selector":"lrn-author-settings-tags-label","data-authorapi-tooltip":o},t.name),e.props.isEditable&&zt.createElement("button",{onClick:function(){return e.handleTagDelete(i)},onFocus:function(){return e.handleTagFocus()}},zt.createElement("span",{className:"lrn-i-cross"}))))})),t.push(zt.createElement("li",{className:"lrn-author-settings-tag-types",key:"".concat(n.type,"_tag")},zt.createElement("h3",{"data-authorapi-selector":"lrn-author-settings-tag-type"},n.type),zt.createElement("ul",null,r)))})),t}},{key:"render",value:function(){var e=this.context.i18n,t=this.getTags();return a().isEmpty(t)?zt.createElement("div",{className:"lrn-author-setting-no-tags"},zt.createElement("h3",null,gS(e,"taggingEmptyState",this.props.labelPrefix)),zt.createElement("span",{className:"lrn-img-no-tags"})):zt.createElement("div",{className:"lrn-author-settings-tags-container"},zt.createElement("div",{className:"lrn-author-settings-tags"},zt.createElement("label",{className:"lrn-form-label-name"},gS(e,"taggingTagsLabel",this.props.labelPrefix)),zt.createElement("ul",null,t)))}}])&&rx(t.prototype,n),r&&rx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);lx.contextTypes={i18n:jn().object};const ux=Ln((function(e){return{tags:e.tags.list,labelPrefix:e.labelPrefix,isEditable:e.isEditable}}),{createSetTags:xS,hideSuggestions:kS})(lx);function cx(e){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function px(e,t){return(px=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gx(e);if(t){var i=gx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mx(this,n)}}function mx(e,t){if(t&&("object"===cx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gx(e){return(gx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}(o,e);var t,n,r,i=hx(o);function o(){return dx(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n;return zt.createElement("div",{className:"lrn-author-settings-tags-wrapper"},this.props.isEditable&&zt.createElement("div",{className:"lrn-author-settings-tag-search-section"},zt.createElement("label",{className:"lrn-form-label-name"},gS(e,"taggingInputLabel",this.props.labelPrefix)),zt.createElement(QS,null)),zt.createElement(ux,null))}}])&&fx(t.prototype,n),r&&fx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);yx.contextTypes={i18n:jn().object};const vx=Ln((function(e){return{labelPrefix:e.labelPrefix,isEditable:e.isEditable}}))(yx);const bx=Io({tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===_S?a().deepExtend({},e,{list:t.data}):e},tagSuggestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yS:var n=!1;return t.data.suggestionFor!==e.tagSearchValue&&(n=!0),a().deepExtend({},e,{list:t.data.tagSuggestions,isLoading:n,visible:!0});case vS:return a().deepExtend({},e,{list:[],isLoading:!0,visible:!1});case bS:return a().deepExtend({},e,{list:[],isLoading:!1,visible:!1});case _S:return a().deepExtend({},e,{list:[],isLoading:!1,visible:!1,tagSearchValue:""});case ES:return a().deepExtend({},e,{tagSearchValue:t.data});default:return e}},isVisible:function(e,t){return t.type===wS?t.data:e||null},isEditable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},labelPrefix:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e}});var _x=__webpack_require__(14069);__webpack_require__(17073);const wx=function(e){return function(t){return function(n){return function(r){var i=t.getState(),o=n(r),s=t.getState();return e&&!a().isEqual(i.tags.list,s.tags.list)&&e({tags:s.tags.list}),o}}}};const Ex=function(e){return function(t,n,r){r.tagsUtil.fetchSuggestions(e.input,e.options).then((function(e){t(function(e){return{type:yS,data:{tagSuggestions:e.tags,suggestionFor:e.suggestionFor}}}(e))})),t({type:vS})}};const Sx=function(e){return function(t){return function(n){var r=t(n);if(n.type===ES)if(n.data.trim().length>=3){var i=e.getState().tags.list;e.dispatch(Ex({input:n.data,options:{exclude:i}}))}else e.dispatch(kS());return r}}};const xx=function(e){return{type:wS,data:e}};function kx(e){return(kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ox(e,t){return(Ox=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Px(e);if(t){var i=Px(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ax(this,n)}}function Ax(e,t){if(t&&("object"===kx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Px(e){return(Px=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ox(e,t)}(o,e);var t,n,r,i=Cx(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isVisible!==this.props.isVisible&&e.isVisible!==this.store.getState().isVisible&&this.store.dispatch(xx(e.isVisible)),a().isEqual(e.tags,this.props.tags)||a().isEqual(e.tags,this.store.getState().tags.list)||this.store.dispatch(xS(e.tags))}},{key:"_setupStore",value:function(){var e=!!a().isUndefined(this.props.isEditable)||this.props.isEditable,t={tags:{list:this.props.tags},tagSuggestions:{list:[],visible:!1,isLoading:!1,tagSearchValue:""},isVisible:this.props.isVisible,labelPrefix:this.props.labelPrefix||"",isEditable:e};this.store=Lo(bx,t,Fo.apply(null,function(e,t){var n=[_x.Z.withExtraArgument(e),wx(t),Sx];return!!window.MSInputMethodContext&&document.documentMode,n}(this.context.app,this.props.onChangeState)))}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement(vx,null))}},{key:"getData",value:function(){return{tags:this.store.getState().tags.list}}}])&&Tx(t.prototype,n),r&&Tx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);Mx.contextTypes={app:jn().object};const Dx=Mx;function Rx(e,t,n){var r=a().map(t,(function(e){return e.type})),i=a().map(n,(function(e){return e.type}));return a().filter(e,(function(e){var t=!a().contains(r,e.type);return!0!==t||a().isEmpty(i)||(t=a().contains(i,e.type)),t}))}function Lx(e){return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ix(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jx(e,t){return(jx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yx(e);if(t){var i=Yx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fx(this,n)}}function Fx(e,t){if(t&&("object"===Lx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Yx(e){return(Yx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jx(e,t)}(o,e);var t,n,r,i=Bx(o);function o(){return Nx(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"onTagsChange",value:function(e){var t,n;t=this.getFilteredTags(),n=e.tags,t.length===n.length&&t.every((function(e){var t=e.type,r=e.name;return a().find(n,a().matcher({type:t,name:r}))}))||this.props.updateActivity({field:"tags",value:e.tags})}},{key:"getFilteredTags",value:function(){return Rx(this.props.tags,this.context.app.initOptionsModel.getHideTagsConfig(),this.context.app.initOptionsModel.getShowTagsConfig())}},{key:"render",value:function(){return zt.createElement("div",{className:"lrn-author-ui-no-preview lrn-author-settings-details"},zt.createElement("div",{className:"lrn-form-group"},zt.createElement("div",{className:"lrn-form-control-wrapper"},zt.createElement(Dx,{tags:this.getFilteredTags(),onChangeState:this.onTagsChange.bind(this),labelPrefix:"activity",isEditable:this.props.editTags}))))}}])&&Ix(t.prototype,n),r&&Ix(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Hx.contextTypes={i18n:jn().object,app:jn().object};const Vx=function(e){return Ln((function(e){return{tags:e.activityEdit.activityJson.tags,editTags:e.initOptions.config.activity_edit.tags.edit}}),{updateActivity:Uv.createUpdateActivity})(e)}(Hx);function qx(e){return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ux(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zx(e,t){return(zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kx(e);if(t){var i=Kx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $x(this,n)}}function $x(e,t){if(t&&("object"===qx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zx(e,t)}(o,e);var t,n,r,i=Gx(o);function o(){return Ux(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidUpdate",value:function(){this.props.activityLoaded&&ge(".lrn-item-for-activity-list-edit")}},{key:"render",value:function(){var e=this.props.activity||{},t=this.context.i18n,n=a().getNested(e,"data.adaptive"),r=!!n&&a().isJsonObject(n),i=r?"adaptive":"items",o=a().getNested(e,"data.items")||[],s=a().size(o)||a().size(this.props.editingItems)||0,l=Rx(this.props.activity.tags||[],this.context.app.initOptionsModel.getHideTagsConfig(),this.context.app.initOptionsModel.getShowTagsConfig()).length,u=zt.createElement("span",{"data-authorapi-view":"activity-item-count","data-tab-id":"items"},s);return zt.createElement("div",{"data-authorapi-view":"activity-edit"},zt.createElement("div",{className:"lrn-author-ui"},zt.createElement(XE,null,r?zt.createElement(QE,{tabId:"adaptive",tabLabel:"Adaptive Tab",tabIcon:"lrn-i-adaptive",tooltip:t.get("adaptiveButton"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("adaptiveButton")):zt.createElement(QE,{tabId:"items",tabLabel:"Items Tab",tabIcon:"lrn-i-items",tooltip:t.get("activityItems"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("activityItems")," (",u,")"),zt.createElement(QE,{tabId:"settings",tabLabel:"Settings",tabIcon:"lrn-i-cog",tooltip:t.get("settingsButton"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("settingsButton")),zt.createElement(QE,{tabId:"details",tabLabel:"Details Tab",tabIcon:"lrn-i-details",tooltip:t.get("detailsButton"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("detailsButton")),this.props.initOptions.config.activity_edit.tags.show&&zt.createElement(QE,{tabId:"tags",tabLabel:"Tags Tab",tabIcon:"lrn-i-tag",tooltip:t.get("activityTagsButton"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("activityTagsButton")," (",l,")"),this.props.initOptions.config.activity_edit.source&&zt.createElement(QE,{tabId:"source",tabLabel:"Source",tabIcon:"lrn-i-source",tooltip:t.get("sourceButton"),defaultTab:i,tabBarId:"activityEditModeTabBar"},t.get("sourceButton"))),zt.createElement(lS,null,zt.createElement(sS,{tabId:"items",defaultTab:i,tabBarId:"activityEditModeTabBar"},this.props.activityLoaded&&zt.createElement(_w,{activityId:e.activity_id})),zt.createElement(sS,{tabId:"settings",defaultTab:i,tabBarId:"activityEditModeTabBar"},zt.createElement(xE,{activity:e})),zt.createElement(sS,{tabId:"adaptive",defaultTab:i,tabBarId:"activityEditModeTabBar"},zt.createElement("div",{className:"lrn-author-ui-no-preview"},zt.createElement(W_,null),zt.createElement("div",{className:"lrn-author-adaptive-wrapper"},zt.createElement(JE,{activity:e})))),zt.createElement(sS,{tabId:"source",defaultTab:i,tabBarId:"activityEditModeTabBar"},zt.createElement(FE,{activity:e})),zt.createElement(sS,{tabId:"details",defaultTab:i,tabBarId:"activityEditModeTabBar"},zt.createElement(Pb,null)),this.props.initOptions.config.activity_edit.tags.show&&zt.createElement(sS,{tabId:"tags",defaultTab:i,tabBarId:"activityEditModeTabBar"},zt.createElement(Vx,null)))))}}])&&Wx(t.prototype,n),r&&Wx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Zx.contextTypes={i18n:jn().object,app:jn().object};const Jx=Ln((function(e){return{activity:e.activityEdit.activityJson,activityLoaded:e.activityEdit.activityLoaded,editingItems:a().getNested(e,"activityEdit.items.".concat(e.activityEdit.activityJson.activity_id))||[],initOptions:e.initOptions}}))(Zx);function Qx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xx=function(e){return"[".concat("data-authorapi-widget-reference",'="').concat(e,'"]')},ek=function(e){return'[data-lrn-float="'.concat(e,'"]')},tk="question",nk="feature",rk=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._widgets=[],this._eventListeners=new Map,this._questionsApiReady=!1,this._questionsApiInitOptions=t,this._metricsUtil=n,this._promise=null,this._scoringType="per-question",this._rootDomElement=r,this._showCorrectAnswerUpdates=!1,a().each(e.EVENTS,(function(e){i._eventListeners.set(e,[])}))}var t,n,r;return t=e,r=[{key:"_getWidgetType",value:function(e){return"response"===e?tk:nk}},{key:"_isWidgetQuestion",value:function(e){return!!(a().has(e,"widgetType")&&e.widgetType===tk||a().has(e,"widget_type")&&"response"===e.widgetType)}}],(n=[{key:"append",value:function(t){var n=this;this._validate(t);var r=[];a().each(t,(function(t){var i=e._getWidgetType(t.widget_type),o=n._rootDomElement.querySelector(Xx(t.reference)),s=document.createElement("span"),l={trueReference:t.reference,temporaryReference:a().uuid(),json:t.data,isAppended:n._questionsApiReady,isReady:!1,widgetType:i};for(r.push(l);o.firstChild;)o.removeChild(o.firstChild);s.classList.add("learnosity-"+t.widget_type),s.classList.add(i+"-"+l.temporaryReference),o.appendChild(s)})),this._widgets=a().reject(this._widgets,(function(e){return!!a().find(r,(function(t){return t.trueReference===e.trueReference}))})),this._widgets=this._widgets.concat(r),this._questionsApiReady&&r.length&&this._questionsApp.append(this._buildQuestionsOptions(r))}},{key:"remove",value:function(e){this._widgets=a().reject(this._widgets,(function(t){return a().contains(e,t.trueReference)})),this._onQuestionChange()}},{key:"initQuestionsApi",value:function(e,t){var n=this;return t&&(this._scoringType=t),this._promise||(this._promise=new S((function(t){Ld.loadLearnosityApi("questions").then((function(){n._security=e;var r=a().extend({},n._questionsApiInitOptions,n._security),i={readyListener:function(){t(),n._questionsApiReady=!0,n._questionsAppReadyListener()},metricsContext:n._metricsUtil.getContext()};n._questionsApp=window.LearnosityApp.init(r,i)}))}))),this._promise}},{key:"getInstanceIfReady",value:function(){if(this._questionsApiReady)return this._questionsApp}},{key:"showCorrectAnswers",value:function(){this._showCorrectAnswerUpdates=!0,this.validateWithCorrectAnswers()}},{key:"validateWithCorrectAnswers",value:function(){var t=this;a().each(this._widgets,(function(n){e._isWidgetQuestion(n)&&t._questionsApp.question(n.temporaryReference).validate({showCorrectAnswers:!0})}))}},{key:"stopCorrectAnswerUpdates",value:function(){this._showCorrectAnswerUpdates=!1}},{key:"validateQuestions",value:function(e){this._questionsApp.validateQuestions(e)}},{key:"getImageToolHeight",value:function(e){var t=this.getWidgetByTrueReference(e);if(t){var n=document.querySelector(ek(t.temporaryReference));if(n)return n.offsetHeight}return null}},{key:"setImageToolPosition",value:function(e,t){var n=this.getWidgetByTrueReference(e),r=n&&this._questionsApp.feature(n.temporaryReference);r&&r.imageTool&&a().isFunction(r.imageTool.position)&&r.imageTool.position(t)}},{key:"sendImageToolToBack",value:function(e){var t=this.getWidgetByTrueReference(e);if(t){var n=document.querySelector(ek(t.temporaryReference));n&&(n.style.zIndex="1")}}},{key:"sendImageToolToFront",value:function(e){var t=this.getWidgetByTrueReference(e);if(t){var n=document.querySelector(ek(t.temporaryReference));n&&(n.style.zIndex="10000")}}},{key:"stopAllFeatures",value:function(e){var t=this.getWidgetByTrueReference(e);if(t){var n=t.temporaryReference,r=this._questionsApp.feature(n);r||(r=this._questionsApp.question(n)),r&&(a().isFunction(r.simpleFeatures)&&a().each(r.simpleFeatures(),(function(e){e&&a().isFunction(e.stop)&&e.stop()})),a().isFunction(r.stop)&&r.stop())}}},{key:"addEventListener",value:function(e,t){var n=this._eventListeners.get(e);n&&n.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this._eventListeners.get(e);n&&this._eventListeners.set(e,a().without(n,t))}},{key:"isQuestionsApiInitialised",value:function(){return!!this._questionsApp}},{key:"setScoringType",value:function(e){this._scoringType=e,this._onQuestionChange()}},{key:"getFeatureFacadeByTrueReference",value:function(e){var t=this.getWidgetByTrueReference(e),n=this.getInstanceIfReady();return n?n.feature(t.temporaryReference):null}},{key:"getWidgetByTrueReference",value:function(e){return a().find(this._widgets,(function(t){return t.trueReference===e}))}},{key:"containsVideo",value:function(e){var t=this;return a().some(e,(function(e){var n=t.getWidgetByTrueReference(e);if(!n)return!1;var r=t._questionsApp.feature(n.temporaryReference)||t._questionsApp.question(n.temporaryReference);return!!r&&(!!r.video||a().isFunction(r.simpleFeatures)&&a().some(r.simpleFeatures(),(function(e){return!!e.video})))}))}},{key:"_questionsAppReadyListener",value:function(){var t=this,n=this._filterWidgets(this._questionsApp.questions()),r=this._filterWidgets(this._questionsApp.features()),i=a().extend({},n,r);a().each(this._widgets,(function(e){e.isAppended||(t._questionsApp.append(t._buildQuestionsOptions([e])),e.isAppended=!0)})),a().each(this._widgets,(function(e){i[e.temporaryReference]&&(e.isReady=!0)})),a().each(n,(function(e){e.on("changed",t._onQuestionChange.bind(t))})),a().each(this._eventListeners.get(e.EVENTS.READY),(function(e){return e()})),a().isEmpty(n)||this._onQuestionChange()}},{key:"_filterWidgets",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a().pick(e,(function(e,r){return!!a().find(t._widgets,(function(e){var t=e.temporaryReference===r;return n&&(t=t&&!e.isReady),t}))}))}},{key:"_buildQuestionsOptions",value:function(e){var t=a().extend({questions:[],features:[]},this._security);return a().each(e,(function(e){var n=a().cloneDeep(e.json);e.widgetType===nk?(n.feature_id=e.temporaryReference,t.features.push(n)):(n.response_id=e.temporaryReference,t.questions.push(n))})),t}},{key:"_onQuestionChange",value:function(){var t,n=a().filter(this._widgets,(function(e){return e.widgetType===tk&&e.isReady})).map((function(e){return e.temporaryReference})),r=!1;if(this._questionsApp&&this._questionsApp.questions){var i=this._filterWidgets(this._questionsApp.questions(),!1);r=a().some(i,(function(e){return e.checkValidation().has_validation}));var o=a().some(i,(function(e){return e.isAttempted()}));a().each(this._eventListeners.get(e.EVENTS.ATTEMPT_QUESTION),(function(e){return e(o)}))}(t=n.length?this._questionsApp.getGroupScore({response_ids:n,type:this._scoringType}):{score:0,max_score:0}).hasValidation=r,a().each(this._eventListeners.get(e.EVENTS.SCORE_UPDATE),(function(e){return e(t)})),this._showCorrectAnswerUpdates&&this.validateWithCorrectAnswers()}},{key:"_validate",value:function(e){a().each(e,(function(e){if(!a().isObject(e.data))throw"Widget JSON must be an object. Please update it and try again."}))}}])&&Qx(t.prototype,n),r&&Qx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();rk.EVENTS={READY:"ready",SCORE_UPDATE:"scoreUpdate",ATTEMPT_QUESTION:"attemptQuestion"};const ik=rk;var ok={height:220,frameborder:0,width:"100%"};function ak(e){this.config=e,this.initialize(e)}a().extend(ak.prototype,c.Events,{EVENTS:{success:"success",error:"error",start:"start",initUploader:"init:uploader"},initialize:function(){this.addPostMessageListeners(),this.iframeAttributes=a().extend({},ok,{src:this.getIframeSrc()}),this.on(this.EVENTS.initUploader,a().bind((function(){this.callUploaderMethod("setRequestMetadata",{request:this.config.comms.requestData,security:this.config.comms.security})}),this))},addPostMessageListeners:function(){window.addEventListener("message",a().bind((function(e){var t=this.retrievePostMessage(e);t&&this.trigger(t.name,t.meta)}),this),!1)},callUploaderMethod:function(e){var t={method:e};arguments.length>1&&(t.args=a().map(arguments,(function(e){return e})),t.args.splice(0,1)),this.$iframe[0].contentWindow.postMessage(t,"*")},getIframe:function(){return this.$iframe||(this.$iframe=f()("<iframe/>"),a().each(this.iframeAttributes,a().bind((function(e,t){this.$iframe.attr(t,e)}),this))),this.$iframe},getIframeSrc:function(){var e=this,t=LearnosityAuthor._internal.config.apiHost+"/uploader",n=a().mapObject(this.config.i18n.getLabelsStartingWith("assetUploader"),(function(t){return t.replace("%fileType%",e.config.type)})),r={channel:this.setChannel().channel,css:window.LearnosityAuthor._internal.config.assets.css,bust:(new Date).getTime(),origin:this.getOrigin(),version:window.LearnosityAuthor.versions.server,fileType:this.config.type,messages:this.EVENTS,labels:n};return t+"?"+Li.convertDataToQueryString(r)},getOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},retrievePostMessage:function(e){var t;if(e.data){try{t=JSON.parse(e.data)}catch(e){return}return t.channel&&t.channel===this.channel?t:void 0}},setChannel:function(){return this.channel="lrn_authorapi_asset_upload_"+a().uuid(),this}});const sk=ak,lk=c.View.extend({DEBOUNCE:500,EVENTS:{cancel:"cancel",done:"done",renderModal:"renderModal"},NAMESPACE:"lrn_asset_uploader",SELECTORS:{aspectRatioBtn:'[data-authorapi-selector="asset-uploader-lock"]',advancedOptionsToggle:'[data-authorapi-selector="advanced-options-toggle"]',alignmentDropdown:'[data-authorapi-selector="asset-uploader-alignment"]',errorWrapper:'[data-authorapi-selector="asset-uploader-error-wrapper"]',errorMessage:'[data-authorapi-selector="asset-uploader-error-message"]',configField:'[data-authorapi-selector="asset-uploader-field"]',iframeOutlet:'[data-authorapi-selector="asset-uploader-iframe-outlet"]',okayBtn:'[data-authorapi-selector="asset-uploader-okay"]',deleteBtn:'[data-authorapi-action="asset-uploader-delete"]',preview:'[data-authorapi-selector="asset-uploader-preview"]',scalingToggle:'[data-authorapi-selector="asset-uploader-scaling"]',srcInput:'[data-authorapi-selector="asset-uploader-source"]',resourceDisplayText:'[data-authorapi-selector="asset-display-name"]',closeBtn:'[data-authorapi-action="modal-close"]',previewParent:'[data-authorapi-selector="asset-uploader-image-config"]'},STYLES:{aspectRatioLock:"lrn-image-upload-ratio-locked",hide:"lrn-hide",imageCenter:"lrn-image-center",imageLeft:"lrn-image-left",imageRight:"lrn-image-right",preventScaling:"lrn-image-non-responsive"},IMAGETOOL_SPECIAL_SRC_VALUES:["protractor","ruler","ruler-15-cm","ruler-30-cm","ruler-6-inches","ruler-12-inches","Generic"],template:"questionEdit/assetUploader",events:function(){return[["change",this.SELECTORS.alignmentDropdown,"configureAlignment"],["change",this.SELECTORS.configField,this.getConfigHandler()],["keyup",this.SELECTORS.configField,this.getConfigHandler()],["click",this.SELECTORS.okayBtn,"handleOkay"],["click",this.SELECTORS.deleteBtn,"handleDelete"],["click",this.SELECTORS.aspectRatioBtn,"toggleAspectRatioLock"],["input",this.SELECTORS.srcInput,this.getPredefinedUrlHandler()],["click",this.SELECTORS.advancedOptionsToggle,"toggleAdvancedOptions"],["keyup",this.SELECTORS.resourceDisplayText,"onDisplayNameChange"],["change",this.SELECTORS.resourceDisplayText,"onDisplayNameChange"],["change",this.SELECTORS.scalingToggle,"toggleScaling"]]},initialize:function(e){this.isDone=!1,this.fileType=this.options.asset.mediaRequested,this.upload=new sk({comms:this.comms,type:this.fileType,i18n:this.i18n}),this.addUploadListeners(),this.data={},this.setData(e),this.advancedOptionsShown=!1},addImageClass:function(e){var t=(this.data.class||"").split(" ");t.push(e),this.data.class=t.join(" ")},addUploadListeners:function(){var e=this.upload.EVENTS;this.listenTo(this.upload,e.success,this.showConfig),this.listenTo(this.upload,e.error,this.showError),this.listenTo(this.upload,e.start,this.clearError),this.listenTo(this.upload,e.initUploader,this.prepareIframeText)},afterRender:function(){var e,t=this.$(this.SELECTORS.iframeOutlet);this.standaloneViewOptions&&this.standaloneViewOptions.wrapper&&(this.$el.appendTo(this.standaloneViewOptions.wrapper).addClass("lrn-author-ui"),this.$el.on("click",this.SELECTORS.closeBtn,this.onCancelAsStandaloneView.bind(this))),t.length&&(e=this.upload.getIframe(),t.append(e)),this.trigger(this.EVENTS.renderModal)},attemptSetSrc:function(e){var t=e.value.trim();return!!t&&(this.data.src=t,!0)},beforeRemove:function(){this.standaloneViewOptions&&this.$el.off("click"),this.isDone||this.trigger(this.EVENTS.cancel)},clearError:function(){this.$(this.SELECTORS.errorMessage).text(""),this.$(this.SELECTORS.errorWrapper).addClass(this.STYLES.hide)},configureAlignment:function(e){[this.STYLES.imageCenter,this.STYLES.imageLeft,this.STYLES.imageRight].forEach(this.removeImageClass.bind(this)),this.addImageClass(f()(e.currentTarget).val())},forceConfigDimensionsAccordingTo:function(e){var t,n="width"===e?"height":"width",r=this.data[e];t="width"===e?r/this.aspectRatio:this.aspectRatio*r,t=Math.round(t),this.data[n]=t,this.updateDimensionField(n,t,!0)},getAsset:function(){return this.isHtmlAssetRequest()?this.getAssetHtml():this.isUrlHeightWidthAssetRequest()?{url:this.data.src,width:this.data.width,height:this.data.height}:"resource"===this.fileType?{url:this.data.src||"",fileName:this.data.fileName||"",displayName:this.data.displayName||""}:this.data.src},getAssetHtml:function(){if(a().isEmpty(this.data))return" ";var e="<img";return a().each(this.data,(function(t,n){a().contains(["src","height","width","alt","class"],n)&&(e+=" "+n+'="'+t+'"')})),e+=">"},getConfigHandler:function(e){var t;return t=e?a().bind(this.onConfigChange,this):this.onConfigChange,a().debounce(t,this.DEBOUNCE)},getPredefinedUrlHandler:function(){return a().debounce(this.handlePredefinedUrl,this.DEBOUNCE)},handleOkay:function(){this.data.alt&&(this.data.alt=a().escape(this.data.alt)),this.isDone=!!this.data.src,this.trigger(this.EVENTS.done)},handleDelete:function(){this.data={},this.isUrlHeightWidthAssetRequest()&&(this.data.src=""),this.isDone=!0,this.trigger(this.EVENTS.done)},handlePredefinedUrl:function(){var e=this.$(this.SELECTORS.srcInput)[0];this.attemptSetSrc(e)?(this.prepareIframeText(),this.isHtmlAssetRequest()?(this.removeStoredDimensions(),this.loadAndStoreImageAttributes().then(a().bind(this.render,this))):"image"===this.fileType?this.loadAndStoreImageAttributes().then(a().bind(this.updatePreview,this)).catch(a().bind(this.handleImageError,this)):this.$(this.SELECTORS.okayBtn).prop("disabled",!1)):this.$(this.SELECTORS.okayBtn).prop("disabled",!0)},isHtmlAssetRequest:function(){return"image"===this.fileType&&"HTML"===this.options.asset.returnType},isUrlHeightWidthAssetRequest:function(){return"image"===this.fileType&&"UrlHeightWidth"===this.options.asset.returnType},isShowAspectRatioLock:function(){return!a().getNested(this.options,"asset.attributes.aspectRatioLocked")},loadAndStoreImageAttributes:function(){var e=f()("<img/>").attr("src",this.data.src),t=e[0];return new S(function(n,r){e.one("load",function(){this.aspectRatio=t.naturalWidth/t.naturalHeight,this.data.width=this.data.width||t.naturalWidth,this.data.height=this.data.height||t.naturalHeight,n()}.bind(this)),e.one("error",function(){r()}.bind(this))}.bind(this))},onCancelAsStandaloneView:function(){this.standaloneViewOptions&&(this.$el.off("click"),this.trigger(this.EVENTS.cancel))},onDisplayNameChange:function(e){this.data.displayName=f()(e.currentTarget).val()},onConfigChange:function(e){var t=f()(e.currentTarget),n=t.val(),r=t.attr("name"),i="width"===r||"height"===r,o=i&&this.shouldPreserveAspectRatio();if(i&&(n=Number(n)),i&&a().isNaN(n))return this.updateDimensionField(r,"");n?this.data[r]=n:delete this.data[r],o&&this.forceConfigDimensionsAccordingTo(r),this.updatePreview()},prepareIframeText:function(){this.data.src&&this.data.src.trim()&&(this.upload.callUploaderMethod("changeUploaderText"),this.$(this.SELECTORS.srcInput).val(this.data.src))},removeImageClass:function(e){var t=this.data.class||"";this.data.class=t.replace(e,"").trim()},removeStoredDimensions:function(){delete this.data.width,delete this.data.height,delete this.aspectRatio},showConfig:function(e){this.data.src=e.urls[0],this.data.fileName=e.fileName[0],"image"===this.options.asset.mediaRequested?(this.removeStoredDimensions(),this.loadAndStoreImageAttributes().then(this.render.bind(this))):this.render()},showError:function(e){var t=e.code?e.code+": ":"";t+=e.message,this.$(this.SELECTORS.errorMessage).html(t),this.$(this.SELECTORS.errorWrapper).removeClass(this.STYLES.hide)},serialize:function(){var e="image"===this.fileType&&this.data.src&&this.data.src.trim(),t="resource"===this.fileType;return a().extend({},this.data,{selfHostedFileInput:"questionEdit/assetUploader/selfHostedFile",fileType:this.fileType,viewId:this.NAMESPACE+"_"+this.cid,isImage:e,moreOptionsShown:this.advancedOptionsShown.toString(),isHtmlAssetRequest:this.isHtmlAssetRequest(),isUrlHeightWidthAssetRequest:this.isUrlHeightWidthAssetRequest(),isShowAspectRatioLock:this.isShowAspectRatioLock(),selfHostedFileText:this.i18n.get("assetUploaderSelfHostedFile").replace("%fileType%",this.fileType),displayName:this.data.displayName,isResourceAssetRequest:t,i18n:this.i18n})},shouldPreserveAspectRatio:function(){return!this.isShowAspectRatioLock()||this.$(this.SELECTORS.aspectRatioBtn).hasClass(this.STYLES.aspectRatioLock)},toggleAdvancedOptions:function(e){var t=f()(e.currentTarget);this.advancedOptionsShown=!this.advancedOptionsShown,t.attr("aria-pressed",this.advancedOptionsShown),this.trigger(this.EVENTS.renderModal)},toggleAspectRatioLock:function(e){var t=f()(e.currentTarget);t.toggleClass(this.STYLES.aspectRatioLock),t.attr("aria-pressed","false"===t.attr("aria-pressed"))},toggleScaling:function(e){f()(e.currentTarget).is(":checked")?this.addImageClass(this.STYLES.preventScaling):this.removeImageClass(this.STYLES.preventScaling)},updateDimensionField:function(e,t,n){var r=this.$(this.SELECTORS.configField).filter('[name="'+e+'"]');n?(r.off().val(t),r.on("change keyup",this.getConfigHandler(!0))):r.val(t)},getImagePreviewBase:function(){return'<div class="lrn-image-uploader-preview"><img data-authorapi-selector="asset-uploader-preview"/></div>'},setImageElement:function(){var e=this.$(this.SELECTORS.preview);return e.length||(this.$(this.SELECTORS.previewParent).prepend(this.getImagePreviewBase()),e=this.$("img")),e},handleImageError:function(){var e=this.setImageElement();e.attr("src",this.data.src),a().each(["class","width","height","alt","style"],(function(t){e.removeAttr(t,"")})),this.$(this.SELECTORS.okayBtn).prop("disabled",!0)},updatePreview:function(){var e=this.setImageElement();a().each(["class","width","height","alt"],(function(t){e.attr(t,"")})),a().each(this.data,(function(t,n){e.attr(n,t)})),this.isUrlHeightWidthAssetRequest()&&e.css({width:this.data.width,height:this.data.height}),this.$(this.SELECTORS.okayBtn).prop("disabled",!1)},setData:function(e){var t,n=e.asset&&e.asset.attributes;n&&n.src&&!a().contains(this.IMAGETOOL_SPECIAL_SRC_VALUES,n.src)&&(t=n.cssClass,this.data.src=n.src,"image"===this.options.asset.mediaRequested&&(n.alt&&(this.data.alt=n.alt),a().isString(t)&&(this.data.class=t,this.data.imageLeft=!!t.match(this.STYLES.imageLeft),this.data.imageRight=!!t.match(this.STYLES.imageRight),this.data.imageCenter=!!t.match(this.STYLES.imageCenter),this.data.preventScaling=!!t.match(this.STYLES.preventScaling)),n.height&&(this.data.height=n.height),n.width&&(this.data.width=n.width),n.height&&n.width?this.aspectRatio=n.width/n.height:this.loadAndStoreImageAttributes().then(a().bind(this.render,this)))),e.standaloneViewOptions&&(this.standaloneViewOptions=e.standaloneViewOptions),"resource"===e.asset.mediaRequested&&(this.data.displayName=n.selectedText,this.data.src=n.src,this.data.fileName=n.fileName)}});var uk=navigator.userAgent.toLowerCase(),ck=uk.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],dk=ck[1],fk=parseInt(ck[2],10),pk="ie"===dk&&fk<8&&/trident/i.test(uk),hk=!!uk.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),mk=!!uk.match(/applewebkit/),gk=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest));uk.match(/trident.*rv[ :]*11\./)&&(dk="ie",fk=11),"version"===dk&&(dk=ck[3]);const yk={browser:dk,version:fk,compatibilityMode:pk,isMobile:hk,isChromeApp:gk,isAppleWebKit:mk};__webpack_require__(96386);const vk=c.View.extend({SELECTORS:{close:'[data-authorapi-action="modal-close"]',modal:'[data-authorapi-selector="modal"]',modalDialog:'[data-authorapi-selector="modal-dialog"]',outlet:'[data-authorapi-selector="modal-outlet"]',header:'[data-authorapi-selector="modal-header"]',overlay:'[data-authorapi-selector="modal-overlay"]',authorContainer:function(e){return'[data-authorapi-root-id="'.concat(e,'"]')}},FADE_DURATION:200,template:"components/modal",browserCheck:yk,events:function(){return[["click",this.SELECTORS.close,"hide"]]},initialize:function(e){this.useTransformElementForOffset=!0,"ie"===this.browserCheck.browser&&this.browserCheck.version<=11&&(this.useTransformElementForOffset=!1),c.Courier.add(this),this.addUiClassToModalOutlet=!0,!1===e.addUiClassToModalOutlet&&(this.addUiClassToModalOutlet=e.addUiClassToModalOutlet)},afterRender:function(){this.modal=this.$(this.SELECTORS.modal),this.modalDialog=this.$(this.SELECTORS.modalDialog),this.overlay=this.$(this.SELECTORS.overlay)},calculateHeightAndOffset:function(){var e,t,n=f()(this.SELECTORS.authorContainer(this.options.authorApiRootId)),r=n.width(),i=n[0].getBoundingClientRect(),o=f()(window).height()-40-(i.top>0?i.top:0),a=this.modalDialog.outerWidth(),s=this.findParentWithTransformProperty(this.modalDialog),l=0,u=!0;if(this.modalDialog.children().each(function(e,t){l+=this.$(t).outerHeight(!0)}.bind(this)),l+=parseInt(this.modalDialog.css("padding-top")),(l+=parseInt(this.modalDialog.css("padding-bottom")))>o?l=o:u=!1,e=this.getOffsetTop(l,o,i),this.useTransformElementForOffset&&s){var c=s.getBoundingClientRect();t=i.left-c.left+(r-a)/2,e-=c.top}else t=i.left+(r-a)/2;var d={offsetTop:e,offsetLeft:t};return u&&(d.height=l),d},findParentWithTransformProperty:function(e){var t=!1;return e.parents().each((function(e,n){if("none"!==f()(n).css("transform"))return t=n,!1})),t},getOffsetTop:function(e,t,n){return n.top>=0?t>e+20?Math.floor(n.top+(t-e)/2):n.top+20:t>e+20?Math.floor((t-e)/2):20},fadeIn:function(){return new S(a().bind((function(e){this.overlay.fadeIn(this.FADE_DURATION),this.modal.css({display:"flex"}).fadeTo(this.FADE_DURATION,1,e),this.setCalculatedHeightAndPosition()}),this))},fadeOut:function(){return new S(a().bind((function(e){this.overlay.fadeOut(this.FADE_DURATION),this.modal.fadeOut(this.FADE_DURATION,e)}),this))},setCalculatedHeightAndPosition:function(){var e=f()(this.SELECTORS.authorContainer(this.options.authorApiRootId)).width();this.modalDialog.width()>e&&this.modalDialog.css("width",e-40);var t=this.calculateHeightAndOffset();t.height&&this.modalDialog.css("height",t.height),this.modalDialog.css({top:t.offsetTop,left:t.offsetLeft})},show:function(e){var t=this;return this.options.modalTitle=e.modalTitle,this.removeView(this.SELECTORS.outlet),this.insertView(this.SELECTORS.outlet,e),this.render(),f()(window).on("scroll.lrnAuthorModal",function(){this.setCalculatedHeightAndPosition()}.bind(this)),this.lazyApply=a().debounce((function(){t.setCalculatedHeightAndPosition()}),300),f()(this.SELECTORS.authorContainer(this.options.authorApiRootId)).resize(this.lazyApply),this.fadeIn()},hide:function(){return f()(window).off("scroll.lrnAuthorModal"),new S(a().bind((function(e){this.fadeOut().then(a().bind((function(){var t=this.getView(this.SELECTORS.outlet);if(!t)return e();a().isFunction(t.beforeRemove)&&t.beforeRemove(),this.removeView(this.SELECTORS.outlet),f()(this.SELECTORS.authorContainer(this.options.authorApiRootId)).removeResize(this.lazyApply),e()}),this))}),this))},serialize:function(){return{modalTitle:this.options.modalTitle,addUiClassToModalOutlet:this.addUiClassToModalOutlet}}});function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const _k=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modalContainer=t,this._context=n}var t,n,r;return t=e,(n=[{key:"handleAssetRequest",value:function(e,t,n,r,i){var o,a=i,s={standaloneViewOptions:a,el:!1,asset:{mediaRequested:e,returnType:t,attributes:r},comms:this._context.app.component.comms,i18n:this._context.i18n},l=new lk(s);a?l.render():((o=new vk({el:this._modalContainer,addUiClassToModalOutlet:!0,authorApiRootId:this._context.app.rootId})).render(),o.show(l)),l.once(l.EVENTS.done,(function(){n(l.getAsset()),o&&o.hide()})),l.once(l.EVENTS.cancel,(function(){n()})),l.on(l.EVENTS.renderModal,(function(){o&&o.setCalculatedHeightAndPosition()}))}}])&&bk(t.prototype,n),r&&bk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const wk=function(){return zt.createElement("div",{className:"lrn-hide","data-lrn-qe-layout":"mathgen-layout"},zt.createElement("span",{"data-lrn-qe-input":"is_dynamic_content"}),zt.createElement("div",{dangerouslySetInnerHTML:{__html:'\n<div class="lrn-qe-edit-form">\n\n    \x3c!-- Layout --\x3e\n    <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header lrn-qe-border-none" data-lrn-qe-section="layout.heading">\n        <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.layout" value="Layout"></label>\n    </div>\n\n    <span data-lrn-qe-label="response_container"></span>\n    <span data-lrn-qe-input="response_container"></span>\n\n    <div data-lrn-qe-section="layout.content">\n        <div class="lrn-qe-row-flex">\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="response_container.width"></span>\n                <span data-lrn-qe-input="response_container.width"></span>\n            </div>\n           <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="response_container.height"></span>\n                <span data-lrn-qe-input="response_container.height"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="response_container.aria_label"></span>\n                <span data-lrn-qe-input="response_container.aria_label"></span>\n            </div>\n        </div>\n    </div>\n\n    \x3c!-- Keypad --\x3e\n    <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header lrn-qe-border-none" data-lrn-qe-section="layout.heading">\n        <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.keypad" value="Keypad"></label>\n    </div>\n\n    <div class="lrn-qe-row-flex">\n        <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-label="ui_style.type"></span>\n            <span data-lrn-qe-input="ui_style.type"></span>\n        </div>\n        <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-input="showHints" class="lrn-qe-inline-block"></span>\n            <span data-lrn-qe-label="showHints" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n        </div>\n        <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-input="horizontal_layout" class="lrn-qe-inline-block"></span>\n            <span data-lrn-qe-label="horizontal_layout" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n        </div>\n        <div class="lrn-qe-col-sm-12" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-input="ui_style.keyboard_below_response_area" class="lrn-qe-inline-block"></span>\n            <span data-lrn-qe-label="ui_style.keyboard_below_response_area" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n        </div>\n    </div>\n\n    <div class="lrn-qe-row-flex lrn-qe-margin-top-md">\n        \x3c!-- Horizontal pad --\x3e\n        <div class="lrn-qe-col-sm-12" data-lrn-qe-section="horizontal_keyboard.content">\n            <span data-lrn-qe-label="horizontalPad"></span>\n            <div class="lrn-formula-keyboard lrn-keyboard-horizontal lrn_clearfix">\n                <span data-lrn-qe-loop="horizontalPad[*]">\n                    <span data-lrn-qe-input="horizontalPad[*]"></span>\n                </span>\n            </div>\n        </div>\n    </div>\n\n    <div class="lrn-qe-row-flex lrn-qe-margin-top-md" data-lrn-qe-section="number_pad.content">\n        \x3c!-- Number pad --\x3e\n        <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-label="numberPad"></span>\n            <div class="lrn-formula-keyboard lrn_clearfix">\n                <span data-lrn-qe-loop="numberPad[*]">\n                    <span data-lrn-qe-input="numberPad[*]"></span>\n                </span>\n            </div>\n        </div>\n\n        \x3c!-- Symbols --\x3e\n        <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n            <span data-lrn-qe-label="symbols"></span>\n\n            <div data-lrn-qe-section="symbols.content">\n                <div class="lrn-qe-row-flex lrn-qe-margin-top-md">\n                    <div data-lrn-qe-loop="symbols[*]" class="lrn-qe-col-sm-12" data-lrn-qe-layout-wrapper>\n                        <div class="lrn-qe-row-flex">\n                            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                                <span data-lrn-qe-label="symbols[*]" class="lrn-qe-margin-top-none"></span>\n                            </div>\n                            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                                <span data-lrn-qe-action-remove="symbols[*]" class="lrn-qe-float-right lrn-qe-padding-top-sm"></span>\n                            </div>\n                        </div>\n                        <span data-lrn-qe-input="symbols[*]"></span>\n                        <div class="lrn-qe-row-flex">\n                            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                                <span data-lrn-qe-label="symbols[*].label"></span>\n                                <span data-lrn-qe-input="symbols[*].label"></span>\n                            </div>\n                            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                                <span data-lrn-qe-label="symbols[*].title"></span>\n                                <span data-lrn-qe-input="symbols[*].title"></span>\n                            </div>\n                        </div>\n                        <div class="lrn-formula-keyboard lrn_clearfix">\n                            <span data-lrn-qe-input="symbols[*].value"></span>\n                            <div data-lrn-qe-loop="symbols[*].value[*]" class="lrn-qe-col-sm-12" data-lrn-qe-layout-wrapper>\n                                <span data-lrn-qe-input="symbols[*].value[*]"></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <span data-lrn-qe-action-add="symbols"></span>\n            </div>\n        </div>\n    </div>\n\n\n    \x3c!-- More options --\x3e\n    <button type="button" class="lrn-qe-form-label lrn-qe-margin-top-none lrn-qe-more-options" data-lrn-qe-adv-toggle data-lrn-qe-section="more_options.heading">\n        <span class="lrn-qe-i-arrow lrn-qe-inline-block" data-lrn-qe-section="more_options.toggle"></span>\n        <span class="lrn-qe-inline-block lrn-qe-text-bold"><label class="lrn-qe-label lrn-qe-form-label-name" data-lrn-qe-i18n-label="heading.moreOptions" value="More options"></label></span>\n    </button>\n\n    <div data-lrn-qe-adv-content data-lrn-qe-section="more_options.content">\n        <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header lrn-qe-border-none" data-lrn-qe-section="scoring.heading">\n            <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.scoring" value="Scoring"></label>\n        </div>\n\n        <div class="lrn-qe-row-flex" data-lrn-qe-section="validation.automarkable_fields">\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-input="validation.unscored" class="lrn-qe-inline-block"></span>\n                <span data-lrn-qe-label="validation.unscored" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="validation.penalty" class="lrn-qe-form-control-sm"></span>\n                <span data-lrn-qe-input="validation.penalty" class="lrn-qe-form-control-sm"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-input="instant_feedback" class="lrn-qe-inline-block"></span>\n                <span data-lrn-qe-label="instant_feedback" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="feedback_attempts"></span>\n                <span data-lrn-qe-input="feedback_attempts" class="lrn-qe-form-control-sm"></span>\n            </div>\n        </div>\n\n        <div class="lrn-qe-row-flex">\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="validation.min_score_if_attempted"></span>\n                <span data-lrn-qe-input="validation.min_score_if_attempted" class="lrn-qe-form-control-sm"></span>\n            </div>\n            <div class="lrn-qe-col-xs-12 lrn-qe-col-sm-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="validation.max_score"></span>\n                <span data-lrn-qe-input="validation.max_score" class="lrn-qe-form-control-sm"></span>\n            </div>\n        </div>\n\n        \x3c!-- Layout --\x3e\n        <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header" data-lrn-qe-section="layout.heading">\n            <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.layout" value="Layout"></label>\n        </div>\n\n        <div data-lrn-qe-section="layout.content">\n            <div class="lrn-qe-row-flex">\n                <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                    <span data-lrn-qe-label="ui_style.validation_stem_numeration"></span>\n                    <span data-lrn-qe-input="ui_style.validation_stem_numeration"></span>\n                </div>\n                <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                    <span data-lrn-qe-label="ui_style.min_width"></span>\n                    <span data-lrn-qe-input="ui_style.min_width" class="lrn-qe-form-control-sm"></span>\n                </div>\n            </div>\n\n            <div class="lrn-qe-row-flex">\n                <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                    <span data-lrn-qe-label="ui_style.response_font_scale"></span>\n                    <span data-lrn-qe-input="ui_style.response_font_scale"></span>\n                </div>\n                <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                    <span data-lrn-qe-label="ui_style.fontsize"></span>\n                    <span data-lrn-qe-input="ui_style.fontsize"></span>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Text blocks --\x3e\n        <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header" data-lrn-qe-section="text_blocks.heading">\n            <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.textBlocks" value="Text blocks"></label>\n        </div>\n        <div data-lrn-qe-section="text_blocks.content">\n            <div class="lrn-qe-row-flex lrn-qe-margin-top-md">\n                <div data-lrn-qe-loop="text_blocks[*]" class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                    <span data-lrn-qe-input="text_blocks[*]"></span>\n                </div>\n            </div>\n            <span data-lrn-qe-action-add="text_blocks"></span>\n        </div>\n        \x3c!-- Extras --\x3e\n        <div class="lrn-qe-form-label lrn-qe-h4 lrn-qe-section-header" data-lrn-qe-section="details.heading">\n            <label class="lrn-qe-label lrn-qe-form-label-name lrn-qe-text-bold" data-lrn-qe-i18n-label="heading.details" value="Extras"></label>\n        </div>\n\n        <div class="lrn-qe-row-flex" data-lrn-qe-section="details.content">\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="metadata.acknowledgements"></span>\n                <span data-lrn-qe-input="metadata.acknowledgements"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="metadata.distractor_rationale"></span>\n                <span data-lrn-qe-input="metadata.distractor_rationale"></span>\n            </div>\n\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="metadata.rubric_reference"></span>\n                <span data-lrn-qe-input="metadata.rubric_reference"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="stimulus_review"></span>\n                <span data-lrn-qe-input="stimulus_review"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="instructor_stimulus"></span>\n                <span data-lrn-qe-input="instructor_stimulus"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="metadata.sample_answer"></span>\n                <span data-lrn-qe-input="metadata.sample_answer"></span>\n            </div>\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper>\n                <span data-lrn-qe-label="description"></span>\n                <span data-lrn-qe-input="description"></span>\n            </div>\n        </div>\n\n        <span data-lrn-qe-label="metadata.distractor_rationale_response_level" data-lrn-qe-section="metadata.heading"></span>\n        <div data-lrn-qe-section="metadata.content">\n            <div data-lrn-qe-loop="metadata.distractor_rationale_response_level[*]">\n                <div data-lrn-qe-label="metadata.distractor_rationale_response_level[*]"></div>\n                <div data-lrn-qe-input="metadata.distractor_rationale_response_level[*]"></div>\n            </div>\n            <span data-lrn-qe-action-add="metadata.distractor_rationale_response_level"></span>\n        </div>\n\n        <div class="lrn-qe-row-flex">\n            <div class="lrn-qe-col-sm-12 lrn-qe-col-md-6" data-lrn-qe-layout-wrapper="is_math">\n                <span data-lrn-qe-input="is_math" class="lrn-qe-inline-block"></span>\n                <span data-lrn-qe-label="is_math" class="lrn-qe-inline-block lrn-qe-margin-left-xs"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'}}))};function Ek(e){return(Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kk(e,t){return(kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ak(e);if(t){var i=Ak(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ok(this,n)}}function Ok(e,t){if(t&&("object"===Ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ck(e)}function Ck(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ak(e){return(Ak=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}(o,e);var t,n,r,i=Tk(o);function o(){var e;Sk(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pk(Ck(e=i.call.apply(i,[this].concat(n))),"_addEventListeners",(function(){e._instance.on("before:reset",e._beforeReset)})),Pk(Ck(e),"_beforeReset",(function(){var t=e.context.i18n.get("typeChangeWithUnsavedChangesQuestionFeature"),n=!0;e._instance.safeToUnload()||(n=window.confirm(t)),n&&e._resetQuestionEditor()})),e}return t=o,(n=[{key:"componentWillUnmount",value:function(){this._instance&&(this._instance.off("before:reset",this._beforeReset),this._instance.off("widget:changed",this._addEventListeners),this._instance.safeToUnload(!0)),this.context.qeManager.releaseInstance()}},{key:"componentDidMount",value:function(){var e=this;this.context.qeManager.getInstance(this.el).then((function(t){var n=e.props.widgetData;e._instance=t,e._resetQuestionEditor(n.widget_type),e._setDynamicDataHandlers(),n.json||e._getMetadata()?(e._instance.once("widget:changed",e._addEventListeners),e._setWidget()):e._addEventListeners()}))}},{key:"shouldComponentUpdate",value:function(e){return JSON.stringify(e)!==JSON.stringify(this.props)}},{key:"componentDidUpdate",value:function(e){var t=e.widgetData.json||e.widgetData.template_reference||e.widgetData.template_name,n=!this.props.widgetData.json&&!this._getMetadata()&&t;(this.props.widgetData.widget_type!==e.widgetData.widget_type||n)&&this._resetQuestionEditor(this.props.widgetData.widget_type),a().isEqual(a().omit(this.props.widgetData,"widget_type"),a().omit(e.widgetData,"widget_type"))||!this.props.widgetData.json&&!this._getMetadata()||this._setWidget(),a().isEqual(this.props.dynamicContentData,e.dynamicContentData)||this._setDynamicDataHandlers()}},{key:"_setDynamicDataHandlers",value:function(){var e=this;this._instance.setDynamicDataHandlers({get:function(){return e.props.dynamicContentData},set:this.props.setDynamicData})}},{key:"_resetQuestionEditor",value:function(e){try{this._instance.reset(e)}catch(e){console.error(e)}}},{key:"_setWidget",value:function(){this._instance.setWidget(this.props.widgetData.json||{},this._getMetadata())}},{key:"_getMetadata",value:function(){var e={};return this.props.widgetData.template_reference&&(e.template_reference=this.props.widgetData.template_reference),this.props.widgetData.template_name&&(e.name=this.props.widgetData.template_name),a().isEmpty(e)?null:e}},{key:"render",value:function(){var e=this,t=a().classNames("lrn-author-item-content-wrapper",{"lrn-author-mathgen-hide":this.props.hideMathGen});return zt.createElement("div",{className:t,ref:function(t){return e.el=t}},zt.createElement(wk,null))}}])&&xk(t.prototype,n),r&&xk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Mk.contextTypes={i18n:jn().object,qeManager:jn().object,app:jn().object};const Dk=Ln((function(e){return{widgetData:e.widgetData,widgetTemplates:e.widgetTemplates}}))(Mk);var Rk="CHANGE_WIDGET_DATA",Lk="CHANGE_WIDGET_TYPE";const Nk=function(e){return{type:Lk,data:e}};function Ik(e){return(Ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fk(e,t){return(Fk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qk(e);if(t){var i=qk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hk(this,n)}}function Hk(e,t){if(t&&("object"===Ik(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vk(e)}function Vk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qk(e){return(qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wk="response",zk="feature",Gk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fk(e,t)}(o,e);var t,n,r,i=Yk(o);function o(){var e;jk(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Uk(Vk(e=i.call.apply(i,[this].concat(n))),"state",{viewMode:e.context.qeManager.getViewMode()}),Uk(Vk(e),"_handleChangeViewMode",(function(t){e.setState({viewMode:t})})),e}return t=o,(n=[{key:"componentDidMount",value:function(){this.context.qeManager.listenToChangeMode(this._handleChangeViewMode)}},{key:"componentWillUnmount",value:function(){this.context.qeManager.stopListeningToChangeMode(this._handleChangeViewMode)}},{key:"_generateButton",value:function(e){var t,n,r=this,i=this.context.i18n;return e===Wk?(t=i.get("questionEditQuestionsTab"),n="lrn-i-question"):(t=i.get("questionEditFeaturesTab"),n="lrn-i-feature"),zt.createElement("button",{type:"button",className:a().classNames(["lrn-btn","lrn-author-btn-outline","lrn-author-toolbar-button","lrn-btn-icon-left"],Uk({},"lrn-btn-active",this.props.widgetType===e)),onClick:function(){return r.props.changeWidgetType(e)},"data-authorapi-selector":"questioneditor-type-toggle","data-authorapi-type":e},zt.createElement("span",{className:n}),zt.createElement("span",{className:"lrn-text-small"},t))}},{key:"render",value:function(){return!this.props.legacyContentMode&&this.props.showWidgetTypes&&"tileView"===this.state.viewMode?zt.createElement("div",{className:"lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-author-item-toolbar","data-authorapi-selector":"questioneditor-toolbar-container"},zt.createElement("div",{className:"lrn-author-item-toolbar-left lrn-ellipses"},zt.createElement("ul",{className:"lrn-author-item-toolbar-controls","data-authorapi-selector":"questioneditor-toolbar"},zt.createElement("li",null,this._generateButton(Wk)),zt.createElement("li",null,this._generateButton(zk)))))):null}}])&&Bk(t.prototype,n),r&&Bk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Gk.contextTypes={i18n:jn().object,qeManager:jn().object};const $k=Ln((function(e){return{showWidgetTypes:e.widgetTemplates.widget_types.show,widgetType:e.widgetData.widget_type}}),{changeWidgetType:Nk})(Gk);function Kk(e){return(Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qk(e,t){return(Qk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tT(e);if(t){var i=tT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return eT(this,n)}}function eT(e,t){if(t&&("object"===Kk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tT(e){return(tT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const nT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qk(e,t)}(o,e);var t,n,r,i=Xk(o);function o(){return Zk(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.onDismiss;return zt.createElement("div",{className:a().classNames("lrn-author-message lrn-author-message-warning",this.props.extraWrapperClasses),"data-authorapi-selector":"warning-message"},e&&zt.createElement(cs,{onClick:e}),zt.createElement("span",{className:this.props.extraInlineClasses},this.props.text))}}])&&Jk(t.prototype,n),r&&Jk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function rT(e){return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aT(e,t){return(aT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uT(e);if(t){var i=uT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lT(this,n)}}function lT(e,t){if(t&&("object"===rT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uT(e){return(uT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aT(e,t)}(o,e);var t,n,r,i=sT(o);function o(){return iT(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){this._assetRequestHandler=new _k(this._modalContainer,this.context),this.context.qeManager.setAssetRequestHandler(this._assetRequestHandler)}},{key:"componentWillUnmount",value:function(){this.context.qeManager.setAssetRequestHandler(null)}},{key:"render",value:function(){var e=this,t={dynamicContentData:this.props.dynamicContentData,setDynamicData:this.props.setDynamicData,hideMathGen:this.props.hideMathGen},n=null,r=this.props.widgetData.item_count;return a().isNumber(r)&&r>0&&(n=this.context.i18n.get("questionEditItemCountWarning").replace(/%number%/,r+1)),zt.createElement("div",null,zt.createElement($k,{legacyContentMode:this.props.legacyContentMode}),!!n&&zt.createElement(nT,{extraWrapperClasses:"lrn-author-dependent-count-warning-wrapper",extraInlineClasses:"lrn-author-item-count-warning",text:n}),zt.createElement("div",{ref:function(t){return e._modalContainer=t}}),zt.createElement(Dk,t))}}])&&oT(t.prototype,n),r&&oT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);cT.contextTypes={i18n:jn().object,qeManager:jn().object,app:jn().object};const dT=Ln((function(e){return{widgetData:e.widgetData}}))(cT);const fT=Io({widgetData:function(e,t){return t.type===Rk?t.data:t.type===Lk?a().extend({},e,{widget_type:t.data}):e||null},widgetTemplates:function(e){return e||null}});const pT=function(e){return{type:Rk,data:e}};function hT(e){return(hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gT(e,t){return(gT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bT(e);if(t){var i=bT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vT(this,n)}}function vT(e,t){if(t&&("object"===hT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bT(e){return(bT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const _T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gT(e,t)}(o,e);var t,n,r,i=yT(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"_setupStore",value:function(){var e=a().cloneDeep(this.props.widgetTemplates),t=this._getWidgetDataWithDefaults(this.props.widgetData,e);this.store=Lo(fT,{widgetData:t,widgetTemplates:e},Fo.apply(null,function(){var e=[_x.Z];return!!window.MSInputMethodContext&&document.documentMode,e}()))}},{key:"_getWidgetDataWithDefaults",value:function(e,t){var n=a().cloneDeep(e)||{};return n.widget_type||(n.widget_type="features"===t.widget_types.default?"feature":"response"),n}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!a().isEqual(this.props.widgetData,e.widgetData)||!a().isEqual(this.props.widgetTemplates,e.widgetTemplates)){var t=this._getWidgetDataWithDefaults(e.widgetData,e.widgetTemplates);a().isEqual(this.store.getState().widgetData,t)||this.store.dispatch(pT(t))}}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement(dT,{hideMathGen:this.props.hideMathGen,dynamicContentData:this.props.dynamicContentData,setDynamicData:this.props.setDynamicData,legacyContentMode:this.props.legacyContentMode}))}}])&&mT(t.prototype,n),r&&mT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);var wT="UPDATE_STATE";const ET=function(e){return{type:wT,data:e}},ST=function(){return[__webpack_require__.e(877).then(__webpack_require__.t.bind(__webpack_require__,36452,23)),__webpack_require__.e(877).then(__webpack_require__.t.bind(__webpack_require__,60832,23))]};var xT=__webpack_require__(88184);function kT(e){return(kT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OT(e,t){return(OT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=MT(e);if(t){var i=MT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AT(this,n)}}function AT(e,t){if(t&&("object"===kT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PT(e)}function PT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MT(e){return(MT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DT={ck:"lrn-author-ckeditor",get ckToolbar(){return"".concat(this.ck,"-toolbar")},get ckToolbarShow(){return"".concat(this.ckToolbar,"-show")}},RT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OT(e,t)}(o,e);var t,n,r,i=CT(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(PT(t=i.call(this,e)),"resizeAndPositionEditor",(function(){if(t.toolbar){var e=t.toolbar,n=t.ckInstance.container.$.getBoundingClientRect().width,r=e.getBoundingClientRect().height;e.style.width="100%",e.style.maxWidth=n,e.style.top="-".concat(r,"px")}})),t.state={ckReady:!1,ckGlobalName:"LRNCKEDITOR"},t.skipRender=!1,t.uniqueLabel="".concat(t.props.name,"-").concat(a().uuid()),t.sharedSpaceHook="".concat(DT.ckToolbar,"-").concat(t.uniqueLabel),t}return t=o,(n=[{key:"ckeditor",get:function(){return window[this.state.ckGlobalName]}},{key:"componentDidMount",value:function(){var e=this;this.props.shouldLoadCkBundle?Promise.all(ST()).then((function(){e.setState({ckReady:!0,ckGlobalName:"CKEDITOR"})})):this.context.qeManager.getInstance().then((function(t){e.setState({ckReady:!0}),e.labelBundle=t.getLabelBundle("ckeditor")||{}}))}},{key:"componentDidUpdate",value:function(e,t){e.value!==this.props.value&&this.ckInstance.setData(this.props.value),t.ckGlobalName!==this.state.ckGlobalName&&(this.ckeditor.disableAutoInline=!0,this.ckeditor.replaceClass=null)}},{key:"shouldComponentUpdate",value:function(){return!this.skipRender||(this.skipRender=!1,!1)}},{key:"setUpCKEditor",value:function(){var e=this,t=this;this.ckeditor.on("dialogDefinition",(function(e){e.data.definition.resizable=t.ckeditor.DIALOG_RESIZE_NONE}));var n=a().cloneDeep(this.props.editorConfig)||{};this.props.disabled&&(n.readOnly=!0),n.disableNativeSpellChecker=!1,n.sharedSpaces={top:this.sharedSpaceHook},n.language=U.isRtl()?"ar":"en",this.ckInstance=this.ckeditor.inline(this.uniqueLabel,n),this.props.disabled&&this.ckInstance.focusManager.lock(),this.ckInstance.on("change",(function(){var t=xT.Z.sanitizeHTML(e.ckInstance.getData());e.skipRender=!0,e.props.onChange(t)})),this.ckInstance.on("focus",(function(){e.toolbar&&(e.toolbar.classList.add(DT.ckToolbarShow),e.resizeAndPositionEditor())})),this.ckInstance.on("blur",(function(){e.toolbar&&e.toolbar.classList.remove(DT.ckToolbarShow)})),this.ckInstance.on("instanceReady",(function(e){var t=e.editor;e.editor.editable().$.addEventListener("input",(function(e){"insertReplacementText"===e.inputType&&t.fire("change")})),e.editor.removeMenuItem&&e.editor.removeMenuItem("paste")})),this.ckInstance.on("langLoaded",(function(){var r=e.context.i18n.getCKEditorLabels(),i=t.ckeditor.lang[n.language];a().deepExtend(i,e.labelBundle,r)})),this.ckInstance.on("pluginsLoaded",(function(e){e.editor.addMenuItem&&(e.editor.addMenuGroup("info"),e.editor.addMenuItem("hint",{label:"Press "+(navigator.platform.toUpperCase().indexOf("MAC")>=0?"&#8984;":"Ctrl")+" + right click for native menu",group:"info"})),e.editor.contextMenu&&e.editor.contextMenu.addListener((function(){return{hint:window.LRNCKEDITOR.TRISTATE_OFF}}))})),window.addEventListener("resize",(function(){e.resizeAndPositionEditor()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.size?"".concat(DT.ck,"-").concat(t.size):"",r="".concat(DT.ck," ").concat(n),i=this.props.disabled||!this.state.ckReady;return this.state.ckReady&&!this.ckInstance&&this.setUpCKEditor(),zt.createElement("div",{"data-authorapi-selector":this.props.dataAuthorApiSelector},zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("label",{className:"lrn-form-label-name",htmlFor:t.label},t.label)),zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12"},zt.createElement("div",{className:"lrn-form-group"},t.description&&t.description.length>0&&zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},t.description),zt.createElement("div",{style:{position:"relative"}},zt.createElement("div",{id:this.sharedSpaceHook,className:DT.ckToolbar,ref:function(t){return e.toolbar=t}}),zt.createElement("form",{className:r},zt.createElement("textarea",{id:this.uniqueLabel,className:"lrn-form-control","data-authorapi-selector":t.inputDataAuthorApiSelector,defaultValue:t.value,disabled:i})))))))}}])&&TT(t.prototype,n),r&&TT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);RT.contextTypes={qeManager:jn().object,i18n:jn().object};const LT=RT;var NT={customConfig:"",toolbar:[{name:"clipboard",items:["Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","RemoveFormat"]},{name:"listandjustify",items:["NumberedList","BulletedList","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}],extraPlugins:"sharedspace,justify,undo,clipboard",removePlugins:"scayt, tableselection, magicline",title:!1,skin:"bootstrapck"};function IT(e){return(IT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FT(e,t){return(FT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qT(e);if(t){var i=qT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return HT(this,n)}}function HT(e,t){if(t&&("object"===IT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VT(e)}function VT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qT(e){return(qT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WT="lrn-author-settings-details",zT="lrn-author-settings-details-input-difficulty",GT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FT(e,t)}(o,e);var t,n,r,i=YT(o);function o(){var e;jT(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return UT(VT(e=i.call.apply(i,[this].concat(n))),"handleDifficultyChange",(function(t){var n=parseFloat(t.currentTarget.value);e._onChange(isNaN(n)?"":n,"difficulty")})),e}return t=o,(n=[{key:"_onChange",value:function(e,t){t.indexOf(".")>-1&&(t=t.split(".").pop());var n=this.props[t];if(""!==e||""!==n&&void 0!==n){var r=UT({},t,e);this.props.createUpdateState(r)}}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"generateField",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.context.i18n,s=i.labelName?i.labelName:t,l=this.props.initOptions,u=r.length>0?a().getNested(l,r):l,c=a().getNested(u,"".concat(t,".show")),d=a().getNested(u,"".concat(t,".edit")),f=t.replace(/_/g,"-"),p="settings".concat(this.capitalizeFirstLetter(s),"Label"),h="".concat(s,"Description"),m=a().extend({name:t,label:o.get(p),description:o.get(h),value:this.props[t],onChange:function(e){n._onChange(e.currentTarget.value,"".concat(r,".").concat(t))},onBlur:function(e){n._onChange(e.currentTarget.value.trim(),"".concat(r,".").concat(t))},disabled:!d,dataAuthorApiSelector:"item-settings-".concat(f,"-section"),inputDataAuthorApiSelector:"item-settings-".concat(f),shouldLoadCkBundle:l.shouldLoadCkBundle},i);return c&&zt.createElement(e,m)}},{key:"generateTextField",value:function(e,t,n){var r=this,i=t+"."+e;return this.generateField(LT,e,t,{editorConfig:NT,size:3===n?"medium":null,onChange:function(e){return r._onChange(e,i)},onBlur:function(e){return r._onChange(e.trim(),i)}})}},{key:"determineStatusOptions",value:function(){var e=this.context.i18n,t=[{value:"published",text:e.get("statusOptionsPublished")},{value:"unpublished",text:e.get("statusOptionsUnpublished")},{value:"archived",text:e.get("statusOptionsArchived")}],n=this.props.workflowConfig,r=this.props.workflowState;return n&&a().isString(r)?r===n.final_state_reference?t.filter((function(e){return"unpublished"!==e.value})):t.filter((function(e){return"published"!==e.value})):t}},{key:"render",value:function(){var e=this.context.i18n,t=this.props.initOptions.details,n=a().getNested(t,"status.show"),r=a().getNested(t,"scoring_type.show"),i=a().classNames(["lrn-col-xs-12"],{"lrn-col-sm-6":n&&r}),o=this.determineStatusOptions(),s=[{value:"per-question",text:e.get("scoringTypeOptionsPerQuestion")},{value:"dichotomous",text:e.get("scoringTypeOptionsDichotomous")},{value:"dependent",text:e.get("scoringTypeOptionsDependent")}];return zt.createElement("div",{className:WT},this.generateField(Ss,"reference","",{maxLength:150}),this.generateField(Ss,"title","",{maxLength:150}),zt.createElement("div",{className:"lrn-row"},zt.createElement("div",{className:i},this.generateField(Hs,"status","details",{options:o})),zt.createElement("div",{className:i},this.generateField(Hs,"scoring_type","details",{options:s,labelName:"scoringType"}))),this.generateTextField("description","details",3),this.generateField(Ss,"difficulty","details",{onChange:this.handleDifficultyChange,onBlur:this.handleDifficultyChange,type:"number",className:zT}),this.generateTextField("source","details",1),this.generateTextField("note","details",3),this.generateTextField("acknowledgements","details",1))}}])&&BT(t.prototype,n),r&&BT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);GT.contextTypes={app:jn().object,i18n:jn().object};const $T=function(e){return Ln((function(e){return{reference:e.data.reference,title:e.data.title,status:e.data.status,description:e.data.description,scoring_type:e.data.scoring_type,source:e.data.source,note:e.data.note,acknowledgements:e.data.acknowledgements,difficulty:e.data.difficulty,initOptions:e.initOptions,workflowState:e.data.workflowState,workflowConfig:e.data.workflowConfig}}),{createUpdateState:ET})(e)}(GT);const KT=Io({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wT:return a().deepExtend({},e,t.data);default:return e}},initOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}});const ZT=function(e){return function(t){return function(n){return function(r){var i=t.getState(),o=n(r),s=t.getState();return e&&!a().isEqual(i,s)&&e(s.data),o}}}};function JT(e){return(JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XT(e,t){return(XT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nO(e);if(t){var i=nO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tO(this,n)}}function tO(e,t){if(t&&("object"===JT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nO(e){return(nO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XT(e,t)}(o,e);var t,n,r,i=eO(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n={};Object.keys(a().omit(e,["initOptions","onChangeState"])).forEach((function(r){return t._setNewStateValue(n,e,r)})),a().isEmpty(n)||this.store.dispatch(ET(n))}},{key:"_setNewStateValue",value:function(e,t,n){t[n]!==this.props[n]&&t[n]!==this.store.getState().data[n]&&(e[n]=t[n])}},{key:"_setupStore",value:function(){var e=a().deepExtend({},a().mapObject(a().omit(this.props,["initOptions","onChangeState"]),(function(e){return null===e?void 0:e})));this.store=Lo(KT,{data:e,initOptions:this.props.initOptions},Fo.apply(null,function(e,t){var n=[_x.Z.withExtraArgument(e),ZT(t)];return!!window.MSInputMethodContext&&document.documentMode,n}(this.context.app,this.props.onChangeState)))}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement($T,null))}},{key:"getData",value:function(){var e=this.store.getState().data;return{reference:e.reference,title:e.title,status:e.status,description:e.description,source:e.source,note:e.note,"metadata.scoring_type":e.scoring_type,"metadata.acknowledgements":e.acknowledgements,"adaptive.difficulty":e.difficulty}}}])&&QT(t.prototype,n),r&&QT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);rO.contextTypes={app:jn().object};const iO=rO;var oO="UPDATE_STATE",aO=function(e){return{type:oO,data:e}};function sO(e){return(sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cO(e,t){return(cO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pO(e);if(t){var i=pO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fO(this,n)}}function fO(e,t){if(t&&("object"===sO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pO(e){return(pO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const hO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cO(e,t)}(o,e);var t,n,r,i=dO(o);function o(){return lO(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this;return zt.createElement("li",{className:"lrn-author-layout-column"},zt.createElement("button",{onClick:function(){return e.props.onClick(e.props.value)},onTouchStart:function(){return e.props.onClick(e.props.value)},className:"".concat(this.props.active?"active":""),"data-lrn-author-item-layout-button":this.props.type},zt.createElement("div",{className:"lrn-author-layout-icon-".concat(this.props.type,"-on")}),zt.createElement("div",{className:"lrn-author-layout-icon-".concat(this.props.type,"-off")}),zt.createElement("h5",null,this.props.name)))}}])&&uO(t.prototype,n),r&&uO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function mO(e){return(mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vO(e,t){return(vO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wO(e);if(t){var i=wO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _O(this,n)}}function _O(e,t){if(t&&("object"===mO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wO(e){return(wO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vO(e,t)}(o,e);var t,n,r,i=bO(o);function o(){return gO(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleLayoutClick",value:function(e){this.props.createUpdateState({columns:e})}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=[{type:"single",name:t.get("editorLayoutSingleColumn"),value:[100]},{type:"30_70",name:t.get("editorLayout3070"),value:[30,70]},{type:"70_30",name:t.get("editorLayout7030"),value:[70,30]},{type:"50_50",name:t.get("editorLayout5050"),value:[50,50]},{type:"40_60",name:t.get("editorLayout4060"),value:[40,60]},{type:"60_40",name:t.get("editorLayout6040"),value:[60,40]}],r=[];return a().each(n,(function(t){var n=a().isEqual(e.props.columns,t.value),i=zt.createElement(hO,{key:"layout_".concat(t.type),type:t.type,name:t.name,value:t.value,active:n,onClick:function(t){return e.handleLayoutClick(t)}});r.push(i)})),zt.createElement("ul",{"data-authorapi-selector":"lrn-author-settings-layout-columns"},r)}}])&&yO(t.prototype,n),r&&yO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);EO.contextTypes={i18n:jn().object};const SO=Ln((function(e){return{columns:e.data.columns}}),{createUpdateState:aO})(EO);function xO(e){return(xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OO(e,t){return(OO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=PO(e);if(t){var i=PO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AO(this,n)}}function AO(e,t){if(t&&("object"===xO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function PO(e){return(PO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OO(e,t)}(o,e);var t,n,r,i=CO(o);function o(){return kO(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t=this.props.tabValue,n=100===t;return zt.createElement("div",{className:"lrn-author-layout-tab lrn-tab-".concat(t),"data-authorapi-selector":this.props.dataAuthorApiSelector},zt.createElement("div",{className:"lrn-author-layout-wrapper"},zt.createElement("div",{className:"lrn-author-layout-title"},zt.createElement("h5",null,n?e.get("itemLayoutColumnLabel"):"".concat(this.props.tab," (").concat(t,"%)"))),zt.createElement("div",{className:"lrn-author-layout-content"},zt.createElement(Bl,{value:this.context.i18n.get("itemLayoutTabLabel"),onChange:this.props.onChange,checked:this.props.checked,selector:this.props.checkboxDataAuthorApiSelector}))))}}])&&TO(t.prototype,n),r&&TO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(MO,"contextTypes",{i18n:jn().object});const DO=MO;function RO(e){return(RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IO(e,t){return(IO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=FO(e);if(t){var i=FO(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BO(this,n)}}function BO(e,t){if(t&&("object"===RO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function FO(e){return(FO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IO(e,t)}(o,e);var t,n,r,i=jO(o);function o(){return LO(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleLeftColumnTabToggle",value:function(e){var t={tabs:a().cloneDeep(this.props.data.tabs)};t.tabs[0]=e.target.checked,this.props.createUpdateState(t)}},{key:"handleRightColumnTabToggle",value:function(e){var t={tabs:a().cloneDeep(this.props.data.tabs)};t.tabs[1]=e.target.checked,this.props.createUpdateState(t)}},{key:"render",value:function(){var e,t,n=this.context.i18n,r=this.props.data.tabs[0]||!1,i=this.props.data.tabs[1]||!1,o=this.props.data.columns;return o&&1!==o.length?(e=o[0],t=o[1]):(e=100,t=0),zt.createElement("div",{className:"lrn-author-layout-tabs"},zt.createElement(DO,{dataAuthorApiSelector:"lrn-author-tabs-col1",checkboxDataAuthorApiSelector:"itemLayoutTabLabel - Left",tab:n.get("itemLayoutLeftColumnLabel"),onChange:this.handleLeftColumnTabToggle.bind(this),tabValue:e,checked:r}),zt.createElement(DO,{dataAuthorApiSelector:"lrn-author-tabs-col2",checkboxDataAuthorApiSelector:"itemLayoutTabLabel - Right",tab:n.get("itemLayoutRightColumnLabel"),onChange:this.handleRightColumnTabToggle.bind(this),tabValue:t,checked:i}))}}])&&NO(t.prototype,n),r&&NO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);YO.contextTypes={i18n:jn().object};const HO=Ln((function(e){return{data:e.data}}),{createUpdateState:aO})(YO);function VO(e){return(VO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WO(e,t){return(WO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$O(e);if(t){var i=$O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GO(this,n)}}function GO(e,t){if(t&&("object"===VO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $O(e){return($O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WO(e,t)}(o,e);var t,n,r,i=zO(o);function o(){return qO(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleVerticalDividerToggle",value:function(e){this.props.createUpdateState({verticalDivider:e.target.checked})}},{key:"handleLongContentScrollingToggle",value:function(e){this.props.createUpdateState({scroll:e.target.checked})}},{key:"render",value:function(){return zt.createElement("div",{className:"lrn-author-layout-settings"},this.props.columnsEnabled&&zt.createElement(SO,null),this.props.tabsEnabled&&zt.createElement(HO,null),zt.createElement("div",{className:"lrn-author-layout-checkboxes-wrapper"},this.props.columnsEnabled&&zt.createElement(Bl,{value:this.context.i18n.get("itemLayoutVerticalDividerLabel"),onChange:this.handleVerticalDividerToggle.bind(this),checked:this.props.data.verticalDivider,selector:"itemLayoutVerticalDivider"}),zt.createElement(Bl,{value:this.context.i18n.get("itemLayoutEnableScrollingLabel"),onChange:this.handleLongContentScrollingToggle.bind(this),checked:this.props.data.scroll,selector:"itemLayoutEnableScrolling"})))}}])&&UO(t.prototype,n),r&&UO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(KO,"contextTypes",{i18n:jn().object});const ZO=Ln((function(e){return{data:e.data,columnsEnabled:e.initOptions.columns,tabsEnabled:e.initOptions.tabs}}),{createUpdateState:aO})(KO);const JO=Io({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===oO?a().deepExtend({},e,t.data):e},initOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}});const QO=function(e,t){return function(e){return function(n){return function(r){var i=e.getState(),o=n(r),s=e.getState();return t&&!a().isEqual(i,s)&&t(s.data),o}}}};function XO(e){return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tC(e,t){return(tC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iC(e);if(t){var i=iC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rC(this,n)}}function rC(e,t){if(t&&("object"===XO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function iC(e){return(iC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const oC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tC(e,t)}(o,e);var t,n,r,i=nC(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"_setupStore",value:function(){this.store=Lo(JO,{data:this.props.layoutData,initOptions:this.props.initOptions},Fo.apply(null,function(e,t){var n=[_x.Z.withExtraArgument(e),QO(e,t)];return!!window.MSInputMethodContext&&document.documentMode,n}(this.props.app,this.props.onChangeState)))}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement(ZO,null))}},{key:"getData",value:function(){return this.store.getState().data}}])&&eC(t.prototype,n),r&&eC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);var aC=__webpack_require__(67866),sC=__webpack_require__.n(aC),lC="CLEAR_DYNAMIC_DATA",uC="SET_DYNAMIC_DATA",cC="SET_MODE",dC="SET_VISIBILITY_FLAG";const fC=function(e){return{type:uC,data:e}};const pC=function(e){return{type:cC,data:e}};const hC=function(e,t){var n=sC().parseAsDynamicData(e),r=[];return t&&a().each(n.rows,(function(e){var t=e.values;t&&t.length&&a().each(t,(function(t,n){var i=function(e){return new S((function(t){if(Us(e,"http://")||Us(e,"https://")){var n=e.split(/\s+/)[0];(r=n,new S((function(e){var t=new XMLHttpRequest,n=200;t.addEventListener("load",(function(){t.status===n?e(t.getResponseHeader("Content-Type")):e("")})),t.addEventListener("error",(function(){return e("")})),t.addEventListener("abort",(function(){return e("")})),t.addEventListener("timeout",(function(){return e("")}));try{t.open("HEAD",r),t.send()}catch(t){e("")}}))).then((function(r){if(Us(r,"image/")){var i=e.replace(n,'<img src="'.concat(n,'" />'));t(i)}else t(e)}))}else t(e);var r}))}(t.trim());r.push(i),i.then((function(t){e.values[n]=t}))}))})),S.all(r).then((function(){return sC().parseAsCSV(n)}))};function mC(e){return(mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vC(e,t){return(vC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EC(e);if(t){var i=EC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _C(this,n)}}function _C(e,t){if(t&&("object"===mC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wC(e)}function wC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EC(e){return(EC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vC(e,t)}(o,e);var t,n,r,i=bC(o);function o(){var e;gC(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SC(wC(e=i.call.apply(i,[this].concat(n))),"state",{loading:!1}),e}return t=o,(n=[{key:"componentDidMount",value:function(){this.codeMirror||(this.codeMirror=TE().fromTextArea(this.textAreaElement,{mode:{},lineNumbers:!0,lineWrapping:!0}),a().isEmpty(this.props.dynamicData)||this.codeMirror.setValue(sC().parseAsCSV(this.props.dynamicData)),this.setFocus())}},{key:"componentDidUpdate",value:function(e){!e.isVisible&&this.props.isVisible&&this.setFocus()}},{key:"setFocus",value:function(){this.codeMirror.refresh(),this.codeMirror.focus()}},{key:"isCSVDataValid",value:function(){var e,t=this.context.i18n;try{var n=sC().parseAsArrays(this.codeMirror.getValue()),r=n[0];n.slice(1).every((function(e){return e.length===r.length}))||(e=t.get("csvColumnsUnaligned"))}catch(n){e=t.get("cannotParseCsv")}return void 0===e||(alert(e),!1)}},{key:"handleDataPreview",value:function(){var e=this;if(this.isCSVDataValid()){var t=this.codeMirror.getValue();this.setState({loading:!0}),hC(t,this.props.dynamicImageTagEnabled).then((function(t){var n=sC().parseAsDynamicData(t);e.props.createSetDynamicData(n),e.props.createSetMode("preview")}))}}},{key:"render",value:function(){var e=this,t=this.context.i18n;return zt.createElement("div",{className:"lrn-author-datatable-editor"},zt.createElement("div",{className:"lrn-author-datatable-source"},zt.createElement("div",{className:"lrn-author-datatable-header"},zt.createElement("label",{className:"lrn-form-label-name"},t.get("dataTableHeader"))),zt.createElement("div",{className:"lrn-author-datatable-source-wrapper"},zt.createElement("textarea",{ref:function(t){return e.textAreaElement=t},"data-authorapi-selector":"data-table-textarea"})),zt.createElement("div",{className:"lrn-author-datatable-footer"},zt.createElement(Ar,{onClick:function(){return e.handleDataPreview()},text:t.get("dataTableContinue"),dataAuthorApiSelector:"datatable-source-continue",size:"small",color:"primary",lds:this.props.lds}),this.state.loading&&zt.createElement("div",{className:"lrn-author-datatable-spinner"}))))}}])&&yC(t.prototype,n),r&&yC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);xC.contextTypes={i18n:jn().object};const kC=Ln((function(e){return{dynamicData:e.dynamicData,isVisible:e.isVisible,dynamicImageTagEnabled:a().getNested(e,"initOptions.dynamic_image_tag")||!1,lds:e.initOptions.config.beta_flags.lds}}),{createSetDynamicData:fC,createSetMode:pC})(xC);function TC(e){return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AC(e,t){return(AC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=DC(e);if(t){var i=DC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MC(this,n)}}function MC(e,t){if(t&&("object"===TC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function DC(e){return(DC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var RC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AC(e,t)}(o,e);var t,n,r,i=PC(o);function o(){return OC(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n;return zt.createElement("div",{className:"lrn-author-datatable-disabled"},zt.createElement("h2",null,e.get("mathGenDisabledTableEditHeader")),zt.createElement("div",{className:"lrn-author-datatable-disabled-img"}),zt.createElement("p",null,e.get("mathGenDisabledTableEditTopText")),zt.createElement("p",null,e.get("mathGenDisabledTableEditBottomText")))}}])&&CC(t.prototype,n),r&&CC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);RC.contextTypes={i18n:jn().object};const LC=RC;const NC=function(){return{type:lC}};function IC(e){return(IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FC(e,t){return(FC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=VC(e);if(t){var i=VC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return HC(this,n)}}function HC(e,t){if(t&&("object"===IC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function VC(e){return(VC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FC(e,t)}(o,e);var t,n,r,i=YC(o);function o(){return jC(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleDataEditor",value:function(){this.props.createSetMode("edit")}},{key:"confirmResetDynamicData",value:function(){this.props.createClearDynamicData(),this.handleDataEditor()}},{key:"render",value:function(){var e=this,t=[];null!==this.props.dynamicData&&(t=sC().parseAsArrays(sC().parseAsCSV(this.props.dynamicData)));var n=t.length,r=this.context.i18n,i=[],o=[];if(n>0){var s=[];a().each(t[0],(function(e,t){s.push(zt.createElement("th",{className:"renderable",key:"theader_".concat(t)},e.trim()))})),i.push(zt.createElement("tr",{key:"theader"},s))}for(var l=function(e){var n=t[e],r=[];a().each(n,(function(t,n){r.push(zt.createElement("td",{className:"string-cell renderable",key:"tbody_".concat(e,"_").concat(n)},t.trim()))})),o.push(zt.createElement("tr",{key:"tbody_".concat(e)},r))},u=1;u<n;u++)l(u);return zt.createElement("div",{className:"lrn-author-datatable-preview"},zt.createElement("div",{className:"lrn-author-datatable-source"},zt.createElement("div",{className:"lrn-author-datatable-header"},zt.createElement("label",{className:"lrn-form-label-name"},r.get("dataTableHeader")),zt.createElement(Qw,{dataAuthorApiSelector:"datatable-preview-reset",confirmText:r.get("dataTableConfirm"),defaultText:r.get("dataTableReset"),iconClassName:"lrn-i-reload",alignRight:!0,onConfirm:function(){return e.confirmResetDynamicData()}})),zt.createElement("div",{className:"lrn-author-datatable-table-wrapper"},zt.createElement("table",{className:"backgrid backgrid-striped"},zt.createElement("thead",null,i),zt.createElement("tbody",null,o))),zt.createElement("div",{className:"lrn-author-datatable-footer"},zt.createElement(Ar,{text:r.get("dataTablePreviewBack"),onClick:function(){return e.handleDataEditor()},extraClasses:a().classNames("lrn-btn-edit",{"lrn-i-edit":!this.props.lds}),dataAuthorApiSelector:"datatable-preview-edit",size:"small",color:"primary",lds:this.props.lds}))))}}])&&BC(t.prototype,n),r&&BC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);qC.contextTypes={i18n:jn().object};const UC=Ln((function(e){return{dynamicData:e.dynamicData,lds:e.initOptions.config.beta_flags.lds}}),{createClearDynamicData:NC,createSetMode:pC})(qC);function WC(e){return(WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $C(e,t){return($C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=JC(e);if(t){var i=JC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ZC(this,n)}}function ZC(e,t){if(t&&("object"===WC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function JC(e){return(JC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$C(e,t)}(o,e);var t,n,r,i=KC(o);function o(){return zC(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return!0===this.props.isMathGen?zt.createElement(LC,null):"edit"===this.props.mode?zt.createElement(kC,null):zt.createElement(UC,null)}}])&&GC(t.prototype,n),r&&GC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const XC=Ln((function(e){return{mode:e.mode,isMathGen:e.isMathGen}}))(QC),eA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case uC:var n=a().omit(e,"dynamicData"),r=a().isEmpty(t.data)?null:t.data;return a().deepExtend({},n,{dynamicData:r});case cC:return a().deepExtend({},e,{mode:t.data});case dC:return a().deepExtend({},e,{isVisible:t.data});case lC:return a().deepExtend({},e,{dynamicData:null});default:return e}};function tA(e,t){return a().isNull(e)||a().isNull(t)?a().isEqual(e,t):sC().parseAsCSV(e)===sC().parseAsCSV(t)}const nA=function(e){return function(t){return function(n){return function(r){var i=t.getState(),o=n(r),a=t.getState(),s=!tA(i.dynamicData,a.dynamicData);return e&&s&&e({dynamicData:a.dynamicData}),o}}}};const rA=function(e){return{type:dC,data:e}};function iA(e){return(iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aA(e,t){return(aA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uA(e);if(t){var i=uA(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lA(this,n)}}function lA(e,t){if(t&&("object"===iA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uA(e){return(uA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aA(e,t)}(o,e);var t,n,r,i=sA(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isVisible!==this.props.isVisible&&e.isVisible!==this.store.getState().isVisible&&this.store.dispatch(rA(e.isVisible))}},{key:"_setupStore",value:function(){var e=a().isEmpty(this.props.dynamicData)?null:this.props.dynamicData;this.store=Lo(eA,{dynamicData:e,mode:e?"preview":"edit",isMathGen:this.props.isMathGen,isVisible:this.props.isVisible,initOptions:this.props.initOptions},Fo.apply(null,function(e,t){var n=[_x.Z.withExtraArgument(e),nA(t)];return!!window.MSInputMethodContext&&document.documentMode,n}(this.context.app,this.props.onChangeState)))}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement(XC,null))}},{key:"getData",value:function(){return{dynamicData:this.store.getState().dynamicData}}}])&&oA(t.prototype,n),r&&oA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);cA.contextTypes={app:jn().object};const dA=cA;var fA={item:[{value:"onLoad",text:"Item loaded"}],widget:[{value:"change",text:"Widget changed"},{value:"complete",text:"Widget completed",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"recording:started",text:"Recording started",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording:paused",text:"Recording paused",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording:resumed",text:"Recording resumed",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording:stopped",text:"Recording stopped",supportedWidgets:{questions:["audio"],features:[]}},{value:"playback:started",text:"Playback started",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}},{value:"playback:paused",text:"Playback paused",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}},{value:"playback:resumed",text:"Playback resumed",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}},{value:"playback:complete",text:"Playback completed",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}},{value:"playback:stopped",text:"Playback stopped",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}}]},pA={item:[{value:"pause",text:"Pause"},{value:"resume",text:"Resume"},{value:"next",text:"Go to next Item"},{value:"navigation:enable",text:"Enable navigation"},{value:"navigation:disable",text:"Disable navigation"},{value:"widgets:disable",text:"Disable all widgets"},{value:"widgets:enable",text:"Enable all widgets"}],widget:[{value:"enable",text:"Enable",supportedWidgets:{features:["audioplayer","calculator","imagetool","videoplayer"]}},{value:"disable",text:"Disable",supportedWidgets:{features:["audioplayer","calculator","imagetool","videoplayer"]}},{value:"begin",text:"Begin",supportedWidgets:{questions:["audio"],features:["audioplayer","videoplayer"]}},{value:"recording.start",text:"Start recording",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording.pause",text:"Pause recording",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording.resume",text:"Resume recording",supportedWidgets:{questions:["audio"],features:[]}},{value:"recording.stop",text:"Stop recording",supportedWidgets:{questions:["audio"],features:[]}},{value:"response.play",text:"Play response",supportedWidgets:{questions:["audio"],features:[]}},{value:"response.pause",text:"Pause response",supportedWidgets:{questions:["audio"],features:[]}},{value:"response.resume",text:"Resume response",supportedWidgets:{questions:["audio"],features:[]}},{value:"response.seek",text:"Seek response",supportedWidgets:{questions:["audio"],features:[]}},{value:"response.stop",text:"Stop response",supportedWidgets:{questions:["audio"],features:[]}},{value:"audio.play",text:"Play",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"audio.pause",text:"Pause",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"audio.resume",text:"Resume",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"audio.seek",text:"Seek",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"audio.stop",text:"Stop",supportedWidgets:{questions:[],features:["audioplayer"]}},{value:"video.play",text:"Play",supportedWidgets:{questions:[],features:["videoplayer"]}},{value:"video.pause",text:"Pause",supportedWidgets:{questions:[],features:["videoplayer"]}},{value:"video.resume",text:"Resume",supportedWidgets:{questions:[],features:["videoplayer"]}},{value:"video.seek",text:"Seek",supportedWidgets:{questions:[],features:["videoplayer"]}},{value:"video.stop",text:"Stop",supportedWidgets:{questions:[],features:["videoplayer"]}}]};function hA(e){return(hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mA=function(e){var t=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.children[0].attributes,r={},i=0;i<n.length;i++){var o=n[i],a=o.name,s=o.value;r[a]=s}return r}(e=e.replace(/\\"/gi,'"')),n=t["data-simplefeature_id"],r=t["data-image"],i=t["data-type"];return{reference:n,value:t["data-src"],image:r,type:i,widget_type:"feature"}},gA=function(e){return(JSON.stringify(e).match(/<span[^>]*(class=\\"learnosity-feature\\")[^>]*>\s*<\/span>/gi)||[]).map(mA)},yA=function(e){var t={};return e?(function(e,t){["event","action"].forEach((function(n){var r=t[n];if("string"==typeof r){"action"===n&&(r=EA(r));var i=[],o=r.split(":"),a=1;for(e["".concat(n,"Type")]=o[0],"widget"===o[0]&&(e["".concat(n,"Reference")]=o[1],a++);a<o.length;)i.push(o[a]),a++;e["".concat(n,"Name")]=i.join(":")}}))}(t,e),e.delay&&"number"==typeof e.delay&&(t.delay=e.delay),e.args&&"object"===hA(e.args)&&!Array.isArray(e.args)&&(t.args=e.args),t):t},vA=function(e,t,n){var r=t["".concat(n,"Type")],i="".concat(n,"Name"),o=a().map(e[r],(function(e){return e.value}));return a().contains(["item","widget"],r)&&a().contains(o,t[i])},bA=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={event:fA,action:pA},r=yA(e),i=Object.keys(n).every((function(i){var o=e[i],a=void 0===o,s="string"==typeof o&&""===o.trim();return!t&&(a||s)||vA(n[i],r,i)})),o=e.delay,a=e.args,s=void 0===o||"number"==typeof o,l=void 0===a||"object"===hA(a)&&!Array.isArray(a);return s&&l&&i},_A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e||[]).every((function(e){return bA(e,t)}))},wA=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={event:fA,action:pA},r=a().deepExtend({},e),i=yA(e);return["event","action"].forEach((function(e){void 0!==r[e]&&("string"!=typeof r[e]||t&&!vA(n[e],i,e)?r[e]="":"action"===e&&(r[e]=EA(r[e])))})),void 0!==r.delay&&"number"!=typeof r.delay&&delete r.delay,void 0===r.args||"object"===hA(r.args)&&null!==r.args||delete r.args,r},EA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^(navigation:(enable|disable))$/,(function(e){return"item:".concat(e)}))};function SA(e){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function TA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OA(e,t){return(OA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=MA(e);if(t){var i=MA(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AA(this,n)}}function AA(e,t){if(t&&("object"===SA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PA(e)}function PA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MA(e){return(MA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RA="widget",LA="item",NA={value:"--",text:"--"},IA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OA(e,t)}(o,e);var t,n,r,i=CA(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),DA(PA(n=i.call(this,e)),"handleChange",(function(e,t){var r=t.currentTarget.value,i=n.state["action"===e?"selectedActionRef":"selectedEventRef"];r===NA.value&&(r=""!==i?"".concat(RA,":").concat(i):LA),n.props.onChange(e,r)})),DA(PA(n),"handleDelayChange",(function(e){var t=parseFloat(e.currentTarget.value);n.props.onChange("delay",isNaN(t)?void 0:1e3*t)})),DA(PA(n),"handleSelectedRefChange",(function(e,t){var r=t.currentTarget.value;n.setState(DA({},e,r));var i="";""===r?i=LA:r!==NA.value&&(i="".concat(RA,":").concat(r)),n.props.onChange("selectedEventRef"===e?"event":"action",i)})),n.currentItemOption={value:"",text:t.i18n.get("settingsActionBuilderCurrenItemOptionLabel")},n.state=n.getSelectedRefs(e),n.processWidgets(),n}return t=o,(n=[{key:"getSelectedRefs",value:function(e){var t=e.step,n=t.action,r=void 0===n?"":n,i=t.event,o=/^widget\:([^:]+)(?:\:.+)*$/,a=/^item(\:.*)?$/,s=xA([r,void 0===i?"":i].map((function(e){var t=e.match(o)||[],n=e.match(a)||[];return t.length>1?t[1]:n.length>1?"":NA.value})),2);return{selectedActionRef:s[0],selectedEventRef:s[1]}}},{key:"processWidgets",value:function(){this.widgetInstances=this.props.widgetInstances.map((function(e){return a().extend({simpleFeatures:gA(e)},e)}))}},{key:"getWidget",value:function(e,t){t=t||this.widgetInstances||[];for(var n=0;n<t.length;n++){var r=t[n];if(r=r.reference!==e?r.simpleFeatures&&this.getWidget(e,r.simpleFeatures):r)return r}}},{key:"getOptions",value:function(e,t){var n=[NA];if(t!==NA.value){var r=""===t?LA:RA,i=e[r];if(r===RA){var o=this.getWidget(t);if(!o)return n;var s="feature"===o.widget_type?"features":"questions";i=i.filter((function(e){return!e.supportedWidgets||!e.supportedWidgets[s]||a().contains(e.supportedWidgets[s],o.type)}))}var l=r===RA?"".concat(r,":").concat(t):r;n=n.concat(i.map((function(e){var t=e.value,n=e.text;return{value:"".concat(l,":").concat(t),text:n}})))}return n}},{key:"getAvailableEvents",value:function(){return this.getOptions(fA,this.state.selectedEventRef)}},{key:"getAvailableActions",value:function(){return this.getOptions(pA,this.state.selectedActionRef)}},{key:"getReferenceOptions",value:function(){var e={},t=this.context.i18n;this.widgetInstances.reduce((function(e,t){var n=t.type,r=t.reference,i=t.widget_type,o=t.simpleFeatures;return e[i]||(e[i]=[]),e[i].push({value:r,text:"".concat(n," - ").concat(r)}),(o||[]).forEach((function(t){var n=t.reference,r=t.type,o=t.image,s=t.value,l=-1!==a().indexOf(["audioplayer","videoplayer"],r),u=-1!==a().indexOf(["imagetool"],r),c="";if(s&&l){var d=s.match(/[^/]+$/g);d&&d.length&&(c=" - ".concat(d[0]))}else o&&u&&(c=" - ".concat(o));e[i].push({value:n,text:"↳ ".concat(r.replace("player","")).concat(c)})})),e}),e);var n=Object.keys(e).map((function(n){return{text:"response"===n?t.get("settingsActionBuilderQuestionsOptGroupLabel"):t.get("settingsActionBuilderFeaturesOptGroupLabel"),options:e[n]}}));return[NA,this.currentItemOption].concat(n)}},{key:"getDelayInSeconds",value:function(){var e=this.props.step.delay;return null!=e?e/1e3:void 0}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){JSON.stringify(this.props.step)!==JSON.stringify(e.step)&&this.setState(this.getSelectedRefs(e))}},{key:"render",value:function(){var e,t=this.context.i18n,n={wideSelect:a().classNames("lrn-col-xs-12","lrn-col-sm-8"),narrowSelect:a().classNames("lrn-col-xs-12","lrn-col-sm-4"),actionDelayInput:"lrn-author-action-builder-input-delay",actionArgsLabel:"lrn-form-label-name"},r=this.getReferenceOptions(),i=this.getDelayInSeconds(),o=this.props.step.args;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-row"},zt.createElement(Hs,{className:n.wideSelect,label:t.get("settingsActionBuilderEventOriginLabel"),options:r,value:this.state.selectedEventRef,onChange:this.handleSelectedRefChange.bind(this,"selectedEventRef")}),zt.createElement(Hs,{className:n.narrowSelect,label:t.get("settingsActionBuilderEventNameLabel"),options:this.getAvailableEvents(),value:this.props.step.event,onChange:this.handleChange.bind(this,"event"),disabled:this.state.selectedEventRef===NA.value})),zt.createElement("div",{className:"lrn-row"},zt.createElement(Hs,{className:n.wideSelect,label:t.get("settingsActionBuilderActionTargetLabel"),options:this.getReferenceOptions(),value:this.state.selectedActionRef,onChange:this.handleSelectedRefChange.bind(this,"selectedActionRef")}),zt.createElement(Hs,{className:n.narrowSelect,label:t.get("settingsActionBuilderActionNameLabel"),options:this.getAvailableActions(),value:this.props.step.action,onChange:this.handleChange.bind(this,"action"),disabled:this.state.selectedActionRef===NA.value})),zt.createElement(Ss,{className:n.actionDelayInput,label:t.get("settingsActionBuilderDelayLabel"),value:void 0!==i?i:"",onChange:this.handleDelayChange,type:"number"}),o&&a().isObject(o)&&Object.keys(o).length>0&&zt.createElement("div",null,zt.createElement("h3",{className:n.actionArgsLabel},t.get("settingsActionBuilderActionArgsLabel")),zt.createElement("pre",null,zt.createElement("code",null,(e=o,Object.keys(e).map((function(t){return"".concat(t,": ").concat(JSON.stringify(e[t]))})).join(",\n"))))))}}])&&TA(t.prototype,n),r&&TA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function jA(e){return(jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YA(e,t){return(YA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UA(e);if(t){var i=UA(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VA(this,n)}}function VA(e,t){if(t&&("object"===jA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qA(e)}function qA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UA(e){return(UA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}DA(IA,"contextTypes",{i18n:jn().object}),DA(IA,"defaultProps",{widgetInstances:[],onChange:a().noop});var zA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YA(e,t)}(o,e);var t,n,r,i=HA(o);function o(){var e;BA(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return WA(qA(e=i.call.apply(i,[this].concat(n))),"handleChange",(function(t,n){"setValue"!==n.origin&&e.props.onChange(e.getValue())})),e}return t=o,(n=[{key:"UNSAFE_componentWillUpdate",value:function(){this.cursor=this.codeMirror.getCursor()}},{key:"componentDidUpdate",value:function(){this.updateCodeMirror(),this.codeMirror.refresh(),this.codeMirror.setCursor(this.cursor)}},{key:"componentDidMount",value:function(){this.codeMirror=TE().fromTextArea(this.textareaElement,this.props.options),this.updateCodeMirror(),this.codeMirror.on("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){this.codeMirror.off("change",this.handleChange)}},{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value}},{key:"updateCodeMirror",value:function(){var e=this.props.value;void 0!==e&&(this.codeMirror.setValue(CE()(e)),this.codeMirror.refresh())}},{key:"getValue",value:function(){return this.codeMirror.getValue()}},{key:"render",value:function(){var e=this;return zt.createElement("textarea",{ref:function(t){return e.textareaElement=t}})}}])&&FA(t.prototype,n),r&&FA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function GA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}WA(zA,"defaultProps",{onChange:function(){},options:{mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0}});var KA=function(e){var t,n,r,i=a().isString(e.state)?e.state:"initial",o=[],s=[];return a().isObject(e.configuration)&&(a().isBoolean(e.configuration.htmlCleaner)&&(t=e.configuration.htmlCleaner,delete e.configuration.htmlCleaner),a().isBoolean(e.configuration.showCorrectAnswers)&&(n=e.configuration.showCorrectAnswers,delete e.configuration.showCorrectAnswers),a().isArray(e.configuration.ignore_question_attributes)&&(a().contains(e.configuration.ignore_question_attributes,"validation")||a().contains(e.configuration.ignore_question_attributes,"valid_responses"))&&(r={fetch_validation:!0})),e.items.forEach((function(e){a().isArray(e.questions)&&e.questions.length>0&&(o=o.concat(e.questions),delete e.questions),a().isArray(e.features)&&e.features.length>0&&(s=s.concat(e.features),delete e.features)})),{state:i,htmlCleaner:t,showCorrectAnswers:n,metadata:r,questions:o,features:s}},ZA=function(e,t){var n=(t||[]).filter((function(t){return t.reference===e}));return n[0]&&n[0].data||{}},JA=null;const QA=function(e,t,n,r,i,o,s){var l=a().map(i,a().clone);l.forEach((function(e){!function(e,t){e.feature_ids=[];var n=e.features;(void 0===n?[]:n).forEach((function(n){a().extend(n,ZA(n.reference,t),{feature_id:n.reference}),e.feature_ids.push(n.reference)}))}(e,o),function(e,t){e.response_ids=[];var n=e.questions;(void 0===n?[]:n).forEach((function(n){a().extend(n,ZA(n.reference,t),{response_id:n.reference}),e.response_ids.push(n.reference)}))}(e,o)}));var u={configuration:{questionsApiVersion:"v2"},state:"initial",navigation:!1,items:l},c=a().extend(u,{questionsApiActivity:a().extend({type:"local_practice",user_id:"authorapi"},KA(u))}),d=Ld.loadLearnosityApi("assess"),f=s.request({url:"/questionsactivity",data:{request:JSON.stringify(c.questionsApiActivity)}});return S.all([d,f]).then((function(i){var o=GA(i,2)[1];o&&a().extend(c.questionsApiActivity,o.data);var s={metricsContext:r.getContext(),readyListener:t,errorListener:function(e){if(JA&&JA.reset)try{JA.reset()}catch(e){}n(e)}};try{JA=window.LearnosityAssess.init(c,e,s)}catch(e){n(e)}return JA}))};var XA="lrn-author-takeover",eP={root:XA,header:["".concat(XA,"-header"),"lrn-author-ui-no-preview"],title:"".concat(XA,"-title"),actions:"".concat(XA,"-actions"),closeButton:"".concat(XA,"-close-btn"),body:"".concat(XA,"-body"),footer:"".concat(XA,"-footer")};const tP=function(e){var t=e.children;return zt.createElement("div",{className:eP.body},t)};const nP=function(e){var t=e.title,n=e.actions,r=void 0===n?[]:n,i=e.onClose,o=e.children,s=e.headerRef;return zt.createElement("div",{className:a().classNames(eP.header),ref:s},zt.createElement("div",{className:eP.title},t),zt.createElement("div",{className:eP.actions},r,zt.createElement(cs,{className:eP.closeButton,onClick:i,authorApiSelector:"".concat(eP.root,"-exit-button")})),o)};const rP=function(e){var t=e.children;return zt.createElement("div",{className:eP.footer},t)};const iP=Qa((function(e){var t=e.className,n=e.style,r=e.title,i=e.onClose,o=e.headerActions,s=e.children,l=e.headerRef,u=e.footer;return zt.createElement("div",{className:a().classNames(eP.root,t),style:n},zt.createElement(nP,{title:r,actions:o,onClose:i,headerRef:l}),zt.createElement(tP,null,s),u&&zt.createElement(rP,null,u))}));function oP(e){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lP(e,t){return(lP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fP(e);if(t){var i=fP(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cP(this,n)}}function cP(e,t){if(t&&("object"===oP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dP(e)}function dP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fP(e){return(fP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hP="item:next",mP="lrn-author-assess-preview",gP={root:mP,reloadPreviewBtn:a().classNames("lrn-btn-responsive","lrn-btn-icon-left","lrn-author-btn-outline","".concat(mP,"-reload-preview-btn")),reloadPreviewIcon:a().classNames("lrn-i-reload","lrn-xs-no-margin"),errorMsg:"".concat(mP,"-error-msg")},yP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lP(e,t)}(o,e);var t,n,r,i=uP(o);function o(){var e;aP(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pP(dP(e=i.call.apply(i,[this].concat(n))),"previewDomHookId","".concat(mP,"-hook-").concat(a().uuid())),pP(dP(e),"_closeRequested",!1),pP(dP(e),"state",{assessAppReady:!1,error:!1}),pP(dP(e),"onReady",(function(){e._closeRequested||e.setState({assessAppReady:!0})})),pP(dP(e),"onError",(function(t){e._closeRequested||(e.setState({error:!0}),e.context.app.errorUtil.handle(t))})),pP(dP(e),"tryReset",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e.assessApp.reset(),e.assessApp=void 0}catch(n){t&&e.setState({error:!0})}})),pP(dP(e),"reloadPreview",(function(){e.reset(),e.loadPreview()})),pP(dP(e),"loadPreview",(function(){var t=e.props,n=t.item,r=t.workflow,i=t.widgetInstances,o=e.context,s=o.i18n,l=o.app.component.comms,u=o.metricsUtil,c=a().extend({},n,{id:n.reference,workflow:r}),d=a().uuid(),f={reference:d,content:'<span class="learnosity-response question-'.concat(d,'"></span>'),questions:[{reference:d}]},p=[c],h=a().cloneDeep(i);r.some((function(e){return e.action===hP}))&&(p.push(f),h.push({reference:d,data:{stimulus:'<p style="text-align: center">\n                        '.concat(s.get("settingsActionBuilderPreviewDummyItemText"),"\n                    </p>"),type:"mcq"}})),QA(e.previewDomHookId,e.onReady,e.onError,u,p,h,l).then((function(t){return e.assessApp=t})),e.setState({assessAppReady:!1,error:!1})})),pP(dP(e),"handleClose",(function(){e._closeRequested=!0,e.props.onClose()})),e}return t=o,(n=[{key:"reset",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.assessApp&&(this.state.assessAppReady&&a().isFunction(this.assessApp.reset)?this.tryReset(t):this.assessApp.on("test:ready",(function(){e.tryReset(t)})))}},{key:"componentDidMount",value:function(){this.loadPreview()}},{key:"componentWillUnmount",value:function(){this.reset(!1)}},{key:"render",value:function(){var e=this.context.i18n,t=this.state,n=t.assessAppReady,r=t.error;return zt.createElement(iP,{className:gP.root,title:e.get("settingsActionBuilderPreviewTitle"),headerActions:[(n||r)&&zt.createElement("button",{key:1,type:"button",className:gP.reloadPreviewBtn,onClick:this.reloadPreview},zt.createElement("span",{className:gP.reloadPreviewIcon}),zt.createElement("span",{className:"lrn-col-xs-none"},e.get("settingsActionBuilderReloadPreview")))],onClose:this.handleClose},r&&zt.createElement("p",{className:gP.errorMsg},e.get("settingsActionBuilderPreviewErrorMessage")),zt.createElement("div",{id:this.previewDomHookId}))}}])&&sP(t.prototype,n),r&&sP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function vP(e){return(vP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bP(){return(bP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EP(e,t){return(EP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TP(e);if(t){var i=TP(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xP(this,n)}}function xP(e,t){if(t&&("object"===vP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kP(e)}function kP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TP(e){return(TP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pP(yP,"contextTypes",{i18n:jn().object,app:jn().object,metricsUtil:jn().object}),pP(yP,"defaultProps",{workflow:[],widgetInstances:[]});var CP="lrn-author-action-builder",AP={root:CP,header:a().classNames("lrn-author-actions-settings-header","lrn-author-actions-settings-header-action-builder"),section:"lrn-author-actions-settings-section",title:a().classNames("lrn-author-actions-settings-title"),subTitle:a().classNames("lrn-author-subheading","lrn-author-actions-settings-subtitle"),step:a().classNames("".concat(CP,"-step")),stepTitle:a().classNames("".concat(CP,"-step-title")),removeStepIcon:"lrn-i-trash",removeStepBtn:a().classNames("lrn-btn","lrn-btn-default","".concat(CP,"-remove-step-btn")),addStepIcon:"lrn-i-plus",addStepBtn:a().classNames("lrn-btn","lrn-btn-primary","lrn-btn-icon-left","".concat(CP,"-add-step-btn")),viewSourceIcon:"lrn-i-source",viewSourceBtn:a().classNames("lrn-btn-icon-left","lrn-author-btn-outline","".concat(CP,"-view-source-btn")),sourceSection:"".concat(CP,"-source-section"),previewIcon:"lrn-i-preview",previewBtn:a().classNames("lrn-btn-icon-left","lrn-author-btn-outline","".concat(CP,"-preview-btn")),alertMessage:a().classNames("lrn-alert","lrn-alert-danger","".concat(CP,"-error-msg")),alertIcon:"lrn-i-cross"},PP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}(o,e);var t,n,r,i=SP(o);function o(){var e;_P(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return OP(kP(e=i.call.apply(i,[this].concat(n))),"state",{workflow:e.props.workflow?a().cloneDeep(e.props.workflow):[],sourceVisible:!1,previewVisible:!1,workflowError:!1}),OP(kP(e),"handleChange",(function(t){var n=e.state.workflow,r=e.context.i18n;try{var i=""!==t?JSON.parse(t):[],o=JSON.stringify(i)!==JSON.stringify(n);if(o||e.state.workflowError){var a=_A(i);e.setState({workflow:i,workflowError:!a,errorMessage:a?void 0:r.get("settingsActionBuilderIncompatibleJSONMessage")},(function(){o&&e.props.onChange(t)}))}}catch(t){e.setState({workflowError:!0,errorMessage:r.get("settingsActionBuilderInvalidJSONMessage")})}})),OP(kP(e),"addWorkflowStep",(function(){e.setState((function(e){return{workflow:e.workflow.concat({event:"",action:""})}}),(function(){return e.props.onChange(e.getStringValue(e.state.workflow))}))})),OP(kP(e),"removeWorkflowStep",(function(t){e.setState((function(n){var r={workflow:[].concat(n.workflow)};return r.workflow.splice(t,1),n.workflowError&&a().deepExtend(r,e.getErrorState(r.workflow)),r}),(function(){return e.props.onChange(e.getStringValue(e.state.workflow))}))})),OP(kP(e),"updateWorkflowStep",(function(t,n,r){e.setState((function(i){var o={workflow:[].concat(i.workflow)};return o.workflow[t][n]=r,i.workflowError&&a().deepExtend(o,e.getErrorState(o.workflow)),o}),(function(){return e.props.onChange(e.getStringValue(e.state.workflow))}))})),OP(kP(e),"togglePreview",(function(){e.setState({previewVisible:!0}),e.props.previewChange(!0)})),OP(kP(e),"toggleSource",(function(){var t=e.state,n=t.sourceVisible,r=t.workflowError,i=t.errorMessage,o={sourceVisible:!n},a=e.context.i18n;r&&i===a.get("settingsActionBuilderInvalidJSONMessage")&&(o.errorMessage=void 0),e.setState(o)})),OP(kP(e),"closePreview",(function(){e.setState({previewVisible:!1}),e.props.previewChange(!1)})),e}return t=o,(n=[{key:"getData",value:function(){return this.state.workflow.map((function(e){return wA(e)}))}},{key:"getStringValue",value:function(e){return e&&e.length>0?JSON.stringify(e):""}},{key:"getErrorState",value:function(e){var t=_A(e),n={};return n.workflowError=!t,t||(n.errorMessage=this.context.i18n.get("settingsActionBuilderIncompatibleJSONMessage")),n}},{key:"render",value:function(){var e=this,t=this.state,n=t.workflow,r=t.previewVisible,i=this.getData(),o=this.props,s=o.item,l=o.widgetInstances,u=this.context.i18n,c=0===n.length||!_A(n,!0),d=this.props.lds?{size:"small",color:"primary"}:null;return zt.createElement("div",{className:AP.root},r&&zt.createElement(yP,{item:s,workflow:i,widgetInstances:l,onClose:this.closePreview}),zt.createElement("div",{className:AP.header},zt.createElement("h3",{className:AP.title},u.get("settingsActionBuilderTitle")),zt.createElement("h4",{className:AP.subTitle},u.get("settingsActionBuilderSubtitle"))),zt.createElement("div",{className:AP.section},zt.createElement("button",{type:"button",className:a().classNames(AP.previewBtn,{"lrn-author-disabled":c}),disabled:c,onClick:this.togglePreview.bind(this)},zt.createElement("span",{className:AP.previewIcon}),u.get("settingsActionBuilderPreview")),zt.createElement("button",{type:"button",className:AP.viewSourceBtn,onClick:this.toggleSource},zt.createElement("span",{className:AP.viewSourceIcon}),u.get(this.state.sourceVisible?"settingsActionBuilderHideSource":"settingsActionBuilderShowSource"))),this.state.sourceVisible&&zt.createElement("div",{className:AP.sourceSection},zt.createElement("p",null,u.get("settingsActionBuilderIntroMessage")),this.state.workflowError&&this.state.errorMessage&&zt.createElement("p",{className:AP.alertMessage},zt.createElement("span",{className:AP.alertIcon})," ",this.state.errorMessage),zt.createElement(zA,{value:this.getStringValue(this.state.workflow),onChange:this.handleChange})),n.map((function(t,n){return zt.createElement("div",{key:n,className:AP.step},zt.createElement("h3",{className:AP.stepTitle},zt.createElement("span",{className:"lrn-form-label-name"},u.get("settingsActionBuilderStepTitle").replace("%number%",n+1)),zt.createElement("button",{className:AP.removeStepBtn,onClick:e.removeWorkflowStep.bind(e,n)},zt.createElement("span",{className:AP.removeStepIcon}))),zt.createElement(IA,{step:wA(t,!1),widgetInstances:e.props.widgetInstances,onChange:e.updateWorkflowStep.bind(e,n)}))})),zt.createElement(Ar,bP({className:AP.addStepBtn,onClick:this.addWorkflowStep,lds:this.props.lds},d),this.props.lds?null:zt.createElement("span",{className:AP.addStepIcon}),u.get("settingsActionBuilderAddAction")))}}])&&wP(t.prototype,n),r&&wP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function MP(e){return(MP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LP(e,t){return(LP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BP(e);if(t){var i=BP(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return IP(this,n)}}function IP(e,t){if(t&&("object"===MP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jP(e)}function jP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BP(e){return(BP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}OP(PP,"contextTypes",{i18n:jn().object}),OP(PP,"defaultProps",{onChange:a().noop,workflow:[],widgetInstances:[],lds:!1});var YP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LP(e,t)}(o,e);var t,n,r,i=NP(o);function o(){var e;DP(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return FP(jP(e=i.call.apply(i,[this].concat(n))),"getData",(function(){return{workflow:e.actionBuilderEl&&e.actionBuilderEl.getData()}})),e}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.onChangeState,r=t.workflow,i=t.widgetInstances,o=t.initOptions,a=t.onPreviewChange,s=o.show;return zt.createElement("div",{className:"lrn-author-actions-settings"},s&&zt.createElement("div",{className:"lrn-author-actions-settings-section"},zt.createElement(PP,{ref:function(t){return e.actionBuilderEl=t},item:this.props.item,workflow:r,widgetInstances:i,onChange:n,previewChange:a,lds:this.props.lds})))}}])&&RP(t.prototype,n),r&&RP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);FP(YP,"contextTypes",{i18n:jn().object}),FP(YP,"defaultProps",{onChangeState:function(){},onPreviewChange:function(){},lds:!1});const HP=YP;var VP="ADD_WIDGET",qP="APPLY_READ_ONLY_CONFIG",UP="ATTEMPT_QUESTION",WP="BACK_TO_ITEM_EDIT",zP="DELETE_WIDGET",GP="DRAG_WIDGET_VIA_KEYBOARD",$P="DUPLICATE_ITEM_CONFIRM",KP="DUPLICATE_ITEM_EXIT",ZP="HIDE_DROPZONES",JP="ITEM_LOADED",QP="ITEM_LOADING",XP="ITEM_STATE_DIRTY",eM="LOAD_WIDGET",tM="LOAD_WIDGETS",nM="MOVE_WIDGET",rM="SAVE_ITEM_ERROR",iM="SAVE_ITEM_LOADING",oM="SAVE_ITEM_SUCCESS",aM="SHARED_PASSAGE_ITEM_COUNT_UPDATE",sM="SHOW_CORRECT_ANSWERS",lM="SHOW_DROPZONES",uM="TOGGLE_HISTORY_TAKEOVER",cM="TOGGLE_STANDARDS_MODAL",dM="TOGGLE_VIEW",fM="UNLOAD_WIDGETS",pM="UPDATE_ACTIVE_TAB",hM="UPDATE_HOVERED_DROPZONE_VIA_KEYBOARD",mM="UPDATE_HOVERED_DROPZONE_VIA_MOUSE",gM="UPDATE_ITEM",yM="UPDATE_ITEM_WORKFLOW_COMMENTS",vM="UPDATE_LAYOUT",bM="UPDATE_QUESTION_EDIT_VIEW_MODE",_M="UPDATE_SETTINGS_STATE",wM="UPDATE_STATE",EM="UPDATE_TAB_LABEL",SM="UPDATE_VIEW",xM="UPDATE_WIDGET",kM="WIDGETS_LOADING",TM="WIDGETS_READY",OM="WIDGET_VALIDATION_MISSING";const CM=function(e){return{type:gM,data:e}};const AM=function(e){return{type:vM,data:e}};const PM=function(e){return{type:_M,data:e}};const MM=function(e){return{type:cM,data:e}};var DM=function(e,t){var n=a().getNested(t,"mode.current"),r=e.mode?e.mode:n,i=e.widgetReference?e.widgetReference:t.widgetReference,o=e.widgetReference&&e.widgetReference!==t.widgetReference,s=e.widgetData&&!a().isEqual(e.widgetData,t.widgetData);return"widget"===r&&"new"===i&&(LM(e,t)||o||s)},RM=function(e,t){return"questionlist"===e.mode&&"questionlist"!==t.mode.current},LM=function(e,t){var n=a().getNested(t,"mode.current");return e.mode&&e.mode!==n},NM=function(e,t){return t.ui.flags.linkedStandardsOpen&&LM(e,t)};const IM=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r,i){var o=i.publicEvents,s=i.onChangeRoute,l=r();if(DM(e,l)||RM(e,l)){var u=e.addRegionNodeId;if(u&&(u=u.toString()),o.trigger(sd.EVENTS.addWidget,{region_id:u}).isDefaultPrevented())return}var c=a().extend(Jh(l),e);t&&s?s(c).then((function(t){t&&n({type:wM,data:e})})):n({type:wM,data:e}),NM(e,l)&&n(MM(!1))}};function jM(e){return(jM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YM(e,t){return(YM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UM(e);if(t){var i=UM(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VM(this,n)}}function VM(e,t){if(t&&("object"===jM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qM(e)}function qM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(e){return(UM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YM(e,t)}(o,e);var t,n,r,i=HM(o);function o(){var e;BM(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return WM(qM(e=i.call.apply(i,[this].concat(n))),"getRootDivHeight",(function(){return e.rootDiv?e.rootDiv.getBoundingClientRect().height:0})),e}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.context.i18n,n=this.props.classPrefix?this.props.classPrefix:"lrn-author-item-settings";return zt.createElement("div",{className:n+"-footer",ref:function(t){return e.rootDiv=t}},zt.createElement("div",{className:n+"-button-wrapper"},zt.createElement(Ar,{size:"large",text:t.get("settingsCancel"),onClick:function(){return e.props.onExit()},extraClasses:"lrn-btn-cancel",dataAuthorApiSelector:"lrn-author-cancel-settings",lds:this.props.lds}),zt.createElement(Ar,{size:"large",text:t.get("settingsApplyChanges"),onClick:function(){return e.props.onApply()},color:"primary",disabled:!this.props.isDirty,dataAuthorApiSelector:"lrn-author-apply-settings",lds:this.props.lds})))}}])&&FM(t.prototype,n),r&&FM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);zM.contextTypes={i18n:jn().object};const GM=Ln((function(e){return{lds:e.initOptions.config.beta_flags.lds}}),null,null,{forwardRef:!0})(zM);function $M(e){return($M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JM(e,t){return(JM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eD(e);if(t){var i=eD(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return XM(this,n)}}function XM(e,t){if(t&&("object"===$M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JM(e,t)}(o,e);var t,n,r,i=QM(o);function o(){return KM(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return zt.createElement("div",{className:"lrn-author-confirm-discard"},zt.createElement("p",{className:"lrn-author-confirm-discard-title"},this.props.title),zt.createElement("div",{className:"lrn-author-confirm-discard-footer"},zt.createElement("ul",null,zt.createElement("li",null,zt.createElement(Ar,{size:"large",hasFocus:!0,color:"default",text:this.props.undoDiscardMessage,onClick:this.props.undoDiscardFunction,lds:this.props.lds})),zt.createElement("li",null,zt.createElement(Ar,{size:"large",color:"primary",text:this.props.confirmDiscardMessage,onClick:this.props.confirmDiscardFunction,lds:this.props.lds})))))}}])&&ZM(t.prototype,n),r&&ZM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const nD=Ln((function(e){return{lds:e.initOptions.config.beta_flags.lds}}))(tD);function rD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const iD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootNode=t}var t,n,r;return t=e,(n=[{key:"changeLayout",value:function(e){this.rootNode.setScroll({enabled:e.scroll}),this.rootNode.setVerticalDivider(e.verticalDivider);var t=this.rootNode.getRegions().length;e.columns.length>t&&this.addColumn(),this.updateTabsInColumn(0,e.tabs[0]),this.updateTabsInColumn(1,e.tabs[1]),e.columns.length<t&&this.getColumn(1).remove(),this.updateWidth(e.columns)}},{key:"getLayout",value:function(){var e={columns:[],tabs:[],scroll:this.rootNode.getScroll().enabled,verticalDivider:this.rootNode.getVerticalDivider()};return e.columns.push(this.getColumn(0).getWidth()),e.tabs.push(this.hasTabsInColumn(0)),this.getColumn(1)&&(e.columns.push(this.getColumn(1).getWidth()),e.tabs.push(this.hasTabsInColumn(1))),e}},{key:"updateTabsInColumn",value:function(e,t){t&&!this.hasTabsInColumn(e)&&(this.addNodeWithTwoTabsToColumn(e),this.getColumn(e).moveWidgetsTo(this.getTab(e,0))),!t&&this.hasTabsInColumn(e)&&this.getTabsRegion(e).remove()}},{key:"updateWidth",value:function(e){this.getColumn(0).setWidth(e[0]),a().isUndefined(e[1])||this.getColumn(1).setWidth(e[1])}},{key:"hasTabsInColumn",value:function(e){return!(!this.getColumn(e)||!this.getTabsRegion(e))}},{key:"getColumn",value:function(e){return this.rootNode.getRegions()[e]}},{key:"getTabsRegion",value:function(e){return this.getColumn(e).getRegions()[0]}},{key:"getTab",value:function(e,t){return this.getTabsRegion(e).getRegions()[t]}},{key:"addColumn",value:function(){var e=this.createNode({type:"column"});this.rootNode.getRegions().push(e)}},{key:"addNodeWithTwoTabsToColumn",value:function(e){var t=this.createNode({type:"tabs"}),n=this.createNode({type:"tab",label:"Tab 1"}),r=this.createNode({type:"tab",label:"Tab 2"});t.getRegions().push(n),t.getRegions().push(r),this.getColumn(e).getRegions().push(t)}},{key:"createNode",value:function(e){return new Lh(e,this.rootNode.getHighestNodeID()+1)}}])&&rD(t.prototype,n),r&&rD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const aD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._triggerPublicEvent=t}var t,n,r;return t=e,(n=[{key:"trigger",value:function(e,t){var n=new sd(e);return n.setData(t),this._triggerPublicEvent(n),n}}])&&oD(t.prototype,n),r&&oD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const uD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];sD(this,e),this.initOptions=t,this.legacyContentMode=n}var t,n,r;return t=e,(n=[{key:"isDetailsEnabled",value:function(){var e=this._getItemConfig();return Object.keys(e.details).map((function(e){return"details.".concat(e)})).concat(["reference","title"]).some((function(t){return!0===a().getNested(e,"".concat(t,".show"))}))}},{key:"isTagsEnabled",value:function(){return this._getItemConfig().tags.show}},{key:"isDynamicDataEnabled",value:function(){return this._getItemConfig().dynamic_content}},{key:"isActionsEnabled",value:function(){return this._getItemConfig().actions.show}},{key:"isLayoutEnabled",value:function(){return!this.legacyContentMode&&(this._getItemConfig().tabs||this._getItemConfig().columns)}},{key:"showItemSettingsButton",value:function(){return this.initOptions.config.item_edit.settings.show}},{key:"isItemSettingsEnabled",value:function(){return(this.isLayoutEnabled()||this.isDetailsEnabled()||this.isTagsEnabled()||this.isDynamicDataEnabled()||this.isActionsEnabled())&&this.showItemSettingsButton()}},{key:"_getItemConfig",value:function(){return this.initOptions.config.item_edit.item}}])&&lD(t.prototype,n),r&&lD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function cD(e){return(cD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const dD=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":cD(HTMLElement))?e instanceof HTMLElement:e&&"object"===cD(e)&&1===e.nodeType&&"string"==typeof e.nodeName},fD=function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0];return window.innerHeight||e.clientHeight||t.clientHeight},pD=function(){var e=document.documentElement,t=document.getElementsByTagName("body")[0];return window.innerWidth||e.clientWidth||t.clientWidth},hD=function(e){var t=window.getComputedStyle(e);return e.getBoundingClientRect().height+parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth)+parseInt(t.marginTop)+parseInt(t.marginBottom)};function mD(e){return(mD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gD(){return(gD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vD(e,t){return(vD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ED(e);if(t){var i=ED(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _D(this,n)}}function _D(e,t){if(t&&("object"===mD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wD(e)}function wD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ED(e){return(ED=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vD(e,t)}(o,e);var t,n,r,i=bD(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),SD(wD(n=i.call(this,e,t)),"_getFilteredTags",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props.initOptions.config.global,r=t.hide_tags,i=t.show_tags,o=n.props.abStandardsEnabled,s=n.context.abAlignedTagTypeUtil,l=Rx(e,r,i);return a().isEmpty(l)&&(l=[]),o&&(l=s.filterNonABTags(l)),l})),SD(wD(n),"_updateHeight",(function(){if(n.itemSettingsHeader&&n.itemSettingsTabBar&&n.itemSettingsContainer&&n.itemSettingsFooter){var e,t=n.itemSettingsContainer.getBoundingClientRect().top,r=hD(n.itemSettingsHeader),i=hD(n.itemSettingsTabBar),o=n.itemSettingsFooter.getRootDivHeight(),a=fD();n.props.initOptions.config.item_edit.settings.full_height?e=a-(t+o):(e=a-(r+i+o))>Hh&&(e=Hh),n.setState({contentHeight:e})}})),SD(wD(n),"_getLabel",(function(e){return n.context.i18n.get(e)})),SD(wD(n),"_onExit",(function(){n._isDirty()?n.setState({showDiscardOverlay:!0}):n.props.createUpdateState({showItemSettings:!1})})),SD(wD(n),"_onKeyDown",(function(e){27===e.keyCode&&(n.state.showDiscardOverlay?n._hideDiscardOverlay():n._onExit())})),SD(wD(n),"_onApply",(function(){if(n._isDirty()){var e,t=a().cloneDeep(n.state);if(n.state.isDirty.layout&&(e=n.layoutComponent.getData(),n.props.createUpdateLayout(e),t.isDirty.layout=!1),n.state.isDirty.details&&(e=n.detailsComponent.getData(),n._updateItem(e),t.isDirty.details=!1),n.state.isDirty.tags){var r=n.state.filteredTags,i=n._getFilteredTags(n.props.currentItem.tags),o=a().difference(r,i),s=a().difference(i,r),l=a().union(a().difference(n.props.currentItem.tags,s),o);n._updateItem({tags:l}),t.isDirty.tags=!1}n.state.isDirty.dynamicData&&(e=n.dynamicComponent.getData(),n._updateDynamicData(e),t.isDirty.dynamicData=!1),n.state.isDirty.actions&&(e=n.actionsComponent.getData(),n._updateItem(e),t.isDirty.actions=!1),n.setState(t),n.props.createUpdateSettingsState({isDirty:t.isDirty,displayConfirmationOverlay:!1}),n.props.createUpdateState({showItemSettings:!1}),n.context.publicEvents.trigger(sd.EVENTS.itemSettingsApplied)}})),SD(wD(n),"_isDirty",(function(){var e=n.state.isDirty;return Object.keys(e).reduce((function(t,n){return t||e[n]}),!1)})),n.boundUpdateHeight=n._updateHeight.bind(wD(n));var r=n._getFilteredTags(n.props.currentItem.tags);return n.state={isDirty:{layout:!1,details:!1,tags:!1,dynamicData:!1,actions:!1},showDiscardOverlay:!1,filteredTags:r,contentHeight:fD(),isPreviewVisible:!1},n.itemSettingsUtil=new uD(n.props.initOptions,n.props.legacyContentMode),n}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("resize",this.boundUpdateHeight)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("resize",this.boundUpdateHeight)}},{key:"componentDidMount",value:function(){this._getTabDefinitions()[0]||(console.error("No Item settings are available, cannot navigate to Item settings."),this._onExit()),this.props.createUpdateSettingsState({isDirty:this.state.isDirty,displayConfirmationOverlay:!1}),this._updateHeight()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={},n=this.state.filteredTags,r=this._getFilteredTags(e.currentItem.tags);!a().isEqual(e.currentItem.tags,this.props.currentItem.tags)&&!a().isEqual(r,n)&&(t.filteredTags=r),e.activeTab!==this.props.activeTab?t.showDiscardOverlay=!1:this.props.forceDisplayConfirmationOverlay||!0!==e.forceDisplayConfirmationOverlay||(t.showDiscardOverlay=!0),Object.keys(t).length&&this.setState(t)}},{key:"_updateItem",value:function(e){var t=this;a().each(e,(function(e,n){t.props.createUpdateItem({field:"item."+n,value:e})}))}},{key:"_updateDynamicData",value:function(e){tA(this.props.currentItem.dynamic_content_data||null,e.dynamicData)||this.props.createUpdateItem({field:"item.dynamic_content_data",value:e.dynamicData})}},{key:"_onTagsSettingsChange",value:function(e){var t=a().extend({},this.state.isDirty,{tags:!0});this.setState({isDirty:t,filteredTags:this._getFilteredTags(e.tags)}),this.props.createUpdateSettingsState({isDirty:t})}},{key:"_onSettingsChange",value:function(e){var t=a().extend({},this.state.isDirty,SD({},e,!0));this.setState({isDirty:t}),this.props.createUpdateSettingsState({isDirty:t})}},{key:"_getLayoutTabDefinition",value:function(){var e=this,t=this._getItemConfig(),n={tabs:t.tabs,columns:t.columns},r=null;if(this.props.currentItem.definition&&this.itemSettingsUtil.isLayoutEnabled()){var i=(new Ih).build(this.props.currentItem.definition,this.props.widgetInstances),o=new iD(i);r=zt.createElement(oC,{layoutData:o.getLayout(),initOptions:n,onChangeState:function(){return e._onSettingsChange("layout")},ref:function(t){return e.layoutComponent=t}})}return{tabId:"layout",tabLabel:"Layout",text:this._getLabel("settingsLayout"),icon:"lrn-i-layout",component:r,isEnabled:this.props.currentItem.definition&&this.itemSettingsUtil.isLayoutEnabled(),isDirty:this.state.isDirty.layout}}},{key:"_getDetailsTabDefinition",value:function(){var e=this,t=this._getItemConfig(),n=a().getNested(this.props.initOptions.config,"dependencies.question_editor_api.editor_type"),r={title:t.title,reference:t.reference,details:t.details,shouldLoadCkBundle:"ckeditor"!==n},i=this.props.currentItem,o={title:i.title,reference:i.reference,status:i.status,scoring_type:a().getNested(i,"metadata.scoring_type"),description:i.description,source:i.source,note:i.note,acknowledgements:a().getNested(i,"metadata.acknowledgements"),difficulty:a().getNested(i,"adaptive.difficulty"),workflowState:a().getNested(i,"authoring_workflow.state"),workflowConfig:this.context.app.initOptionsModel.getItemWorkflow()},s=zt.createElement(iO,gD({},o,{onChangeState:function(){return e._onSettingsChange("details")},initOptions:r,ref:function(t){return e.detailsComponent=t}}));return{isEnabled:this.itemSettingsUtil.isDetailsEnabled(),component:s,tabId:"details",tabLabel:"Details",text:this._getLabel("settingsDetails"),icon:"lrn-i-details",isDirty:this.state.isDirty.details}}},{key:"_getTagsTabDefinition",value:function(){var e=this,t="tags",n=this.props.activeTab===t&&!this.state.showDiscardOverlay,r=this.state.filteredTags,i=zt.createElement(Dx,{tags:r,onChangeState:function(t){return e._onTagsSettingsChange(t)},isVisible:n,ref:function(t){return e.tagsComponent=t},isEditable:this.props.initOptions.config.item_edit.item.tags.edit});return{tabId:t,tabLabel:"Tags",text:this._getLabel("settingsTags")+" ("+r.length+")",icon:"lrn-i-tag",component:i,isEnabled:this.itemSettingsUtil.isTagsEnabled(),isDirty:this.state.isDirty.tags}}},{key:"_getDynamicContentTabDefinition",value:function(){var e=this,t=this.props.currentItem,n="data-table",r=this.props.activeTab===n&&!this.state.showDiscardOverlay,i=t.dynamic_content_data||null,o={dynamic_image_tag:this._getItemConfig().dynamic_image_tag,config:{beta_flags:{lds:this.props.initOptions.config.beta_flags.lds}}},s=!!a().getNested(t,"metadata.dynamic_content"),l=zt.createElement(dA,{dynamicData:i,onChangeState:function(){return e._onSettingsChange("dynamicData")},isVisible:r,isMathGen:s,initOptions:o,ref:function(t){return e.dynamicComponent=t}});return{tabId:n,tabLabel:"Data table",text:this._getLabel("settingsDataTable"),icon:"lrn-i-dynamic-data",component:l,isEnabled:this.itemSettingsUtil.isDynamicDataEnabled(),isDirty:this.state.isDirty.dynamicData}}},{key:"_getActionsTabDefinition",value:function(){var e=this,t="actions",n=this.props.activeTab===t&&!this.state.showDiscardOverlay,r=this._onSettingsChange.bind(this,"actions"),i=this._togglePreviewVisiblity.bind(this),o=this._getItemConfig().actions,a=this.props,s=a.currentItem.workflow,l=a.widgetInstances,u={item:this.props.currentItem,workflow:s,widgetInstances:l,initOptions:o,onChangeState:r,isVisible:n,onPreviewChange:i,lds:this.props.lds},c=zt.createElement(HP,gD({},u,{ref:function(t){return e.actionsComponent=t}}));return{tabId:t,tabLabel:"Actions",text:this._getLabel("settingsActions"),icon:"lrn-i-actions",component:c,isEnabled:this.itemSettingsUtil.isActionsEnabled(),isDirty:this.state.isDirty.actions}}},{key:"_getTabDefinitions",value:function(){return[this._getLayoutTabDefinition(),this._getDetailsTabDefinition(),this._getTagsTabDefinition(),this._getDynamicContentTabDefinition(),this._getActionsTabDefinition()].filter((function(e){return e.isEnabled}))}},{key:"_getItemConfig",value:function(){return this.props.initOptions.config.item_edit.item}},{key:"_discardChanges",value:function(){this.props.createUpdateState({showItemSettings:!1})}},{key:"_hideDiscardOverlay",value:function(){this.setState({showDiscardOverlay:!1}),this.props.createUpdateSettingsState({displayConfirmationOverlay:!1})}},{key:"_renderTabBar",value:function(e){var t=this,n=e[0]&&e[0].tabId;return zt.createElement(XE,{tabBarRef:function(e){return t.itemSettingsTabBar=e}},e.map((function(e){return zt.createElement(QE,{key:e.tabId,tabId:e.tabId,tabLabel:e.tabLabel,tabIcon:e.icon,tooltip:e.text,isDirty:e.isDirty,tabBarId:jh,defaultTab:n},e.text)})))}},{key:"_renderTabContainer",value:function(e){var t=e[0]&&e[0].tabId;return zt.createElement(lS,null,e.map((function(e){return zt.createElement(sS,{key:e.tabId,tabId:e.tabId,alwaysShow:!0,tabBarId:jh,defaultTab:t},e.component)})))}},{key:"_renderDiscardOverlay",value:function(){var e=this,t=this.context.i18n;return zt.createElement("div",{className:"lrn-author-item-settings"},zt.createElement(nD,{title:t.get("settingsConfirmDiscard"),confirmDiscardMessage:t.get("settingsConfirmDiscardYes"),confirmDiscardFunction:function(){return e._discardChanges()},undoDiscardMessage:t.get("settingsConfirmDiscardNo"),undoDiscardFunction:function(){return e._hideDiscardOverlay()}}))}},{key:"_togglePreviewVisiblity",value:function(e){this.setState({isPreviewVisible:e})}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=this._getTabDefinitions(),r={root:a().classNames("lrn-author-ui","lrn-author-ui-no-preview"),itemSettings:"lrn-author-item-settings"},i={height:this.state.contentHeight.toString()+"px",overflow:"auto"};return zt.createElement("div",{className:r.root},zt.createElement("section",{className:r.itemSettings},this.state.showDiscardOverlay&&this._renderDiscardOverlay(),zt.createElement("div",{className:this.state.showDiscardOverlay?"hidden":null},zt.createElement("div",{className:"lrn-author-item-settings-header",ref:function(t){return e.itemSettingsHeader=t}},zt.createElement("div",{className:"lrn-author-item-settings-title"},t.get("settings")),zt.createElement(cs,{onClick:this._onExit,className:"lrn-author-item-settings-close-btn",authorApiSelector:"item-settings-exit-button"})),this._renderTabBar(n),zt.createElement("div",{style:i,className:"lrn-author-item-settings-container",ref:function(t){return e.itemSettingsContainer=t}},this._renderTabContainer(n)),zt.createElement(GM,{ref:function(t){return e.itemSettingsFooter=t},onApply:this._onApply,onExit:this._onExit,isDirty:this._isDirty()}))))}}])&&yD(t.prototype,n),r&&yD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);xD.contextTypes={i18n:jn().object,app:jn().object,abAlignedTagTypeUtil:jn().instanceOf(rr).isRequired,publicEvents:jn().instanceOf(aD)};const kD=Ln((function(e){return{currentItem:e.itemData.current.item,widgetInstances:e.itemData.current.widgetInstances,initOptions:e.initOptions,activeTab:e.ui.tab[jh].activeTabName,forceDisplayConfirmationOverlay:e.settingsState.displayConfirmationOverlay,abStandardsEnabled:rc.selectors.getAreStandardsEnabled(e),legacyContentMode:$h(e),lds:e.initOptions.config.beta_flags.lds}}),{createUpdateItem:CM,createUpdateState:IM,createUpdateLayout:AM,createUpdateSettingsState:PM})(xD);const TD=function(e){return{type:yM,data:e}};function OD(e){return(OD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PD(e,t){return(PD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=RD(e);if(t){var i=RD(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return DD(this,n)}}function DD(e,t){if(t&&("object"===OD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function RD(e){return(RD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PD(e,t)}(o,e);var t,n,r,i=MD(o);function o(){return CD(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props;return zt.createElement("div",{"data-authorapi-selector":this.props.dataAuthorApiSelector},zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("label",{className:"lrn-form-label-name",htmlFor:this.props.label},this.props.label)),zt.createElement("div",{className:"lrn-author-flex"},zt.createElement("div",{className:"lrn-col-xs-12"},zt.createElement("div",{className:"lrn-form-group"},this.props.description&&this.props.description.length>0&&zt.createElement("label",{className:"lrn-form-label-name lrn-author-subheading"},this.props.description),zt.createElement("form",null,zt.createElement("textarea",{id:this.props.label,className:"lrn-form-control","data-authorapi-selector":this.props.inputDataAuthorApiSelector,value:null===this.props.value?"":this.props.value,onChange:this.props.disabled?null:function(t){return e.props.onChange(t)},onFocus:this.props.onFocus,onBlur:this.props.onBlur,disabled:this.props.disabled,rows:this.props.rows,placeholder:t.placeholder?t.placeholder:"",maxLength:t.maxLength?t.maxLength:void 0}))))))}}])&&AD(t.prototype,n),r&&AD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(LD,"defaultProps",{value:""});const ND=LD;function ID(e){return(ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BD(e,t){return(BD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function FD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=HD(e);if(t){var i=HD(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return YD(this,n)}}function YD(e,t){if(t&&("object"===ID(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function HD(e){return(HD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var VD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BD(e,t)}(o,e);var t,n,r,i=FD(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).localTime=$().utc(t.props.utcDateTime,H).local(),t}return t=o,(n=[{key:"_getFormattedTime",value:function(){return this.localTime.format(H)}},{key:"_getReadableTime",value:function(){return this.localTime.format("MMMM DD, YYYY [at] h:mm A")}},{key:"_getTimestamp",value:function(){var e=-this.localTime.diff($().utc(),"hours"),t=this.context.i18n.get("toolTipDateFormat");return e<=24?this.localTime.fromNow():this.localTime.format(t)}},{key:"componentDidMount",value:function(){0===this.localTime.diff($().utc(),"hours")&&(this.intervalId=setInterval(this.forceUpdate.bind(this),6e4))}},{key:"componentWillUnmount",value:function(){this.intervalId&&clearInterval(this.intervalId)}},{key:"render",value:function(){return zt.createElement("time",{dateTime:this._getFormattedTime(),"data-authorapi-tooltip":this._getReadableTime(),tabIndex:0},this._getTimestamp())}}])&&jD(t.prototype,n),r&&jD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);VD.contextTypes={i18n:jn().object};const qD=VD;const UD=function(e){var t=e.createdBy,n=e.timeCreated,r=e.comment,i="lrn-author-workflow-comment";return zt.createElement("div",{className:"".concat(i,"-wrapper lrn-text-word-wrap")},zt.createElement("p",{className:"".concat(i,"-name"),tabIndex:"0"},t),zt.createElement("div",{className:"".concat(i,"-timestamp")},zt.createElement(qD,{utcDateTime:n})),zt.createElement("p",{className:"".concat(i,"-text"),tabIndex:"0"},r))};function WD(e){return(WD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GD(e,t){return(GD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=JD(e);if(t){var i=JD(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return KD(this,n)}}function KD(e,t){if(t&&("object"===WD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ZD(e)}function ZD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(e){return(JD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var XD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GD(e,t)}(o,e);var t,n,r,i=$D(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),QD(ZD(n=i.call(this)),"handleContentTruncation",(function(){var e=n._contentInnerRef.current;if(e){var t="".concat(n.props.className,"__content-inner--truncate");e.scrollHeight>e.offsetHeight?e.classList.add(t):e.classList.remove(t)}}));var r=t.app.rootId;return n._contentInnerRef=zt.createRef(),n.selector='[data-authorapi-root-id="'.concat(r,'"]'),n.mouseOverEventHandler=n.mouseOver.bind(ZD(n)),n.focusEventHandler=n.focusElement.bind(ZD(n)),n.blurEventHandler=n.blurElement.bind(ZD(n)),n.state={content:"",at:"",left:0,top:0,focused:!1,targetSet:!1},n}return t=o,(n=[{key:"shallowEqual",value:function(e,t){var n=a().keys(e);return n.length===a().keys(t).length&&n.reduce((function(n,r){return n&&("function"==typeof e[r]||e[r]===t[r])}),!0)}},{key:"shouldComponentUpdate",value:function(e,t){return!this.shallowEqual(t,this.state)||!this.shallowEqual(e,this.props)}},{key:"componentDidMount",value:function(){var e=document.querySelector(this.selector);e&&(e.addEventListener("mouseover",this.mouseOverEventHandler),e.addEventListener("focus",this.focusEventHandler,!0),e.addEventListener("blur",this.blurEventHandler,!0)),this._mounted=!0}},{key:"componentWillUnmount",value:function(){var e=document.querySelector(this.selector);e&&(e.removeEventListener("mouseover",this.mouseOverEventHandler),e.removeEventListener("focus",this.focusEventHandler,!0),e.removeEventListener("blur",this.blurEventHandler,!0)),this._mounted=!1}},{key:"componentDidUpdate",value:function(){if(this.state.targetSet){var e=this.getTooltipData(this.props);e.content&&e.content.length?this.setState(e):(this._targetElement=null,this.setState({targetSet:!1}))}this.handleContentTruncation()}},{key:"findTooltip",value:function(e){for(var t=this.props,n=t.attribute,r=t.hover;e&&e!==document;){if(r&&e===this._tooltip)return this._targetElement;if(e.hasAttribute(n))return e;e=e.parentNode}return null}},{key:"getTooltipData",value:function(e){var t=e.attribute,n=e.position;if(!this._targetElement)return{content:"",at:"",top:0,left:0};var r,i,o=this._targetElement.getAttribute(t)||"",a=this._targetElement.getAttribute("".concat(t,"-at"))||n,s=this._container.getBoundingClientRect(),l=s.top,u=s.left,c=this._tooltip.getBoundingClientRect(),d=c.width,f=c.height,p=this._targetElement.getBoundingClientRect(),h=p.top,m=p.left,g=p.width,y=p.height;switch(a){case"left":r=(y-f)/2,i=-d;break;case"right":r=(y-f)/2,i=g;break;case"bottom":r=y,i=(g-d)/2;break;case"top":default:r=-f,i=(g-d)/2}return{content:o,at:a,top:Math.round(r+h-l),left:Math.round(i+m-u)}}},{key:"mouseOver",value:function(e){var t=e.target,n=this,r=this.props.events,i=n.state.focused;r&&this._mounted&&!i&&n.setState((function(){return n._targetElement=n.findTooltip(t),{targetSet:!!n._targetElement}}))}},{key:"focusElement",value:function(e){var t=this,n=e.target;this.props.events&&this._mounted&&this.setState((function(){t._targetElement=t.findTooltip(n);var e=!!t._targetElement;return{targetSet:e,focused:e}}))}},{key:"blurElement",value:function(){this.props.events&&this._mounted&&this.setState({focused:!1,targetSet:!1})}},{key:"renderContent",value:function(e){if("#"===String(e)[0]){var t=document.getElementById(e.slice(1));if(t)return zt.createElement("div",{dangerouslySetInnerHTML:{__html:t.innerHTML}})}return e}},{key:"render",value:function(){var e=this,t=this.props.className,n=this.state,r=n.targetSet,i=n.content,o=n.at,a=n.top,s=n.left;return zt.createElement("div",{ref:function(t){return e._container=t},className:"".concat(t,"-container")},r?zt.createElement("div",{className:"".concat(t," ").concat(t,"--").concat(o),ref:function(t){return e._tooltip=t},style:{top:a,left:s}},zt.createElement("div",{className:"".concat(t,"__content")},zt.createElement("div",{className:"".concat(t,"__content-inner"),ref:this._contentInnerRef},this.renderContent(i)))):"")}}])&&zD(t.prototype,n),r&&zD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);QD(XD,"contextTypes",{app:jn().object.isRequired}),XD.defaultProps={attribute:"data-authorapi-tooltip",className:"lrn-author-tooltip",events:!0,hover:!1,position:"top"};const eR=Ln((function(e){return{forceUpdateToolTipCounter:a().getNested(e,"ui.tooltip.forceUpdateToolTipCounter")}}))(XD);const tR=function(e){var t=e.workflowComments,n=void 0===t?[]:t;return zt.createElement(ll,null,zt.createElement(eR,null),n.map((function(e){var t,n=e.id,r=e.created_by,i=e.comment,o=e.time_created;return t=r.first_name&&r.surname?"".concat(r.first_name," ").concat(r.surname):r.id,i&&zt.createElement(cl,{key:n||o},zt.createElement(UD,{createdBy:t,timeCreated:o,comment:i}))})))};function nR(e){return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rR(e){return function(e){if(Array.isArray(e))return iR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return iR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aR(e,t){return(aR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cR(e);if(t){var i=cR(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lR(this,n)}}function lR(e,t){if(t&&("object"===nR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uR(e)}function uR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cR(e){return(cR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aR(e,t)}(o,e);var t,n,r,i=sR(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(uR(n=i.call(this,e,t)),"_updateHeight",(function(){var e;n.headerEl&&n.footerEl&&((e=fD()-(hD(n.headerEl)+(n.footerEl&&n.footerEl.getRootDivHeight())))>Vh&&(e=Vh),n.setState({contentHeight:e}))})),n.boundUpdateHeight=n._updateHeight.bind(uR(n)),n.workflowSettings=n.context.app.initOptionsModel.getItemWorkflow(),n.workflowCommentsConfig=a().getNested(n.context.app.initOptionsModel.getConfig(),"global.workflow.item.comments"),n.workflowSettings?(n.workflowUtil=new lc(n.workflowSettings),n.state=n.getInitialState()):n.state={currentState:"",originalState:"",disabled:!1,possibleTransitions:[],showDiscardOverlay:!1,workflowComments:[],contentHeight:0,workflowCommentInputText:"",inputHasFocus:!1},n}return t=o,(n=[{key:"getInitialState",value:function(){var e=this._getCurrentWorkflowInfo();return{currentState:e.currentState,originalState:e.originalState,possibleTransitions:e.possibleTransitions,showDiscardOverlay:!1,disabled:e.disabled,workflowComments:this.props.workflowComments,contentHeight:fD(),workflowCommentInputText:"",inputHasFocus:!1}}},{key:"componentDidMount",value:function(){a().isEmpty(this.workflowSettings)&&(console.error(this.context.i18n.get("workflowNotDefined")),this._onExit()),window.addEventListener("resize",this.boundUpdateHeight),this._updateHeight()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.boundUpdateHeight)}},{key:"_onExit",value:function(){this._isDirty()||""!==this.state.workflowCommentInputText.trim()?this.setState({showDiscardOverlay:!0}):this._close()}},{key:"_close",value:function(){this.props.updateState({showWorkflowSettings:!1})}},{key:"_hideDiscardOverlay",value:function(){this.setState({showDiscardOverlay:!1})}},{key:"_isDirty",value:function(){var e=this.props.currentWorkflowState||"";return this.state.currentState!==e||JSON.stringify(this.props.workflowComments)!==JSON.stringify(this.state.workflowComments)}},{key:"_onApply",value:function(){var e=null;""!==this.state.currentState&&(e={reference:this.workflowSettings.reference,state:this.state.currentState});var t=this.state.workflowComments||[];this.props.updateItem({field:"item.authoring_workflow",value:e}),this.props.updateComment({value:t}),this.props.updateState({showWorkflowSettings:!1})}},{key:"_onInputFocus",value:function(){this.setState({inputHasFocus:!0})}},{key:"_onInputBlur",value:function(){this.setState({inputHasFocus:!1})}},{key:"_getWorkflowStateLabel",value:function(e){return this.context.i18n.getLabelIgnoreCase("workflowState".concat(e))}},{key:"_getCurrentWorkflowInfo",value:function(){var e=this,t=this.props.originalWorkflowState,n=this.props.currentWorkflowState,r=this.workflowUtil.getStateData(t),i=this.workflowUtil.getStateData(n),o=this.context.i18n.get("workflowUnassigned"),a=n&&this.workflowSettings.allowed_workflow_states.indexOf(n)>-1,s=!1,l=[],u="",c="";if(!r)if(i)c=i.label,u=i.reference,l.push({text:o,value:""});else if(n&&!a)s=!0,c=n,u=n;else{c=o,u="";var d=this.workflowUtil.getStateData(this.workflowUtil.initialState);l.push({text:d.label,value:d.reference})}return r&&(i||(i={label:n,reference:n}),c=i.label,u=i.reference,r.reference!==i.reference?l.push({text:r.label,value:r.reference}):(l=this.workflowUtil.getAvailableTransitionStates(t)).length||(s=!0)),l.unshift({text:c,value:u}),l.map((function(t){var n=t.value?t.value:t.text,r=e._getWorkflowStateLabel(n);return r&&(t.text=r),t})),{currentState:u,disabled:s,originalState:t,possibleTransitions:l}}},{key:"_onWorkflowStateChanged",value:function(e){var t=e.currentTarget;this.setState({currentState:t.value})}},{key:"_onWorkflowCommentInputChange",value:function(e){this.setState({workflowCommentInputText:e.currentTarget.value})}},{key:"_addWorkflowComment",value:function(){var e=this.context.app.initOptionsModel.getUser(),t=this.state.workflowCommentInputText.trim();if(t){e.first_name=e.firstname,e.surname=e.lastname;var n=[{comment:t,created_by:e,state_reference:this.state.originalState,time_created:(new Date).toISOString()}].concat(rR(this.state.workflowComments));this.setState((function(){return{workflowComments:n,workflowCommentInputText:""}}))}}},{key:"_renderAddCommentsSection",value:function(){var e=this.state.inputHasFocus||this.state.workflowCommentInputText,t=e?"3":"1",n=this.context.i18n,r=!this.workflowUtil.getStateData(this.props.originalWorkflowState),i=n.get("workflowAddCommentPlaceholder");return this.props.isNew?i=n.get("workflowAddCommentNewItemPlaceholder"):r&&(i=n.get("workflowAddCommentUnassignedItemPlaceholder")),zt.createElement("div",{className:"lrn-author-workflow-add-comment-wrapper"},zt.createElement(ND,{dataAuthorApiSelector:"workflow-settings-add-comment-textarea",inputDataAuthorApiSelector:"workflow-settings-add-comment",label:n.get("workflowAddCommentLabel"),value:this.state.workflowCommentInputText,rows:t,onBlur:this._onInputBlur.bind(this),onChange:this._onWorkflowCommentInputChange.bind(this),onFocus:this._onInputFocus.bind(this),placeholder:i,disabled:this.props.isNew||r,maxLength:1e3,description:n.get("workflowAddCommentCharLimit")}),e&&zt.createElement("button",{className:"lrn-btn lrn-author-btn lrn-btn-primary","data-authorapi-selector":"workflow-settings-add-comment-button",onClick:this._addWorkflowComment.bind(this),disabled:!this.state.workflowCommentInputText.trim()},n.get("workflowAddCommentButton")))}},{key:"_renderCommentsSection",value:function(){var e=this.workflowCommentsConfig.add&&this._renderAddCommentsSection();return zt.createElement("div",{"data-authorapi-selector":"workflow-settings-comments-section"},e,zt.createElement(tR,{workflowComments:this.state.workflowComments}))}},{key:"render",value:function(){var e=this,t={height:this.state.contentHeight.toString()+"px",overflow:"auto"},n=zt.createElement(GM,{classPrefix:"lrn-author-workflow-settings",onApply:function(){return e._onApply()},onExit:function(){return e._onExit()},isDirty:this._isDirty(),ref:function(t){return e.footerEl=t}}),r=this.context.i18n;return a().isUndefined(this.workflowUtil)?zt.createElement("div",null):zt.createElement(iP,{title:this.context.i18n.get("workflowSettingsTitle"),onClose:function(){return e._onExit()},className:"lrn-author-workflow-takeover lrn-author-ui-no-preview",headerRef:function(t){return e.headerEl=t},footer:!this.state.showDiscardOverlay&&n},this.state.showDiscardOverlay&&zt.createElement(eu,{positionAbsolute:!0,text:r.get("settingsConfirmDiscard"),onClickYes:function(){return e._close()},onClickNo:function(){return e._hideDiscardOverlay()},yesLabel:r.get("settingsConfirmDiscardYes"),noLabel:r.get("settingsConfirmDiscardNo")}),!this.state.showDiscardOverlay&&zt.createElement("div",{className:"lrn-author-workflow-settings-container",style:t},zt.createElement("div",{className:"lrn-author-takeover-content"},zt.createElement(Hs,{key:"WorkflowSelect",className:"lrn-author-workflow-state-select-wrapper",label:r.get("workflowState"),options:this.state.possibleTransitions,value:this.state.currentState,disabled:this.state.disabled,onChange:this._onWorkflowStateChanged.bind(this)}),this.workflowCommentsConfig.show&&this._renderCommentsSection())))}}])&&oR(t.prototype,n),r&&oR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);dR.contextTypes={app:jn().object,i18n:jn().object};const fR=Ln((function(e){return{isNew:!e.itemData.original.item.item_id,originalWorkflowState:a().getNested(e.itemData.original.item,"authoring_workflow.state"),currentWorkflowState:a().getNested(e.itemData.current.item,"authoring_workflow.state"),workflowComments:e.itemData.current.workflowComments}}),{updateState:IM,updateItem:CM,updateComment:TD})(dR);var pR=function(e,t){var n=a().cloneDeep(e),r=t.getWidgetReferencesInOrder();return n.item=a().cloneDeep(e.item),n.item.definition=t.toJSON(),n.item.content=t.toHTML(),(n=hR(n,r)).item=mR(n.item,r),n},hR=function(e,t){var n=a().cloneDeep(e);return n.widgetInstances=[],t.forEach((function(t){var r=a().find(e.widgetInstances,(function(e){return e.reference===t}));n.widgetInstances.push(r)})),n},mR=function(e,t){var n=a().cloneDeep(e);return a().each(["questions","features"],(function(r){n[r]=[],t.forEach((function(t){var i=a().find(e[r],(function(e){return e.reference===t}));i&&n[r].push(i)}))})),n},gR=function e(t,n,r){t.widgets?yR(t.widgets,n,r):t.regions&&t.regions.forEach((function(t){t.widgets?yR(t.widgets,n,r):t.regions&&e(t,n,r)}))},yR=function(e,t,n){var r=a().findIndex(e,(function(e){return e.reference===t}));r>-1&&(e[r].widget_type=n)},vR=function(e,t,n,r){var i,o=e.item.features,s=e.item.questions;"response"===r?(i=a().findIndex(e.item.questions,(function(e){return e.reference===t})))>-1?e.item.questions[i].type=n:(o=a().reject(o,(function(e){return e.reference===t})),s.push({reference:t,type:n})):(i=a().findIndex(e.item.features,(function(e){return e.reference===t})))>-1?e.item.features[i].type=n:(s=a().reject(s,(function(e){return e.reference===t})),o.push({reference:t,type:n})),e.item.features=o,e.item.questions=s,gR(e.item.definition,t,r)},bR=function(e,t){var n=t.reference,r=a().cloneDeep(e),i=(new Ih).build(r.item.definition,r.widgetInstances),o=t.widgetType||"response",s=t.widget.type,l={reference:n,type:s};return r.widgetInstances.push({reference:n,data:t.widget,metadata:t.metadata,type:s,widget_type:o}),"response"===o?r.item.questions.push(l):r.item.features.push(l),i.addWidget({reference:n,widget_type:o},t.addRegionNodeId),pR(r,i)},_R=function(e,t){var n=a().cloneDeep(e),r=a().findIndex(n.widgetInstances,(function(e){return e.reference===t.reference}));if(r>-1){var i=n.widgetInstances[r];i.data=t.widget,i.metadata=t.metadata,i.widget_type=t.widgetType,i.type=t.widget.type,n.widgetInstances[r]=i,vR(n,t.reference,t.widget.type,t.widgetType)}return n},wR=function e(t,n){t&&(t.widgets&&0!==t.widgets.length&&t.widgets.forEach((function(e){n[e.reference]&&(e.reference=n[e.reference])})),t.regions&&0!==t.regions.length&&t.regions.forEach((function(t){e(t,n)})))},ER=function(e,t,n,r){if(t){e.item.definition&&(e.item=function(e,t){var n=(new Ih).build(e.definition,t).getWidgetReferencesInOrder();return mR(e,n)}(e.item,t)),e.item=function(e){var t=a().cloneDeep(e);return a().isEmpty(t.metadata)&&delete t.metadata,t}(e.item);var i,o,s={};if(a().each(["questions","features"],(function(i){e[i]=[],e.item[i].forEach((function(o){var l=a().find(t,(function(e){return o.reference===e.reference}));if(!l)throw"Widget wasn't found: ".concat(o.reference," (item: ").concat(e.item.reference,")");var u=o.reference;n&&("sharedpassage"!==l.type||r?(u=a().uuid(),"sharedpassage"===l.type&&(delete l.item_count,delete o.item_count)):"sharedpassage"===l.type&&(l.item_count||(l.item_count=0),o.item_count||(o.item_count=0),l.item_count++,o.item_count++)),u!==o.reference&&(s[o.reference]=u,l.reference=u,o.reference=u),e[i].push(l)}))})),0!==Object.keys(s).length)a().each(s,(function(t,n){e.item.content=e.item.content.replace(n,t)})),e.item.definition&&wR(e.item.definition,s),e.item.workflow&&(i=e.item.workflow,o=s,i&&i.forEach((function(e){a().each(o,(function(t,n){a().each(["action","event"],(function(r){a().isString(e[r])&&(e[r]=e[r].replace(n,t))}))}))})))}},SR=function(e,t,n,r){var i={item:a().cloneDeep(e)};return ER(i,t,n,r),i},xR=["item","item.adaptive","item.adaptive.*","item.content","item.created_by","item.created_by.*","item.definition","item.definition.*","item.description","item.dt_created","item.dt_updated","item.dynamic_content_data","item.dynamic_content_data.*","item.metadata","item.metadata.*","item.note","item.reference","item.status","item.source","item.workflow","item.workflow[*].*","item.adaptive","item.adaptive.*","item.tags","item.tags[*].description","item.tags[*].name","item.tags[*].type","item.title","questions","questions[*].data","questions[*].data.*","questions[*].metadata","questions[*].metadata.*","questions[*].reference","questions[*].type","questions[*].widget_type","features","features[*].data","features[*].item_count","features[*].data.*","features[*].metadata","features[*].metadata.*","features[*].reference","features[*].type","features[*].widget_type"],kR=["[*].description","[*].name","[*].sort_key","[*].type"],TR=["[*].tags","[*].tags[*].name","[*].type"],OR="v1",CR="v2",AR=function(e,t){return e.filter((function(e){return 0===e.indexOf(t)})).map((function(e){return e.substring(t.length)}))},PR=function e(t,n){if(!a().isObject(t)||a().contains(n,"*"))return t;var r,i=a().cloneDeep(t);return a().isArray(i)?(r=AR(n,"[*]."),i.forEach((function(t,n){i[n]=e(t,r)}))):a().each(i,(function(t,o){-1!==n.indexOf(o)?(r=a().isArray(t)?AR(n,o):AR(n,o+"."),i[o]=e(i[o],r)):delete i[o]})),i},MR=function(e){return PR(e,xR)};const DR=function(e){return{type:VP,data:e}};const RR=function(e){return{type:xM,data:e}};const LR=function(e){return{type:SM,data:e}};const NR=function(){return{type:qP}};var IR=function(){return{type:rM}},jR=function(e,t){if(e&&e.duplicatedItemData&&a().isJsonObject(e.duplicatedItemData))return e.duplicatedItemData;var n=a().cloneDeep(a().getNested(t,"itemData.current.item")),r=a().getNested(t,"itemData.current.widgetInstances");if(!$h(t)){var i=(new Ih).build(n.definition,r);n.content=i.toHTML()}return SR(n,r,!1,!1)};const BR=function(e){return function(t,n,r){var i=r.app,o=r.publicEvents,s=r.onChangeRoute,l=i.component.comms,u=n(),c=jR(e,u),d=!0,f=!0;if(e&&!0===e.disablePublicEvent&&(f=!1),!1===a().getNested(u,"initOptions.config.item_edit.item.save.persist")&&(d=!1),f){if(o.trigger(sd.EVENTS.save,MR(c)).isDefaultPrevented())return;c=jR(e,n())}u.itemBankSettings&&c&&(c=a().extend(c,{itemBankSettings:u.itemBankSettings})),t(function(e){return{type:iM,data:e}}(c));var p,h=a().getNested(c,"item.description");if(a().isString(h)&&h.length>250){var m=i.i18n.get("editorDescriptionLengthError");return i.errorUtil.handle({id:i.errorUtil.errorsArray.length,method:"createItemEditSaveItem",message:m},!0,!1),o.trigger(sd.EVENTS.saveError,{error:m,json:MR(c)}),alert(m),void t(IR())}if(d){if(a().isUndefined(c.item.workflow_comments)){var g=a().cloneDeep(a().getNested(u,"itemData.current.workflowComments"))||[];g.length&&(c.item.workflow_comments=g)}p=l.request({url:a().getNested(e,"url")||"/itembank/items",action:"set",data:c,disableErrorAlert:!0})}else p=S.resolve(c);p.then((function(e){var r=a().getNested(e,"data.item")||{};r.workflow_comments&&(t(TD({value:r.workflow_comments})),delete r.workflow_comments),r&&r.readOnly&&(t(LR("preview")),t(NR())),t(function(e){return{type:oM,data:e}}(r));var i=Jh(n());i.originalItemReference=r.reference,s(i),o.trigger(sd.EVENTS.saveSuccess,MR(c))}),(function(e){var n=e.meta&&e.meta.message||e;o.trigger(sd.EVENTS.saveError,{error:n,json:MR(c)}),alert(n),t(IR())}))}};var FR=function(e){return{type:OM,data:e}},YR=function(e){if(e.isDefaultPrevented()&&!0===a().getNested(e,"_internal.preventArguments.discardWidgetChanges"))return!1;return!0};const HR=function(e){return function(t,n,r){var i,o=r.publicEvents,s=r.qeManager,l=s.getData(),u="response"===l.widgetType,c=n(),d=a().cloneDeep(c.itemData.current),f=!1,p=!1,h=a().getNested(c.initOptions,"config.widget_templates.require_validation"),m=s.getInstanceIfVisible();if(h&&u&&m&&!0===m.isValidatable()&&!0===(null===(i=m.attribute("validation.automarkable"))||void 0===i?void 0:i.getValue())){var g=m.checkValidation({showErrors:!0});p=!0!==a().getNested(g,"has_validation")}if(p)t(FR(!0));else{"new"===c.widgetReference?(l.addRegionNodeId=c.addRegionNodeId,l.reference=a().uuid(),d=bR(d,l),f=!0):(l.reference=c.widgetReference,d=_R(d,l));var y=a().getNested(d,"item"),v=a().getNested(d,"widgetInstances"),b=SR(y,v),_=o.trigger(sd.EVENTS.save,MR(b));YR(_)&&(f?(t(IM({widgetReference:l.reference})),t(DR(l))):t(RR(l))),_.isDefaultPrevented()||(t(BR({disablePublicEvent:!0})),!1!==a().getNested(e,"navigate")&&t(IM({mode:"item",widgetReference:null,widgetData:null},!1)))}}};const VR=function(){return{type:tM}};const qR=function(){return{type:fM}};const UR=function(e){return{type:eM,data:e}};const WR=function(e){return{type:lM,data:e}};const zR=function(){return{type:ZP}};const GR=function(e){return{type:nM,data:e}};var $R=__webpack_require__(66496),KR=__webpack_require__.n($R);function ZR(e){return function(e){if(Array.isArray(e))return JR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QR(e){a()(this).extend(e),this.initialize()}a().extend(QR.prototype,i().Events,{remove:function(){this.stopListening()}}),QR.extend=i().Model.extend,QR.Collection=function(e,t){var n=this;this._behaviours={},a().each(e,(function(e,r){e.prototype.active.call(t)&&(n._behaviours[r]=new e(t))}))},a().extend(QR.Collection.prototype,i().Events,{aggregate:function(e){var t={},n=Array.prototype.slice.call(arguments,1);return a().each(this._behaviours,(function(r){a().isFunction(r[e])&&a().extend(t,r[e].apply(r,n))})),t},prioritise:function(e,t){var n=this,r=Array.prototype.slice.call(arguments,2),i=this._behaviours[a().find(t,(function(t){return n._behaviours[t]&&n._behaviours[t][e]}))];return i&&i[e].apply(i,r)},callAll:function(e){var t,n=Array.prototype.slice.call(arguments,1);(t=a()(this._behaviours)).invoke.apply(t,[e].concat(ZR(n)))},callIfActive:function(e,t){var n=this._behaviours[e],r=Array.prototype.slice.call(arguments,2);if(n&&a().isFunction(n[t]))return n[t].apply(n,r)},has:function(e){return!!this._behaviours[e]}});const XR=QR;var eL=__webpack_require__(67316),tL=__webpack_require__(53488),nL=__webpack_require__.n(tL),rL=__webpack_require__(27638),iL=__webpack_require__.n(rL),oL=__webpack_require__(73322),aL=eL.create();function sL(e){return window.getComputedStyle(e).getPropertyValue("transform")}function lL(e){for(var t=e.replace(/(matrix\()|(\))/,"").split(","),n=0;n<t.length;n++)t[n]=parseFloat(t[n]);return[[t[0],t[2],t[4]],[t[1],t[3],t[5]],[0,0,1]]}aL.import(nL()),aL.import(iL()),aL.import(oL);const uL={getInverseMatrix:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=sL(e),r=lL(n);return t.removeTranslation&&(r[0][2]=r[1][2]=0),aL.inv(aL.matrix(r))},transformPoint:function(e,t){var n,r,i,o=(r=(n=e).x,i=n.y,aL.matrix([[r],[i],[1]])),a=aL.multiply(t,o);return{x:a.get([0,0]),y:a.get([1,0])}}};function cL(e,t){this.pub=e,this.opts=t}a().extend(cL.prototype,i().Events,{EVENT:{APPENDED_ITEM:"appended-item",NOTIFY_CUSTOM_DROP:"notify-custom-drop",HIT_ORIGIN:"hit-origin",INITIALIZED:"initialized",MOVED_ITEM_AWAY:"moved-item-away"},MOVE_THROTTLE_TIME:100,initialize:function(){a().defaults(this.opts,this.pub.defaults),this.applyBehaviours(),this.jqueryize(),this.applyClasses(),this.dragulize(),this.listenToDragula(),this.listenToInterface(),this.on(this.EVENT.MOVED_ITEM_AWAY,this.onMovedAway),this.trigger(this.EVENT.INITIALIZED)},applyBehaviours:function(){this.behaviours=new XR.Collection(this.opts.dragDropBehaviours,{prv:this,pub:this.pub,opts:this.opts})},applyClasses:function(){var e=this.pub,t=this.opts;this.$zones.addClass(e.CLASS.ZONE),t.list||t.container.classList.add(this.pub.CLASS.NON_LIST)},jqueryize:function(){var e=this.pub;this.$origin=f()(this.opts.origin),this.$zones=f()(this.opts.zones),this.$draggables=f()(this.opts.draggables),this.opts.dropzones?this.$dropzones=f()(this.opts.dropzones):this.$dropzones=this.$zones.not(this.$origin).not(this.$origin.find(this.opts.zones)),this.$container=e.$container=f()(this.opts.container)},dragulize:function(){var e=this.opts;this.drake=KR()(e.zones,{snapMirrorToCorner:e.snapMirrorToCorner,mirrorContainer:e.container,copy:this.canCopy.bind(this),accepts:this.canAccept.bind(this),transformMatrix:uL,moves:this.canMove.bind(this),invalid:this.isInvalid.bind(this)})},isInvalid:function(e){return a().every(this.behaviours.aggregate("isInvalid",e,this.$draggables))},canMove:function(e,t,n){var r=a().every(this.behaviours.aggregate("isMovable",e,t,n));return a().isFunction(this.opts.canDragCallback)?r&&this.opts.canDragCallback():r},canAccept:function(e,t,n){return(!t||!t.hasAttribute("disabled"))&&a().every(this.behaviours.aggregate("isDroppable",e,t,n))},canCopy:function(e,t){return!!this.behaviours.callIfActive("duplicateItems","isInOrigin",t)},listenToDragula:function(){var e=this,t=this.pub,n=this.drake,r=!1;n.on("drag",(function(e,n){t.trigger(t.EVENT.DRAG_START,e,n),t.trigger(t.EVENT.ACTIVATED_ITEM,e)})).on("move",a().throttle((function(n,r,i){e.isDragging()&&t.trigger(t.EVENT.MOVED,n,r,i)}),this.MOVE_THROTTLE_TIME)).on("dragend",(function(n){n&&(n.classList.remove(t.CLASS.DRAG_SHADOW,t.CLASS.DRAG_MIRROR),t.trigger(t.EVENT.DEACTIVATED_ITEM,n)),a().isFunction(e.opts.shouldNotAnimateDragEndCallback)&&e.opts.shouldNotAnimateDragEndCallback()?t.trigger(t.EVENT.DRAG_END_NO_ANIMATION,n):t.trigger(t.EVENT.DRAG_END,n),r=!1})).on("over",(function(e,n){t.trigger(t.EVENT.OVER_DROP_ZONE,e,n)})).on("out",(function(e,n){t.trigger(t.EVENT.LEFT_DROP_ZONE,n)})).on("drop",(function(t,i,o){r?n.cancel(!0):e.triggerAppendEvents(t,i,o)})).on("cloned",(function(e,n,r){e.classList.add(t.CLASS.DRAG_MIRROR),t.trigger(t.EVENT.CLONED,e,n,r)})).on("cancel",(function(e,n,i){r||t.trigger(t.EVENT.DRAG_CANCEL,e,n,i)})).on("shadow",(function(e,n){e.classList.add(t.CLASS.DRAG_SHADOW),t.trigger(t.EVENT.SHADOW,e,n)})),this.on(this.EVENT.NOTIFY_CUSTOM_DROP,(function(e){r=e}))},listenToInterface:function(){var e=this,t=this.drake,n=this.pub;n.on(n.EVENT.SET_DISABLED,this.setDisabled,this),n.on(n.EVENT.REMOVE,this.remove,this),n.on(n.EVENT.CLEAR,(function(){t.cancel()})),n.on(n.EVENT.CHANGE_DRAGGABLES,(function(t){e.$draggables=f()(t)})),n.on(n.EVENT.DRAG_START_KEYBOARD,(function(t){e.drake.start(t),t.classList.add(e.pub.CLASS.GU_TRANSIT)})),n.on(n.EVENT.DRAG_END,(function(){e.$draggables.removeClass(e.pub.CLASS.GU_TRANSIT)}))},isDragging:function(){return this.drake&&this.drake.dragging},triggerAppendEvents:function(e,t,n){var r=this,i=this.pub;this.trigger(this.EVENT.APPENDED_ITEM,e,t);var o=a()(t.childNodes).filter((function(e){return r.$draggables.is(e)})),s={containerIndex:this.$dropzones.index(t),sourceIndex:this.$dropzones.index(n),keys:a()(o).map((function(e){return e.dataset.key}))};i.trigger(i.EVENT.CHANGED,e,t,n,s)},onMovedAway:function(e,t){var n=this.pub,r=this.$dropzones.index(t);n.trigger(n.EVENT.MOVED_AWAY,e,t,r)},setDisabled:function(e,t){var n=!!e||null,r=this.behaviours.aggregate("disabledProps",n),i=t?f()(t):this.$zones.add(this.$draggables);r.disabled=n,i.attr(r)},remove:function(){this.behaviours.callAll("remove"),this.drake.destroy(),this.off(),this.pub.off(),this.$container=this.$origin=this.$zones=this.$draggables=this.pub=this.opts=null}});const dL=cL;function fL(e){var t=new dL(this,e);this.uid=a().uniqueId("lrn-dragdrop-"),t.initialize()}a().extend(fL.prototype,i().Events,{EVENT:{ACTIVATED_ITEM:"activated-item",AUTO_MOVE:"auto-move",CHANGED:"changed",CHANGE_DRAGGABLES:"change-draggables",CLEAR:"clear",CLONING:"cloning",CLONED:"cloned",DEACTIVATED_ITEM:"deactivated-item",DRAG_START:"drag-start",DRAG_START_KEYBOARD:"drag-start-keyboard",DRAG_CANCEL:"drag-cancel",DRAG_END:"drag-end",DRAG_END_NO_ANIMATION:"drag-end-no-animation",OVER_DROP_ZONE:"over-drop-zone",LEFT_DROP_ZONE:"left-drop-zone",MOVED:"moved",MOVED_AWAY:"moved-away",SET_DISABLED:"set-disabled",SHADOW:"shadow",REMOVE:"remove"},CLASS:{ACTIVE:"lrn_active",DRAG_SHADOW:"lrn_drag_shadow",DRAG_MIRROR:"lrn_drag_mirror",DROPPABLE:"lrn_droppable",DROPZONE:"lrn_dropzone",GU_TRANSIT:"gu-transit",HIGHLIGHT:"lrn_highlight",IGNORE_TAP:"lrn_dragdrop_ignore_tap",NON_LIST:"lrn_non_list",OVER:"lrn_over",ZONE:"lrn_dragdrop"},defaults:{preventMathjaxDuplication:!0,copy:!1,keyboardAndClickInteraction:!0,applyAriaAttributes:!0,applyOverHighlightDropzoneClasses:!0,maxItems:null,enforceMaxItemsInOrigin:!1,scrollable:!0,groupingResponses:!1,list:!1},changeDraggables:function(e){this.trigger(this.EVENT.CHANGE_DRAGGABLES,e)},clear:function(){this.trigger(this.EVENT.CLEAR)},disable:function(e){this.trigger(this.EVENT.SET_DISABLED,!0,e)},enable:function(e){this.trigger(this.EVENT.SET_DISABLED,!1,e)},move:function(e,t,n){this.trigger(this.EVENT.AUTO_MOVE,e,t,n)},remove:function(){this.trigger(this.EVENT.REMOVE)}});const pL=fL;var hL,mL,gL={scroll:"authorApi:pointerScrollHelper:scroll"},yL=["mousemove","touchmove"],vL=function(){hL=hL||f()(document),mL=mL||f()(window),this.cache={},this.cache.jQNamespace=a().uniqueId("lrn_pointer_scroll_helper"),this.docEvents={},a().each(yL,(function(e){this.docEvents[e]=e+"."+this.cache.jQNamespace}),this),this.cacheDimensions(),this.addListeners()};a().extend(vL.prototype,c.Events,{EVENTS:gL,addListeners:function(){var e=this.docEvents,t=a().bind(this.onPointerMove,this);hL.on(e.mousemove,t),hL.on(e.touchmove,t)},cacheDimensions:function(){var e=mL.innerHeight();this.cache.viewportHeight=e,this.cache.topScrollzone=60,this.cache.bottomScrollzone=e-60},cacheMaxYScroll:function(){var e=0,t=hL.innerHeight();this.cache.viewportHeight<=t&&(e=t-this.cache.viewportHeight),this.cache.maxYScroll=e},cleanup:function(){this.stopScrolling(),a().each(this.docEvents,(function(e){hL.off(e)})),delete this.docEvents,delete this.cache},onPointerMove:function(e){var t;t=e.originalEvent.changedTouches?e.originalEvent.changedTouches[0]:e.originalEvent,this.pointerIsNearTopEdge(t)?this.scrollUp():this.pointerIsNearBottomEdge(t)?this.scrollDown():this.stopScrolling()},pointerIsNearBottomEdge:function(e){return e.clientY>=this.cache.bottomScrollzone},pointerIsNearTopEdge:function(e){return e.clientY<=this.cache.topScrollzone},shouldStartScrolling:function(e){return!this.cache.previousDirection||this.cache.previousDirection.y!==e.y},startScrolling:function(e){var t=a().bind((function(){this.startScrolling(e)}),this);this.scrollTo(e),this.cache.timer=window.setTimeout(t,5)},scrollDown:function(){this.scrollInDirection({y:1})},scrollInDirection:function(e){this.shouldStartScrolling(e)&&(this.cacheMaxYScroll(),this.startScrolling(e),this.cache.previousDirection=e)},scrollUp:function(){this.scrollInDirection({y:-1})},scrollTo:function(e){var t=mL.scrollTop(),n=2*e.y,r=t+n;r<0&&(r=0),r>this.cache.maxYScroll&&(r=this.cache.maxYScroll),r!==t&&(mL.scrollTop(r),this.trigger(gL.scroll,{y:n}))},stopScrolling:function(){this.cache.timer&&window.clearTimeout(this.cache.timer),delete this.cache.timer,delete this.cache.previousDirection,delete this.cache.maxYScroll}});const bL=vL;const _L=function(e){return{type:hM,data:e}};var wL="imagetool",EL={validationData:{availableFormats:null,formatsData:null,options:{score:1,decimalPlaces:10,allowThousandsSeparator:!0,normalizeArithmetic:!0,setDecimalSeparator:".",setThousandsSeparator:","}},generatedMath:{},questionData:{},parameters:[{name:"a",type:"list",min:1,max:5,step:1,list:"1,2,3,4,5"}]},SL={PARAMETERS:{NAME:{MAX_LENGTH:15,MIN_LENGTH:1,PATTERN:/^[A-Za-z]+$/},MIN:{MIN_VALUE:-999999.999,MAX_VALUE:999999.999},MAX:{MIN_VALUE:-999999,MAX_VALUE:999999},STEP:{MIN_VALUE:.001},PERMUTATIONS:{MIN_VALUE:1,MAX_VALUE:1e7},LIST:{PATTERN:/^[\+\-]*\d+\.?\d{0,3}(,[\+\-]*\d+\.?\d{0,3})*$/}},QUESTION_DATA:{EXPRESSION:{MIN_PARAMETERS:1},TEMPLATE:{RESPONSE_PATTERN:/{{response}}/g,MIN_RESPONSES:1,MAX_RESPONSES:1}},VALIDATION_DATA:{AVAILABLE_FORMATS:{MIN_SELECTIONS:1},OPTIONS:{SCORE:{MIN_VALUE:0},SEPARATOR:{COMMA:",",DOT:"."}}}},xL={MAX_COUNT:50},kL="mathgen",TL={MAX_COUNT:5,VAR_PATTERN:/{{var:([a-z]*)}}/gi},OL={CLOZEFORMULA_TEMPLATE:{name:"Math Question Generator",description:"Generate adaptations of predefined math equations.",group_reference:"math",defaults:{is_dynamic_content:!0,stimulus:"[This is the stem.]",template:"Answer: {{response}}",response_container:{width:"160px"}},image:"https://assets.learnosity.com/questiontypes/templates/qev3/mathgen.png"},LAYOUT_NAME:"mathgen-layout",TEMPLATE_REFERENCE:"ec8f2f4e-c048-4347-906a-32b0c44c0515"},CL="seed",AL={INPUT_CHANGE_DEBOUNCE:500},PL={MAX_DECIMAL_PLACES:10},ML={arrowDown:"ArrowDown",arrowLeft:"ArrowLeft",arrowRight:"ArrowRight",arrowUp:"ArrowUp",enter:"Enter",escape:"Escape",space:" ",tab:"Tab"};const DL=XR.extend({active:function(){return!!this.opts.dropzones},initialize:function(){this.listenTo(this.pub,this.pub.EVENT.DRAG_START,this.dragHandler),this.listenTo(this.pub,this.pub.EVENT.CHANGED,this.dropHandler),this.listenTo(this.pub,this.pub.EVENT.DRAG_END,this.dragEndHandler),this.containers=[]},isInvalid:function(e,t){var n=t.is(e),r=t.find(e);return{isInvalid:!n&&!r.length||e.hasAttribute("disabled")}},isMovable:function(e,t,n){var r=n.attributes["data-authorapi-selector"],i=r&&r.value;return{allowed:-1===["config-delete-btn","config-edit-btn"].indexOf(i)}},dragHandler:function(e){this.cloneEl=e.cloneNode(!0),this.cloneEl.style.opacity="0.5",e.parentNode.insertBefore(this.cloneEl,e.nextSibling)},dropHandler:function(){this.prv.drake.cancel(!0)},dragEndHandler:function(){this.cloneEl&&(this.cloneEl.parentNode.removeChild(this.cloneEl),delete this.cloneEl)}}),RL={reorderWidgetsBehaviour:DL};function LL(e){return(LL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IL(e,t){return(IL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=YL(e);if(t){var i=YL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BL(this,n)}}function BL(e,t){if(t&&("object"===LL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FL(e)}function FL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YL(e){return(YL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IL(e,t)}(o,e);var t,n,r,i=jL(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).selectors={zones:".lrn-author-region",dropZones:".lrn-author-ui-dropzone",draggables:".lrn-author-widget-draggable",widgetWrapperInner:".lrn-author-widget-wrapper-inner"},t.draggedImageTool=null,t.currentKeyboardDropzone=null,t.boundOnDocumentKeyDown=t.onDocumentKeyDown.bind(FL(t)),t.boundOnDocumentKeyDownForceTabFocus=t.onDocumentKeyDownForceTabFocus.bind(FL(t)),t.boundOnDocumentClickRemoveKeyDownHandler=t.onDocumentClickRemoveKeyDownHandler.bind(FL(t)),t.boundOnDocumentKeyUp=t.onDocumentKeyUp.bind(FL(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.container&&this.initDragDrop(),f()(document).on("keydown",this.boundOnDocumentKeyDown),f()(document).on("keyup",this.boundOnDocumentKeyUp)}},{key:"componentWillUnmount",value:function(){this.destroyDragDrop(),f()(document).off("keydown",this.boundOnDocumentKeyDown),f()(document).off("keydown",this.boundOnDocumentKeyDownForceTabFocus),f()(document).off("keyup",this.boundOnDocumentKeyUp),f()(document).off("click",this.boundOnDocumentClickRemoveKeyDownHandler)}},{key:"componentDidUpdate",value:function(e){if(this.updateWidgetsTabIndex(),this.props.canDrag){if(this.dragDrop?this.props.isDraggingViaMouse||this.props.widgetsLoading||this.updateDraggables():this.props.container&&this.initDragDrop(),this.props.isDraggingViaMouse&&!this.pointerScrollHelper&&(this.pointerScrollHelper=new bL),!this.props.isDraggingViaMouse&&this.pointerScrollHelper&&(this.pointerScrollHelper.cleanup(),delete this.pointerScrollHelper),this.props.hoveredDropzone&&(this.currentKeyboardDropzone=this.props.hoveredDropzone),this.props.isKeyboardMode&&!e.isKeyboardMode){var t=this.props.availableDropzones[0];this.dragDrop.trigger(this.dragDrop.EVENT.DRAG_START_KEYBOARD,this.getDraggableElement()),this.props.createUpdateHoveredDropzoneViaKeyboard(t)}if(this.props.activeTabs!==e.activeTabs&&this.props.isKeyboardMode){var n=a().pluck(this.props.activeTabs,"activeTabNodeId"),r=a().pluck(e.activeTabs,"activeTabNodeId"),i=a().difference(n,r)[0],o=this.props.regionsTree.findNodeById(i);if(o){var s=o.getHoverableDropzones(this.props.draggedReference,this.props.activeTabs)[0];this.props.createUpdateHoveredDropzoneViaKeyboard(s)}}!this.props.widgetsLoading&&e.widgetsLoading&&(f()(document).one("keydown",this.boundOnDocumentKeyDownForceTabFocus),f()(document).one("click",this.boundOnDocumentClickRemoveKeyDownHandler))}else this.destroyDragDrop()}},{key:"focusWidgetMoveButton",value:function(e){var t=f()('[data-authorapi-widget-reference="'.concat(e,'"]')).closest(".lrn-widget-drag-wrapper").find('*[data-authorapi-selector="config-drag-handle"] > button');t.length&&(t.focus(),t[0].scrollIntoView(!1))}},{key:"destroyDragDrop",value:function(){this.dragDrop&&(this.dragDrop.remove(),delete this.dragDrop)}},{key:"initDragDrop",value:function(){var e=this,t=this.getArrayOfElements(this.selectors.draggables),n=this.getArrayOfElements(this.selectors.dropZones),r=this.getArrayOfElements(this.selectors.zones);this.dragDrop=new pL({dragDropBehaviours:RL,container:this.props.container,snapMirrorToCorner:"snapToTheLeft",zones:r,draggables:t,dropzones:n}),this.dragDrop.on(this.dragDrop.EVENT.DRAG_START,(function(t){var n=t.querySelector("[data-authorapi-widget-reference]"),r=n&&n.getAttribute("data-authorapi-widget-reference");e.props.createShowDropzones(r)})),this.listenForChanges()}},{key:"getArrayOfElements",value:function(e){var t=this.props.container.querySelectorAll(e);return Array.prototype.slice.call(t)}},{key:"listenForChanges",value:function(){var e=this;this.dragDrop.on(pL.prototype.EVENT.DRAG_START,(function(t){var n="data-authorapi-widget-reference",r=t.querySelector("[".concat(n,"]")),i=r&&r.getAttribute(n),o=e.context.activityManager.getWidgetByTrueReference(i);e.lastDraggedElRef=i,"imagetool"===a().getNested(o,"json.type")&&(e.draggedImageTool=e.context.activityManager.getFeatureFacadeByTrueReference(i),e.draggedImageTool.stopMirror())})),this.dragDrop.on(pL.prototype.EVENT.CHANGED,(function(t){var n="data-authorapi-widget-reference",r=t.querySelector("["+n+"]"),i=r&&r.getAttribute(n),o=a().getNested(e.props.hoveredDropzone,"id");o&&e.props.hoveredDropzone.type!==Lh.TYPES.tab&&(e.props.createMoveWidget({draggedElReference:i,dropzoneElReference:o}),e.props.createLoadWidget(i))})),this.dragDrop.on(pL.prototype.EVENT.DRAG_END,(function(){e.draggedImageTool&&(e.draggedImageTool.startMirror(),e.draggedImageTool=null),e.props.createHideDropzones()}))}},{key:"updateDraggables",value:function(){var e=this.getArrayOfElements(this.selectors.draggables);this.dragDrop.changeDraggables(e)}},{key:"getDraggableElement",value:function(){return f()('[data-authorapi-widget-reference="'.concat(this.props.draggedReference,'"]')).closest(".lrn-author-widget-draggable")[0]}},{key:"updateWidgetsTabIndex",value:function(){var e=this;f()(this.selectors.widgetWrapperInner).find(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(", ")).each((function(t,n){var r=f()(n);switch(e.props.activeMode){case Uh:var i=r.attr("tabindex");"-1"!==i&&(r.data("tabindex-previous",void 0!==i?i:null),r.attr("tabindex","-1"));break;case Wh:var o=r.data("tabindex-previous");null===o?r.removeAttr("tabindex"):void 0!==o&&r.attr("tabindex",o)}}))}},{key:"onDocumentKeyDown",value:function(e){switch(e.key){case ML.escape:case ML.tab:case ML.arrowLeft:case ML.arrowUp:case ML.arrowRight:case ML.arrowDown:case ML.space:this.props.isKeyboardMode&&e.preventDefault()}}},{key:"onDocumentKeyDownForceTabFocus",value:function(e){e.key===ML.tab&&(e.preventDefault(),this.focusWidgetMoveButton(this.lastDraggedElRef))}},{key:"onDocumentClickRemoveKeyDownHandler",value:function(){f()(document).off("keydown",this.boundOnDocumentKeyDownForceTabFocus)}},{key:"onDocumentKeyUp",value:function(e){var t;switch(e.key){case ML.escape:this.props.isKeyboardMode&&(this.dragDrop.trigger(this.dragDrop.EVENT.DRAG_END),this.focusWidgetMoveButton(this.lastDraggedElRef));break;case ML.arrowLeft:case ML.arrowUp:t=!1;break;case ML.arrowRight:case ML.arrowDown:t=!0;break;case ML.tab:t=!e.shiftKey;break;case ML.space:case ML.enter:if(this.props.isKeyboardMode&&a().getNested(this.props.hoveredDropzone,"type")===Lh.TYPES.dropzone){var n=this.getDraggableElement();n&&this.dragDrop.trigger(pL.prototype.EVENT.CHANGED,n)}}this.props.isKeyboardMode&&(!0===t?this.hoverNextKeyboardDropzone():!1===t&&this.hoverPreviousKeyboardDropzone())}},{key:"hoverSiblingKeyboardDropzone",value:function(e){var t=a().findIndex(this.props.availableDropzones,this.currentKeyboardDropzone),n=this.props.availableDropzones.length,r=-1===t?0:(n+t+e)%n,i=this.props.availableDropzones[r];this.props.createUpdateHoveredDropzoneViaKeyboard(i)}},{key:"hoverPreviousKeyboardDropzone",value:function(){this.hoverSiblingKeyboardDropzone(-1)}},{key:"hoverNextKeyboardDropzone",value:function(){this.hoverSiblingKeyboardDropzone(1)}},{key:"render",value:function(){return null}}])&&NL(t.prototype,n),r&&NL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component),VL=Ln((function(e){var t=(new Ih).build(e.itemData.current.item.definition,e.itemData.current.widgetInstances),n=e.itemState.activeTabs,r=t.getHoverableDropzones(e.ui.dropzones.draggedRef,n);return{hoveredDropzone:e.ui.dropzones.hoveredDropzone,isDraggingViaMouse:e.ui.dropzones.showDropzones&&!e.ui.dropzones.isKeyboardMode,isKeyboardMode:e.ui.dropzones.isKeyboardMode,draggedReference:e.ui.dropzones.draggedRef,widgetsLoading:e.itemState.flags.widgetsLoading,canDrag:Zh(e),availableDropzones:r,regionsTree:t,activeTabs:n,activeMode:Gh(e)}}),{createLoadWidget:UR,createShowDropzones:WR,createHideDropzones:zR,createMoveWidget:GR,createUpdateHoveredDropzoneViaKeyboard:_L})(HL);HL.contextTypes={activityManager:jn().object};const qL=VL;function UL(e){return(UL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zL(e,t){return(zL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KL(e);if(t){var i=KL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $L(this,n)}}function $L(e,t){if(t&&("object"===UL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function KL(e){return(KL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZL="col-separator",JL="lrn-author-item-edit",QL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zL(e,t)}(o,e);var t,n,r,i=GL(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={offsetTop:0},n}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.createLoadWidgets();var e=this.itemContentEl.getBoundingClientRect().top;this.state.offsetTop!==e&&this.setState({offsetTop:e})}},{key:"componentDidUpdate",value:function(){this.props.notLoadedWithQuestionsAPI.length&&this.props.createLoadWidgets();var e=this.itemContentEl.getBoundingClientRect().top;this.state.offsetTop!==e&&this.setState({offsetTop:e})}},{key:"componentWillUnmount",value:function(){this.props.createUnloadWidgets()}},{key:"calculateItemContentElHeight",value:function(){var e=this.props.containerConfig.height;return"auto"===e?a().getNested(document,"documentElement.clientHeight")-this.state.offsetTop-Yh-this.props.containerConfig.fixed_footer_height:e-Bh-Fh}},{key:"render",value:function(){var e,t=this,n=this.props.node,r=["row"],i={},o=0;return this.props.node.getVerticalDivider()&&r.push(ZL),"edit"===this.props.activeMode&&r.push(JL),"preview"===this.props.activeMode&&!0===this.props.node.getScroll().enabled&&(i={height:(o=this.calculateItemContentElHeight())+"px",minHeight:o+"px"}),e=n.hasRegions()?a().map(n.getRegions(),(function(e){return Oj.getRegionComponent("column",{key:"column_".concat(e.getID()),node:e,itemContentElHeight:o})})):Oj.getWidgetsComponents(n),zt.createElement("div",{className:"lrn-author-item-content-wrapper lrn-author-item-toolbar-shown"},zt.createElement("div",{className:"lrn-author-item-content","data-authorapi-selector":"item-content",ref:function(e){return t.itemContentEl=e},style:i},zt.createElement("div",{className:a().classNames(r),"data-authorapi-region":"root",ref:function(e){return t.container=e}},e)),!this.props.showItemSettings&&zt.createElement(qL,{container:this.container}))}}])&&WL(t.prototype,n),r&&WL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const XL=Ln((function(e){var t=[];return e.itemState.widgetInstances.forEach((function(e){e.loadedWithQuestionsAPI||t.push(e)})),{notLoadedWithQuestionsAPI:t,activeMode:e.ui.flags.activeMode,containerConfig:a().getNested(e,"initOptions.config.container"),showItemSettings:e.showItemSettings}}),{createLoadWidgets:VR,createUnloadWidgets:qR})(QL);function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rN(e,t){return(rN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aN(e);if(t){var i=aN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oN(this,n)}}function oN(e,t){if(t&&("object"===eN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aN(e){return(aN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rN(e,t)}(o,e);var t,n,r,i=iN(o);function o(){return tN(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return zt.createElement("div",{className:"lrn-author-region-sidebar-wrapper lrn-author-sidebar-visible"},zt.createElement("div",{className:"lrn-author-region-sidebar",key:"sidebar_region_".concat(this.props.regionNumber)}))}}])&&nN(t.prototype,n),r&&nN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const lN=Ln((function(e){return{flags:e.ui.flags}}))(sN);function uN(e){return(uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dN(e,t){return(dN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mN(e);if(t){var i=mN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pN(this,n)}}function pN(e,t){if(t&&("object"===uN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hN(e)}function hN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mN(e){return(mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gN="lrn-author-shared-passages-popover",yN="lrn-popover-hide",vN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dN(e,t)}(o,e);var t,n,r,i=fN(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).state={showDropDown:!1},e._boundOnOutsideClick=e._onOutsideClick.bind(hN(e)),e.sharedPassageButtonId=a().uuid(),e.dropDownButtonId=a().uuid(),e}return t=o,(n=[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this._boundOnOutsideClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this._boundOnOutsideClick)}},{key:"_onOutsideClick",value:function(e){var t=!0;(e.target.id===this.dropDownButtonId||e.target.id===this.sharedPassageButtonId||e.target.parentElement&&(e.target.parentElement.id===this.dropDownButtonId||e.target.parentElement.id===this.sharedPassageButtonId))&&(t=!1),t&&this.state.showDropDown&&this.toggleDropDown()}},{key:"_clickHandler",value:function(){this.props.updateState({mode:"questionlist",addRegionNodeId:this.props.regionNodeId})}},{key:"toggleDropDown",value:function(){this.setState({showDropDown:!this.state.showDropDown})}},{key:"renderSharedPassagesPopover",value:function(){var e=this,t=this.context.i18n,n=[gN];return this.state.showDropDown||n.push(yN),zt.createElement("div",{className:a().classNames(n),"data-authorapi-selector":"show-shared-passages",onMouseEnter:function(){return e.props.addHover()},onMouseLeave:function(){return e.props.removeHover()}},zt.createElement("ul",{className:"lrn-author-shared-passages-nav"},zt.createElement("li",{className:"lrn-author-region-passages-button",id:this.sharedPassageButtonId,onClick:function(){e._clickHandler()}},zt.createElement("a",{type:"button","data-authorapi-selector":"show-shared-passages-option",className:"lrn-author-region-passages-button"},t.get("findExistingPassage")))))}},{key:"render",value:function(){var e=this;return zt.createElement("div",{className:"lrn-author-ui-add-extras"},zt.createElement("button",{type:"button","data-authorapi-selector":"show-shared-passages-button",className:"lrn-author-shared-passages-dropdown",id:this.dropDownButtonId,onClick:function(){return e.toggleDropDown()},onMouseEnter:function(){return e.props.addHover()},onMouseLeave:function(){return e.props.removeHover()}},zt.createElement("span",{className:"lrn-i-more"})),this.renderSharedPassagesPopover())}}])&&cN(t.prototype,n),r&&cN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);vN.contextTypes={i18n:jn().object};const bN=Ln(null,{updateState:IM})(vN);function _N(e){return(_N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EN(e,t){return(EN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kN(e);if(t){var i=kN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xN(this,n)}}function xN(e,t){if(t&&("object"===_N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kN(e){return(kN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EN(e,t)}(o,e);var t,n,r,i=SN(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={isHovered:!1},n}return t=o,(n=[{key:"setHover",value:function(e){this.setState({isHovered:e})}},{key:"handleClick",value:function(){this.props.updateState({mode:"widget",widgetReference:"new",addRegionNodeId:this.props.regionNodeId})}},{key:"renderSharedPassagesButton",value:function(){return this.props.isPassagesButtonEnabled?zt.createElement(bN,{regionNodeId:this.props.regionNodeId,addHover:this.setHover.bind(this,!0),removeHover:this.setHover.bind(this,!1)}):null}},{key:"render",value:function(){var e=this,t=a().classNames("lrn-author-widget-button",{"lrn-author-widget-button-more":this.props.hasWidgets,"lrn-author-widget-button-hover":this.state.isHovered}),n=a().classNames("lrn-author-ui","lrn-author-ui-no-preview",{"lrn-hide":"preview"===this.props.mode});return zt.createElement("div",{className:n},this.renderSharedPassagesButton(),zt.createElement("button",{type:"button","data-authorapi-selector":"add-button",className:t,onClick:function(){e.handleClick()}},zt.createElement("span",{className:"lrn-author-widget-icon lrn-i-plus"}),!this.props.hasWidgets&&zt.createElement("div",null,zt.createElement("span",{className:"lrn-author-widget-text"},this.context.i18n.get("editorAddButton")))))}}])&&wN(t.prototype,n),r&&wN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);TN.contextTypes={i18n:jn().object};const ON=Ln((function(e){return{mode:e.ui.flags.activeMode,isPassagesButtonEnabled:a().getNested(e,"initOptions.config.item_edit.item.shared_passage")}}),{updateState:IM})(TN);function CN(e){return(CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MN(e,t){return(MN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LN(e);if(t){var i=LN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return RN(this,n)}}function RN(e,t){if(t&&("object"===CN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function LN(e){return(LN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NN="col-xs-4",IN="col-xs-5",jN="col-xs-6",BN="col-xs-7",FN="col-xs-8",YN="col-xs-12",HN="lrn-author-region-sidebar-open",VN="lrn-author-region-hide-overflow",qN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}(o,e);var t,n,r,i=DN(o);function o(){return AN(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"applyColumnWidth",value:function(){switch(this.props.node._width){case 30:return NN;case 40:return IN;case 50:return jN;case 60:return BN;case 70:return FN;default:return YN}}},{key:"render",value:function(){var e,t=this,n=this.props.node,r={};"preview"===this.props.activeMode&&this.props.scrollEnabled&&!this.props.node.hasRegions()&&(r={overflowY:"auto",overflowX:"hidden",height:this.props.itemContentElHeight+"px"}),e=n.hasRegions()?a().map(n.getRegions(),(function(e){return Oj.getRegionComponent("tabs",{key:e.getID(),node:e,itemContentElHeight:t.props.itemContentElHeight})})):zt.createElement("div",{className:"lrn-author-region lrn-author-region-column"},Oj.getWidgetsComponents(n));var i=!this.props.node.hasRegions()&&this.props.node.hasWidgets(),o=[this.applyColumnWidth()];return"edit"===this.props.activeMode&&(o.push(HN),o.push(VN)),zt.createElement("div",{className:a().classNames(o),"data-authorapi-region":n.getID(),style:r},i?zt.createElement(lN,null):"",e,!n.hasRegions()&&zt.createElement(ON,{regionNodeId:n.getID(),hasWidgets:n.hasWidgets()}))}}])&&PN(t.prototype,n),r&&PN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const UN=Ln((function(e){return{scrollEnabled:rm(e),activeMode:e.ui.flags.activeMode}}))(qN);const WN=function(e){return{type:pM,data:e}};function zN(e){return(zN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $N(e,t){return($N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=JN(e);if(t){var i=JN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ZN(this,n)}}function ZN(e,t){if(t&&("object"===zN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function JN(e){return(JN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}(o,e);var t,n,r,i=KN(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={tabsHeight:0},n}return t=o,(n=[{key:"componentDidUpdate",value:function(){var e=getComputedStyle(this.element),t=this.element.getBoundingClientRect().height;(t+=parseInt(e.marginTop)+parseInt(e.marginBottom))!==this.state.tabsHeight&&t>=0&&this.setState({tabsHeight:t})}},{key:"handleTabClick",value:function(e){e!==this.getSelectedIndex()&&this.props.updateActiveTab({nodePath:this.props.node.getPath(),activeTabIndex:e,activeTabNodeId:this.props.node._regions[e]._id})}},{key:"onMouseEnterHandler",value:function(e){var t=this;this.props.isDragging&&(this.tabTimeout=setTimeout((function(){return t.handleTabClick(e)}),500))}},{key:"onMouseLeaveHandler",value:function(){clearTimeout(this.tabTimeout)}},{key:"render",value:function(){var e=this,t=this.props.node,n=[],r=[],i=t.getRegions();i&&i.forEach((function(i,o){n.push(Oj.getRegionComponent("tab",{isActive:o===e.getSelectedIndex(),onClick:e.handleTabClick.bind(e),onMouseEnterHandler:e.onMouseEnterHandler.bind(e),onMouseLeaveHandler:e.onMouseLeaveHandler.bind(e),tabValue:o,key:"tab_".concat(i.getID()),node:i,activateTab:function(){e.props.updateActiveTab({nodePath:t.getPath(),activeTabIndex:o,activeTabNodeId:t._regions[o]._id})}})),r.push(Oj.getRegionComponent("tabPane",{isActive:o===e.getSelectedIndex(),onClick:e.handleTabClick.bind(e),tabValue:o,key:"tabPane_".concat(i.getID()),node:i,itemContentElHeight:e.props.itemContentElHeight,tabsHeight:e.state.tabsHeight}))}));var o=!1;return n.forEach((function(t,n){var r=t.props.node;!r.hasRegions()&&e.getSelectedIndex()===n&&r.hasWidgets()&&(o=!0)})),zt.createElement("div",{className:"tabs lrn-author-tabs","data-authorapi-region":t.getID()},o?zt.createElement(lN,null):"",zt.createElement("div",{className:"lrn-author-region"},zt.createElement("ul",{className:"nav nav-tabs lrn-author-nav lrn-author-nav-tabs lrn-author-ui-no-preview",ref:function(t){return e.element=t}},n),zt.createElement("div",{className:"tab-content"},r)))}},{key:"getSelectedIndex",value:function(){var e=this.props.node.getPath(),t=a().find(this.props.activeTabs,(function(t){return t.nodePath===e}));return t?t.activeTabIndex:0}}])&&GN(t.prototype,n),r&&GN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const XN=Ln((function(e){return{flags:e.itemState.flags,previousMode:e.previousMode,isDragging:!!e.ui.dropzones.draggedRef,activeTabs:e.itemState.activeTabs}}),{updateActiveTab:WN})(QN);function eI(e){return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rI(e,t){return(rI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aI(e);if(t){var i=aI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oI(this,n)}}function oI(e,t){if(t&&("object"===eI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aI(e){return(aI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sI="active",lI="lrn-author-margin-top-sm",uI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rI(e,t)}(o,e);var t,n,r,i=iI(o);function o(){return tI(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.node,t=Oj.getWidgetsComponents(e),n=["tab-pane"],r={};return this.props.isActive&&n.push(sI),e.hasWidgets()&&n.push(lI),"preview"===this.props.activeMode&&this.props.scrollEnabled&&(r={height:this.props.itemContentElHeight-this.props.tabsHeight+"px",overflowY:"auto",overflowX:"hidden"}),zt.createElement("div",{className:a().classNames(n),style:r,"data-authorapi-region":e.getID()},zt.createElement("div",{className:"lrn-author-region lrn-author-padding-top-xs"},t),!e.hasRegions()&&zt.createElement(ON,{regionNodeId:e.getID(),hasWidgets:e.hasWidgets()}))}}])&&nI(t.prototype,n),r&&nI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const cI=Ln((function(e){return{scrollEnabled:rm(e),activeMode:e.ui.flags.activeMode}}))(uI);const dI=function(e){return{type:EM,data:e}};function fI(e){return(fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hI(e,t){return(hI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vI(e);if(t){var i=vI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gI(this,n)}}function gI(e,t){if(t&&("object"===fI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yI(e)}function yI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vI(e){return(vI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hI(e,t)}(o,e);var t,n,r,i=mI(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yI(e=i.call(this)),"handleChange",(function(t){var n=t.target.value;e.props.updateTabLabel({id:e.props.node.getID(),value:n})})),e.tabInput=zt.createRef(),e.tabRef=zt.createRef(),e.boundDocumentOnKeyUp=e.documentOnKeyUp.bind(yI(e)),e.boundDocumentOnKeyDown=e.documentOnKeyDown.bind(yI(e)),e.boundLiOnKeyUp=e.liOnKeyUp.bind(yI(e)),e}return t=o,(n=[{key:"componentDidMount",value:function(){this.handleInputWidth(),f()(document).on("keyup",this.boundDocumentOnKeyUp),f()(document).on("keydown",this.boundDocumentOnKeyDown)}},{key:"componentWillUnmount",value:function(){f()(document).off("keyup",this.boundDocumentOnKeyUp),f()(document).off("keyup",this.boundDocumentOnKeyDown)}},{key:"componentDidUpdate",value:function(e){this.handleInputWidth(),e.hoveredDropzoneId!==this.props.hoveredDropzoneId&&this.props.hoveredDropzoneId===this.props.node._id&&this.tabRef.current&&this.tabRef.current.scrollIntoView(!1)}},{key:"handleInputWidth",value:function(){" "!==this.props.node.getLabel()&&f()(this.tabInput.current).autoGrowInput({maxWidth:200,comfortZone:10})}},{key:"documentOnKeyUp",value:function(e){switch(e.key){case ML.enter:case ML.space:this.props.isHovered&&(this.props.activateTab(),e.stopImmediatePropagation())}}},{key:"documentOnKeyDown",value:function(e){switch(e.key){case ML.enter:case ML.space:this.tabRef.current===document.activeElement&&e.preventDefault()}}},{key:"liOnKeyUp",value:function(e){switch(e.key){case ML.enter:case ML.space:this.tabRef.current===document.activeElement&&this.props.activateTab()}}},{key:"render",value:function(){var e=this,t=this.props.node.getLabel(),n=["lrn-author-tab"];this.props.isActive?n.push("active"):this.props.showDropzones&&n.push(this.props.isHovered?"hovered":"dropzone");var r=!this.props.isActive||this.props.activeMode!==Uh;return zt.createElement("li",{role:"tab",ref:this.tabRef,className:a().classNames(n),"aria-selected":this.props.isActive,onMouseEnter:function(){return e.props.onMouseEnterHandler(e.props.tabValue)},onMouseLeave:function(){return e.props.onMouseLeaveHandler(e.props.tabValue)},tabIndex:this.props.isActive?void 0:"0",onKeyUp:this.boundLiOnKeyUp},zt.createElement("a",{className:"lrn-author-tab-link",onClick:function(){e.props.onClick(e.props.tabValue)},"aria-label":t},zt.createElement("input",{className:"lrn-author-tab-label-input",readOnly:r,value:t,"aria-label":t,onChange:this.handleChange,ref:this.tabInput,tabIndex:r?"-1":void 0}),this.props.isActive&&zt.createElement("label",{"data-authorapi-tab-label-input-label":""},zt.createElement("span",{className:"lrn-i-edit"})),!this.props.isActive&&!this.props.isHovered&&this.props.showDropzones&&zt.createElement("span",{className:"lrn-i-dropzone"})),zt.createElement("span",{className:"lrn-active-tab-marker"}))}}])&&pI(t.prototype,n),r&&pI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const _I=Ln((function(e,t){var n=a().getNested(e.ui.dropzones.hoveredDropzone,"id"),r=!!e.ui.dropzones.isKeyboardMode&&a().getNested(e.ui.dropzones.hoveredDropzone,"type")===Lh.TYPES.tab&&n===t.node._id;return{activeMode:e.ui.flags.activeMode,hoveredDropzoneId:n,showDropzones:e.ui.dropzones.showDropzones,isHovered:r}}),{updateTabLabel:dI})(bI);function wI(e){return(wI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SI(e,t){return(SI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TI(e);if(t){var i=TI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kI(this,n)}}function kI(e,t){if(t&&("object"===wI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function TI(e){return(TI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SI(e,t)}(o,e);var t,n,r,i=xI(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"handleClick",value:function(){this.props.onButtonClick()}},{key:"render",value:function(){var e=this,t=this.context.i18n;return zt.createElement("li",null,zt.createElement("button",{type:"button",onClick:function(){return e.handleClick()},"data-authorapi-selector":"config-edit-btn"},t.get("editorEditButton"),zt.createElement("span",{className:"lrn-i-edit"})))}}])&&EI(t.prototype,n),r&&EI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);OI.contextTypes={i18n:jn().object};const CI=OI;function AI(e){return(AI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MI(e,t){return(MI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=NI(e);if(t){var i=NI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return RI(this,n)}}function RI(e,t){if(t&&("object"===AI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LI(e)}function LI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NI(e){return(NI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function II(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jI="lrn-author-widget-sidebar-confirm-active",BI="lrn-author-widget-sidebar-delete-btn",FI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MI(e,t)}(o,e);var t,n,r,i=DI(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),II(LI(t=i.call(this,e)),"handleClick",(function(){t.state.confirmActive&&t.props.onDelete(),t.setState((function(e){return{confirmActive:!e.confirmActive}}))})),II(LI(t),"handleMouseLeave",(function(){t.setState({confirmActive:!1}),setTimeout((function(){t.btn&&t.btn.blur()}),200)})),t.state={confirmActive:!1},t}return t=o,(n=[{key:"render",value:function(){var e=this,t=a().classNames(BI,II({},jI,this.state.confirmActive)),n=this.state.confirmActive?this.context.i18n.get("editorDeleteConfirmButton"):this.context.i18n.get("editorDeleteButton");return zt.createElement("li",null,zt.createElement("button",{type:"button",onClick:this.handleClick,onMouseLeave:this.handleMouseLeave,"data-authorapi-selector":"config-delete-btn",className:t,ref:function(t){e.btn=t}},n,zt.createElement("span",{className:"lrn-i-trash"})))}}])&&PI(t.prototype,n),r&&PI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);II(FI,"contextTypes",{i18n:jn().object});const YI=FI;const HI=function(e){return{type:GP,data:e}};function VI(e){return(VI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UI(e,t){return(UI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$I(e);if(t){var i=$I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zI(this,n)}}function zI(e,t){if(t&&("object"===VI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return GI(e)}function GI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $I(e){return($I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UI(e,t)}(o,e);var t,n,r,i=WI(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).boundOnKeyUp=t.onKeyUp.bind(GI(t)),t}return t=o,(n=[{key:"onKeyUp",value:function(e){[ML.enter,ML.space].includes(e.key)&&!this.props.isKeyboardMode&&(e.nativeEvent.stopImmediatePropagation(),this.props.createDragWidgetViaKeyboard(this.props.widgetReference))}},{key:"render",value:function(){var e="lrn-author-widget-drag-handle";return this.props.extraClasses&&(e+=" "+this.props.extraClasses),zt.createElement("li",{className:e,"data-authorapi-selector":"config-drag-handle"},zt.createElement("button",{onKeyUp:this.boundOnKeyUp},this.context.i18n.get("itemEditMoveButton"),zt.createElement("span",{className:"lrn-i-move"})))}}])&&qI(t.prototype,n),r&&qI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(KI,"contextTypes",{i18n:jn().object});const ZI=Ln((function(e){return{isKeyboardMode:e.ui.dropzones.isKeyboardMode}}),{createDragWidgetViaKeyboard:HI})(KI);function JI(e){return(JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ej(e,t){return(ej=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rj(e);if(t){var i=rj(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nj(this,n)}}function nj(e,t){if(t&&("object"===JI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function rj(e){return(rj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ij=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ej(e,t)}(o,e);var t,n,r,i=tj(o);function o(){return QI(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"findComponent",value:function(e){return this.props.children.type===e?this.props.children:a().find(this.props.children,(function(t){return!!t&&t.type===e}))}},{key:"render",value:function(){var e=["lrn-author-widget-sidebar"];return"edit"===this.props.flags.activeMode&&e.push("lrn-author-widget-sidebar-shown"),zt.createElement("div",{className:a().classNames(e)},zt.createElement("div",{"data-authorapi-selector":"widget-config-wrapper"},zt.createElement("ul",{role:"menu","data-authorapi-selector":"widget-config-menu"},this.findComponent(ZI),this.findComponent(CI),this.findComponent(YI))))}}])&&XI(t.prototype,n),r&&XI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const oj=Ln((function(e){return{flags:e.ui.flags}}))(ij);const aj=function(e){return{type:zP,data:e}};function sj(e){return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uj(e,t){return(uj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fj(e);if(t){var i=fj(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dj(this,n)}}function dj(e,t){if(t&&("object"===sj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fj(e){return(fj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pj="lrn-author-widget-draggable",hj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uj(e,t)}(o,e);var t,n,r,i=cj(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={minHeight:135},t}return t=o,(n=[{key:"updateImageToolPosition",value:function(){var e=this.context.activityManager,t=this.props.widgetNodeData,n=e.getImageToolHeight(t.reference),r=this.getElementOffset();n>this.state.minHeight&&this.setState({minHeight:n}),r.left+=20,e.setImageToolPosition(t.reference,r)}},{key:"componentDidMount",value:function(){this.updateImageToolPosition()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.widgetsReady&&!e.widgetsReady,r=!this.props.widgetsLoading&&e.widgetsLoading,i=this.props.isEditMode&&!e.isEditMode,o=!this.props.isEditMode&&e.isEditMode,s=!this.props.showItemSettings&&e.showItemSettings,l=!a().isEqual(this.props.definition,e.definition),u=this.props.widgetNodeData,c=this.context.activityManager,d=u.data.type===wL;s&&d&&a().defer((function(){t.updateImageToolPosition()})),(n||r||i||l)&&d&&(this.updateImageToolPosition(),this.props.isEditMode?c.sendImageToolToBack(u.reference):c.sendImageToolToFront(u.reference)),r&&this.props.isEditMode&&ge(this.domElement),o&&d&&c.sendImageToolToFront(u.reference),!d&&o&&this.setState({minHeight:0}),!d&&i&&this.setState({minHeight:135})}},{key:"editWidget",value:function(){this.props.updateState({mode:"widget",widgetReference:this.props.widgetNodeData.reference})}},{key:"deleteWidget",value:function(){this.props.deleteWidget(this.props.widgetNodeData.reference)}},{key:"getElementOffset",value:function(){var e=this.domElement.getBoundingClientRect();return{left:e.left+window.pageXOffset-document.documentElement.clientLeft,top:e.top+window.pageYOffset-document.documentElement.clientTop}}},{key:"getWidgetName",value:function(){var e=a().getNested(this.props,"widgetNodeData.metadata.name");if(!e){var t=a().getNested(this.props,"widgetNodeData.data.type"),n=a().getNested(this.props,"widgetNodeData.widget_type");e=this.context.app.component.dataManager.getSchemasUtil().getName(n,t)}return e}},{key:"render",value:function(){var e=this,t={minHeight:this.state.minHeight},n=["lrn-author-widget-wrapper","lrn-author-widget-loaded"],r=this.props.isEditMode?{display:"block"}:{},i=a().getNested(this.props,"widgetNodeData.reference"),o=a().getNested(this.props,"widgetNodeData.data.type")===wL?{}:{overflowX:"auto",overflowY:"hidden"};this.props.canDrag&&n.push(pj);var s=this.props.widgetConfig.delete&&!this.props.legacyContentMode;return zt.createElement("div",{className:a().classNames(n),style:t,ref:function(t){return e.domElement=t}},zt.createElement("span",{className:"lrn-widget-drag-name"},this.getWidgetName()),zt.createElement("div",{className:"lrn-widget-drag-wrapper"},zt.createElement("div",{className:"lrn-author-widget-wrapper-inner","data-authorapi-selector":"widget-wrapper",style:o},zt.createElement("span",{"data-authorapi-widget-reference":i})),zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},zt.createElement("div",{className:"lrn-author-widget-sidebar-wrapper","data-authorapi-selector":"widget-sidebar-wrapper"},zt.createElement("div",{"data-authorapi-selector":"widget-config-wrapper"},zt.createElement(oj,null,this.props.canDrag&&zt.createElement(ZI,{widgetReference:i}),this.props.widgetConfig.edit&&zt.createElement(CI,{onButtonClick:function(){return e.editWidget()}}),s&&zt.createElement(YI,{onDelete:function(){return e.deleteWidget()}}))))),zt.createElement("div",{style:r,className:"lrn-author-widget-mask"})))}}])&&lj(t.prototype,n),r&&lj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);hj.contextTypes={activityManager:jn().object,app:jn().object};const mj=Ln((function(e){var t=a().getNested(e,"itemState.flags.widgetsReady"),n=a().getNested(e,"itemState.flags.widgetsLoading");return{isEditMode:"edit"===Gh(e),widgetsReady:t,widgetsLoading:n,canDrag:Zh(e),definition:e.itemData.current.item.definition,widgetConfig:a().getNested(e,"initOptions.config.item_edit.widget"),legacyContentMode:$h(e),showItemSettings:e.showItemSettings}}),{updateState:IM,deleteWidget:aj})(hj);const gj=function(e){return{type:mM,data:e}};function yj(e){return(yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bj(e,t){return(bj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sj(e);if(t){var i=Sj(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wj(this,n)}}function wj(e,t){if(t&&("object"===yj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ej(e)}function Ej(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sj(e){return(Sj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bj(e,t)}(o,e);var t,n,r,i=_j(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).boundEnterDropzone=n.enterDropzone.bind(Ej(n)),n.dropzoneRef=zt.createRef(),n}return t=o,(n=[{key:"enterDropzone",value:function(e){var t=e?this.props.widgetNodeId:"";this.props.updateHoveredDropzone({type:Lh.TYPES.dropzone,id:t}),f()(".gu-mirror").toggleClass("lrn_drag_mirror_invisible",e)}},{key:"componentDidUpdate",value:function(e){this.props.isKeyboardMode&&!this.props.isMouseHover&&this.props.isHovered&&this.props.isHovered!==e.isHovered&&this.dropzoneRef.current&&this.dropzoneRef.current.scrollIntoView(!1)}},{key:"render",value:function(){var e=this,t=[],n=a().getNested(this.props.widget,"metadata.name");if(this.props.widget&&!n){var r=a().getNested(this.props,"widget.data.type"),i=a().getNested(this.props,"widget.widget_type");n=this.context.app.component.dataManager.getSchemasUtil().getName(i,r)}return t.push(this.props.showDropzone?"lrn-widget-dropzone":"lrn-author-ui-dropzone"),this.props.isHovered&&t.push("lrn-widget-dropzone-dragover"),zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},zt.createElement("div",{ref:this.dropzoneRef,className:a().classNames(t),onMouseEnter:function(){return e.boundEnterDropzone(!0)},onMouseLeave:function(){return e.boundEnterDropzone(!1)}},zt.createElement("span",{className:"lrn-i-dropzone"}),zt.createElement("span",{className:"lrn-widget-dropzone-name"},n)))}}])&&vj(t.prototype,n),r&&vj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);xj.contextTypes={app:jn().object};const kj=Ln((function(e,t){var n=(new Ih).build(e.itemData.current.item.definition,e.itemData.current.widgetInstances),r=t.widgetNodeData.ID,i=n.getAvailableDropzones(e.ui.dropzones.draggedRef);return{showDropzone:a().getNested(e.ui,"dropzones.showDropzones")&&a().contains(i,r),isHovered:a().getNested(e.ui,"dropzones.hoveredDropzone.type")===Lh.TYPES.dropzone&&a().getNested(e.ui,"dropzones.hoveredDropzone.id")===r,widget:n.findElementToRender(e.ui.dropzones.draggedRef),isKeyboardMode:e.ui.dropzones.isKeyboardMode,isMouseHover:e.ui.dropzones.isMouseHover,widgetNodeId:r}}),{updateHoveredDropzone:gj})(xj);var Tj=function(e,t){var n=function(e){switch(e){case"root":return XL;case"column":return UN;case"tabs":return XN;case"tabPane":return cI;case"tab":return _I;case"widget":return mj;case"dropzone":return kj;default:return}}(e);if(n)return zt.createElement(n,t)};const Oj={getWidgetsComponents:function(e){var t=e.getElementsToRender();return a().map(t,(function(e){var t={key:"widget_".concat(e.ID),widgetNodeData:e};return Tj(e.type,t)}))},getRegionComponent:Tj};const Cj=function(){return{type:KP}};var Aj,Pj,Mj=void 0,Dj={"col-xs-4":30,"col-xs-5":40,"col-xs-6":50,"col-xs-7":60,"col-xs-8":70},Rj=["table","img","hr"],Lj=function(e){var t=f()("<div></div>").append(e);return a().any(Rj,(function(e){if(t.find(e).length>0)return!0}),Mj)},Nj=function(e,t){var n,r,i=f()("<div></div>").append(e);if(0===i.text().length&&!Lj(e))return oB(e);var o=i.children().first();return o.hasClass("row")?o.children().each(a().bind((function(e,i){(r=f()(i)).find(".nav-tabs").length>0?(n=Ij(r,t),r.html(n)):(n=Fj(r,t),r.html(n))}),Mj)):i=f()("<div></div>").append(Fj(i,t)),oB(i.html())},Ij=function(e,t){for(var n=e.find(".tab"),r=0;r<n.length;r++){var i=Hj(f()(n[r]),t);f()(n[r]).html(Yj(i,t))}return e.html()},jj=function(e){var t=f()(f().parseHTML(e));Aj=!(!t.first().hasClass("row")||!t.first().hasClass("col-separator"))},Bj=function(e){var t;return/scrollablepassage/.test(e)?(Pj=!0,(t=f()("<div>"+e+"</div>")).find("[data-type=scrollablepassage]").each((function(){f()(this).replaceWith(f()(this).html())})),e=t.html()):Pj=!1,e},Fj=function(e,t){var n=Hj(e,t);return Yj(n,t).html()},Yj=function(e,t){var n,r,i,o=f()("<div></div>"),s=f()("<div></div>"),l=a().bind((function(){s.contents().length&&(r=a().uuid(),t.widgetInstances.push(qj(s.html(),r)),o.append(Uj(r)),s=f()("<div></div>"))}),Mj);for(i=0;i<e.length;i++)(n=e[i]).newSharedPassage?s.append(n.content):(l(),o.append(n.content));return l(),o},Hj=function e(t,n){var r,i=[];return a().isArray(n)?n.push(t.clone().empty()):n=[],t.contents().each(a().bind((function(t,o){return o.nodeType===Node.TEXT_NODE||f()(o).text().length>0&&!Gj(f()(o))||a().contains(Rj,o.tagName.toLowerCase())&&!Gj(f()(o))?(i.push({newSharedPassage:!0,content:Vj(n,o)}),!0):(r=f()(o),zj(r)?(i.push({newSharedPassage:!1,content:r}),!0):void(i=a().union(i,e(r,a().clone(n)))))}),Mj)),i},Vj=function(e,t){var n,r;if(!e.length)return t;for(n=e.length-1;n>=0;n--)r=r?e[n].clone().append(r):e[n].clone().append(t);return r},qj=function(e,t){return{data:{type:"sharedpassage",content:e},type:"sharedpassage",widget_type:"feature",reference:t}},Uj=function(e){return'<span class="learnosity-feature feature-'+e+'">'},Wj=function(e){var t,n=!1;return f()("<div></div>").append(e).find("*").each(a().bind((function(e,r){return t=f()(r),!(n=!(t.is("p")||t.is("hr")||t.is("img")||t.is("span")||$j(t)&&!Gj(t)||zj(t)||Kj(t)||t.is("div")&&(t.hasClass("row")||t.hasClass("tab-content")||t.hasClass("tab-pane")||t.hasClass("tab")||t.hasClass("tabs")||t[0].className.match(/col-xs-\d+/)||t.hasClass("lrn-author-region"))||(t.text().length>0||t.find("img").length>0)&&!$j(t)&&!Kj(t)))}),Mj)),n},zj=function(e){return e.is("span")&&(e.hasClass("learnosity-response")||e.hasClass("learnosity-feature"))},Gj=function(e){var t=e.html();return t.indexOf("learnosity-response")>-1||t.indexOf("learnosity-feature")>-1},$j=function(e){return a().any(["table","thead","tbody","tr","th","td"],(function(t){if(e.is(t))return!0}))},Kj=function(e){return!(!e.is("ul")||!e.hasClass("nav-tabs"))||(!!Zj(e)||!(!e.is("a")||!Zj(e.parent())))},Zj=function(e){var t;return!!(e.is("li")&&(t=e.parent()).is("ul")&&t.hasClass("nav-tabs"))},Jj=function(e,t){var n,r=f()(f().parseHTML(e)),i=[];return r.hasClass("row")?r.children().each(a().bind((function(e,r){n=f()(r),i.push(Qj(n,t))}),Mj)):(r=f()("<div></div>").append(r),i.push(Qj(r,t))),i},Qj=function(e,t){var n,r,i,o={type:"column"},s=Xj(e);if(a().isUndefined(s)||(o.width=s),eB(e))for(o.regions=[{type:"tabs",regions:[]}],n=e.find(".tab"),r=e.find("ul.nav-tabs li a"),i=0;i<n.length;i++)o.regions[0].regions[i]={},o.regions[0].regions[i].widgets=tB(n[i],t),o.regions[0].regions[i].type="tab",o.regions[0].regions[i].label=f()(r[i]).text();else o.widgets=tB(e,t);return o},Xj=function(e){var t,n=a().keys(Dj);return a().each(n,(function(n){e.hasClass(n)&&(t=Dj[n])}),Mj),t},eB=function(e){return e.find("ul.nav-tabs").length>0},tB=function(e,t){var n,r,i=[];return f()(e).find(".learnosity-response, .learnosity-feature").each(a().bind((function(e,o){((n=f()(o)).hasClass("learnosity-response")||n.hasClass("learnosity-feature"))&&(r=nB(n.attr("class"),t))&&i.push({reference:r})}),Mj)),i},nB=function(e,t){var n,r=!1;return a().each(t.widgetInstances,(function(t){if(n=t.reference,new RegExp(n+"$|"+n+" ").test(e))return r=n,!1})),r},rB=function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p>&nbsp;<\/p>|<br\/>|<br \/>|<\/br>|< \/br>/g,"")).replace(/>\s+</g,"><")).replace(/ contenteditable=\"[^\"]*\"/g,"")).replace(/ data-tab-target=\"[^\"]*\"/g,"")).replace(/ data-toggle=\"[^\"]*\"/g,"")).replace(/ data-tab-id=\"[^\"]*\"/g,"")).replace(/\r?\n|\r/g,"")).trim(),e=iB(e)},iB=function(e){var t=f()("<div></div>").append(f()(f().parseHTML(e))),n=t.find("ul.nav-tabs"),r=t.find(".tab-pane");return n.length&&f().each(n,(function(e,t){f()(t).parent().children().wrapAll('<div class="tabs"></div>')})),r.length&&f().each(r,(function(e,t){f()(t).children().length>0?f()(t).children().wrapAll('<div class="tab"></div>'):f()(t).append('<div class="tab"></div>')})),t.html()},oB=function(e){return e.replace(/<p>|<\/p>/g,"")},aB=function(e){var t=f()(f().parseHTML(e)),n=t.find("div[class^=col-xs-]"),r=!0;return sB(t)?(a().each(n,(function(e){lB(f()(e))||(r=!1)}),Mj),r):lB(t)},sB=function(e){return e.hasClass("row")},lB=function(e){return e.find("ul.nav-tabs li").length<=2},uB=function(e){var t=!1,n=new RegExp("^col-xs-("+[4,5,6,7,8,12].join("|")+")$"),r=e.match(/(col-xs-\d+)/g);return a().each(r,(function(e){e.match(n)||(t=!0)})),t},cB=function(e){var t=f()(f().parseHTML(e)),n=f()("<div></div>").append(t),r=n.find(".row").length,i=n.find("div[class^=col-xs-]").length,o=t.first().hasClass("row");return!(!r||!(r>1)&&o)||!(!i||o&&!(i>2))},dB=function(e){var t=f()(f().parseHTML(e)),n=f()("<div></div>").append(t),r=n.find(".row").length,i=n.find("div[class^=col-xs-]").length;return!r&&i?(n.addClass("row"),n.prop("outerHTML")):e},fB=function(e,t){var n=[],r=e.widgetInstances,i=(t.content.match(/data-type="scrollablepassage"/g)||[]).length;return(t.content.match(/learnosity-response|learnosity-feature/g)||[]).length-i!==r.length||(t.definition.regions?a().each(t.definition.regions,(function(e){a().isArray(e.regions)?a().each(e.regions[0].regions,(function(e){n=a().union(n,e.widgets)})):n=a().union(n,e.widgets)})):n=a().union(n,t.definition.widgets),n.length!==r.length||(a().each(n,(function(e){if(1!==a().where(r,{reference:e}).length)return!0})),!1))},pB=function(e,t,n){var r,i,o={};return a().isEmpty(t.metadata)||(i=a().clone(t.metadata,!0)),o={template:n,regions:e},Aj&&(o.vertical_divider=!0),Pj&&(o.scroll={enabled:!0}),o=hB(o,t),{content:(r=(0,Dh.jm)(o)).content,definition:r.definition,metadata:i}},hB=function(e,t){return(new Ih).build(e,t.widgetInstances).toJSON("migration")};const mB=function(e,t){var n,r=e.content,i=function(e){var t=function(e){return e.reference},n=function(e){return function(t){return t.widget_type===e}};return{questionRefs:e.filter(n("response")).map(t).join(),featureRefs:e.filter(n("feature")).map(t).join()}}(e.widgetInstances),o=function(t,n){return a().extend(i,{canMigrate:!1,errorMessage:"Cannot migrate item "+e.reference+". "+t+" Loading item in legacy content mode. This mode has very limited functionality. Adding widgets, rearranging widgets and editing Layout are all disabled",originalContent:r,migratedContent:n})},s=r;if(!e.widgetInstances.length&&0===f()(f().parseHTML(e.content)).text().length&&!Lj(e.content))return o("It contains no widgets and no free text which could be converted to a widget.",s);if(s=rB(s),s=Bj(s),s=dB(s),jj(s),uB(s))return o("It has columns with the wrong ratio.",s);if(cB(s))return o("It has incorrect rows.",s);if(Wj(s))return o("It contains disallowed nodes.",s);if(!aB(s))return o("It contains a disallowed number of tabs.",s);if(!(s=Nj(s,e)))return o("Free text could not be replaced with shared passages.",s);var l=Jj(s,e);try{n=pB(l,e,t)}catch(e){return o(e,s)}return fB(e,n)?o("Widgets could not be added to regions correctly.",n.content):{canMigrate:!0,data:n}};function gB(e,t){var n=mB({content:t.item.content,metadata:t.item.metadata,reference:t.item.reference,widgetInstances:t.widgetInstances});n.canMigrate?(t.item.content=n.data.content,t.item.definition=n.data.definition,t.item.metadata=n.data.metadata,t.item.features||(t.item.features=[]),function(e,t){t.filter((function(e){return"feature"===e.widget_type})).filter((function(t){return!a().find(e,(function(e){return e.reference===t.reference}))})).forEach((function(t){e.push({reference:t.reference,type:t.widget_type})}))}(t.item.features,t.widgetInstances)):e.handle({id:"item_migration_error_"+t.item.reference,method:"migrateContent",attribute:{itemReference:t.item.reference,originalContent:n.originalContent,migratedContent:n.migratedContent,questionRefs:n.questionRefs,featureRefs:n.featureRefs},message:n.errorMessage},!0,!1)}const yB=function(e,t){return function(n,r,i){var o=i.app,s=i.activityManager,l=o.component.dataManager;if(n({type:"QUESTIONS_API_INITIALISING"}),s.isQuestionsApiInitialised())return n({type:"QUESTIONS_API_INITIALISED"}),void(t&&n(t(e)));var u=[l.getSchemasUtil().fetchQuestionFeatureList()];if(e&&e.questionsApiSecurity){var c=a().getNested(e,"item.metadata.scoring_type");u.push(s.initQuestionsApi(e.questionsApiSecurity,c))}else u.push(l.getQuestionsActivity().then((function(e){return s.initQuestionsApi(e.data)})));S.all(u).then((function(){n({type:"QUESTIONS_API_INITIALISED"}),t&&n(t(e))}))}};const vB=function(e){return{type:XP,data:e}};var bB=function(e){return{type:JP,data:e}},_B=function(e,t,n,r){var i=a().cloneDeep(e),o=t.component.comms,s=wB(t),l=a().getNested(i,"item.item_id"),u=t.initOptionsModel.getItemWorkflow();return i.widgetInstances||(i.widgetInstances=[]),i.item?(EB(i)&&gB(t.errorUtil,i),i.item.tags&&!a().isJsonObject(i.item.tags)||(i.item.tags=[]),a().isEmpty(i.item.metadata)&&delete i.item.metadata,!l&&s&&(i.item.authoring_workflow={reference:u.reference,state:s},i.item.status="unpublished")):(i.itemReference=n,s&&(i.authoringWorkflow={reference:u.reference,state:s})),i.itemBankSettings=r,l&&u?o.request({url:"/itembank/items/workflow/comments",data:{item_id:parseInt(l),workflow_reference:u.reference}}).then((function(e){return i.workflowComments=e.data,i})):i},wB=function(e){var t=e.initOptionsModel.getItemWorkflow();return t?t.initial_state_reference:null},EB=function(e){return!a().isObject(e.item.definition)};const SB=function(e){return function(t,n,r){var i,o=r.app,s=o.component.comms,l=e.data&&e.data.reference,u=e.data&&e.data.itemBankSettings,c="boolean"==typeof e.dirty&&e.dirty;if(t(vB(c)),l)i=s.request(e);else{var d=a().cloneDeep(e.itemJson)||{};i=new S((function(e){a().defer((function(){e({data:d})}))}))}i.then((function(e){var t=e.data;return _B(t,o,l,u)})).then((function(e){t(yB(e,bB)),t(MM(!1)),e.item&&e.item.readOnly&&t(LR("preview"))})),t({type:QP})}};const xB=function(e){return function(t,n,r){var i=r.app,o=r.publicEvents,s=r.activityManager,l=n(),u=a().cloneDeep(l.itemData.current.item),c=l.itemData.original.item,d=a().cloneDeep(a().getNested(l,"itemData.current.widgetInstances")),f=d.map((function(e){return e.reference})),p=i.initOptionsModel,h="";h=e.itemReference?e.itemReference:u.reference!==c.reference?u.reference:p.getReferencePrefixForNewItem()+a().uuid(),delete u.readOnly;var m=SR(u,d,!0,e.duplicatePassages);delete m.item.activity_count,m.item.duplicated_item_id=m.item.item_id,delete m.item.item_id,m.item.reference=h,m.item.dt_created=$().utc().format(),e.confirmEvent&&o.trigger(sd.EVENTS.duplicateItemConfirm,MR(m));var g=o.trigger(sd.EVENTS.save,MR(m));if(s.remove(f),g.isDefaultPrevented())return t(Cj()),void t(SB({itemJson:{item:m.item,widgetInstances:d}}));u.duplicated_item_id=c.item_id,(a().getNested(l,"itemData.current.workflowComments")||[]).length>0&&(m.item.workflow_comments=[]),t(BR({duplicatedItemData:m,disablePublicEvent:!0}))}};const kB=function(){return{type:$P}};function TB(e){return(TB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AB(e,t){return(AB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=DB(e);if(t){var i=DB(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return MB(this,n)}}function MB(e,t){if(t&&("object"===TB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function DB(e){return(DB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var RB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AB(e,t)}(o,e);var t,n,r,i=PB(o);function o(){return OB(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"duplicateClickHandler",value:function(){this.widgetsContainSharedPassage()?this.props.duplicateItemConfirm():this.props.duplicateItem({duplicatePassages:!1})}},{key:"widgetsContainSharedPassage",value:function(){return void 0!==a().find(this.props.widgetInstances,(function(e){return"sharedpassage"===e.type}))}},{key:"render",value:function(){var e=this.context.i18n,t=this.props.isSaved;"widget"===this.props.mode&&(t=!1);var n=this.props.duplicate&&!1!==this.props.duplicate.show,r=!0===this.props.duplicate||void 0===this.props.duplicate||n,i=!this.props.allItemsReadOnly&&(this.props.isReadOnlyItem?this.props.duplicateReadOnly:!this.props.hideDuplicateButton&&r&&!this.props.legacyContentMode),o=0===this.props.widgetInstances.length||this.props.isSaving,a={isSaving:this.props.isSaving,isSaved:t,isEnabled:this.props.isSaveable};return zt.createElement(Im,{duplicateButtonText:e.get("duplicateButton"),duplicateEnabled:i,duplicateDropdownDisabled:o,save:this.props.onClickHandler,duplicate:this.duplicateClickHandler.bind(this),buttonStates:a})}}])&&CB(t.prototype,n),r&&CB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);RB.contextTypes={i18n:jn().object,app:jn().object};const LB=Ln((function(e){return{duplicate:a().getNested(e.initOptions,"config.item_edit.item.duplicate"),legacyContentMode:$h(e),isSaved:e.itemState.flags.isSaved,isSaving:e.itemState.flags.isSaving,isSaveable:em(e),mode:e.mode.current,widgetInstances:e.itemData.current.widgetInstances,allItemsReadOnly:e.ui.flags.allItemsReadOnly,duplicateReadOnly:a().getNested(e.initOptions,"config.global.items.read_only.filter.duplicate"),isReadOnlyItem:e.itemData.current.item.readOnly}}),{duplicateItem:xB,duplicateItemConfirm:kB})(RB);function NB(e){return(NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jB(e,t){return(jB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=YB(e);if(t){var i=YB(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return FB(this,n)}}function FB(e,t){if(t&&("object"===NB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function YB(e){return(YB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jB(e,t)}(o,e);var t,n,r,i=BB(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"_onClick",value:function(){this.props.onClickHandler()}},{key:"render",value:function(){return zt.createElement("button",{type:"button",className:a().classNames(["lrn-btn","lrn-btn-default","lrn-btn-icon-left"]),"data-authorapi-selector":"back",onClick:this._onClick.bind(this),disabled:this.props.isDisabled},zt.createElement("span",{className:"lrn-i-previous"}),this.context.i18n.get("backButton"))}}])&&IB(t.prototype,n),r&&IB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(HB,"defaultProps",{onClickHandler:a().noop,isDisabled:!1}),HB.contextTypes={i18n:jn().object};const VB=HB;function qB(e){return(qB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WB(e,t){return(WB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KB(e);if(t){var i=KB(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GB(this,n)}}function GB(e,t){if(t&&("object"===qB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $B(e)}function $B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KB(e){return(KB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WB(e,t)}(o,e);var t,n,r,i=zB(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ZB($B(t=i.call(this,e)),"_clickBack",(function(){t.props.backClickHandler()})),ZB($B(t),"_saveItem",(function(){t.props.saveClickHandler()})),t}return t=o,(n=[{key:"_renderSaveButton",value:function(){var e=this;return this.props.hideSaveButton?null:zt.createElement("div",{className:"lrn-author-item-nav-right"},zt.createElement(LB,{onClickHandler:function(){return e._saveItem()},hideDuplicateButton:this.props.hideDuplicateButton}))}},{key:"render",value:function(){var e=!this.props.hideBackButton,t=a().classNames("lrn-author-item-nav","lrn-author-ui-no-preview",{"lrn-author-margin-bottom":this.props.applyMarginBottom});return zt.createElement("div",{className:t,"data-authorapi-selector":"nav-bar"},e&&zt.createElement("div",{className:"lrn-author-item-nav-left"},zt.createElement(VB,{onClickHandler:this._clickBack,isDisabled:this.props.isSaving})),this._renderSaveButton())}}])&&UB(t.prototype,n),r&&UB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const QB=Ln((function(e){return{isSaving:e.itemState.flags.isSaving}}),{})(JB);const XB=function(e){return{type:dM,data:e}};function eF(e){return(eF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rF(e,t){return(rF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aF(e);if(t){var i=aF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oF(this,n)}}function oF(e,t){if(t&&("object"===eF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aF(e){return(aF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sF=["lrn-author-toggle-part","lrn-author-toggle-left"],lF=["lrn-author-toggle-part","lrn-author-toggle-right"],uF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rF(e,t)}(o,e);var t,n,r,i=iF(o);function o(){return tF(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleClick",value:function(){var e="edit"===this.props.mode?"preview":"edit";this.props.changeView(e)}},{key:"_getClass",value:function(e){return this.props.mode===e?"lrn-author-toggle-active":""}},{key:"render",value:function(){var e=this.context.i18n,t=a().classNames(sF,this._getClass("edit")),n=a().classNames(lF,this._getClass("preview"));return zt.createElement("div",null,this.props.show&&zt.createElement("div",{className:"lrn-author-toolbar-toggle","data-authorapi-selector":"mode-toggle"},zt.createElement("label",{htmlFor:"lrn-author-activity-mode"},zt.createElement("span",{className:"lrn-sr-only"},e.get("editorEditMode")),zt.createElement("button",{className:t,"data-lrn-author-toggle":"edit",onClick:this.handleClick.bind(this)},e.get("editorToggleEdit")),zt.createElement("button",{className:n,"data-lrn-author-toggle":"preview",onClick:this.handleClick.bind(this)},e.get("editorTogglePreview")))))}}])&&nF(t.prototype,n),r&&nF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);uF.contextTypes={activityManager:jn().object,i18n:jn().object};const cF=Ln((function(e){return{mode:e.ui.flags.activeMode,show:e.initOptions.config.item_edit.item.mode.show}}),{changeView:XB})(uF);function dF(e){return(dF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pF(e,t){return(pF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gF(e);if(t){var i=gF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mF(this,n)}}function mF(e,t){if(t&&("object"===dF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gF(e){return(gF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yF=["lrn-author-item-toolbar-controls","lrn-author-item-toolbar-controls-alt"],vF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pF(e,t)}(o,e);var t,n,r,i=hF(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={reference:t.props.reference},t}return t=o,(n=[{key:"onChange",value:function(e){var t=e.target.value;this.setState({reference:t})}},{key:"getChildElementsToDisplay",value:function(e){var t=this;return e&&e.filter((function(e){return a().isUndefined(e.props.viewMode)||e.props.viewMode===t.props.flags.activeMode}))}},{key:"wrapChildElements",value:function(e){var t=this.getChildElementsToDisplay(e);return t&&t.map((function(e,t){return zt.createElement("li",{key:"title_bar_menu_".concat(t)},e)}))}},{key:"render",value:function(){return zt.createElement("ul",{className:yF.join(" ")},this.wrapChildElements(this.props.additionalComponents),this.wrapChildElements(zt.Children.toArray(this.props.children)))}}])&&fF(t.prototype,n),r&&fF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const bF=Ln((function(e){return{flags:e.ui.flags}}))(vF);function _F(e){return(_F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EF(e,t){return(EF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kF(e);if(t){var i=kF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xF(this,n)}}function xF(e,t){if(t&&("object"===_F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function kF(e){return(kF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EF(e,t)}(o,e);var t,n,r,i=SF(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,e,t),a().getNested(e,"initOptions.config.item_edit.item.title.show")?n.inputType="title":a().getNested(e,"initOptions.config.item_edit.item.reference.show")?n.inputType="reference":n.inputType="",n}return t=o,(n=[{key:"onChange",value:function(e){"title"===this.inputType?this.props.titleChange(e):this.props.referenceChange(e)}},{key:"renderInput",value:function(){var e=this,t=a().getNested(this.props.initOptions,"config.item_edit.item.".concat(this.inputType,".edit")),n=("title"===this.inputType?this.props.title:this.props.reference)||"",r="item-"+this.inputType,i="item-".concat(this.inputType,"-edit-icon");return zt.createElement(Xv,{dataAuthorApiSelector:r,editIconAuthorApiSelector:i,onChange:function(t){return e.onChange(t.target.value)},onBlur:function(t){return e.onChange(t.target.value.trim())},value:n,disabled:"edit"!==this.props.mode,editable:t,placeholder:"edit"===this.props.mode?this.context.i18n.get("titlePlaceholderText"):void 0,maxLength:150})}},{key:"render",value:function(){var e=this.context.i18n,t=this.props.initOptions,n=a().getNested(t,"config.item_edit.item.status")&&"edit"===this.props.mode,r=this.context.i18n.getStatusLabel(this.props.status),i="lrn-badge-round lrn-badge-round-".concat(this.props.status);return zt.createElement("div",{className:"lrn-author-item-toolbar"},zt.createElement("div",{className:"lrn-author-item-toolbar-left lrn-ellipses"},zt.createElement("ul",{className:"lrn-author-item-toolbar-controls lrn-author-name-controls"},n&&zt.createElement("li",{"data-authorapi-selector":"status-icon"},zt.createElement("span",{className:i,"aria-label":this.props.status,"data-authorapi-selector":"tooltipped",title:r},zt.createElement("span",{className:"lrn-i-".concat(this.props.status)}))),zt.createElement("li",{"data-authorapi-selector":"reference-display"},zt.createElement("div",{className:"lrn-author-name-edit"},zt.createElement("span",{className:"lrn-author-name-label lrn-col-sm-none"},this.inputType&&e.get("".concat(this.inputType,"Label"))),this.inputType&&this.renderInput())))),zt.createElement("div",{className:"lrn-author-item-toolbar-right"},zt.createElement(bF,{additionalComponents:this.props.additionalComponents},this.props.showEditPreviewToggle&&!this.props.isReadOnlyItem&&!this.props.allItemsReadOnly&&zt.createElement(cF,null))))}}])&&wF(t.prototype,n),r&&wF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);TF.contextTypes={i18n:jn().object};const OF=Ln((function(e){return{mode:e.ui.flags.activeMode,initOptions:e.initOptions,reference:e.itemData.current.item.reference,status:e.itemData.current.item.status,title:e.itemData.current.item.title,showEditPreviewToggle:e.initOptions.config.item_edit.item.mode.show,isReadOnlyItem:e.itemData.current.item.readOnly,allItemsReadOnly:e.ui.flags.allItemsReadOnly}}))(TF);function CF(e){return(CF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MF(e,t){return(MF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LF(e);if(t){var i=LF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return RF(this,n)}}function RF(e,t){if(t&&("object"===CF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function LF(e){return(LF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NF="lrn-author-live-score",IF="lrn-author-title-menu-element",jF="lrn-author-live-score-full",BF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MF(e,t)}(o,e);var t,n,r,i=DF(o);function o(){return AF(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=[NF,IF];return this.props.score===this.props.maxScore&&this.props.maxScore>0&&e.push(jF),this.props.hasValidation&&zt.createElement("div",{className:a().classNames(e),"data-authorapi-selector":"live-score"},this.props.score," / ",this.props.maxScore)}}])&&PF(t.prototype,n),r&&PF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const FF=Ln((function(e){return{score:e.scoreData.score,maxScore:e.scoreData.maxScore,hasValidation:e.scoreData.hasValidation}}))(BF);const YF=function(e){return{type:sM,data:e}};function HF(e){return(HF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UF(e,t){return(UF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=GF(e);if(t){var i=GF(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zF(this,n)}}function zF(e,t){if(t&&("object"===HF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function GF(e){return(GF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $F=["lrn-author-validate-questions-toggle","lrn-author-title-menu-element"],KF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UF(e,t)}(o,e);var t,n,r,i=WF(o);function o(){return VF(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"handleClick",value:function(){var e=!this.props.showCorrectAnswers;this.props.createShowCorrectAnswers(e),e||this.props.createLoadWidgets()}},{key:"render",value:function(){var e=this,t=a().classNames($F,this.props.showCorrectAnswers?"checked":"");return this.props.shouldShowButton&&zt.createElement("button",{className:t,"data-authorapi-selector":"validate-questions-toggle",type:"button",onClick:function(){return e.handleClick()}},zt.createElement("span",null,this.context.i18n.get("editorShowAnswers")))}}])&&qF(t.prototype,n),r&&qF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(KF,"contextTypes",{i18n:jn().object});const ZF=Ln((function(e){return{shouldShowButton:e.scoreData.hasValidation,showCorrectAnswers:nm(e)}}),{createLoadWidgets:VR,createShowCorrectAnswers:YF})(KF);function JF(e){return(JF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XF(e,t){return(XF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nY(e);if(t){var i=nY(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tY(this,n)}}function tY(e,t){if(t&&("object"===JF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nY(e){return(nY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rY="lrn-author-region-sidebar-open",iY="lrn-author-region-hide-overflow",oY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XF(e,t)}(o,e);var t,n,r,i=eY(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={contentReady:!1},n}return t=o,(n=[{key:"componentDidMount",value:function(){try{this.itemContentEl.innerHTML=this.mutateContent(this.props.content),this.setState({contentReady:!0}),this.props.loadWidgets()}catch(e){console.error(e)}}},{key:"mutateContent",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html");if(t.getElementsByTagName("parsererror").length>0)throw new Error("Item Content contains invalid HTML.");var n=t.querySelectorAll(".learnosity-response, .learnosity-feature");return a().each(n,(function(e){var t;if(a().each(e.classList,(function(e){0===e.indexOf("question-")&&(t=e.replace("question-","")),0===e.indexOf("feature-")&&(t=e.replace("feature-",""))})),t){var n=document.createElement("div");n.setAttribute("data-authorapi-region-widget-reference",t),e.parentNode.replaceChild(n,e)}})),a().getNested(t,"body.innerHTML")}},{key:"render",value:function(){var e=this,t=[];this.state.contentReady&&(t=a().map(this.props.widgetInstances,(function(t){var n=e.itemContentEl.querySelector('[data-authorapi-region-widget-reference="'.concat(t.reference,'"]'));return zt.createElement(ka,{container:n,key:t.reference},zt.createElement(mj,{widgetNodeData:t}))})));var n=["lrn-author-item-content-wrapper","lrn-author-item-toolbar-shown"];return"edit"===this.props.activeMode&&(n.push(rY),n.push(iY)),zt.createElement("div",null,zt.createElement("div",{className:a().classNames(n)},zt.createElement("div",{className:"lrn-author-item-content","data-authorapi-selector":"item-content",ref:function(t){return e.itemContentEl=t}}),zt.createElement("div",null,t)))}}])&&QF(t.prototype,n),r&&QF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const aY=Ln((function(e){return{content:e.itemData.current.item.content,widgetInstances:e.itemData.current.widgetInstances,activeMode:e.ui.flags.activeMode}}),{loadWidgets:VR})(oY);function sY(e){return(sY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cY(e,t){return(cY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pY(e);if(t){var i=pY(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fY(this,n)}}function fY(e,t){if(t&&("object"===sY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pY(e){return(pY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const hY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cY(e,t)}(o,e);var t,n,r,i=dY(o);function o(){return lY(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"onExit",value:function(){return null}},{key:"renderContent",value:function(){return null}},{key:"getTitle",value:function(){return null}},{key:"renderSubTitle",value:function(e){return zt.createElement("div",{className:"lrn-author-message-overlay-sub-title"},e)}},{key:"renderMessage",value:function(e,t){var n="lrn-author-message-overlay-message";return t&&(n+=" "+t),zt.createElement("div",{className:n},zt.createElement("span",null,e))}},{key:"renderCheckBox",value:function(e,t,n,r,i){return zt.createElement("div",{className:"lrn-author-message-overlay-checkbox-wrapper"},zt.createElement(Bl,{selector:e,value:t,onChange:n,checked:r,disabled:i}))}},{key:"renderButton",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.context.i18n,i="lrn-btn-default";return n&&(i="lrn-btn-primary"),zt.createElement(Ar,{onClick:e,text:r.get(t),size:"large",extraClasses:i,dataAuthorApiSelector:"message-overlay-button"})}},{key:"render",value:function(){var e=this;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},zt.createElement("section",{className:"lrn-author-message-overlay"},zt.createElement("div",{className:"lrn-author-message-overlay-header"},zt.createElement("div",{className:"lrn-author-message-overlay-title"},this.getTitle()),zt.createElement(cs,{className:"lrn-author-message-overlay-close-btn",onClick:function(){return e.onExit()},authorApiSelector:"message-overlay-exit-button"})),this.renderContent())))}}])&&uY(t.prototype,n),r&&uY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function mY(e){return(mY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yY(e,t){return(yY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_Y(e);if(t){var i=_Y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bY(this,n)}}function bY(e,t){if(t&&("object"===mY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _Y(e){return(_Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yY(e,t)}(o,e);var t,n,r,i=vY(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={duplicatePassages:!1},t}return t=o,(n=[{key:"renderDuplicateMessage",value:function(){var e=this.context.i18n;return a().isObject(this.props.duplicate)&&this.props.duplicate.duplicate_shared_passages?zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(e.get("confirmItemDuplicatePassagesTitle")),this.renderMessage(e.get("confirmItemDuplicateOptionMessage")),this.renderCheckBox("confirmItemDuplicateSharedPassages",e.get("confirmItemDuplicateSharedPassages"),this.toggleDuplicatePassagesOption.bind(this),this.state.duplicatePassages)):zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(e.get("confirmItemDuplicatePassagesTitle")),this.renderMessage(e.get("confirmItemDuplicateWarningMessage")))}},{key:"toggleDuplicatePassagesOption",value:function(){this.setState((function(e){return{duplicatePassages:!e.duplicatePassages}}))}},{key:"confirmItemDuplication",value:function(){this.props.duplicateItem({duplicatePassages:this.state.duplicatePassages,confirmEvent:!0})}},{key:"onExit",value:function(){this.props.duplicateItemExit()}},{key:"renderContent",value:function(){return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-message-overlay-item-duplicate-img"}),this.renderDuplicateMessage(),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"confirmItemDuplicateCancelButton",!1),this.renderButton(a().bind(this.confirmItemDuplication,this),"confirmItemDuplicateOkButton")))}},{key:"getTitle",value:function(){return this.context.i18n.get("confirmItemDuplicateTitle")}}])&&gY(t.prototype,n),r&&gY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(hY);wY.contextTypes={i18n:jn().object};const EY=function(e){return Ln((function(e){return{duplicate:a().getNested(e.initOptions,"config.item_edit.item.duplicate"),itemJson:a().getNested(e,"itemData.current.item"),widgetInstances:a().getNested(e,"itemData.current.widgetInstances")}}),{duplicateItem:xB,duplicateItemExit:Cj})(e)}(wY);function SY(e){return(SY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TY(e,t){return(TY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=AY(e);if(t){var i=AY(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return CY(this,n)}}function CY(e,t){if(t&&("object"===SY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function AY(e){return(AY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var PY=["lrn-author-title-menu-element","lrn-author-toolbar-button","lrn-author-btn-outline","lrn-btn-icon-left","lrn-btn-responsive","lrn-btn-i-xs","lrn-btn"],MY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TY(e,t)}(o,e);var t,n,r,i=OY(o);function o(){return xY(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"_onClick",value:function(){this.props.updateState({showItemSettings:!0})}},{key:"getButton",value:function(e,t){var n=this.context.i18n,r=a().classNames.apply(a(),PY),i=this.props.isDisabled,o=n.get("settings");return zt.createElement("button",{type:"button",className:r,onClick:this._onClick.bind(this),"data-authorapi-selector":"settings",disabled:i,"data-authorapi-tooltip":t?o:void 0},zt.createElement("span",{className:"lrn-i-cog lrn-i-size-xs"}),e&&zt.createElement("span",null,o))}},{key:"render",value:function(){return zt.createElement("div",null,zt.createElement("div",{className:"lrn-col-xs-none"},this.getButton(!0,!1)),zt.createElement("div",{className:"lrn-col-xs-only"},this.getButton(!1,!0)))}}])&&kY(t.prototype,n),r&&kY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);MY.contextTypes={i18n:jn().object};const DY=Ln(null,{updateState:IM})(MY);function RY(e){return(RY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IY(e,t){return(IY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=FY(e);if(t){var i=FY(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BY(this,n)}}function BY(e,t){if(t&&("object"===RY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function FY(e){return(FY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YY=["lrn-author-btn-outline","lrn-btn-responsive","lrn-btn-i-xs","lrn-btn","lrn-eq-height"],HY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IY(e,t)}(o,e);var t,n,r,i=jY(o);function o(){return LY(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"_onClick",value:function(){this.props.updateState({showWorkflowSettings:!0}),this.buttonEl&&this.buttonEl.blur()}},{key:"getButton",value:function(e,t,n){var r=this,i=this.context.i18n,o=a().classNames.apply(a(),YY),s=this.props.isDisabled,l=i.get("workflowState")+": "+this.props.value;return zt.createElement("button",{type:"button",className:o,onClick:this._onClick.bind(this),disabled:s,"data-authorapi-selector":"workflow","data-authorapi-tooltip":n?l:void 0,ref:function(e){return r.buttonEl=e}},t&&zt.createElement("span",{className:"lrn-i-workflow lrn-i-size-xs lrn-text-divider"}),e&&zt.createElement("span",{className:"lrn-col-xs-none lrn-text-no-wrap lrn-text-divider lrn-ellipses",style:{maxWidth:"125px"}},l),zt.createElement("span",{className:"lrn-i-comment lrn-i-size-xs"}))}},{key:"render",value:function(){return zt.createElement("div",null,zt.createElement("div",{className:"lrn-col-xs-none"},this.getButton(!0,!1,!1)),zt.createElement("div",{className:"lrn-col-xs-only"},this.getButton(!1,!0,!0)))}}])&&NY(t.prototype,n),r&&NY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);HY.contextTypes={i18n:jn().object};const VY=Ln(null,{updateState:IM})(HY);function qY(e){return(qY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zY(e,t){return(zY=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KY(e);if(t){var i=KY(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $Y(this,n)}}function $Y(e,t){if(t&&("object"===qY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function KY(e){return(KY=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ZY=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zY(e,t)}(o,e);var t,n,r,i=GY(o);function o(){return UY(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return zt.createElement("div",{className:a().classNames("lrn-author-message lrn-author-message-success",this.props.extraWrapperClasses),onClick:this.props.onClick,"data-authorapi-selector":"success-message"},zt.createElement("span",{className:"lrn-i-tick"}),zt.createElement("span",null,this.props.text))}}])&&WY(t.prototype,n),r&&WY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component),JY=c.View.extend({SELECTORS:{openQuestion:'[data-authorapi-selector="open-question"]',selectQuestion:'[data-authorapi-selector="select-question"]',utcTime:'[data-authorapi-selector="utc-time"]',dateType:'[data-authorapi-datetime-type="livestamp"]'},STYLES:{activeQuestion:"lrn-list-view-question-active",modifiedTooltipVisible:"lrn-tooltip-visible"},events:function(){return[["click",this.SELECTORS.openQuestion,"openQuestion"],["click",this.SELECTORS.selectQuestion,"selectQuestion"]]},template:"questionList/question",MAX_TEXT_NUMBER:{HEADING:2,CONTENT:3},passMessages:{closeModal:".",openModal:".",renderModal:"."},initialize:function(e){c.Courier.add(this),""!==this.i18n.get("dateTimeLocale")&&$().locale(this.i18n.get("dateTimeLocale")),this.alreadyAdded=e.alreadyAdded},afterRender:function(){this.$(this.SELECTORS.utcTime).each(a().bind(this.formatTime,this))},serialize:function(){var e=this.model.toJSON(),t=f()("<div></div>").append(e.data.heading).text(),n="";return!0===e.data.paginated_content?a().isArray(e.data.pages)&&(n=e.data.pages.join(" ")):e.data.content&&(n=e.data.content),(n=f()("<div></div>").append(n).text())&&(n=n.replace(Y,"")),{heading:t,content:n,alreadyAdded:this.alreadyAdded}},applyLivestamp:function(e,t,n){-t.diff($().utc(),"hours")<=24?e.livestamp(e.attr("datetime")):e.text(t.format(n))},formatTime:function(e,t){var n=f()(t),r=n.attr("datetime"),i=$().utc(r,H).local(),o=this.i18n.get("toolTipDateFormat");n.attr("datetime",i.format(H)),n.data("authorapi-selector","local-time"),"livestamp"===n.data("authorapi-datetime-type")&&this.applyLivestamp(n,i,o)},openQuestion:function(){this.spawn("openQuestion",{model:this.model,alreadyAdded:this.alreadyAdded})},selectQuestion:function(){this.spawn("selectQuestion",this.model)}}),QY=c.Layout.extend({SELECTORS:{questionList:'[data-authorapi-view="question-list"]',questionsSearchForm:'[data-authorapi-selector="question-search-form"]'},STYLES:{listOverlay:"lrn-list-view-overlay",listLoading:"lrn-list-view-loading",listInitialLoad:"lrn-list-view-initial-load"},template:"questionList/questions",events:{submit:"search"},passMessages:{closeModal:".",openModal:".",renderModal:".",openQuestion:".",searchQuestions:".",selectQuestion:"."},initialize:function(e){c.Courier.add(this),this.questions=[],this.questionViews=[],this.firstLoad=!0,this.widgetsOnItem=e.widgetsOnItem},afterRender:function(){this.firstLoad&&this.$el.addClass(this.STYLES.listInitialLoad)},addQuestionView:function(e){var t=a().contains(this.widgetsOnItem,e.get("reference")),n=new JY({el:!1,model:e,alreadyAdded:t,i18n:this.i18n});this.questionViews.push(n),this.insertView(this.SELECTORS.questionList,n)},cleanup:function(){c.Layout.cleanViews(this.questionViews),this.questionViews=[],this.tooltipUtil&&this.tooltipUtil.cleanup()},renderQuestions:function(e){return this.questions=e,this.firstLoad&&(this.$el.removeClass(this.STYLES.listInitialLoad),delete this.firstLoad),this.$el.removeClass(this.STYLES.listLoading),this.hideOverlay(),this.cleanup(),a().each(this.questions,this.addQuestionView,this),this.render(),this.tooltipUtil=new z({el:this.el}),this},serialize:function(){return{hasQuestions:!!this.questions.length,hasCustomEmptyStateImage:!!this.i18n.get("itemListEmptyStateImageURL")}},showLoader:function(){return this.$el.addClass(this.STYLES.listLoading),this.showOverlay(),this},showOverlay:function(){this.$(this.SELECTORS.questionList).addClass(this.STYLES.listOverlay)},hideOverlay:function(){this.$(this.SELECTORS.questionList).removeClass(this.STYLES.listOverlay)}}),XY=c.View.extend({SELECTORS:{selectBtn:'[data-authorapi-selector="question-preview-select"]'},EVENTS:{addWidgetFromPreview:"addWidgetFromPreview"},events:function(){return[["click",this.SELECTORS.selectBtn,"handleSelect"]]},EVENT_NAMESPACE:a().uniqueId(".lrn-author-modal"),template:"questionList/questionModal",initialize:function(e){c.Courier.add(this),this.modalTitle=this.i18n.get("questionPreviewHeading"),this.alreadyAdded=e.alreadyAdded,this.metricsUtil=e.metricsUtil,this.featureReference=a().uuid()},afterRender:function(){this.initQuestionsApi()},handleSelect:function(){this.trigger(this.EVENTS.addWidgetFromPreview,this.model)},serialize:function(){return{featureClass:"learnosity-feature feature-"+this.featureReference,alreadyAdded:this.alreadyAdded}},initQuestionsApi:function(){if(this.questionsApp)this.questionsApp.append(this.buildQuestionsOptions(this.model));else{var e=a().merge(this.options.config.questions_api.init_options,this.buildQuestionsOptions(this.model)),t={readyListener:a().bind(this.questionsAppReadyListener,this),metricsContext:this.metricsUtil.getContext()};this.responses&&(e.responses=this.responses,e.state="resume"),this.removed||(this.questionsApp=window.LearnosityApp.init(e,t))}},cleanup:function(){this.removed=!0},buildQuestionsOptions:function(e){var t=a().extend({feature_id:this.featureReference},e.get("data"));return a().extend({},this.questionsApiSecurity,{features:[t]})}});function eH(e){return(eH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rH(e,t){return(rH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aH(e);if(t){var i=aH(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oH(this,n)}}function oH(e,t){if(t&&("object"===eH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aH(e){return(aH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rH(e,t)}(o,e);var t,n,r,i=iH(o);function o(){return tH(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"USES_LEGACY_PAGINATE",get:function(){return!0}}])&&nH(t.prototype,n),r&&nH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(De);const lH=c.View.extend({SELECTORS:{contentInput:'[data-authorapi-selector="question-search-input"]'},events:{submit:"search",'keyup [data-authorapi-selector="question-search-input"]':"onContentSearchChange"},template:"questionList/search",initialize:function(e){e.contentSearch&&(this.initialValue=e.contentSearch),c.Courier.add(this),this.tagSearchViews=[]},serialize:function(){return{search:!0}},afterRender:function(){this.$fields=this.$(this.SELECTORS.contentInput),this.initialValue&&this.$fields.val(this.initialValue)},onContentSearchChange:function(e){this.spawn("updateContentSearch",e.currentTarget.value)},search:function(e){e.preventDefault(),this.spawn("searchQuestions")},updateSearchInput:function(e){this.$fields.val(e)}}),uH=c.View.extend({SELECTORS:{questions:'[data-authorapi-view="questions"]',backBtn:'[data-authorapi-selector="back"]'},template:"questionList/questionList",onMessages:{getNext:"getNext",getPrevious:"getPrevious",openQuestion:"openQuestion",searchQuestions:"navigateToSearchQuery",selectQuestion:"selectQuestion",updateContentSearch:"updateContentSearch"},passMessages:{closeModal:".",renderModal:".",startLoadingRequest:".",completeLoadingRequest:"."},events:function(){return[["click",this.SELECTORS.backBtn,"backToItemView"]]},initialize:function(e,t,n,r){c.Courier.add(this),this.dataManager=t,this.questionCollection=t.getQuestionCollection(),this.contentSearch=e.contentSearch,this.itemReference=e.itemReference,this.widgetsOnItem=e.widgetsOnItem,this.metricsUtil=r},afterRender:function(){this.renderReason=uh.INITIAL_RENDER;var e=[Ld.loadLearnosityApi("questions")];this.spawn("startLoadingRequest","renderQuestionList"),e.push(this.dataManager.getQuestionsActivity());var t=this.questionCollection.fetchInitial({contentSearch:this.contentSearch});e.push(t),S.all(e).then(a().bind((function(e){3===e.length&&(this.renderSearch(),this.questionsApiSecurity=e[1].data,this.renderQuestions(e[2]),this.spawn("completeLoadingRequest","renderQuestionList"),this.spawn("scrollIntoView"))}),this))},serialize:function(){var e=this.config.back;return{showBackButton:e,showNavbar:e,search:!0}},beforeRender:function(){this.questionsView=new QY({config:this.options.config,el:!1,widgetsOnItem:this.widgetsOnItem,i18n:this.i18n}),this.insertView(this.SELECTORS.questions,this.questionsView.showLoader())},getNext:function(){var e=this.questionCollection.getNextPageMetadata();e.isCached||(this.spawn("startLoadingRequest","getNextPage"),this.questionsView.showLoader()),a()(this.questionsPaginationViews).invoke("showNextLoader",e),this.searchingQuestions=!0,this.questionCollection.fetchNext().then(a().bind((function(e){this.renderQuestions(e),this.spawn("completeLoadingRequest","getNextPage")}),this))},getPrevious:function(){var e=this.questionCollection.getPreviousPageMetadata();e.isCached||(this.spawn("startLoadingRequest","getPreviousPage"),this.questionsView.showLoader()),a()(this.questionsPaginationViews).invoke("showPreviousLoader",e),this.searchingQuestions=!0,this.questionCollection.fetchPrevious().then(a().bind((function(e){this.renderQuestions(e),this.spawn("completeLoadingRequest","getPreviousPage")}),this))},renderQuestions:function(e){var t=this.questionCollection.currentPage,n=new sd(sd.EVENTS.renderQuestionList);delete this.searchingQuestions,t!==this.lastPageRendered&&(this.questionsView.renderQuestions(e),this.renderPagination(),this.lastPageRendered=t),this.spawn("publicEvent",n),this.handleA11yMessage()},handleA11yMessage:function(){this.renderReason||this.dispatch(lh(this.i18n.get("ariaLiveSearchResultsUpdated"))),delete this.renderReason},renderSearch:function(){this.questionSearchViews=[this.createSearchView('[data-authorapi-view="questions-search-1"]'),this.createSearchView('[data-authorapi-view="questions-search-2"]')]},createSearchView:function(e){var t=new lH({contentSearch:this.contentSearch,i18n:this.i18n});return this.insertView(e,t),t.render(),t},updateContentSearch:function(e){a().isString(e)&&!a().isEmpty(e)||(e=""),e!==this.contentSearch&&(this.contentSearch=e,a()(this.questionSearchViews).invoke("updateSearchInput",e))},createPagination:function(e,t){var n=new sH({i18n:this.i18n,pageMetadata:t});return this.insertView(e,n),n},removePagination:function(){a()(this.questionsPaginationViews).invoke("remove"),this.questionsPaginationViews=null},renderPagination:function(){var e=this.questionCollection.getPageMetadata();this.questionsPaginationViews?a()(this.questionsPaginationViews).invoke("setPageMetadata",e):this.questionsPaginationViews=[this.createPagination('[data-authorapi-view="pagination-1"]',e),this.createPagination('[data-authorapi-view="pagination-2"]',e),this.createPagination('[data-authorapi-view="pagination-3"]',e)],a()(this.questionsPaginationViews).invoke("render")},navigateToSearchQuery:function(e){this.searchingQuestions||(this.trigger("searchQuestions",this.contentSearch),this.renderReason=ch(e))},searchQuestions:function(e){if(!this.searchingQuestions){var t=this;this.updateContentSearch(e),this.searchingQuestions=!0,delete this.lastPageRendered,this.questionsView.showLoader(),this.questionCollection.fetchSearchResults({contentSearch:this.contentSearch}).then((function(e){t.renderQuestions(e)}))}},openQuestion:function(e){this.options.model=e.model,this.options.alreadyAdded=e.alreadyAdded,this.options.questionsApiSecurity=this.questionsApiSecurity,this.options.i18n=this.i18n,this.options.metricsUtil=this.metricsUtil,this.questionModalView=new XY(this.options),this.spawn("openModal",this.questionModalView),this.listenToOnce(this.questionModalView,this.questionModalView.EVENTS.addWidgetFromPreview,(function(e){this.spawn("closeModal"),this.selectQuestion(e)}))},questionsReady:function(){this.questionModalView&&this.spawn("renderModal")},cleanup:function(){this.$el.addClass("lrn-hide").css({opacity:0,display:"none"})},getQuestionsView:function(){return this.questionsView},selectQuestion:function(e){this._removeViews(),this.spawn("addQuestionToItem",e)},backToItemView:function(){this._removeViews(),this.spawn("closeQuestionList")},_removeViews:function(){this.options.itemEditReact||(this.questionsView.remove(),this.removePagination(),a()(this.questionSearchViews).invoke("remove"))}});function cH(e){return(cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pH(e,t){return(pH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yH(e);if(t){var i=yH(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mH(this,n)}}function mH(e,t){if(t&&("object"===cH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gH(e)}function gH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yH(e){return(yH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pH(e,t)}(o,e);var t,n,r,i=hH(o);function o(){var e;dH(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vH(gH(e=i.call.apply(i,[this].concat(n))),"triggerPublicEvent",(function(t){e.context.publicEvents.trigger(t.name,t.data)})),vH(gH(e),"handleSearchQuestions",(function(t){e.props.onSearchQuestions(t)})),vH(gH(e),"openModal",(function(t){e.context.activityManager.addEventListener(ik.EVENTS.READY,e.onQuestionsReady),e.modalView||e.insertModal(),e.modalView.show(t)})),vH(gH(e),"onQuestionsReady",(function(){e.context.activityManager.removeEventListener(ik.EVENTS.READY,e.onQuestionsReady),e.modalView&&e.modalView.setCalculatedHeightAndPosition()})),vH(gH(e),"insertModal",(function(){e.modalView=new vk({el:e.modalHook,addUiClassToModalOutlet:!1,authorApiRootId:e.context.app.rootId})})),e}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t={i18n:this.context.i18n,questionsApp:this.context.activityManager.getInstanceIfReady(),contentSearch:this.props.contentSearch||"",widgetsOnItem:this.props.widgetReferencesOnItem,config:this.context.app.initOptionsModel.getConfigByMode("question_list"),itemEditReact:!0};this.loadingPanel=new Od({el:!1}),this.loadingPanel.render(),this.loadingPanel.$el.appendTo(this.rootElement),this.questionList=new uH(t,this.context.app.component.dataManager,this.context.app.errorUtil,this.context.app.component.metricsUtil),this.questionList.spawn=this.questionList.trigger,this.questionList.on("openModal",this.openModal),this.questionList.on("addQuestionToItem",this.props.onAddQuestion),this.questionList.on("closeQuestionList",this.props.onCloseQuestionList),this.questionList.on("searchQuestions",this.handleSearchQuestions),this.questionList.on("startLoadingRequest",(function(t){return e.loadingPanel.startLoadingRequest(t)})),this.questionList.on("completeLoadingRequest",(function(t){return e.loadingPanel.completeLoadingRequest(t)})),this.questionList.on("publicEvent",this.triggerPublicEvent),this.questionList.render(),this.questionList.$el.appendTo(this.rootElement)}},{key:"componentDidUpdate",value:function(e){this.props.contentSearch!==e.contentSearch&&this.questionList.searchQuestions(this.props.contentSearch||"")}},{key:"render",value:function(){var e=this;return zt.createElement("div",{ref:function(t){return e.rootElement=t}},zt.createElement("div",{ref:function(t){return e.modalHook=t}}))}}])&&fH(t.prototype,n),r&&fH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);bH.contextTypes={app:jn().object,i18n:jn().object,activityManager:jn().object,publicEvents:jn().object};const _H=bH;const wH=function(e){return function(t,n,r){var i=r.app,o=e.itemReference,s=e.widgetReference;i.component.dataManager.getSharedPassageItemCount(o,s).then((function(e){e.data&&a().isNumber(e.data.itemCount)&&t(function(e){return{type:aM,data:e}}({widgetReference:s,itemCount:e.data.itemCount}))}))}};const EH=function(){return{type:WP}};const SH=function(e){return function(t,n,r){var i=r.onChangeRoute,o=Kh(n()),a=function(){t(DR(e.widgetData)),t(wH({widgetReference:e.widgetReference,itemReference:o})),t(EH())};i?i({mode:"item",contentSearch:null,originalItemReference:o,widgetReference:null}).then((function(e){e&&a()})):a()}};function xH(e){return(xH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OH(e,t){return(OH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=MH(e);if(t){var i=MH(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AH(this,n)}}function AH(e,t){if(t&&("object"===xH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return PH(e)}function PH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MH(e){return(MH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RH=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OH(e,t)}(o,e);var t,n,r,i=CH(o);function o(){var e;kH(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return DH(PH(e=i.call.apply(i,[this].concat(n))),"handleAddQuestion",(function(t){var n=t.get("reference"),r={widget:t.get("data"),reference:n,metadata:t.get("metadata"),widgetType:"feature",addRegionNodeId:e.props.addRegionNodeId};e.props.addSharedPassage({widgetReference:n,widgetData:r})})),DH(PH(e),"handleCloseQuestionList",(function(){e.props.updateState({mode:"item",contentSearch:null})})),DH(PH(e),"handleSearchQuestions",(function(t){e.props.updateState({contentSearch:t})})),e}return t=o,(n=[{key:"render",value:function(){var e=a().pluck(this.props.widgetInstances,"reference");return zt.createElement(_H,{contentSearch:this.props.contentSearch,widgetReferencesOnItem:e,onAddQuestion:this.handleAddQuestion,onCloseQuestionList:this.handleCloseQuestionList,onSearchQuestions:this.handleSearchQuestions})}}])&&TH(t.prototype,n),r&&TH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const LH=Ln((function(e){return{addRegionNodeId:e.addRegionNodeId,contentSearch:e.contentSearch,widgetInstances:a().getNested(e,"itemData.current.widgetInstances")||[]}}),{addSharedPassage:SH,updateState:IM})(RH);function NH(e,t){var n=e.label,r=e.iconClass,i=e.onClick,o=e.dataAuthorApiSelector,s=function(e,s){var l=t.i18n.get(n),u=a().classNames("lrn-author-title-menu-element","lrn-author-toolbar-button","lrn-btn-icon-left","lrn-btn-responsive","lrn-btn-i-xs");return zt.createElement(Ar,{onClick:i,variant:"outlined",extraClasses:u,dataAuthorApiSelector:o,dataAuthorApiTooltip:s?l:void 0},zt.createElement("span",{className:a().classNames(r,"lrn-i-size-xs")}),e&&zt.createElement("span",null,l))};return zt.createElement("div",null,zt.createElement("div",{className:"lrn-col-xs-none"},s(!0,!1)),zt.createElement("div",{className:"lrn-col-xs-only"},s(!1,!0)))}NH.contextTypes={i18n:jn().object};const IH=NH;function jH(e,t){return{type:e.alignedTagType,name:t}}function BH(e){return e.name}function FH(e){return(FH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YH(Object(n),!0).forEach((function(t){ZH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VH(e){return function(e){if(Array.isArray(e))return qH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WH(e,t){return(WH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zH(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KH(e);if(t){var i=KH(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GH(this,n)}}function GH(e,t){if(t&&("object"===FH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $H(e)}function $H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KH(e){return(KH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JH=rc.constants.AB_ENTITY_TYPES,QH="lrn-author-ab-standards-modal",XH={root:QH,okBtn:"".concat(QH,"-ok-btn"),okBtnWrapper:"".concat(QH,"-ok-btn-wrapper"),listWrapper:"".concat(QH,"-list-wrapper"),loadingWrapper:"".concat(QH,"-loading-wrapper"),flexContainer:"".concat(QH,"-flex-container"),toolbar:"".concat(QH,"-toolbar"),toolbarItem:"".concat(QH,"-toolbar-item"),linkStandardBtn:a().classNames("lrn-btn-icon-left","lrn-btn-responsive"),removeStandardsBtn:a().classNames("lrn-btn-icon-left","lrn-btn-responsive")},eV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WH(e,t)}(o,e);var t,n,r,i=zH(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),ZH($H(n=i.call(this,e,t)),"onOk",(function(){if(n.props.editable){var e,t,r,i,o=n.props.tags,s=n.context.abAlignedTagTypeUtil;o=s.filterNonABTags(o),n.props.standards.forEach((function(e){o.push(jH(s,e.guid))})),n.props.tagStandardHierarchy&&n.props.standards.length?(n.setState({loadingHierarchy:!0}),e=(t=n.context.app.component.comms,r=n.props.standards.map((function(e){return e.guid})),i={"filter[standards]":"(guid in (".concat(r.join(","),"))"),"fields[standards]":["section","document","utilizations","ancestors","standard_type"].join(","),include:"ancestors"},t.request({url:"".concat(Wn.STANDARDS,"?").concat(Fi(i))}).then((function(e){var t=e.data,n=[];a().each(t.included,(function(e){n.push({guid:e.id,entityType:e.attributes.standard_type})})),a().each(t.data,(function(e){n.push({guid:e.id,entityType:e.attributes.standard_type}),n.push({guid:e.attributes.section.guid,entityType:"section"}),n.push({guid:e.attributes.document.guid,entityType:"topic"}),n.push({guid:e.attributes.document.publication.guid,entityType:"publication"}),n.push({guid:e.attributes.document.publication.authorities[0].guid,entityType:"authority"})}));var r=[];return a().each(n,(function(e){a().find(r,(function(t){return a().isEqual(t,e)}))||r.push(e)})),r}))).then((function(e){e.forEach((function(e){var t,n;o.push((t=e.entityType,n=e.guid,{type:Gn+t,name:n}))}))}),(function(e){console.error(e),n.setState({loadingHierarchy:!1})}))):e=Promise.resolve(),e.then((function(){n.props.updateItem({field:"item.tags",value:o}),n.props.onClose()}))}else n.props.onClose()})),ZH($H(n),"onClose",(function(){n.isDirty()?n.setState({showDiscardChanges:!0}):n.props.onClose()})),ZH($H(n),"openBrowser",(function(){n.props.openABStandardBrowser()})),ZH($H(n),"handleDiscardChangesYes",(function(){n.props.onClose()})),ZH($H(n),"handleDiscardChangesNo",(function(){n.setState({showDiscardChanges:!1})})),ZH($H(n),"isStandardSelected",(function(e){return-1!==n.state.selectedGuids.indexOf(e.guid)})),ZH($H(n),"handleRemoveBtnClick",(function(){var e=n.props,t=e.standards;(0,e.setAppliedAlignableStandards)(t.filter((function(e){return!n.isStandardSelected(e)})).map((function(e){return e.guid}))),n.setState({selectedGuids:[]})})),ZH($H(n),"handleSelectChange",(function(e){var t=e.guid,r=e.selected;n.setState((function(e){var n=e.selectedGuids;return{selectedGuids:!0===r?[].concat(VH(n),[t]):n.filter((function(e){return e!==t}))}}))})),ZH($H(n),"isDirty",(function(){var e=n.context.abAlignedTagTypeUtil.filterAlignedABTags(n.props.tags).map(BH);return!a().isEqual(n.props.appliedAlignableGuids,e)})),ZH($H(n),"getNumSelectedStandards",(function(){return n.state.selectedGuids.length})),ZH($H(n),"shouldDisableRemoveBtn",(function(){return 0===n.props.standards.length||0===n.getNumSelectedStandards()})),n.state={loadingHierarchy:!1,showDiscardChanges:!1,selectedGuids:[]},n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.context.abAlignedTagTypeUtil.filterAlignedABTags(this.props.tags),t=a().map(e,BH);this.props.getStandards(t),this.props.setAppliedAlignableStandards(t)}},{key:"componentDidUpdate",value:function(e){this.setState((function(t,n){var r=!a().isEqual(e.standards,n.standards),i=n.standards.map((function(e){return e.guid}));return r?{selectedGuids:a().intersection(i,t.selectedGuids)}:null}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.standards,r=t.editable,i=this.context.i18n;return zt.createElement("div",{className:XH.flexContainer},r&&zt.createElement("div",{className:XH.toolbar},zt.createElement(Ar,{onClick:this.openBrowser,color:"primary",dataAuthorApiSelector:"link-standards-button",className:a().classNames(XH.linkStandardBtn,XH.toolbarItem)},zt.createElement("span",{className:"lrn-i-plus-small"}),zt.createElement("span",{className:"lrn-col-xs-none"},i.get("linkedStandardsModalLinkStandardsButton"))),zt.createElement(Ar,{onClick:this.handleRemoveBtnClick,variant:"outlined",disabled:this.shouldDisableRemoveBtn(),className:a().classNames(XH.removeStandardsBtn,XH.toolbarItem),dataAuthorApiSelector:"remove-standards-button"},zt.createElement("span",{className:"lrn-i-trash"}),zt.createElement("span",{className:"lrn-col-xs-none"},i.get("linkedStandardsModalRemoveStandardsButton"),this.getNumSelectedStandards()>0&&" (".concat(this.getNumSelectedStandards(),")")))),zt.createElement("div",{className:XH.listWrapper},zt.createElement(nc,{standards:n.map((function(t){return HH(HH({},t),{},{selected:e.isStandardSelected(t)})})),selectable:r,onSelectChange:this.handleSelectChange})))}},{key:"render",value:function(){var e,t=this.props,n=t.isLoading,r=t.standards,i=t.isBrowserOpen,o=t.editable,a=t.isTakeoverOpen,s=this.state,l=s.loadingHierarchy,u=s.showDiscardChanges,c=this.context.i18n,d=c.get("linkedStandardsModalTitle").replace(/%numStandards%/,n?"":r.length),f=i||a,p=o?c.get("linkedStandardsModalApplyButton"):c.get("linkedStandardsModalOkButton");return u||n||l||(e=zt.createElement("div",{className:XH.okBtnWrapper},zt.createElement(Ar,{className:XH.okBtn,size:"large",color:o?"primary":"default",onClick:this.onOk,disabled:o&&!this.isDirty(),lds:this.props.lds},p))),zt.createElement(ps,{title:d,onClose:this.onClose,className:XH.root,isHidden:f,footer:e},u&&zt.createElement(eu,{positionAbsolute:!0,text:c.get("linkedStandardsModalDiscardChangesTitle"),onClickYes:this.handleDiscardChangesYes,onClickNo:this.handleDiscardChangesNo,yesLabel:c.get("linkedStandardsModalDiscardChangesYes"),noLabel:c.get("linkedStandardsModalDiscardChangesNo")}),!u&&zt.createElement(va,{isLoading:n||l,extraClasses:XH.loadingWrapper},this.renderBody()))}},{key:"componentWillUnmount",value:function(){this.props.closeABStandardBrowser()}}])&&UH(t.prototype,n),r&&UH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);ZH(eV,"contextTypes",{app:jn().object,i18n:jn().object,abAlignedTagTypeUtil:jn().instanceOf(rr).isRequired});var tV={openABStandardBrowser:rc.actions.openBrowser,setAppliedAlignableStandards:rc.actions.setAppliedAlignableStandards,getStandards:rc.actions.getStandards,closeABStandardBrowser:rc.actions.closeBrowser,updateItem:CM};const nV=Ln((function(e){return{isBrowserOpen:rc.selectors.getIsABStandardsBrowserOpen(e),standards:rc.selectors.getAppliedAlignableStandards(e),appliedAlignableGuids:rc.selectors.getAppliedAlignableStandardGuids(e),isLoading:rc.selectors.getIsFetching(e)[JH.STANDARD],tags:e.itemData.current.item.tags,tagStandardHierarchy:e.initOptions.config.global.ab_standards.tag_standard_hierarchy,editable:e.initOptions.config.global.ab_standards.edit_standards,isTakeoverOpen:Qh(e),lds:e.initOptions.config.beta_flags.lds}}),tV)(eV);const rV=function(e){return{type:bM,data:e}};function iV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iV(Object(n),!0).forEach((function(t){aV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sV=function(e,t,n,r){var i=function(e,t){var n=e.questionsApp().getResponses(),r=Object.entries(n).filter((function(e){return e[0]===t.id.toString()}));return r.length>0&&r[0]?r[0][1]:null}(t,e),o=t.getJson(),a=i&&i.value[0],s=e.querySelector(".lrn_response");if(function(e){e.style.cssText="border: none; border-top-width: 0.35714em"}(s),a){r.disabled=!0;try{n.request({url:"/mathscoringrequest",action:"get",data:uV(i,o)}).then((function(e){var t=e.data.scoringRequest,n=e.data.url;f().ajax({method:"POST",url:n,data:t,success:function(e){return function(e,t,n){var r=e.data.length>0&&e.data[0];if(r){var i=null!==r.score&&null!==r.max_score,o=i&&r.score===r.max_score;t.style.cssText=o?"border: 1px solid #4a700a; border-top-width: 0.35714em":"border: 1px solid #dd002f; border-top-width: 0.35714em",i&&console.log("%c Your score is ".concat(r.score," out of max score ").concat(r.max_score),"color: red; font-size: 15px"),r.error&&console.log(r.error)}else console.log("No answer data has been found for this request",r);n.disabled=!1}(e,s,r)},error:function(e){return lV(e,r)},crossDomain:!0})}))}catch(e){lV(e)}}};function lV(e,t){t.disabled=!1,console.log(e)}function uV(e,t){return{questions:[oV({response_id:"1"},t)],responses:{1:e}}}const cV=function(e){return{type:uM,data:e}};function dV(e){return(dV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hV(e,t){return(hV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yV(e);if(t){var i=yV(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gV(this,n)}}function gV(e,t){if(t&&("object"===dV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function yV(e){return(yV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hV(e,t)}(o,e);var t,n,r,i=mV(o);function o(){return fV(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this;return zt.createElement(iP,{title:this.context.i18n.get("historyTitle"),onClose:function(){return e.props.toggleHistoryTakeover(!1)},className:"lrn-author-history-takeover"},zt.createElement(XE,null,zt.createElement(QE,{tabId:"content",tabLabel:"Content",tabBarId:"historyTakeover",defaultTab:"content",tabIcon:"lrn-i-details",tooltip:this.context.i18n.get("historyContentTab")},this.context.i18n.get("historyContentTab")),zt.createElement(QE,{tabId:"tags",tabLabel:"Tags",tabBarId:"historyTakeover",defaultTab:"content",tabIcon:"lrn-i-tag",tooltip:this.context.i18n.get("historyTagsTab")},this.context.i18n.get("historyTagsTab"))),zt.createElement(lS,null,zt.createElement(sS,{tabBarId:"historyTakeover",tabId:"content",defaultTab:"content"}),zt.createElement(sS,{tabBarId:"historyTakeover",tabId:"tags",defaultTab:"content"})))}}])&&pV(t.prototype,n),r&&pV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);vV.contextTypes={i18n:jn().object};const bV=Ln((function(){return{}}),{toggleHistoryTakeover:cV})(vV);function _V(e){return(_V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EV(e,t){return(EV=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function SV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TV(e);if(t){var i=TV(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xV(this,n)}}function xV(e,t){if(t&&("object"===_V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kV(e)}function kV(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TV(e){return(TV=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var CV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EV(e,t)}(o,e);var t,n,r,i=SV(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),OV(kV(n=i.call(this,e)),"widgetReady",!1),OV(kV(n),"previewChangedCallback",(function(){if(n.props.flags.widgetIsMissingValidation&&n.widgetReady&&"widget"===n.props.currentMode&&!n.props.inTileView){var e=n.checkWidgetHasValidation();n.updateWidgetHasValidation(e)}})),OV(kV(n),"widgetReadyCallback",(function(){n.widgetReady=!0})),OV(kV(n),"widgetChangedCallback",(function(){n.widgetReady=!1,n.updateWidgetHasValidation(!0)})),OV(kV(n),"checkWidgetHasValidation",(function(){var e,t=n.context.qeManager.getInstanceIfReady();if(!t)throw new Error("Cannot call ItemEdit/Main#checkWidgetHasValidation before qe instance is ready");var r=t.isValidatable()&&!0===(null===(e=t.attribute("validation.automarkable"))||void 0===e?void 0:e.getValue()),i=t.checkValidation({showErrors:r});return!r||!0===a().getNested(i,"has_validation")})),OV(kV(n),"addMathServiceButton",(function(){var e=f().find(".lrn_clozeformulaV2")[0],t=n.context.qeManager._instances;if(e&&t&&t.length>0){var r=function(e,t,n){var r=document.createElement("button");return r.classList.add("lrn_btn"),r.classList.add("lrn_validate"),r.innerHTML="Validate math [BETA]",r.onclick=function(){return sV(e,t,n,r)},r}(e,t[0].instance,n.context.app.component.comms);e.append(r)}})),OV(kV(n),"_onChangeQuestionEditorViewMode",(function(e){"tileView"===e&&n.updateWidgetHasValidation(!0),n.props.updateQuestionEditViewMode(e)})),OV(kV(n),"showStandardsModal",(function(){n.props.toggleStandards(!0)})),OV(kV(n),"hideStandardsModal",(function(){n.props.toggleStandards(!1)})),OV(kV(n),"_showHistoryTakeover",(function(){n.props.toggleHistoryTakeover(!0)})),n.state={editorReady:t.qeManager.isInstanceReady(),isNewItemRecentlySaved:!1,prevFlagIsSaved:!1,prevItemId:void 0};var r=a().getNested(n.props,"initOptions.config.global.workflow");return r&&a().getNested(r,"item.reference")&&(n.workflow=r.item),n}return t=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n;return"item"!==e.currentMode||e.showItemSettings||e.showWorkflowSettings?n=!1:t.prevFlagIsSaved||!e.flags.isSaved||t.prevItemId||(n=!0),{isNewItemRecentlySaved:n,prevFlagIsSaved:e.flags.isSaved,prevItemId:a().getNested(e,"current.item.item_id")}}}],(n=[{key:"editorReadyCallback",value:function(){this.setState({editorReady:!0})}},{key:"requireValidationIsEnabled",value:function(){return a().getNested(this.props.initOptions,"config.widget_templates.require_validation")}},{key:"startWidgetValidationListeners",value:function(){this.context.qeManager.attachEventListener("widget:ready",this.widgetReadyCallback,this),this.context.qeManager.attachEventListener("widget:changed",this.widgetChangedCallback,this),this.context.qeManager.attachEventListener("preview:changed",this.previewChangedCallback,this)}},{key:"stopWidgetValidationListeners",value:function(){this.context.qeManager.offEvent("widget:ready",this.widgetReadyCallback),this.context.qeManager.offEvent("widget:changed",this.widgetChangedCallback),this.context.qeManager.offEvent("preview:changed",this.previewChangedCallback)}},{key:"updateWidgetHasValidation",value:function(e){this.props.flags.widgetIsMissingValidation===e&&this.props.widgetValidationMissing(!e)}},{key:"componentDidMount",value:function(){this.context.qeManager.attachEventListener("editor:ready",this.editorReadyCallback,this,"once"),this.$mainContainer=f()(j),this.context.qeManager.listenToChangeMode(this._onChangeQuestionEditorViewMode),this.attachPreviewChangedEventListener(),this.requireValidationIsEnabled()&&this.startWidgetValidationListeners()}},{key:"attachPreviewChangedEventListener",value:function(){this.context.qeManager.attachEventListener("preview:changed",this.handlePreviewChanged,this)}},{key:"handlePreviewChanged",value:function(){this.addMathServiceButton()}},{key:"removeEventPreviewChanged",value:function(){this.context.qeManager.offEvent("preview:changed",this.addMathServiceButton)}},{key:"getSnapshotBeforeUpdate",value:function(){return{mainContainerHeight:this.$mainContainer.height()}}},{key:"componentDidUpdate",value:function(e,t,n){if(this.props.uiFlags.activeMode!==e.uiFlags.activeMode){var r=n.mainContainerHeight;"edit"===this.props.uiFlags.activeMode&&(r+=100),this.$mainContainer.css("min-height",r)}var i=!1;("item"!==e.currentMode&&"item"===this.props.currentMode||!0===e.flags.fetching&&!1===this.props.flags.fetching||!0===e.flags.isNewlyReset)&&(this.triggerItemRender=!0,i=!this.props.currentWidgetInstances||0===this.props.currentWidgetInstances.length),(i||!1===this.props.flags.widgetsLoading&&!0===e.flags.widgetsLoading)&&(!0===this.triggerItemRender?(this.context.publicEvents.trigger(sd.EVENTS.renderItem),delete this.triggerItemRender):this.props.reRenderedWidgetInstances.length&&this.context.publicEvents.trigger(sd.EVENTS.renderWidgets,this.props.reRenderedWidgetInstances))}},{key:"componentWillUnmount",value:function(){this.context.qeManager.offEvent("editor:ready",this.editorReadyCallback),this.context.qeManager.stopListeningToChangeMode(this._onChangeQuestionEditorViewMode),delete this.$mainContainer,this.removeEventPreviewChanged(),this.requireValidationIsEnabled()&&this.stopWidgetValidationListeners()}},{key:"_getWidgetComponent",value:function(e){var t=this,n=e.loading,r=void 0!==n&&n,i=this.props.widgetData;if(!i){var o=a().find(a().getNested(this.props,"current.widgetInstances")||[],(function(e){return e.reference===t.props.widgetReference}));o&&(i={},o.data&&(i.json=o.data),o.widget_type&&(i.widget_type=o.widget_type),o.metadata&&o.metadata.name&&(i.template_name=o.metadata.name),o.metadata&&o.metadata.template_reference&&(i.template_reference=o.metadata.template_reference),a().isNumber(o.item_count)&&(i.item_count=o.item_count))}var s=!1,l=OL.TEMPLATE_REFERENCE;a().each(this.props.current.widgetInstances,(function(e){a().getNested(e,"metadata.template_reference")===l&&(s=!0)}));var u={hideMathGen:s,dynamicContentData:this.props.current.item.dynamic_content_data||{},setDynamicData:function(e){t.props.updateItem({field:"item.dynamic_content_data",value:e})},widgetData:i,widgetTemplates:{widget_types:this.props.initOptions.config.widget_templates.widget_types},legacyContentMode:this.props.legacyContentMode};return zt.createElement(va,{isLoading:r},zt.createElement(_T,u))}},{key:"_getWidgetToolbar",value:function(){var e=this,t=this.props.inTileView||!this.props.initOptions.config.widget_templates.save,n=!this.props.initOptions.config.widget_templates.widget_types.show&&this.props.inTileView;return zt.createElement(QB,{applyMarginBottom:n,backClickHandler:function(){return e._backToItemEdit()},saveClickHandler:function(){return e._saveWidget()},key:"toolbar",hideSaveButton:t,hideBackButton:!this.props.initOptions.config.widget_templates.back,hideDuplicateButton:!0})}},{key:"_backToItemEdit",value:function(){if(!this.context.qeManager.getData().safeToUnload){var e=this.context.i18n.get("typeChangeWithUnsavedChangesQuestionFeature");if(!window.confirm(e))return}this.props.updateState({mode:"item",widgetReference:null,widgetData:null})}},{key:"_backToItemList",value:function(){this.context.onChangeRoute&&this.context.onChangeRoute({mode:"itemlist"})}},{key:"_saveWidget",value:function(e){this.props.saveWidget(e)}},{key:"_saveItem",value:function(){this.props.saveItem()}},{key:"dispatchReferenceChange",value:function(e){e!==a().getNested(this.props.current,"item.reference")&&this.props.updateItem({field:"item.reference",value:e})}},{key:"dispatchTitleChange",value:function(e){e!==a().getNested(this.props.current,"item.title")&&this.props.updateItem({field:"item.title",value:e})}},{key:"_shouldDisplayFullTitleBar",value:function(e){if(e.length>0)return!0;var t=this.props.initOptions.config.item_edit.item;return t.mode.show||t.reference.show||t.status}},{key:"_addMessagesToHeader",value:function(e){var t=a().getNested(this.props,"current.item.activity_count");this.props.newItemAddedOnSaveHeaderMessage&&!this.props.current.item.item_id?e.push(zt.createElement(nT,{key:"header-warning-msg",text:this.props.newItemAddedOnSaveHeaderMessage})):this.props.newItemAddSuccessHeaderMessage&&this.state.isNewItemRecentlySaved?e.push(zt.createElement(ZY,{key:"header-success-msg",text:this.props.newItemAddSuccessHeaderMessage})):a().isNumber(t)&&t>0&&e.push(zt.createElement(nT,{key:"activity-count-msg",extraWrapperClasses:"lrn-author-dependent-count-warning-wrapper",text:this.context.i18n.get("editorActivityCountWarning")}))}},{key:"_addTitleBarToHeader",value:function(e,t){this._shouldDisplayFullTitleBar(t)?e.push(zt.createElement(OF,{referenceChange:this.dispatchReferenceChange.bind(this),titleChange:this.dispatchTitleChange.bind(this),additionalComponents:t,key:"titlebar"})):e.push(zt.createElement("div",{className:"lrn-author-item-toolbar",key:"toolbarPlaceholder"}))}},{key:"_getWorkflowButton",value:function(){var e=this.props.current.item,t=this.context.app.initOptionsModel.getItemWorkflow(),n=t.initial_state_reference,r=this.context.i18n.get("workflowUnassigned");if(e){var i=a().getNested(e,"authoring_workflow.state");if(i){var o=a().findWhere(t.workflow_states,{reference:i}),s=this.context.i18n.getLabelIgnoreCase("workflowState".concat(i));if(!o)return zt.createElement("div",null);r=s||o.label}else if(a().isUndefined(e.item_id)){var l=a().findWhere(t.workflow_states,{reference:n});r=this.context.i18n.getLabelIgnoreCase("workflowState".concat(n))||l.label}}return zt.createElement(VY,{value:r,isDisabled:this.props.flags.isSaving})}},{key:"_getItemComponent",value:function(){if(this.props.legacyContentMode)return zt.createElement(aY,null);var e=(new Ih).build(this.props.current.item.definition,this.props.currentWidgetInstances);return Oj.getRegionComponent(e._type,{node:e})}},{key:"render",value:function(){var e,t=this,n=[],r=[],i=new uD(this.props.initOptions,this.props.legacyContentMode),o=rc.constants.SELECT_MODES,s=null;if(this.props.initOptions.config.item_edit.item.scoring&&this.props.scoreData.hasValidation&&r.push(zt.createElement(FF,{key:"item_title_livescore",viewMode:"preview"})),this.props.initOptions.config.item_edit.item.answers&&this.props.scoreData.hasValidation&&r.push(zt.createElement(ZF,{key:"item_title_showanswers",viewMode:"preview"})),a().getNested(this.props,"initOptions.config.global.ab_standards.enable")&&r.push(zt.createElement(IH,{label:"itemEditStandardsButton",iconClass:"lrn-i-link",onClick:this.showStandardsModal,dataAuthorApiSelector:"standards"})),this.workflow&&this.context.app.initOptionsModel.getItemWorkflow()&&r.push(this._getWorkflowButton()),i.isItemSettingsEnabled()&&r.push(zt.createElement(DY,{key:"item_title_settings",viewMode:"edit",isDisabled:this.props.flags.isSaving})),a().getNested(this.props,"initOptions.config.item_edit.history.show")&&r.push(zt.createElement(IH,{label:"itemEditHistoryButton",iconClass:"lrn-i-history",onClick:this._showHistoryTakeover,dataAuthorApiSelector:"history"})),!(e=this.props.flags.fetching)){var l=this.props.flags.canRenderItem;if("item"===this.props.currentMode){var u=this.props.initOptions.config.item_edit.item.save,c=!1===a().getNested(u,"show")||!1===u||!l;e=!this.props.flags.widgetsReady&&l,n.push(zt.createElement(QB,{backClickHandler:function(){return t._backToItemList()},saveClickHandler:function(){return t._saveItem()},key:"toolbar",hideSaveButton:c,hideBackButton:!this.props.initOptions.config.item_edit.item.back,hideDuplicateButton:!1})),l?(this._addMessagesToHeader(n),this._addTitleBarToHeader(n,r),s=this._getItemComponent()):this.context.app.errorUtil.handle({id:this.context.app.errorUtil.errorsArray.length,method:"render",message:"Could not render item with reference "+this.props.current.item.reference},!0,!1)}else"widget"===this.props.currentMode?(this.state.editorReady&&(n.push(this._getWidgetToolbar()),!this.props.inTileView&&this.props.flags.widgetIsMissingValidation&&n.push(zt.createElement(gg,{type:"error",key:"question-edit-validation-msg"},this.context.i18n.get("questionEditMissingValidationError")))),s=this._getWidgetComponent({loading:!this.state.editorReady})):"questionlist"===this.props.currentMode&&(s=zt.createElement(LH,null))}var d={};return(this.props.showItemSettings||this.props.showWorkflowSettings)&&(d={display:"none"}),zt.createElement("div",null,this.props.flags.isDuplicating&&zt.createElement(EY,null),zt.createElement("div",{className:"lrn-item-edit"+(this.props.flags.isDuplicating?" hide":"")},zt.createElement(Uu,{selectMode:o.MULTI,isHidden:this.props.isTakeoverOpen}),zt.createElement("div",{className:"lrn-author-item"},zt.createElement(va,{isLoading:e},this.props.showItemSettings&&!e&&zt.createElement(kD,null),this.props.showWorkflowSettings&&!e&&zt.createElement(fR,null),this.props.uiFlags.linkedStandardsOpen&&zt.createElement(nV,{item:this.props.current.item,onClose:this.hideStandardsModal}),this.props.isHistoryTakeoverOpen&&zt.createElement(bV,null),zt.createElement("div",{"data-authorapi-selector":"item-component-parent",style:d},zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},n),s)))))}}])&&wV(t.prototype,n),r&&wV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);CV.contextTypes={app:jn().object,i18n:jn().object,qeManager:jn().object,publicEvents:jn().object,onChangeRoute:jn().func,abAlignedTagTypeUtil:jn().object};const AV=Ln((function(e){return{current:e.itemData.current,currentWidgetInstances:a().getNested(e,"itemData.current.widgetInstances"),flags:e.itemState.flags,previousMode:e.mode.previous,currentMode:e.mode.current,showItemSettings:e.showItemSettings,showWorkflowSettings:e.showWorkflowSettings,initOptions:e.initOptions,widgetReference:e.widgetReference,widgetData:e.widgetData,reRenderedWidgetInstances:e.itemState.reRenderedWidgetInstances,uiFlags:e.ui.flags,scoreData:e.scoreData,legacyContentMode:$h(e),inTileView:"tileView"===Xh(e),isTakeoverOpen:Qh(e),isHistoryTakeoverOpen:im(e)}}),{updateState:IM,saveItem:BR,saveWidget:HR,updateItem:CM,toggleStandards:MM,widgetValidationMissing:FR,updateQuestionEditViewMode:rV,toggleHistoryTakeover:cV})(CV),PV=function(e,t){return t.type!==wM||a().isUndefined(t.data.addRegionNodeId)?t.type===wM&&"item"===t.data.mode?null:e||null:t.data.addRegionNodeId};function MV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DV=function(e){if(!e||!e.reference)return{};var t=a().getNested(e,"authoring_workflow.state")?"unpublished":"published";return{item:{content:"",questions:[],features:[],reference:e.reference,authoring_workflow:e.authoringWorkflow,definition:{regions:[{type:"column",width:100}]},title:null,description:"",note:"",source:"",tags:[],status:t,dt_created:$().utc().format(),dt_updated:$().utc().format()},widgetInstances:[],workflowComments:[]}};const RV=function(e){return e||DV()},LV=function(e,t){if(!e)return DV();switch(t.type){case EM:var n=(new Ih).build(e.item.definition,e.widgetInstances);return n.findNodeById(t.data.id).setLabel(t.data.value),pR(e,n);case gM:var r=a().cloneDeep(e);return a().setNested(r,t.data.field,t.data.value);case yM:var i=a().cloneDeep(e);return i.workflowComments=t.data.value,i;case vM:var o=(new Ih).build(e.item.definition,e.widgetInstances);return new iD(o).changeLayout(t.data),pR(e,o);case zP:var s=(new Ih).build(e.item.definition,e.widgetInstances);s.removeWidget(t.data);var l=pR(e,s);return l.widgetInstances=a().reject(l.widgetInstances,(function(e){return e.reference===t.data})),l.item.questions=a().reject(l.item.questions,(function(e){return e.reference===t.data})),l.item.features=a().reject(l.item.features,(function(e){return e.reference===t.data})),l;case nM:var u=(new Ih).build(e.item.definition,e.widgetInstances);return u.moveWidget(t.data),pR(e,u);case xM:return _R(e,t.data);case VP:return bR(e,t.data);case iM:var c=a().cloneDeep(e),d=a().cloneDeep(t.data),f=d.questions.concat(d.features);return c.widgetInstances=f,c.item=d.item,c;case oM:var p=a().cloneDeep(e);return t.data.item_id&&(p.item=t.data),p;case aM:var h=a().cloneDeep(e),m=a().findWhere(h.widgetInstances,{reference:t.data.widgetReference});return m?(m.item_count=t.data.itemCount,h):e}return e},NV=function(e,t){var n=Io({original:RV,current:LV})(e,t),r=a().cloneDeep(n);return t.type===oM?r.original=JSON.parse(JSON.stringify(r.current)):t.type===JP&&(t.data.item?r.original=r.current=a().cloneDeep(a().pick(t.data,["item","widgetInstances","workflowComments"])):r.original=r.current=DV({reference:t.data.itemReference,authoringWorkflow:t.data.authoringWorkflow})),r};function IV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IV(Object(n),!0).forEach((function(t){BV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BV(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FV=function(e){var t=!0;if(e.item&&!a().isObject(e.item.definition))return t;if(e.widgetInstances&&e.item){var n=(new Ih).build(e.item.definition,e.widgetInstances),r=a().map(n.getAllWidgets(),(function(e){return e.reference})),i=a().map(e.widgetInstances,(function(e){return e.reference}));t=a().isEqual(i.sort(),r.sort())}return t};const YV=Io({flags:function(e,t){switch(t.type){case QP:return a().deepExtend({},e,{fetching:!0});case JP:return a().deepExtend({},e,{fetching:!1,canRenderItem:FV(t.data)});case TM:return a().deepExtend({},e,{widgetsReady:!0,widgetsLoading:!1});case tM:case eM:case dM:return a().deepExtend({},e,{widgetsLoading:!0});case fM:return a().deepExtend({},e,{widgetsReady:!1});case iM:return a().deepExtend({},e,{isSaving:!0,isDuplicating:!1});case XP:return a().deepExtend({},e,{isSaved:!1,isDirty:t.data});case oM:return a().deepExtend({},e,{isSaving:!1,isSaved:!0,isDirty:!1});case rM:return a().extend({},e,{isSaving:!1,isSaved:!1,isDirty:!0});case OM:return jV(jV({},e),{},{widgetIsMissingValidation:t.data});case WP:return jV(jV({},e),{},{widgetIsMissingValidation:!1});case wM:return jV(jV({},e),{},{widgetIsMissingValidation:(!t.data.mode||"widget"===t.data.mode)&&e.widgetIsMissingValidation});case $P:return a().extend({},e,{isDuplicating:!0});case KP:return a().extend({},e,{isDuplicating:!1});case gM:return a().extend({},e,{isSaved:!1});case sM:return a().extend({},e,{showCorrectAnswers:t.data});default:return e||{fetching:!1}}},widgetInstances:function(e,t){if(!e)return[];switch(t.type){case JP:if(a().isArray(t.data.widgetInstances)){var n=[];return t.data.widgetInstances.forEach((function(e){n.push({reference:e.reference,loadedWithQuestionsAPI:!1})})),n}return[];case iM:var r=a().cloneDeep(t.data),i=r.questions.concat(r.features),o=!1;if(i.length===e.length?i.forEach((function(t,n){t.reference!==e[n].reference&&(o=!0)})):o=!0,o){var s=[];return i.forEach((function(e){s.push({reference:e.reference,loadedWithQuestionsAPI:!1})})),s}return e;case gM:if("item.dynamic_content_data"===t.data.field){var l=a().cloneDeep(e);return a().each(l,(function(e){return e.loadedWithQuestionsAPI=!1})),l}return e;case vM:var u=a().cloneDeep(e);return a().each(u,(function(e){return e.loadedWithQuestionsAPI=!1})),u;case VP:var c=a().cloneDeep(e);return c.push({reference:t.data.reference,loadedWithQuestionsAPI:!1}),c;case zP:var d=[];return e.forEach((function(e){e.reference!==t.data&&d.push(a().cloneDeep(e))})),d;case kM:var f=a().cloneDeep(e);return f.forEach((function(e){a().find(t.data,(function(t){return e.reference===t.reference}))&&(e.loadedWithQuestionsAPI=!0)})),f}return e},reRenderedWidgetInstances:function(e,t){if(!e)return[];switch(t.type){case TM:return t.data}return e},activeTabs:function(e,t){if(!e)return[];if(t.type===pM){var n=t.data,r=a().reject(e,(function(e){return e.nodePath===n.nodePath}));return r.push(n),r}if(t.type===vM){var i=e;return t.data.tabs[0]||(i=a().reject(i,(function(e){return".regions[0].regions[0]"===e.nodePath}))),t.data.tabs[1]||(i=a().reject(i,(function(e){return".regions[1].regions[0]"===e.nodePath}))),i}return e}});function HV(e){return function(e){if(Array.isArray(e))return VV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return VV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VV(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qV={ACTIVITY_EDIT_FETCH_ACTIVITY_LOADING:"loadActivity",ACTIVITY_EDIT_FETCH_ITEMS_LOADING:"ItemsForActivityEdit",ACTIVITY_EDIT_PREVIEW_LOADING:"loadPreview",ITEM_LOADING:"loadItem"},UV={ACTIVITY_EDIT_FETCH_ACTIVITY_LOADED:"loadActivity",ACTIVITY_EDIT_FETCH_ITEMS_LOADED:"ItemsForActivityEdit",ACTIVITY_EDIT_PREVIEW_LOADED:"loadPreview",ACTIVITY_EDIT_CLEAR_LOADING:"loadActivity",ITEM_LOADED:"loadItem"};const WV=function(e,t){return a().has(qV,t.type)?a().uniq([].concat(HV(e),[qV[t.type]])):a().has(UV,t.type)?a().without(e,UV[t.type]):e||[]};const zV=Io({tab:function(e,t){var n,r,i;return t.type===mh&&(n=t.data.tabName,i=t.data.tabBarId),t.type===wM&&(n=t.data.settingsTab,i=jh),i?(r={activeTabName:n,previousLocation:e[i]?e[i].previousLocation:void 0},a().deepExtend({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,r))):e||{}},flags:function(e,t){switch(t.type){case dM:case SM:return a().deepExtend({},e,{activeMode:t.data});case uM:return a().deepExtend({},e,{isHistoryTakeoverOpen:t.data});case cM:return a().deepExtend({},e,{linkedStandardsOpen:t.data});case UP:return a().deepExtend({},e,{hasAttemptedQuestion:t.data})}return e||{}},loadingStack:WV,dropzones:function(e,t){switch(t.type){case lM:return a().deepExtend({},e,{showDropzones:!0,draggedRef:t.data,hoveredDropzone:""});case ZP:return a().deepExtend({},e,{showDropzones:!1,draggedRef:"",isKeyboardMode:!1});case mM:return a().deepExtend({},e,{hoveredDropzone:t.data,isMouseHover:!0});case hM:return a().deepExtend({},e,{hoveredDropzone:t.data,isMouseHover:!1});case GP:return a().deepExtend({},e,{isKeyboardMode:!0,draggedRef:t.data})}return e||{}},questionEditViewMode:function(e,t){return t.type===bM?t.data:e||{}}}),GV=function(e){return e||null},$V=function(e){return e||null},KV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type!==wM||a().isUndefined(t.data.mode)?t.type===WP?a().deepExtend({},e,{current:"item",previous:e.current}):e:a().deepExtend({},e,{current:t.data.mode,previous:e.current})},ZV=function(e,t){return t.type!==wM||a().isUndefined(t.data.widgetData)?t.type===WP?null:e||null:t.data.widgetData},JV=function(e,t){return t.type!==wM||a().isUndefined(t.data.widgetReference)?t.type===WP?null:e||null:t.data.widgetReference},QV=function(e,t){return t.type!==hh||a().isUndefined(t.data)?e||null:{score:t.data.score||0,maxScore:t.data.max_score||0,hasValidation:t.data.hasValidation}},XV=function(e,t){return t.type!==wM||a().isUndefined(t.data.contentSearch)?t.type===WP?null:e||null:t.data.contentSearch},eq=function(e,t){return t.type===_M&&a().isObject(t.data)?a().deepExtend({},e,a().cloneDeep(t.data)):e||null},tq=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===JP&&t.data.itemBankSettings?t.data.itemBankSettings:e},nq=function(e,t){return t.type!==wM||a().isUndefined(t.data.showItemSettings)?e||!1:t.data.showItemSettings},rq=function(e,t){return t.type!==wM||a().isUndefined(t.data.showWorkflowSettings)?e||!1:t.data.showWorkflowSettings};function iq(e){return function(e){if(Array.isArray(e))return oq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oq(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const aq=function(e){var t={withEditOption:["reference","title","details.acknowledgements","details.description","details.difficulty","details.note","details.status","details.scoring_type","details.source","tags"],withoutEditOption:["dynamic_content","actions.show","columns","tabs"]};[].concat(iq(t.withEditOption.map((function(e){return"".concat(e,".edit")}))),iq(t.withoutEditOption)).forEach((function(t){a().setNested(e,"item_edit.item.".concat(t),!1)})),a().setNested(e,"global.ab_standards.edit_standards",!1)};const sq=function(e,t){var n=Io({addRegionNodeId:PV,itemData:NV,itemState:YV,ui:zV,initOptions:GV,originalInitOptions:$V,mode:KV,widgetData:ZV,widgetReference:JV,contentSearch:XV,scoreData:QV,settingsState:eq,itemBankSettings:tq,showItemSettings:nq,showWorkflowSettings:rq,abStandards:rc.reducer})(e,t);if(!a().isEqual(n.itemData.current,a().getNested(e,"itemData.current"))&&t.type!==JP){var r=a().isEqual(n.itemData.current,n.itemData.original),i=!a().isUndefined(a().getNested(n,"itemData.current.item.item_id"));n.itemState=a().cloneDeep(n.itemState),n.itemState.flags.isDirty=!i||!r,r&&i||(n.itemState.flags.isSaved=!1)}return n.widgetReference&&!function(e){return"new"===e.widgetReference||!a().getNested(e,"itemData.current.widgetInstances")||!!a().find(e.itemData.current.widgetInstances,(function(t){return t.reference===e.widgetReference}))}(n)&&(console.error("Could not display widget with reference "+n.widgetReference+" displaying item instead."),n.mode=a().cloneDeep(n.mode),n.mode.current="item",n.widgetReference=null),function(e,t,n){var r=a().getNested(e.initOptions,"config.item_edit.item.mode.default"),i=t?t.mode.current:"",o=!(n.type!==wM||"item"!==e.mode.current||"item"===i||a().getNested(t,"showItemSettings")&&a().getNested(t,"showWorkflowSettings")),s=n.type===JP,l=a().getNested(e,"itemData.original.item.item_id"),u=a().getNested(e,"itemData.current.item.item_id");if(o||s||l!==u){e.ui=a().cloneDeep(e.ui);var c=e.ui.flags.allItemsReadOnly||a().getNested(e,"itemData.current.item.readOnly");e.ui.flags.activeMode=c?"preview":r,c?aq(e.initOptions.config):e.initOptions.config=a().cloneDeep(e.originalInitOptions.config)}}(n,e,t),function(e,t){if(a().isNumber(e.addRegionNodeId)&&t.type===vM){var n=a().getNested(e,"itemData.current.item.definition");if(n){var r=(new Ih).build(n,e.itemData.current.widgetInstances);e.addRegionNodeId=r.getFirstLeafNode().getID()}}}(n,t),function(e,t){t.type===qP&&aq(e.initOptions.config)}(n,t),n};function lq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const uq=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dynamicData=t,this.displayIndexMapping={},a().each(t.rows,(function(e,t){n.displayIndexMapping[e.index]=t}))}var t,n,r;return t=e,(n=[{key:"getRowCount",value:function(){return a().keys(this.dynamicData.rows).length}},{key:"getRowIDByDisplayIndex",value:function(e){return this.displayIndexMapping[e]}},{key:"getRandomRowIndex",value:function(){return Math.floor(Math.random()*this.getRowCount())}},{key:"getActualString",value:function(e,t){var n=this,r=this.dynamicData.rows[this.getRowIDByDisplayIndex(t)];return r?e.replace(/{{var:([a-z0-9 _]+)}}/gi,(function(e,t){var i=a().indexOf(n.dynamicData.cols,t);if(i>=0){var o=JSON.stringify(r.values[i]);return o.substring(1,o.length-1)}return e})):e}}])&&lq(t.prototype,n),r&&lq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const cq=function(e,t,n){if("preview"===n&&t){var r=new uq(t),i=r.getRandomRowIndex();return a().map(e,(function(e){var t=a().cloneDeep(e),n=JSON.stringify(t.data);return n=r.getActualString(n,i),t.data=JSON.parse(n),t}))}return"edit"===n&&t?a().map(e,(function(e){var t=a().cloneDeep(e);return t.data.is_math&&(t.data=function(e){var t=JSON.stringify(e),n=t.match(/\\(?:\(|\[).*?\\(?:\)|\])/gi);return n?(a().each(n,(function(e){var n=e;n=n.replace(/{{var:([a-z0-9 _]+)}}/gi,(function(e,t){return"\\\\MathQuillVarField{"+t+"}"})),t=t.replace(e,n)})),JSON.parse(t)):e}(t.data)),t})):e};const dq=function(e){return{type:TM,data:e}};const fq=function(e){return{type:kM,data:e}};var pq=function(e){var t=e.getState(),n=a().getNested(t,"itemData.current.widgetInstances"),r=tm(t),i=a().getNested(t,"ui.flags.activeMode");return cq(n,r,i)},hq=function(e,t){var n=pq(e),r=f()(j),i=[];n.length?(e.dispatch(fq(n)),i=a().map(n,(function(e){return e.reference})),t.addEventListener(ik.EVENTS.READY,(function n(){var o=e.getState();e.dispatch(dq(i)),t.removeEventListener(ik.EVENTS.READY,n),r.css("min-height",""),nm(o)&&"preview"===o.ui.flags.activeMode&&t.showCorrectAnswers()})),a().defer((function(){t.append(n)}))):e.dispatch(dq([]))};const mq=function(e,t){return function(e){return function(n){return function(r){var i=n(r),o=pq(e);switch(r.type){case zP:t.remove([r.data]);break;case tM:hq(e,t);break;case eM:var s=a().where(pq(e),{reference:r.data});s.length?(t.addEventListener(ik.EVENTS.READY,(function n(){e.dispatch(dq([s[0].reference])),t.removeEventListener(ik.EVENTS.READY,n)})),t.append(s)):e.dispatch(dq([]));break;case fM:t.remove(a().map(o,(function(e){return e.reference})));break;case sM:r.data?t.showCorrectAnswers():t.stopCorrectAnswerUpdates();break;case dM:"edit"===r.data&&t.stopCorrectAnswerUpdates();var l=e.getState(),u=o.map((function(e){return e.reference})),c=a().some(o,(function(e){return!0===a().getNested(e,"data.shuffle_options")}));(tm(l)||nm(l)||function(e){return!!a().getNested(e,"ui.flags.hasAttemptedQuestion")}(l)||"preview"===r.data&&rm(l)||"edit"===r.data&&t.containsVideo(u)||c)&&hq(e,t),u.forEach((function(e){t.stopAllFeatures(e)}));break;case gM:var d=void 0;"item.metadata"===r.data.field&&(d=a().getNested(r,"data.value.scoring_type")),"item.metadata.scoring_type"===r.data.field&&(d=r.data.value),d&&t.setScoringType(d)}return i}}}};const gq=function(e,t){return function(e){return function(n){return function(r){var i=n(r),o=e.getState();switch(r.type){case JP:if("widget"===o.mode.current){var a=o.addRegionNodeId;a&&(a=a.toString()),t.trigger(sd.EVENTS.addWidget,{region_id:a})}break;case OM:t.trigger(sd.EVENTS.questionEditValidationChanged,{validation_missing:r.data})}return i}}}};const yq=function(e,t,n){return function(e){return function(r){return function(i){var o=e.getState();if(i.type===wM){if(i.data.showItemSettings&&!o.showItemSettings||i.data.showWorkflowSetting&&!o.showWorkflowSettings)return n.save(o.mode.current),r(i);if(i.data.mode&&i.data.mode!==o.mode.current&&"item"===o.mode.current)return n.save("item"),r(i)}var s=r(i),l=e.getState();if("item"!==o.mode.current&&"item"===l.mode.current){return t.addEventListener(ik.EVENTS.READY,(function e(){t.removeEventListener(ik.EVENTS.READY,e),a().defer((function(){return n.apply("item")}))})),s}return o.showItemSettings&&!l.showItemSettings||o.showWorkflowSettings&&!l.showWorkflowSettings?(n.apply(l.mode.current),s):(i.type===JP&&n.delete("item"),s)}}}};const vq=function(e){return{type:"SCORE_UPDATE",data:e}},bq=function(e){var t=e.item.reference||a().uuid(),n=DV({reference:t});a().extend(n.item,e.item),a().each(e.questions,(function(e){n.widgetInstances.push(e),n.item.questions.push({reference:e.reference,type:e.type})})),a().each(e.features,(function(e){n.widgetInstances.push(e),n.item.features.push({reference:e.reference,type:e.type})}));var r=(new Ih).build(n.item.definition,n.widgetInstances);return n.item.content=r.toHTML(),n};var _q=__webpack_require__(89471);function wq(e){return function(e){if(Array.isArray(e))return Eq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Eq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eq(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sq=OL,xq=Sq.CLOZEFORMULA_TEMPLATE,kq=Sq.LAYOUT_NAME,Tq=Sq.TEMPLATE_REFERENCE;const Oq={getExtendedTemplates:function(e){if("ie"===_q.default.browser)return{};var t=a().getNested(e,"question_type_templates.clozeformula")||[],n=!1,r=t.map((function(e){return e.reference===Tq?(n=!0,a().extend(a().cloneDeep(xq),e)):e})),i=r;return n||(i=[].concat(wq(r),[a().extend({reference:Tq},a().cloneDeep(xq))])),{question_type_templates:{clozeformula:i}}},getLayout:function(e){var t=a().getNested(e,"ui.layout.edit_panel.clozeformula"),n=a().isArray(t)&&a().find(t,(function(e){return e.template_reference===Tq})),r=a().isArray(t)?a().cloneDeep(t):[];return n||"ie"===_q.default.browser?t:(r.push({layout:kq,template_reference:Tq}),r)}};function Cq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const Aq=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._dom=t.dom,this._initOptions=t.initOptions,this._consumerKey=t.consumerKey||void 0,this._consumerSettings=t.consumerSettings,this._scrollIntoViewSelector=t.scrollIntoViewSelector||void 0,this._qeVersion=t.qeVersion||void 0,this._instances=[],this._assetRequestHandler=null,this._className="learnosity-author-question-editor-"+a().uuid(),this._cachedEvents={on:[],once:[]},this._metricsUtil=t.metricsUtil,this._changeModeListeners=[],this._dataManager=t.dataManager,this._trackViewMode(),this._authorApiRootId=t.authorApiRootId,this._errorUtil=t.errorUtil}var t,n,r;return t=e,(n=[{key:"_getDomSelector",value:function(){this._hiddenContainer||(this._hiddenContainer=document.createElement("div"),this._hiddenContainer.classList.add("lrn-hide"),this._hiddenContainer.classList.add("lrn-invisible"),this._dom.appendChild(this._hiddenContainer));var e=document.createElement("div");return e.classList.add(this._className),e.classList.add("learnosity-response-editor"),this._hiddenContainer.appendChild(e),this._domSelector="."+this._className,this._domSelector}},{key:"getInstance",value:function(e){var t=this,n=this;if(this._instances.length){var r=function(){return e&&n._instances[0].instance.moveInstanceTo(e),S.resolve(n._getFacade(n._instances[0].instance))};return this._instances[0].ready?r():this._instances[0].promise.then(r)}var i={promise:new S((function(r){Ld.loadLearnosityApi("questionEditor").then((function(){i.instance=window.LearnosityQuestionEditor.init(n._getInitOptions(),n._getDomSelector(),{readyListener:function(){e&&i.instance.moveInstanceTo(e),t._attachCachedEvents(i.instance,"on"),t._attachCachedEvents(i.instance,"once"),r(n._getFacade(i.instance)),i.ready=!0,delete i.promise},errorListener:function(e){n._errorUtil.handle(e)},customViews:t._customViews},{metricsContext:t._metricsUtil.getContext()})}))}))};return this._instances.push(i),i.promise}},{key:"setCustomViews",value:function(e){this._customViews=e}},{key:"getClassName",value:function(){return this._className}},{key:"getInstanceIfVisible",value:function(){return this.isInstanceVisible()?this._instances[0].instance:null}},{key:"getInstanceIfReady",value:function(){return this.isInstanceReady()?this._instances[0].instance:null}},{key:"isInstanceVisible",value:function(){return!!this.isInstanceReady()&&!this._hiddenContainer.querySelector(this._domSelector)}},{key:"isInstanceReady",value:function(){var e=this._instances[0];return!!(e&&e.ready&&e.instance)}},{key:"releaseInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._instances.length&&(this.isInstanceReady()?this._instances[0].instance.moveInstanceTo(this._hiddenContainer):e||this.attachEventListener("editor:ready",this.releaseInstance.bind(this,!0),this,"once"))}},{key:"setAssetRequestHandler",value:function(e){this._assetRequestHandler=e}},{key:"listenToChangeMode",value:function(e){this._changeModeListeners.push(e)}},{key:"stopListeningToChangeMode",value:function(e){this._changeModeListeners=a().without(this._changeModeListeners,e)}},{key:"_getInitOptions",value:function(){var e=a().deepExtend({configuration:{consumer_key:this._consumerKey}},this._initOptions,Oq.getExtendedTemplates(this._initOptions));e.configuration.disableTypeChange=!0,e.configuration.main_container_selector='[data-authorapi-root-id="'.concat(this._authorApiRootId,'"]'),a().isFunction(e.assetRequest)||(e.assetRequest=this._onAssetRequest.bind(this)),this._scrollIntoViewSelector&&(e.configuration.scroll_container_selector=this._scrollIntoViewSelector);var t=a().getNested(this._consumerSettings,"feature_flags.question_editor_flags"),n=Oq.getLayout(e);return a().isObject(t)&&(e.premium=t),e=a().setNested(e,"ui.layout.edit_panel.clozeformula",n)}},{key:"_onAssetRequest",value:function(){this._assetRequestHandler&&this._assetRequestHandler.handleAssetRequest.apply(this._assetRequestHandler,arguments)}},{key:"destroyInstance",value:function(){this._instances.length&&(this._instances[0].ready?(this._instances[0].instance.destroy(),this._instances=[]):(this._instances[0].promise.then((function(e){e.destroy()})),this._instances=[]))}},{key:"getData",value:function(){var e=this._instances[0].instance,t=e.getWidget(),n=null;return t&&(n=this._dataManager.getSchemasUtil().getWidgetType(t.type)),{widget:t,metadata:e.getMetadata(),safeToUnload:e.safeToUnload(),widgetType:n}}},{key:"setMathGenWidget",value:function(e){var t=this._instances[0].instance,n=t.getWidget();n.stimulus=e.stimulus,n.template=e.template,n.validation=e.validation,t.setWidget(n,{template_reference:OL.TEMPLATE_REFERENCE})}},{key:"_attachCachedEvents",value:function(e,t){a().isFunction(e[t])&&a().each(this._cachedEvents[t],(function(n){e[t](n.eventName,n.callback,n.context)}))}},{key:"attachEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"on",i=this._deferEventCallback.apply(this,arguments),o=this.getInstanceIfReady();o&&a().isFunction(o[r])?o[r](e,i,n):this._cachedEvents[r].push({eventName:e,callback:i,context:n})}},{key:"offEvent",value:function(e,t){var n=this.getInstanceIfReady();n&&a().isFunction(n.off)?n.off(e,t):(this._cachedEvents.once=a().reject(this._cachedEvents.once,(function(n){return n.eventName===e&&(!t||t===n.callback)})),this._cachedEvents.on=a().reject(this._cachedEvents.on,(function(n){return n.eventName===e&&(!t||t===n.callback)})))}},{key:"_deferEventCallback",value:function(e,t,n){return-1===["widget:ready"].indexOf(e)?t:function(){var e=arguments;a().defer((function(){t.apply(n,e)}))}}},{key:"_trackViewMode",value:function(){var e=this;this.attachEventListener("widget:changed",(function(){e._viewMode="editView",e._changeModeListeners.forEach((function(t){return t(e._viewMode)}))}),this,"on"),this.attachEventListener("editor:ready",(function(){e._viewMode="tileView",e._changeModeListeners.forEach((function(t){return t(e._viewMode)}))}),this,"on")}},{key:"getViewMode",value:function(){return this._viewMode}},{key:"_getFacade",value:function(e){return{setWidget:function(t,n){e.setWidget(t,n)},reset:function(t){e.reset(t)},getWidget:function(){return e.getWidget()},getMetadata:function(){return e.getMetadata()},safeToUnload:function(t){return e.safeToUnload(t)},on:function(t,n){e.on(t,n)},once:function(t,n){e.once(t,n)},off:function(t,n){e.off(t,n)},setDynamicDataHandlers:function(t){e.setDynamicDataHandlers(t)},getLabelBundle:function(t){return e.getLabelBundle(t)}}}}])&&Cq(t.prototype,n),r&&Cq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Pq=function(e){var t={};return a().each(["attribute","checkValidation","undo","redo","questionsApp"],(function(n){t[n]=function(){var t=e.getInstanceIfVisible();return!!t&&t[n].apply(t,arguments)}})),t};var Mq={description:{type:"string",length:250,isNullable:!0},source:{type:"string",isNullable:!0},note:{type:"string",isNullable:!0},acknowledgements:{type:"string",isNullable:!0},scoring_type:{type:"string",constraints:["per-question","dichotomous","dependent"]},workflow:{type:"array",isNullable:!0},adaptive:{type:"object",attributes:{difficulty:{type:"float",isNullable:!0}}},recommended_time:{type:"integer",min:0,max:600,isNullable:!0},status:{type:"string",constraints:[h.getValidStatuses().published,h.getValidStatuses().unpublished,h.getValidStatuses().archived]}};function Dq(e){var t,n={},r={};return a().each(e,(function(e,i){!a().isUndefined(e)&&a().has(Mq,i)?(t=Rq(i,e,Mq[i]),n=a().extend(n,t.error),r=a().extend(r,t.validated)):n[i]=i+" is not defined or not supported by this method"}),this),{errors:n,validated:r}}function Rq(e,t,n){var r,i,o,s,l={},u={};if(a().has(n,"isNullable")&&n.isNullable&&a().isNull(t))u[e]=null;else switch(n.type){case"string":!a().isString(t)||a().has(n,"length")&&t.length>n.length?l[e]=e+" must be a "+n.type+(a().has(n,"length")?" with a maximum length of "+n.length:""):a().has(n,"constraints")&&a().indexOf(n.constraints,t)<0?l[e]=e+" must be one of ("+n.constraints.join(", ")+")":u[e]=t;break;case"integer":case"float":o=parseFloat(t),isNaN(t)||isNaN(o)?l[e]=e+" must be a valid "+n.type:"integer"===n.type&&o!==parseInt(o,10)?l[e]=e+" must be a valid "+n.type+": "+o:a().has(n,"max")&&o>n.max||a().has(n,"min")&&o<n.min?l[e]=e+" must be a valid "+n.type+(a().has(n,"max")?" not greater than "+n.max:"")+(a().has(n,"min")?" no less than "+n.min:"")+" : "+o:u[e]=o;break;case"object":if(a().isObject(t))if(a().has(n,"attributes"))for(r in i=function(t,n){l[e+"."+n]=t},t)(t[r]||null===t[r])&&(a().has(n.attributes,r)?(s=Rq(r,t[r],n.attributes[r]),a().isEmpty(s.error)||a().each(s.error,i),u[e]=u[e]?a().extend(u[e],s.validated):s.validated):l[e]=e+" may only contain ("+a().keys(n.attributes).join(", ")+") : "+r);else u[e]=t;else l[e]=e+" must be a valid "+n.type;break;case"array":a().isArray(t)?u[e]=t:l[e]=e+" must be a valid "+n.type}return{error:l,validated:u}}function Lq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const Nq=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.context=n}var t,n,r;return t=e,(n=[{key:"getItemReference",value:function(){return a().getNested(this.store.getState(),"itemData.current.item.reference")}},{key:"setSafeToUnload",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(this.store.getState(),!e);return this.store.dispatch(vB(t)),this.store.getState().itemState.flags.isDirty===t}},{key:"safeToUnload",value:function(e){if(!0===e)return this.setSafeToUnload(e),!0;var t=this.store.getState(),n=this.context.qeManager.getInstanceIfReady();return(!t.itemState.flags.isDirty||!t.itemState.flags.canRenderItem)&&(!n||n.safeToUnload())&&this.safeToUnloadComponent({name:"item_settings"})&&this.safeToUnloadComponent({name:"mathgen"})}},{key:"save",value:function(e){var t=this.store.getState(),n=0,r=a().getNested(t,"itemData.current.widgetInstances"),i=t.mode.current,o="tileView"===this.context.qeManager.getViewMode(),s=!t.itemState.flags.isDirty||!t.itemState.flags.canRenderItem;return r&&(n=r.length),!((s||0===n)&&"widget"!==i||"widget"===i&&o||t.itemState.flags.isSaving||("widget"===i?this.store.dispatch(HR(e)):this.store.dispatch(BR()),0))}},{key:"safeToUnloadComponent",value:function(e){var t=this.store.getState();if(a().isJsonObject(e)){if("item_settings"===e.name){if(!t.showItemSettings)return!0;var n=!1,r=!a().find(t.settingsState.isDirty,(function(t,r){return!(!a().isUndefined(e.tab)&&e.tab!==r)&&(n=!0,!0===t)}));if(n)return r}if(e.name===kL){var i=this.context.componentRegister.get(kL);return!i||!i.isDirty()}}}},{key:"closeItemSettings",value:function(){var e=this.store.getState();if(!e.showItemSettings)return!1;var t=e.settingsState.isDirty;return Object.keys(t).every((function(e){return!t[e]}))?this.store.dispatch(IM({showItemSettings:!1})):this.store.dispatch(PM({displayConfirmationOverlay:!0})),!0}},{key:"displaySettingsDiscard",value:function(e){return!!this.store.getState().showItemSettings&&!0!==this.safeToUnloadComponent({name:"item_settings"})&&(this.store.dispatch(PM({displayConfirmationOverlay:!0})),e&&this._handleOnDiscardCallback(e),!0)}},{key:"_handleOnDiscardCallback",value:function(e){var t=this,n=e,r=this.store.subscribe((function(){var e=t.store.getState();n&&!e.showItemSettings&&(r(),n(!0),n=void 0),n&&e.showItemSettings&&!1===e.settingsState.displayConfirmationOverlay&&(r(),n(!1),n=void 0)}))}},{key:"changeItemMode",value:function(e){var t=this.store.getState().ui.flags.activeMode;if(a().isUndefined(e))e="edit"===t?"preview":"edit";else if(!a().contains(["edit","preview"],e)||e===t)return!1;return this.store.dispatch(XB(e)),e}},{key:"getItemDescription",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.description")}},{key:"setItemDescription",value:function(e){if(!a().isString(e))return console.warn("description must be a string"),!1;var t=xT.Z.sanitizeHTML(e);return this.store.dispatch(CM({field:"item.description",value:t})),t}},{key:"getItemDifficulty",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.adaptive.difficulty")}},{key:"setItemDifficulty",value:function(e){return a().isNumber(e)?(this.store.dispatch(CM({field:"item.adaptive.difficulty",value:e})),!0):(console.warn("Difficulty must be a number"),!1)}},{key:"getItemNotes",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.note")}},{key:"setItemNotes",value:function(e){return a().isString(e)?(this.store.dispatch(CM({field:"item.note",value:e})),!0):(console.warn("notes must be a string"),!1)}},{key:"getItemSource",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.source")}},{key:"setItemSource",value:function(e){return a().isString(e)?(this.store.dispatch(CM({field:"item.source",value:e})),!0):(console.warn("source must be a string"),!1)}},{key:"getItemTitle",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.title")}},{key:"setItemTitle",value:function(e){return!!new _(this.context.app.errorUtil).validateAttribute("title",e,"setItemTitle")&&(e===a().getNested(this.store.getState(),"itemData.current.item.title")?(console.warn("setItemTitle() - the title passed is already set"),!1):(this.store.dispatch(CM({field:"item.title",value:e})),!0))}},{key:"setItemReference",value:function(e){var t=a().getNested(this.store.getState(),"itemData.current.item.reference");return!!a().isString(e)&&(e=e.trim())!==t&&(this.store.dispatch(CM({field:"item.reference",value:e})),e)}},{key:"setWidget",value:function(e,t){var n=this.store.getState().mode.current,r={widgetData:{json:e}};if(t&&t.template_reference&&(r.widgetData.template_reference=t.template_reference),"widget"!==n&&(r.mode="widget",r.widgetReference="new"),r.showItemSettings=!1,this.store.getState().widgetData&&this.store.getState().widgetData.json){var i=this.store.getState().widgetData.json;a().isEqual(i,e)&&"widget"===n&&this.context.qeManager.getInstanceIfReady().setWidget(e)}return this.store.dispatch(IM(r)),!0}},{key:"questionsApp",value:function(){return this.context.activityManager.getInstanceIfReady()||!1}},{key:"getItem",value:function(){var e=this.store.getState(),t=a().getNested(e,"itemData.current.item"),n=a().getNested(e,"itemData.current.widgetInstances");return MR(SR(t,n))}},{key:"_getItemTags",value:function(){return function(e){return PR(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:CR)===OR?TR:kR)}(a().getNested(this.store.getState(),"itemData.current.item.tags"))}},{key:"getItemTags",value:function(){return this._getItemTags()}},{key:"setItemTags",value:function(e){return function(e){if(!a().isArray(e))return!1;var t=!0;return e.forEach((function(e){a().isObject(e)&&!a().isArray(e)||(t=!1),a().isString(e.name)&&a().isString(e.type)||(t=!1),void 0===e.description||null===e.description||a().isString(e.description)||(t=!1),void 0===e.sort_key||null===e.sort_key||a().isNumber(e.sort_key)||(t=!1)})),t}(e)?(this.store.dispatch(CM({field:"item.tags",value:e})),e):(function(e){if(!a().isArray(e))return!1;var t=!0;return e.forEach((function(e){a().isObject(e)&&!a().isArray(e)||(t=!1),a().isString(e.type)||(t=!1),a().isArray(e.tags)?e.tags.forEach((function(e){a().isObject(e)&&!a().isArray(e)||(t=!1),a().isString(e.name)||(t=!1)})):t=!1})),t}(e)&&console.warn("You can't use v1 formatted tag objects with v2 tag setters!"),!1)}},{key:"getScoringType",value:function(){var e=this.store.getState(),t=a().getNested(e,"itemData.current.item.metadata.scoring_type");return t||(t="per-question"),t}},{key:"setScoringType",value:function(e){return!!a().contains(["per-question","dependent","dichotomous"],e)&&(this.store.dispatch(CM({field:"item.metadata.scoring_type",value:e})),!0)}},{key:"getStatus",value:function(){var e=this.store.getState();return a().getNested(e,"itemData.current.item.status")}},{key:"setStatus",value:function(e){return!!new _(this.context.app.errorUtil).validateAttribute("status",e,"setStatus")&&(this.store.dispatch(CM({field:"item.status",value:e})),e)}},{key:"setAttributes",value:function(e){var t=this;if(!a().isObject(e))return!1;var n=Dq(e),r=n.errors,i=n.validated;return a().isEmpty(r)?(function(e,t,n){var r;a().each(e,(function(i,o){switch(o){case"adaptive":(r=t("adaptive"))||(r={difficulty:null}),(e.adaptive.difficulty<0||e.adaptive.difficulty||0===e.adaptive.difficulty||null===e.adaptive.difficulty)&&(a().isEqual(r.difficulty,e.adaptive.difficulty)||(r.difficulty=e.adaptive.difficulty,n("adaptive",r),!0));break;case"acknowledgements":case"scoring_type":(r=t("metadata"))||(r={acknowledgements:null,scoring_type:null}),(i&&i.length>0||a().isNull(i))&&(a().isEqual(r[o],i)||(r[o]=i,n("metadata",r),!0));break;default:r=t(o),a().isEqual(r,i)||(n(o,i),!0)}}),this)}(i,(function(e){return a().getNested(t.store.getState(),"itemData.current.item.".concat(e))}),(function(e,n){t.store.dispatch(CM({field:"item.".concat(e),value:n}))})),!0):(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;a().each(e,(function(e,n){t.handle({id:t.errorsArray.length,method:"setAttributes",attribute:n,message:e},!0)}),this)}(r,this.context.app.errorUtil),!1)}},{key:"_duplicateItemWithObjectSettings",value:function(e){var t=e.reference,n=!!e.duplicateSharedPassages;return!0===e.showConfirmationScreen&&this._widgetsContainSharedPassage()?(this.store.dispatch(kB()),!0):this._duplicateItemWithReference(t,n)}},{key:"_duplicateItemWithReference",value:function(e,t){var n=new _(this.context.app.errorUtil);if(!a().isNull(e)&&!a().isUndefined(e)&&""!==e&&!n.validateAttribute("reference",e,"duplicateItem"))return!1;if(e){e=e.trim();var r=this;this.context.app.component.dataManager.fetchItem(e).then((function(n){n.data&&n.data.item?r.context.app.errorUtil.handle({id:r.context.app.errorUtil.errorsArray.length,method:"duplicateItem",attribute:"reference",message:"An item with reference ".concat(e," already exists")},!0,!1):r.store.dispatch(xB({itemReference:e,duplicatePassages:t}))}))}else this.store.dispatch(xB({itemReference:e,duplicatePassages:t}));return!0}},{key:"_widgetsContainSharedPassage",value:function(){var e=this.store.getState(),t=a().getNested(e,"itemData.current.widgetInstances");return void 0!==a().find(t,(function(e){return"sharedpassage"===e.type}))}},{key:"duplicateItem",value:function(e,t){var n=this.store.getState(),r=a().getNested(n,"itemData.current.widgetInstances"),i=!r||0===r.length,o=a().getNested(n,"itemState.flags.canRenderItem");return!("widget"===a().getNested(n,"mode.current")||i||!o)&&(a().isString(e)||a().isUndefined(e)||a().isNull(e)?this._duplicateItemWithReference(e,t):!!a().isJsonObject(e)&&this._duplicateItemWithObjectSettings(e))}},{key:"getWidgetMetadata",value:function(){var e=this.context.qeManager.getInstanceIfVisible();return!!e&&e.getMetadata()}},{key:"getWidget",value:function(){var e=this.context.qeManager.getInstanceIfVisible();return!!e&&e.getWidget()}},{key:"editorApp",value:function(){return Pq(this.context.qeManager)}},{key:"setItemJson",value:function(e){var t=new _(this.context.app.errorUtil),n=this.store.getState(),r=a().getNested(e,"item.reference");if("item"!==n.mode.current||Qh(n))return!1;if(!t.validateAttribute("reference",r,"setItemJson"))return!1;var i=a().getNested(n,"itemData.current.item.item_id"),o=bq(e);return i&&(o.item.item_id=i),this.store.dispatch(SB({itemJson:o,dirty:!0})),!0}},{key:"backToItemEdit",value:function(){var e=this.store.getState();if(e.showItemSettings)return this.closeItemSettings();if(e.showWorkflowSettings)return this.store.dispatch(IM({showWorkflowSettings:!1})),!0;if("widget"===e.mode.current){if(!this.context.qeManager.getData().safeToUnload){var t=this.context.i18n.get("typeChangeWithUnsavedChangesQuestionFeature");if(!window.confirm(t))return!1}return this.store.dispatch(IM({mode:"item"})),!0}return"questionlist"===e.mode.current?(this.store.dispatch(IM({mode:"item"})),!0):(this.context.app.errorUtil.handle("The public method backToItemEdit() can only be called in the Item edit sub-views. It has no effect in the root Item edit view",!0),!1)}}])&&Lq(t.prototype,n),r&&Lq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Iq=function(e){return{type:UP,data:e}};function jq(e){return(jq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fq(e,t){return(Fq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yq(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qq(e);if(t){var i=qq(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hq(this,n)}}function Hq(e,t){if(t&&("object"===jq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vq(e)}function Vq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qq(e){return(qq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Uq=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fq(e,t)}(o,e);var t,n,r,i=Yq(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Vq(n=i.call(this,e,t)),"changeStateListener",(function(){var e=n.store.getState(),t=n.getCompareString(e.itemData.current.item);n.compareItemString||(n.compareItemString=n.getCompareString(e.itemData.original.item)),t!==n.compareItemString&&"item"===e.mode.current&&(n.context.publicEvents.trigger(sd.EVENTS.itemEditChanged),n.compareItemString=t),a().isFunction(n.props.onChangeState)&&n.props.onChangeState(e)}));var r=e.initialRouteData,s=r.itemReference,l=r.itemJson,u=r.organisationId;return t.componentRegister.add(qh,Vq(n)),n.moduleMethods=new Nq(n.store,n.getChildContext()),s?n._handleReference(s,u):l&&n._handleItemJson(l),a().getNested(e,"initOptions.config.dependencies.question_editor_api.preload")||t.app.shell.initQe(),n}return t=o,(n=[{key:"getChildContext",value:function(){return a().extend({onChangeRoute:this.props.onChangeRoute},this.context)}},{key:"setRouteData",value:function(e){var t=this;e.itemReference?this._handleReference(e.itemReference,e.organisationId):e.itemJson&&this._handleItemJson(e.itemJson);var n={mode:e.mode,showItemSettings:e.showItemSettings,showWorkflowSettings:e.showWorkflowSettings,settingsTab:e.settingsTab,widgetData:e.widgetData,widgetReference:e.widgetReference,addRegionNodeId:e.addRegionNodeId,contentSearch:e.contentSearch};"widget"==this.store.getState().mode.current?this.context.qeManager.isInstanceReady()?this.store.dispatch(IM(n,!1)):this.context.qeManager.attachEventListener("editor:ready",(function(){t.store.dispatch(IM(n,!1))}),this,"once"):this.store.dispatch(IM(n,!1))}},{key:"componentDidMount",value:function(){var e=this;this._scoreUpdateCallback=function(t){e.store.dispatch(vq(t))},this._attemptQuestionCallback=function(t){e.store.dispatch(Iq(t))},this.context.activityManager.addEventListener(ik.EVENTS.SCORE_UPDATE,this._scoreUpdateCallback),this.context.activityManager.addEventListener(ik.EVENTS.ATTEMPT_QUESTION,this._attemptQuestionCallback),this.unsubscribeStoreListener=this.store.subscribe(this.changeStateListener)}},{key:"componentWillUnmount",value:function(){this.context.activityManager.removeEventListener(ik.EVENTS.SCORE_UPDATE,this._scoreUpdateCallback),this.context.activityManager.removeEventListener(ik.EVENTS.ATTEMPT_QUESTION,this._attemptQuestionCallback),this.unsubscribeStoreListener(),this.context.componentRegister.remove(qh)}},{key:"getCompareString",value:function(e){return a().isJsonObject(e)?JSON.stringify(e.tags||"")+JSON.stringify(e.definition||"")+JSON.stringify(e.dynamic_content_data||"")+JSON.stringify(e.metadata||"")+(e.reference||"")+(e.status||"")+(e.description||"")+(e.title||""):""}},{key:"getData",value:function(){return this.store.getState()}},{key:"setDynamicContentData",value:function(e){this.store.dispatch(CM({field:"item.dynamic_content_data",value:e}))}},{key:"setDynamicContentMetadata",value:function(e){this.store.dispatch(CM({field:"item.metadata.dynamic_content",value:e}))}},{key:"_handleReference",value:function(e,t){var n;e!==a().getNested(this.store.getState(),"itemData.current.item.reference")&&e!==a().getNested(this.store.getState(),"itemData.original.item.reference")&&(n="new"===e?{itemJson:DV({reference:this.context.app.initOptionsModel.getReferencePrefixForNewItem()+a().uuid()}),dirty:!1}:{url:"/itembank/itemeditor",data:{reference:e},dirty:!1},void 0!==t&&(n.data.itemBankSettings={organisation_id:t}),this.store.dispatch(SB(n)))}},{key:"_handleItemJson",value:function(e){var t=bq(e);this.store.dispatch(SB({itemJson:t,dirty:!0}))}},{key:"_setupStore",value:function(){var e,t=this.props.initialRouteData,n=t.mode,r=t.settingsTab,i=t.widgetData,o=t.widgetReference,s=t.contentSearch,l=t.addRegionNodeId,u=t.showItemSettings,c=t.showWorkflowSettings;this.store=Lo(sq,(e={initOptions:this.props.initOptions,showItemSettings:u,showWorkflowSettings:c,mode:n,settingsTab:r,widgetData:i,widgetReference:o,contentSearch:s,addRegionNodeId:l},{itemBankSettings:null,itemData:{original:DV(),current:DV()},itemState:{flags:{fetching:!1,widgetIsMissingValidation:!1,widgetsReady:!1,widgetsLoading:!0,isSaved:!1,isDirty:!1,isDuplicating:!1,showCorrectAnswers:!1,isNewlyReset:!1,canRenderItem:!0},widgetInstances:[],reRenderedWidgetInstances:[],activeTabs:[]},initOptions:e.initOptions,originalInitOptions:a().cloneDeep(e.initOptions),mode:{current:e.mode||"item",previous:null},showItemSettings:e.showItemSettings,showWorkflowSettings:e.showWorkflowSettings,widgetReference:e.widgetReference,ui:{flags:{activeMode:a().getNested(e.initOptions,"config.item_edit.item.mode.default"),linkedStandardsOpen:!1,allItemsReadOnly:a().getNested(e.initOptions,"config.global.items.read_only.enabled")&&0===a().getNested(e.initOptions,"config.global.items.read_only.filter.either").length},tab:MV({},jh,{activeTabName:e.settingsTab})},widgetData:e.widgetData,contentSearch:e.contentSearch,scoreData:{score:0,maxScore:0},settingsState:{},addRegionNodeId:a().isNumber(e.addRegionNodeId)?e.addRegionNodeId:null,abStandards:rc.initialState}),Fo.apply(null,function(e,t,n,r,i,o){var a=[_x.Z.withExtraArgument({app:e,activityManager:t,qeManager:n,publicEvents:r,onChangeRoute:i}),mq(e,t),gq(e,r),yq(e,t,o)];return!!window.MSInputMethodContext&&document.documentMode,a}(this.context.app,this.context.activityManager,this.context.qeManager,this.context.publicEvents,this.props.onChangeRoute,this.context.scrollPositionHelper)))}},{key:"render",value:function(){return zt.createElement(en,{store:this.store},zt.createElement(AV,{newItemAddedOnSaveHeaderMessage:this.props.newItemAddedOnSaveHeaderMessage,newItemAddSuccessHeaderMessage:this.props.newItemAddSuccessHeaderMessage}))}}])&&Bq(t.prototype,n),r&&Bq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(mS);Uq.contextTypes=ir,Uq.childContextTypes=a().extend({onChangeRoute:jn().func},ir);const Wq=Uq;const zq=function(e){var t=e.getConfig();return a().cloneDeep({config:{item_edit:t.item_edit,global:{hide_tags:e.getHideTagsConfig(),show_tags:e.getShowTagsConfig(),ab_standards:e.getABStandardsConfig(),workflow:e.getWorkflowConfig(),items:e.getGlobalItemsConfig()},beta_flags:t.beta_flags,container:t.container,dependencies:{question_editor_api:{preload:a().getNested(t,"dependencies.question_editor_api.preload"),editor_type:a().getNested(t,"dependencies.question_editor_api.init_options.rich_text_editor.type")||"ckeditor"}},widget_templates:t.widget_templates}})};const Gq=function(e){var t=e.getConfig(),n=a().cloneDeep(zq(e));return n.config.item_edit=a().deepExtend(n.config.item_edit,t.activity_edit.item_edit),n};const $q=function(e){var t="";if(["stimulus","template"].forEach((function(n){e.forEach((function(e){var r=e.data;!t&&r[n]&&(t=r[n])}))})),e.forEach((function(e){var n=e.data;t||"sharedpassage"!==e.type||(!0===n.paginated_content?a().isArray(n.pages)&&a().some(n.pages,(function(e){return e}))&&(t=n.pages.join(" ")):n.content&&(t=n.content))})),t){var n=(new DOMParser).parseFromString("<div>"+t+"</div>","text/html").body;t=a().getNested(n,"firstChild.textContent")}return t};function Kq(e){return(Kq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zq(Object(n),!0).forEach((function(t){oU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eU(e,t){return(eU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iU(e);if(t){var i=iU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nU(this,n)}}function nU(e,t){if(t&&("object"===Kq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rU(e)}function rU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iU(e){return(iU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eU(e,t)}(o,e);var t,n,r,i=tU(o);function o(){var e;Qq(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oU(rU(e=i.call.apply(i,[this].concat(n))),"routePathPrefix","items/:itemReference/"),oU(rU(e),"initialRouteData",e._getRouteData()),oU(rU(e),"_convertRouteDataToLocation",(function(t){var n=e._getCurrentLocationPrefix(t.originalItemReference);return t.showItemSettings?(n+="/settings",t.settingsTab&&(n+="/"+t.settingsTab)):t.showWorkflowSettings?n+="/workflow":"widget"===t.mode?n+="/widgets/"+window.encodeURIComponent(t.widgetReference):"questionlist"===t.mode&&(n+="/questionList",a().isString(t.contentSearch)&&t.contentSearch&&(n+="/search/"+window.encodeURIComponent(JSON.stringify({contentSearch:t.contentSearch})))),n})),oU(rU(e),"_setRef",(function(t){e.itemEdit=t})),oU(rU(e),"_handleChangeRoute",(function(t){if("itemlist"===t.mode)return e._handleChangeRouteToItemList();var n={currentLocation:e._convertRouteDataToLocation(t),previousLocation:e.props.route.url};return new S((function(t){n.currentLocation===n.previousLocation?t(!0):(e.context.app.component.publicEvents.once("navigate",(function(e){e.isDefaultPrevented()?t(!1):t(!0)})),e.props.navigate(n,!1,!0))}))})),e}return t=o,(n=[{key:"_getCurrentLocationPrefix",value:function(e){return"items/".concat(window.encodeURIComponent(e))}},{key:"_getMode",value:function(){var e;switch(this.props.route.path){case"".concat(this.routePathPrefix,"widgets/:widgetReference/:widgetData"):case"".concat(this.routePathPrefix,"widgets/:widgetReference"):e="widget";break;case"".concat(this.routePathPrefix,"questionList"):case"".concat(this.routePathPrefix,"questionList/search/:query"):e="questionlist";break;default:e="item"}if(this.props.route.params.widgetData&&"widget"===e)try{JSON.parse(this.props.route.params.widgetData)}catch(t){console.error(t),e="item"}return e}},{key:"_isItemSettings",value:function(){return"items/:itemReference/settings/:tab"===this.props.route.path||"items/:itemReference/settings"===this.props.route.path}},{key:"_isWorkflow",value:function(){return this.props.route.path==="".concat(this.routePathPrefix,"workflow")}},{key:"_parseWidgetDataParam",value:function(){var e=this.props.route.params.widgetData;if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}},{key:"_getWidgetData",value:function(){var e=this._parseWidgetDataParam(),t=null,n=null;return e?(e.widgetType&&(n="features"===e.widgetType?"feature":"response"),a().getNested(e,"widgetTemplate.name")&&(t=a().getNested(e,"widgetTemplate.name")),a().isString(e.widgetTemplate)&&(t=e.widgetTemplate),{json:e.widgetJson||null,widget_type:n,template_reference:a().getNested(e,"widgetTemplate.template_reference")||null,template_name:t}):null}},{key:"_getRegionId",value:function(){var e=this._parseWidgetDataParam();if(e&&e.regionId){var t=parseInt(e.regionId);return a().isNumber(t)?t:null}return null}},{key:"_getContentSearch",value:function(){var e=null;try{var t=JSON.parse(this.props.route.params.query);t&&t.contentSearch&&(e=t.contentSearch)}catch(e){}return e}},{key:"_handleChangeRouteToItemList",value:function(){if(!this.itemEdit.moduleMethods.safeToUnload()&&!window.confirm(this.context.i18n.get("backWithUnsavedChangesItem")))return S.resolve(!1);var e=this.itemEdit.getData(),t=a().cloneDeep(e.itemData.current.item),n=$q(e.itemData.current.widgetInstances);return n&&(t.display_content=n),t.saved=e.itemState.flags.isSaved,this.props.createNavigateViaBackboneRouter({methodName:"navigateBackToItemList",methodArgs:[t,!0]}),S.resolve(!0)}},{key:"_getRouteData",value:function(){var e=this.props.route.params,t=e.tab||null;return Jq(Jq({},!0===this._isItemSettings()?{settingsTab:t,showItemSettings:!0,showWorkflowSettings:!1}:!0===this._isWorkflow()?{showItemSettings:!1,showWorkflowSettings:!0}:{widgetReference:e.widgetReference||null,widgetData:this._getWidgetData(),addRegionNodeId:this._getRegionId(),settingsTab:t,mode:this._getMode(),showItemSettings:!1,showWorkflowSettings:!1,contentSearch:this._getContentSearch()}),this._getRouteDataItemFields())}},{key:"_getRouteDataItemFields",value:function(){var e,t,n=this.props.route.params.itemReference;try{t=JSON.parse(n)}catch(e){}return a().isObject(t)||(e=n),{itemReference:e,itemJson:t}}},{key:"componentDidUpdate",value:function(e){this.props.fromModule||a().isEqual(this.props.route,e.route)||this.itemEdit.setRouteData(this._getRouteData())}},{key:"render",value:function(){return zt.createElement(Wq,{initialRouteData:this.initialRouteData,initOptions:zq(this.props.app.initOptionsModel),onChangeRoute:this._handleChangeRoute,ref:this._setRef})}}])&&Xq(t.prototype,n),r&&Xq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);aU.contextTypes={app:jn().object,i18n:jn().object};const sU=Ln((function(e){return{fromModule:a().getNested(e,"ui.navigate.fromModule")||!1}}),{navigate:yh,createNavigateViaBackboneRouter:Mb})(aU);function lU(e){return(lU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pU(e,t){return(pU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yU(e);if(t){var i=yU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mU(this,n)}}function mU(e,t){if(t&&("object"===lU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gU(e)}function gU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yU(e){return(yU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pU(e,t)}(o,e);var t,n,r,i=hU(o);function o(){var e;dU(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vU(gU(e=i.call.apply(i,[this].concat(n))),"isSaved",!1),vU(gU(e),"isActivityToBeSaved",!1),vU(gU(e),"routePathPrefix","activities/:reference/items/:idOrReference/"),vU(gU(e),"initialRouteData",e._getRouteData()),vU(gU(e),"_getCurrentActivityLocation",(function(){return"activities/".concat(window.encodeURIComponent(e.props.activityReference))})),vU(gU(e),"_handleChangeState",(function(t){if(!e.isSaved&&t.itemState.flags.isSaved||e.isActivityToBeSaved&&t.itemState.flags.widgetsReady){var n=a().cloneDeep(t.itemData.current.item),r=t.itemBankSettings&&t.itemBankSettings.organisation_id,i=$q(t.itemData.current.widgetInstances);i&&(n.display_content=i),a().isEmpty(t.itemData.current.item.item_id)||(e.props.updateItem({item:n,organisationId:r}),e.props.saveActivity()),e.isActivityToBeSaved=!1}e.isSaved=t.itemState.flags.isSaved;var o=em(t);e.props.itemSaveable!==o&&e.props.setItemSaveable(o)})),e}return t=o,(n=[{key:"componentDidMount",value:function(){this._validateInitOptions()}},{key:"_getCurrentLocationPrefix",value:function(e){return this._getCurrentActivityLocation()+"/"+"items/".concat(window.encodeURIComponent(e))}},{key:"_handleChangeRouteToItemList",value:function(){if(!this.itemEdit.moduleMethods.safeToUnload()&&!window.confirm(this.context.i18n.get("activityEditItemUnsavedChangesAlert")))return S.resolve(!1);var e={currentLocation:this._getCurrentActivityLocation(),previousLocation:this.props.route.url};return this.props.navigate(e),S.resolve(!0)}},{key:"_isItemSettings",value:function(){var e=this;return["items/:idOrReference/settings/:tab","items/:idOrReference/settings"].some((function(t){return e.props.route.path.endsWith(t)}))}},{key:"_getRouteDataItemFields",value:function(){var e=this.props.itemsInActivity,t=a().getNested(this.props,"route.params.idOrReference"),n=a().getNested(this.props,"route.params.reference"),r={};if(void 0===t)return{itemReference:"new"};var i=uU(e.filter((function(e){return e.id===t}))||[],1)[0];if(i)r={itemReference:i.reference,organisationId:i.organisation_id};else{var o=e.filter((function(e){return e.reference===t}));0===o.length?(r={itemReference:t},this.isActivityToBeSaved=!0):(r={itemReference:o[0].reference,organisationId:o[0].organisation_id},o.length>1&&console.error(['This activity (with reference "'.concat(n,'") contains items ')+'from multiple item banks with the same reference "'.concat(t,'"'),"In a multi item bank setup, when navigating to an item, you must use the item id instead of the reference unless the item references in the activity are unique"].join(". ")))}return r}},{key:"_validateInitOptions",value:function(){var e=JSON.parse(this.context.app.component.comms.requestData);void 0!==a().getNested(e,"config.item_edit.item.duplicate")&&console.warn("Setting the init option config.item_edit.item.duplicate has no effect in Item edit within Activity edit."),void 0!==a().getNested(e,"config.item_edit.item.save.persist")&&console.warn("Setting the init option config.item_edit.item.save.persist has no effect in Item edit within Activity edit.")}},{key:"shouldComponentUpdate",value:function(e){return!a().isEqual(this.props.route,e.route)}},{key:"render",value:function(){var e=Gq(this.context.app.initOptionsModel);a().setNested(e,"config.item_edit.item.duplicate.show",!1),a().setNested(e,"config.item_edit.item.save.persist",!0);var t=this.context.i18n.get("activityEditItemAddedOnSave"),n=this.context.i18n.get("activityEditItemAddSuccess");return zt.createElement(Wq,{initOptions:e,initialRouteData:this.initialRouteData,onChangeRoute:this._handleChangeRoute,onChangeState:this._handleChangeState,newItemAddedOnSaveHeaderMessage:t,newItemAddSuccessHeaderMessage:n,ref:this._setRef})}}])&&fU(t.prototype,n),r&&fU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(aU);bU.contextTypes={app:jn().object,i18n:jn().object};const _U=Ln((function(e){return{route:e.ui.navigate.route,activityReference:a().getNested(e.activityEdit,"activityJson.reference"),itemsInActivity:a().getNested(e.activityEdit,"activityJson.data.items")||[],fromModule:a().getNested(e,"ui.navigate.fromModule")||!1,itemSaveable:a().getNested(e,"activityEdit.itemSaveable")}}),{navigate:yh,saveActivity:Om,updateItem:function(e){return{type:dp,data:e}},setItemSaveable:function(e){return{type:Cf,data:e}}})(bU);const wU=function(e,t,n,r,i){return function(o,s,l){var u=l.component.comms,c=a().getNested(i,"activityData.items")||[],d=a().getNested(i,"activityData.adaptive"),f=a().isJsonObject(d),p=i.renderingType,h=e.props.initOptions.organisation_id||e.props.initOptions.consumerSettings.default_organisation_id;if(c.length||f||$p(i.activityData)){var m={config:{assessApiVersion:"latest",questionsApiVersion:"v2",title:"test"}};a().isObject(i.activityData.config)&&!a().isArray(i.activityData.config)&&(m.config=a().cloneDeep(i.activityData.config));var g={config:{configuration:{onsubmit_redirect_url:!1}},type:"local_practice",user_id:"authorapi",session_id:a().uuid(),rendering_type:p,organisation_id:h,activity_id:i.activityId},y=a().deepExtend({},m,i.activityData,g),v={request:y};o({type:df});var b=Ld.loadLearnosityApi("items"),_=u.request({url:"/itemsactivity",data:{request:JSON.stringify(y)}});S.all([b,_]).then((function(i){var l=i[1];l&&(v.security=l.data),a().isObject(e.itemsApp)&&(a().isFunction(e.itemsApp.reset)&&e.itemsApp.reset(),e.itemsApp=null);var u={metricsContext:r.getContext(),readyListener:function(){"assess"===p&&e.itemsApp.on("test:finished:submit",(function(){e.itemsApp.reset(),o({type:lf}),e.itemsApp=window.LearnosityItems.init(v,u)})),a().isFunction(t)&&t()},errorListener:function(t){if(e.itemsApp&&a().isFunction(e.itemsApp.reset))try{e.itemsApp.reset(),e.itemsApp=null}catch(e){}n(t)}};"preview"===s().activityEdit.mode&&(e.itemsApp="assess"===p?window.LearnosityItems.init(v,u):window.LearnosityItems.init(v,".learnosity-items-container",u)),o(function(e){return{type:cf,data:e}}({}))}))}}};function EU(e){return(EU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xU(e,t){return(xU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=CU(e);if(t){var i=CU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return TU(this,n)}}function TU(e,t){if(t&&("object"===EU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return OU(e)}function OU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CU(e){return(CU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PU="ui.tab.activityPreviewModeTabBar.activeTabName",MU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xU(e,t)}(o,e);var t,n,r,i=kU(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),AU(OU(t=i.call(this,e)),"_unmounting",!1),AU(OU(t),"tryReset",(function(){try{t.itemsApp.reset(),t.itemsApp=null}catch(e){}})),AU(OU(t),"onReady",(function(){t._unmounting||t.setState({itemsAppReady:!0})})),AU(OU(t),"onError",(function(e){t._unmounting||t.context.app.errorUtil.handle(e)}));var n=a().getNested(e.initOptions,"config.activity_edit.activity_preview.item.reference.show");return t.state={disable_tabs:!0,showItemRefs:n,itemsAppReady:!1,error:!1},t}return t=o,(n=[{key:"shouldComponentUpdate",value:function(e,t){this.tabChanged=a().getNested(e,PU)!==a().getNested(this.props,PU);var n=t.disable_tabs!==this.state.disable_tabs,r=t.currentItemRef!==this.state.currentItemRef,i=a().getNested(e.activity,"data.items"),o=a().getNested(this.props.activity,"data.items"),s=this.props.renderKey!==e.renderKey;return this.itemsChanged=JSON.stringify(i)!==JSON.stringify(o),this.tabChanged||this.itemsChanged||n||r||s}},{key:"componentDidMount",value:function(){this.renderItemsApi()}},{key:"componentWillUnmount",value:function(){this._unmounting=!0,this.reset()}},{key:"componentDidUpdate",value:function(){(this.tabChanged||this.itemsChanged)&&this.renderItemsApi()}},{key:"handleItemChanged",value:function(e){var t,n=this.props.activity.data.items;a().isNumber(e)&&a().isObject(n[e])&&(t=n[e].reference),this.setCurrentItemRef(t)}},{key:"reset",value:function(){this.itemsApp&&(this.state.itemsAppReady&&a().isFunction(this.itemsApp.reset)?this.tryReset():this.itemsApp.once("test:ready",this.tryReset))}},{key:"setCurrentItemRef",value:function(e){var t=e;if(!a().isString(t)&&this.itemsApp){var n=this.itemsApp.getCurrentItem();t=n?n.reference:""}var r=a().cloneDeep(this.state);r.currentItemRef=t,this.setState(r)}},{key:"registerAssessListeners",value:function(){var e,t,n=this,r=this.props.activity.data.config.navigation;this.itemsApp.assessApp().on({"item:changed":this.handleItemChanged.bind(this),"test:panel:hidden":this.setCurrentItemRef.bind(this),"test:panel:shown":function(){n.setCurrentItemRef("")}}),r.show_intro?(e=(t=r.intro_item)||this.context.i18n.get("defaultIntroItem"),a().isObject(t)&&(e=t.reference)):e=(t=this.itemsApp.getCurrentItem())?t.reference:"",this.setCurrentItemRef(e)}},{key:"renderItemsApi",value:function(){var e,t=this,n=this;this.setTabDisableState(!0),e="inline"===a().getNested(this.props,PU)?"inline":"assess",this.setCurrentItemRef(""),this.props.initItemsApi(this,(function(){n.setTabDisableState(!1),n.state.showItemRefs&&"assess"===e&&n.registerAssessListeners(),t.onReady()}),this.onError,this.context.metricsUtil,{activityData:this.props.activity.data,renderingType:e,activityId:this.props.activityId}),this.setState({itemsAppReady:!1})}},{key:"setTabDisableState",value:function(e){if(this.state.disable_tabs!==e){var t={disable_tabs:e};this.setState(a().deepExtend({},this.state,t))}}},{key:"prepareInlineRender",value:function(){var e=this.props.activity.data.items,t=this.context.i18n,n=[];return a().isArray(e)&&a().each(e,(function(e,r){var i=e,o=e;a().isObject(e)&&(i=e.reference,o=e.id);var s=r+1+") "+t.get("itemReference")+": "+i,l=zt.createElement("div",{key:r,className:"lrn-inline-item-wrapper"},zt.createElement("div",{className:"lrn-inline-item"},this.state.showItemRefs?zt.createElement("ul",{className:"lrn-list-view-item lrn-list-unstyled"},zt.createElement("li",{className:"lrn-activity-info-label"},s)):"",zt.createElement("span",{className:"learnosity-item","data-reference":o})));n.push(l)}),this),n}},{key:"render",value:function(){var e=this.context.i18n,t=[],n="";"inline"===a().getNested(this.props,PU)&&(t=this.prepareInlineRender());var r=a().size(a().getNested(this.props,"activity.data.items")||[])>0,i=a().isJsonObject(this.props.activity.data.adaptive),o=r,s=o||i||$p(a().getNested(this.props,"activity.data")),l=this.state.disable_tabs?"disable-tabs":"";if(this.props.activity.data.items){var u=this.state.currentItemRef,c=a().findIndex(this.props.activity.data.items,(function(e){return e.reference===u})),d=c>-1?"".concat(c+1,")"):"";n="".concat(d," ").concat(e.get("itemReference")," : ").concat(u)}return s?zt.createElement("div",{key:this.props.renderKey},zt.createElement("div",{className:l},zt.createElement(XE,null,zt.createElement(QE,{tabId:"assess",tabLabel:"Player",tabIcon:"lrn-i-player",tooltip:e.get("activityPlayerTab"),defaultTab:"assess",tabBarId:"activityPreviewModeTabBar"},e.get("activityPlayerTab")),o&&zt.createElement(QE,{tabId:"inline",tabLabel:"Inline",tabIcon:"lrn-i-list",tooltip:e.get("activityInlineTab"),defaultTab:"assess",tabBarId:"activityPreviewModeTabBar"},e.get("activityInlineTab")))),zt.createElement(lS,null,zt.createElement(sS,{tabId:"assess",defaultTab:"assess",tabBarId:"activityPreviewModeTabBar"},zt.createElement("div",{className:"lrn-activity-item-ref-wrapper"},this.state.showItemRefs&&this.state.currentItemRef?zt.createElement("ul",{className:"lrn-list-view-item lrn-list-unstyled"},zt.createElement("li",{className:"lrn-activity-info-label"},n)):zt.createElement("div",null)),zt.createElement("div",{id:"learnosity_assess"})),o&&zt.createElement(sS,{tabId:"inline",defaultTab:"assess",tabBarId:"activityPreviewModeTabBar"},zt.createElement("div",{className:"learnosity-items-container"},t)))):zt.createElement("div",{className:"lrn-empty-activity-wrapper"},zt.createElement("span",null,e.get("emptyActivityMessage")),zt.createElement("div",{className:"lrn-activity-view-empty-img"}))}}])&&SU(t.prototype,n),r&&SU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);MU.contextTypes={i18n:jn().object,metricsUtil:jn().object,app:jn().object};const DU=Ln((function(e){var t=a().isEmpty(e.activityEdit.activityJson)?{data:{items:[]}}:e.activityEdit.activityJson,n=a().cloneDeep(t),r=e.activityEdit.activityJson.activity_id;if(n.data.items){var i=e.activityEdit.items[r],o=a().where(i,{isRestrictedOrMissing:!0}),s=a().pluck(o,"reference");n.data.items=a().filter(n.data.items,(function(e){return-1===s.indexOf(e.reference)}))}return{activity:n,ui:e.ui,activityId:r,initOptions:e.initOptions,renderKey:e.activityEdit.renderKey}}),(function(e){return{initItemsApi:function(t,n,r,i,o){e(wU(t,n,r,i,o))}}}))(MU);var RU="CONFIRM_ACTIVITY_DUPLICATE_EXTERNAL_SETTINGS",LU="CONFIRM_ACTIVITY_DUPLICATE_NEW_POLL_TIME",NU="CONFIRM_ACTIVITY_DUPLICATE_RESET";const IU=function(){return{type:NU}};const jU=function(e){return{type:rp,data:e}};function BU(e){return(BU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YU(e,t){return(YU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function HU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qU(e);if(t){var i=qU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VU(this,n)}}function VU(e,t){if(t&&("object"===BU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qU(e){return(qU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YU(e,t)}(o,e);var t,n,r,i=HU(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state=t.getDefaultState(),t}return t=o,(n=[{key:"getDefaultState",value:function(){return{displayFullContentConfirm:!1,deepCopyActivity:!1,duplicatePassages:!1,deepCopyInProcess:!1,newActivityReference:null,forceDeepCopy:!1}}},{key:"componentDidMount",value:function(){this.props.activityLoaded&&this.props.currentRoute.params.reference===this.props.activityJson.reference||this.props.fetchActivity({payload:{reference:this.props.currentRoute.params.reference}}),this.setState(this.getDefaultState()),this.props.resetDuplicateActivity(),a().isJsonObject(this.props.externalSettings)&&this.confirmDuplicate()}},{key:"toggleDuplicatePassagesOption",value:function(){this.props.toggleDuplicatePassages()}},{key:"onExit",value:function(){this.props.setActivityEditMode("edit")}},{key:"confirmDuplicate",value:function(){var e=this.state.deepCopyActivity,t=this.state.duplicatePassages,n=a().uuid(),r=!1;if(a().isJsonObject(this.props.externalSettings)&&(r=this.props.externalSettings.deepCopy,Gp(this.props.activityJson.data,this.props.organisationId)&&(r=!1,e=!1),t=this.props.externalSettings.duplicateSharedPassages,this.props.externalSettings.reference&&(n=this.props.externalSettings.reference)),this.props.resetDuplicateActivity(),r||this.props.deepCopyEnabled&&e)return this.props.deepCopyActivity({newReference:n,duplicatePassages:t}),void this.setState(a().deepExtend({},this.state,{deepCopyInProcess:!0,newReference:n,forceDeepCopy:r}));var i=a().cloneDeep(this.props.activityJson),o=this.props.activityJson.activity_id;i.reference=n,i.activity_id=-1,this.props.updateActivityJson(i),this.props.setActivityEditMode("edit"),this.props.setDuplicateActivityLoading(),this.props.navigate({currentLocation:"activities/"+window.encodeURIComponent(n),previousLocation:this.props.currentRoute.url}),this.props.saveActivity({duplicatedActivityId:o})}},{key:"toggleDeepCopyActivity",value:function(){this.setState(a().deepExtend({},this.state,{deepCopyActivity:!this.state.deepCopyActivity,displayFullContentConfirm:!this.state.displayFullContentConfirm}))}},{key:"toggleDuplicatePassages",value:function(){this.state.displayFullContentConfirm&&this.setState(a().deepExtend({},this.state,{duplicatePassages:!this.state.duplicatePassages}))}},{key:"navigateToDuplicatedActivity",value:function(){this.props.setActivityEditMode("edit"),this.props.navigate({currentLocation:"activities/"+window.encodeURIComponent(this.state.newReference),previousLocation:this.props.currentRoute.url})}},{key:"renderCommonHeader",value:function(){return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-message-overlay-activity-duplicate-img"}))}},{key:"renderDuplicatePassageConfirm",value:function(){if(!this.props.duplicateSharedPassages)return null;var e=!this.state.displayFullContentConfirm;return zt.createElement("div",null,this.renderCheckBox("duplicateActivityDuplicateSharedPassages",this.context.i18n.get("duplicateActivityDuplicateSharedPassages"),this.toggleDuplicatePassages.bind(this),this.state.duplicatePassages,e))}},{key:"renderDuplicateSuccess",value:function(){var e=this.context.i18n;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-duplicate-success-wrapper lrn-activity-round-border"},zt.createElement("div",{className:"lrn-author-duplicate-tick-wrapper"},zt.createElement("span",{className:"lrn-i-tick"}))),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(e.get("duplicateActivitySuccess")),this.renderMessage(e.get("duplicateActivitySuccessMessage")),zt.createElement("div",{className:"lrn-author-message-overlay-message"},zt.createElement("span",null,zt.createElement("strong",null,this.state.newReference)))),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"duplicateActivityBack",!1),this.renderButton(a().bind(this.navigateToDuplicatedActivity,this),"duplicateActivityEdit")))}},{key:"renderDuplicateError",value:function(){var e=this.context.i18n;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-duplicate-error-wrapper lrn-activity-round-border"},zt.createElement("div",{className:"lrn-author-duplicate-tick-wrapper"},zt.createElement("span",{className:"lrn-i-cross"}))),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(e.get("duplicateActivityError")),this.renderMessage(e.get("duplicateActivityErrorMessage"))),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.confirmDuplicate,this),"duplicateActivityErrorTryAgain")))}},{key:"renderDeepCopyInProcess",value:function(){if(this.props.duplicateSuccess)return this.renderDuplicateSuccess();if(this.props.duplicateError)return this.renderDuplicateError();var e=this.context.i18n,t=e.get("duplicateActivityTimerMessageJustNow");return this.props.secondsSinceLastJobPoll>0&&(t=e.get("duplicateActivityTimerMessage").replace(/%amount%/,this.props.secondsSinceLastJobPoll)),zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-activity-loading-wrapper lrn-activity-round-border"},zt.createElement("div",{className:"lrn-author-loading-panel"},zt.createElement("div",{className:"lrn-spinner"},zt.createElement("div",{className:"lrn-bounce1"}),zt.createElement("div",{className:"lrn-bounce2"}),zt.createElement("div",{className:"lrn-bounce3"})))),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(t),this.renderMessage(e.get("duplicateActivityReferenceMessage")),zt.createElement("div",{className:"lrn-author-message-overlay-message"},zt.createElement("span",null,zt.createElement("strong",null,this.state.newReference)))),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"duplicateActivityBack",!1)))}},{key:"renderDeepOrShallowChoice",value:function(){if(this.state.deepCopyInProcess)return this.renderDeepCopyInProcess();var e=this.context.i18n;return zt.createElement("div",null,this.renderCommonHeader(),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderSubTitle(e.get("duplicateActivityShareCreateSubTitle")),this.renderMessage(e.get("duplicateActivityDeepMessage1")),this.renderMessage(e.get("duplicateActivityDeepMessage2")),this.renderMessage(e.get("duplicateActivityDeepMessage3")),this.renderCheckBox("duplicateActivityItemsAndWidgets",this.context.i18n.get("duplicateActivityItemsAndWidgets"),this.toggleDeepCopyActivity.bind(this),this.state.deepCopyActivity),this.renderDuplicatePassageConfirm()),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"duplicateActivityCancel",!1),this.renderButton(a().bind(this.confirmDuplicate,this),"duplicateActivityConfirmButton")))}},{key:"renderShallowCopyMessage",value:function(){var e=this.context.i18n,t="duplicateActivityMainMessage";return this.props.deepCopyEnabled&&(t="duplicateActivityMultiIbkWarning"),zt.createElement("div",null,this.renderCommonHeader(),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},zt.createElement("div",{className:"lrn-author-message-overlay-with-btm-margin"},this.renderMessage(e.get(t),"lrn-text-weight-500")),this.renderMessage(e.get("duplicateActivityShallowMessage"))),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"duplicateActivityCancel",!1),this.renderButton(a().bind(this.confirmDuplicate,this),"duplicateActivityConfirmButton")))}},{key:"renderNewActivityWarning",value:function(){var e=this.context.i18n;return zt.createElement("div",null,this.renderCommonHeader(),zt.createElement("div",{className:"lrn-author-message-overlay-content-wrapper"},this.renderMessage(e.get("duplicateActivityNewActivityWarning"))),zt.createElement("div",{className:"lrn-author-message-overlay-buttons-wrapper"},this.renderButton(a().bind(this.onExit,this),"duplicateActivityCloseButton")))}},{key:"renderContent",value:function(){return this.props.activityLoaded?-1===this.props.activityJson.activity_id?this.renderNewActivityWarning():this.state.forceDeepCopy||this.props.deepCopyEnabled&&!Gp(this.props.activityJson.data,this.props.organisationId)?this.renderDeepOrShallowChoice():this.renderShallowCopyMessage():null}},{key:"getTitle",value:function(){return this.context.i18n.get("duplicateActivityMessageTitle")}}])&&FU(t.prototype,n),r&&FU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(hY);UU.contextTypes={i18n:jn().object};const WU=function(e){return Ln((function(e){return{activityJson:e.activityEdit.activityJson,activityLoaded:e.activityEdit.activityLoaded,currentRoute:e.ui.navigate.route,deepCopyEnabled:e.confirmActivityDuplicate.deepCopy,duplicateSharedPassages:e.confirmActivityDuplicate.duplicateSharedPassages,duplicateSuccess:e.confirmActivityDuplicate.duplicateSuccess,duplicateError:e.confirmActivityDuplicate.duplicateError,organisationId:e.activityEdit.organisationId,secondsSinceLastJobPoll:e.confirmActivityDuplicate.secondsSinceLastJobPoll,externalSettings:a().getNested(e,"confirmActivityDuplicate.externalSettings")}}),{deepCopyActivity:_h,fetchActivity:nh,navigate:yh,resetDuplicateActivity:IU,saveActivity:Om,setActivityEditMode:Cm,updateActivityJson:jU,setDuplicateActivityLoading:vh})(e)}(UU);const zU=function(){return{type:Gd}};function GU(e){return(GU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZU(e,t){return(ZU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=XU(e);if(t){var i=XU(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return QU(this,n)}}function QU(e,t){if(t&&("object"===GU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function XU(e){return(XU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZU(e,t)}(o,e);var t,n,r,i=JU(o);function o(){return $U(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n;return zt.createElement("button",{onClick:this.onBack.bind(this),type:"button",className:"lrn-btn lrn-btn-default lrn-btn-icon-left","data-authorapi-selector":"back"},zt.createElement("span",{className:"lrn-i-previous"}),e.get("backButton"))}},{key:"onBack",value:function(){var e=this.context.i18n.get("backWithUnsavedChangesActivity");this.props.isDirty&&!window.confirm(e)||(this.context.app.component.dataManager.itemCollections={},this.props.clearSearchStates(),this.props.backToActivityList(this.props.activityJson))}}])&&KU(t.prototype,n),r&&KU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);eW.contextTypes={app:jn().object,i18n:jn().object};const tW=Ln((function(e){return{isDirty:a().getNested(e,"activityEdit.isDirty")||!1,activityJson:a().getNested(e,"activityEdit.activityJson")||{}}}),(function(e){return{backToActivityList:function(t){e(Mb({methodName:"navigateBackToActivityList",methodArgs:[t]}))},clearSearchStates:function(){e(zU())}}}))(eW),nW=function(){return{type:Xf,data:{}}},rW=function(){return{type:ep}},iW=["loading","play","reviewScreenFilters","fullyAttempted","partiallyAttempted","filterResults"],oW=[{id:"buttons",sectionName:"activityEditButtonsSectionLabel",entries:{}},{id:"messaging",sectionName:"activityEditMessagingSectionLabel",entries:{}},{id:"title",sectionName:"activityEditTitleSectionLabel",entries:{}},{id:"tooltip",sectionName:"activityEditToolTipSectionLabel",entries:{}},{id:"other",sectionName:"activityEditOtherSectionLabel",entries:{}}],aW={actionsave:"buttons",actionsubmit:"buttons",apply:"buttons",assetUploadRetry:"buttons",confirm:"buttons",continue:"buttons",close:"buttons",decline:"buttons",fullScreen:"buttons",calculator:"buttons",notepad:"buttons",accessibility:"buttons",answerMasking:"buttons",goBack:"buttons",yes:"buttons",no:"buttons",idleCancelButton:"buttons",idleQuitButton:"buttons",warningOnChangeCancelButton:"buttons",warningOnChangeContinueButton:"buttons",warningOnSectionChangeCancelButton:"buttons",warningOnSectionChangeContinueButton:"buttons",nextButtonLabel:"buttons",ruler:"buttons",protractor:"buttons",imagetool:"buttons",menuRegionToggle:"buttons",menuRegionClose:"buttons",pause:"buttons",resume:"buttons",previousButtonLabel:"buttons",quit:"buttons",retry:"buttons",saveButtonLabel:"buttons",save:"buttons",startTest:"buttons",actionDownloadAsFile:"buttons",actionSendEmail:"buttons",actionAccessRawData:"buttons",submit:"buttons",submitButtonLabel:"buttons",flagItem:"buttons",unflagItem:"buttons",resources:"buttons",saveQuit:"buttons",submitQuit:"buttons",exitDiscard:"buttons",collapseMenu:"buttons",expandMenu:"buttons",reviewScreen:"buttons",submitFailedDownloadAsFile:"buttons",submitFailedSendEmail:"buttons",allQuestionsAttempted:"messaging",assessmentTimeExpired:"messaging",assetUploadError:"messaging",assetUploadErrorDetail:"messaging",assetUploadErrorRetryDetail:"messaging",assetUploadErrorDeclineDetail:"messaging",elapsedTime:"messaging",allowedTime:"messaging",countDownRemainingTime:"messaging",timeNearlyExpired:"messaging",remainingReadingTime:"messaging",remainingReadingTimeWarning:"messaging",error:"messaging",introItemMessage:"messaging",invalidQuestionsMessage:"messaging",reachedLastItem:"messaging",idleSaveSuccess:"messaging",idleSaveError:"messaging",idleWarningMsg:"messaging",idleHeadingMsg:"messaging",warningOnChangeHeadingMsg:"messaging",warningOnChangeBodyMsg:"messaging",warningOnSectionChangeHeadingMsg:"messaging",warningOnSectionChangeBodyMsg:"messaging",fetchingErrorHeadingMsg:"messaging",fetchingErrorBodyMsg:"messaging",saveInProgress:"messaging",saveWarningMsg:"messaging",submitWarningMsg:"messaging",submitFailed:"messaging",submitFailedWithOnlyAccessRawDataOption:"messaging",submitFailedWithOtherOptions:"messaging",actionAccessRawDataDescription:"messaging",submitCriteriaNotMet:"messaging",submitInProgress:"messaging",submitting:"messaging",submitComplete:"messaging",successfullySubmitted:"messaging",testPausedProctor:"messaging",timeoutMsg:"messaging",tryAgain:"messaging",unavailable:"messaging",errorOccurredWhile:"messaging",contactAdministrator:"messaging",tocElementHelp:"messaging",itemNestedHelp:"messaging",discardInProgress:"messaging",discardError:"messaging",discardWarningMsg:"messaging",saveQuitConfirmationMsg:"messaging",submitQuitConfirmationMsg:"messaging",exitDiscardConfirmationMsg:"messaging",lockMsg:"messaging",paletteInstructions:"messaging",fontSizeInstructions:"messaging",zoomInstructions:"messaging",zoomIn:"messaging",zoomOut:"messaging",returnZoom:"messaging",toZoomIn:"messaging",toZoomOut:"messaging",toReturnZoom:"messaging",plus:"messaging",minus:"messaging",zero:"messaging",zoomInResult:"messaging",zoomOutResult:"messaging",returnZoomResult:"messaging",itemCountOf:"messaging",submittingInProgress:"messaging",savingInProgress:"messaging",saveTestSuccessfully:"messaging",saveTestSuccessfullyPrompt:"messaging",submitCriteriaLessThanRequiredAttemptedQuestionsWarning:"messaging",submitCriteriaRequiredEnoughCorrectQuestionsWarning:"messaging",submitActionConfirmation:"messaging",submitWithUnattemptedQuestion:"messaging",submitWithUnattemptedQuestions:"messaging",isAllResponsesAttempted:"messaging",copyToClipboard:"messaging",saveErrorTitle:"messaging",existingResponsesTitle:"messaging",existingResponsesMessage:"messaging",existingResponsesDetail:"messaging",acknowledgement:"title",configuration:"title",question:"title",saveError:"title",saving:"title",saved:"title",item:"title",page:"title",test:"title",testPaused:"title",regionHeaderTopLeft:"title",regionHeaderTopRight:"title",regionHeaderRight:"title",regionHeaderBottomRight:"title",regionHeaderBottomLeft:"title",regionHeaderBottom:"title",regionHeaderItems:"title",regionHeaderMenu:"title",questionHeader:"title",singleQuestionHeader:"title",administrationPanel:"title",hour:"title",minute:"title",seconds:"title",password:"title",wrongPasswordMsg:"title",proctorModalTitle:"title",accessibilityPanel:"title",colorScheme:"title",fontSize:"title",zoom:"title",blackOnWhite:"title",purpleOnGreen:"title",yellowOnBlue:"title",blackOnRose:"title",greyOnGrey:"title",whiteOnBlack:"title",customColorPalette:"title",small:"title",normal:"title",large:"title",xlarge:"title",xxlarge:"title",command:"title",control:"title",timerHour:"title",timerHours:"title",timerMinute:"title",timerMinutes:"title",timerSecond:"title",timerSeconds:"title",timerSeparator:"title",notAttempted:"tooltip",viewed:"tooltip",flagged:"tooltip"},sW=function(e){return{type:Ff,data:e}};function lW(e){return(lW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cW(e,t){return(cW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hW(e);if(t){var i=hW(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fW(this,n)}}function fW(e,t){if(t&&("object"===lW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pW(e)}function pW(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hW(e){return(hW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cW(e,t)}(o,e);var t,n,r,i=dW(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).boundHandleWidth=t._handleWidth.bind(pW(t)),t.state={currentLabels:{},labelsReady:!1,isDirty:!1,activeSections:[],useSplitRow:!0,resetConfirm:!1,showDiscardOverlay:!1},t.minWidthForSplitRow=720,t.boundOnApply=a().bind(t._onApply,pW(t)),t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("resize",this.boundHandleWidth),this._handleWidth()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.boundHandleWidth)}},{key:"_handleWidth",value:function(){var e=!0;pD()<this.minWidthForSplitRow&&(e=!1),e!==this.state.useSplitRow&&this.setState(a().deepExtend({},this.state,{useSplitRow:e}))}},{key:"componentDidMount",value:function(){var e=this;kd.getAssessApiLabels().then((function(t){e.defaultLabels=t,e.setState({labelsReady:!0,currentLabels:a().extend({},t,e.props.labelBundle)})}))}},{key:"_onApply",value:function(){var e=this,t={};a().each(this.state.currentLabels,(function(n,r){n!==e.defaultLabels[r]&&(t[r]=n)})),this.props.setLabels(t,this.props.returnMode),this.props.returnToPreviousMode(this.props.returnMode)}},{key:"resetLabels",value:function(){this.setState(a().deepExtend({},this.state,{resetConfirm:!0}))}},{key:"_labelsDifferentFromDefault",value:function(){var e=this;return!!a().find(this.state.currentLabels,(function(t,n){return t!==e.defaultLabels[n]}))}},{key:"resetLabelsConfirm",value:function(){var e=this.state.isDirty;e||(e=this._labelsDifferentFromDefault()),this.setState(a().deepExtend({},this.state,{resetConfirm:!1,currentLabels:a().cloneDeep(this.defaultLabels),isDirty:e}))}},{key:"getLabelSectionMap",value:function(){var e=a().cloneDeep(oW),t=aW;return a().each(this.state.currentLabels,(function(n,r){if(!a().isObject(n)&&!a().contains(iW,r)){var i=t[r]?t[r]:"other";a().findWhere(e,{id:i}).entries[r]=n}})),e}},{key:"updateValue",value:function(e,t){var n=this.state.currentLabels;n[e]=t,this.setState(a().deepExtend({},this.state,{currentLabels:n,isDirty:!0}))}},{key:"renderSectionContent",value:function(e){var t=this,n=[],r=e.entries,i=[],o=2,s="lrn-half";return!1===this.state.useSplitRow&&(o=1,s="lrn-full"),a().each(r,(function(e,r){i.push(zt.createElement("div",{className:s,key:r},zt.createElement("div",null,zt.createElement("label",{htmlFor:r},r)),zt.createElement("input",{type:"text",value:e,name:r,size:"40",onChange:function(e){t.updateValue(r,e.target.value)}}))),i.length>0&&i.length%o==0&&(n.push(zt.createElement("div",{className:"lrn-row",key:r+"wrapper"},i)),i=[])})),i.length%o==1&&n.push(zt.createElement("div",{className:"lrn-row",key:"last"},i)),n}},{key:"toggleSectionState",value:function(e){var t=this.state.activeSections;a().contains(t,e)?t=a().without(t,e):t.push(e),this.setState(a().deepExtend({},this.state,{activeSections:t}))}},{key:"renderLabelSections",value:function(){var e=this,t=this.getLabelSectionMap(),n=this.context.i18n,r=[];return a().each(t,(function(t){if(!a().isEmpty(t.entries)){var i="";a().contains(e.state.activeSections,t.id)&&(i=" lrn-active"),r.push(zt.createElement("div",{className:"section-wrapper"+i,key:t.id},zt.createElement("div",{className:"section-header"+i,onClick:function(){e.toggleSectionState(t.id)}},zt.createElement("span",{className:"lrn-i-arrow-small"+i}),zt.createElement("span",null,n.get(t.sectionName))),zt.createElement("div",{className:"section-content"+i},e.renderSectionContent(t))))}})),r}},{key:"_confirmDiscard",value:function(){this.state.isDirty?this.setState(a().deepExtend({},this.state,{showDiscardOverlay:!0})):this.props.returnToPreviousMode(this.props.returnMode)}},{key:"_hideDiscardOverlay",value:function(){this.setState(a().deepExtend({},this.state,{showDiscardOverlay:!1}))}},{key:"_discardChanges",value:function(){this.props.returnToPreviousMode(this.props.returnMode)}},{key:"_renderDiscardOverlay",value:function(){var e=this,t=this.context.i18n;return zt.createElement("div",{className:"lrn-author-activity-labels"},zt.createElement(nD,{title:t.get("settingsConfirmDiscard"),confirmDiscardMessage:t.get("settingsConfirmDiscardYes"),confirmDiscardFunction:function(){return e._discardChanges()},undoDiscardMessage:t.get("settingsConfirmDiscardNo"),undoDiscardFunction:function(){return e._hideDiscardOverlay()}}))}},{key:"render",value:function(){var e=this;if(!1===this.state.labelsReady)return null;if(this.state.showDiscardOverlay)return this._renderDiscardOverlay();var t=this.context.i18n,n={root:a().classNames("lrn-author-ui","lrn-author-ui-no-preview"),labelSettings:"lrn-author-activity-labels"};return zt.createElement("div",{className:n.root},zt.createElement("section",{className:n.labelSettings},zt.createElement("div",{className:"lrn-author-activity-labels-header"},zt.createElement("div",{className:"lrn-author-activity-labels-title"},t.get("activityCustomizeLabels")),zt.createElement(cs,{onClick:function(){return e._confirmDiscard()},className:"lrn-author-activity-labels-close-btn",authorApiSelector:"activity-labels-exit-button"})),zt.createElement("div",{className:"content-wrapper"},this.renderLabelSections(),zt.createElement("div",{className:"reset-button-wrapper"},this.state.resetConfirm?zt.createElement(Ar,{text:t.get("activityResetLabelsConfirm"),onClick:function(){return e.resetLabelsConfirm()},size:"small",extraClasses:"lrn-btn-sec lrn-btn-confirm",dataAuthorApiSelector:"lrn-author-reset-labels-confirm"}):zt.createElement(Ar,{disabled:!this._labelsDifferentFromDefault(),text:t.get("activityResetLabels"),onClick:function(){return e.resetLabels()},size:"small",extraClasses:"lrn-btn-primary lrn-btn-cancel",dataAuthorApiSelector:"lrn-author-reset-labels"}))),zt.createElement(GM,{onApply:this.boundOnApply,onExit:function(){return e._confirmDiscard()},isDirty:this.state.isDirty,classPrefix:"lrn-author-activity-labels"})))}}])&&uW(t.prototype,n),r&&uW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);mW.contextTypes={i18n:jn().object};const gW=function(e){return Ln((function(e,t){var n=a().getNested(e,"activityEdit.activityJson.data.config.labelBundle")||{};return"player_templates"===t.returnMode&&(n=a().getNested(e,"activityEdit.templateBuilder.labelBundle")||{}),{labelBundle:n}}),(function(e){return{returnToPreviousMode:function(t){e(Cm(t))},setLabels:function(t,n){e("player_templates"===n?sW(t):Uv.createUpdateActivity({field:"data.config.labelBundle",value:t,doNotExtend:!0}))}}}))(e)}(mW);var yW=__webpack_require__(36981),vW=__webpack_require__(65291),bW=__webpack_require__(94693),_W=__webpack_require__(68106),wW=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,bW.Z)(e,t)}))},EW=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}(0,yW.Z)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,vW.Z)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&wW(e,r),i&&wW(e,i),o&&wW(e,o)},n.render=function(){var e=this.props,t=(e.classNames,(0,nn.Z)(e,["classNames"]));return zt.createElement(_W.ZP,(0,tn.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(zt.Component);EW.defaultProps={classNames:""},EW.propTypes={};const SW=EW;function xW(e){return(xW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TW(e,t){return(TW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=AW(e);if(t){var i=AW(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return CW(this,n)}}function CW(e,t){if(t&&("object"===xW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function AW(e){return(AW=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const PW=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TW(e,t)}(o,e);var t,n,r,i=OW(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e)}return t=o,(n=[{key:"render",value:function(){var e="lrn-author-widget-drag-handle";return this.props.extraClasses&&(e+=" "+this.props.extraClasses),zt.createElement("div",{className:e,"data-authorapi-selector":"config-drag-handle"},zt.createElement("span",{className:"lrn-i-move"}))}}])&&kW(t.prototype,n),r&&kW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);var MW=__webpack_require__(45966),DW=__webpack_require__.n(MW),RW=__webpack_require__(10045),LW=__webpack_require__.n(RW),NW=new(DW())({id:"lrn-author-i-sticky-note-plus",use:"lrn-author-i-sticky-note-plus-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-sticky-note-plus">\n  <path d="M15 20.5c-.3 0-.5-.2-.5-.5v-3.3h-3.2c-.3 0-.5-.2-.5-.5v-2c0-.3.2-.5.5-.5h3.2v-3.2c0-.3.2-.5.5-.5h2c.3 0 .5.2.5.5v3.2h3.2c.3 0 .5.2.5.5v2c0 .3-.2.5-.5.5h-3.2V20c0 .3-.2.5-.5.5h-2z" />\n  <path fill-rule="evenodd" d="M3 2h26c.6 0 1 .4 1.1 1v18c0 .3-.2.6-.4.8l-7.8 7.8c-.3.3-.6.4-.9.4H3c-.6 0-1-.4-1-1V3c0-.6.4-1 1-1zm20 20c-.6 0-1 .4-1 1v3l4-4h-3zm-1.5-3H27V5H5v22h14v-5.5c0-1.4 1.1-2.5 2.5-2.5z" clip-rule="evenodd" />\n</symbol>'});LW().add(NW);const IW=NW;var jW=new(DW())({id:"lrn-author-i-sticky-note-show-hide",use:"lrn-author-i-sticky-note-show-hide-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-sticky-note-show-hide">\n  <path fill-rule="evenodd" d="M29 2H3c-.6 0-1 .4-1 1v26c0 .6.4 1 1 1h18c.3 0 .6-.1.9-.4l7.8-7.8c.2-.2.4-.5.4-.8V3c-.1-.6-.5-1-1.1-1zm-7 21c0-.6.4-1 1-1h3l-4 4v-3zm5-4h-5.5c-1.4 0-2.5 1.1-2.5 2.5V27H5V5h22v14z" clip-rule="evenodd" />\n  <path d="M22.86 14.714C22.72 14.571 19.78 10 16 10c-3.78 0-6.72 4.572-6.86 4.714L9 15l.14.286C9.28 15.429 12.22 20 16 20c3.78 0 6.72-4.572 6.86-4.714L23 15l-.14-.286zM16 17c-1.12 0-1.96-.858-1.96-2s.84-2 1.96-2 1.96.858 1.96 2c0 1.143-.84 2-1.96 2z" />\n</symbol>'});LW().add(jW);const BW=jW;var FW=new(DW())({id:"lrn-author-i-pencil-show-hide",use:"lrn-author-i-pencil-show-hide-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-pencil-show-hide">\n  <path d="M29.472 8.556l-5.88-6.019c-.717-.716-1.72-.716-2.437 0L18 5.69 26.317 14c.219-.291.66-.666 1.164-1.094 1.477-1.254 3.488-2.962 1.99-4.351z" />\n  <path fill-rule="evenodd" d="M24 21c-2.454.123-4.17 2.456-4.786 3.295a3.389 3.389 0 01-.214.277c2.714 4.57 7.286 4.57 10 0l-.063-.097C28.502 23.801 26.697 21 24 21zm0 5c-1.857 0-1.857-2.858 0-2.858 1.856-.143 1.856 2.857 0 2.857zM4.091 19.944L16.916 7 25 15.072 12.036 28.016l-9.339 1.949c-.28.139-.697-.14-.697-.697l2.091-9.324zm.697 5.705l1.533 1.53 4.043-.973-4.6-4.593-.976 4.036z" clip-rule="evenodd" />\n</symbol>'});LW().add(FW);const YW=FW;var HW=new(DW())({id:"lrn-author-i-pencil",use:"lrn-author-i-pencil-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-pencil">\n  <path fill-rule="evenodd" d="M21.342 2.517l-3.096 3.1 8.18 8.153 3.058-3.1c.688-.69.688-1.646 0-2.335l-5.772-5.818c-.726-.69-1.682-.69-2.37 0zM5.708 21.656l-.803 3.98 1.49 1.532 3.976-.843-4.663-4.67zm-1.759-1.761L2 29.273c0 .497.306.727.535.727.038 0 .077 0 .115-.038l9.442-1.914 12.996-12.976-8.18-8.153L3.949 19.895z" clip-rule="evenodd" />\n</symbol>'});LW().add(HW);const VW=HW;var qW=new(DW())({id:"lrn-author-i-notepad",use:"lrn-author-i-notepad-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-notepad">\n  <path fill-rule="evenodd" d="M3.75 6.955V26.01c0 1.974 1.645 3.573 3.675 3.573h17.15c2.03 0 3.675-1.6 3.675-3.573V6.955c0-1.973-1.543-3.913-3.573-3.913h-1.531V2.19C23.146 1.533 22.8 1 22.125 1c-.677 0-1.02.533-1.02 1.191v.85H17.02v-1.02C17.02 1.363 16.676 1 16 1c-.677 0-1.02.363-1.02 1.02v1.022h-4.084V2.02C10.896 1.363 10.55 1 9.875 1c-.677 0-1.02.363-1.02 1.02v1.022H7.322c-2.03 0-3.573 1.94-3.573 3.913zm6.125 1.19c.634 0 1.02-.393 1.02-1.02v-1.02h4.084v1.02c0 .627.387 1.02 1.021 1.02.634 0 1.02-.393 1.02-1.02v-1.02h4.084v1.02c0 .626.387 1.02 1.021 1.02.634 0 1.02-.394 1.02-1.02v-1.02h.894c.634 0 1.148.507 1.148 1.134v18.148c0 .626-.514 1.134-1.148 1.134H7.961a1.141 1.141 0 01-1.149-1.134V7.239c0-.627.515-1.135 1.149-1.135h.893v1.021c0 .627.387 1.02 1.021 1.02zm0 8.423c0-.705.457-1.276 1.02-1.276h10.21c.563 0 1.02.571 1.02 1.276 0 .704-.457 1.276-1.02 1.276h-10.21c-.563 0-1.02-.572-1.02-1.276zm1.02 3.828c-.563 0-1.02.571-1.02 1.276 0 .705.457 1.276 1.02 1.276h10.21c.563 0 1.02-.571 1.02-1.276 0-.705-.457-1.276-1.02-1.276h-10.21zm11.23-8.933c0 .705-.457 1.277-1.02 1.277h-10.21c-.563 0-1.02-.572-1.02-1.277 0-.704.457-1.275 1.02-1.275h10.21c.563 0 1.02.57 1.02 1.275z" clip-rule="evenodd" />\n</symbol>'});LW().add(qW);const UW=qW;var WW=new(DW())({id:"lrn-author-i-toc-vertical",use:"lrn-author-i-toc-vertical-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-toc-vertical">\n  <path fill-rule="evenodd" d="M11 5a1 1 0 011-1h16a1 1 0 011 1v22a1 1 0 01-1 1H12a1 1 0 01-1-1V5zm15 6H14V7h12v4zm0 10H14v4h12v-4z" clip-rule="evenodd" />\n  <path d="M9 10a1 1 0 00-1-1H4a1 1 0 00-1 1v12a1 1 0 001 1h4a1 1 0 001-1V10z" />\n  <path fill-rule="evenodd" d="M11 27a1 1 0 001 1h16a1 1 0 001-1V5a1 1 0 00-1-1H12a1 1 0 00-1 1v22zM8.5 9.134A.995.995 0 008 9H4a1 1 0 00-1 1v12a1 1 0 001 1h4a1 1 0 001-1V10a1 1 0 00-.5-.866zM14 25v-4h12v4H14zm12-14V7H14v4h12z" clip-rule="evenodd" />\n</symbol>'});LW().add(WW);const zW=WW;var GW=new(DW())({id:"lrn-author-i-stacked-blocks",use:"lrn-author-i-stacked-blocks-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-stacked-blocks">\n  <path d="M7 3a1 1 0 00-1 1v10a1 1 0 001 1h18a1 1 0 001-1V4a1 1 0 00-1-1H7zM5 17a1 1 0 00-1 1v10a1 1 0 001 1h22a1 1 0 001-1V18a1 1 0 00-1-1H5z" />\n</symbol>'});LW().add(GW);const $W=GW;var KW=new(DW())({id:"lrn-author-i-toc-horizontal",use:"lrn-author-i-toc-horizontal-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-toc-horizontal">\n  <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h24a1 1 0 011 1v14a1 1 0 01-1 1H4a1 1 0 01-1-1V5zm3 12V7h5v10H6zm15 0V7h5v10h-5z" clip-rule="evenodd" />\n  <path d="M9 23a1 1 0 011-1h12a1 1 0 011 1v4a1 1 0 01-1 1H10a1 1 0 01-1-1v-4z" />\n</symbol>'});LW().add(KW);const ZW=KW;var JW=new(DW())({id:"lrn-author-i-progress-bar",use:"lrn-author-i-progress-bar-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-progress-bar">\n  <path fill-rule="evenodd" d="M3 9a1 1 0 00-1 1v12a1 1 0 001 1h26a1 1 0 001-1V10a1 1 0 00-1-1H3zm19 11v-8h5v8h-5z" clip-rule="evenodd" />\n</symbol>'});LW().add(JW);const QW=JW;var XW=new(DW())({id:"lrn-author-i-clock",use:"lrn-author-i-clock-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-clock">\n  <path fill-rule="evenodd" d="M16 27c6.075 0 11-4.925 11-11S22.075 5 16 5 5 9.925 5 16s4.925 11 11 11zm0 3c7.732 0 14-6.268 14-14S23.732 2 16 2 2 8.268 2 16s6.268 14 14 14z" clip-rule="evenodd" />\n  <path fill-rule="evenodd" d="M14.5 8h3v6.5H23v3h-8.5V8z" clip-rule="evenodd" />\n</symbol>'});LW().add(XW);const ez=XW;var tz=new(DW())({id:"lrn-author-i-dropdown",use:"lrn-author-i-dropdown-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-dropdown">\n  <path d="M19 14l3 4 3-4h-6z" />\n  <path fill-rule="evenodd" d="M2 9a1 1 0 011-1h26a1 1 0 011 1v14a1 1 0 01-1 1H3a1 1 0 01-1-1V9zm3 12V11h22v10H5z" clip-rule="evenodd" />\n</symbol>'});LW().add(tz);const nz=tz;var rz=new(DW())({id:"lrn-author-i-title",use:"lrn-author-i-title-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-title">\n  <path d="M7 7l3 .022V14H7a1 1 0 00-1 1v1.093a1 1 0 001 1h8a1 1 0 001-1V15a1 1 0 00-1-1h-2V7.022L16 7v1a1 1 0 001 1h1a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v3a1 1 0 001 1h1a1 1 0 001-1V7zM5 23a1 1 0 01-1-1v-1a1 1 0 011-1h22a1 1 0 011 1v1a1 1 0 01-1 1H5zM5 28a1 1 0 01-1-1v-1a1 1 0 011-1h22a1 1 0 011 1v1a1 1 0 01-1 1H5z" />\n</symbol>'});LW().add(rz);const iz=rz;var oz=new(DW())({id:"lrn-author-i-fullscreen",use:"lrn-author-i-fullscreen-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-fullscreen">\n  <path d="M28 13V5a1 1 0 00-1-1h-8v4h5v5h4zM4 27v-8h4v5h5v4H5a1 1 0 01-1-1zM28 27v-8h-4v5h-5v4h8a1 1 0 001-1zM4 5v8h4V8h5V4H5a1 1 0 00-1 1z" />\n</symbol>'});LW().add(oz);const az=oz;var sz=new(DW())({id:"lrn-author-i-divider-horizontal",use:"lrn-author-i-divider-horizontal-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-divider-horizontal">\n  <path d="M4 5a1 1 0 011-1h22a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 21a1 1 0 011-1h22a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM2.5 15a.5.5 0 00-.5.5v2a.5.5 0 00.5.5h27a.5.5 0 00.5-.5v-2a.5.5 0 00-.5-.5h-27z" />\n</symbol>'});LW().add(sz);const lz=sz;var uz=new(DW())({id:"lrn-author-i-progress-counter",use:"lrn-author-i-progress-counter-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-progress-counter">\n  <path fill-rule="evenodd" d="M2 13a1 1 0 011-1h5a1 1 0 011 1v1h4v-1a1 1 0 011-1h5a1 1 0 011 1v1h3v-1a1 1 0 011-1h5a1 1 0 011 1v5a1 1 0 01-1 1h-5a1 1 0 01-1-1v-1h-3v1a1 1 0 01-1 1h-5a1 1 0 01-1-1v-1H9v1a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm22.75.75h3.5v3.5h-3.5v-3.5z" clip-rule="evenodd" />\n</symbol>'});LW().add(uz);const cz=uz;var dz=new(DW())({id:"lrn-author-i-button-arrow-right",use:"lrn-author-i-button-arrow-right-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-button-arrow-right">\n  <path fill-rule="evenodd" d="M3 6a1 1 0 00-1 1v18a1 1 0 001 1h6a1 1 0 001-1V7a1 1 0 00-1-1H3zm10 1a1 1 0 011-1h15a1 1 0 011 1v18a1 1 0 01-1 1H14a1 1 0 01-1-1V7zm6.778 3L26 16l-6.221 6L18 20.285 22.445 16 18 11.714 19.778 10z" clip-rule="evenodd" />\n</symbol>'});LW().add(dz);var fz={stickynote_add_button:IW,stickynote_visibility_button:BW,drawing_visibility_button:YW,drawing_mode_button:VW,notepad_button:UW,verticaltoc_element:zW,vertical_element:$W,progress_element:QW,horizontaltoc_element:ZW,timer_element:ez,reading_timer_element:ez,dropdown_element:nz,title_element:iz,fullscreen_button:az,separator_element:lz,itemcount_element:cz,slider_element:dz},pz=__webpack_require__(47792);function hz(e){return(hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yz(e,t){return(yz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_z(e);if(t){var i=_z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bz(this,n)}}function bz(e,t){if(t&&("object"===hz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _z(e){return(_z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yz(e,t)}(o,e);var t,n,r,i=vz(o);function o(){return mz(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.elements[this.props.elKey].icon||{},t=this.props.baseClasses,n=null;if("font"===e.type)t+=" "+e.className;else if("svg"===e.type){var r=fz[this.props.elKey];n=zt.createElement(pz.Z,{icon:r})}return zt.createElement("button",{className:t,"data-authorapi-selector":"element-icon",disabled:this.props.isDisabled,tabIndex:"-1"},n)}}])&&gz(t.prototype,n),r&&gz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const Ez=Ln((function(e){return{elements:e.activityEdit.templateBuilder.elements}}))(wz),Sz=function(e){return{type:up,data:e}},xz=function(e){return{type:Vf,data:e}},kz=function(e){return{type:zf,data:e}},Tz=function(e){return{type:mp,data:e}},Oz=function(e){return{type:Wf,data:e}};function Cz(e,t,n){var r=a().cloneDeep(e);return a().each(r,(function(e){a().each(e,(function(e){e.type===t&&(e[n.name]=n.value)}))})),r}function Az(e,t,n){return Pz(e,t)[n]}function Pz(e,t){var n={type:t};return a().each(e,(function(e){a().each(e,(function(e){e.type===t&&(n=a().clone(e))}))})),n}function Mz(e,t,n){var r=a().cloneDeep(e),i=a().cloneDeep(t),o=n.element.type,s=function(e,t,n){var r=n.element.type,i=n.dropIndex;return i=function(e,t,n,r){var i=e.indexOf(t);i>-1&&(e.splice(i,1),"unassigned-elements"===n&&i<r&&r--);return r}(t,r,n.dropRegionKey,i),i=function(e,t,n,r){return a().each(e,(function(e,i){var o=a().findIndex(e,(function(e){return e.type===t}));o>-1&&(e.splice(o,1),n===i&&o<r&&r--)})),r}(e,r,n.dropRegionKey,i)}(r,i,n);return"unassigned-elements"===n.dropRegionKey?function(e,t,n){e.splice(t,0,n)}(i,s,o):function(e,t,n){if(e[n.dropRegionKey]){e[n.dropRegionKey].splice(t,0,n.element)}else e[n.dropRegionKey]=[n.element]}(r,s,n),"slider_element"!==o&&"vertical_element"!==o||function(e,t,n){var r=Dz(e);if(function(e){return-1===e.sliderIndex&&-1===e.verticalIndex}(r))return void function(e,t,n){var r=t.indexOf("slider_element");if(-1===r)return;e.items=[{type:"slider_element",scrollable_option:!!n.scrollable_option}],t.splice(r,1)}(e,t,n);(function(e){return e.sliderIndex>-1&&e.verticalIndex>-1})(r)&&function(e,t,n,r){var i="slider_element"===n.type?"vertical_element":"slider_element";t.push(i),"vertical_element"===i?e.items.splice(r.verticalIndex,1):e.items.splice(r.sliderIndex,1)}(e,t,n,r)}(r,i,n.element),{newRegionConfig:r,newUnassignedElementsOrder:i}}function Dz(e){var t=-1,n=-1;return a().isArray(e.items)&&(t=e.items.findIndex((function(e){return"slider_element"===e.type})),n=e.items.findIndex((function(e){return"vertical_element"===e.type}))),{sliderIndex:t,verticalIndex:n}}function Rz(e){for(var t=e.regionNames.length,n=0;n<t&&("menu"===e.regionNames[n]||!Fz(e.elementDefinitions,e.selectedElementData.selectedElementKey,e.regionNames[n]));n++);return e.regionNames[n]}function Lz(e,t){var n=e.regionConfig[t];return a().isArray(n)&&n.length?n[0].type:""}function Nz(e){for(var t=e.regionNames.length-1;t>=0&&("menu"===e.regionNames[t]||!Fz(e.elementDefinitions,e.selectedElementData.selectedElementKey,e.regionNames[t]));t--);return e.regionNames[t]}function Iz(e,t){var n=e.regionConfig[t];return a().isArray(n)&&n.length?n[n.length-1].type:""}function jz(e){return!!a().getNested(e,"selectedElementData.isSelected")}function Bz(e){return!!a().getNested(e,"draggedElementData.isDragging")}function Fz(e,t,n){var r=e[t],i=!0;return"unassigned-elements"!==n&&(a().isArray(r.regions_whitelist)?i=r.regions_whitelist.indexOf(n)>=0:"items"===n&&(i=!1)),i}function Yz(e){return(Yz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hz(){return(Hz=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uz(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wz(e,t){return(Wz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$z(e);if(t){var i=$z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gz(this,n)}}function Gz(e,t){if(t&&("object"===Yz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $z(e){return($z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wz(e,t)}(o,e);var t,n,r,i=zz(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={isHovered:!1,showExpandedOptionView:!1},n}return t=o,(n=[{key:"render",value:function(){return"placeholder_el"===this.props.elKey?this.getPlaceholderElement():zt.createElement(SW,{in:!0,timeout:1e3,classNames:"lrn-author-tb-element-display",appear:this.props.showAnimationOnAppear},zt.createElement("div",this.getComponentProperties(),zt.createElement(PW,{extraClasses:this.getDragHandleClasses()}),this.getIcon(),this.getOptionsButtonAndMenu(),this.getDropzoneIndicator()))}},{key:"getComponentProperties",value:function(){var e=this,t=this.getHoverListeners();return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vz(Object(n),!0).forEach((function(t){qz(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vz(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.getElementClasses(),key:this.props.elKey,"data-el-key":this.props.elKey,"data-el-origin":"unassigned-elements",tabIndex:this.getTabIndex(),"data-el-index":this.props.index,onClick:function(t){return e.clickHandler(t)},onKeyDown:function(t){return e.keyDownHandler(t)},onMouseDown:function(){return e.setFocus()},ref:function(t){return e.elementRef=t}},t)}},{key:"getHoverListeners",value:function(){var e=this,t={};return this.props.isAssigned||(t={onMouseEnter:function(){return e.toggleHover(!0)},onMouseLeave:function(){return e.toggleHover(!1)}}),t}},{key:"getElementClasses",value:function(){return a().classNames({"lrn-author-tb-element":!0,"lrn-author-tb-element-hover":this.shouldElementHaveHoverClass(),"lrn-author-tb-element-unassigned-selected":jz(this.props)&&!this.props.isAssigned&&this.props.selectedElementData.selectedElementKey===this.props.elKey})}},{key:"shouldElementHaveHoverClass",value:function(){return!(this.props.isAssigned&&!this.props.element.options||this.isDraggedElementUnassigned()||this.isSelectedElementUnassigned())}},{key:"getDragHandleClasses",value:function(){return a().classNames({"lrn-author-tb-element-drag-handle":!this.props.isAssigned,"lrn-author-tb-element-drag-handle-invisible":this.props.isAssigned})}},{key:"getIcon",value:function(){var e=a().classNames({"lrn-author-tb-element-icon-wrapper":!0,"lrn-author-tb-element-icon-wrapper-enabled":!this.props.isAssigned});return zt.createElement("div",{className:e},zt.createElement(Ez,{elKey:this.props.elKey,isDisabled:this.props.isAssigned,baseClasses:"lrn-btn lrn-btn-default lrn-btn-lg lrn_btn lrn-author-tb-element-icon"}))}},{key:"getOptionsButtonAndMenu",value:function(){var e=this.props.element;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-flex lrn-author-tb-element-name-wrapper"},zt.createElement("span",{className:"lrn-author-tb-element-name"},e.name),this.props.isAssigned&&e.options&&this.getOptionsButton()),zt.createElement("div",{className:"lrn-author-tb-element-desc"},e.description),this.state.showExpandedOptionView&&this.getOptionsMenu(e.options))}},{key:"getOptionsButton",value:function(){var e=this,t=this.state.showExpandedOptionView?this.context.i18n.get("hideCustomizeRegionSettings"):this.context.i18n.get("showCustomizeRegionSettings");return zt.createElement("span",{onClick:function(){return e.toggleElementOptionsView()},onKeyDown:function(t){t.keyCode!==Fa&&t.keyCode!==ja||(t.preventDefault(),e.toggleElementOptionsView())},className:"lrn-author-btn lrn-btn-primary lrn-btn-small",tabIndex:this.getTabIndexForToggleButtons(),"data-authorapi-selector":"expand-options-btn"},t)}},{key:"getOptionsMenu",value:function(e){return zt.createElement("div",{className:"lrn-author-tb-element-options"},this.getOptionRows(e))}},{key:"getOptionRows",value:function(e){var t=this,n=[];return a().each(e,(function(e,r){n.push(t.getSingleOptionRow(e,r))})),n}},{key:"getSingleOptionRow",value:function(e,t){var n=this,r=Az(this.props.regionConfig,this.props.elKey,t),i=a().isBoolean(r)?r:e.default;return zt.createElement("div",{className:"lrn-author-tb-element-option-row",key:e.name},zt.createElement("div",{className:"lrn-author-tb-element-option-name"},zt.createElement(Bl,{value:e.name,checked:i,onChange:function(){return n.toggleOption(t)},selector:"templateOptionCheckbox"})),zt.createElement("span",{className:"lrn-author-tb-element-option-desc"},e.description))}},{key:"toggleElementOptionsView",value:function(){var e=!this.state.showExpandedOptionView,t=a().extend({},this.state,{showExpandedOptionView:e});this.setState(t)}},{key:"getTabIndex",value:function(){return this.props.isAssigned||this.isSelectedElementUnassigned()?-1:0}},{key:"getTabIndexForToggleButtons",value:function(){return jz(this.props)?-1:0}},{key:"setFocus",value:function(){this.elementRef&&this.elementRef.focus()}},{key:"clickHandler",value:function(e){this.isDragInProcess()||"placeholder_el"===this.props.elKey&&!jz(this.props)||this.props.isAssigned||(this.setFocus(),this.handleElementSelect(e))}},{key:"isSelectedElementUnassigned",value:function(){return jz(this.props)&&a().contains(this.props.unassignedElementsOrder,this.props.selectedElementData.selectedElementKey)}},{key:"keyDownHandler",value:function(e){this.isDragInProcess()||"placeholder_el"===this.props.elKey&&!jz(this.props)||this.props.isAssigned||"Enter"!==e.key||this.handleElementSelect(e)}},{key:"handleElementSelect",value:function(e){e.stopPropagation(),this.isSelectedElementUnassigned()?this.props.updateSelectedElementData({}):jz(this.props)?this.moveSelectedElement():this.selectThisElement()}},{key:"moveSelectedElement",value:function(){var e=this.props.selectedElementData.selectedElementKey,t=Mz(this.props.regionConfig,this.props.unassignedElementsOrder,{element:Pz(this.props.regionConfig,e),dropRegionKey:"unassigned-elements",dropIndex:this.props.index});this.props.updateTBRegionConfig(t.newRegionConfig),this.props.updateTBUnassignedElementsOrder(t.newUnassignedElementsOrder),this.props.updateSelectedElementData({})}},{key:"selectThisElement",value:function(){this.props.updateSelectedElementData({isSelected:!0,selectedElementKey:this.props.elKey}),this.props.showAnimationOnAppear||this.props.updateTBShowAnimationOnAppear(!0)}},{key:"getPlaceholderElement",value:function(){var e=this,t=this.getHoverListeners(),n=a().classNames({"lrn-author-tb-element":!0,"lrn-author-tb-element-unassigned-placeholder":!this.props.usePlaceholderForDrop}),r={},i=-1;return this.props.usePlaceholderForDrop&&(r={onClick:function(t){return e.clickHandler(t)},onKeyDown:function(t){return e.keyDownHandler(t)}},jz(this.props)&&(i=0)),zt.createElement("div",Hz({className:n,key:"placeholder_el","data-el-key":"placeholder_el",tabIndex:i,"data-el-index":this.props.index},t,r),this.getDropzoneIndicator())}},{key:"getDropzoneIndicator",value:function(){return this.shouldHideDropzoneIndicator()?null:zt.createElement("div",{className:"lrn-author-tb-unassigned-dropzone-wrapper"},zt.createElement("div",{className:"lrn-author-tb-unassigned-dropzone-left lrn-author-tb-unassigned-dropzone"}),zt.createElement("div",{className:"lrn-author-tb-unassigned-dropzone-line"}),zt.createElement("div",{className:"lrn-author-tb-unassigned-dropzone-right lrn-author-tb-unassigned-dropzone "}))}},{key:"isDragInProcess",value:function(){return a().isObject(this.props.draggedElementData)&&this.props.draggedElementData.isDragging}},{key:"shouldHideDropzoneIndicator",value:function(){return"placeholder_el"===this.props.elKey&&this.props.usePlaceholderForDrop||this.props.isAssigned||!this.isDragInProcess()||!this.state.isHovered||this.isDraggedElementUnassigned()}},{key:"isDraggedElementUnassigned",value:function(){return this.isDragInProcess()&&"unassigned-elements"===this.props.draggedElementData.draggedElementOrigin}},{key:"toggleOption",value:function(e){var t=Az(this.props.regionConfig,this.props.elKey,e);a().isUndefined(t)&&a().isObject(this.props.elements[this.props.elKey].options)&&a().isObject(this.props.elements[this.props.elKey].options[e])&&(t=this.props.elements[this.props.elKey].options[e].default);var n=Cz(this.props.regionConfig,this.props.elKey,{name:e,value:!t});this.props.updateTBRegionConfig(n)}},{key:"toggleHover",value:function(e){var t=a().extend({},this.state,{isHovered:e});e&&this.props.updateHoveredElementIndex(this.props.index),this.setState(t)}}])&&Uz(t.prototype,n),r&&Uz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);Kz.contextTypes={i18n:jn().object};const Zz=Ln((function(e){return{draggedElementData:e.activityEdit.templateBuilder.draggedElementData,showAnimationOnAppear:e.activityEdit.templateBuilder.showAnimationOnAppear,regionConfig:e.activityEdit.templateBuilder.regionConfig,selectedElementData:e.activityEdit.templateBuilder.selectedElementData,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder,regionDefinitions:e.activityEdit.templateBuilder.regionDefinitions,elements:e.activityEdit.templateBuilder.elements}}),{updateHoveredElementIndex:Sz,updateTBRegionConfig:xz,updateTBUnassignedElementsOrder:kz,updateSelectedElementData:Tz,updateTBShowAnimationOnAppear:Oz})(Kz),Jz=function(e){return{type:Lf,data:e}};function Qz(e){return(Qz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xz(e){return function(e){if(Array.isArray(e))return eG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nG(e,t){return(nG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oG(e);if(t){var i=oG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return iG(this,n)}}function iG(e,t){if(t&&("object"===Qz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function oG(e){return(oG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nG(e,t)}(o,e);var t,n,r,i=rG(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={elements:{},showLeftMenu:!0};var r=n.getAssignedElements(),s=a().without.apply(a(),[a().keys(n.props.elements)].concat(Xz(r)));return n.props.updateTBUnassignedElementsOrder(s),n}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.updateTBReadyForDrag({panel:"left",value:!0})}},{key:"componentDidUpdate",value:function(e){this.shouldCloseLeftPanel(e)&&this.toggleLeftPanel()}},{key:"render",value:function(){var e=this.state,t=a().classNames({"lrn-author-tb-left-panel":!0,"lrn-author-tb-left-panel-slider":this.props.isCollapsable,"lrn-author-tb-left-panel-slider-active":this.props.isCollapsable&&e.showLeftMenu});return zt.createElement("div",{className:t},this.buildLeftPanel(),this.props.isCollapsable&&this.buildLeftPanelToggler())}},{key:"buildLeftPanel",value:function(){var e=[],t=this.getAssignedElements();return this.addPanelHeader(e),this.addUnassignedElements(e),this.addAssignedElements(e,t),zt.createElement("div",{className:"lrn-author-tb-left-panel-elements"},e)}},{key:"buildLeftPanelToggler",value:function(){var e=this;return zt.createElement("div",{className:"lrn-author-tb-left-panel-toggler",onClick:function(){return e.toggleLeftPanel()}},zt.createElement("span",{className:"lrn-i-sharedpassage"}))}},{key:"addPanelHeader",value:function(e){e.push(zt.createElement("div",{className:"lrn-author-tb-left-panel-header lrn-author-tb-left-panel-first-header",key:"unassigned-header"},this.context.i18n.get("playerTemplateUnassignedHeading"),zt.createElement("div",{className:"lrn-author-tb-left-panel-description"},this.context.i18n.get("playerTemplateUnassignedDescription"))))}},{key:"addUnassignedElements",value:function(e){e.push(zt.createElement("div",{className:"lrn-author-tb-left-panel-unassigned-el-wrapper","data-region-id":"unassigned-elements",key:"unassigned-elements-wrapper"},this.getUnassignedElements()))}},{key:"addAssignedElements",value:function(e,t){var n=this;e.push(zt.createElement("div",{className:"lrn-author-tb-left-panel-divider",key:"divider"})),e.push(zt.createElement("div",{className:"lrn-author-tb-left-panel-header",key:"assigned-header"},this.context.i18n.get("playerTemplateAssignedHeading"))),t.forEach((function(t){return e.push(n.buildElement(t,!0))}))}},{key:"buildElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return zt.createElement(Zz,{element:this.props.elements[e],key:e,elKey:e,isAssigned:t,index:r,usePlaceholderForDrop:n})}},{key:"getAssignedElements",value:function(){var e=this,t=[],n=a().keys(this.props.elements);return a().each(this.props.regionNames,(function(r){a().pluck(e.props.regionConfig[r],"type").forEach((function(e){n.indexOf(e)>-1&&t.push(e)}))})),t}},{key:"getUnassignedElements",value:function(){var e=this;if(!a().isArray(this.props.unassignedElementsOrder))return[];var t=[],n=0===this.props.unassignedElementsOrder.length,r=["placeholder_el"].concat(this.props.unassignedElementsOrder);return a().each(r,(function(r,i){t.push(e.buildElement(r,!1,n,i))})),t}},{key:"shouldCloseLeftPanel",value:function(e){return""!==this.props.expandedRegion&&e.expandedRegion!==this.props.expandedRegion&&!0===this.state.showLeftMenu}},{key:"toggleLeftPanel",value:function(){this.setState(a().extend({},this.state,{showLeftMenu:!this.state.showLeftMenu}))}}])&&tG(t.prototype,n),r&&tG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);aG.contextTypes={i18n:jn().object};const sG=Ln((function(e){return{regionConfig:e.activityEdit.templateBuilder.regionConfig,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder,regionNames:e.activityEdit.templateBuilder.regionNames,elements:e.activityEdit.templateBuilder.elements,expandedRegion:e.activityEdit.templateBuilder.expandedRegion}}),{updateTBReadyForDrag:Jz,updateTBUnassignedElementsOrder:kz})(aG),lG=function(e){return{type:Bf,data:e}},uG=function(e){return{type:qf,data:e}},cG=function(e){return{type:jf,data:e}};function dG(e){return(dG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pG(e,t){return(pG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gG(e);if(t){var i=gG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mG(this,n)}}function mG(e,t){if(t&&("object"===dG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gG(e){return(gG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pG(e,t)}(o,e);var t,n,r,i=hG(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).LABELS={collapse:n.context.i18n.get("playerTemplateRegionCollapse"),empty:"("+n.context.i18n.get("playerTemplateRegionEmpty")+")",expand:n.context.i18n.get("playerTemplateRegionExpand")},n.state={regionEntered:!1},n}return t=o,(n=[{key:"componentDidUpdate",value:function(e){this.setFocusIfRequired(e),this.expandOrCollapseAutomatically()}},{key:"render",value:function(){return zt.createElement("div",this.getComponentProperties(),this.getDropNotAllowedIndicator(),this.getRegion())}},{key:"getComponentProperties",value:function(){var e=this,t=this.props.regionKey,n=this.getTabIndexForRegion(t),r={flexBasis:this.props.regionWidthBasis,display:""};return this.isRegionHidden()&&(r.display="none"),{className:this.getRegionWrapperClasses(),"data-region-id":t,style:r,tabIndex:n,onClick:function(t){return e.clickHandler(t)},onKeyDown:function(t){return e.keyDownHandler(t)},onMouseEnter:function(){return e.setSelectedAndHover()},onMouseLeave:function(){return e.unsetSelectedAndHover()},onFocus:function(){return e.setSelectedAndHover()},onBlur:function(){return e.unsetSelectedAndHover()},ref:function(t){return e.elementRef=t}}}},{key:"getRegion",value:function(){return zt.createElement("div",null)}},{key:"getRegionWrapperClasses",value:function(){return{}}},{key:"getLabelAndExpandButton",value:function(){return zt.createElement("div",{className:this.getRegionLabelClasses()},this.getRegionLabel(),this.getExpandToggle())}},{key:"getRegionLabelClasses",value:function(){return"lrn-author-tb-region-name"}},{key:"getRegionLabel",value:function(){var e=Ws(this.props.regionKey),t=this.context.i18n.get("playerTemplateRegion"+qs(e)),n=this.props.elements.length?"":this.LABELS.empty;return zt.createElement("span",null,t," ",n)}},{key:"getRegionClasses",value:function(){return a().classNames({"lrn-author-tb-region":!0,"lrn-author-tb-region-bordered":!this.props.isSingleRegionRow,"lrn-author-tb-faded":!!this.props.expandedRegion&&!this.isExpanded()})}},{key:"getExpandToggle",value:function(){var e=this,t=this.isExpanded()?this.LABELS.collapse:this.LABELS.expand;return this.shouldShowToggleSpan()?zt.createElement("span",{className:"lrn-author-tb-region-expand-toggler",onClick:function(){return e.toggleRegionExpansion()},onKeyDown:function(t){return e.keyDownRegionExpansionHandler(t)},tabIndex:this.getExpandTogglerTabIndex()},t):null}},{key:"shouldShowToggleSpan",value:function(){return this.getNumberOfVisibleElements()>1&&"items"!==this.props.regionKey}},{key:"getNumberOfVisibleElements",value:function(){var e=this.props.regionKey,t=0;return a().each(this.props.elements,(function(n){var r=n.key;"dropzone_placeholder"!==r&&r!=="dummy-".concat(e)&&t++})),t}},{key:"setFocus",value:function(){this.elementRef&&this.elementRef.focus()}},{key:"setFocusIfRequired",value:function(e){var t=this;jz(this.props)&&e.focusedRegion!==this.props.focusedRegion&&this.props.focusedRegion===this.props.regionKey&&(a().delay((function(){t.setFocus()})),this.props.updateTBRegionFocus(""))}},{key:"expandOrCollapseAutomatically",value:function(){if(Bz(this.props)||jz(this.props)){var e=this.getRegionDropState(this.props.regionKey);this.shouldExpandAutomatically(e)&&this.props.updateExpandedRegion(this.props.regionKey),this.shouldCollapseAutomatically(e)&&this.props.updateExpandedRegion("")}}},{key:"shouldExpandAutomatically",value:function(e){return!(!((this.props.regionConfig[this.props.regionKey]||[]).length>2&&e.regionHovered&&e.dropAllowed)||this.isExpanded())}},{key:"shouldCollapseAutomatically",value:function(e){return!e.regionHovered&&this.isExpanded()}},{key:"handleTabPress",value:function(e){var t={};t=!0===e.shiftKey?this.getElementAndRegionKeyForShiftTabPress():this.getElementAndRegionKeyForTabPress(),this.updateElementOrRegionFocus(t)}},{key:"getElementAndRegionKeyForShiftTabPress",value:function(){var e=Rz(this.props);return e===this.props.regionKey&&0===this.props.elements.length?{regionKey:e=Nz(this.props),elementKey:Iz(this.props,e)}:{}}},{key:"getElementAndRegionKeyForTabPress",value:function(){var e=Nz(this.props);return e===this.props.regionKey&&0===this.props.elements.length?{regionKey:e=Rz(this.props),elementKey:Lz(this.props,e)}:{}}},{key:"updateElementOrRegionFocus",value:function(e){e.elementKey?this.props.updateTBElementFocus(e.elementKey):e.regionKey&&this.props.updateTBRegionFocus(e.regionKey)}},{key:"getRegionDropState",value:function(e){var t,n=this.props,r=!0,i=!1;return Bz(n)?(t=n.draggedElementData.draggedElement.type,a().isObject(n.hoveredRegionData)&&n.hoveredRegionData.regionId===e&&(i=!0)):jz(n)&&(t=n.selectedElementData.selectedElementKey,i=this.state.regionEntered),t&&(r=Fz(n.elementDefinitions,t,e)),{regionHovered:i,dropAllowed:r}}},{key:"getDropNotAllowedIndicator",value:function(){return zt.createElement("div",{className:"lrn-author-tb-region-drop-not-allowed-desc"},zt.createElement("span",{className:"lrn-badge-round lrn-badge-round-unpublished"},zt.createElement("span",{className:"lrn-i-unpublished"})),zt.createElement("span",{className:"lrn-author-padding-xs"},this.context.i18n.get("playerTemplateDropNotAllowed")))}},{key:"getExpandTogglerTabIndex",value:function(){var e=this.getRegionDropState(this.props.regionKey);return this.isRegionHidden()||!e.dropAllowed||jz(this.props)?-1:0}},{key:"isDropForSelectedElementAllowed",value:function(e){return a().isObject(this.props.selectedElementData)&&this.props.selectedElementData.isSelected&&Fz(this.props.elementDefinitions,this.props.selectedElementData.selectedElementKey,e)}},{key:"getTabIndexForRegion",value:function(e){return this.isDropForSelectedElementAllowed(e)?0:-1}},{key:"handleSelectedElementDropInRegion",value:function(e){var t=this.props.regionKey,n=this.props.regionConfig;if(this.isDropForSelectedElementAllowed(t)){e.stopPropagation();var r=n[t]?n[t].length:0,i=this.props.selectedElementData.selectedElementKey,o=Mz(n,this.props.unassignedElementsOrder,{element:Pz(n,i),dropRegionKey:t,dropIndex:r});this.props.updateTBRegionConfig(o.newRegionConfig),this.props.updateTBUnassignedElementsOrder(o.newUnassignedElementsOrder),this.props.updateSelectedElementData({})}}},{key:"clickHandler",value:function(e){this.handleSelectedElementDropInRegion(e)}},{key:"keyDownHandler",value:function(e){jz(this.props)&&"Tab"===e.key?this.handleTabPress(e):"Enter"===e.key&&this.handleSelectedElementDropInRegion(e)}},{key:"keyDownRegionExpansionHandler",value:function(e){"Enter"===e.key&&this.toggleRegionExpansion()}},{key:"toggleRegionExpansion",value:function(){this.isExpanded()?this.props.updateExpandedRegion(""):this.props.updateExpandedRegion(this.props.regionKey)}},{key:"isExpanded",value:function(){return!!this.props.expandedRegion&&this.props.expandedRegion===this.props.regionKey}},{key:"isRegionHidden",value:function(){switch(this.props.regionKey){case"top-left":return"top-right"===this.props.expandedRegion;case"top-right":return"top-left"===this.props.expandedRegion;case"bottom-left":return"bottom-right"===this.props.expandedRegion;case"bottom-right":return"bottom-left"===this.props.expandedRegion;case"items":return"right"===this.props.expandedRegion;default:return!1}}},{key:"setSelectedAndHover",value:function(){this.setState({regionEntered:!0})}},{key:"unsetSelectedAndHover",value:function(){this.setState({regionEntered:!1})}}])&&fG(t.prototype,n),r&&fG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function vG(e){return Ln((function(e){return{regionConfig:e.activityEdit.templateBuilder.regionConfig,draggedElementData:e.activityEdit.templateBuilder.draggedElementData,selectedElementData:e.activityEdit.templateBuilder.selectedElementData,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder,hoveredRegionData:e.activityEdit.templateBuilder.hoveredRegionData,expandedRegion:e.activityEdit.templateBuilder.expandedRegion,focusedRegion:e.activityEdit.templateBuilder.focusedRegion,elementDefinitions:e.activityEdit.templateBuilder.elements,regionNames:e.activityEdit.templateBuilder.regionNames}}),{updateTBRegionConfig:xz,updateTBUnassignedElementsOrder:kz,updateSelectedElementData:Tz,updateExpandedRegion:lG,updateTBElementFocus:cG,updateTBRegionFocus:uG})(e)}yG.contextTypes={i18n:jn().object};vG(yG);function bG(e){return(bG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xG(e,t){return(xG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=OG(e);if(t){var i=OG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return TG(this,n)}}function TG(e,t){if(t&&("object"===bG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function OG(e){return(OG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const CG=vG(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xG(e,t)}(o,e);var t,n,r,i=kG(o);function o(){return EG(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"getRegion",value:function(){return zt.createElement("div",{className:this.getRegionClasses()},this.getLabelAndExpandButton(),zt.createElement("div",{className:this.getRegionElementsClasses(),"data-region-id":this.props.regionKey,style:this.getElementStyles()},this.props.elements))}},{key:"getRegionWrapperClasses",value:function(){var e=this.getRegionDropState(this.props.regionKey);return a().classNames({"lrn-author-tb-region-wrapper":!0,"lrn-author-tb-region-wrapper-left":!this.props.isSingleRegionRow,"lrn-author-tb-region-wrapper-empty":this.props.bothRegionsEmpty,"lrn-author-tb-region-drop-hovered":e.dropAllowed&&e.regionHovered,"lrn-author-tb-region-drop-not-allowed":!e.dropAllowed})}},{key:"getRegionElementsClasses",value:function(){return a().classNames({"lrn-author-tb-region-elements":!0,"lrn-author-tb-region-elements-column-dir":"items"===this.props.regionKey,"lrn-author-tb-region-overflow-x":this.isExpanded()})}},{key:"getElementStyles",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_G(Object(n),!0).forEach((function(t){wG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props.styles);return"items"===this.props.regionKey&&(e.position="relative",e.alignItems="flex-start",e.marginLeft="8px"),e}}])&&SG(t.prototype,n),r&&SG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(yG));function AG(e){return(AG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PG(Object(n),!0).forEach((function(t){DG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NG(e,t){return(NG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BG(e);if(t){var i=BG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jG(this,n)}}function jG(e,t){if(t&&("object"===AG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function BG(e){return(BG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NG(e,t)}(o,e);var t,n,r,i=IG(o);function o(){return RG(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"getRegion",value:function(){return zt.createElement("div",{className:this.getRegionClasses()},this.getLabelAndExpandButton(),this.getRegionContent())}},{key:"getRegionContent",value:function(){if("right"===this.props.regionKey)return this.getRightRegionContent();var e=this.props.flexDirection,t=MG(MG({},this.props.styles),{},{flexDirection:e});return zt.createElement("div",{className:this.getRegionElementsClasses(),"data-region-id":this.props.regionKey,style:t},this.props.elements)}},{key:"getRightRegionContent",value:function(){var e=this.props.flexDirection,t=MG(MG({},this.props.styles),{},{flexDirection:e}),n={key:"verticaltoc_element"},r=a().findWhere(this.props.elements,n),i=a().reject(this.props.elements,n);return t.flex="10 1 60%",zt.createElement("div",{className:"lrn-author-tb-region-split"},zt.createElement("div",{className:"lrn-author-tb-region-element-toc","data-region-id":this.props.regionKey},r),zt.createElement("div",{className:this.getRegionElementsClasses(),"data-region-id":this.props.regionKey,style:t},i))}},{key:"getRegionLabelClasses",value:function(){return a().classNames({"lrn-author-tb-region-name":!0,"lrn-author-tb-region-name-right":"right"!==this.props.regionKey})}},{key:"getRegionElementsClasses",value:function(){var e=this.props.regionKey;return a().classNames({"lrn-author-tb-region-elements":!0,"lrn-author-tb-region-overflow-x":this.isExpanded()&&"right"!==e,"lrn-author-tb-region-overflow-y":"right"===e})}},{key:"getRegionWrapperClasses",value:function(){var e=this.props.regionKey,t="right"===e&&this.props.expandedRegion===e,n=this.getRegionDropState(e);return a().classNames({"lrn-author-tb-region-wrapper":!0,"lrn-author-tb-region-wrapper-expanded":t,"lrn-author-tb-region-wrapper-right":!0,"lrn-author-tb-region-wrapper-empty":this.props.bothRegionsEmpty,"lrn-author-tb-region-drop-hovered":n.dropAllowed&&n.regionHovered,"lrn-author-tb-region-drop-not-allowed":!n.dropAllowed})}}])&&LG(t.prototype,n),r&&LG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(yG);FG.contextTypes={i18n:jn().object};const YG=vG(FG);function HG(e){return(HG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qG(e,t){return(qG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zG(e);if(t){var i=zG(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return WG(this,n)}}function WG(e,t){if(t&&("object"===HG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zG(e){return(zG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var GG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qG(e,t)}(o,e);var t,n,r,i=UG(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={addDisplayClass:!1},n}return t=o,(n=[{key:"componentDidUpdate",value:function(){this.props.isParentElementFocused!==this.state.addDisplayClass&&this.setState({addDisplayClass:this.props.isParentElementFocused})}},{key:"render",value:function(){return this.props.isAnimationComplete&&!Bz(this.props)&&!jz(this.props.selectedElementData)&&zt.createElement("button",{className:this.getDeleteButtonClasses(),onClick:this.onClick.bind(this),onBlur:this.onBlur.bind(this),onKeyDown:this.keyDownHandler.bind(this),"data-authorapi-tooltip":this.context.i18n.get("playerTemplateRemoveElement"),tabIndex:"0"})}},{key:"getDeleteButtonClasses",value:function(){return a().classNames({"lrn-btn-delete-tb-element":!0,"lrn-btn-i-xs":!0,"lrn-i-cross":!0,"lrn-btn-delete-tb-element-display":this.state.addDisplayClass})}},{key:"onClick",value:function(e){e.stopPropagation(),this.props.showAnimationOnAppear||this.props.updateTBShowAnimationOnAppear(!0),this.deleteElement()}},{key:"keyDownHandler",value:function(e){"Enter"===e.key&&(e.stopPropagation(),this.deleteElement())}},{key:"onBlur",value:function(){this.setState({addDisplayClass:!1})}},{key:"deleteElement",value:function(){var e=Mz(this.props.regionConfig,this.props.unassignedElementsOrder,{element:Pz(this.props.regionConfig,this.props.elementKey),dropRegionKey:"unassigned-elements",dropIndex:0});this.props.updateTBRegionConfig(e.newRegionConfig),this.props.updateTBUnassignedElementsOrder(e.newUnassignedElementsOrder),this.props.updateSelectedElementData({})}}])&&VG(t.prototype,n),r&&VG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);GG.contextTypes={i18n:jn().object};const $G=Ln((function(e){return{regionConfig:e.activityEdit.templateBuilder.regionConfig,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder,draggedElementData:e.activityEdit.templateBuilder.draggedElementData,selectedElementData:e.activityEdit.templateBuilder.selectedElementData,showAnimationOnAppear:e.activityEdit.templateBuilder.showAnimationOnAppear}}),{updateTBRegionConfig:xz,updateSelectedElementData:Tz,updateTBUnassignedElementsOrder:kz,updateTBShowAnimationOnAppear:Oz})(GG);function KG(e){return(KG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JG(e,t){return(JG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=e$(e);if(t){var i=e$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return XG(this,n)}}function XG(e,t){if(t&&("object"===KG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function e$(e){return(e$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var t$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JG(e,t)}(o,e);var t,n,r,i=QG(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).elementRef=zt.createRef(),n.state={isHovered:!1,setPlaceHolderDimensions:!1,isFocused:!1,elementWidth:0,animationComplete:!0},n.minElementWidth=110,n}return t=o,(n=[{key:"componentDidMount",value:function(){if(this.props.isPlaceHolder)this.setState(a().extend({},this.state,{setPlaceHolderDimensions:!0}));else{var e=0;this.props.showAnimationOnAppear||(e=this.getElementWidth()),this.setState(a().extend({},this.state,{elementWidth:e,animationComplete:!this.props.showAnimationOnAppear}))}}},{key:"componentDidUpdate",value:function(e){this.unsetHoverIfRequired(e),this.setFocusIfRequired(e)}},{key:"render",value:function(){return this.props.isPlaceHolder?this.getElement():this.getElementWithTransition()}},{key:"getElementWithTransition",value:function(){var e=this;return zt.createElement(SW,{in:!0,timeout:700,classNames:"lrn-author-tb-element-display",appear:this.props.showAnimationOnAppear,onEntered:function(){return e.handleAnimationComplete()}},this.getElement())}},{key:"getElement",value:function(){return zt.createElement("div",this.getComponentProperties(),this.getButton(),this.getName(),this.getDeleteButton(),this.getDropzoneIndicator())}},{key:"getComponentProperties",value:function(){var e=this,t=this.getExtraStyles();return{className:this.getClasses(),"data-el-key":this.props.elementKey,"data-el-index":this.props.index,"data-el-origin":this.props.regionKey,onMouseEnter:function(){return e.setHover(!0)},onMouseLeave:function(){return e.setHover(!1)},ref:this.elementRef,style:t,tabIndex:this.getTabIndex(),onClick:function(t){return e.clickHandler(t)},onMouseDown:function(){return e.setFocus()},onKeyDown:function(t){return e.keyDownHandler(t)},onFocus:function(){return e.setFocusState(!0)},onBlur:function(){return e.setFocusState(!1)}}}},{key:"getButton",value:function(){return!this.props.isPlaceHolder&&zt.createElement(Ez,{elKey:this.props.elementKey,isDisabled:!1,baseClasses:"lrn_btn lrn-author-tb-element-icon"})}},{key:"getName",value:function(){return!this.props.isPlaceHolder&&zt.createElement("span",{className:"lrn-author-tb-element-assigned-name"},this.props.name)}},{key:"getDeleteButton",value:function(){return!this.props.isPlaceHolder&&!Bz(this.props)&&!jz(this.props)&&"slider_element"!==this.props.elementKey&&zt.createElement($G,{elementKey:this.props.elementKey,isAnimationComplete:this.state.animationComplete,isParentElementFocused:this.state.isFocused})}},{key:"unsetHoverIfRequired",value:function(e){this.dragHasEnded(e)&&this.setState(a().extend({},this.state,{isHovered:!1}))}},{key:"setFocusIfRequired",value:function(e){var t=this;jz(this.props)&&e.focusedElement!==this.props.focusedElement&&this.props.focusedElement===this.props.elementKey&&(a().defer((function(){t.setFocus()})),this.props.updateTBElementFocus(""))}},{key:"dragHasEnded",value:function(e){return a().isObject(e.draggedElementData)&&e.draggedElementData.isDragging&&!this.props.draggedElementData.isDragging&&this.state.isHovered}},{key:"setFocusState",value:function(e){this.setState(a().extend({},this.state,{isFocused:e}))}},{key:"setFocus",value:function(){this.elementRef.current&&this.elementRef.current.focus()}},{key:"clickHandler",value:function(e){e.stopPropagation(),this.props.isPlaceHolder||Bz(this.props)||(this.setFocus(),this.handleElementSelect())}},{key:"keyDownHandler",value:function(e){e.stopPropagation(),jz(this.props)&&"Tab"===e.key?this.handleTabPress(e):this.props.isPlaceHolder||"Enter"!==e.key||Bz(this.props)||this.handleElementSelect()}},{key:"handleElementSelect",value:function(){jz(this.props)?this.moveSelectedElement():this.selectThisElement()}},{key:"moveSelectedElement",value:function(){if(Fz(this.props.elementDefinitions,this.props.selectedElementData.selectedElementKey,this.props.regionKey)){var e=this.props.selectedElementData.selectedElementKey,t=Mz(this.props.regionConfig,this.props.unassignedElementsOrder,{element:Pz(this.props.regionConfig,e),dropRegionKey:this.props.regionKey,dropIndex:this.props.index});this.props.updateTBRegionConfig(t.newRegionConfig),this.props.updateTBUnassignedElementsOrder(t.newUnassignedElementsOrder)}this.props.updateSelectedElementData({})}},{key:"selectThisElement",value:function(){this.props.updateSelectedElementData({isSelected:!0,selectedElementKey:this.props.elementKey}),this.props.showAnimationOnAppear||this.props.updateTBShowAnimationOnAppear(!0)}},{key:"handleTabPress",value:function(e){var t={};t=!0===e.shiftKey?this.getElementAndRegionKeyForShiftTabPress():this.getElementAndRegionKeyForTabPress(),this.updateElementOrRegionFocus(t)}},{key:"getElementAndRegionKeyForShiftTabPress",value:function(){var e=Rz(this.props);return Lz(this.props,e)===this.props.elementKey?{regionKey:e=Nz(this.props),elementKey:Iz(this.props,e)}:{}}},{key:"getElementAndRegionKeyForTabPress",value:function(){var e=Nz(this.props);return Iz(this.props,e)===this.props.elementKey?{regionKey:e=Rz(this.props),elementKey:Lz(this.props,e)}:{}}},{key:"updateElementOrRegionFocus",value:function(e){e.elementKey?this.props.updateTBElementFocus(e.elementKey):e.regionKey&&this.props.updateTBRegionFocus(e.regionKey)}},{key:"getTabIndex",value:function(){return this.props.isPlaceHolder?-1:jz(this.props)?"verticaltoc_element"===this.props.elementKey||"verticaltoc_element"===this.props.selectedElementData.selectedElementKey?-1:Fz(this.props.elementDefinitions,this.props.selectedElementData.selectedElementKey,this.props.regionKey)?0:-1:0}},{key:"getExtraStyles",value:function(){var e=this.getPlaceHolderStyles();return this.state.elementWidth&&(e.width=this.state.elementWidth),"items"===this.props.regionKey&&(e.marginLeft="10px"),e}},{key:"getPlaceHolderStyles",value:function(){if(!(Bz(this.props)&&this.props.isPlaceHolder&&this.state.setPlaceHolderDimensions&&this.props.closestElementKey))return{};var e=this.props.closestElementKey,t=document.querySelector('.lrn-author-tb-right-panel [data-el-key="'+e+'"]'),n=t?t.getBoundingClientRect():{},r=this.state.isHovered?"move":"default";return this.props.isVerticallyAligned?{width:n.width,marginLeft:"",cursor:r}:{height:n.height,marginLeft:"",cursor:r,width:""}}},{key:"getClasses",value:function(){var e=jz(this.props);return a().classNames({"lrn-author-tb-element-assigned":!0,"lrn-author-tb-element-assigned-hover":!Bz(this.props),"lrn-author-tb-element-assigned-vertical":this.props.isVerticallyAligned,"lrn-author-tb-element-assigned-horizontal":!this.props.isVerticallyAligned,"lrn-author-tb-element-placeholder":this.props.isPlaceHolder,"lrn-author-tb-element-assigned-selected":e&&this.props.selectedElementData.selectedElementKey===this.props.elementKey,"lrn-author-tb-element-assigned-no-focus":this.shouldAddNoFocusClass()})}},{key:"shouldAddNoFocusClass",value:function(){return!this.props.isPlaceHolder&&jz(this.props)&&this.props.selectedElementData.selectedElementKey!==this.props.elementKey}},{key:"getDropzoneIndicator",value:function(){if(this.shouldHideDropzoneIndicator())return null;var e=this.getDropzoneIndicatorStyles(),t=this.getDropzoneIndicatorClasses();return zt.createElement("div",null,zt.createElement("div",{className:t.start,style:e.start}),zt.createElement("div",{className:t.line,style:e.line}),zt.createElement("div",{className:t.end,style:e.end}))}},{key:"shouldHideDropzoneIndicator",value:function(){var e="verticaltoc_element"===this.props.elementKey,t=this.props.isPlaceHolder&&!1===this.props.showDropzoneIndicator,n=Bz(this.props)&&this.state.isHovered||jz(this.props)&&this.state.isFocused;return e||t||!n}},{key:"getDropzoneIndicatorStyles",value:function(){return this.props.isVerticallyAligned?this.getVerticalDropzoneStyles():this.getHorizontalDropzoneStyles()}},{key:"getDropzoneIndicatorClasses",value:function(){var e={start:"",line:"lrn-author-tb-dropzone-line",end:""};return this.props.isVerticallyAligned?(e.start="lrn-author-tb-dropzone-vertical lrn-author-tb-dropzone-left-end",e.end="lrn-author-tb-dropzone-vertical lrn-author-tb-dropzone-right-end"):(e.start="lrn-author-tb-dropzone-horizontal lrn-author-tb-dropzone-top-end",e.end="lrn-author-tb-dropzone-horizontal lrn-author-tb-dropzone-bottom-end"),e}},{key:"getVerticalDropzoneStyles",value:function(){var e=this.elementRef.current.getBoundingClientRect(),t=window.getComputedStyle(this.elementRef.current).borderWidth,n=e.width,r=e.height,i=this.addOffsets(t,[-1,2,-1]),o=this.addOffsets(t,[-4,-2,-1]);return{start:{top:r+i[0],left:o[0]},line:{width:n+4,height:2,top:r+i[1],left:o[1]},end:{top:r+i[2],left:n+o[2]}}}},{key:"getHorizontalDropzoneStyles",value:function(){var e=this.elementRef.current.getBoundingClientRect(),t=window.getComputedStyle(this.elementRef.current).borderWidth,n=e.width,r=e.height,i=this.addOffsets(t,[-4,-2,0]),o=this.addOffsets(t,[-1,2,-1]);return{start:{top:i[0],left:n+o[0]},line:{width:2,height:r+4,top:i[1],left:n+o[1]},end:{top:r+i[2],left:n+o[2]}}}},{key:"setHover",value:function(e){var t=a().extend({},this.state,{isHovered:e});this.setState(t),Bz(this.props)&&e&&this.props.updateHoveredElementIndex(this.props.index)}},{key:"addOffsets",value:function(e,t){var n=0;if("2px"===e?n=1:"3px"===e&&(n=2),n)for(var r=0;r<3;r++)t[r]=t[r]-n;return t}},{key:"handleAnimationComplete",value:function(){this.props.showAnimationOnAppear&&this.setState(a().extend({},this.state,{animationComplete:!0,elementWidth:this.getElementWidth()}))}},{key:"getElementWidth",value:function(){if(!this.elementRef.current||this.props.isPlaceHolder)return 0;var e=this.elementRef.current.offsetWidth+1;return e<this.minElementWidth&&(e=this.minElementWidth),e}}])&&ZG(t.prototype,n),r&&ZG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const n$=Ln((function(e){return{draggedElementData:e.activityEdit.templateBuilder.draggedElementData,focusedElement:e.activityEdit.templateBuilder.focusedElement,regionConfig:e.activityEdit.templateBuilder.regionConfig,regionNames:e.activityEdit.templateBuilder.regionNames,selectedElementData:e.activityEdit.templateBuilder.selectedElementData,showAnimationOnAppear:e.activityEdit.templateBuilder.showAnimationOnAppear,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder}}),{updateHoveredElementIndex:Sz,updateSelectedElementData:Tz,updateTBRegionConfig:xz,updateTBShowAnimationOnAppear:Oz,updateTBUnassignedElementsOrder:kz,updateTBElementFocus:cG,updateTBRegionFocus:uG})(t$);function r$(e){return(r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i$(e){return function(e){if(Array.isArray(e))return o$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a$(){return(a$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u$(e,t){return(u$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c$(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f$(e);if(t){var i=f$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d$(this,n)}}function d$(e,t){if(t&&("object"===r$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f$(e){return(f$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p$=["top","top-left","items","bottom-left","bottom"],h$={top:1,"top-left":4,items:16,"bottom-left":4,bottom:1},m$={items:"50%",right:"50%"},g$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u$(e,t)}(o,e);var t,n,r,i=c$(o);function o(){return s$(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){return[this.buildRowWithSingleRegion("top"),this.buildRowWithTwoRegions("top-left","top-right"),this.buildRowWithTwoRegions("items","right"),this.buildRowWithTwoRegions("bottom-left","bottom-right"),this.buildRowWithSingleRegion("bottom"),this.getTextLabelBtn()]}},{key:"buildRowWithSingleRegion",value:function(e){var t=this.getRegion(e,this.isRegionEmpty(e)),n=this.getRowClassesAndStyle(e);return zt.createElement("div",{key:e,className:n.rowClasses,style:n.rowStyle},t)}},{key:"buildRowWithTwoRegions",value:function(e,t){var n=this.areBothRegionsEmpty(e,t),r=this.getRegion(e,n),i=this.getRegion(t,n),o=this.getRowClassesAndStyle(e,t),a="".concat(e,".").concat(t);return zt.createElement("div",{key:a,className:o.rowClasses,style:o.rowStyle},r,i,this.shouldDisplayStickyFooterBtn(t)&&this.getStickyFooterBtn())}},{key:"areBothRegionsEmpty",value:function(e,t){return"items"!==e&&this.isRegionEmpty(e)&&this.isRegionEmpty(t)}},{key:"isRegionEmpty",value:function(e){var t=this.props.regionConfig;return!(a().isArray(t[e])&&t[e].length>0)}},{key:"getRegion",value:function(e,t){var n=this.getRegionElements(e),r=this.isLeftRegion(e),i=r?CG:YG,o={alignItems:this.isItemRow(e)?"flex-end":"",position:""},a=this.isItemRow(e)?"column":"row";return r||this.isItemRow(e)||(a="row-reverse"),zt.createElement(i,{regionKey:e,flexDirection:a,elementDefinitions:this.props.elementDefinitions,elements:n,styles:o,regionWidthBasis:this.getRegionWidthAndHeightBasis(e),isSingleRegionRow:this.isSingleRegionRow(e),bothRegionsEmpty:t})}},{key:"getRowClassesAndStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.isItemRow(t),r=!(n||!this.props.expandedRegion||this.props.expandedRegion!==e&&this.props.expandedRegion!==t);return{rowClasses:a().classNames({"lrn-author-tb-region-row":!0,"lrn-author-tb-region-row-shrinkable":n,"lrn-author-tb-region-expanded":r,"lrn-author-tb-region-row-sticky":n&&this.isStickyFooterEnabled()}),rowStyle:{flexGrow:this.getGrowSetting(e),flexBasis:this.getRegionWidthAndHeightBasis(e)}}}},{key:"isLeftRegion",value:function(e){return a().contains(p$,e)}},{key:"getRegionWidthAndHeightBasis",value:function(e){return m$[e]?m$[e]:""}},{key:"getGrowSetting",value:function(e){return h$[e]}},{key:"shouldDisplayStickyFooterBtn",value:function(e){var t=Dz(this.props.regionConfig),n=t.sliderIndex,r=t.verticalIndex;return"right"!==this.props.expandedRegion&&this.isItemRow(e)&&(n>-1||r>-1)}},{key:"getStickyFooterBtn",value:function(){var e=this,t=this.isStickyFooterEnabled(),n=a().classNames({"lrn-author-tb-sticky-footer-btn":!0,"lrn-author-tb-faded":!!this.props.expandedRegion}),r=jz(this.props)?-1:0;return zt.createElement("div",{className:n},zt.createElement(Bl,{value:this.context.i18n.get("playerTemplateStickyFooterLabel"),checked:t,onChange:function(){e.toggleStickyFooter()},selector:"stickyFooterCheckbox",tabIndex:r}))}},{key:"isStickyFooterEnabled",value:function(){var e=-1===Dz(this.props.regionConfig).sliderIndex?"vertical_element":"slider_element";return!!Az(this.props.regionConfig,e,"scrollable_option")}},{key:"toggleStickyFooter",value:function(){var e=!this.isStickyFooterEnabled(),t=-1===Dz(this.props.regionConfig).sliderIndex?"vertical_element":"slider_element",n=Cz(this.props.regionConfig,t,{name:"scrollable_option",value:e});this.props.updateTBRegionConfig(n)}},{key:"getTextLabelBtn",value:function(){var e=this;return zt.createElement("div",{className:"lrn-author-tb-right-panel-btn",key:"text-label-button"},zt.createElement(Ar,{color:"primary",size:"medium",text:this.context.i18n.get("playerTemplateSetTextLabels"),onClick:function(){return e.props.setEditModeToCustomizeLabels()},dataAuthorApiSelector:"lrn-author-set-text-labels"}))}},{key:"getRegionElements",value:function(e){var t=this,n=this.getElementsWithPlaceholder(e),r=[];return a().each(n,(function(n,i){r.push(t.generateRegionElement(n,i,e))})),this.addDragulaDummyToElements(r,e),r}},{key:"generateRegionElement",value:function(e,t,n){var r=e.type,i=this.props.elementDefinitions,o=i[r]||{},s={elementKey:r,name:o.name,icon:o.icon,elementDefinitions:i,index:t,regionKey:n,isPlaceHolder:!!e.isPlaceHolder,isVerticallyAligned:a().contains(["items","right"],n),closestElementKey:e.closestElementKey};return zt.createElement(n$,a$({key:r},s))}},{key:"addDragulaDummyToElements",value:function(e,t){if(!(e.length<2)){var n="dummy-".concat(t),r=zt.createElement("div",{key:n});this.placeholderShouldBeAtTheEndOfElements(t)?e.unshift(r):e.push(r)}}},{key:"getElementsWithPlaceholder",value:function(e){var t=[],n=this.getDefinedRegionElements(e);return this.placeholderShouldBeAtTheEndOfElements(e)?(t.push.apply(t,i$(n)),this.addPlaceholder(t,e)):(this.addPlaceholder(t,e),t.push.apply(t,i$(n))),t}},{key:"addPlaceholder",value:function(e,t){var n=this.getDefinedRegionElements(t),r=n.length>0,i=this.getPlaceholderElementDefinition();this.shouldAddPlaceholderElement(t,r)&&(r&&(i.closestElementKey=this.getElementClosestToPlaceholder(t,n),i.showDropzoneIndicator=!0),e.push(i))}},{key:"getDefinedRegionElements",value:function(e){var t=this.props.elementDefinitions,n=this.props.regionConfig[e]?a().cloneDeep(this.props.regionConfig[e]):[];return a().filter(n,(function(e){return!!t[e.type]}))}},{key:"getPlaceholderElementDefinition",value:function(){return{isPlaceHolder:!0,type:"dropzone_placeholder",closestElementKey:"",showDropzoneIndicator:!1}}},{key:"getElementClosestToPlaceholder",value:function(e,t){return this.placeholderShouldBeAtTheEndOfElements(e)?a().last(t).type:(a().find(t,(function(e){return"verticaltoc_element"!==e.type}))||{}).type}},{key:"placeholderShouldBeAtTheEndOfElements",value:function(e){return a().contains(["top-right","bottom-right"],e)}},{key:"shouldAddPlaceholderElement",value:function(e,t){return!!t||a().isObject(this.props.draggedElementData)&&this.props.draggedElementData.draggedElementOrigin===e}},{key:"isSingleRegionRow",value:function(e){return"top"===e||"bottom"===e}},{key:"isItemRow",value:function(e){return"items"===e||"right"===e}}])&&l$(t.prototype,n),r&&l$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);g$.contextTypes={i18n:jn().object};const y$=Ln((function(e){return{regionConfig:e.activityEdit.templateBuilder.regionConfig,labelBundle:e.activityEdit.templateBuilder.labelBundle,expandedRegion:e.activityEdit.templateBuilder.expandedRegion,elementDefinitions:e.activityEdit.templateBuilder.elements,draggedElementData:e.activityEdit.templateBuilder.draggedElementData,selectedElementData:e.activityEdit.templateBuilder.selectedElementData}}),(function(e){return{setEditModeToCustomizeLabels:function(){e(Cm("customize_labels"))},updateTBRegionConfig:function(t){e(xz(t))}}}))(g$);function v$(e){return(v$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _$(e,t){return(_$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w$(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x$(e);if(t){var i=x$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E$(this,n)}}function E$(e,t){if(t&&("object"===v$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S$(e)}function S$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x$(e){return(x$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_$(e,t)}(o,e);var t,n,r,i=w$(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).regionsComponent=zt.createRef(),n.state={expandedOptionViews:[],showLeftMenu:!0},n.boundWindowClickHandler=n.windowClickHandler.bind(S$(n)),n}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.updateTBReadyForDrag({panel:"right",value:!0}),window.addEventListener("click",this.boundWindowClickHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.boundWindowClickHandler)}},{key:"render",value:function(){var e=a().classNames({"lrn-author-tb-right-panel":!0,"lrn-author-tb-right-panel-full":this.props.isFullWidth}),t=a().classNames({"lrn-author-tb-right-panel-info":!0,"lrn-author-tb-right-panel-info-offset":this.props.isFullWidth});return zt.createElement("div",{className:e,ref:this.regionsComponent},zt.createElement("div",{className:t},this.context.i18n.get("playerTemplateRightInfo")),zt.createElement(y$,null))}},{key:"windowClickHandler",value:function(e){var t=this.regionsComponent.current?this.regionsComponent.current.querySelectorAll(".lrn-author-tb-region-row"):[],n=!0;t.forEach((function(t){t.contains(e.target)&&(n=!1)})),n&&(jz(this.props)?this.props.updateSelectedElementData({}):this.props.hasExpandedRegion&&this.props.updateExpandedRegion(""))}}])&&b$(t.prototype,n),r&&b$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);k$.contextTypes={i18n:jn().object};const T$=Ln((function(e){return{hasExpandedRegion:!!e.activityEdit.templateBuilder.expandedRegion}}),{updateExpandedRegion:lG,updateTBReadyForDrag:Jz,updateSelectedElementData:Tz})(k$);const O$={reorderTBBehaviour:DL.extend({CLASSES:{disappear:"lrn-author-tb-element-display-disappear",hover:"lrn-author-tb-element-assigned-hover",disappearActive:"lrn-author-tb-element-display-disappear-active"},initialize:function(){DL.prototype.initialize.call(this),this.addEventListeners()},addEventListeners:function(){this.listenTo(this.pub,this.pub.EVENT.DRAG_CANCEL,this.dropHandler),this.listenTo(this.pub,this.pub.EVENT.DRAG_END_NO_ANIMATION,this.dragEndHandlerNoAnimation)},isMovable:function(e){return{allowed:"dropzone_placeholder"!==e.attributes["data-el-key"].value}},dropHandler:function(){this.prv.drake.remove()},dragHandler:function(e){this.cloneEl=e.cloneNode(!0),this.cloneEl.classList.add(this.CLASSES.disappear),this.cloneEl.classList.remove(this.CLASSES.hover),e.parentNode.insertBefore(this.cloneEl,e.nextSibling)},dragEndHandlerNoAnimation:function(){this.cloneEl&&!this.isRemoving&&(this.cloneEl.parentNode.removeChild(this.cloneEl),delete this.cloneEl)},dragEndHandler:function(){this.cloneEl&&!this.isRemoving&&(this.isRemoving=!0,this.addFullWidthAndHeightToClone(),this.removeCloneFromDom())},addFullWidthAndHeightToClone:function(){var e=this.getFullWidthAndHeight();this.cloneEl.className.indexOf("lrn-author-tb-element-assigned-horizontal")?this.cloneEl.style.width=e.width+"px":this.cloneEl.style.height=e.height+"px"},removeCloneFromDom:function(){var e=this;a().defer((function(){e.cloneEl&&e.cloneEl.classList.add(e.CLASSES.disappearActive),a().delay((function(){e.cloneEl&&(e.cloneEl.parentNode.removeChild(e.cloneEl),delete e.cloneEl),e.isRemoving=!1}),1050)}))},getFullWidthAndHeight:function(){if(!this.cloneEl)return{width:0,height:0};var e=window.getComputedStyle(this.cloneEl),t={width:parseInt(e.width,10),height:parseInt(e.height,10)};return this.heightAndWidthHaveAlreadyBeenSet(t)?{width:t.width,height:t.height}:this.getHeightAndWidthWithMargins(e,t)},heightAndWidthHaveAlreadyBeenSet:function(e){return e.height===this.cloneEl.clientHeight+2&&e.width===this.cloneEl.clientWidth+2},getHeightAndWidthWithMargins:function(e,t){var n=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),r=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10);return{width:t.width+n+2,height:t.height+r+2}}})};function C$(e){return(C$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P$(e,t){return(P$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M$(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R$(e);if(t){var i=R$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D$(this,n)}}function D$(e,t){if(t&&("object"===C$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R$(e){return(R$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P$(e,t)}(o,e);var t,n,r,i=M$(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).selectors={zones:".lrn-author-tb-left-panel-unassigned-el-wrapper, .lrn-author-tb-region-wrapper, .lrn-author-tb-region-elements, .lrn-author-tb-region-element-toc",dropZones:".lrn-author-tb-left-panel-unassigned-el-wrapper, .lrn-author-tb-region-elements",draggables:".lrn-author-tb-left-panel-unassigned-el-wrapper, .lrn-author-tb-region-elements, .lrn-author-tb-region-element-toc"},t}return t=o,(n=[{key:"componentDidUpdate",value:function(){this.shouldInitDragDrop()&&this.initDragDrop(),this.dragDrop&&!this.isDragInProcess()&&this.updateDraggables()}},{key:"componentWillUnmount",value:function(){this.destroyDragDrop()}},{key:"render",value:function(){return null}},{key:"shouldInitDragDrop",value:function(){return!this.dragDrop&&this.props.container&&!0===this.props.leftPanelIsReadyForDrag&&!0===this.props.rightPanelIsReadyForDrag}},{key:"initDragDrop",value:function(){var e=this.getArrayOfElements(this.selectors.draggables),t=this.getArrayOfElements(this.selectors.dropZones),n=this.getArrayOfElements(this.selectors.zones);this.dragDrop=new pL({container:this.props.container,snapMirrorToCorner:"snapToTheRight",dragDropBehaviours:O$,draggables:e,dropzones:t,zones:n,shouldNotAnimateDragEndCallback:a().bind(this.shouldElementBeDroppedAtOriginalPosition,this)}),this.listenForChanges()}},{key:"listenForChanges",value:function(){var e=this;this.dragDrop.on(this.dragDrop.EVENT.DRAG_START,(function(t){e.dragStartHandler(t)})),this.dragDrop.on(pL.prototype.EVENT.CHANGED,(function(){e.dropHandler()})),this.dragDrop.on(pL.prototype.EVENT.DRAG_CANCEL,(function(){e.isDragInProcess()&&e.dropElementAtOriginalPosition()})),this.dragDrop.on(pL.prototype.EVENT.OVER_DROP_ZONE,(function(t,n){e.dragOverDropZoneHandler(t,n)})),this.dragDrop.on(pL.prototype.EVENT.LEFT_DROP_ZONE,(function(t){e.dragLeftDropZoneHandler(t)}))}},{key:"dragStartHandler",value:function(e){var t=f()(e),n=t.data("elKey"),r=t.data("elOrigin"),i=a().cloneDeep(this.props.regionConfig),o={type:n};"unassigned-elements"!==r&&(o=Pz(i,n)),this.props.updateDraggedElementData({isDragging:!0,draggedElement:o,draggedElementOrigin:r,draggedElementOriginalIndex:t.data("elIndex")}),this.removeElementFromOrigin(t),this.props.showAnimationOnAppear||this.props.updateTBShowAnimationOnAppear(!0)}},{key:"dropHandler",value:function(){this.shouldElementBeDroppedAtOriginalPosition()?this.dropElementAtOriginalPosition():this.dropElementInRegion()}},{key:"dropElementAtOriginalPosition",value:function(){var e=this.props.draggedElementData.draggedElementOrigin,t=this.getCorrectIndexForRegion(e,this.props.draggedElementData.draggedElementOriginalIndex),n=Mz(this.props.regionConfig,this.props.unassignedElementsOrder,{element:this.props.draggedElementData.draggedElement,dropRegionKey:e,dropIndex:t});this.props.updateTBShowAnimationOnAppear(!1),this.triggerDropActions(n)}},{key:"dragOverDropZoneHandler",value:function(e,t){var n=f()(t).data("regionId"),r=f()(e).data("elKey");if(n){var i=Fz(this.props.elements,r,n);this.props.updateHoveredRegionInfo({regionId:n,isAllowed:i}),this.props.updateHoveredElementIndex(null)}}},{key:"dragLeftDropZoneHandler",value:function(e){var t=f()(e).data("regionId");this.props.hoveredRegionData.regionId!==t&&this.props.updateHoveredRegionInfo({})}},{key:"removeElementFromOrigin",value:function(e){var t=e.data("elKey"),n=e.data("elOrigin");if("unassigned-elements"===n){var r=a().cloneDeep(this.props.unassignedElementsOrder);r=a().without(r,t),this.props.updateTBUnassignedElementsOrder(r)}else if(this.props.regionConfig[n]){var i=a().cloneDeep(this.props.regionConfig);i[n]=this.removeElementFromRegion(i[n],t),this.props.updateTBRegionConfig(i)}}},{key:"isDragInProcess",value:function(){return a().isObject(this.props.draggedElementData)&&this.props.draggedElementData.isDragging}},{key:"destroyDragDrop",value:function(){this.dragDrop&&(this.dragDrop.remove(),delete this.dragDrop)}},{key:"getArrayOfElements",value:function(e){var t=this.props.container.querySelectorAll(e);return Array.prototype.slice.call(t)}},{key:"triggerDropActions",value:function(e){this.props.updateDraggedElementData({}),this.props.updateHoveredRegionInfo({}),e.newRegionConfig&&this.props.updateTBRegionConfig(e.newRegionConfig),this.props.updateTBUnassignedElementsOrder(e.newUnassignedElementsOrder)}},{key:"getCorrectIndexForRegion",value:function(e,t){if(a().contains(["top-right","bottom-right"],e))return t;var n=t-1;return n<0?0:n}},{key:"shouldElementBeDroppedAtOriginalPosition",value:function(){var e=this.props.hoveredRegionData;if(e){var t=e.regionId,n=this.props.draggedElementData.draggedElementOrigin;if(!e.isAllowed||"unassigned-elements"===n&&n===t)return!0;if(a().isObject(this.props.draggedElementData)&&a().isObject(this.props.hoveredRegionData)){var r=this.props.draggedElementData,i=this.props.hoveredRegionData,o=this.getCorrectIndexForRegion(r.draggedElementOrigin,r.draggedElementOriginalIndex);return!i.isAllowed||r.draggedElementOrigin===i.regionId&&(a().isNull(this.props.hoveredElementIndex)||o===this.props.hoveredElementIndex)}return!1}}},{key:"dropElementInRegion",value:function(){var e=this.props.hoveredRegionData.regionId;if(e){var t=Mz(this.props.regionConfig,this.props.unassignedElementsOrder,{element:this.props.draggedElementData.draggedElement,dropRegionKey:e,dropIndex:a().isNull(this.props.hoveredElementIndex)?0:this.props.hoveredElementIndex});this.triggerDropActions(t)}}},{key:"updateDraggables",value:function(){var e=this.getArrayOfElements(this.selectors.draggables);this.dragDrop.changeDraggables(e)}},{key:"removeElementFromRegion",value:function(e,t){return a().reject(e,(function(e){return e.type===t}))}}])&&A$(t.prototype,n),r&&A$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const N$=Ln((function(e){return{leftPanelIsReadyForDrag:e.activityEdit.templateBuilder.leftPanelIsReadyForDrag,rightPanelIsReadyForDrag:e.activityEdit.templateBuilder.rightPanelIsReadyForDrag,hoveredRegionData:e.activityEdit.templateBuilder.hoveredRegionData,hoveredElementIndex:e.activityEdit.templateBuilder.hoveredElementIndex,draggedElementData:e.activityEdit.templateBuilder.draggedElementData,regionConfig:e.activityEdit.templateBuilder.regionConfig,unassignedElementsOrder:e.activityEdit.templateBuilder.unassignedElementsOrder,elements:e.activityEdit.templateBuilder.elements,showAnimationOnAppear:e.activityEdit.templateBuilder.showAnimationOnAppear}}),{updateHoveredElementIndex:Sz,updateHoveredRegionInfo:function(e){return{type:cp,data:e}},updateDraggedElementData:function(e){return{type:lp,data:e}},updateTBRegionConfig:xz,updateTBUnassignedElementsOrder:kz,updateTBShowAnimationOnAppear:Oz})(L$);function I$(e){return(I$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F$(e,t){return(F$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y$(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V$(e);if(t){var i=V$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H$(this,n)}}function H$(e,t){if(t&&("object"===I$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V$(e){return(V$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F$(e,t)}(o,e);var t,n,r,i=Y$(o);function o(){return j$(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.updateTBShowAnimationOnAppear(!1)}},{key:"componentWillUnmount",value:function(){this.props.updateTBShowAnimationOnAppear(!1)}},{key:"render",value:function(){var e=this,t=!!this.props.regionNames&&!!this.props.elements;return zt.createElement("div",{className:"lrn-author-tb-wrapper",ref:function(t){return e.container=t}},t&&zt.createElement(sG,{isCollapsable:this.props.isMediumBp}),t&&zt.createElement(T$,{isFullWidth:this.props.isMediumBp,container:this.container}),t&&zt.createElement(N$,{container:this.container}))}}])&&B$(t.prototype,n),r&&B$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const U$=Ln((function(e){return{elements:e.activityEdit.templateBuilder.elements,regionNames:e.activityEdit.templateBuilder.regionNames}}),{updateTBShowAnimationOnAppear:Oz})(q$),W$=function(e){return{type:Yf,data:e}};function z$(e){return(z$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K$(e,t){return(K$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z$(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q$(e);if(t){var i=Q$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J$(this,n)}}function J$(e,t){if(t&&("object"===z$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Q$(e){return(Q$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K$(e,t)}(o,e);var t,n,r,i=Z$(o);function o(){return G$(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.context.i18n;return zt.createElement("div",{className:"lrn-author-activity-toolbar"},zt.createElement("div",{className:"lrn-author-item-toolbar-left lrn-ellipses"},zt.createElement(lb,{inputRef:this.props.inputRef,label:t.get("playerTemplateName"),onChange:function(t){return e.onChangeName(t)},onBlur:function(t){return e.onChangeName(t,!0)},editableName:this.props.templatePlayerName||"",liSelector:"player-template-reference-display",inputSelector:"player-template-name-edit",iconSelector:"player-template-name-edit-icon",disabled:!1,showWarning:this.props.showWarning,warningMessage:t.get("playerTemplateNameWarning"),placeholder:t.get("playerTemplateNamePlaceholder")})))}},{key:"onChangeName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.showWarning&&this.props.handleShowWarningChange();var n=e.currentTarget.value;t&&(n=n.trim()),this.props.updateTBPlayerName(n)}}])&&$$(t.prototype,n),r&&$$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);X$.contextTypes={i18n:jn().object};const eK=Ln((function(e){return{templatePlayerName:e.activityEdit.templateBuilder.templatePlayerName}}),{updateTBPlayerName:W$})(X$);var tK=new(DW())({id:"lrn-author-i-exclamation-circle",use:"lrn-author-i-exclamation-circle-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-exclamation-circle">\n  <path fill-rule="evenodd" d="M2 16C2 8.268 8.268 2 16 2s14 6.268 14 14-6.268 14-14 14S2 23.732 2 16zm16.272 3.563v2.982c0 .147-.05.27-.15.37-.1.1-.217.149-.353.149h-3.014a.483.483 0 01-.353-.15.502.502 0 01-.15-.369v-2.982c0-.147.05-.27.15-.37.1-.099.217-.149.353-.149h3.014c.136 0 .254.05.354.15.1.1.149.222.149.369zm.25-10.093l-.282 7.204a.35.35 0 01-.165.26.64.64 0 01-.37.103h-2.903a.678.678 0 01-.377-.102c-.105-.068-.158-.155-.158-.26L14 9.502c0-.147.052-.256.157-.33.137-.115.263-.172.377-.172h3.454c.116 0 .241.057.377.172a.345.345 0 01.157.298z" clip-rule="evenodd" />\n</symbol>'});LW().add(tK);const nK=tK;var rK=new(DW())({id:"lrn-author-i-info-circle",use:"lrn-author-i-info-circle-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 32 32" id="lrn-author-i-info-circle">\n  <path fill-rule="evenodd" d="M16 27c6.075 0 11-4.925 11-11S22.075 5 16 5 5 9.925 5 16s4.925 11 11 11zm0 3c7.732 0 14-6.268 14-14S23.732 2 16 2 2 8.268 2 16s6.268 14 14 14z" clip-rule="evenodd" />\n  <path d="M14.25 9h3.5v3.5h-3.5V9zm5.25 14h-7v-1.75h1.75V16H12.5v-1.75h5.25v7h1.75V23z" />\n</symbol>'});LW().add(rK);const iK=rK,oK=function(e){return{type:_p,data:e}};function aK(e){return(aK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lK(e,t){return(lK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uK(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fK(e);if(t){var i=fK(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cK(this,n)}}function cK(e,t){if(t&&("object"===aK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dK(e)}function dK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fK(e){return(fK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pK=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lK(e,t)}(o,e);var t,n,r,i=uK(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={displayInvalidJsonWarning:!1},n.boundSetStateAfterChange=a().bind(n.setStateAfterChange,dK(n)),n.boundSetDisplayInvalidJsonWarning=a().bind(n.setDisplayInvalidJsonWarning,dK(n)),n.debouncedSetDisplayInvalidJsonWarning=a().debounce(n.boundSetDisplayInvalidJsonWarning,1e3),n._isMounted=!1,n}return t=o,(n=[{key:"componentDidMount",value:function(){!this.codeMirror&&this.textareaElement&&(this.codeMirror=TE().fromTextArea(this.textareaElement,{mode:{name:"javascript",json:!0},lineNumbers:!0,lineWrapping:!0})),this.codeMirror&&(this.updateCodeMirror(),this.codeMirror.on("change",this.boundSetStateAfterChange),this.codeMirror.on("blur",this.boundSetDisplayInvalidJsonWarning)),this._isMounted=!0,this.setDisplayInvalidJsonWarning()}},{key:"componentWillUnmount",value:function(){this.codeMirror.off("change",this.boundSetStateAfterChange),this.codeMirror.off("blur",this.boundSetDisplayInvalidJsonWarning),this._isMounted=!1}},{key:"render",value:function(){var e=this;return zt.createElement("div",{className:"lrn-author-tb-source"},this.getMessageElements(),zt.createElement("div",{className:this.getCodeMirrorWrapperClasses(),dir:"ltr"},zt.createElement("textarea",{ref:function(t){return e.textareaElement=t},"data-authorapi-selector":"tb-source-textarea"})))}},{key:"getMessageElements",value:function(){return zt.createElement(zt.Fragment,null,!this.state.displayInvalidJsonWarning&&this.getWarningMessage(),this.getErrorMessage(),zt.createElement("div",{className:"lrn-author-tb-source-info"},this.context.i18n.get("playerTemplateSourceInfo")))}},{key:"getWarningMessage",value:function(){return zt.createElement("div",{className:"lrn-author-tb-source-hidden-warning"},zt.createElement("div",null,zt.createElement(pz.Z,{icon:iK})),zt.createElement("div",{className:"lrn-author-tb-source-message"},this.context.i18n.get("playerTemplateSourceHiddenChangesWarning")))}},{key:"getErrorMessage",value:function(){return this.state.displayInvalidJsonWarning&&zt.createElement("div",{className:"lrn-author-tb-source-invalid-json-error"},zt.createElement("div",null,zt.createElement(pz.Z,{icon:nK})),zt.createElement("div",{className:"lrn-author-tb-source-message"},this.context.i18n.get("playerTemplateSourceInvalidJsonError")))}},{key:"updateCodeMirror",value:function(){this.codeMirror&&(this.codeMirror.setValue(this.getDisplayData()),this.codeMirror.refresh())}},{key:"getDisplayData",value:function(){if(this.props.invalidJson)return this.props.invalidJson;var e={regions:this.props.regionConfig||{},labelBundle:this.props.labelBundle||{}};return this.props.additionalConfig&&a().each(this.props.additionalConfig,(function(t,n){e[n]=t})),CE()(ki.Z.stringify(e))}},{key:"setStateAfterChange",value:function(){var e=this.codeMirror.getValue(),t="";try{var n=ki.Z.parse(e);this.props.updateTBRegionConfig(n.regions||{}),this.props.updateTBLabelBundleConfig(n.labelBundle||{}),this.updateAdditionalConfig(n)}catch(n){t=e}this.props.updateTBSourceInvalid(t),this.debouncedSetDisplayInvalidJsonWarning()}},{key:"setDisplayInvalidJsonWarning",value:function(){this._isMounted&&this.setState(a().extend({},this.state,{displayInvalidJsonWarning:!!this.props.invalidJson}))}},{key:"updateAdditionalConfig",value:function(e){this.props.updateTBAdditionalConfig(a().omit(e,["regions","labelBundle"]))}},{key:"getCodeMirrorWrapperClasses",value:function(){return this.state.displayInvalidJsonWarning?"lrn-author-tb-source-wrapper-with-errors lrn-author-no-code-mirror-border":"lrn-author-tb-source-wrapper"}}])&&sK(t.prototype,n),r&&sK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);pK.contextTypes={i18n:jn().object};const hK=Ln((function(e){var t=e.activityEdit.templateBuilder,n=t.labelBundle;return n&&!a().isEmpty(n)||(n=a().getNested(e,"activityEdit.activityJson.data.config.labelBundle")||{}),{labelBundle:n,regionConfig:t.regionConfig,additionalConfig:t.additionalConfig,invalidJson:t.invalidSourceJson}}),{updateTBRegionConfig:xz,updateTBLabelBundleConfig:sW,updateTBAdditionalConfig:function(e){return{type:bp,data:e}},updateTBSourceInvalid:oK})(pK);function mK(e){return(mK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yK(e,t){return(yK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vK(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wK(e);if(t){var i=wK(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bK(this,n)}}function bK(e,t){if(t&&("object"===mK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _K(e)}function _K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wK(e){return(wK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EK=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yK(e,t)}(o,e);var t,n,r,i=vK(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t))._isMounted=!1,n.boundHandleWidth=n.handleWidth.bind(_K(n)),n.defaultTab="templateDragAndDrop",n.state={isBelowMinBp:!1,isMediumBp:!1,isLargeBp:!1,regionPreset:{},elements:{},showDiscardOverlay:!1,showDiscardOverlayForInvalidJson:!1,isNewTemplate:!1,originalConfig:e.regionConfig,originalName:e.templatePlayerName,showWarning:!1},n}return t=o,(n=[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchDataFromAssessAPI(),window.addEventListener("resize",this.boundHandleWidth),this.handleWidth(),this.createTemplateReferenceIfRequired()}},{key:"componentDidUpdate",value:function(e){if("templateSource"===e.activeTabName&&"templateDragAndDrop"===this.props.activeTabName&&this.props.invalidSourceJson){var t=a().deepExtend({},this.state,{showDiscardOverlayForInvalidJson:!0});this.setState(t)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.boundHandleWidth),this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=this.context.i18n;return this.updateStoreIfRequired(),zt.createElement(iP,{title:t.get("playerTemplateSettingsTitle"),onClose:this.onExit.bind(this),className:"lrn-author-ui-no-preview lrn-author-tb",footer:!e.showDiscardOverlay&&!e.showDiscardOverlayForInvalidJson&&this.getTakeoverFooter(),isDirty:this.isDirty()},e.showDiscardOverlay&&this.getYesNoPrompt(),e.showDiscardOverlayForInvalidJson&&this.getYesNoPromptForInvalidJson(),e.isBelowMinBp&&this.renderBreakpointWarning(),this.getTabbedContent())}},{key:"fetchDataFromAssessAPI",value:function(){var e=this;fetch(Ld.generateUrl("assess","dist/templateBuilder.json")).then((function(e){return e.json()})).then((function(t){Sd((function(){return e.setInitialState(t)}),"getRegionPresets")}))}},{key:"createTemplateReferenceIfRequired",value:function(){if(!this.props.templateReference){this.props.updateTBReference(a().uuid()),this.props.updateTBPlayerName("");var e=a().deepExtend({},this.state,{isNewTemplate:!0});this.setState(e)}}},{key:"updateStoreIfRequired",value:function(){a().isEmpty(this.props.regionConfig)&&!a().isEmpty(this.state.regionPreset)&&this.props.updateTBRegionConfig(this.state.regionPreset),a().isEmpty(this.props.elements)&&!a().isEmpty(this.state.elements)&&this.props.updateTBElements(this.state.elements)}},{key:"getTakeoverFooter",value:function(){return zt.createElement(GM,{onApply:this.apply.bind(this),onExit:this.onExit.bind(this),isDirty:this.isApplyEnabled()})}},{key:"getYesNoPrompt",value:function(){var e=this,t=this.context.i18n;return zt.createElement(eu,{positionAbsolute:!0,text:t.get("settingsConfirmDiscard"),onClickYes:function(){return e.close()},onClickNo:function(){return e.hideDiscardOverlay()},yesLabel:t.get("settingsConfirmDiscardYes"),noLabel:t.get("settingsConfirmDiscardNo")})}},{key:"getYesNoPromptForInvalidJson",value:function(){var e=this,t=this.context.i18n;return zt.createElement(eu,{positionAbsolute:!0,text:t.get("playerTemplateDiscardJson"),onClickYes:function(){e.hideDiscardOverlay(),e.props.updateTBSourceInvalid("")},onClickNo:function(){e.hideDiscardOverlay(),e.props.changeTab("templateBuilder","templateSource")},yesLabel:t.get("playerTemplateDiscardJsonConfirm"),noLabel:t.get("playerTemplateDiscardJsonCancel"),description:t.get("playerTemplateDiscardJsonDescription")})}},{key:"handleShowWarningChange",value:function(){this.setState({showWarning:!1})}},{key:"getTabbedContent",value:function(){var e=this.context.i18n,t={};return this.inputRef=zt.createRef(),(this.state.showDiscardOverlay||this.state.showDiscardOverlayForInvalidJson||this.state.isBelowMinBp)&&(t.display="none"),zt.createElement("div",{style:t},zt.createElement(eK,{inputRef:this.inputRef,showWarning:this.state.showWarning,handleShowWarningChange:this.handleShowWarningChange.bind(this)}),zt.createElement("div",{className:"lrn-author-ui lrn-author-tb-tab-container"},zt.createElement(XE,null,zt.createElement(QE,{tabId:"templateDragAndDrop",defaultTab:this.defaultTab,tabBarId:"templateBuilder"},e.get("playerTemplateTab")),zt.createElement(QE,{tabId:"templateSource",defaultTab:this.defaultTab,tabBarId:"templateBuilder"},e.get("playerTemplateSourceTab"))),zt.createElement(lS,null,zt.createElement(sS,{tabId:"templateDragAndDrop",defaultTab:this.defaultTab,tabBarId:"templateBuilder"},zt.createElement(U$,{isMediumBp:this.state.isMediumBp})),zt.createElement(sS,{tabId:"templateSource",defaultTab:this.defaultTab,tabBarId:"templateBuilder"},zt.createElement(hK,null)))))}},{key:"getTemplateBuilderPanels",value:function(){var e={};return(this.state.showDiscardOverlay||this.state.isBelowMinBp||this.state.showDiscardOverlayForInvalidJson)&&(e.display="none"),zt.createElement("div",{style:e},zt.createElement(eK,null),zt.createElement(U$,{isMediumBp:this.state.isMediumBp}))}},{key:"normalizeAndFilterElements",value:function(e,t){var n=a().without(t,"items"),r=a().each(e,(function(e){return a().isArray(e.regions_whitelist)||(e.regions_whitelist=n),e}));return a().omit(r,(function(e,t){return 1===e.regions_whitelist.length&&"menu"===e.regions_whitelist[0]||a().contains(["custom_button","dropdown_element"],t)}))}},{key:"setInitialState",value:function(e){if(this._isMounted){var t=a().keys(window.LearnosityAssess.getRegionDefinitions().REGIONS),n=this.normalizeAndFilterElements(e,t),r=a().deepExtend({},this.state,{elements:n,regionPreset:this.getRegionPresets(n)});this.setState(r),this.props.updateTBRegionNames(t)}}},{key:"getRegionPresets",value:function(e){var t=a().cloneDeep(window.LearnosityAssess.getRegionPresets().main),n=a().keys(e),r=e.slider_element;if(a().each(t,(function(e,r){t[r]=a().filter(e,(function(e){return a().contains(n,e.type)}))})),!r)return t;var i=Dz(t),o=i.sliderIndex,s=i.verticalIndex;return-1===o&&-1===s&&(t.items=[{type:"slider_element",scrollable_option:r.options.scrollable_option.default}]),t}},{key:"handleWidth",value:function(){var e=pD(),t=e<B,n=e>=B&&e<F,r=e>=F;t===this.state.isBelowMinBp&&n===this.state.isMediumBp&&r===this.state.isLargeBp||this.setState(a().deepExtend({},this.state,{isBelowMinBp:t,isMediumBp:n,isLargeBp:r}))}},{key:"close",value:function(){this.props.resetTB(),this.props.setActivityEditMode("edit")}},{key:"onExit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&a().isObject(this.props.selectedElementData)&&this.props.selectedElementData.isSelected)this.props.updateSelectedElementData({});else if(this.isDirty()||this.props.invalidSourceJson){var t=a().deepExtend({},this.state,{showDiscardOverlay:!0});this.setState(t)}else this.close()}},{key:"apply",value:function(){if(!this.props.templatePlayerName)return this.setState({showWarning:!0}),void this.inputRef.current.focus();var e=this.getAnnotationsOptions(),t=e.annotations,n=e.annotationOptions;this.props.updateRegionTemplate({regionConfig:a().cloneDeep(this.props.regionConfig),labelBundle:a().cloneDeep(this.props.labelBundle),additionalConfig:a().cloneDeep(this.props.additionalConfig),annotations:t,annotationOptions:n,reference:this.props.templateReference,name:this.props.templatePlayerName}),this.close()}},{key:"getAnnotationsOptions",value:function(){var e={modules:{drawing:!1,notepad:!1,stickynote:!1}},t=this.props.regionConfig,n=!1;return a().each({drawing_mode_button:"drawing",notepad_button:"notepad",stickynote_add_button:"stickynote"},(function(r,i){(function(e,t){var n=!1;return a().each(e,(function(e){a().each(e,(function(e){e.type===t&&(n=!0)}))})),n})(t,i)&&(n=!0,e.modules[r]=!0)})),{annotations:n,annotationOptions:e}}},{key:"isApplyEnabled",value:function(){return!!this.state.isNewTemplate||!this.props.isMoveInProgress&&!this.props.invalidSourceJson&&(this.state.originalName!==this.props.templatePlayerName||this.props.isDirty)}},{key:"isDirty",value:function(){var e=this.state.isNewTemplate&&JSON.stringify(this.state.regionPreset)!==JSON.stringify(this.props.regionConfig),t=this.state.isNewTemplate&&this.props.templatePlayerName,n=!this.state.isNewTemplate&&this.state.originalName!==this.props.templatePlayerName;return e||t||n}},{key:"hideDiscardOverlay",value:function(){this.setState({showDiscardOverlay:!1,showDiscardOverlayForInvalidJson:!1})}},{key:"renderBreakpointWarning",value:function(){var e=this.context.i18n;return zt.createElement("div",{className:"lrn-author-tb-bp-warning-wrapper"},zt.createElement("div",{className:"lrn-h4"},e.get("playerTemplateBreakpointWarning")),zt.createElement("div",{className:"lrn-author-tb-bp-warning-desc"},e.get("playerTemplateBreakpointWarningDescription")))}}])&&gK(t.prototype,n),r&&gK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);EK.contextTypes={app:jn().object,i18n:jn().object};const SK=Ln((function(e){var t=e.activityEdit.templateBuilder,n=t.labelBundle;return n&&!a().isEmpty(n)||(n=a().getNested(e,"activityEdit.activityJson.data.config.labelBundle")||{}),{regionConfig:t.regionConfig,labelBundle:n,additionalConfig:t.additionalConfig||{},elements:t.elements,templatePlayerName:t.templatePlayerName,templateReference:t.templateReference,selectedElementData:t.selectedElementData,isMoveInProgress:!a().isEmpty(t.draggedElementData)||!a().isEmpty(t.selectedElementData),isDirty:t.isDirty,activeTabName:a().getNested(e,"ui.tab.templateBuilder.activeTabName")||"templateDragAndDrop",invalidSourceJson:t.invalidSourceJson}}),{setActivityEditMode:Cm,updateTBRegionConfig:xz,updateTBRegionNames:function(e){return{type:Uf,data:e}},updateSelectedElementData:Tz,updateTBPlayerName:W$,updateTBReference:function(e){return{type:Hf,data:e}},resetTB:function(){return{type:Nf}},updateRegionTemplate:function(e){return{type:hp,data:e}},updateTBElements:function(e){return{type:If,data:e}},changeTab:am,updateTBSourceInvalid:oK})(EK);function xK(e){return(xK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OK(e,t){return(OK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CK(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=PK(e);if(t){var i=PK(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return AK(this,n)}}function AK(e,t){if(t&&("object"===xK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function PK(e){return(PK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MK=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OK(e,t)}(o,e);var t,n,r,i=CK(o);function o(){return kK(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"fetchOrInitActivity",value:function(){var e=this.props,t=a().getNested(e,"loading"),n=a().getNested(e,"activity.activity_id"),r=a().getNested(this.props,"ui.navigate.route.params.reference")||null,i=a().getNested(e,"activity.reference");n&&-1!==n||!0!==e.isNewActivity?a().isEmpty(r)||r===i||t||e.fetchActivity({payload:{reference:r,config:e.initOptions.config.activity_edit}}):e.newActivityJsonSet||e.initNewActivity({reference:a().uuid(),description:""})}},{key:"triggerRenderActivityIfRequired",value:function(){var e=this.props.ui.navigate.route,t=this.props.activity.reference===e.params.reference,n=Us(e.path,"activities/new"),r=this.props.activity||{},i=a().getNested(r,"data.adaptive"),o=i&&a().isObject(i)?"adaptive":"items";this.props.activity.reference&&(t||n)&&this.props.activityLoaded&&this.props.loadedItems&&!this.props.eventRenderedTriggered&&(this.props.createTriggerRenderActivity(),this.props.createChangeTab("activityEditModeTabBar",o))}},{key:"triggerSaveableChangeIfRequired",value:function(){!this.saveableChangeTriggered&&this.props.activity.reference&&this.props.loadedItems&&!this.props.isNewActivity&&(this.saveableChangeTriggered=!0,this.props.triggerSaveableChanged())}},{key:"getScrollingElement",value:function(e){return e?e.scrollTop>0?e:this.getScrollingElement(e.parentNode):document.documentElement}},{key:"setScrollingPosition",value:function(){this.scrollingElement||(this.scrollingElement=this.getScrollingElement(this.componentNode)),this.scrollTop=this.scrollingElement.scrollTop}},{key:"applyScrollingPosition",value:function(){this.scrollTop&&0!==this.scrollTop&&(this.scrollingElement.scrollTop=this.scrollTop)}},{key:"componentWillUnmount",value:function(){this.props.toggleMode({mode:"edit"}),this.props.createChangeTab("activityEditModeTabBar","items"),this.props.updateTemplateSettings({setting:"templateOptions",stateType:"show",stateValue:!1})}},{key:"UNSAFE_componentWillMount",value:function(){this.props.defaultMode&&this.props.toggleMode({mode:this.props.defaultMode})}},{key:"componentDidMount",value:function(){this.fetchOrInitActivity(),this.triggerRenderActivityIfRequired(),this.returnModeForCustomizeLabels="edit","preview"!==this.props.defaultMode&&Ld.loadLearnosityApi("assess")}},{key:"componentDidUpdate",value:function(e){var t=this.props.ui.navigate.route.params.reference,n=e.ui.navigate.route.params.reference;this.props.loading||t===n||this.fetchOrInitActivity(),this.triggerRenderActivityIfRequired(),this.triggerSaveableChangeIfRequired(),e.itemEdit&&!this.props.itemEdit&&this.applyScrollingPosition()}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.itemEdit&&!this.props.itemEdit&&this.setScrollingPosition()}},{key:"shouldComponentUpdate",value:function(e){return JSON.stringify(e.ui)!==JSON.stringify(this.props.ui)||e.isNewActivity!==this.props.isNewActivity||(e.mode!==this.props.mode?("customize_labels"===e.mode&&(this.returnModeForCustomizeLabels=this.props.mode),!0):e.loadedItems!==this.props.loadedItems||e.showDuplicateMessage!==this.props.showDuplicateMessage||e.duplicateErrorCode!==this.props.duplicateErrorCode||e.showRestrictedOrMissingItemWarningMessage!==this.props.showRestrictedOrMissingItemWarningMessage||e.showPreviewDisabledWarningMessage!==this.props.showPreviewDisabledWarningMessage||e.activity.reference!==this.props.activity.reference)}},{key:"renderContent",value:function(){return"edit"===this.props.mode?zt.createElement(Jx,null):"preview"===this.props.mode?zt.createElement(DU,null):void 0}},{key:"renderShallowDuplicateMessage",value:function(){var e=this,t=this.context.i18n,n=this.props.duplicateErrorCode;if(!a().isUndefined(n)){var r=30001===n?t.get("duplicateActivityShallowDuplicateMissingItemsError"):t.get("duplicateActivityShallowDuplicateDefaultError");return zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},zt.createElement(gg,{type:"error",onDismiss:function(){return e.props.updateShowDuplicateMessage({show:!1})}},r))}return zt.createElement(ZY,{extraWrapperClasses:"lrn-success-message-wrapper lrn-success-message",text:t.get("duplicateActivityShallowDuplicateSuccessMessage"),onClick:function(){return e.props.updateShowDuplicateMessage({show:!1})}})}},{key:"render",value:function(){var e,t=this,n=this.context.i18n,r=a().getNested(this.props.initOptions,"config.activity_edit.back"),i=a().getNested(this.props.initOptions,"config.activity_edit.save.show"),o=this.props.itemEdit?{display:" none"}:{};return this.props.showPreviewDisabledWarningMessage?e="activityWithUnpublishedItemsPreviewDisabled":this.props.showRestrictedOrMissingItemWarningMessage&&(e="activityRestrictedOrMissingItems"),"confirm_duplicate"===this.props.mode?zt.createElement(WU,null):"customize_labels"===this.props.mode?zt.createElement(gW,{returnMode:this.returnModeForCustomizeLabels}):"player_templates"===this.props.mode?zt.createElement(SK,null):zt.createElement("div",{className:"lrn-author-ui"},this.props.itemEdit&&this.props.loadedItems&&zt.createElement(_U,null),zt.createElement("section",{className:"lrn-author-activity-edit lrn-activity-edit",style:o,ref:function(e){return t.componentNode=e}},zt.createElement("div",{className:"lrn-author-item-nav lrn-author-ui-no-preview","data-authorapi-selector":"nav-bar"},zt.createElement("div",{className:"lrn-author-item-nav-left"},r&&zt.createElement(tW,null)),zt.createElement("div",{className:"lrn-author-item-nav-right"},i&&zt.createElement(Wm,null))),this.props.showDuplicateMessage&&this.renderShallowDuplicateMessage(),e&&30001!==this.props.duplicateErrorCode&&zt.createElement(nT,{extraWrapperClasses:"lrn-warning-message-wrapper lrn-warning-message",text:n.get(e)}),zt.createElement(bb,{isItemEditVisible:this.props.itemEdit}),this.renderContent()))}}])&&TK(t.prototype,n),r&&TK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);MK.contextTypes={i18n:jn().object};const DK=function(e){return Ln((function(e){var t=e.activityEdit.activityJson.activity_id,n=e.activityEdit.items[t],r=!1;n&&n.forEach((function(e){e.isRestrictedOrMissing&&(r=!0)}));var i=a().findWhere(n,{status:"unpublished"}),o=a().getNested(e.initOptions,"config.activity_edit.mode.default");return{activity:e.activityEdit.activityJson,activityLoaded:e.activityEdit.activityLoaded,eventRenderedTriggered:e.activityEdit.eventRenderedTriggered,initOptions:e.initOptions,loadedItems:e.activityEdit.loadedItems,loading:e.activityEdit.loading,mode:e.activityEdit.mode,defaultMode:o,newActivityJsonSet:e.activityEdit.newActivityJsonSet,showDuplicateMessage:e.activityEdit.showDuplicateMessage,duplicateErrorCode:e.activityEdit.duplicateErrorCode,showRestrictedOrMissingItemWarningMessage:r,showPreviewDisabledWarningMessage:void 0!==i,ui:e.ui}}),{createChangeTab:am,toggleMode:Uv.createToggleMode,createTriggerRenderActivity:nW,fetchActivity:nh,initNewActivity:Wp,updateShowDuplicateMessage:wh,updateTemplateSettings:Uv.createUpdateSettingsUiState,triggerSaveableChanged:rW})(e)}(MK);function RK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var LK=[{path:"activities",handler:"_showActivityList"},{path:"activities/search/:query",handler:"_showActivityList"},{path:"activities/:reference/searchItems",handler:"_showItemListForActivityList"},{path:"activities/:reference/searchItems/:query",handler:"_showItemListForActivityList"},{path:"activities/:reference/searchItems/itemBank/:ibName",handler:"_showItemsInIbForActivity"},{path:"activities/:reference/searchItems/itemBank/:ibName/:query",handler:"_showItemsInIbForActivity"},{path:"activities/:reference/pickIntroItem",handler:"_pickIntroItem"},{path:"activities/:reference/pickIntroItem/:query",handler:"_pickIntroItem"},{path:"activities/:reference/pickIntroItem/itemBank/:ibName",handler:"_pickIntroItemInItemBank"},{path:"activities/:reference/pickIntroItem/itemBank/:ibName/:query",handler:"_pickIntroItemInItemBank"},{path:"activities/:itemReference/pickOutroItem",handler:"_pickOutroItem"},{path:"activities/:reference/pickOutroItem/:query",handler:"_pickOutroItem"},{path:"activities/:reference/pickOutroItem/itemBank/:ibName",handler:"_pickOutroItemInItemBank"},{path:"activities/:reference/pickOutroItem/itemBank/:ibName/:query",handler:"_pickOutroItemInItemBank"},{path:"activities/:reference/pickResourceItem",handler:"_pickResourceItem"},{path:"activities/:reference/pickResourceItem/:query",handler:"_pickResourceItem"},{path:"activities/:reference/pickResourceItem/itemBank/:ibName",handler:"_pickResourceItemInItemBank"},{path:"activities/:reference/pickResourceItem/itemBank/:ibName/:query",handler:"_pickResourceItemInItemBank"}],NK=[{path:"activities/:reference/items/:idOrReference/settings/:tab",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/settings",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/workflow",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/widgets/:widgetReference/:widgetData",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/widgets/:widgetReference",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/questionList/search/:query",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference/questionList",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/new/items/new",handler:DK,mode:"activity_edit",props:{itemEdit:!0,isNewActivity:!0}},{path:"activities/:reference/items/new",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/:reference/items/:idOrReference",handler:DK,mode:"activity_edit",props:{itemEdit:!0}},{path:"activities/new/adaptive",handler:DK,props:{isNewActivity:!0},mode:"activity_edit"},{path:"activities/new",handler:DK,props:{isNewActivity:!0},mode:"activity_edit"},{path:"activities/:reference",handler:DK,mode:"activity_edit"}],IK=[{path:"items/:itemReference/settings/:tab",handler:sU,mode:"item_edit"},{path:"items/:itemReference/settings",handler:sU,mode:"item_edit"},{path:"items/:itemReference/workflow",handler:sU,mode:"item_edit"},{path:"items/:itemReference/widgets/:widgetReference/:widgetData",handler:sU,mode:"item_edit"},{path:"items/:itemReference/widgets/:widgetReference",handler:sU,mode:"item_edit"},{path:"items/:itemReference/questionList/search/:query",handler:sU,mode:"item_edit"},{path:"items/:itemReference/questionList",handler:sU,mode:"item_edit"},{path:"items/:itemReference",handler:sU,mode:"item_edit"},{path:"item/:itemReference",handler:sU,mode:"item_edit"}];const jK=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getRoutes",value:function(e){return this.routes=e?function(e){var t={};return e.forEach((function(e){t[e.path]=e.handler})),t}(LK):NK.concat(IK),this.routes}}])&&RK(t.prototype,n),r&&RK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());var BK="activitySearchParams",FK="searchParams",YK=function(e,t){return e&&(t+="/itemBank/"+window.encodeURIComponent(e)),t};a().extend(qv.prototype,{initialize:function(e){var t=e.controller.initOptionsModel.getMode();this.routes=jK.getRoutes(!0),"item_list"===t&&a().extend(this.routes,this.ITEM_LIST_MODE_ROUTES),this._tmp={}},isNewItemRoute:function(){return 0===this._locationState.current.indexOf("items/new")},navigateBackToActivityList:function(e){var t=this.options.controller.dataManager,n=this._getSearchParams(BK),r=this.options.controller.dataManager.getActivityCollection();if(e){var i=t.getActivity(e),o=this.options.controller.app.shell&&a().getNested(this.options.controller.app.shell.getState(),"activityEdit.isSaved");this._tmp.activityListComponentData={noFetch:r&&(r.hasFetched||r.isFetching),isSaved:o,activityModel:i}}n?this.navigateToActivityListSearchQuery(n):this.navigate("activities")},navigateBackToItemList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r=this.options.controller,i=r.dataManager.getItemCollection(),o=this._getSearchParams(FK);if(t){var a=r.app.component.dataManager.schemasUtil;n.questions=a.getDetailedQuestions(n.questions),n.features=a.getDetailedFeatures(n.features),(n=new iv(n,{comms:r.comms,schemasUtil:a,initOptionsModel:r.initOptionsModel,dataManager:r.dataManager})).saved=e.saved}this._tmp.itemListComponentData={noFetch:i&&(i.hasFetched||i.isFetching),itemModel:n},o?this.navigateToItemSearchQuery(o):this.navigate("items")},navigateToDefaultLocation:function(){this.navigate(this._getDefaultLocation())},navigateToActivity:function(e){a().isObject(e)&&(e=JSON.stringify(e)),this.navigate("activities/"+window.encodeURIComponent(e))},navigateToItem:function(e){a().isObject(e)&&(e=JSON.stringify(e)),this.navigate("items/"+window.encodeURIComponent(e))},navigateToItemSearchQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||this._getSearchParams(FK);n?this.navigate("items/search/"+window.encodeURIComponent(n),{forceNavigate:t}):this.navigate("items",{forceNavigate:t}),n?this.options.appState.store(FK,n):this.options.appState.removeFromStorage(FK)},navigateBaseUrl:function(e,t){t?this.navigate(e+"/"+window.encodeURIComponent(t)):this.navigate(e)},navigateToItemForActivitySearchQuery:function(e,t,n){var r="activities/"+(e=window.encodeURIComponent(e))+"/searchItems";r=YK(n,r),this.navigateBaseUrl(r,t)},navigateToIntroItemPicker:function(e,t,n){this._navigateToItemPicker(e,!0,t,n)},navigateToOutroItemPicker:function(e,t,n){this._navigateToItemPicker(e,!1,t,n)},_navigateToItemPicker:function(e,t,n,r){var i="activities/"+(e=window.encodeURIComponent(e));i=YK(r,i+=t?"/pickIntroItem":"/pickOutroItem"),this.navigateBaseUrl(i,n)},navigateToResourcePicker:function(e,t,n){var r="activities/"+(e=window.encodeURIComponent(e))+"/pickResourceItem";r=YK(n,r),this.navigateBaseUrl(r,t)},navigateToActivityListSearchQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||this._getSearchParams(BK);n?this.navigate("activities/search/"+window.encodeURIComponent(n),{forceNavigate:t}):this.navigate("activities",{forceNavigate:t}),n?this.options.appState.store(BK,n):this.options.appState.removeFromStorage(BK)},_getDefaultLocation:function(){var e=this.options.controller.initOptionsModel,t=[];switch(e.getMode()){case"item_list":t.push("items");break;case"item_edit":t.push("items"),e.has("reference")?!1!==e.get("reference")&&t.push(window.encodeURIComponent(e.get("reference"))):t.push("new");break;case"activity_list":t.push("activities");break;case"activity_edit":t.push("activities"),e.has("reference")?t.push(window.encodeURIComponent(e.get("reference"))):t.push("new");break;default:return}return t.join("/")},_getSearchParams:function(e){var t,n=this.options.controller.getSearchModel();return n||(n=(t=this.options.appState.retrieve(e))&&new I(window.JSON.parse(t))),n&&!n.isEmpty()&&n.toURIComponent()},_showActivityList:function(e){var t=this._tmp.activityListComponentData,n=e&&JSON.parse(e);this.options.controller.showActivityList(n,t),delete this._tmp.activityListComponentData},_showItemList:function(e){var t=this._tmp.itemListComponentData,n=e&&JSON.parse(e);this.options.controller.showItemList(n,t),delete this._tmp.itemListComponentData},_showItemListForActivityList:function(e,t){var n=this.options.controller,r=t&&JSON.parse(t);n.showItemListForActivityList(r,{activityReference:e})},_showItemsInIbForActivity:function(e,t,n){var r=this.options.controller,i=n&&JSON.parse(n);r.showItemListForActivityList(i,{activityReference:e,ibName:t})},_pickResourceItem:function(e,t){var n=this.options.controller,r=t&&JSON.parse(t);n.showItemListForActivityList(r,{activityReference:e,itemType:"resourceItem"})},_pickResourceItemInItemBank:function(e,t,n){var r=this.options.controller,i=n&&JSON.parse(n);r.showItemListForActivityList(i,{activityReference:e,ibName:t,itemType:"resourceItem"})},_pickIntroItem:function(e,t){this._showIntroOutroItemListForActivityList(e,t,!0)},_pickOutroItem:function(e,t){this._showIntroOutroItemListForActivityList(e,t,!1)},_pickIntroItemInItemBank:function(e,t,n){this._showIntroOutroItemListForActivityList(e,n,!0,t)},_pickOutroItemInItemBank:function(e,t,n){this._showIntroOutroItemListForActivityList(e,n,!1,t)},_showIntroOutroItemListForActivityList:function(e,t,n,r){var i=this.options.controller,o=t&&JSON.parse(t);i.showItemListForActivityList(o,{activityReference:e,ibName:r,itemType:n?"introItem":"outroItem"})},_triggerOpenActivity:function(e){var t=new sd(sd.EVENTS.openActivity),n=e&&this.options.controller.findActivity(e);return n&&t.setData(n.toJSON({prettify:!0},{clone:!1})),this.options.controller.triggerPublicEvent(t),t},_triggerOpenItem:function(e){var t=new sd(sd.EVENTS.openItem),n=e&&this.options.controller.findItem(e);if(n){var r=n.toJSON({prettify:!0},{clone:!1});r=a().omit(r,"questions","features"),t.setData(r)}return this.options.controller.triggerPublicEvent(t),t}});const HK=qv;var VK={debounceWait:300},qK=function(e,t){this.view=e,this.config=a().extend({},VK,t)};a().extend(qK.prototype,{startApplyingBreakpoints:function(){this.applyBreakpoints(),this.startListening()},applyBreakpoints:function(){this.shouldBuildGeneralSearch(!0)?this.view.trigger("buildGeneralSearch"):this.view.trigger("resetGeneralSearch")},shouldBuildGeneralSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.view.$el.width(),n=[];return a().each(this.getBreakpoints(),(function(r){e&&this.view.$el.removeClass(r.className),r.width<=t&&(n.push(r.width),this.view.$el.addClass(r.className))}),this),a().last(n)<=this.view.BREAKPOINTS["lrn-md"]},getBreakpoints:function(){var e=this.view.BREAKPOINTS||this.view.breakpoints||{};return a().chain(e).map((function(e,t){return{className:t,width:e}})).sortBy((function(e){return e.width})).value()},startListening:function(){var e=this;this.lazyApply=a().debounce((function(){e.applyBreakpoints()}),this.config.debounceWait),this.view.$el.resize(this.lazyApply)},stopApplyingBreakpoints:function(){this.view.$el.removeResize(this.lazyApply)}});const UK=qK;function WK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zK=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=a().uniqueId("author_"),r=this;this.SELECTORS={CONTAINER_PREFIX:n+"_draggable_container_",DRAG_CLONE:n+"_draggable_clone",FLEX_ROW:".lrn-author-row-flex"},this.reorderableInstances=[],this.defaultDragulaOptions={moves:function(e,t,n){var i=n.classList.contains("lrn-i-drag");if(i&&r.selectedItems&&r.selectedItems.length>0){if(r.selectedItems.length===r.collection.length)return!1;var o=f()(e).attr("id"),a=r.collection.findWhere({item_id:o});return r.selectedItems.indexOf(a)>-1}return i}},this.wrapper=t.wrapper}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t,n,r,i){var o=this,s={reorderableId:a().uniqueId()},l=this.SELECTORS.CONTAINER_PREFIX+s.reorderableId;if(o.collection=t,e.attr("id")||e.hasClass("lrn-author-draggable"))return!1;this._convertContainerToDraggable(s.reorderableId,e),this.reorderableInstances.push(s),s.dragulaOptions=a().clone(this.defaultDragulaOptions);var u=this.wrapper.find("#"+l)[0];if(!u)return this.remove(s.reorderableId),!1;var c=KR()([u],s.dragulaOptions).on("drag",o.dragHandler(u,l,s).bind(this)).on("drop",o.dropHandler(n,r,i).bind(this)).on("dragend",o.dragendHandler(l).bind(this));return u.addEventListener("touchmove",(function(){})),s.dragula=c,s.reorderableId}},{key:"dragHandler",value:function(e,t,n){return function(){var r=!!f()(e).parent(this.SELECTORS.FLEX_ROW).length,i='<div class="'.concat(r?"lrn-author-draggable lrn-author-draggable-flex":"lrn-author-draggable",'" id="').concat(this.SELECTORS.DRAG_CLONE,'"></div>');f()(e).append(i),n.dragulaOptions.mirrorContainer=document.getElementById(this.SELECTORS.DRAG_CLONE),f()("#"+t).toggleClass("gu-container")}}},{key:"dragendHandler",value:function(e){return function(){f()("#"+this.SELECTORS.DRAG_CLONE).remove(),f()("#"+e).toggleClass("gu-container")}}},{key:"dropHandler",value:function(e,t,n){return function(r,i){var o=this,s=[],l=[],u=this._getChildOrder(i);(u=this._handleMultiDrag(u,r)).forEach((function(e,n){var r=o.collection.findWhere({item_id:e}),i=a().findWhere(t,{model:r}),u=t.indexOf(i);t.splice(n,0,t.splice(u,1)[0]),l.push(r.get("reference")),s.push(r)})),this.collection.reset(s),this.collection.state.references=l,e.attributes.data.items=l,n()}}},{key:"_handleMultiDrag",value:function(e,t){var n=f()(t).attr("id"),r=this.collection.findWhere({item_id:n}),i=r?r.get("reference"):"",o=[],a=e.slice();if(this.selectedItems&&this.selectedItems.length){this.selectedItems.forEach((function(e){e.get("reference")!==i&&o.push(e.get("item_id"))}));var s=a.indexOf(n)+1,l=t;o.forEach((function(e){var t=a.indexOf(e),n=f()("#".concat(e)),r=a.splice(t,1)[0];a.splice(s,0,r),s++,n.insertAfter(l),l=n}))}return a}},{key:"updateReferences",value:function(e){this.selectedItems=e}},{key:"remove",value:function(e){var t=this._findIndexInReorderableInstances(e),n=this.SELECTORS.CONTAINER_PREFIX+e,r=f()("#"+n);t>-1&&(this.reorderableInstances[t].dragula&&this.reorderableInstances[t].dragula.destroy(),this.reorderableInstances.splice(t,1),r&&(r.removeClass("lrn-author-draggable"),r.removeAttr("id")))}},{key:"removeAll",value:function(){var e=this;this.reorderableInstances.forEach((function(t){e.remove(t.reorderableId)}))}},{key:"_findIndexInReorderableInstances",value:function(e){return a().findIndex(this.reorderableInstances,{reorderableId:e})}},{key:"_convertContainerToDraggable",value:function(e,t){var n=this.SELECTORS.CONTAINER_PREFIX+e;t.addClass("lrn-author-draggable"),t.attr("id",n)}},{key:"_getChildOrder",value:function(e){var t,n=[];for(t=0;t<e.children.length;t++){var r=f()(e.children[t]).attr("id");r!==this.SELECTORS.DRAG_CLONE&&n.push(r)}return n}}])&&WK(t.prototype,n),r&&WK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const GK=function(e){return{type:LU,data:{elapsedTime:e}}};const $K=function(){return{type:Qd}},KK=c.View.extend({onMessages:{changeComponent:"changeComponent",publicEvent:"triggerPublicEvent",startLoadingRequest:"startLoadingRequest",completeLoadingRequest:"completeLoadingRequest",scrollIntoView:"scrollIntoView",removeHeight:"removeHeight",applyBreakpoints:"applyBreakpoints"},BREAKPOINTS:{"lrn-res":0,"lrn-sm":615,"lrn-md":800,"lrn-large":1170},SELECTORS:{mainContainer:j},heightAndScrollTopConditions:{activity_edit:"activity_list"},initialize:function(e){this.responsiveUtil=new UK(this),this.addResponsiveListeners(),this.publicEvents=a().extend({},c.Events),this.metricsUtil=e.metricsUtil,c.Courier.add(this),this.dataManager=new Iv({comms:e.comms,initOptionsModel:e.initOptionsModel,activityDuplicateJobPollCallback:a().bind(this.onActivityDuplicateJobPoll,this),activityDuplicationCallback:a().bind(this.onActivityDuplicationSuccess,this)}),this.appState=new Oy([],{consumerKey:e.consumerKey}),this.router=new HK({appState:this.appState,controller:this,uuid:e.uuid}),this.app=e.app,this.setElement(e.dom),this.responsiveUtil.startApplyingBreakpoints(),this.$mainContainer=f()(this.SELECTORS.mainContainer),this.$scrollContainer=this.$mainContainer;var t=this.initOptionsModel.getScrollIntoViewContainerSelector();t&&(this.$scrollContainer=f()(t)),this.setupReorderable()},addResponsiveListeners:function(){var e=this;this.on("buildGeneralSearch",(function(){e.componentView&&a().isFunction(e.componentView.buildGeneralSearch)&&e.componentView.buildGeneralSearch()})),this.on("resetGeneralSearch",(function(){e.componentView&&a().isFunction(e.componentView.resetGeneralSearch)&&e.componentView.resetGeneralSearch()}))},setupReorderable:function(){this.reorderable=new zK({wrapper:this.$el})},cleanUpReorderable:function(){this.reorderable.removeAll()},navigateToDefaultLocation:function(){a().defer(a().bind((function(){this.getLocation()||this.router.navigateToDefaultLocation()}),this))},remove:function(){this.responsiveUtil.stopApplyingBreakpoints(),c.View.prototype.remove.call(this)},getComponentView:function(e){switch(e){case"activity_list":return Ty;case"item_list":return ld;case"item_for_activity_list":return Tg}},getComponentConfig:function(e,t){var n=this.initOptionsModel.getConfigByMode(e);return t&&(n=a().merge(n,t)),n},getQuestionsInstance:function(){return!!this.questionsApp&&this.questionsApp},changeComponent:function(e,t){this.preventChangeScrollPosition?this.preventChangeScrollPosition=!1:this.setContainerHeightAndScrollPosition(e),this.removeComponentView(),this.insertLoadingPanel(),e.state=t||this.appState.getComponentState(e.mode),"none"===e.mode||(this.componentView=this.createComponentView(e),this.insertView(this.componentView).render()),this.currentComponentMode=e.mode},setContainerHeightAndScrollPosition:function(e){var t=e.mode,n=this.appState.getComponentState(t);if(this.componentView){var r,i,o,a=n.get("height"),s=n.get("scrollTop");this.$mainContainer.parents().each((function(){var e=f()(this);if(e.scrollTop())return o=e,!1})),o&&(this.scrolledParent=o),this.componentView&&(r=this.componentView.mode,(i=this.appState.getComponentState(r)).set("height",this.$mainContainer.height()),this.scrolledParent&&(i.set("scrollTop",this.scrolledParent.scrollTop()),i.set("scrolledParent",this.scrolledParent)),"none"===t)||(n.set("scrollIntoView",!1),this.heightAndScrollTopConditions[r]===t?(this.$mainContainer.height(a),s<5&&(s=0),this.scrolledParent&&this.scrolledParent.scrollTop(s)):(this.scrollIntoView(!0),n.set("scrollIntoView",!0)))}else{var l=n.get("height");if("item_list"===t&&l){this.$mainContainer.height(n.get("height"));var u=n.get("scrollTop");u&&n.get("scrolledParent").scrollTop(u)}else n.set("scrollIntoView",!0)}},createComponentView:function(e){var t=this.getComponentView(e.mode);if("item_for_activity_list"===e.mode){var n=this.getComponentConfig("activity_edit",e.config),r={show:n.item_title.show||n.item_search.title.show,show_reference:n.item_search.title.show_reference};e.config=a().extend({item:{title:r},questions_api:this.initOptionsModel.getQuestionsApiConfig()},n.item_search)}else e.config=this.getComponentConfig(e.mode,e.config),"item_list"===e.mode&&(e.shouldBuildGeneralSearch=this.responsiveUtil.shouldBuildGeneralSearch());return e.el=!1,e.router=this.router,e.initOptionsModel=this.initOptionsModel,e.componentController=this,e.questionsApp=this.questionsApp,e.questionsAppReadyListener=a().bind(this.questionsAppReadyListener,this),e.reorderable=this.reorderable,e.i18n=this.i18n,new t(e,this.dataManager,this.errorUtil,this.metricsUtil,this.consumerKey)},setQuestionsApp:function(e){this.questionsApp=e},questionsAppReadyListener:function(){var e=a().isFunction(this.componentView.getItemView)?this.componentView.getItemView():this.componentView;e&&(a().isFunction(e.questionsReady)&&e.questionsReady.apply(e,arguments),this.setQuestionsApp(e.questionsApp))},removeComponentView:function(){this.componentView&&(this.componentView.remove(),this.componentView=void 0,this.cleanUpReorderable())},setItem:function(e,t){return this.dataManager.fetchItem(e).then(a().bind((function(n){var r=n.data&&n.data.item;r&&t.itemMustntExist?this.errorUtil.handle("An item with reference `"+e+"` already exists"):!r&&t.itemMustExist?this.errorUtil.handle("No item with reference `"+e+"` was found"):this.router.navigateToItem(e)}),this)).catch((function(){}))},createItem:function(e){this.setItem(e,{itemMustntExist:!0})},showItemList:function(e,t){this.componentView&&"item_list"===this.componentView.mode?(this.removeHeight(),this.componentView.searchItems(e)):this.changeComponent(a().extend({mode:"item_list",search:e},t))},showItemListForActivityList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.componentView&&"item_for_activity_list"===this.componentView.mode;n?(t.ibName&&(e.ibName=t.ibName),this.componentView.searchItems(e)):this.changeComponent(a().extend({mode:"item_for_activity_list",search:e},t))},showActivityList:function(e,t){var n="activity_list";this.componentView&&this.componentView.mode===n?(this.removeHeight(),this.componentView.searchActivities(e)):this.changeComponent(a().extend({mode:n,search:e},t))},triggerPublicEvent:function(e){if(!(e instanceof sd))throw"Missing `PublicEvent` instance";try{this.publicEvents.trigger(e.name,e)}catch(t){a().defer((function(){throw t})),e.preventDefault()}},insertLoadingPanel:function(){this.loadingPanel||(this.loadingPanel=new Od({el:!1}),this.$el.prepend(this.loadingPanel.render().$el))},startLoadingRequest:function(e){this.loadingPanel.startLoadingRequest(e)},completeLoadingRequest:function(e){this.loadingPanel.completeLoadingRequest(e)},getLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.router.getLocation(e)},findItem:function(e){var t=this.dataManager.getItemCollection();return t&&t.findWhere({reference:e})},getItemList:function(){var e=this.getMode();if(!a().contains(["item_list","item_for_activity_list"],e))return!1;var t=!!this.appState.findWhere({component:this.getMode()});if("item_for_activity_list"===e){var n=this.componentView&&this.componentView.itemType;"introItem"===n?e="item_list_for_intro_item":"outroItem"===n&&(e="item_list_for_outro_item")}var r=this.dataManager.getItemCollection(e);return!!r&&t&&a().pluck(r.toJSON({prettify:!0}),"item")},clearSelectedItems:function(){return!(!this.initOptionsModel.isItemListSelectionEnabled()||!this.componentView||"item_list"!==this.componentView.mode)&&this.componentView.clearSelectedItemReferences()},getSelectedItems:function(){if(this.initOptionsModel.isItemListSelectionEnabled()&&this.componentView&&"item_list"===this.componentView.mode){var e=this.componentView.getSelectedItemReferences();return!!e.length&&this.dataManager.fetchSelectedItems(e)}return!1},fetchItems:function(e){var t=this.dataManager.getItemCollection(this.getMode());return new S(a().bind((function(t,n){this.comms.request({url:this.url,action:"get",data:e,disableErrorAlert:!0,disableErrorTracking:!0}).done((function(e){t({items:e.data,next:e.meta.next})})).fail((function(){n(!1)}))}),t))},fetchActivities:function(e){var t=this.dataManager.getActivityCollection();return new S(a().bind((function(t,n){this.comms.request({url:this.url,action:"get",data:e,disableErrorAlert:!0,disableErrorTracking:!0}).done((function(e){t({activities:e.data,next:e.meta.next})})).fail((function(){n(!1)}))}),t))},getMode:function(){return this.componentView?this.componentView.mode:"item_list"},getSearchModel:function(){var e=this.appState.getComponentState(this.currentComponentMode);return e&&e.get("search")},getSearch:function(e){if(!this.componentView||!a().contains(["item_list","activity_list"],this.componentView.mode))return!1;var t,n=!!this.appState.findWhere({component:this.componentView.mode});if("item_list"===this.componentView.mode?t=this.dataManager.getItemCollection(this.componentView.mode):"activity_list"===this.componentView.mode&&(t=this.dataManager.getActivityCollection()),!t||!n)return!1;var r=a().cloneDeep(t.state);return a().has(e,"next")&&e.next||delete r.next,r},findActivity:function(e){var t=this.dataManager.getActivityCollection();return t&&t.findWhere({reference:e})},safeToUnload:function(){return!0},getNewItemReference:function(){return this.initOptionsModel.getReferencePrefixForNewItem()+a().uuid()},closeItemListForActivityList:function(){this.changeComponent({mode:"activity_edit",noFetch:!0,activityMode:"edit"})},scrollIntoView:function(e){!0===e?this.$mainContainer.height(this.$mainContainer.height()):this.removeHeight(),this.scrolledParent&&this.scrolledParent.scrollTop()>this.$mainContainer.offset().top&&this.$scrollContainer[0].scrollIntoView()},removeHeight:function(){this.$mainContainer.height("")},editActivity:function(e){var t=this;return this.dataManager.fetchActivity(e).then((function(n){a().getNested(n,"data.activity")?t.router.navigateToActivity(e):t.errorUtil.handle("No activity with reference ".concat(e)+" was found")}))},getActivityList:function(){var e=!!this.appState.findWhere({component:"activity_list"}),t=this.dataManager.getActivityCollection();return!!t&&e&&t.toJSON({prettify:!0})},setShellCallback:function(e){this._shellCallback=e},preventChangeScrollPositionOnce:function(){this.preventChangeScrollPosition=!0},onActivityDuplicateJobPoll:function(e){this.app.shell.dispatch(GK(e))},onActivityDuplicationSuccess:function(e){e.hasError?this.app.shell.dispatch(bh()):this.app.shell.dispatch($K())},applyBreakpoints:function(){this.responsiveUtil&&this.responsiveUtil.applyBreakpoints()},getContext:function(){return this.app.shell.getContext()}}),ZK={modes:["activity_list","activity_edit","item_edit","item_list"],item_templates:["single_question","single_widget","feature_question","dynamic"],dom_id:"learnosity-author",config:{beta_flags:{handlebars:!1,lds:!0},item_edit:{item:{add:!0,save:!0,back:!0,status:!1,reference:{show:!1,edit:!1},details:{status:{show:!0,edit:!0},scoring_type:{show:!0,edit:!0},description:{show:!0,edit:!0},source:{show:!1,edit:!0},note:{show:!1,edit:!0},acknowledgements:{show:!1,edit:!0},difficulty:{show:!0,edit:!0}},mode:{default:"edit",show:!0},template:{type:"dynamic"},dynamic_content:!1,dynamic_image_tag:!1,enable_audio_recording:!1,columns:!0,tabs:!0,sidebars:!0,scoring:!0,answers:!0,tags:{show:!0},title:{show:!1,edit:!0,mandatory:!1},shared_passage:!0,actions:{show:!1}},widget:{delete:!0,edit:!0},settings:{show:!0,full_height:!1},tags_on_create:[]},widget_templates:{save:!0,back:!0,require_validation:!1,widget_types:{default:"questions",show:!0}},item_list:{limit:10,toolbar:{add:!0},item:{status:!0,title:{show:!1,show_reference:!0}},back:!0,filter:{restricted:{current_user:!1,status:[]}},search:{show:!0,controls:[],widget_type:!0,status:!0,tags:{show:!0}}},question_list:{limit:10,back:!0},activity_list:{limit:25,status:!0,filter:{restricted:{current_user:!1,status:[]}},title:{show:!1,show_reference:!0},toolbar:{add:!0,search:!0,add_adaptive:!1}},activity_edit:{annotations:{enable:!0},difficulty:{show:!1,edit:!0},adaptive_fields:{show:!1},duplicate:{show:!0,deep_copy:!1,duplicate_shared_passages:!1},back:!0,source:!0,item:{add:{show:!0},edit:{allow:!0},status:{show:!0},title:{show:!1,show_reference:!0}},reference:{edit:!0,show:!0},save:{show:!0,persist:!0},status:{show:!0},item_title:{show:!1},mode:{default:"edit",show:!0},activity_preview:{item:{reference:{show:!1}}},item_search:{limit:25,show:!0,back:!0,sort:!0,title:{show:!1,show_reference:!0}},tags:{show:!0,edit:!0},tags_on_create:[],player_template_builder:{show:!1},player:{administration:{show:!1,show_exit:{show:!0,edit:!0},show_extend:{show:!0,edit:!0},show_save:{show:!0,edit:!0}},playback:{show:!0,distractor_rationale:{show:!0,edit:!0},distractor_rationale_response_level:{show:!0,edit:!0},scroll_to_top:{show:!0,edit:!0},scrolling_indicator:{show:!0,edit:!0},show_acknowledgements:{show:!0,edit:!0},shuffle_items:{show:!0,edit:!0},skip_submit_confirmation:{show:!0,edit:!0},submit_criteria:{show:!0,edit:!0},warning_on_change:{show:!0,edit:!0}},scoring:{show:!0,client_side_scoring:{show:!0,edit:!0}},text:{show:!0,font_size:{show:!0,edit:!0}},time:{show:!0,auto_save:{show:!0,edit:!0,ui:{show:!0,edit:!0},disable_force_save_on_quit:{show:!0,edit:!0}},idle_timeout:{show:!0,edit:!0,countdown_time:{show:!0,edit:!0}},limit_type:{show:!0,edit:!0},reading_mode:{goto_first_item_on_reading_time_completion:{show:!0,edit:!0},warning_time:{show:!0,edit:!0}},warning_time:{show:!0,edit:!0}}},title:{show:!1,edit:!0,mandatory:!1},customize_presets:{enable:!0},override_labels:{enable:!0},item_edit:{settings:{show:void 0}},resource_item:{show:!0}},global:{hide_tags:[],ab_standards:{enable:!1,aligned_tag_type:"lrn_ab_aligned",tag_standard_hierarchy:!1,edit_standards:!0,filter:!0},workflow:{item:{comments:{show:!0,add:!0}}},items:{read_only:{enabled:!1,filter:{either:[],duplicate:!1}}}},container:{height:"auto",fixed_footer_height:0,scroll_into_view_selector:!1},dependencies:{question_editor_api:{init_options:{dependencies:{questions_api:{}}},preload:!0},questions_api:{init_options:{mirror_visibility:!0}},items_api:{init_options:{}}}}};function JK(e){return(JK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var QK={object:{name:"object",checker:function(e){return a().isObject(e)&&!a().isFunction(e)&&!a().isArray(e)}},array:{name:"array",checker:a().isArray},boolean:{name:"boolean",checker:a().isBoolean},number:{name:"number",checker:a().isNumber},string:{name:"string",checker:a().isString},function:{name:"function",checker:a().isFunction}},XK=function(e){var t=JK(e),n=a().find(Object.keys(QK),(function(t){return QK[t].checker(e)}));return n&&(t=n),t},eZ={type:QK.boolean},tZ={type:QK.string},nZ={type:QK.array},rZ=function(e){return{type:QK.object,children:e}},iZ={type:QK.object,children:{show:eZ,edit:eZ}},oZ={type:QK.object,children:{show:eZ}},aZ={type:QK.object,children:{allow:eZ}},sZ={type:QK.object,children:{show:eZ}},lZ={type:QK.object,children:{show:eZ}},uZ={type:QK.object,children:{show:eZ,show_reference:eZ}},cZ={type:QK.object,children:{enable:eZ}},dZ={type:QK.object,children:{add:eZ,search:eZ,add_adaptive:eZ}},fZ={type:QK.object,children:{status:iZ,source:iZ,note:iZ,acknowledgements:iZ,scoring_type:iZ,description:iZ,difficulty:iZ}},pZ={type:QK.object,children:{add:oZ,edit:aZ,status:sZ}},hZ=rZ({delete:eZ,edit:eZ}),mZ=rZ({save:eZ,back:eZ,require_validation:eZ,widget_types:rZ({default:tZ,show:eZ})}),gZ=iZ,yZ={type:QK.object,children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=XK(e[n]);return QK[r]&&(t[n]={type:QK[r]}),t}),{})}(Qs())},vZ={type:QK.object,children:{enable:eZ,aligned_tag_type:tZ,tag_standard_hierarchy:eZ,edit_standards:eZ,filter:eZ}},bZ={type:QK.object,children:{reference:tZ,allowed_workflow_states:nZ,comments:{type:QK.object,children:{show:eZ,add:eZ}}}},_Z={type:QK.object,children:{administration:{type:QK.object,children:{show:eZ,show_exit:iZ,show_extend:iZ,show_save:iZ}},playback:{type:QK.object,children:{show:eZ,distractor_rationale:iZ,distractor_rationale_response_level:iZ,scroll_to_top:iZ,scrolling_indicator:iZ,show_acknowledgements:iZ,skip_submit_confirmation:iZ,shuffle_items:iZ,submit_criteria:iZ,warning_on_change:iZ}},scoring:{type:QK.object,children:{show:eZ,client_side_scoring:iZ}},text:{type:QK.object,children:{show:eZ,font_size:iZ}},time:{type:QK.object,children:{show:eZ,auto_save:{type:QK.object,children:{show:eZ,edit:eZ,ui:iZ,disable_force_save_on_quit:iZ}},idle_timeout:{type:QK.object,children:{show:eZ,edit:eZ,countdown_time:iZ}},limit_type:iZ,reading_mode:{type:QK.object,children:{goto_first_item_on_reading_time_completion:iZ,warning_time:iZ}},warning_time:iZ}}}},wZ={type:QK.object,children:{handlebars:eZ,lds:eZ}},EZ={type:QK.object,children:{show:eZ}},SZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.length)return e;var t="object"===e||"array"===e?"an":"a";return"".concat(t," ").concat(e)},xZ=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"initOptions.config";if(r&&t&&n){var o=a().getNested(t,n);if(null!=o){if(!r.type.checker(o)){var s="".concat(i,".").concat(n),l=r.type.name,u=XK(o),c="Author API ".concat(s," must be ").concat(SZ(l)),d="Encountered the ".concat(u," ")+"".concat(JSON.stringify(o)," instead");throw"".concat(c,". ").concat(d)}r.type===QK.object&&Object.keys(o).forEach((function(i){var o=r&&r.children&&r.children[i];e(t,"".concat(n,".").concat(i),o)}))}}},kZ={type:QK.number};function TZ(e){return function(e){if(Array.isArray(e))return OZ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return OZ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OZ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const CZ=c.Model.extend({initialize:function(e,t,n){var r=n.i18n;this.i18n=r,this.defaultInitOptions=a().cloneDeep(ZK),this.validateInitialisationOption(e),this.validateUser(e.user),e.config?this.validateConfig(e.config):e.config={},a().isUndefined(t)||(this.eventOptions=t),this.set("config",a().merge(this.defaultInitOptions.config,e.config,{treatEmptyStringAsUndefined:!0})),this.updateQuestionEditorApiConfigDependencies(),this.setDependenciesDefaultVersions(),this.disableBackButtonOnItemEdit(),a().isUndefined(this.eventOptions)||this.setQuestionEditorCustomEvents(this.getConfig().dependencies.question_editor_api),this.setItemsToReadOnly()},setItemsToReadOnly:function(){if(this.isIBKReadOnly()){var e=this.getConfig();a().setNested(e,"item_edit.item.mode",{default:"preview",show:!1}),a().setNested(e,"item_list.toolbar.add",!1),aq(e)}},isIBKReadOnly:function(){return a().getNested(this.getConfig(),"global.items.read_only.enabled")&&0===a().getNested(this.getConfig(),"global.items.read_only.filter.either").length},getMode:function(){return this.get("mode")},getUser:function(){return this.get("user")},setUser:function(e){return this.set("user",e)},getItembankSearchEnabled:function(){return this.get("itembankSearchEnabled")},setItembankSearchEnabled:function(e){return this.set("itembankSearchEnabled",e)},getOrganisationId:function(){return this.get("organisation_id")||this.getConfig().organisation_id||this.getConsumerSettings("default_organisation_id")},getActivityListLimit:function(){return this.getConfig().activity_list.limit},getItemListLimit:function(e){return"item_list"===e?this.getConfig().item_list.limit:a().contains(["item_for_activity_list","item_list_for_intro_item","item_list_for_outro_item"],e)?a().getNested(this.getConfig(),"activity_edit.item_search.limit"):void 0},isItemListSelectionEnabled:function(){return!!a().getNested(this.getConfig(),"item_list.item.enable_selection")},getQuestionListLimit:function(){return this.getConfig().question_list.limit},getReferencePrefixForNewItem:function(){var e=this.getConfig().item_edit.item.reference.prefix;return e?e.replace(new RegExp(/^\s+/),""):""},getQuestionEditorApiConfig:function(){var e=this.getConfig().dependencies.question_editor_api,t=this.getQuestionsApiConfig(),n=e.init_options.dependencies.questions_api;return n||(n=e.init_options.dependencies.questions_api={}),n.init_options=a().deepExtend({},t.init_options,n.init_options||{}),e},getQuestionsApiConfig:function(){return this.getConfig().dependencies.questions_api},getItemsApiConfig:function(){return this.getConfig().dependencies.items_api},getConfig:function(){return this.get("config")},getActivityEditItemBanks:function(){var e,t=this.getOrganisationId(),n=this.i18n.get("itemBankListDefaultItemBank"),r=a().getNested(this.getConfig(),"activity_edit.item_search.item_banks");if(!r||0===r.length)return!1;r=a().cloneDeep(r);var i=-1;return a().each(r,(function(e,n){e.organisation_id!==t||e.item_pool_id||(i=n)})),-1===i?[e={item_bank_name:n,organisation_id:t,is_default:!0}].concat(TZ(r)):((e=r.splice(i,1))[0].is_default=!0,[].concat(TZ(e),TZ(r)))},getLabelBundle:function(){return this.getConfig().label_bundle||{}},getSharedPassageConfig:function(){var e=a().getNested(this.getConfig(),"item_edit.item.shared_passage");return!a().isBoolean(e)||e},getActivityEditItemTitleConfig:function(){var e=a().getNested(this.getConfig(),"activity_edit.item_title.show");return!!a().isBoolean(e)&&e},getPlayerTemplates:function(){var e=a().getNested(this.getConfig(),"activity_edit.player_templates");return a().isArray(e)&&e.length?e:[]},getBrowseControls:function(){var e=this.getConfigByMode("item_list");if(e.toolbar&&e.toolbar.browse&&a().isArray(e.toolbar.browse.controls))return this.handleHiddenAndShowTagsInBrowseControls(e.toolbar.browse.controls)},handleHiddenAndShowTagsInBrowseControls:function(e){var t=a().map(this.getHideTagsConfig(),(function(e){return e.type})),n=a().map(this.getShowTagsConfig(),(function(e){return e.type}));return 0===t.length&&0===n.length?e:a().filter(e,(function(e){return"tag"!==e.type||!e.tag||!e.tag.type||(t.length>0?!a().contains(t,e.tag.type):a().contains(n,e.tag.type))}))},getRestrictedStatuses:function(){return a().getNested(this.getConfig(),"item_list.filter.restricted.status")||[]},getItemSearchConfig:function(e){var t,n,r={show:!0,controls:["reference","content"],widget_type:!0,status:!0,tags:{show:!0}};if(e){t=this.getConfigByMode("activity_edit"),n={};var i=a().getNested(t,"item_search")||{};a().getNested(i,"toolbar.search")&&(n=a().getNested(i,"toolbar.search")),(a().getNested(t,"item_title.show")||a().getNested(t,"item_search.title.show"))&&(r.controls=["title","content"],a().getNested(t,"item_search.title.show_reference")&&(r.controls=["title","reference","content"])),n.status=!1}else t=this.getConfigByMode("item_list"),n=a().getNested(t,"toolbar.search")||{},a().getNested(t,"item.title.show")&&(r.controls=["title","content"],a().getNested(t,"item.title.show_reference")&&(r.controls=["title","reference","content"]));return a().each(["show","controls","widget_type","status","tags"],(function(e){"controls"===e?n.controls&&0!==n.controls.length&&(r.controls=n.controls):a().isUndefined(n[e])||(r[e]=n[e])})),r},getSupplementaryTags:function(){var e=[],t=this.getBrowseControls();return!!t&&(a().each(t,(function(t){"tag"===t.type&&e.push(t)})),e)},getSupplementaryTagTypes:function(){return a().pluck(a().pluck(a().uniq(this.getSupplementaryTags(),(function(e){return e.tag.type})),"tag"),"type")},getHierarchies:function(){var e=[],t=this.getBrowseControls();if(t)return a().each(t,(function(t){"hierarchy"===t.type&&e.push(t)})),e},getContainerHeightConfigOption:function(){var e=this.getConfig();return a().isObject(e.container)&&a().isNumber(e.container.height)?e.container.height:"auto"},getContainerFixedFooterHeightConfigOption:function(){var e=this.getConfig();return a().isObject(e.container)&&a().isNumber(e.container.fixed_footer_height)?e.container.fixed_footer_height:0},getScrollIntoViewContainerSelector:function(){var e=this.getConfig();return!(!a().isObject(e.container)||!a().isString(e.container.scroll_into_view_selector))&&e.container.scroll_into_view_selector},disableBackButtonOnItemEdit:function(){"item_edit"===this.getMode()&&(this.getConfig().item_edit.item.back=!1)},getConfigByMode:function(e){var t=a().clone(this.getConfig()[e])||{};return"widget_templates"===e&&(t.question_editor_api=this.getQuestionEditorApiConfig(),a().isUndefined(this.eventOptions)||(t.question_editor_api=this.setQuestionEditorCustomEvents(t.question_editor_api)),t.save?t.save={show:!0}:t.save={show:!1}),"item_edit"===e&&(t.questions_api=this.getQuestionsApiConfig(),t.item.save=this.getItemSaveOptions()),"question_list"===e&&(t.questions_api=this.getQuestionsApiConfig()),"activity_edit"===e&&(t.questions_api=this.getQuestionsApiConfig(),t.save=this.getActivitySaveOptions(),t.items_api=this.getItemsApiConfig()),t},setQuestionEditorCustomEvents:function(e){return a().isUndefined(this.eventOptions.customButtons)||a().setNested(e,"init_options.rich_text_editor.customButtons",this.eventOptions.customButtons),a().isUndefined(this.eventOptions.assetRequest)||(e.init_options.assetRequest=this.eventOptions.assetRequest),e},getItemSaveOptions:function(){var e={show:!0,persist:!0},t=(this.getConfig().item_edit?this.getConfig().item_edit:{}).item.save;return a().isUndefined(t)?a().clone(e):a().isBoolean(t)?t?a().clone(e):{show:!1,persist:!0}:a().defaults(t,e)},getActivitySaveOptions:function(){return a().getNested(this.getConfig(),"activity_edit.save")||{}},getDuplicateActivityConfig:function(){var e=!0,t=!1,n=!1,r=a().getNested(this.getConfig(),"activity_edit.duplicate");return a().isObject(r)?(e=r.show,t=r.deep_copy,n=r.duplicate_shared_passages):a().isBoolean(r)&&(e=r),{duplicateShow:e,deepCopy:t,duplicateSharedPassages:n}},getGlobalConfig:function(){return this.getConfig().global||{}},getHideTagsConfig:function(){return this.getGlobalConfig().hide_tags||[]},getShowTagsConfig:function(){return this.getGlobalConfig().show_tags||[]},getABStandardsConfig:function(){return this.getGlobalConfig().ab_standards},getWorkflowConfig:function(){return this.getGlobalConfig().workflow},getGlobalItemsConfig:function(){return this.getGlobalConfig().items},isTogglingOfLeftWildcardEnabled:function(){return this.getConsumerSettings("feature_flags.author_api_flags.disable_left_partial_ref_match")||!1},validateInitialisationOption:function(e){if(!a().isObject(e))throw"An Initialisation Options attribute must be provided and be an object or a valid JSON encoded string when initializing the Author API";var t=e.mode,n=e.reference;if(!a().isString(t))throw"Author API must have a mode in the init options and it must be a string";if(!a().contains(this.defaultInitOptions.modes,t))throw"".concat(t," is not a valid Author API mode.");if("activity_edit"===t&&!a().isString(n)&&!a().isUndefined(n))throw"In Author API activity_edit mode, reference must be a string.";if("item_edit"===t&&!a().isString(n)&&!1!==n)throw"Author API item_edit mode must have a reference";xZ(e,"organisation_id",kZ,"initOptions")},validateUser:function(e){if(!a().isObject(e))throw"A user attribute must be provided and be an object when initializing the Author API";if(!e.id||!a().isString(e.id)||e.id.length>50)throw"User object needs to contain at least an ID, and ID must be a string with a max of 50 characters";a().each(["firstname","lastname","email"],(function(t){var n=50;if("email"===t&&(n=255),e[t]&&(!a().isString(e[t])||e[t].length>n))throw"User's "+t+" must be a string with a max of "+n+" characters"}))},validateConfig:function(e){var t=this;if(!a().isObject(e))throw"Author API initOptions.config must be an object";if(e.organisation_id&&!a().isNumber(e.organisation_id))throw"Author API initOptions.config.organisation_id must be a number";if(e.organisation_id&&console.warn("Specifying organisation_id inside config object is deprecated, please move organisation_id to the root of the init object."),e.beta_flags&&(xZ(e,"beta_flags",wZ),!1===e.beta_flags.lds&&console.warn("Warning: Setting config.beta_flags.lds to false is only recommended as a temporary and/or last resort measure if there are CSS override issues with the design system components. This init option will be removed in a future LTS version without notice and cannot be relied upon long term.")),e.global){if(!a().isObject(e.global))throw"Author API initOptions.config.global must be an object";if(e.global.disable_onbeforeunload&&!a().isBoolean(e.global.disable_onbeforeunload))throw"Author API initOptions.config.global.disable_onbeforeunload must be a boolean";if(a().has(e.global,"hide_tags")&&a().has(e.global,"show_tags"))throw"Author API initOptions.config.hide_tags and initOptions.config.show_tags cannot be specified at the same time";if(a().each(["hide_tags","show_tags"],(function(n){a().has(e.global,n)&&t.validateHideOrShowTags(e.global[n],n)}),this),xZ(e,"global.ab_standards",vZ),a().has(e.global,"workflow")){if(!a().isJsonObject(e.global.workflow))throw"Author API initOptions.config.global.workflow must be a JSON object";this.validateWorkflowConfig(e,"item"),this.validateWorkflowConfig(e,"activity")}if(a().has(e.global,"items")){if(!a().isJsonObject(e.global.items))throw"Author API initOptions.config.global.items must be a JSON object";if(xZ(e,"global.items.read_only.enabled",eZ),a().has(e.global.items.read_only,"filter")){var n=e.global.items.read_only.filter;this.validateReadOnlyFilter(n,"initOptions.config.global.items.read_only")}}}if(e.item_edit){if(!a().isObject(e.item_edit))throw"Author API initOptions.config.item_edit must be an object";if(e.item_edit.item){if(!a().isObject(e.item_edit.item))throw"Author API initOptions.config.item_edit.item must be an object";if(e.item_edit.item.reference){if(!a().isObject(e.item_edit.item.reference))throw"Author API initOptions.config.item_edit.item.reference must be an object";if(e.item_edit.item.reference.show&&!a().isBoolean(e.item_edit.item.reference.show))throw"Author API initOptions.config.item_edit.item.reference.show must be a boolean";if(e.item_edit.item.reference.edit&&!a().isBoolean(e.item_edit.item.reference.edit))throw"Author API initOptions.config.item_edit.item.reference.edit must be a boolean";if(e.item_edit.item.reference.prefix&&!a().isString(e.item_edit.item.reference.prefix))throw"Author API initOptions.config.item_edit.item.reference.prefix must be a string"}if(!a().isUndefined(e.item_edit.item.title)&&!a().isObject(e.item_edit.item.title))throw"Author API initOptions.config.item_edit.item.title must be an object";if(e.item_edit.item.title&&!a().isUndefined(e.item_edit.item.title.show)&&!a().isBoolean(e.item_edit.item.title.show))throw"Author API initOptions.config.item_edit.item.title.show must be a boolean";if(e.item_edit.item.title&&!a().isUndefined(e.item_edit.item.title.edit)&&!a().isBoolean(e.item_edit.item.title.edit))throw"Author API initOptions.config.item_edit.item.title.edit must be a boolean";if(e.item_edit.item.title&&!a().isUndefined(e.item_edit.item.title.mandatory)&&!a().isBoolean(e.item_edit.item.title.mandatory))throw"Author API initOptions.config.item_edit.item.title.mandatory must be a boolean";if(e.item_edit.item.title&&!a().isUndefined(e.item_edit.item.title.mandatory)&&!0===e.item_edit.item.title.mandatory&&(!1===e.item_edit.item.title.show&&!0===e.item_edit.item.title.edit||!0===e.item_edit.item.title.show&&!1===e.item_edit.item.title.edit))throw"Author API initOptions.config.item_edit.item.title.mandatory requires both title.show and title.edit to be true";if(xZ(e,"item_edit.item.details",fZ),e.item_edit.item.mode){if(!a().isObject(e.item_edit.item.mode))throw"Author API initOptions.config.item_edit.item.mode must be an object";if(e.item_edit.item.mode.default&&!a().isString(e.item_edit.item.mode.default))throw"Author API initOptions.config.item_edit.item.mode.default must be a string of either `edit` or `preview`";if(e.item_edit.item.mode.show&&!a().isBoolean(e.item_edit.item.mode.show))throw"Author API initOptions.config.item_edit.item.mode.show must be a boolean"}if(e.item_edit.item.columns&&!a().isBoolean(e.item_edit.item.columns))throw"Author API initOptions.config.item_edit.item.columns must be a boolean";if(!a().isUndefined(e.item_edit.item.tags)&&!a().isObject(e.item_edit.item.tags))throw"Author API initOptions.config.item_edit.item.tags must be an object";if(xZ(e,"item_edit.item.tags",gZ),e.item_edit.item.scoring&&!a().isBoolean(e.item_edit.item.scoring))throw"Author API initOptions.config.item_edit.item.scoring must be a boolean";if(e.item_edit.item.answers&&!a().isBoolean(e.item_edit.item.answers))throw"Author API initOptions.config.item_edit.item.answers must be a boolean";if(e.item_edit.item.back&&!a().isBoolean(e.item_edit.item.back))throw"Author API initOptions.config.item_edit.item.back must be a boolean";if(e.item_edit.item.save&&!a().isBoolean(e.item_edit.item.save)&&!a().isObject(e.item_edit.item.save))throw"Author API initOptions.config.item_edit.item.save must be a boolean or an object";if(e.item_edit.item.tags){if(!a().isObject(e.item_edit.item.tags))throw"Author API initOptions.config.item_edit.item.tags must be an object";if(e.item_edit.item.tags.include_tags_on_edit){if(!a().isArray(e.item_edit.item.tags.include_tags_on_edit))throw"include_tags_on_edit must be an array";a().forEach(e.item_edit.item.tags.include_tags_on_edit,(function(e){if(!a().isObject(e))throw"Each entry in include_tags_on_edit needs to be an object";if(!e.type||!a().isString(e.type))throw"Each entry in include_tags_on_edit must contain a type string";if(!e.name||!a().isString(e.name))throw"Each entry in include_tags_on_edit must contain a name string"}))}}if(!a().isUndefined(e.item_edit.item.duplicate)&&(a().isBoolean(e.item_edit.item.duplicate)&&console.warn("Use of duplicate as a flag is now deprecated. Please use the new object format for item duplicate option."),a().isObject(e.item_edit.item.duplicate))){var r=e.item_edit.item.duplicate;if(!a().isUndefined(r.show)&&!a().isBoolean(r.show))throw"config.item_edit.item.duplicate.show must be boolean";if(!a().isUndefined(r.duplicate_shared_passages)&&!a().isBoolean(r.duplicate_shared_passages))throw"config.item_edit.item.duplicate.duplicate_shared_passagesmust be boolean"}if(!a().isUndefined(e.item_edit.item.dynamic_image_tag)&&!a().isBoolean(e.item_edit.item.dynamic_image_tag))throw"Author API initOptions.config.item_edit.item.dynamic_image_tag must be a boolean";xZ(e,"item_edit.item.actions",lZ)}if(!a().isUndefined(e.item_edit.enable_audio_recording)&&!a().isBoolean(e.item_edit.enable_audio_recording))throw"Author API initOptions.config.item_edit.enable_audio_recording must be a boolean";if(xZ(e,"item_edit.widget",hZ),e.item_edit.settings){if(!a().isObject(e.item_edit.settings))throw"Author API initOptions.config.item_edit.settings must be an object";a().each(["show","full_height"],(function(t){if(e.item_edit.settings[t]&&!a().isBoolean(e.item_edit.settings[t]))throw"Author API initOptions.config.item_edit."+"settings.".concat(t," must be a boolean")}))}a().has(e.item_edit,"tags_on_create")&&this.validateTagsOnCreate(e.item_edit.tags_on_create,"item_edit"),xZ(e,"item_edit.history",EZ)}if(xZ(e,"widget_templates",mZ),e.activity_list){if(!a().isObject(e.activity_list))throw"Author API initOptions.config.activity_list must be an object";if(!a().isUndefined(e.activity_list.limit)){var i=e.activity_list.limit,o=Ty.LIMIT_MIN,s=Ty.LIMIT_MAX;if(!a().isNumber(i)||!(i>=o&&i<=s))throw"Author API initOptions.config.activity_list.limit"+" must be an integer between ".concat(o," and ").concat(s)+" inclusive"}if(a().has(e.activity_list,"filter")){var l=e.activity_list.filter;this.validateFilter(l,"initOptions.config.activity_list")}if(e.activity_list.toolbar&&!a().isObject(e.activity_list.toolbar))throw"Author API initOptions.config.activity_list.toolbar must be an object";xZ(e,"activity_list.toolbar",dZ),xZ(e,"activity_list.title",uZ)}if(e.activity_edit){if(!a().isObject(e.activity_edit))throw"Author API initOptions.config.activity_edit must be an object";if(xZ(e,"activity_edit.annotations",cZ),xZ(e,"activity_edit.difficulty",gZ),xZ(e,"activity_edit.tags",gZ),xZ(e,"activity_edit.player",_Z),xZ(e,"activity_edit.item_edit.settings",lZ),xZ(e,"activity_edit.resource_item",lZ),e.activity_edit.player_templates&&!a().isArray(e.activity_edit.player_templates))throw"Author API initOptions.config.activity_edit.player_templates must be an array";if(!a().isUndefined(e.activity_edit.enabled_player_templates)&&!a().isArray(e.activity_edit.enabled_player_templates))throw"Author API initOptions.config.activity_edit.enabled_player_templates must be an array";if(a().isArray(e.activity_edit.player_templates))for(var u=0;u<e.activity_edit.player_templates.length;u++){var c=e.activity_edit.player_templates[u];if(!a().isObject(c))throw"Author API initOptions.config.activity_edit.player_templates must be an array of objects"}if(!a().isUndefined(e.activity_edit.player_template_builder)){if(!a().isJsonObject(e.activity_edit.player_template_builder))throw"Author API initOptions.config.activity_edit.player_template_builder must be an object";if(!a().isUndefined(e.activity_edit.player_template_builder.show)&&!a().isBoolean(e.activity_edit.player_template_builder.show))throw"Author API initOptions.config.activity_edit.player_template_builder.show must be a boolean"}if(!a().isUndefined(e.activity_edit.default_player_template)&&!a().isString(e.activity_edit.default_player_template))throw"Author API initOptions.config.activity_edit.default_player_template must be a string";if(!a().isUndefined(e.activity_edit.duplicate)){if(!a().isBoolean(e.activity_edit.duplicate)&&!a().isJsonObject(e.activity_edit.duplicate))throw"Author API initOptions.config.activity_edit.duplicate must be an object or a boolean (deprecated)";if(a().isBoolean(e.activity_edit.duplicate))console.warn("Author API initOptions.config.activity_edit.duplicate should now be defined as an object");else{var d=e.activity_edit.duplicate;if(!a().isUndefined(d.show)&&!a().isBoolean(d.show))throw"Author API initOptions.config.activity_edit.duplicate.show must be boolean";if(!a().isUndefined(d.deep_copy)&&!a().isBoolean(d.deep_copy))throw"Author API initOptions.config.activity_edit.duplicate.deep_copy must be boolean"}}xZ(e,"activity_edit.item.title",uZ),void 0!==a().getNested(e,"activity_edit.item_title")&&console.warn("The use of the activity_edit.item_title init option is deprecated. Please use activity_edit.item.title for Activity edit view or activity_edit.item_search.title for Item picker, intro and outro picker views.");var f=a().getNested(e,"activity_edit.item_title.show");if(!a().isUndefined(f)&&!a().isBoolean(f))throw"Author API initOptions.config.activity_edit.item_title.show must be boolean";if(!a().isUndefined(a().getNested(e,"activity_edit.item_search"))){var p=a().getNested(e,"activity_edit.item_search"),h=a().getNested(p,"toolbar.search"),m={show:f||a().getNested(e,"activity_edit.item_search.title.show"),show_reference:a().getNested(e,"activity_edit.item_search.title.show_reference")};if(!a().isUndefined(h)){if(!a().isJsonObject(h))throw"Author API initOptions.config.activity_edit.item_search.toolbar.search must be an object";this.validateItemListSearchConfig(h,m,!0)}var g=e.activity_edit.item_search.limit;if(!a().isUndefined(g)){var y=Ty.LIMIT_MIN,v=Ty.LIMIT_MAX;if(!a().isNumber(g)||!(g>=y&&g<=v))throw"Author API initOptions.config.activity_edit.item_search.limit must be an integer between "+"".concat(y," and ").concat(v," inclusive")}xZ(e,"activity_edit.item_search.title",uZ),this.validateItemBanksConfig(p)}if(xZ(e,"activity_edit.status",lZ),a().has(e.activity_edit,"tags_on_create")&&this.validateTagsOnCreate(e.activity_edit.tags_on_create,"activity_edit"),e.activity_edit.title){if(!a().isUndefined(e.activity_edit.title)&&!a().isObject(e.activity_edit.title))throw"Author API initOptions.config.activity_edit.title must be an object";if(!a().isUndefined(e.activity_edit.title.show)&&!a().isBoolean(e.activity_edit.title.show))throw"Author API initOptions.config.activity_edit.title.show must be a boolean";if(!a().isUndefined(e.activity_edit.title.edit)&&!a().isBoolean(e.activity_edit.title.edit))throw"Author API initOptions.config.activity_edit.title.edit must be a boolean";if(e.activity_edit.title&&!a().isUndefined(e.activity_edit.title.mandatory)&&!a().isBoolean(e.activity_edit.title.mandatory))throw"Author API initOptions.config.activity_edit.title.mandatory must be a boolean";if(e.activity_edit.title&&!a().isUndefined(e.activity_edit.title.mandatory)&&!0===e.activity_edit.title.mandatory&&(!1===e.activity_edit.title.show&&!0===e.activity_edit.title.edit||!0===e.activity_edit.title.show&&!1===e.activity_edit.title.edit))throw"Author API initOptions.config.activity_edit.title.mandatory requires both title.show and title.edit to be true"}if(!a().isUndefined(e.activity_edit.customize_presets)){if(!a().isJsonObject(e.activity_edit.customize_presets))throw"Author API initOptions.config.activity_edit.customize_presets must be a valid object";if(!a().isBoolean(e.activity_edit.customize_presets.enable))throw"Author API initOptions.config.activity_edit.customize_presets.enable must be boolean"}if(!a().isUndefined(e.activity_edit.override_labels)){if(!a().isJsonObject(e.activity_edit.override_labels))throw"Author API initOptions.config.activity_edit.override_labels must be a valid object";if(!a().isBoolean(e.activity_edit.override_labels.enable))throw"Author API initOptions.config.activity_edit.override_labels.enable must be boolean"}xZ(e,"activity_edit.item",pZ)}if(e.item_list){if(!a().isObject(e.item_list))throw"Author API initOptions.config.item_list must be an object";if(e.item_list.hide_new_button&&!a().isBoolean(e.item_list.hide_new_button))throw"Author API initOptions.config.item_list.hide_new_button must be boolean";if(e.item_list.item){if(!a().isObject(e.item_list.item))throw"Author API initOptions.config.item_list.item must be an object";if(e.item_list.item.status&&!a().isBoolean(e.item_list.item.status))throw"Author API initOptions.config.item_list.item.status must be a boolean";if(xZ(e,"item_list.item.title",uZ),!a().isUndefined(e.item_list.item.enable_selection)&&!a().isBoolean(e.item_list.item.enable_selection))throw"Author API initOptions.config.item_list.item.enable_selection must be a boolean"}if(a().has(e.item_list,"filter")&&this.validateFilter(e.item_list.filter,"initOptions.config.item_list"),e.item_list.limit){var b=e.item_list.limit,_=ld.LIMIT_MIN,w=ld.LIMIT_MAX;if(!a().isNumber(b)||!(b>=_&&b<=w))throw"Author API initOptions.config.item_list.limit must"+" be an integer between ".concat(_," and ").concat(w," inclusive")}if(e.item_list.toolbar&&e.item_list.toolbar.browse){if(!a().isArray(e.item_list.toolbar.browse.controls))throw"Author API initOptions.config.item_list.toolbar.browse.controls must be an array";a().each(e.item_list.toolbar.browse.controls,(function(e){if("hierarchy"!==e.type&&"tag"!==e.type&&"separator"!==e.type)throw"Author API initOptions.config.item_list.toolbar.browse.controls must be of type hierarchy, tag or separator"}))}if(e.item_list.toolbar&&e.item_list.toolbar.search){if(!a().isJsonObject(e.item_list.toolbar.search))throw"Author API init_options.config.item_list.toolbar.search must be an object";var E=a().getNested(e,"item_list.item.title");this.validateItemListSearchConfig(e.item_list.toolbar.search,E,!1,e)}}if(e.container){if(!a().isUndefined(e.container.height)&&!a().isNumber(e.container.height)&&"auto"!==e.container.height)throw"Author API initOptions.config.container.height must be an integer or simply an 'auto' value";if(!a().isUndefined(e.container.fixed_footer_height)&&!a().isNumber(e.container.fixed_footer_height))throw"Author API initOptions.config.container.fixed_footer_height must be an integer";if(!a().isUndefined(e.container.scroll_into_view_selector)&&!a().isString(e.container.scroll_into_view_selector))throw"Author API initOptions.config.container.scroll_into_view_selector must be a string"}e.label_bundle&&xZ(e,"label_bundle",yZ),this.validateDependencies(e)},validateWorkflowConfig:function(e,t){var n=a().getNested(e,"global.workflow")||{};if(n[t]){xZ(e,"global.workflow.".concat(t),bZ);var r=n[t],i="Author API initOptions.config.global.workflow."+t;if(a().isUndefined(r.reference))throw"".concat(i,".reference must be provided");var o=r.allowed_workflow_states;if(!a().isUndefined(o)){if(a().isEmpty(o))throw"".concat(i,".allowed_workflow_states must be a non-empty array");if(o.map((function(e){return e.toLowerCase()})).indexOf("unassigned")>-1&&o.length>1)throw"".concat(i,".")+'allowed_workflow_states should not contain another state if "Unassigned" is provided'}}},validateItemBanksConfig:function(e){if(e.hasOwnProperty("filter")&&this.validateFilter(e.filter,"initOptions.activity_edit.item_search",!0),e.item_banks){var t=e.item_banks,n=this;if(!a().isArray(t))throw"Author API initOptions.activity_edit.item_search.item_banks must be an array";var r=[];a().each(t,(function(e){if(!a().isString(e.item_bank_name)||""===e.item_bank_name.trim())throw"Each entry in Author API initOptions.activity_edit.item_search.item_banks must specify an item_bank_name";if(!a().isNumber(e.organisation_id)||e.organisation_id<1)throw"Each entry in Author API initOptions.activity_edit.item_search.item_banks must specify a valid organisation_id";if(e.item_pool_id&&(!a().isString(e.item_pool_id)||""===e.item_pool_id.trim()))throw"Author API initOptions.activity_edit.item_search.item_banks.item_pool_id must be a string";e.filter&&n.validateFilter(e.filter,"initOptions.activity_edit.item_search.item_banks",!0);var t=""+e.organisation_id;if(e.item_pool_id&&(t=t+"_"+e.item_pool_id),r[t])throw"Duplicates in Author API initOptions.activity_edit.item_search.item_banks are not allowed";r[t]=!0}))}},validateHideOrShowTags:function(e,t){if(!a().isArray(e))throw"Author API initOptions.global."+t+" must be an array";a().each(e,(function(e){if(!a().isObject(e)||!e.type||!a().isString(e.type))throw"Each entry in Author API initOptions.global."+t+" must be an object and must contain a string for key type"}))},validateTagsOnCreate:function(e,t){if(!a().isUndefined(e)){if(!a().isArray(e))throw"Author API initOptions."+t+".tags_on_create must be an array";if(e.length>50)throw"Author API initOptions."+t+".tags_on_create must have a max item count of 50";a().each(e,(function(e){if(!a().isJsonObject(e))throw"Each entry in Author API initOptions."+t+".tags_on_create must be an object";if(!a().isString(e.type))throw"Each entry in Author API initOptions."+t+".tags_on_create must contain a string for key type";if(!a().isString(e.name))throw"Each entry in Author API initOptions."+t+".tags_on_create must contain a string for key name"}))}},validateFilter:function(e,t,n){if(!a().isObject(e))throw"Author API "+t+".filter must be an object";if(!a().isObject(e.restricted))throw"Author API "+t+".filter.restricted must be an object";if(e.restricted.current_user&&!a().isBoolean(e.restricted.current_user))throw"Author API "+t+".filter.restricted.current_user must be a boolean";if(e.restricted.created_by&&!a().isArray(e.restricted.created_by))throw"Author API "+t+".filter.restricted.created_by must be an array";if(n&&!a().isUndefined(e.restricted.status))throw"Author API "+t+".filter.restricted.status is not allowed";if(!a().isUndefined(e.restricted.status)){if(!a().isArray(e.restricted.status))throw"Author API "+t+".filter.restricted.status must be an array";if(!e.restricted.status.length)throw"Author API "+t+".filter.restricted.status must not be an empty array";a().each(e.restricted.status,(function(e){if(!a().contains(["published","unpublished","archived"],e))throw"Author API "+t+".filter. restricted.status can only contain 'published', 'unpublished'  or 'archived'"}))}if(e.restricted.created_by&&a().isArray(e.restricted.created_by)&&e.restricted.created_by.length>50)throw"Author API "+t+".filter.restricted.created_by must have a max item count of 50.";if(e.restricted.tags){if(!a().isObject(e.restricted.tags))throw"Author API "+t+".filter.restricted.tags must be an object";this.validateTagFilter(e.restricted.tags,t,n)}},validateReadOnlyFilter:function(e,t){if(!a().isObject(e)||a().isEmpty(e))throw"Author API ".concat(t,".filter must be an non-empty object");this.readOnlyTagFilter(e,t)},readOnlyTagFilter:function(e,t){if(e.all)throw"All tags are not supported for read only item filtering";if(e.either){if(!a().isArray(e.either))throw"Author API ".concat(t,".filter.either must be an array");a().each(e.either,(function(e){if(e.tags&&a().isArray(e.tags))throw"V1 tags are not supported for the read only items feature";if(e.name&&!a().isArray(e.name)&&!a().isString(e.name))throw"The name part of an entry in Author API ".concat(t)+".filter.either must be set and must be a string"}))}if(e.none)throw"None tags are not supported for read only item filtering"},validateTagFilter:function(e,t,n){var r=!1;if(n&&!a().isUndefined(e.allow_filtered_tags_overwrite))throw"Author API "+t+".filter.restricted.tag.allow_filtered_tags_overwrite is not allowed";if(!a().isUndefined(e.allow_filtered_tags_overwrite)&&!a().isBoolean(e.allow_filtered_tags_overwrite))throw"Author API "+t+".filter.restricted.tags.allow_filtered_tags_overwrite must be boolean";if(e.all){if(r=!0,!a().isArray(e.all))throw"Author API "+t+".filter.restricted.tags.all must be an array";a().each(e.all,(function(e){if(!e.type||!a().isString(e.type))throw"All entries in Author API "+t+".filter.restricted.tags.all must contain a type string";if(e.name){if(!a().isArray(e.name)&&!a().isString(e.name))throw"The name part of an entry in Author API "+t+".filter.restricted.tags.all must be an array or a string";a().isArray(e.name)&&a().each(e.name,(function(e){if(!a().isString(e))throw"All tag names in Author API "+t+".filter.restricted.tags.all must be strings"}))}}))}if(e.either){if(r=!0,!a().isArray(e.either))throw"Author API "+t+".filter.restricted.tags.either must be an array";a().each(e.either,(function(e){if(!e.type||!a().isString(e.type))throw"All entries in Author API "+t+".filter.restricted.tags.either must contain a type string";if(!e.name||!a().isArray(e.name)&&!a().isString(e.name))throw"The name part of an entry in Author API "+t+".filter.restricted.tags.either must be set and must be an array or a string";a().isArray(e.name)&&a().each(e.name,(function(e){if(!a().isString(e))throw"All tag names in Author API "+t+".filter.restricted.tags.either must be strings"}))}))}if(e.none){if(!r)return void console.warn("Author API "+t+".filter.restricted.tags.none should only specified if all or either tags are specified as well. The none tags will be ignored.");if(!a().isArray(e.none))throw"Author API "+t+".filter.restricted.tags.none must be an array";a().each(e.none,(function(e){if(!e.type||!a().isString(e.type))throw"All entries in Author API "+t+".filter.restricted.tags.none must contain a type string";if(!e.name||!a().isArray(e.name)&&!a().isString(e.name))throw"The name part of an entry in Author API "+t+".filter.restricted.tags.none must be set and must be an array or a string";a().isArray(e.name)&&a().each(e.name,(function(e){if(!a().isString(e))throw"All tag names in Author API "+t+".filter.restricted.tags.none must be strings"}))}))}},validateDependencies:function(e){if(e.question_editor_init_options){if(!a().isObject(e.question_editor_init_options))throw"Author API initOptions.question_editor_init_options must be an object";a().isEmpty(e.question_editor_init_options)||(e.dependencies?e.dependencies.question_editor_api||(e.dependencies.question_editor_api={init_options:e.question_editor_init_options}):e.dependencies={question_editor_api:{init_options:e.question_editor_init_options}}),delete e.question_editor_init_options}if(e.dependencies){if(!a().isObject(e.dependencies))throw"Author API initOptions.config.dependencies must be an object";var t="Author API initOptions.config.dependencies.",n=e.dependencies.question_editor_api;if(n){if(!a().isObject(n))throw"".concat(t,"question_editor_api must be an object");if(n.init_options){if(!a().isObject(n.init_options))throw"".concat(t,"question_editor_api.init_options must be an object");a().isEmpty(n.init_options)&&delete n.init_options}}if(e.dependencies.questions_api){if(!a().isObject(e.dependencies.questions_api))throw"".concat(t,"questions_api must be an object");if(e.dependencies.questions_api.init_options){if(!a().isObject(e.dependencies.questions_api.init_options))throw"".concat(t,"questions_api.init_options must be an object");a().isEmpty(e.dependencies.questions_api.init_options)&&delete e.dependencies.questions_api.init_options}}if(e.dependencies.items_api){if(!a().isObject(e.dependencies.items_api))throw"".concat(t,"items_api must be an object");if(e.dependencies.items_api.version&&!a().isString(e.dependencies.items_api.version))throw"".concat(t,"items_api.version must be a string")}}},validateItemListSearchConfig:function(e,t,n){var r="Author API init_options.config.item_list.toolbar.search.",i="item_list.item.title";if(n&&(r="Author API init_options.config.activity_edit.item_search.toolbar.search.",i="activity_edit.item_search.title"),a().each(["show","widget_type","status"],(function(t){if(!a().isUndefined(e[t])&&!a().isBoolean(e[t]))throw r+t+" must be boolean"})),!a().isUndefined(e.controls)&&!a().isArray(e.controls))throw r+"controls must be an array";var o=a().getNested(t,"show"),s=a().getNested(t,"show_reference"),l=s||a().isUndefined(s),u=!1,c=!1;if(a().each(e.controls,(function(e){if(!a().contains(["reference","title","content"],e))throw r+"controls can only contain reference, title or content";"title"===e&&(u=!0),"reference"===e&&(c=!0)})),u&&c&&(!o||!l))throw r+"controls can contain reference and title only if "+"show and show_reference are both enabled in ".concat(i);if(o&&c&&!l)throw r+"controls cannot contain reference if title is enabled and "+"show_reference is disabled in ".concat(i);if(!o&&u)throw r+"controls cannot contain title if ".concat(i,".show is disabled");if(!a().isUndefined(e.tags)){if(!a().isJsonObject(e.tags))throw r+"tags must be an object";if(!a().isBoolean(e.tags.show))throw r+"tags.show must be boolean"}},setDependenciesDefaultVersions:function(){var e=this.getConfig().dependencies;a().isString(e.items_api.version)||(e.items_api.version=LearnosityAuthor._internal.config.itemsApiVersion);var t=e.question_editor_api.init_options;a().isObject(t.configuration)||(t.configuration={})},updateQuestionEditorApiConfigDependencies:function(){var e=this.getConfig();a().setNested(e,"dependencies.question_editor_api",this.getQuestionEditorApiConfig())},setConsumerSettings:function(e){this.set("consumerSettings",e)},getConsumerSettings:function(e){return e?a().getNested(this.get("consumerSettings"),e):this.get("consumerSettings")},setActivityWorkflow:function(e){this.set("activityWorkflow",e)},getActivityWorkflow:function(){return this.get("activityWorkflow")},setItemWorkflow:function(e){this.set("itemWorkflow",e)},getItemWorkflow:function(){return this.get("itemWorkflow")}});var AZ={},PZ=0,MZ=function(e,t){var n=""+t.end+t.strict,r=AZ[n]||(AZ[n]={});if(r[e])return r[e];var i=[],o={re:FZ(e,i,t),keys:i};return PZ<1e4&&(r[e]=o,PZ++),o},DZ=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function RZ(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=DZ.exec(e));){var l=n[0],u=n[1],c=n.index;if(a+=e.slice(o,c),o=c+l.length,u)a+=u[1];else{var d=e[o],f=n[2],p=n[3],h=n[4],m=n[5],g=n[6],y=n[7];a&&(r.push(a),a="");var v=null!=f&&null!=d&&d!==f,b="+"===g||"*"===g,_="?"===g||"*"===g,w=n[2]||s,E=h||m;r.push({name:p||i++,prefix:f||"",delimiter:w,optional:_,repeat:b,partial:v,asterisk:!!y,pattern:E?NZ(E):y?".*":"[^"+LZ(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function LZ(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function NZ(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function IZ(e,t){return e.keys=t,e}function jZ(e){return e.sensitive?"":"i"}function BZ(e,t,n){return function(e,t,n){a().isArray(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)o+=LZ(l);else{var u=LZ(l.prefix),c="(?:"+l.pattern+")";t.push(l),l.repeat&&(c+="(?:"+u+c+")*"),o+=c=l.optional?l.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var d=LZ(n.delimiter||"/"),f=o.slice(-d.length)===d;r||(o=(f?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?");o+=i?"$":r&&f?"":"(?="+d+"|$)";return IZ(new RegExp("^"+o,jZ(n)),t)}(RZ(e,n),t,n)}function FZ(e,t,n){return a().isArray(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return IZ(e,t)}(e,t):a().isArray(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(FZ(e[i],t,n).source);return IZ(new RegExp("(?:"+r.join("|")+")",jZ(n)),t)}(e,t,n):BZ(e,t,n)}const YZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,r=n.path,i=void 0===r?"/":r,o=n.exact,a=void 0!==o&&o,s=n.strict,l=void 0!==s&&s,u=MZ(i,{end:a,strict:l}),c=u.re,d=u.keys,f=c.exec(e);if(!f)return null;var p=f[0],h=f.slice(1),m=e===p;return a&&!m?null:{path:i,url:"/"===i&&""===p?"/":p,isExact:m,params:d.reduce((function(e,t,n){return e[t.name]=Yv(h[n]),e}),{})}};const HZ=function(e){var t,n=!1;return jK.getRoutes().forEach((function(r){if(!n){var i=Fv(e);(t=YZ(i,r.path))&&(t.mode=r.mode,n=!0)}})),t};var VZ=function(e,t,n){var r=new sd(n);return r.setData(t),e.component.triggerPublicEvent(r),r};const qZ=function(e){return function(){return function(t){return function(n){if(!n.fromOutside){var r;switch(n.type){case fh:r=function(e,t){var n=new sd(sd.EVENTS.navigate),r=HZ(t.currentLocation),i=e.component.router.getLocation();if(r&&i.locationEncoded!==t.currentLocation){var o=r.path;a().each(["itemReference","widgetReference"],(function(e){if(r.params&&"new"===r.params[e]){var t=new RegExp(":"+e,"g");o=o.replace(t,"new")}})),n.setData({location:Yv(t.currentLocation),locationEncoded:t.currentLocation,route:o.replace(/:itemReference/,":reference").replace(/:widgetReference/,":reference")}),e.component.triggerPublicEvent(n)}return n}(e,n.data);break;case Sf:r=VZ(e,n.data,sd.EVENTS.saveActivitySuccess);break;case wf:r=VZ(e,n.data,sd.EVENTS.saveActivityError);break;case Xf:r=VZ(e,n.data,sd.EVENTS.renderActivity);break;default:r=null}if(r&&r.isDefaultPrevented())return;n.type===fh&&(e.component.router._locationState.previous=e.component.router._locationState.current,e.component.router._locationState.current=n.data.currentLocation)}return t(n)}}}};var UZ=function(e){var t=new sd(sd.EVENTS.duplicateActivitySuccess);e.component.triggerPublicEvent(t)},WZ=function(e,t){var n=new sd(sd.EVENTS.duplicateActivityError);n.setData(t),e.component.triggerPublicEvent(n)};const zZ=function(e){return function(t){return function(n){return function(r){var i=t.getState(),o=n(r);switch(r.type){case Sf:i.activityEdit.isDuplicatingActivity&&UZ(e);break;case Qd:UZ(e);break;case wf:i.activityEdit.isDuplicatingActivity&&WZ(e,r.data);break;case Zd:WZ(e,r.data)}return o}}}};const GZ=function(e){var t=e.component.router;return function(){return function(e){return function(n){var r=e(n);if(n.type===ph){var i=n.data;t[i.methodName].apply(t,i.methodArgs)}return r}}}};const $Z=function(e){return function(){return function(t){return function(n){var r=t(n),i="item_list"===e.component.getMode()||"item_for_activity_list"===e.component.getMode();if(n.type===Yr&&i){var o=e.component.getSearchModel(),a=o.get("tags").all,s=e.shell.getContext().abAlignedTagTypeUtil;a=s.filterNonABTags(a),n.data.length&&a.push(jH(s,n.data[0])),o.setTags("all",a),e.component.componentView.navigateToSearchQuery()}return r}}}};const KZ=function(e){return function(){return function(t){return function(n){var r=t(n),i=e.component.getSearchModel(),o=e.initOptionsModel.getABStandardsConfig().enable,a=e.shell.getStore(),s=a.getState().abStandards.browser.isOpen;if(n.type===fh&&o&&i){var l=e.shell.getContext().abAlignedTagTypeUtil.filterAlignedABTags(i.get("tags").all),u=rc.selectors.getAppliedAlignableStandardGuids(a.getState())[0]||null,c=null;l&&l.length&&(c=l[0].name),u!==c&&(c?(a.dispatch(rc.actions.getStandards([c])),a.dispatch(rc.actions.setAppliedAlignableStandards([c]))):a.dispatch(rc.actions.setAppliedAlignableStandards([])))}return n.type===fh&&s&&a.dispatch(rc.actions.closeBrowser()),r}}}};const ZZ=function(e){return function(t){return function(n){return function(r){var i=Oh(t.getState()),o=n(r),a=Oh(t.getState());if(i!==a||r.type===ep){var s=new sd(sd.EVENTS.activityEditSaveableChanged);s.setData({saveable:a}),e.component.triggerPublicEvent(s)}return o}}}};const JZ=function(e){return function(t){return function(n){return function(r){var i,o=t.getState().activityEdit.mode,a=n(r),s=t.getState().activityEdit.mode;r.type===Af&&o!==s&&("confirm_duplicate"===s?i=sd.EVENTS.duplicateActivityConfirmationScreenOpen:"confirm_duplicate"===o&&(i=sd.EVENTS.duplicateActivityConfirmationScreenClose),i&&e.component.triggerPublicEvent(new sd(i)));return a}}}};var QZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a().deepExtend({},{react:!1,route:{},fromModule:!1},e)};var XZ=Io({tab:function(e,t){var n,r,i;return t.type===mh&&(n=t.data.tabName,i=t.data.tabBarId),i?(r={activeTabName:n,previousLocation:e[i]?e[i].previousLocation:void 0},a().deepExtend({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,r))):e||{}},loadingStack:WV,navigate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QZ(),t=arguments.length>1?arguments[1]:void 0;if(t.type===fh){var n=HZ(t.data.currentLocation);e=n&&n.isExact?{route:n,react:!0,fromModule:t.fromModule}:{route:{},react:!1,fromModule:t.fromModule}}return e},tooltip:function(e,t){if(t.type===af){var n=a().isNumber(e.forceUpdateTooltipCounter)?e.forceUpdateTooltipCounter:0;return a().deepExtend({},e,{forceUpdateTooltipCounter:n+1})}return e||{}}});function eJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const tJ=function(e,t){switch(t.type){case Jd:return a().deepExtend({},e,{isDuplicatingActivity:!0});case Qd:case Zd:return a().deepExtend({},e,{isDuplicatingActivity:!1});case Kd:return a().deepExtend({},e,{loadingItems:!1,loadedItems:!0,items:a().extend(e.items,eJ({},t.data.newId,e.items[t.data.oldId]))});case RU:return a().deepExtend({},e,{mode:"confirm_duplicate"});case yp:var n=a().deepExtend({},e,{showDuplicateMessage:t.data.show});return a().setNested(n,"duplicateErrorCode",t.data.errorCode),n}return e||{}};function nJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rJ=function(e,t){switch(t.type){case ef:var n=a().deepExtend({},e,{isSaved:!1,loading:!0,loadedItems:!1,savedActivityJson:{},activityJson:{},activityLoaded:!1,showDuplicateMessage:!1});return delete n.duplicateErrorCode,n;case Xd:var r=t.data,i={newActivityJsonSet:!1,loading:!1,savedActivityJson:r.activity,activityJson:r.activity,cachedActivities:a().extend(e.cachedActivities,nJ({},r.activity.reference,r.activity)),activityLoaded:!0,isDirty:!1,isSaved:!1,showDuplicateMessage:!1};0===a().size(a().getNested(r,"activity.data.items"))&&(i.loadedItems=!0);var o=a().deepExtend({},e,i),s="activityJson.data.config.navigation.auto_save",l=a().getNested(o,"".concat(s,".saveIntervalDuration"));return a().isUndefined(l)||(a().setNested(o,"".concat(s,".save_interval_duration"),l),a().deleteNested(o,"".concat(s,".saveIntervalDuration"))),delete o.duplicateErrorCode,o;case tf:var u=t.data,c={newActivityJsonSet:!1,loading:!1,savedActivityJson:u.activity,activityJson:u.activity,cachedActivities:a().extend(e.cachedActivities,nJ({},u.activity.reference,u.activity)),activityLoaded:!0,isDirty:!1,isSaved:!1,showDuplicateMessage:!1,loadedItems:!0},d=a().deepExtend({},e,c);return delete d.duplicateErrorCode,d;case rf:return a().deepExtend({},e,{loadingItems:!0,loadedItems:!1});case of:return a().deepExtend({},e,{loadingResourceItems:!0,loadedResourceItems:!1});case nf:return a().deepExtend({},e,{loadingItems:!1,loadedItems:!0,items:nJ({},e.activityJson.activity_id,t.data[e.activityJson.activity_id])})}return e||{}};function iJ(e){!function(e){a().isObject(e.data.config)||(e.data.config={})}(e),a().isObject(e.data.config.navigation)||(e.data.config.navigation={})}function oJ(e,t,n){if("assess"!==e.activityJson.data.rendering_type)return e;var r=e.activityJson;return iJ(r),"toggleValue"===n?r.data.config.navigation[t]=!a().getNested(r,"data.config.navigation."+t):"remove"===n?delete r.data.config.navigation[t]:r.data.config.navigation[t]=n,a().deepExtend({},e,{isDirty:!0,isSaving:!1,isSaved:!1,activityJson:r})}const aJ=function(e,t){switch(t.type){case Jf:return oJ(e,"show_intro","toggleValue");case Qf:return oJ(e,"show_outro","toggleValue");case hf:return oJ(e,"intro_item","remove");case gf:return oJ(e,"outro_item","remove");case yf:return oJ(e,"intro_item",t.data);case vf:return oJ(e,"outro_item",t.data)}return e||{}};const sJ=function(e,t){switch(t.type){case bf:var n=oJ(e,"resource_items",[t.data]);return a().deepExtend({},n,{resourceItem:t.data});case Pf:return a().deepExtend({},e,{resourceItem:t.data.resourceItem,loadingResourceItems:!1,loadedResourceItems:!0});case _f:var r=oJ(e,"resource_items","remove");return a().deepExtend({},r,{resourceItem:null})}return e||{}};function lJ(e){return function(e){if(Array.isArray(e))return uJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uJ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const dJ=function(e,t){var n=e&&e.organisationId;switch(t.type){case fp:return a().deepExtend({},e,{isDirty:!0,isSaving:!1,isSaved:!1,items:cJ({},t.data.field,t.data.value.map((function(e){return e.item}))),activityJson:{data:{items:t.data.value.map((function(e){return e.activityItem}))}}});case zd:var r=a().cloneDeep(a().getNested(e,"activityJson.data.items"))||[],i=t.data.items;return a().isArrayOfStrings(r)&&a().isArrayOfObjects(i)&&(r=a().map(r,(function(e){return{id:kd.getItemIdForItemsApi({reference:e},n),reference:e}}))),a().isArrayOfObjects(i)&&(i=a().map(i,(function(e){return a().extend({id:kd.getItemIdForItemsApi(e,n)},e)}))),a().deepExtend({},e,{isDirty:!0,isSaving:!1,isSaved:!1,activityJson:{data:{items:[].concat(lJ(a().getNested(e,"activityJson.data.items")||[]),lJ(i))}}});case pf:var o=e.activityJson.activity_id,s=a().reduce(a().keys(e.itemsUiState),(function(t,n){return e.itemsUiState[n].checked?[].concat(lJ(t),[n]):t}),[]),l=a().filter(Th(e),(function(e){return!a().contains(s,e.activityItem.id)})),u=cJ({},o,a().map(l,(function(e){return e.item}))),c=a().cloneDeep(e.itemsUiState),d=a().map(l,(function(e){return e.activityItem})),f=a().deepExtend({},e,{selectAllItems:!1,numberOfDeletedItems:a().size(s),items:u,isDirty:!0,isSaving:!1,isSaved:!1,activityJson:{data:{items:d}}});return a().each(s,(function(e){return delete c[e]})),f.itemsUiState=c,f;case dp:var p,h,m=parseInt(e.activityJson.activity_id),g=a().extend({organisation_id:t.data.organisationId||n},t.data.item),y=a().cloneDeep(e),v=!1;if(a().each(y.items[m],(function(e,t){a().has(e,"item_pool_id")||e.organisation_id!==g.organisation_id||e.item_id!==g.item_id||(p=e.reference,h=y.activityJson.data.items[t].id,y.items[m][t]=g,v=!0)})),v){var b={};b.id=h,b.reference=p,g.organisation_id!==n&&(b.organisation_id=g.organisation_id);var _=a().find(y.activityJson.data.items,(function(e){return a().isEqual(e,b)}));g.reference!=p&&(_.reference=g.reference,_.id=kd.getItemIdForItemsApi(g,n))}else a().isArray(y.activityJson.data.items)||(y.activityJson.data.items=[]),a().isUndefined(y.items[m])&&(y.items[m]=[]),y.items[m].push(g),y.activityJson.data.items.push({reference:g.reference,id:kd.getItemIdForItemsApi(g,n)});return a().isEqual(y.activityJson.data.items,e.activityJson.data.items)||(y.isDirty=!0),y}return e||{}};const fJ=function(e,t){switch(t.type){case sp:return a().deepExtend({},e,{isDirty:!0,isSaving:!1,isSaved:!1,activityJson:{tags:t.data.tags}});case ap:return a().deepExtend({},e,{activityJson:{metadata:t.data}});case rp:var n=kd.setOrganisationIdInItems(t.data,e.organisationId),r=!1;return t.data.activity_id&&-1!==t.data.activity_id||(r=!0),a().deepExtend({},e,{newActivityJsonSet:r,isDirty:!0,isSaving:!1,isSaved:!1,activityJson:n});case op:var i=a().deepExtend({},e,{isDirty:!0,isSaving:!1,isSaved:!1}),o=kd.setOrganisationIdInItems({data:a().cloneDeep(t.data.source)},e.organisationId);return i.activityJson.data=o.data,i;case tp:var s=a().setNested({},t.data.field,t.data.value)||{},l=a().cloneDeep(e),u={};return a().isUndefined(t.data.value)&&a().setNested(l,"activityJson."+t.data.field,void 0),u=t.data.doNotExtend?a().setNested(l,"activityJson."+t.data.field,t.data.value):a().deepExtend({},l,{activityJson:s}),a().deepExtend(u,{isDirty:!0,isSaving:!1,isSaved:!1});case ip:var c=a().cloneDeep(e);for(var d in t.data.values)if(t.data.values.hasOwnProperty(d)){var f=t.data.values[d],p="activityJson.data.config."+d;a().isEmpty(f)?a().deleteNested(c,p):c=a().setNested(c,p,f)}return a().deepExtend(c,{isDirty:!0,isSaving:!1,isSaved:!1});case np:var h,m=a().cloneDeep(e),g=a().getNested(m,"activityJson.data.config.ignore_question_attributes")||[];t.data.setValue?g.push(t.data.value):g=g.filter((function(e){return e!==t.data.value}));var y=a().setNested({},t.data.field,g);return h=a().deepExtend({},m,{activityJson:y}),a().deepExtend(h,{isDirty:!0,isSaving:!1,isSaved:!1})}return e||{}};function pJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pJ(Object(n),!0).forEach((function(t){mJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="activities/";return Us(e,t)&&e.length>t.length}function yJ(e){return e&&["activities/new","activities/new/adaptive"].indexOf(e)>-1}function vJ(e,t){var n=t.previousLocation,r=t.currentLocation;return e===fh&&(function(e,t){return gJ(e)&&!gJ(t)}(n,r)||!yJ(n)&&yJ(r))}const bJ=function(e,t){var n;switch(t.type){case mf:n=a().deepExtend({},e,{numberOfDeletedItems:0});break;case $f:var r=a().isBoolean(a().getNested(t,"data.isDirty"))?a().getNested(t,"data.isDirty"):!e.isDirty;n=a().deepExtend({},e,{isDirty:r});break;case $d:n=a().deepExtend({},e,{loading:!1});break;case sf:var i=t.data;delete(n=a().extend({},e,{isDirty:!0,isSaved:!1,loadingItems:!1,loadedItems:!0,newActivityJsonSet:!0,savedActivityJson:null,items:{},activityJson:i.activity,activityLoaded:!0,showDuplicateMessage:!1})).duplicateErrorCode;break;case Wd:n=a().deepExtend({},e,{loadingItems:!1,loadedItems:!0});break;case ff:var o=a().cloneDeep(e);o=a().omitDeep(o,["annotations_api_init_options"]),n=a().deepExtend(o,{isDirty:!0,isSaving:!1,isSaved:!1});break;case Xf:n=a().deepExtend({},e,{eventRenderedTriggered:!0});break;case fh:n=hJ(hJ({},e),{},{eventRenderedTriggered:!1}),vJ(t.type,t.data)&&(n=hJ(hJ({},n),{},{selectAllItems:!1,itemsUiState:{},isSaving:!1,isDirty:!1,loadedItems:!1,activityLoaded:!1,newActivityJsonSet:!1,activityJson:{},resourceItem:null}));break;default:n=e||{}}return n};const _J=function(e,t){var n;switch(t.type){case Kf:var r=a().getNested(t,"data.mode")?a().getNested(t,"data.mode"):"edit"===e.mode?"preview":"edit";n=a().deepExtend({},e,{mode:r});break;case Af:n=a().deepExtend({},e,{mode:t.data});break;case df:n=a().deepExtend({},e,{loadingPreview:!0});break;case cf:n=a().deepExtend({},e,{loadingPreview:!1});break;case lf:n=a().deepExtend({},e,{renderKey:a().uuid()});break;default:n=e||{}}return n};function wJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const EJ=function(e,t){switch(t.type){case Of:return a().deepExtend({},e,{previousSearchStates:wJ({},t.data.field,t.data.lastLocation)});case Gd:var n=a().cloneDeep(e);return delete n.previousSearchStates,n;case Tf:return a().deepExtend({},e,{isInItemPicker:t.data})}return e||{}};function SJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xJ=function(e,t){switch(t.type){case Ef:return a().deepExtend({},e,{isSaving:!0});case Sf:var n=t.data,r=a().deepExtend({},e,{isSaving:!1,isSaved:!0,isDirty:!1,newActivityJsonSet:!1,savedActivityJson:n,cachedActivities:SJ({},n.reference,n),isDuplicatingActivity:!1,activityJson:t.data});return r.items[-1]&&(r.items[n.activity_id]=r.items[-1],delete r.items[-1]),r;case wf:return a().deepExtend({},e,{isSaving:!1,isSaved:!1,isDirty:!0,isDuplicatingActivity:!1});case Cf:return a().deepExtend({},e,{itemSaveable:t.data});case xf:return a().extend({},e,{customRegionTemplatesNeedSave:!1,isSaving:!1,isSaved:!0})}return e||{}};function kJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const TJ=function(e,t){switch(t.type){case gp:var n=t.data.setting,r=t.data.stateType,i=t.data.stateValue;return t.data.toggleState&&(i=!a().getNested(e,"settingsUiState.".concat(n,".").concat(r))),a().deepExtend({},e,{settingsUiState:a().deepExtend({},e.settingsUiState,kJ({},n,kJ({},r,i)))});case"ACTIVITY_EDIT_UPDATE_SETTINGS":return a().deepExtend({},e,{settingsData:a().deepExtend({},e.settingsData,kJ({},t.data.setting,t.data.value))})}return e||{}};function OJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CJ=function(e,t){switch(t.type){case vp:var n=t.data.button,r=t.data.stateType,i=t.data.editorType,o="".concat(i,"UiState"),s=t.data.stateValue;return t.data.toggleState&&(s=!(a().getNested(e,"".concat(o,".").concat(n,".").concat(r))||s)),a().deepExtend({},e,OJ({},o,a().extend({},e[o],OJ({},n,OJ({},r,s)))))}return e||{}};function AJ(e,t,n,r){var i=a().extend({},e);return i.templateBuilder[t]=n,r&&(i.templateBuilder.isDirty=!0),i}function PJ(e,t){return a().each(e.additionalConfig,(function(e,n){t[n]=e})),t}const MJ=function(e,t){switch(t.type){case Lf:var n=a().deepExtend({},e);return"left"===t.data.panel&&(n.templateBuilder.leftPanelIsReadyForDrag=t.data.value),"right"===t.data.panel&&(n.templateBuilder.rightPanelIsReadyForDrag=t.data.value),n;case cp:return AJ(e,"hoveredRegionData",t.data);case up:return AJ(e,"hoveredElementIndex",t.data);case lp:var r=AJ(e,"selectedElementData",{});return AJ(r,"draggedElementData",t.data);case Vf:return AJ(e,"regionConfig",t.data,!0);case Ff:return AJ(e,"labelBundle",t.data,!0);case zf:return AJ(e,"unassignedElementsOrder",t.data);case Wf:return AJ(e,"showAnimationOnAppear",t.data);case mp:return AJ(e,"selectedElementData",t.data);case Uf:return AJ(e,"regionNames",t.data);case Bf:return AJ(e,"expandedRegion",t.data);case Yf:return AJ(e,"templatePlayerName",t.data,!0);case Hf:return AJ(e,"templateReference",t.data);case If:return AJ(e,"elements",t.data);case jf:return AJ(e,"focusedElement",t.data);case qf:return AJ(e,"focusedRegion",t.data);case Nf:var i=a().deepExtend({},e);return i.templateBuilder={},i;case Df:var o=a().deepExtend({},e),s=t.data;return o.customRegionTemplates=a().filter(o.customRegionTemplates,(function(e){return e.reference!==s.reference})),a().isJsonObject(o.activityJson.metadata)&&delete o.activityJson.metadata.player_template_reference,o.activityJson.data.config.regions={},o.activityJson.data.config.labelBundle={},o.customRegionTemplatesNeedSave=!0,o.isSaving=!1,o.isSaved=!1,o;case hp:var l=a().deepExtend({},e),u=l.activityJson,c=t.data;return function(e){a().isObject(e.data.config)||(e.data.config={})}(u),u.data.config.labelBundle=c.labelBundle,u.data.config.regions=c.regionConfig,u.data.config.annotations=c.annotations,!0!==c.annotations?delete u.data.config.annotations_api_init_options:u.data.config.annotations_api_init_options=c.annotationOptions,u.data.config=PJ(c,u.data.config),delete u.data.config.region_overrides,a().isArray(l.customRegionTemplates)||(l.customRegionTemplates=[]),l.customRegionTemplates=a().filter(l.customRegionTemplates,(function(e){return e.reference!==c.reference})),l.customRegionTemplates.push(function(e){return{json:PJ(e,{regions:e.regionConfig,labelBundle:e.labelBundle}),reference:e.reference,name:e.name,changed:!0}}(c)),l.customRegionTemplatesNeedSave=!0,l.isSaving=!1,l.isSaved=!1,a().isJsonObject(l.activityJson.metadata)||(l.activityJson.metadata={}),l.activityJson.metadata.player_template_reference=c.reference,l;case Rf:var d=a().deepExtend({},e),f=d.activityJson.metadata.player_template_reference,p=a().findIndex(d.customRegionTemplates,(function(e){return e.reference===f})),h=d.customRegionTemplates[p];return d.templateBuilder={templatePlayerName:h.name,templateReference:h.reference,regionConfig:h.json.regions,labelBundle:h.json.labelBundle,additionalConfig:a().omit(h.json,["regions","labelBundle"])},d;case Mf:var m=a().extend({},e);return m.customRegionTemplates=t.data,m.customRegionTemplatesFetched=!0,m;case bp:return AJ(e,"additionalConfig",t.data,!0);case _p:return AJ(e,"invalidSourceJson",t.data)}return e||{}};function DJ(e){return function(e){if(Array.isArray(e))return RJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return RJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RJ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const NJ=function(e,t){switch(t.type){case uf:var n=t.data.itemId;if(!n){var r=a().pick(e.itemsUiState,(function(e){return e.showPreview&&!e.questionsApiLoaded}));n=a().keys(r)[0]}return a().deepExtend({},e,{itemsUiState:a().extend({},e.itemsUiState,LJ({},n,{questionsApiLoaded:t.data.loadState}))});case pp:var i=t.data.itemId,o=t.data.stateType,s=t.data.stateValue;return t.data.toggleState&&(s=!(a().getNested(e,"itemsUiState.".concat(i,".").concat(o))||s)),a().deepExtend({},e,{itemsUiState:a().extend({},e.itemsUiState,LJ({},i,LJ({},o,s)))});case Gf:var l=t.data.itemId,u=!a().getNested(e,"itemsUiState.".concat(l,".checked")),c=a().extend({},e.itemsUiState,LJ({},l,{checked:u})),d=Th(e),f=!1;if(u){f=!0;var p=a().reduce(d,(function(e,t){return t.activityItem.id!==l?[].concat(DJ(e),[t.activityItem.id]):DJ(e)}),[]);a().each(p,(function(t){a().getNested(e,"itemsUiState.".concat(t,".checked"))||(f=!1)}))}return a().deepExtend({},e,{selectAllItems:f,itemsUiState:c});case Zf:var h=Th(e),m=a().reduce(h,(function(e,t){return[].concat(DJ(e),[t.activityItem.id])}),[]),g=a().reduce(m,(function(t,n){return t[n]=a().extend({},e.itemsUiState[n],{checked:!e.selectAllItems}),t}),{});return a().deepExtend({},e,{selectAllItems:!e.selectAllItems,itemsUiState:g})}return e||{}};var IJ={text:""};const jJ=Io({schemas:function(e,t){return t.type===kf?t.data:e||{}},initOptions:function(e){return e||{}},activityEdit:function(e,t){var n;return n=tJ(e,t),n=rJ(n,t),n=aJ(n,t),n=sJ(n,t),n=dJ(n,t),n=fJ(n,t),n=bJ(n,t),n=_J(n,t),n=EJ(n,t),n=xJ(n,t),n=TJ(n,t),n=CJ(n,t),n=MJ(n,t),n=NJ(n,t)},ui:XZ,confirmActivityDuplicate:function(e,t){var n;switch(t.type){case LU:n=a().deepExtend({},e,{secondsSinceLastJobPoll:t.data.elapsedTime});break;case Qd:n=a().deepExtend({},e,{secondsSinceLastJobPoll:0,duplicateSuccess:!0});break;case Zd:n=a().deepExtend({},e,{secondsSinceLastJobPoll:0,duplicateError:!0});break;case NU:n=a().deepExtend({},e,{secondsSinceLastJobPoll:0,duplicateSuccess:!1,duplicateError:!1,externalSettings:null});break;case RU:n=a().deepExtend({},e,{externalSettings:t.data.externalSettings});break;default:n=e||{}}return n},a11yMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:IJ,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oh:return{text:t.payload.text};case ah:return{text:""};default:return e}},abStandards:rc.reducer});const BJ=function(e){var t=e.initOptionsModel.toJSON(),n=e.initOptionsModel.getDuplicateActivityConfig();return Lo(jJ,{ui:{loadingStack:[],navigate:{route:{}}},activityEdit:{activityJson:{},cachedActivities:{},displayMode:"edit",isDirty:!1,isSaved:!1,isSaving:!1,items:{},itemsUiState:{},loadingPreview:!1,mode:"edit",selectAllItems:!1,settingsUiState:{},organisationId:e.initOptionsModel.getOrganisationId(),duplicateShow:n.duplicateShow,showDuplicateMessage:!1,itemSaveable:!1,isInItemPicker:!1,templateBuilder:{},resourceItem:null,loadingResourceItems:!1,loadedResourceItems:!0},confirmActivityDuplicate:{secondsSinceLastJobPoll:0,deepCopy:n.deepCopy,duplicateSharedPassages:n.duplicateSharedPassages,duplicateSuccess:!1,duplicateError:!1},initOptions:t},Fo.apply(null,function(e){var t=[qZ(e),zZ(e),GZ(e),$Z(e),_x.Z.withExtraArgument(e),KZ(e),ZZ(e),JZ(e)];return!!window.MSInputMethodContext&&document.documentMode,t}(e)))};const FJ=function(e){var t,n;return jK.getRoutes().forEach((function(r){t||r.path!==e||(t=r.handler,n=r.props||{})})),[t,n]};const YJ=Ln((function(e){return{loading:0!==a().size(e.ui.loadingStack)}}))((function(e){return e.loading?zt.createElement("div",{className:"lrn-author-loading-panel"},zt.createElement("div",{className:"lrn-spinner"},zt.createElement("div",{className:"lrn-bounce1"}),zt.createElement("div",{className:"lrn-bounce2"}),zt.createElement("div",{className:"lrn-bounce3"}))):null}));function HJ(e){return(HJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qJ(e,t){return(qJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UJ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=GJ(e);if(t){var i=GJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return WJ(this,n)}}function WJ(e,t){if(t&&("object"===HJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zJ(e)}function zJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GJ(e){return(GJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qJ(e,t)}(o,e);var t,n,r,i=UJ(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zJ(t=i.call(this,e)),"dismissError",(function(){t.setState({error:null})})),t.state={error:null,errorCount:0,renderChildren:!0},t}return t=o,(n=[{key:"componentDidCatch",value:function(e){e||(e=new Error("The ErrorBoundary component has caught an error, but the error argument is falsey. Please check the browser developer tools for the error details.")),this.setState((function(t){var n={error:e,errorCount:t.errorCount+1,renderChildren:t.renderChildren};return t.error&&e&&e.message===t.error.message&&(n.renderChildren=!1),n}))}},{key:"componentDidUpdate",value:function(e){var t={};this.props.path!==e.path&&this.state.error&&(t.error=null),this.props.children!==e.children&&(t.renderChildren=!0),a().isEmpty(t)||this.setState(t)}},{key:"render",value:function(){return zt.createElement(zt.Fragment,{key:this.state.errorCount},this.state.error&&zt.createElement("div",{className:"lrn-author-ui lrn-author-ui-no-preview"},zt.createElement(nT,{text:String(this.state.error),onDismiss:this.state.renderChildren?this.dismissError:void 0})),this.state.renderChildren&&this.props.children)}}])&&VJ(t.prototype,n),r&&VJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function KJ(e){return(KJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZJ(){return(ZJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function JJ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QJ(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tQ(e,t){return(tQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iQ(e);if(t){var i=iQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rQ(this,n)}}function rQ(e,t){if(t&&("object"===KJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function iQ(e){return(iQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tQ(e,t)}(o,e);var t,n,r,i=nQ(o);function o(){return XJ(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=JJ(FJ(this.props.route.path),2),t=e[0],n=e[1];return zt.createElement($J,{path:this.props.route.path},t?zt.createElement("div",{className:"lrn-author-ui"},zt.createElement(YJ,null),zt.createElement(t,ZJ({},this.props,n))):zt.createElement("div",null))}}])&&eQ(t.prototype,n),r&&eQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);oQ.propTypes={route:jn().object};const aQ=Ln((function(e){return{route:e.ui.navigate.route}}))(oQ);function sQ(e){return(sQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uQ(e,t){return(uQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pQ(e);if(t){var i=pQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dQ(this,n)}}function dQ(e,t){if(t&&("object"===sQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fQ(e)}function fQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pQ(e){return(pQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const hQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uQ(e,t)}(o,e);var t,n,r,i=cQ(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),"decrement"===(t=i.call(this,e)).props.unaryOperator?(t.state={time:{},seconds:t.props.time,decrement:!0,limit:0},t.timer=0):t.state={time:t.secondsToTime(t.props.time),seconds:0,limit:t.props.time,decrement:!1},t.state.duration=t.secondsToTime(t.props.time),t.startTimer=t.startTimer.bind(fQ(t)),t.count=t.count.bind(fQ(t)),t}return t=o,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.isReset!==e.isReset&&this.resetTimer(e),this.props.isReset!==e.isReset&&this.props.isReset&&this.startTimer()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"secondsToTime",value:function(e){var t=Math.floor(e/3600),n=e%3600,r=Math.floor(n/60),i=n%60,o=Math.floor(i);return{hours:this.addLeadingZero(t),minutes:this.addLeadingZero(r),seconds:this.addLeadingZero(o)}}},{key:"addLeadingZero",value:function(e){return 0===e?"00":e<10&&this.props.leadZeros?"0".concat(e):e}},{key:"componentDidMount",value:function(){var e=this.secondsToTime(this.state.seconds);this.setState({time:e}),this.startTimer()}},{key:"resetTimer",value:function(e){this.setState({isReset:!0,seconds:0,duration:this.secondsToTime(e.time),limit:this.props.time,time:{hours:"00",minutes:"00",seconds:"00"}}),clearInterval(this.timer)}},{key:"startTimer",value:function(){this.state.decrement?0===this.timer&&(this.timer=setInterval(this.count,1e3)):this.timer=setInterval(this.count,1e3)}},{key:"count",value:function(){var e;this.props.isPaused||this.props.isReset||(e=this.state.decrement?this.state.seconds-1:this.state.seconds+1,this.setState({time:this.secondsToTime(e),seconds:e})),this.props.onUpdate&&this.props.onUpdate({seconds:e}),e===this.state.limit&&(this.props.onComplete&&this.props.onComplete(),clearInterval(this.timer))}},{key:"renderTime",value:function(e){var t=[];return this.props.hours&&t.push("".concat(this.state[e].hours,":")),this.props.minutes&&t.push("".concat(this.state[e].minutes,":")),this.props.seconds&&t.push(this.state[e].seconds),t}},{key:"render",value:function(){var e=this.renderTime("time"),t=this.renderTime("duration");return zt.createElement("p",null,e,this.props.displayLimit?zt.createElement("span",{"data-authorapi-selector":"lrn-countdown-limit"}," / ",t):"")}}])&&lQ(t.prototype,n),r&&lQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function mQ(e){return(mQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yQ(e,t){return(yQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_Q(e);if(t){var i=_Q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bQ(this,n)}}function bQ(e,t){if(t&&("object"===mQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _Q(e){return(_Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yQ(e,t)}(o,e);var t,n,r,i=vQ(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).mediaDevices=navigator.mediaDevices,n.state={audioDevices:[],currentStream:null,error:null},n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.mediaDevices.getUserMedia({audio:!0}).then((function(t){e.enumerateDevices(),e.changeCurrentStream(t)})).catch((function(t){"NotAllowedError"===t.name&&console.error("Cannot access microphone because the user has forbidden it."),e.setState({error:t})}))}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"enumerateDevices",value:function(){var e=this;this.mediaDevices.enumerateDevices().then((function(t){e.createDeviceOptions(t)})).catch((function(t){e.setState({error:t})}))}},{key:"createDeviceOptions",value:function(e){for(var t=[],n=0;n<e.length;n++)"audioinput"===e[n].kind&&t.push(e[n]);t.length&&this.setState({audioDevices:t})}},{key:"handleOnChange",value:function(e){var t=this,n=e.currentTarget.value,r={audio:{deviceId:{exact:a().find(this.state.audioDevices,(function(e){return e.label===n})).deviceId}}};this.state.currentStream&&a().each(this.state.currentStream.getTracks(),(function(e){return e.stop()})),this.mediaDevices.getUserMedia(r).then(this.changeCurrentStream.bind(this)).catch((function(e){t.setState({error:e})}))}},{key:"changeCurrentStream",value:function(e){this.unmounted?a().each(e.getTracks(),(function(e){return e.stop()})):(this.setState({currentStream:e}),this.props.onChangeStream(e))}},{key:"buildDeviceOptions",value:function(){for(var e=[],t=0;t<this.state.audioDevices.length;t++)e.push(zt.createElement("option",{key:t,value:this.state.audioDevices[t].label},this.state.audioDevices[t].label));return e}},{key:"render",value:function(){if(this.state.error)throw this.state.error;var e=this.context.i18n,t=this.state.currentStream,n=null;if(t){var r=t.getAudioTracks();r.length&&(n=r[0].label)}return zt.createElement("div",{className:"lrn-author-input-select"},this.state.audioDevices.length?zt.createElement("div",{className:"lrn-author-input-control"},zt.createElement("label",null,e.get("audioRecorderAudioInputLabel")," "),zt.createElement("div",{className:"lrn-qe-custom-select"},zt.createElement("select",{onChange:this.handleOnChange.bind(this),className:"lrn-qe-select",value:n},this.buildDeviceOptions()))):zt.createElement("p",null,e.get("audioRecorderAudioInputEmpty")))}}])&&gQ(t.prototype,n),r&&gQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);wQ.contextTypes={i18n:jn().object};const EQ=wQ;function SQ(e){return(SQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kQ(e,t){return(kQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function TQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=CQ(e);if(t){var i=CQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return OQ(this,n)}}function OQ(e,t){if(t&&("object"===SQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function CQ(e){return(CQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kQ(e,t)}(o,e);var t,n,r,i=TQ(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={activeCountDown:!1},n}return t=o,(n=[{key:"countHandler",value:function(){this.setState({activeCountDown:!0}),this.props.onBeginCountDown()}},{key:"changeStream",value:function(e){this.props.onChangeStream(e)}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=!!window.webkitAudioContext,r={visibility:this.state.activeCountDown||n?"hidden":"visible"};return zt.createElement("div",null,zt.createElement("div",{style:r},zt.createElement(EQ,{onChangeStream:this.changeStream.bind(this)})),zt.createElement("button",{className:"lrn-btn-audio-start lrn-i-record\n                        ".concat(this.state.activeCountDown?" lrn-active-countdown":""),onClick:function(){return e.countHandler()}},this.state.activeCountDown?zt.createElement("div",{className:"lrn-author-recording-time"},zt.createElement("p",null,t.get("audioRecorderFeedbackBeginRecording")," "),zt.createElement(hQ,{time:3,hours:!1,minutes:!1,seconds:!0,onComplete:function(){return e.props.onComplete()},unaryOperator:"decrement",leadZeros:!1,displayLimit:!1})):zt.createElement("div",{className:"lrn-audio-intro"},zt.createElement("p",null,t.get("audioRecorderFeedbackPreRecording")))))}}])&&xQ(t.prototype,n),r&&xQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);AQ.contextTypes={i18n:jn().object};const PQ=AQ;function MQ(e){return(MQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LQ(e,t){return(LQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jQ(e);if(t){var i=jQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return IQ(this,n)}}function IQ(e,t){if(t&&("object"===MQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jQ(e){return(jQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const BQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LQ(e,t)}(o,e);var t,n,r,i=NQ(o);function o(){return DQ(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.sliderStyle||{},t={left:this.props.progress-.5+"%"};return a().extend(e,{width:this.props.progress+"%"}),zt.createElement("div",{className:"lrn-author-progress-bar",role:"progressbar"},zt.createElement("div",{className:"lrn-author-progress-bar-slider",style:e},this.props.text&&zt.createElement("div",null,this.props.text)),zt.createElement("div",{className:"lrn-author-progress-bar-cursor",style:t}))}}])&&RQ(t.prototype,n),r&&RQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function FQ(e){return(FQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HQ(e,t){return(HQ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VQ(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UQ(e);if(t){var i=UQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qQ(this,n)}}function qQ(e,t){if(t&&("object"===FQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function UQ(e){return(UQ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HQ(e,t)}(o,e);var t,n,r,i=VQ(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={progress:0},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.timer=setInterval(this.increaseProgress.bind(this),100)}},{key:"increaseProgress",value:function(){100!==this.state.progress?this.setState((function(e){return{progress:e.progress+10}})):clearInterval(this.timer)}},{key:"render",value:function(){var e={textAlign:this.props.isUploadRequestComplete?"center":null},t=this.context.i18n,n=this.props.labelPrefix,r=this.props.isSuccessful?t.get("".concat(n,"RecorderUploaded")):t.get("".concat(n,"RecorderUploading"));return zt.createElement("div",{className:"lrn-author-upload-progress"},zt.createElement(BQ,{sliderStyle:e,progress:this.state.progress,text:r}),zt.createElement("div",null,this.props.isUploadRequestComplete&&this.props.isSuccessful&&zt.createElement("div",{className:"lrn-author-upload-notification lrn-author-upload-success"},zt.createElement("span",{className:"lrn-i-tick"}),zt.createElement("span",null,t.get("".concat(n,"RecorderUploadSuccessful")))),this.props.isUploadRequestComplete&&!this.props.isSuccessful&&zt.createElement("div",{className:"lrn-author-upload-notification lrn-author-upload-error"},zt.createElement("span",{className:"lrn-i-cross"}),zt.createElement("span",null,this.props.errorMessage))))}}])&&YQ(t.prototype,n),r&&YQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);WQ.contextTypes={i18n:jn().object};const zQ=WQ;function GQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $Q=8e3+3e3*Math.random();const KQ=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.MAX_ATTEMPTS=3,this.RETRY_DELAY=$Q,this.uploadAttempts=0,this.promise=new S((function(e,n){t.resolve=e,t.reject=n}))}var t,n,r;return t=e,(n=[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.send(e),this.promise}},{key:"handleSuccess",value:function(e,t){e.target.status<400?this.resolve(e):this.retry(t)}},{key:"handleFail",value:function(e,t){this.retry(t)}},{key:"retry",value:function(e){var t=this;this.uploadAttempts++,setTimeout((function(){t.send(e)}),$Q)}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.uploadAttempts<3){var n=new FormData,r=t.data.file,i=t.data.assetName,o=new XMLHttpRequest,s=r.slice(0,r.size,r.type);a().each(t.formInputs,(function(e,t){n.append(t,e)})),n.append("file",s,i),o.addEventListener("load",(function(n){e.handleSuccess(n,t)})),o.addEventListener("error",(function(n){e.handleFail(n,t)})),o.open(t.formAttributes.method,t.formAttributes.action),o.send(n)}else this.reject()}}])&&GQ(t.prototype,n),r&&GQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var ZQ={UPLOAD_URL:"/assets/uploadform",FILE_SIZE_LIMITS:{audio:5e6,image:512e3,video:1e8,resource:5e6},FILE_TYPE_RESTRICTIONS:{audio:["audio/mp3","audio/mpeg","audio/mpeg3"],image:["image/gif","image/jpeg","image/png","image/svg+xml"],video:["video/mp4"],video_recorded:["video/webm"],caption:[".vtt"],resource:["text/csv","application/pdf","application/rtf","application/postscript","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","image/gif","image/jpeg","image/png","image/svg+xml"]}};function JQ(e){this._comms=e}a().extend(JQ.prototype,c.Events,{EVENTS:{success:"success",error:"error",start:"start"},upload:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._validateFileTypes(e,n.fileType)&&this._validateFileSizes(e,n.fileType);if(!r)return!1;this.trigger(this.EVENTS.start);var i=this._comms.request({url:ZQ.UPLOAD_URL,data:JSON.stringify(this._getAssetData(e,!1,n.requires_preprocessing,n.fileType))});i.done((function(n){n&&n.data&&!n.data.errors?t._S3Upload(e,n.data):t.trigger(t.EVENTS.error,{message:"Preparing the S3 request failed",file:e})})).fail((function(){t.trigger(t.EVENTS.error,{message:"Requesting metadata from the LRN endpoint failed",file:e})}))},_S3Upload:function(e,t){var n=this,r=new KQ,i={formAttributes:t.formAttributes,formInputs:t.formInputs,data:this._getAssetData(e,!0)};r.request(i).then((function(){n.trigger(n.EVENTS.success,t.assetUrl)})).catch((function(){n.trigger(n.EVENTS.error,{message:"Uploading to the S3 bucket failed",file:e})}))},_getAssetData:function(e,t,n,r){var i={assetName:e.name,mimeType:e.type,requiresPreprocessing:n};return r&&(i.fileType=r),t&&(i.file=e),i},_validateFileTypes:function(e,t){var n=ZQ.FILE_TYPE_RESTRICTIONS[t],r=function(e){var t=e.replace(/^(([a-z])*\/)/,"");return"svg+xml"===t&&(t="svg"),t},i=a().bind((function(e){var i=a().map(n,r);return a().contains(i,"mp3")&&(i=["mp3"]),e.name+" could not be uploaded. Please only upload "+t+" files of type "+i.join(", ")+"."}),this),o=e.type;return!(o&&!a().contains(n,o))||(this.trigger(this.EVENTS.error,{message:i(e),file:e}),!1)},_validateFileSizes:function(e,t){var n=ZQ.FILE_SIZE_LIMITS[t],r=function(e){var t="Kb",n=e/1e3;n>1e3&&(t="Mb",n/=1e3);var r=window.parseFloat(n.toFixed(2)),i=window.parseInt(n);return(n=i===r?i:r)+t},i=a().bind((function(e){return e.name+" could not be uploaded, because it has a size of "+r(e.size)+"; which exceeds the maximum file size of "+r(n)+"."}),this);return!(e.size>n)||(this.trigger(this.EVENTS.error,{message:i(e),file:e}),!1)}});const QQ=JQ;function XQ(e){return(XQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tX(e,t){return(tX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oX(e);if(t){var i=oX(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rX(this,n)}}function rX(e,t){if(t&&("object"===XQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iX(e)}function iX(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oX(e){return(oX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const aX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tX(e,t)}(o,e);var t,n,r,i=nX(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).boundUploadComplete=t.uploadComplete.bind(iX(t)),t.boundUploadError=t.uploadError.bind(iX(t)),t.uploader=new QQ(e.comms);var n=t.uploader.EVENTS;return t.uploader.on(n.success,t.boundUploadComplete),t.uploader.on(n.error,t.boundUploadError),t.state={isUploadRequestComplete:!1,isSuccessful:!1,errorMessage:null},t}return t=o,(n=[{key:"componentWillUnmount",value:function(){var e=this.uploader.EVENTS;this.uploader.off(e.success,this.boundUploadComplete),this.uploader.off(e.error,this.boundUploadError)}},{key:"uploadError",value:function(e){this.setState({isUploadRequestComplete:!0,isSuccessful:!1,errorMessage:e.message})}},{key:"uploadComplete",value:function(e){this.setState({isUploadRequestComplete:!0,isSuccessful:!0,errorMessage:null}),this.props.onComplete(e)}},{key:"componentDidMount",value:function(){var e=this;fetch(this.props.url).then((function(e){return e.blob()})).then((function(t){t.name="recording.mp3",e.uploader.upload(t,{fileType:"audio"})}))}},{key:"render",value:function(){return zt.createElement(zQ,{labelPrefix:"audio",isUploadRequestComplete:this.state.isUploadRequestComplete,isSuccessful:this.state.isSuccessful,errorMessage:this.state.errorMessage})}}])&&eX(t.prototype,n),r&&eX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function sX(e){return(sX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uX(e,t){return(uX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fX(e);if(t){var i=fX(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dX(this,n)}}function dX(e,t){if(t&&("object"===sX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fX(e){return(fX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uX(e,t)}(o,e);var t,n,r,i=cX(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={isPaused:!1,secondsPassed:0},n}return t=o,(n=[{key:"componentDidMount",value:function(){this.props.audioRecorder.startRecording()}},{key:"componentWillUnmount",value:function(){this.props.audioRecorder.isRecording()&&this.props.audioRecorder.cancelRecording()}},{key:"pauseHandler",value:function(){this.props.audioRecorder.pause(),this.setState({isPaused:!0})}},{key:"resumeHandler",value:function(){this.props.audioRecorder.resume(),this.setState({isPaused:!1})}},{key:"finishHandler",value:function(){this.props.audioRecorder.finishRecording()}},{key:"updateSecondsPassed",value:function(e){this.setState({secondsPassed:e.seconds})}},{key:"renderFirstButton",value:function(){var e=this,t=this.context.i18n;return this.state.isPaused?zt.createElement("button",{className:"lrn-author-btn-audio lrn-i-resume",type:"button",onClick:function(){return e.resumeHandler()}},t.get("audioRecorderRecordingResumeButton")):zt.createElement("button",{className:"lrn-author-btn-audio lrn-i-pause",type:"button",onClick:function(){return e.pauseHandler()}},t.get("audioRecorderButtonRecordingPause"))}},{key:"renderSecondButton",value:function(){var e=this,t=this.context.i18n;return zt.createElement("button",{onClick:function(){return e.finishHandler()},className:"lrn-author-btn-audio lrn-i-stop",type:"button"},t.get("audioRecorderRecordingFinishButton"))}},{key:"render",value:function(){var e=this.state.secondsPassed/this.props.maxRecordingTime*100,t=["lrn-author-audio-status"],n=this.context.i18n;return this.state.isPaused?t.push("lrn-author-img-recording-stopped"):t.push("lrn-author-img-recording-animation"),zt.createElement("div",null,zt.createElement("div",{className:a().classNames(t)},this.state.isPaused?n.get("audioRecorderFeedbackRecordingPaused"):n.get("audioRecorderFeedbackRecording")),zt.createElement("div",{className:"lrn-author-audio-controls"},zt.createElement(hQ,{time:this.props.maxRecordingTime,hours:!1,minutes:!0,seconds:!0,unaryOperator:"increment",leadZeros:!0,isPaused:this.state.isPaused,displayLimit:!0,onUpdate:this.updateSecondsPassed.bind(this),onComplete:this.finishHandler.bind(this)}),zt.createElement("ul",null,zt.createElement("li",null,this.renderFirstButton()),zt.createElement("li",null,this.renderSecondButton()))),zt.createElement("div",{className:"lrn-author-audio-scrubber"},zt.createElement(BQ,{progress:e})))}}])&&lX(t.prototype,n),r&&lX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);pX.contextTypes={i18n:jn().object};const hX=pX;function mX(e){return(mX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yX(e,t){return(yX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_X(e);if(t){var i=_X(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bX(this,n)}}function bX(e,t){if(t&&("object"===mX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _X(e){return(_X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wX="lrn-author-img-playback-animation",EX="lrn-author-img-playback-paused",SX="stopped",xX="playing",kX="paused",TX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yX(e,t)}(o,e);var t,n,r,i=vX(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={playbackDuration:0,status:SX,isReset:!1,secondsPassed:0},n}return t=o,(n=[{key:"componentDidMount",value:function(){this.boundLoadedMetaData=this.loadedMetadata.bind(this),this.boundAudioEnded=this.audioEnded.bind(this),this.boundTimeUpdate=this.timeUpdate.bind(this),this.currentRecording=new Audio,this.currentRecording.src=this.props.url,this.currentRecording.addEventListener("loadedmetadata",this.boundLoadedMetaData),this.currentRecording.addEventListener("ended",this.boundAudioEnded),this.currentRecording.addEventListener("timeupdate",this.boundTimeUpdate)}},{key:"componentWillUnmount",value:function(){this.currentRecording.pause(),this.currentRecording.removeEventListener("loadedmetadata",this.boundLoadedMetaData),this.currentRecording.removeEventListener("ended",this.boundAudioEnded),this.currentRecording.removeEventListener("timeupdate",this.boundTimeUpdate)}},{key:"loadedMetadata",value:function(e){this.setState({playbackDuration:Math.floor(e.target.duration),isReset:!0})}},{key:"audioEnded",value:function(){this.setState({isReset:!0,status:SX})}},{key:"timeUpdate",value:function(){this.setState({secondsPassed:this.currentRecording.currentTime})}},{key:"playHandler",value:function(){this.currentRecording.play(),this.setState({status:xX,isReset:!1})}},{key:"pauseHandler",value:function(){this.currentRecording.pause(),this.setState({status:kX})}},{key:"stopHandler",value:function(){this.currentRecording.pause(),this.currentRecording.currentTime=0,this.setState({isReset:!0,status:SX})}},{key:"renderFirstButton",value:function(){var e=this,t=this.context.i18n;return this.state.status===SX?zt.createElement("button",{className:"lrn-author-btn-audio lrn-i-play",type:"button",onClick:function(){return e.playHandler()}},t.get("audioRecorderPlaybackPlayButton")):this.state.status===xX?zt.createElement("button",{className:"lrn-author-btn-audio lrn-i-pause",type:"button",onClick:function(){return e.pauseHandler()}},t.get("audioRecorderPlaybackPauseButton")):this.state.status===kX?zt.createElement("button",{className:"lrn-author-btn-audio lrn-i-resume",type:"button",onClick:function(){return e.playHandler()}},t.get("audioRecorderPlaybackResumeButton")):void 0}},{key:"renderSecondButton",value:function(){var e=this,t=this.context.i18n;return zt.createElement("button",{onClick:function(){return e.stopHandler()},className:"lrn-author-btn-audio lrn-i-stop",type:"button",disabled:this.state.status===SX},t.get("audioRecorderPlaybackStopButton"))}},{key:"render",value:function(){var e=this.state.secondsPassed/this.state.playbackDuration*100,t=["lrn-author-audio-status"],n=this.context.i18n;return this.state.status===xX?t.push(wX):t.push(EX),zt.createElement("div",null,zt.createElement("div",{className:a().classNames(t)},this.state.status===kX&&n.get("audioRecorderFeedbackPlaybackPaused"),this.state.status===SX&&n.get("audioRecorderFeedbackPlaybackStopped")),zt.createElement("div",{className:"lrn-author-audio-controls"},zt.createElement(hQ,{time:this.state.playbackDuration,hours:!1,minutes:!0,seconds:!0,unaryOperator:"increment",leadZeros:!0,isPaused:this.state.status!==xX,displayLimit:!0,onComplete:this.stopHandler.bind(this),isReset:this.state.isReset}),zt.createElement("ul",null,zt.createElement("li",null,this.renderFirstButton()),zt.createElement("li",null,this.renderSecondButton()))),zt.createElement("div",{className:"lrn-author-audio-scrubber"},zt.createElement(BQ,{progress:e})))}}])&&gX(t.prototype,n),r&&gX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);TX.contextTypes={i18n:jn().object};const OX=TX;function CX(e){return(CX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PX(e,t){return(PX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=RX(e);if(t){var i=RX(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return DX(this,n)}}function DX(e,t){if(t&&("object"===CX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function RX(e){return(RX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LX=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PX(e,t)}(o,e);var t,n,r,i=MX(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"render",value:function(){var e=this.context.i18n,t={display:this.props.hidden?"none":"block"},n=!this.props.okEnabled,r=this.props.labelPrefix;return zt.createElement("div",{className:"lrn-modal-footer lrn-sf-modal",style:t},zt.createElement("div",{className:"lrn-modal-footer-children"},this.props.children),zt.createElement("ul",null,zt.createElement("li",null,zt.createElement("button",{className:"lrn-btn lrn-btn-default lrn-btn-lg",onClick:this.props.cancelCallback},e.get("".concat(r,"RecorderMainPanelCancelButton")))),zt.createElement("li",null,zt.createElement("button",{className:"lrn-btn lrn-btn-primary lrn-btn-lg",disabled:n,onClick:this.props.okCallback},e.get("".concat(r,"RecorderMainPanelOkButton"))))))}}])&&AX(t.prototype,n),r&&AX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);LX.contextTypes={i18n:jn().object};const NX=LX;function IX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var jX={WebAudioRecorderMp3:function(){return __webpack_require__.e(704).then(__webpack_require__.bind(__webpack_require__,47953))}};var BX=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.workerType=t}var t,n,r;return t=e,(n=[{key:"getWorkerInstance",value:function(){var e;return this.promise||(this.promise=(e=this.workerType,new S((function(t){jX[e]().then((function(e){t(e.default())}))})))),this.promise}}])&&IX(t.prototype,n),r&&IX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())("WebAudioRecorderMp3");function FX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var YX={numChannels:2,encoding:"mp3",options:{timeLimit:600,encodeAfterRecord:!1,progressInterval:1e3,bufferSize:void 0,mp3:{mimeType:"audio/mpeg",bitRate:64}}};const HX=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a().extend(this,YX,n||{}),this.context=t.context,null==this.context.createScriptProcessor&&(this.context.createScriptProcessor=this.context.createJavaScriptNode),this.input=this.context.createGain(),t.connect(this.input),this.buffer=[],this.initWorker()}var t,n,r;return t=e,(n=[{key:"isRecording",value:function(){return null!=this.processor}},{key:"setOptions",value:function(e){this.isRecording()?this.error("setOptions: cannot set options during recording"):(a().extend(this.options,e),this.worker.postMessage({command:"options",options:this.options}))}},{key:"startRecording",value:function(){if(this.isRecording())this.error("startRecording: previous recording is running");else{var e=this.numChannels,t=this.buffer,n=this.worker;this.processor=this.context.createScriptProcessor(this.options.bufferSize,this.numChannels,this.numChannels),this.input.connect(this.processor),this.processor.connect(this.context.destination);var r=this;this.processor.onaudioprocess=function(i){for(var o=0;o<e;++o)t[o]=i.inputBuffer.getChannelData(o);!r.isPaused&&r.isRecording()&&n.postMessage({command:"record",buffer:t})},this.worker.postMessage({command:"start",bufferSize:this.processor.bufferSize}),this.startTime=Date.now()}}},{key:"recordingTime",value:function(){return this.isRecording()?.001*(Date.now()-this.startTime):null}},{key:"cancelRecording",value:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"cancel"})):this.error("cancelRecording: no recording is running")}},{key:"pause",value:function(){this.isPaused=!0}},{key:"resume",value:function(){this.isPaused=!1}},{key:"finishRecording",value:function(){this.isRecording()?(this.input.disconnect(),this.processor.disconnect(),delete this.processor,this.worker.postMessage({command:"finish"})):this.error("finishRecording: no recording is running")}},{key:"cancelEncoding",value:function(){this.options.encodeAfterRecord?this.isRecording()?this.error("cancelEncoding: recording is not finished"):(this.onEncodingCanceled(this),this.initWorker()):this.error("cancelEncoding: invalid method call")}},{key:"initWorker",value:function(){var e=this;null!=this.worker&&this.worker.terminate(),this.onEncoderLoading(this,this.encoding),BX.getWorkerInstance().then((function(t){e.worker=t,e.completeInit()}))}},{key:"completeInit",value:function(){var e=window.LearnosityApp._internal.config.sharedLibUrl+"/vendor/Mp3LameEncoder/",t=this;this.worker.onmessage=function(e){var n=e.data;switch(n.command){case"loaded":t.onEncoderLoaded(t,t.encoding);break;case"timeout":t.onTimeout(t);break;case"progress":t.onEncodingProgress(t,n.progress);break;case"complete":t.onComplete(t,n.blob);break;case"error":t.error(n.message)}},this.worker.onerror=function(e){console.error(e)},this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.numChannels},encoderDir:e,options:this.options})}},{key:"error",value:function(e){this.onError(this,"WebAudioRecorder.js:"+e)}},{key:"onEncoderLoading",value:function(e,t){}},{key:"onEncoderLoaded",value:function(e,t){}},{key:"onTimeout",value:function(e){e.finishRecording()}},{key:"onEncodingProgress",value:function(e,t){}},{key:"onEncodingCanceled",value:function(e){}},{key:"onComplete",value:function(e,t){e.onError(e,"WebAudioRecorder.js: You must override .onComplete event")}},{key:"onError",value:function(e,t){console.error(t)}}])&&FX(t.prototype,n),r&&FX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const VX=function(e){var t=new(window.AudioContext||window.webkitAudioContext),n=t.createGain(),r=t.createGain();n.gain.value=1,n.connect(r),t.createMediaStreamSource(e).connect(n);var i=new HX(r);return new S((function(e,t){i.onEncoderLoaded=function(){e(i)},i.onError=function(){t()}}))};function qX(e){return(qX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WX(e,t){return(WX=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zX(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=KX(e);if(t){var i=KX(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return GX(this,n)}}function GX(e,t){if(t&&("object"===qX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $X(e)}function $X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KX(e){return(KX=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZX="overwrite_prompt",JX="intro",QX="recording",XX="playback",e0="uploading",t0="uploaded",n0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WX(e,t)}(o,e);var t,n,r,i=zX(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).URL=window.URL||window.webkitURL,n.state={stage:n.props.assetAlreadyExists?ZX:JX,url:"",assetUrl:"",showDiscardChanges:!1,mediaStream:null,recorderReady:!1},n.boundFinalizeAudio=n.finalizeAudio.bind($X(n)),n.recordingArea=null,n}return t=o,(n=[{key:"componentDidCatch",value:function(){this.props.hideSlidePane(!0)}},{key:"componentWillUnmount",value:function(){this.state.mediaStream&&a().each(this.state.mediaStream.getTracks(),(function(e){return e.stop()}))}},{key:"overwriteYes",value:function(){this.setState({stage:JX})}},{key:"overwriteNo",value:function(){this.props.hideSlidePane(!0)}},{key:"discardChangesYes",value:function(){this.props.hideSlidePane(!0)}},{key:"discardChangesNo",value:function(){this.setState({showDiscardChanges:!1})}},{key:"handleChangeStream",value:function(e){this.setState({mediaStream:e})}},{key:"handleBeginIntroCountDown",value:function(){var e=this;this.state.mediaStream?VX(this.state.mediaStream).then((function(t){e.audioRecorder=t,e.audioRecorder.onComplete=e.completeRecording.bind(e),e.setState({recorderReady:!0})})).catch((function(){console.error("Audio Recorder failed to load")})):console.error("Missing media stream for audio input.")}},{key:"completeIntro",value:function(){this.setState({stage:QX})}},{key:"completeRecording",value:function(e,t){var n=this.URL.createObjectURL(t);this.setState({stage:XX,url:n})}},{key:"completeUploading",value:function(e){this.setState({stage:t0,assetUrl:e}),this.state.showDiscardChanges||(this.finalizeTimer=setTimeout(this.boundFinalizeAudio,1e3))}},{key:"finalizeAudio",value:function(){this.props.changeValue(this.state.assetUrl),this.props.hideSlidePane(!0),clearTimeout(this.finalizeTimer)}},{key:"okCallback",value:function(){this.state.stage===XX&&this.setState({stage:e0}),this.state.stage===t0&&this.boundFinalizeAudio()}},{key:"cancelCallback",value:function(){this.state.stage===JX?this.props.hideSlidePane(!0):(this.state.stage===QX&&this.recordingArea&&this.recordingArea.pauseHandler(),this.state.stage===XX&&this.audioPlayer&&this.audioPlayer.pauseHandler(),this.finalizeTimer&&clearTimeout(this.finalizeTimer),this.setState({showDiscardChanges:!0}))}},{key:"render",value:function(){var e=this,t=this.context.i18n,n=this.state.stage,r=t.get("audioRecorderReplaceRecording"),i=t.get("audioRecorderDiscardChanges"),o=n===ZX||this.state.showDiscardChanges,a={display:o?"none":"block"};return zt.createElement("div",{className:"lrn-modal-outlet lrn-author-ui"},this.state.showDiscardChanges&&zt.createElement(eu,{text:i,onClickYes:this.discardChangesYes.bind(this),onClickNo:this.discardChangesNo.bind(this),yesLabel:t.get("audioRecorderDiscardChangesYesButton"),noLabel:t.get("audioRecorderDiscardChangesNoButton"),labelPrefix:"audio"}),n===ZX&&zt.createElement(eu,{text:r,onClickYes:this.overwriteYes.bind(this),onClickNo:this.overwriteNo.bind(this),yesLabel:t.get("audioRecorderDiscardChangesYesButton"),noLabel:t.get("audioRecorderDiscardChangesNoButton"),labelPrefix:"audio"}),zt.createElement("div",{className:"lrn-modal-body",style:a},n===JX&&zt.createElement(PQ,{onChangeStream:this.handleChangeStream.bind(this),onBeginCountDown:this.handleBeginIntroCountDown.bind(this),onComplete:this.completeIntro.bind(this)}),n===QX&&this.state.recorderReady&&zt.createElement(hX,{ref:function(t){return e.recordingArea=t},audioRecorder:this.audioRecorder,maxRecordingTime:this.audioRecorder.options.timeLimit}),n===XX&&zt.createElement(OX,{url:this.state.url,ref:function(t){return e.audioPlayer=t}}),(n===e0||n===t0)&&zt.createElement(aX,{comms:this.props.comms,url:this.state.url,onComplete:this.completeUploading.bind(this)})),zt.createElement(NX,{hidden:o,cancelCallback:this.cancelCallback.bind(this),okCallback:this.okCallback.bind(this),okEnabled:n===t0||n===XX,labelPrefix:"audio"}))}}])&&UX(t.prototype,n),r&&UX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);n0.contextTypes={i18n:jn().object};const r0=n0;function i0(e){return(i0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a0(e,t){return(a0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s0(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u0(e);if(t){var i=u0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l0(this,n)}}function l0(e,t){if(t&&("object"===i0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u0(e){return(u0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a0(e,t)}(o,e);var t,n,r,i=s0(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).childContext={},n.childContext.i18n=n.props.i18n,n}return t=o,(n=[{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return zt.createElement(r0,{hideSlidePane:this.props.hideSlidePane,changeValue:this.props.changeValue,comms:this.props.comms,assetAlreadyExists:this.props.assetAlreadyExists})}}])&&o0(t.prototype,n),r&&o0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);c0.childContextTypes={i18n:jn().object};const d0=c0;function f0(e){return(f0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h0(e,t){return(h0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m0(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v0(e);if(t){var i=v0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g0(this,n)}}function g0(e,t){if(t&&("object"===f0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y0(e)}function y0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v0(e){return(v0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const b0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h0(e,t)}(o,e);var t,n,r,i=m0(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).boundUploadComplete=t.uploadComplete.bind(y0(t)),t.boundUploadError=t.uploadError.bind(y0(t)),t.uploader=new QQ(e.comms);var n=t.uploader.EVENTS;return t.uploader.on(n.success,t.boundUploadComplete),t.uploader.on(n.error,t.boundUploadError),t.state={isUploadRequestComplete:!1,isSuccessful:!1,errorMessage:null},t}return t=o,(n=[{key:"componentWillUnmount",value:function(){var e=this.uploader.EVENTS;this.uploader.off(e.success,this.boundUploadComplete),this.uploader.off(e.error,this.boundUploadError)}},{key:"uploadError",value:function(e){this.setState({isUploadRequestComplete:!0,isSuccessful:!1,errorMessage:e.message})}},{key:"uploadComplete",value:function(e){this.setState({isUploadRequestComplete:!0,isSuccessful:!0,errorMessage:null});var t=this.fetchAssetUrl(e);this.props.onComplete(t)}},{key:"fetchAssetUrl",value:function(e){var t=e.match(/(.*)\.(?:.*)/),n=t?t[1]:"";return"".concat(n,".mp4")}},{key:"componentDidMount",value:function(){var e=this;fetch(this.props.url).then((function(e){return e.blob()})).then((function(t){t.name="video.webm",e.uploader.upload(t,{fileType:"video_recorded",requires_preprocessing:!0})}))}},{key:"render",value:function(){return zt.createElement(zQ,{labelPrefix:"video",isUploadRequestComplete:this.state.isUploadRequestComplete,isSuccessful:this.state.isSuccessful,errorMessage:this.state.errorMessage})}}])&&p0(t.prototype,n),r&&p0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function _0(e){return(_0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E0(e,t){return(E0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S0(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T0(e);if(t){var i=T0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x0(this,n)}}function x0(e,t){if(t&&("object"===_0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k0(e)}function k0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T0(e){return(T0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O0="overwrite_prompt",C0="intro",A0="recording",P0="playback",M0="uploading",D0="uploaded",R0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E0(e,t)}(o,e);var t,n,r,i=S0(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).URL=window.URL||window.webkitURL,n.state={stage:n.props.assetAlreadyExists?O0:C0,url:"",assetUrl:"",showDiscardChanges:!1},n.responseId=a().uuid(),n.boundFinalizeVideo=n.finalizeVideo.bind(k0(n)),n.initQuestionsApi(),n}return t=o,(n=[{key:"initQuestionsApi",value:function(){var e=this;this.props.comms.request({url:"/questionsactivity"}).then((function(t){if(t){var n=t.data,r=a().extend({},e.buildQuestionsOptions(n)),i={readyListener:function(){var t=e.questionsApp.question(e.responseId);t.on("recording:started",(function(){e.startRecording()})),t.on("recording:stopped",(function(){var t=this.getRecording();e.completeRecording(this,t.file)}))},metricsContext:e.context.metricsUtil.getContext()};e.questionsApp=window.LearnosityApp.init(r,i)}}))}},{key:"buildQuestionsOptions",value:function(e){var t=a().extend({response_id:this.responseId,type:"video"});return a().extend({},e,{questions:[t]})}},{key:"componentDidCatch",value:function(){this.props.hideSlidePane(!0)}},{key:"setStage",value:function(e){this.setState({stage:e})}},{key:"closeRecordingPanel",value:function(){this.props.hideSlidePane(!0)}},{key:"discardChangesNo",value:function(){this.setState({showDiscardChanges:!1})}},{key:"startRecording",value:function(){this.setStage(A0)}},{key:"completeRecording",value:function(e,t){var n=this.URL.createObjectURL(t);this.setState({stage:P0,url:n})}},{key:"startUpload",value:function(){this.setStage(M0)}},{key:"completeUploading",value:function(e){this.setState({stage:D0,assetUrl:e}),this.state.showDiscardChanges||(this.finalizeTimer=setTimeout(this.boundFinalizeVideo,1e3))}},{key:"finalizeVideo",value:function(){var e={src:this.state.assetUrl,allow_retries:!0},t=JSON.stringify(e);this.props.changeValue(t),this.props.changeCurrentValue(this.state.assetUrl),this.props.hideSlidePane(!0),clearTimeout(this.finalizeTimer)}},{key:"okCallback",value:function(){this.startUpload()}},{key:"cancelCallback",value:function(){this.state.stage===C0?this.props.hideSlidePane(!0):(this.state.stage===A0&&this.questionsApp.question(this.responseId).pause(),this.finalizeTimer&&(clearTimeout(this.finalizeTimer),delete this.finalizeTimer),this.setState({showDiscardChanges:!0}))}},{key:"render",value:function(){var e=this.context.i18n,t=this.state.stage,n=e.get("videoRecorderReplaceRecording"),r=e.get("videoRecorderDiscardChanges"),i=e.get("videoRecorderUploadInformation"),o=t===O0||this.state.showDiscardChanges,a={display:o?"none":"block"},s={display:t!==M0&&t!==D0?"block":"none"};return zt.createElement("div",{className:"lrn-modal-outlet lrn-author-ui"},this.state.showDiscardChanges&&zt.createElement(eu,{text:r,onClickYes:this.closeRecordingPanel.bind(this),onClickNo:this.discardChangesNo.bind(this),yesLabel:e.get("videoRecorderDiscardChangesYesButton"),noLabel:e.get("videoRecorderDiscardChangesNoButton")}),t===O0&&zt.createElement(eu,{text:n,onClickYes:this.setStage.bind(this,C0),onClickNo:this.closeRecordingPanel.bind(this),yesLabel:e.get("videoRecorderDiscardChangesYesButton"),noLabel:e.get("videoRecorderDiscardChangesNoButton")}),zt.createElement("div",{className:"lrn-modal-body",style:a},zt.createElement("div",{style:s},zt.createElement("span",{className:"learnosity-response question-".concat(this.responseId)})),(t===M0||t===D0)&&zt.createElement(b0,{comms:this.props.comms,url:this.state.url,onComplete:this.completeUploading.bind(this)})),zt.createElement(NX,{hidden:o,cancelCallback:this.cancelCallback.bind(this),okCallback:this.okCallback.bind(this),okEnabled:t===D0||t===P0,labelPrefix:"video"},t===P0&&!this.state.showDiscardChanges&&zt.createElement("div",{className:"lrn-i-help"},i)))}}])&&w0(t.prototype,n),r&&w0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);R0.contextTypes={i18n:jn().object,metricsUtil:jn().object};const L0=R0;function N0(e){return(N0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j0(e,t){return(j0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B0(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y0(e);if(t){var i=Y0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F0(this,n)}}function F0(e,t){if(t&&("object"===N0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y0(e){return(Y0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j0(e,t)}(o,e);var t,n,r,i=B0(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).childContext={},n.childContext.i18n=n.props.i18n,n.childContext.metricsUtil=n.props.metricsUtil,n}return t=o,(n=[{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){return zt.createElement(L0,{hideSlidePane:this.props.hideSlidePane,changeValue:this.props.changeValue,changeCurrentValue:this.props.changeCurrentValue,comms:this.props.comms,assetAlreadyExists:this.props.assetAlreadyExists})}}])&&I0(t.prototype,n),r&&I0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);H0.childContextTypes={i18n:jn().object,metricsUtil:jn().object};const V0=H0;function q0(e){return(q0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z0(e,t){return(z0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G0(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K0(e);if(t){var i=K0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $0(this,n)}}function $0(e,t){if(t&&("object"===q0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function K0(e){return(K0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Z0=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z0(e,t)}(o,e);var t,n,r,i=G0(o);function o(){return U0(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=new lk({standaloneViewOptions:{wrapper:this.element},el:!1,asset:{mediaRequested:"".concat(this.props.mediaType),returnType:"URL",attributes:{src:this.props.currentValue}},comms:this.props.comms,i18n:this.props.i18n});t.render(),t.on(t.EVENTS.cancel,(function(){e.props.hideSlidePane()}),this),t.on(t.EVENTS.done,(function(){var n=t.getAsset(),r=n;if("video"===e.props.mediaType){var i={src:n,allow_retries:!1};r=JSON.stringify(i)}e.props.changeValue(r),e.props.changeCurrentValue(n),e.props.hideSlidePane()}),this)}},{key:"render",value:function(){var e=this;return zt.createElement("div",null,zt.createElement("div",{ref:function(t){return e.element=t}}))}}])&&W0(t.prototype,n),r&&W0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function J0(e){return(J0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X0(e,t){return(X0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function e1(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=n1(e);if(t){var i=n1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return t1(this,n)}}function t1(e,t){if(t&&("object"===J0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function n1(e){return(n1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const r1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X0(e,t)}(o,e);var t,n,r,i=e1(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).state={mountingComplete:!1},n}return t=o,(n=[{key:"CLASSES",get:function(){return{slidePane:"lrn-author-slide-pane",slidePaneActive:"lrn-slider-active"}}},{key:"componentDidMount",value:function(){var e=this;a().defer((function(){e.setState({mountingComplete:!0})}))}},{key:"render",value:function(){var e=[this.CLASSES.slidePane];return this.state.mountingComplete&&!this.props.playDismountAnimation&&e.push(this.CLASSES.slidePaneActive),zt.createElement("div",{className:a().classNames(e)},this.props.children)}}])&&Q0(t.prototype,n),r&&Q0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function i1(e){return(i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a1(e,t){return(a1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s1(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c1(e);if(t){var i=c1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l1(this,n)}}function l1(e,t){if(t&&("object"===i1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u1(e)}function u1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c1(e){return(c1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a1(e,t)}(o,e);var t,n,r,i=s1(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),d1(u1(n=i.call(this,e,t)),"openUploadModal",(function(){n.activeProvider=Z0,n.setState({showSlidePane:!0})})),d1(u1(n),"openRecordingModal",(function(){"audio"===n.props.mediaType&&(n.activeProvider=d0),"video"===n.props.mediaType&&(n.activeProvider=V0),n.setState({showSlidePane:!0})})),d1(u1(n),"hideSlidePane",(function(){n.setState({beginSlidePaneDismount:!0}),a().delay((function(){n.setState({showSlidePane:!1,beginSlidePaneDismount:!1})}),500)})),d1(u1(n),"_changeValue",(function(e){n._changeCurrentValue(e),n.props.onChangeValue(e)})),d1(u1(n),"_changeCurrentValue",(function(e){n.currentValue=e})),n.state={showSlidePane:!1,beginSlidePaneDismount:!1},n.currentValue=e.value,n}return t=o,(n=[{key:"SELECTORS",get:function(){return{slideWrapper:".lrn-qe-slide-pane-wrapper",simpleFeatureModal:".lrn-qe-modal-dialog-inner",uploadButton:"lrn-author-upload-".concat(this.props.mediaType),recordButton:"lrn-author-record-".concat(this.props.mediaType)}}},{key:"CLASSES",get:function(){return{recordButton:"lrn-simple-ft-btn lrn-i-record-".concat(this.props.mediaType,"-btn"),source:"lrn-author-".concat(this.props.mediaType,"-source")}}},{key:"render",value:function(){var e=this.props.i18n,t=document.querySelector("".concat(this.props.hook," ").concat(this.SELECTORS.slideWrapper)).querySelector(this.SELECTORS.simpleFeatureModal),n=this.activeProvider;return zt.createElement("div",null,zt.createElement("button",{className:"lrn-simple-ft-btn lrn-i-upload-btn","data-authorapi-selector":this.SELECTORS.uploadButton,onClick:this.openUploadModal},e.get("".concat(this.props.mediaType,"RecorderUploadButton"))),zt.createElement("button",{className:this.CLASSES.recordButton,"data-authorapi-selector":this.SELECTORS.recordButton,onClick:this.openRecordingModal},e.get("".concat(this.props.mediaType,"RecorderRecordButton"))),this.state.showSlidePane&&zt.createElement(ka,{container:t},zt.createElement(r1,{playDismountAnimation:this.state.beginSlidePaneDismount},zt.createElement("div",{className:this.CLASSES.source},zt.createElement(n,{hideSlidePane:this.hideSlidePane,changeValue:this._changeValue,changeCurrentValue:this._changeCurrentValue,comms:this.props.comms,currentValue:this.currentValue,assetAlreadyExists:!!this.currentValue,i18n:e,metricsUtil:this.props.metricsUtil,mediaType:this.props.mediaType})))))}}])&&o1(t.prototype,n),r&&o1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);f1.contextTypes={i18n:jn().object,qeManager:jn().object};const p1=f1;function h1(e,t,n){var r,i=n[e];return r=a().isString(i)||a().isNumber(i)?i:a().isObject(i)?zt.createElement(i,null):e,zt.createElement("span",{key:t},r," ")}function m1(e,t){var n=a().keys(t);return a().reduce(e.split(" "),(function(e,t){var r=a().contains(n,t),i=a().last(e),o=a().contains(n,i);return!i||r||o?(e.push(t),e):(e.pop(),e.push("".concat(i," ").concat(t)),e)}),[])}const g1=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.tag,i=void 0===r?"p":r,o=e.split("\n").map((function(e){return m1(e,t)})).map((function(e){return e.map((function(e,n){return h1(e,n,t)}))})).map((function(e,t){return"p"===i?zt.createElement("p",{key:t},e):"span"===i?zt.createElement("span",{key:t},e):void console.error("Invalid item tag when converting label to JSX: ".concat(i))}));return o};var y1=function(e,t){var n=e.onLaunch,r=e.hasPartialData,i=t.i18n,o="lrn-author-mathgen",s={stimulus:"".concat(o,"-stimulus"),buttonContainer:"".concat(o,"-buttons-container"),introButtons:a().classNames("lrn-qe-btn","lrn-qe-btn-primary","lrn-qe-btn-icon-left")},l=r?i.get("mathGenIntroContinue"):i.get("mathGenIntroLaunch");return zt.createElement("div",null,zt.createElement("div",{className:"lrn-qe-form-label lrn-qe-h4 lrn-qe-border-none lrn-qe-text-bold"},i.get("mathGenIntroHeading")),zt.createElement("div",{className:s.stimulus},g1(i.get("mathGenIntroDescription"))),zt.createElement("div",{className:s.buttonContainer},zt.createElement("button",{className:s.introButtons,onClick:n},zt.createElement("span",{className:"lrn-qe-i-plus"}),zt.createElement("span",{className:"lrn-qe-btn-name"},l))))};y1.propTypes={onLaunch:jn().func.isRequired},y1.contextTypes={i18n:jn().object};const v1=y1;const b1=function(e){return a().isEmpty(e)?"":0===e.indexOf("\\(")?e:"\\(".concat(e,"\\)")};var _1=function(e,t){var n=e.questions,r=e.example,i=e.validationType,o=e.onLaunch,s=e.validationOptions,l=t.i18n,u=s.decimalPlaces,c="lrn-author-mathgen",d={container:"".concat(c,"-summary-container"),lineSeparator:"".concat(c,"-summary-line-separator"),title:"".concat(c,"-summary-title-container"),lines:"".concat(c,"-summary-lines"),editButton:a().classNames("lrn-qe-btn","lrn-qe-btn-primary","".concat(c,"-summary-edit-btn"))};return zt.createElement("div",{className:d.container},zt.createElement("div",{className:d.title},zt.createElement("h2",null,l.get("mathGenSummaryHeading")),zt.createElement("button",{type:"button",className:d.editButton,onClick:o},zt.createElement("span",{className:"lrn-i-edit"}),l.get("mathGenSummaryLaunch"))),zt.createElement("div",{className:d.lineSeparator}),zt.createElement(w1,{possibilityCount:n}),zt.createElement("h2",null,l.get("mathGenSummaryPreview")),zt.createElement("div",{className:d.lines},b1(r)),zt.createElement("h2",null,l.get("mathGenSummaryValidationHeading")),zt.createElement("p",null,l.get("mathGenSummaryValidationFormat"),":"),zt.createElement("ul",null,i&&i.map((function(e,n){return zt.createElement("li",{key:n},t.i18n.getMathGenValidationType(e))}))),!a().isEmpty(u)&&zt.createElement("p",null,l.get("mathGenSummaryValidationDecimalPlaces"),": ",u))};function w1(e,t){var n=e.possibilityCount,r=t.i18n,i=r.get("mathGenSummary");var o=g1(i,{"%possibilities%":function(){var e=r.get("mathGenSummaryPossibilities"),t=g1(e,{"%possibilityCount%":n},{tag:"span"});return zt.createElement("strong",null,t)}});return zt.createElement("div",null,o)}_1.propTypes={example:jn().string.isRequired,questions:jn().number.isRequired,validationType:jn().array.isRequired,onLaunch:jn().func.isRequired},_1.contextTypes={i18n:jn().object},w1.contextTypes={i18n:jn().object};const E1=_1;const S1={configuration:{},ui:{layout:{global_template:"edit",edit_panel:{clozeformula:[{layout:"mathgen"}]}},live_score_button:!1,source_button:!1,help_button:!1,change_button:!1,validate_question_button:!1,undo_redo_button:!1,template_name:!1,toast_message:!1},custom_schema:{clozeformula:{id:"clozeformula",type:"response",version:"v2.146.0",name:"Cloze math formula",description:"Cloze question type with math formula inputs.",is_mathgen:!0,attributes:{metadata:{type:"object",attributes:{distractor_rationale_response_level:{items:{default:"",description:"Distractor value.",editor:{description:" Enter distractor value for each response.",element:"editor",advancedEditor:!0},name:"Distractor ",type:"string"},name:"Distractors",required:!1,type:"array",editorV3:{enable_reordering:!0}}}},type:{default:"clozeformula",name:"Question type",required:!0,type:"hidden"},is_math:{editor_default:!0},expression:{type:"string",required:!1,group:"basic",element:"formulaTemplate",ui_style:{type:"block-keyboard"},hide_response_button:!0},template:{type:"string",required:!0,group:"basic",element:"editor",token:"{{response}}"}}}},widget_json:{type:"clozeformula",is_math:!0,template:"<p>[Add your question text here]</p><p>{{response}}</p>",ui_style:{type:"block-keyboard"}}};function x1(e,t){var n=e.goToNextPage,r=e.goToPrevPage,i=e.isNextButtonDisabled,o=e.isPrevButtonDisabled,a=t.i18n,s=i?"lrn-author-mathgen-pagination-buttons-disabled":"",l=o?"lrn-author-mathgen-pagination-buttons-disabled":"";return zt.createElement("div",{className:"lrn-author-mathgen-pagination"},zt.createElement("button",{disabled:o,onClick:r,className:"lrn-author-mathgen-pagination-buttons ".concat(l)},zt.createElement("span",{className:"lrn-i-previous"}),a.get("mathGenGeneratePreviousPage")),zt.createElement("span",null,function(e){var t=e.totalItems,n=e.itemsSegment,r="".concat(n.from," to ").concat(n.to," of"),i=" ".concat(t," variations");return zt.createElement("span",null,r,zt.createElement("span",{className:"lrn-author-mathgen-pagination-variations"},i))}(e)),zt.createElement("button",{disabled:i,onClick:n,className:"lrn-author-mathgen-pagination-buttons ".concat(s)},a.get("mathGenGenerateNextPage"),zt.createElement("span",{className:"lrn-i-next"})))}x1.contextTypes={i18n:jn().object};const k1=x1;function T1(e){return(T1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C1(e,t){return(C1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A1(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D1(e);if(t){var i=D1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P1(this,n)}}function P1(e,t){if(t&&("object"===T1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M1(e)}function M1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D1(e){return(D1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const R1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C1(e,t)}(o,e);var t,n,r,i=A1(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(M1(n=i.call(this,e,t)),"toggleSelection",(function(){var e=n.props,t=e.selectionCallback,r=e.index,i=!n.state.isSelected;t&&t(r),n.setState({isSelected:i})})),n.state={isSelected:!1},n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props.selected;this.setState({isSelected:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.selected,n=e.selected;t!==n&&this.setState({isSelected:n})}},{key:"renderParameters",value:function(){var e=this.props,t=e.index,n=e.data.parameters;return Object.keys(n).map((function(e){var r=n[e],i="".concat(t,"_").concat(e,"_").concat(r);return zt.createElement("td",{key:i},r)}))}},{key:"renderSolutions",value:function(){var e=this.props,t=e.index,n=e.data,r=e.selectedValidation,i=n.solutions;return r.filter((function(e){return e!==CL})).map((function(e){var n=i[e],r="".concat(t,"_").concat(e,"_").concat(n);return zt.createElement("td",{key:r},b1(n))}))}},{key:"render",value:function(){var e=this.props,t=e.index,n=e.data.solutions,r=this.state.isSelected,i=this.renderParameters(),o=this.renderSolutions(),a=zt.createElement("td",{key:CL},b1(n[CL])),s=r?"lrn-author-mathgen-selected-row":"";return zt.createElement("tr",{key:t,className:s},zt.createElement("td",null,zt.createElement(Bl,{checked:r,className:"lrn-author-mathgen-checkbox",onChange:this.toggleSelection})),i,a,o)}}])&&O1(t.prototype,n),r&&O1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);var L1=function(e,t){var n=e.parameters,r=e.selectedValidation,i=t.i18n,o=n.map((function(e){return zt.createElement("th",{key:e},e)})),a=r.filter((function(e){return e!==CL})).map((function(e){return zt.createElement("th",{key:e},i.getMathGenValidationType(e))}));return zt.createElement("thead",null,zt.createElement("tr",{className:e.customClass},zt.createElement("th",null),o,zt.createElement("th",{key:CL},i.getMathGenValidationType(CL)),a))};L1.contextTypes={i18n:jn().object};const N1=L1;function I1(e){return(I1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B1(e,t){return(B1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F1(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V1(e);if(t){var i=V1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y1(this,n)}}function Y1(e,t){if(t&&("object"===I1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H1(e)}function H1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V1(e){return(V1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B1(e,t)}(o,e);var t,n,r,i=F1(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),q1(H1(t=i.call(this,e)),"onBlur",(function(){t.setState((function(){return{showConfirmation:!1}}))})),q1(H1(t),"onClick",(function(){var e=t.state.showConfirmation,n=t.props.onConfirm;e&&n(),t.toggleShowConfirmation()})),q1(H1(t),"toggleShowConfirmation",(function(){t.setState((function(e){return{showConfirmation:!e.showConfirmation}}))})),t.state={showConfirmation:!1},t}return t=o,(n=[{key:"className",get:function(){var e="lrn-btn lrn-author-mathgen-remove-btn";return this.state.showConfirmation?"".concat(e," lrn-author-mathgen-btn-danger"):e}},{key:"text",get:function(){var e=this.state.showConfirmation,t=this.context.i18n;return e?t.get("mathGenRemoveButtonConfirmation"):t.get("mathGenRemoveButton")}},{key:"render",value:function(){return zt.createElement("button",{type:"button",className:this.className,onBlur:this.onBlur,onClick:this.onClick},zt.createElement("span",{className:"lrn-i-trash lrn-author-mathgen-remove-button"}),this.text)}},{key:"componentDidUpdate",value:function(){this.state.showConfirmation&&this.context.updateA11yMessage(this.text)}}])&&j1(t.prototype,n),r&&j1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);U1.contextTypes={i18n:jn().object,updateA11yMessage:jn().func};const W1=U1;function z1(e){return(z1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $1(e,t){return($1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K1(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J1(e);if(t){var i=J1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Z1(this,n)}}function Z1(e,t){if(t&&("object"===z1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J1(e){return(J1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Q1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$1(e,t)}(o,e);var t,n,r,i=K1(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,e,t)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.message,n=e.type,r="lrn-author-mathgen";return e.isVisible?zt.createElement("div",{className:"alert alert-".concat(n," ").concat(r,"-alert-box ").concat(r,"-fade-in")},t):null}}])&&G1(t.prototype,n),r&&G1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function X1(e){return(X1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e2(e){return function(e){if(Array.isArray(e))return t2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return t2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t2(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r2(e,t){return(r2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i2(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s2(e);if(t){var i=s2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o2(this,n)}}function o2(e,t){if(t&&("object"===X1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a2(e)}function a2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s2(e){return(s2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u2=10,c2="lrn-author-mathgen",d2={table:"".concat(c2,"-table"),tableHeader:"".concat(c2,"-table-header")},f2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}(o,e);var t,n,r,i=i2(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),l2(a2(n=i.call(this,e,t)),"getLearnosityAppInstance",(function(){return window.LearnosityApp})),l2(a2(n),"goToNextPage",(function(){var e=n.state.currentPage+1;n.setState({currentPage:e})})),l2(a2(n),"goToPrevPage",(function(){var e=n.state.currentPage-1;n.setState({currentPage:e})})),l2(a2(n),"renderParametersTableHeader",(function(){var e=n.props,t=e.tableData,r=e.selectedValidation;if(a().isEmpty(t))return null;var i=t[0].parameters,o=Object.keys(i);return zt.createElement(N1,{parameters:o,selectedValidation:r})})),l2(a2(n),"renderTableContent",(function(){var e=a2(n).contentRows,t=n.props.selectedValidation,r=n.state,i=r.currentPage,o=r.selectedRows,s=(i-1)*u2;return e.map((function(e,r){var i=r+s,l=a().contains(o,i);return zt.createElement(R1,{key:i,index:i,data:e,selectedValidation:t,selected:l,selectionCallback:n.addSelectedRow})}))})),l2(a2(n),"addSelectedRow",(function(e){var t=n.state.selectedRows,r=a().contains(t,e)?t.filter((function(t){return t!==e})):[].concat(e2(t),[e]);n.setState({selectedRows:r})})),l2(a2(n),"removeRows",(function(){var e=n.context.updateA11yMessage,t=n.props.onRemoveRows,r=n.state.selectedRows,i=r.length;n.setState({selectedRows:[],showConfirmationBox:!0,rowsRemoved:i}),e(n.getRemovedRowsMessage(i)),n.hideConfirmationBox(),t(r)})),l2(a2(n),"getRemovedRowsMessage",(function(e){return n.context.i18n.getLabelWithValueParameter({labelKey:"mathGenGenerateRowsRemoved",value:e})})),l2(a2(n),"hideConfirmationBox",(function(){n.setState({showConfirmationBox:!1,rowsRemoved:0})})),n.state={currentPage:1,selectedRows:[],showConfirmationBox:!1,rowsRemoved:0},n.hideConfirmationBox=a().debounce(n.hideConfirmationBox,5e3),n}return t=o,(n=[{key:"nextButtonDisabled",get:function(){var e=this.props.tableData,t=this.state.currentPage;return a().isUndefined(e[t*u2])}},{key:"prevButtonDisabled",get:function(){return 1===this.state.currentPage}},{key:"contentRows",get:function(){var e=this.props.tableData,t=this.state.currentPage,n=t-1,r=1===t?n:n*u2,i=r+u2;return e.slice(r,i)}},{key:"segment",get:function(){var e=this.props.tableData,t=this.state.currentPage;return{from:1===t?1:(t-1)*u2+1,to:e.length>t*u2?t*u2:e.length}}},{key:"render",value:function(){var e=this.segment,t=this.nextButtonDisabled,n=this.prevButtonDisabled,r=this.state,i=this.props.tableData,o=r.rowsRemoved,a=r.showConfirmationBox;return zt.createElement("div",null,zt.createElement("div",{className:d2.tableHeader},zt.createElement(W1,{onConfirm:this.removeRows}),zt.createElement(Q1,{message:this.getRemovedRowsMessage(o),isVisible:a,type:"success"})),zt.createElement("table",{className:d2.table},this.renderParametersTableHeader(),zt.createElement("tbody",null,this.renderTableContent())),zt.createElement(k1,{isNextButtonDisabled:t,isPrevButtonDisabled:n,itemsSegment:e,totalItems:i.length,goToNextPage:this.goToNextPage,goToPrevPage:this.goToPrevPage}))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.tableData.length!==e.tableData.length,r=this.state.currentPage!==t.currentPage;if(n&&this.setState({currentPage:this.getNextPageAfterRowRemoval()}),r){var i=this.getLearnosityAppInstance();a().isObject(i)&&a().isFunction(i.renderMath)&&i.renderMath()}}},{key:"getNextPageAfterRowRemoval",value:function(){var e=this.props.tableData,t=this.state.currentPage,n=e.length,r=Math.ceil(n/u2);return n<=u2?1:t<r?t:r}}])&&n2(t.prototype,n),r&&n2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);f2.contextTypes={i18n:jn().object,updateA11yMessage:jn().func};const p2=f2;const h2=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a().isEmpty(e))return"";var n=t?"{$1}":"$1";return e.replace(TL.VAR_PATTERN,n)};function m2(e){return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v2(e,t){return(v2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b2(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E2(e);if(t){var i=E2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _2(this,n)}}function _2(e,t){if(t&&("object"===m2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w2(e)}function w2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E2(e){return(E2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}(o,e);var t,n,r,i=b2(o);function o(){var e;g2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S2(w2(e=i.call.apply(i,[this].concat(n))),"renderEmptyQuestions",(function(){var t=e.context.i18n;return zt.createElement("div",{className:"lrn-author-mathgen-table-empty-container"},zt.createElement("h2",null,t.get("mathGenGeneratePlaceHolder")),zt.createElement("div",{className:"lrn-author-mathgen-table-empty-container-generate"}))})),S2(w2(e),"renderErrorMessage",(function(){var t=e.context.i18n;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-mathgen-error-message-container"},zt.createElement("p",null,e.props.errorMessage)),zt.createElement("button",{type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-icon-left",onClick:e.props.onSaveAndQuit},zt.createElement("span",{className:"lrn-i-save"}),t.get("mathGenSaveAndQuit")))})),e}return t=o,(n=[{key:"getButtonLabel",value:function(){var e=this.context.i18n,t=this.props.isLoadingData;return a().isEmpty(this.props.tableData)&&!t?e.get("mathGenGenerateButton"):e.get("mathGenGenerateRegenerateButton")}},{key:"render",value:function(){var e=this.props,t=e.expression,n=e.generateMathGen,r=e.tableData,i=e.selectedValidation,o=e.onRemoveGeneratedMathRows,s=e.isLoadingData,l=e.errorMessage,u=this.context.i18n,c=this.renderErrorMessage,d=this.renderEmptyQuestions,f=u.get("mathGenGenerateInstructions"),p=g1(f,{"%possibilityCount%":xL.MAX_COUNT});return zt.createElement("div",null,zt.createElement("h2",null,u.get("mathGenGenerateHeading")),zt.createElement("div",null,p),zt.createElement("button",{type:"button",disabled:s,className:"lrn-btn lrn-btn-primary lrn-btn-lg lrn-btn-icon-left",onClick:n},zt.createElement("span",{className:"lrn-i-reload"}),this.getButtonLabel()),zt.createElement("hr",null),zt.createElement("p",{style:{display:"none"}},u.get("mathGenGenerateOriginalExpression")),zt.createElement("p",{style:{display:"none"},className:"lrn-author-mathgen-intro-expression"},b1(h2(t))),zt.createElement("p",null,u.get("mathGenGenerateRefineInstructions")),r&&!a().isEmpty(r)?zt.createElement(p2,{tableData:r,selectedValidation:i,onRemoveRows:o}):zt.createElement("div",{className:"lrn-author-mathgen-table-empty"},zt.createElement(va,{isLoading:s},l?c():d())))}}])&&y2(t.prototype,n),r&&y2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);x2.contextTypes={i18n:jn().object};const k2=x2;function T2(e){return(T2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A2(e,t){return(A2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P2(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R2(e);if(t){var i=R2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M2(this,n)}}function M2(e,t){if(t&&("object"===T2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D2(e)}function D2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R2(e){return(R2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t)}(o,e);var t,n,r,i=P2(o);function o(){var e;O2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L2(D2(e=i.call.apply(i,[this].concat(n))),"toggleSelection",(function(){var t=e.props,n=!t.isSelected;(0,t.onToggle)(e.props.name,n)})),L2(D2(e),"getValidationMethodName",(function(t){return e.context.i18n.getMathGenValidationType(t)})),e}return t=o,(n=[{key:"render",value:function(){var e=this.props.isSelected,t=void 0!==e&&e;return zt.createElement("div",{className:"lrn-author-mathgen-validation-item"},zt.createElement("div",{className:"lrn-author-mathgen-validation-item-selection"},zt.createElement(Bl,{checked:t,description:this.getValidationMethodName(this.props.name),className:"lrn-author-mathgen-validation-item-checkbox",onChange:this.toggleSelection})),zt.createElement("div",{className:"lrn-author-mathgen-validation-item-math"},this.props.value))}}])&&C2(t.prototype,n),r&&C2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);N2.contextTypes={i18n:jn().object};const I2=N2;function j2(e){var t=e.text;return zt.createElement("span",{"aria-label":t,className:"lrn-i-tooltip",tabIndex:0,"data-authorapi-tooltip":t})}const B2=function(e){var t=[];return e.availableFormats.forEach((function(e){e.isSelected&&t.push(e.name)})),t};function F2(e){return(F2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H2(e,t){return(H2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V2(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W2(e);if(t){var i=W2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return q2(this,n)}}function q2(e,t){if(t&&("object"===F2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U2(e)}function U2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W2(e){return(W2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H2(e,t)}(o,e);var t,n,r,i=V2(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),z2(U2(n=i.call(this,e,t)),"renderValidationItems",(function(){var e=n.props,t=e.validationData,r=e.onToggleSelection,i=t.availableFormats;return a().isEmpty(i)?null:i.map((function(e,t){return zt.createElement(I2,{key:t,isSelected:e.isSelected,name:e.name,value:e.val,onToggle:r})}))})),z2(U2(n),"renderErrorMessage",(function(){var e=n.props,t=e.errorMessage,r=e.onRetry,i=e.onSaveAndQuit,o=n.context.i18n;return zt.createElement("div",null,zt.createElement("div",{className:"lrn-author-mathgen-error-message-container"},zt.createElement("p",null,t)),zt.createElement("div",{className:"lrn-author-mathgen-validation-retry"},zt.createElement("button",{type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-icon-left",onClick:r},zt.createElement("span",{className:"lrn-i-reload"}),o.get("mathGenValidationRetry")),zt.createElement("button",{type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-icon-left",onClick:i},zt.createElement("span",{className:"lrn-i-save"}),o.get("mathGenSaveAndQuit"))))})),z2(U2(n),"getLearnosityAppInstance",(function(){return window.LearnosityApp})),z2(U2(n),"shouldShowValidationOption",(function(e){var t=n.props.validationData;if(!a().isObject(t)||!a().isObject(t.availableFormats))return!1;var r=t.formatsData,i=B2(t),o=!1;return a().chain(i).reject((function(e){return a().isEmpty(r[e])})).each((function(t){a().each(r[t].value,(function(t){a().keys(t.options).indexOf(e)>=0&&(o=!0)}))})),o})),n.inputId=a().uniqueId("lrn_mathgen_validation_input_"),n}return t=o,(n=[{key:"componentDidUpdate",value:function(){var e=this.getLearnosityAppInstance();a().isObject(e)&&a().isFunction(e.renderMath)&&e.renderMath()}},{key:"render",value:function(){var e=this.context,t=this.props,n=this.renderValidationItems,r=this.renderErrorMessage,i=this.shouldShowValidationOption,o=t.formValidation,a=t.onOptionChange,s=t.errorMessage,l=t.validationData,u=t.isLoadingData,c=e.i18n,d=l.options,f=[{key:".",value:c.get("mathGenValidationDot")},{key:",",value:c.get("mathGenValidationComma")}],p=[].concat(f,[{key:" ",value:c.get("mathGenValidationSpace")},{key:" .",value:c.get("mathGenValidationSpaceDot")},{key:" ,",value:c.get("mathGenValidationSpaceComma")}]),h=Array.from(Array(PL.MAX_DECIMAL_PLACES+1).keys()).map((function(e){return{key:e,value:e}})),m=u?"lrn-author-mathgen-validation-loading":"";return zt.createElement("div",null,zt.createElement("h2",null,c.get("mathGenValidationHeading")),zt.createElement("p",null,c.get("mathGenValidationInstructions")),zt.createElement("div",{className:"lrn-author-mathgen-validation"},zt.createElement(va,{isLoading:u,extraClasses:m},s?r():n())),zt.createElement("h2",null,c.get("mathGenValidationOptionsHeading")),zt.createElement("p",null,c.get("mathGenValidationOptionsInstructions")),zt.createElement("div",{className:"lrn-author-mathgen-more-options"},zt.createElement("table",{className:"lrn-author-mathgen-more-options-table"},zt.createElement("thead",null,zt.createElement("tr",null,zt.createElement("td",null,zt.createElement("label",{htmlFor:"".concat(this.inputId,"_score")},c.get("mathGenValidationScore"))),i("setDecimalSeparator")&&zt.createElement("td",null,zt.createElement("label",{htmlFor:"".concat(this.inputId,"_decimal_separator")},c.get("mathGenValidationDecimalSeparator"))),i("setThousandsSeparator")&&zt.createElement("td",null,zt.createElement("label",{htmlFor:"".concat(this.inputId,"_thousands_separator")},c.get("mathGenValidationThousandsSeparator")),zt.createElement(j2,{text:this.context.i18n.get("mathGenThousandsTooltip")})),i("decimalPlaces")&&zt.createElement("td",null,zt.createElement("label",{htmlFor:"".concat(this.inputId,"_decimal_places")},c.get("mathGenValidationDecimalPlaces")),zt.createElement(j2,{text:this.context.i18n.get("mathGenDecimalTooltip")})))),zt.createElement("tbody",null,zt.createElement("tr",null,zt.createElement("td",{className:"lrn-author-mathgen-more-options-table-item"},zt.createElement($2,{id:"".concat(this.inputId,"_score"),onChange:a,value:d.score,name:"score",formValidation:o.options.score})),i("setDecimalSeparator")&&zt.createElement("td",{className:"lrn-author-mathgen-more-options-table-item"},zt.createElement(K2,{id:"".concat(this.inputId,"_decimal_separator"),onChange:a,value:d.setDecimalSeparator,name:"setDecimalSeparator",options:f})),i("setThousandsSeparator")&&zt.createElement("td",{className:"lrn-author-mathgen-more-options-table-item"},zt.createElement(K2,{id:"".concat(this.inputId,"_thousands_separator"),onChange:a,value:d.setThousandsSeparator,name:"setThousandsSeparator",options:p})),i("decimalPlaces")&&zt.createElement("td",{className:"lrn-author-mathgen-more-options-table-item"},zt.createElement(K2,{id:"".concat(this.inputId,"_decimal_places"),onChange:a,value:d.decimalPlaces,name:"decimalPlaces",options:h})))))))}}])&&Y2(t.prototype,n),r&&Y2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function $2(e){var t=e.id,n=e.value,r=e.onChange,i=e.name,o=e.formValidation.isValid,s=a().classNames({"lrn-form-control lrn-author-mathgen-input":!0,"lrn-invalid":!o});return zt.createElement("input",{id:t,className:s,onBlur:function(e){return r(e.target.value||1,i)},type:"number",value:n||"",onChange:function(e){return r(function(e){var t=e.target.value;return t<0?null:t}(e),i)}})}function K2(e){var t=e.id,n=e.value,r=e.onChange,i=e.name,o=e.options;return zt.createElement("div",{className:"lrn-author-mathgen-select"},zt.createElement("select",{id:t,className:"lrn-form-control",value:n||"",onChange:function(e){return r(e.target.value,i)}},o.map((function(e){return zt.createElement("option",{key:e.key,value:e.key},e.value)}))))}G2.contextTypes={i18n:jn().object};const Z2=G2;function J2(e){return(J2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q2(){return(Q2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e8(e,t){return(e8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t8(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i8(e);if(t){var i=i8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return n8(this,n)}}function n8(e,t){if(t&&("object"===J2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r8(e)}function r8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i8(e){return(i8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const o8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e8(e,t)}(o,e);var t,n,r,i=t8(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=e.debounce,r=void 0===n?0:n,s=e.value,l=e.onChange;return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r8(t=i.call(this,e)),"onChange",(function(e){var n=e.currentTarget.value;t.setState({value:n}),t.update()})),t.state={value:s},t.update=a().debounce((function(){return l(t.state.value)}),r),t}return t=o,(n=[{key:"cleanProps",get:function(){var e=a().clone(this.props);return delete e.type,delete e.onChange,delete e.value,e}},{key:"render",value:function(){return zt.createElement("input",Q2({type:"text",value:this.state.value,onChange:this.onChange},this.cleanProps))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:t})}}])&&X2(t.prototype,n),r&&X2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const a8=function(e){var t=e.ariaLabel,n=e.value,r=e.onChange,i=e.rowIndex,o=e.formValidation.isValid,s=a().classNames({"lrn-author-mathgen-variables-name-input lrn-form-control":!0,"lrn-invalid":!o});return zt.createElement(o8,{className:s,"aria-label":t,type:"text",value:n||"",debounce:AL.INPUT_CHANGE_DEBOUNCE,onChange:function(e){return r(e,"name",i)}})};function s8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l8(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u8(e){var t=d8(e);return Number(c8(t))}function c8(e){return"".concat(e).replace(/[\,\s]/g,"")}function d8(e){return"".concat(e).replace(/[^\d.\-,\s]/g,"")}function f8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p8=function(e){var t,n=a().extend({ariaLabel:null,decimalPlaces:0,formValidation:{isValid:!0},value:null,property:null},e),r=e.ariaLabel,i=e.value,o=e.property,s=e.formValidation.isValid,l=a().classNames((f8(t={},"lrn-author-mathgen-parameters-".concat(o,"-input lrn-form-control"),!0),f8(t,"lrn-invalid",!s),t)),u=function(e){return function(t){var n=e.decimalPlaces,r=e.onChange,i=e.property,o=e.rowIndex;r(function(e,t){var n=e.target.value,r=void 0===n?"":n,i=d8(r);if(a().isEmpty(i)||(o=r,a().isNaN(u8(o))))return i;var o;return function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=d8(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");if(0===e)return"".concat(Math.floor(Number(t)));if(t.indexOf(".")>=0){var n=s8(t.split("."),2),r=n[0],i=c8(n[1]).substr(0,e);return"".concat(r,".").concat(i)}return t}(r,t)}(t,n),i,o)}}(n),c=function(e){return function(t){e.decimalPlaces<1&&function(e){Ya(e)&&e.preventDefault()}(t),function(e){(function(e){var t=e.currentTarget.value;return"".concat(t).indexOf(".")>=0})(e)&&Ya(e)&&e.preventDefault()}(t)}}(n);return zt.createElement("input",{className:l,"aria-label":r,type:"text",inputMode:"decimal",value:i,onBlur:u,onChange:u,onKeyDown:c})};const h8=function(e){var t=e.ariaLabel,n=e.value,r=e.onChange,i=e.rowIndex,o=e.formValidation.isValid,s=a().classNames({"lrn-author-mathgen-variables-list-input lrn-form-control":!0,"lrn-invalid":!o});return zt.createElement(o8,{className:s,"aria-label":t,type:"text",value:n||"",debounce:AL.INPUT_CHANGE_DEBOUNCE,onChange:function(e){return r(e,"list",i)}})};var m8=[{value:"list",label:"List"},{value:"range",label:"Range"}];const g8=function(e){var t=e.ariaLabel,n=e.value,r=e.onChange,i=e.rowIndex;return zt.createElement("div",{className:"lrn-author-mathgen-select"},zt.createElement("select",{className:"lrn-form-control","aria-label":t,value:n||"",onChange:function(e){return r(e.target.value,"type",i)}},m8.map((function(e){return zt.createElement("option",{key:e.value,value:e.value},e.label)}))))};function y8(e,t){var n=e.formValidation,r=e.name,i=e.type,o=e.min,a=e.max,s=e.step,l=e.list,u=e.onChange,c=e.onRemove,d=e.rowIndex,f=t.i18n;return zt.createElement(zt.Fragment,null,zt.createElement("tr",{className:"lrn-author-mathgen-parameter-table-header"},zt.createElement("td",null,f.get("mathGenParameterName")),zt.createElement("td",null,f.get("mathGenParameterType")),"list"===i&&zt.createElement("td",{colSpan:"3"},f.get("mathGenParameterList")),"range"===i&&zt.createElement(zt.Fragment,null,zt.createElement("td",null,f.get("mathGenParameterMinimum")),zt.createElement("td",null,f.get("mathGenParameterMaximum")),zt.createElement("td",null,f.get("mathGenParameterStep"))),zt.createElement("td",{className:"sr-only"},f.get("mathGenParameterRemove"))),zt.createElement("tr",{className:"lrn-author-mathgen-parameter-table-content"},zt.createElement("td",null,zt.createElement(a8,{ariaLabel:f.get("mathGenParameterNameEdit"),rowIndex:d,value:r,onChange:u,formValidation:n.name})),zt.createElement("td",null,zt.createElement(g8,{ariaLabel:f.get("mathGenParameterType"),rowIndex:d,value:i,onChange:function(e,t,n){u(e,t,n)}})),"list"===i&&zt.createElement("td",{colSpan:"3"},zt.createElement(h8,{ariaLabel:f.get("mathGenParameterNameEdit"),rowIndex:d,value:l,onChange:u,formValidation:n.list})),"range"===i&&zt.createElement(zt.Fragment,null,zt.createElement("td",null,zt.createElement(p8,{ariaLabel:f.get("mathGenParameterMinimumEdit"),rowIndex:d,property:"min",value:o,decimalPlaces:3,onChange:u,formValidation:n.min})),zt.createElement("td",null,zt.createElement(p8,{ariaLabel:f.get("mathGenParameterMaximumEdit"),rowIndex:d,property:"max",value:a,decimalPlaces:3,onChange:u,formValidation:n.max})),zt.createElement("td",null,zt.createElement(p8,{ariaLabel:f.get("mathGenParameterStepEdit"),rowIndex:d,property:"step",value:s,decimalPlaces:3,onChange:u,formValidation:n.step}))),zt.createElement("td",null,d>0&&zt.createElement(W1,{onConfirm:function(){return c(d)}}))))}y8.contextTypes={i18n:jn().object};const v8=y8;function b8(){return(b8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _8(e){var t=e.parameters;if(!t||!t.length)return null;var n=function(e){var t=e.parameters,n=e.onChange,r=e.onRemove,i=e.formValidation;return t.map((function(e,t){return zt.createElement(v8,b8({key:t,rowIndex:t,onChange:n,onRemove:r,formValidation:i.collection[t]},e))}))}(e);return zt.createElement("table",{className:"lrn-author-mathgen-parameter-table"},zt.createElement("colgroup",null,zt.createElement("col",{className:"lrn-author-mathgen-parameter-name-column"}),zt.createElement("col",{className:"lrn-author-mathgen-parameter-range-column",span:"4"}),zt.createElement("col",null)),zt.createElement("tbody",null,n))}_8.contextTypes={i18n:jn().object};const w8=_8;function E8(e,t){var n=e.onCreate,r=e.onChange,i=e.onRemove,o=e.parameters,s=e.formValidation,l=t.i18n,u=a().classNames("lrn-author-mathgen-parameter-add-btn","lrn-btn","lrn-btn-primary","lrn-btn-icon-left");return zt.createElement("div",null,zt.createElement("h2",null,l.get("mathGenParametersHeading")),zt.createElement("p",null,l.get("mathGenParametersInstructions")),zt.createElement("ul",{className:"lrn-author-mathgen-parameter-instructions"},zt.createElement("li",null,l.get("mathGenParametersInstructionsList")),zt.createElement("li",null,l.get("mathGenParametersInstructionsRange"))),zt.createElement(w8,{parameters:o,onChange:r,onRemove:i,formValidation:s}),o.length<TL.MAX_COUNT&&zt.createElement("button",{type:"button",onClick:n,className:u},zt.createElement("span",{className:"lrn-i-plus"}),l.get("mathGenParametersAdd")))}E8.contextTypes={i18n:jn().object};const S8=E8;function x8(){var e=a().getNested(LearnosityQuestionEditor,"_internal.config.apiAssetsHost"),t={backgroundImage:'url("'.concat(e,'/vendor/ckeditor/expression.png?")')},n=a().classNames("cke_button_icon cke_button__insertfunction_icon","lrn-author-mathgen-icon-expression","lrn-author-mathgen-icon-parameter");return zt.createElement("span",{style:t,className:n})}function k8(e,t){var n=t.i18n.get("mathGenExpressionInstructions"),r=g1(n,{"%parameterIcon%":T8});return zt.createElement("div",null,r)}function T8(){var e=a().classNames("lrn-i-dynamic-data","lrn-author-mathgen-icon-parameter");return zt.createElement("span",{className:e})}function O8(e,t){var n=t.i18n;return zt.createElement("div",{className:"lrn-hide","data-lrn-qe-layout":"mathgen"},zt.createElement("div",{className:"lrn-qe-edit-form"},zt.createElement("h2",null,n.get("mathGenExpressionHeading")),zt.createElement(k8,null),zt.createElement("span",{"data-lrn-qe-input":"expression"}),zt.createElement("h2",null,n.get("mathGenQuestionHeading")),zt.createElement(C8,null),zt.createElement("span",{"data-lrn-qe-input":"template"})))}function C8(e,t){var n=t.i18n.get("mathGenQuestionInstructions"),r=g1(n,{"%expressionIcon%":x8,"%parameterIcon%":T8});return zt.createElement("div",null,r)}O8.contextTypes={i18n:jn().object},C8.contextTypes={i18n:jn().object},k8.contextTypes={i18n:jn().object};const A8=O8;function P8(e){return(P8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R8(e,t){return(R8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L8(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I8(e);if(t){var i=I8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N8(this,n)}}function N8(e,t){if(t&&("object"===P8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I8(e){return(I8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R8(e,t)}(o,e);var t,n,r,i=L8(o);function o(){return M8(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.text;return a().isEmpty(e)?null:zt.createElement("div",{className:"lrn-author-mathgen-error-message-container"},zt.createElement("p",null,e))}},{key:"componentDidUpdate",value:function(e){var t=this.props.text;a().isEmpty(t)||t===e.text||this.context.updateA11yMessage(t)}}])&&D8(t.prototype,n),r&&D8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);j8.contextTypes={updateA11yMessage:jn().func};const B8=j8;function F8(e){return(F8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V8(e,t){return(V8=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q8(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W8(e);if(t){var i=W8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U8(this,n)}}function U8(e,t){if(t&&("object"===F8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W8(e){return(W8=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z8(e){e.keyCode===Fa&&e.preventDefault()}var G8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V8(e,t)}(o,e);var t,n,r,i=q8(o);function o(){return Y8(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"isActive",get:function(){var e=this.props;return e.activePage===e.pageName}},{key:"render",value:function(){var e=this,t=this.isActive,n=this.props,r=n.pageName,i=n.onClick,o=function(e){Ha(e)||i(r)},a=t?"lrn-active":null;return zt.createElement("a",{className:a,onClick:o,onKeyUp:o,onKeyDown:z8,tabIndex:"0",ref:function(t){return e.el=t}},n.children,zt.createElement("span",{className:"lrn-author-mathgen-chevron"}))}},{key:"componentDidUpdate",value:function(e){var t=this.isActive,n=this.props.pageName;e.activePage!==n&&t&&this.el.focus()}}])&&H8(t.prototype,n),r&&H8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const $8=function(e){var t=e.activePage,n=e.onChangePage,r=e.navigationStructure,i=e.disabledNavigation,o=r.map((function(e,r){var o=e.name,s=e.text,l=t===o,u=a().contains(i,o),c=a().classNames({"lrn-active":l,"lrn-disabled":u});return zt.createElement("li",{key:r,className:c,onClick:function(){return!u&&n(o)}},zt.createElement(G8,{activePage:t,pageName:o,onClick:function(e){return!u&&n(e)}},s))}));return zt.createElement("nav",{className:"lrn-author-mathgen-breadcrumbs"},zt.createElement("ol",null,o))};function K8(e){var t=e.pageName===e.activePage?null:"lrn_hide";return zt.createElement("section",{className:t},e.children)}function Z8(e){return zt.createElement("article",{className:"lrn-author-mathgen-pages"},e.children)}function J8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q8(){return(Q8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X8(e){var t=e.text;return zt.createElement("button",Q8({type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-lg"},e),t)}function e3(e){var t=e.previousPage,n=e.onClick,r=e.text,i=t.name,o="".concat(r," — ").concat(t.text);return zt.createElement("button",{type:"button",className:"lrn-btn-default lrn-btn-icon-left lrn-btn-lg",onClick:function(){return n(i)},"aria-label":o},zt.createElement("span",{className:"lrn-i-previous"}),r)}function t3(e){var t=e.nextPage,n=e.onClick,r=e.isDisabled,i=e.text,o=t.name,a="".concat(i," — ").concat(t.text);return zt.createElement("button",{type:"button",className:"lrn-btn lrn-btn-primary lrn-btn-icon-right lrn-btn-lg",onClick:function(){return n(o)},"aria-label":a,disabled:r},i,zt.createElement("span",{className:"lrn-i-next"}))}function n3(e,t){var n=e.activePage,r=e.onChangePage,i=e.onApply,o=e.navigationStructure,s=e.shouldDisableApplyButton,l=e.disabledNavigation,u=t.i18n,c=function(e,t,n){return e.map(function(e,t,n){return function(r,i){var o,s=r.name,l=0===i,u=i===e.length-1,c=e[i+1],d=c?c.name:null;return J8(o={nextPage:c,isActive:s===t},"nextPage",e[i+1]),J8(o,"previousPage",e[i-1]),J8(o,"shouldDisableNextButton",a().contains(n,d)),J8(o,"shouldRenderBackButton",!l),J8(o,"shouldRenderNextButton",!u),J8(o,"shouldRenderApplyButton",u),o}}(e,t,n)).filter((function(e){return e.isActive})).pop()}(o,n,l),d=c.nextPage,f=c.previousPage,p=c.shouldDisableNextButton,h=c.shouldRenderBackButton,m=c.shouldRenderNextButton,g=c.shouldRenderApplyButton;return zt.createElement("nav",{className:"lrn-author-mathgen-nav-buttons"},zt.createElement("ul",null,h&&zt.createElement("li",null,zt.createElement(e3,{previousPage:f,onClick:function(e){return r(e)},text:u.get("mathGenNavDirectionPrevious")})),m&&zt.createElement("li",null,zt.createElement(t3,{nextPage:d,onClick:function(e){return r(e)},isDisabled:p,text:u.get("mathGenNavDirectionNext")})),g&&zt.createElement("li",null,zt.createElement(X8,{disabled:s,onClick:i,text:u.get("mathGenApply")}))))}n3.contextTypes={i18n:jn().object};const r3=n3;function i3(e){var t=e.children,n=e.activePage,r=e.onApply,i=e.onChangePage,o=e.navigationStructure,a=e.disabledNavigation,s=e.shouldDisableApplyButton;return zt.createElement("div",null,zt.createElement($8,{activePage:n,onChangePage:i,navigationStructure:o,disabledNavigation:a}),zt.createElement(Z8,null,t),zt.createElement(r3,{activePage:n,onApply:r,onChangePage:i,navigationStructure:o,disabledNavigation:a,shouldDisableApplyButton:s}))}var o3=function(e){return"range"===e.type?a3(u8(e.min),u8(e.max),u8(e.step)):s3(e.list)},a3=function(e,t,n){return"".concat(u8(e),"..").concat(u8(t),":").concat(u8(n))},s3=function(e){return"".concat(e)};const l3=function(e,t,n){var r={params:[[],[]],response:[],context:"",template:"{response==seed}",seed:"",limit:0,randomize:!0};r.seed=h2(e.expression,!0),r.context=h2(e.template,!0),function(e){return e.map((function(e){return{name:e.name,value:o3(e)}}))}(t).forEach((function(e){r.params[0].push(e.name),r.params[1].push(e.value)}));var i=n.availableFormats;return a().isArray(i)&&i.length>0&&(r.response=B2(n)),a().isEmpty(i)||(r.limit=xL.MAX_COUNT),r};const u3=function(e,t){return e.map((function(e,n){return{parameters:t[n],solutions:e}}))};var c3=function(e){return" ."===e||" ,"===e?e.split(""):[e]},d3=function(e,t){return a().each(t,(function(t,n){a().isUndefined(e.options&&e.options[n])||(e.options[n]=function(e,t){switch(e){case"decimalPlaces":return parseInt(t);case"setDecimalSeparator":case"setThousandsSeparator":return c3(t);case"normalizeArithmetic":return!0===t;default:return t}}(n,t),"normalizeArithmetic"===n&&(e.options.ignoreOrder=!0))})),e};const f3=function(e){var t=e.formatsData,n=e.options,r=B2(e),i=a().chain(r).reject((function(e){return a().isEmpty(t[e])})).map((function(e){var r=a().chain(t[e].value).map((function(e){return d3(e,n)})).value();return{score:parseFloat(n.score),value:[r]}})).value();return{scoring_type:"exactMatch",valid_response:i[0]||{},alt_responses:i.length>1?i.slice(1):[]}};var p3=function(e){return e.split(",").length},h3=function(e,t,n){var r=Math.ceil((t-e+1)/n);return r>0?r:0};const m3=function(e){return e.reduce((function(e,t){var n=0;if("list"===t.type){var r=t.list;n=p3(r)}else{var i=t.min,o=t.max,a=t.step;n=h3(u8(i),u8(o),u8(a))}return e>0?e*n:n}),0)};var g3=SL,y3={i18n:null};function v3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.expression,r=e.template;return{expression:C3({expression:n,parameters:t}),template:A3({template:r,expression:n})}}function b3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableFormats,n=e.options;return{availableFormats:P3(t),options:M3(n)}}function _3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{collection:w3(e),permutations:O3(e)}}function w3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(t,n){var r=t.name,i=t.min,o=t.max,s=t.step,l=t.list,u=t.type;return{name:x3({name:r,otherNames:a().chain(e).reject((function(e,t){return t===n})).pluck("name").value()}),min:E3({min:i,type:u}),max:S3({max:o,type:u}),step:k3({step:s,type:u}),list:T3({list:l,type:u})}}))}function E3(e){var t=e.min,n=e.type,r=g3.PARAMETERS.MIN,i=r.MIN_VALUE,o=r.MAX_VALUE,s=null;return"range"===n&&(a().isNaN(u8(t))?s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMinInvalidValue"}):u8(t)<i?s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMinMinValue",value:i}):u8(t)>o&&(s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMinMaxValue",value:o}))),{message:s,isValid:a().isEmpty(s)}}function S3(e){var t=e.max,n=e.type,r=g3.PARAMETERS.MAX,i=r.MIN_VALUE,o=r.MAX_VALUE,s=null;return"range"===n&&(a().isNaN(u8(t))?s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMaxInvalidValue"}):u8(t)<i?s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMaxMinValue",value:i}):u8(t)>o&&(s=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMaxMaxValue",value:o}))),{message:s,isValid:a().isEmpty(s)}}function x3(e){var t=e.name,n=void 0===t?"":t,r=e.otherNames,i=g3.PARAMETERS.NAME,o=i.MIN_LENGTH,s=i.MAX_LENGTH,l=i.PATTERN,u=null;return n.length<o?u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterNameMinLength",value:o}):n.length>s?u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterNameMaxLength",value:s}):n.match(l)?a().contains(r,n)&&(u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterNameUnique"})):u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterNamePattern"}),{message:u,isValid:a().isEmpty(u)}}function k3(e){var t=e.step,n=e.type,r=g3.PARAMETERS.STEP.MIN_VALUE,i=null;return"range"===n&&(a().isNaN(u8(t))?i=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterStepMinValue"}):u8(t)<r&&(i=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterStepMinValue",value:r}))),{message:i,isValid:a().isEmpty(i)}}function T3(e){var t=e.list,n=e.type,r=g3.PARAMETERS.LIST.PATTERN,i=RegExp(r),o=null;return"list"!==n||i.test(t)||(o=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterListFormat"})),{message:o,isValid:a().isEmpty(o)}}function O3(e){var t=m3(e),n=g3.PARAMETERS.PERMUTATIONS,r=n.MIN_VALUE,i=n.MAX_VALUE,o=null;return t<r?o=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMinPermutations",value:r}):t>i&&(o=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationParameterMaxPermutations",value:i})),{message:o,isValid:a().isEmpty(o)}}function C3(e){var t=e.expression,n=e.parameters,r=g3.QUESTION_DATA.EXPRESSION.MIN_PARAMETERS,i=null;return function(e,t){return a().isEmpty(t)?0:a().chain(e).pluck("name").map((function(e){return"{{var:".concat(e,"}}")})).map((function(e){return!!t.match(e)})).filter((function(e){return e})).value().length}(n,t)<r&&(i=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationExpressionParametersRequired",value:r})),{message:i,isValid:a().isEmpty(i)}}function A3(e){var t=e.template,n=void 0===t?"":t,r=g3.QUESTION_DATA.TEMPLATE,i=r.RESPONSE_PATTERN,o=r.MIN_RESPONSES,s=r.MAX_RESPONSES,l=(n.match(i)||[]).length,u=null;return l<o?u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationQuestionResponseRequired"}):l>s&&(u=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationQuestionResponseExceeded",value:s})),{message:u,isValid:a().isEmpty(u)}}function P3(e){var t=a().chain(e).pluck("isSelected").filter((function(e){return e})).value().length,n=g3.VALIDATION_DATA.AVAILABLE_FORMATS.MIN_SELECTIONS,r=null;return t<n&&(r=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationValidationDataFormatRequired",value:n})),{message:r,isValid:a().isEmpty(r)}}function M3(e){var t=e.score,n=e.setDecimalSeparator,r=e.setThousandsSeparator;return{score:R3(t),separators:D3(n,r)}}function D3(e,t){var n=null,r=g3.VALIDATION_DATA.OPTIONS.SEPARATOR,i=r.COMMA,o=r.DOT,s=e===o,l=a().contains(t,o),u=a().contains(t,i);return s&&l?n=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationDataSeparatorValue",value:y3.i18n.getLabelWithValueParameter({labelKey:"mathGenValidationDot"}).toLowerCase()}):!s&&u&&(n=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationDataSeparatorValue",value:y3.i18n.getLabelWithValueParameter({labelKey:"mathGenValidationComma"}).toLowerCase()})),{message:n,isValid:a().isEmpty(n)}}function R3(e){var t=g3.VALIDATION_DATA.OPTIONS.SCORE.MIN_VALUE,n=null;return e<t&&(n=y3.i18n.getLabelWithValueParameter({labelKey:"mathGenFormValidationValidationDataScoreMinValue",value:t})),{message:n,isValid:a().isEmpty(n)}}const L3=function(e,t){var n=e.parameters,r=e.questionData,i=e.validationData;return y3.i18n=t,{parameters:_3(n),questionData:v3(r,n),validationData:b3(i)}};function N3(e){return(N3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j3(e,t){return(j3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B3(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H3(e);if(t){var i=H3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F3(this,n)}}function F3(e,t){if(t&&("object"===N3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y3(e)}function Y3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H3(e){return(H3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q3="mathGenNavParameters",U3="mathGenNavQuestion",W3="mathGenNavValidation",z3="mathGenNavGenerate",G3=[q3,U3,W3,z3],$3=0,K3=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j3(e,t)}(o,e);var t,n,r,i=B3(o);function o(e,t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var s=e.validationData,l=e.generatedMath,u=e.parameters,c=e.questionData;return V3(Y3(r=i.call(this,e,t)),"mathGenQe",{}),V3(Y3(r),"getQuestionJson",(function(){return a().isEmpty(r.mathGenQe)?null:r.mathGenQe.getJson()})),V3(Y3(r),"generateMathGenValidation",(function(){r.setState((function(e){return a().extend(Q3(e),{isLoadingData:!0})}));var e=r.props.comms,t=r.context.i18n,n=r.state,i=n.parameters,o=n.validationData,s=l3(r.getQuestionJson(),i,o);e.request({url:"/mathgen",data:s}).done((function(e){if(e.data.mathgen){var n=e.data.mathgen,i=n.sample,o=n.validations;r.setState((function(e){var t=a().clone(e.validationData);return t.availableFormats=i.val,t.formatsData=o,{isLoadingData:!1,validationData:t,errors:{}}}))}else r.setState({isLoadingData:!1,errors:V3({},W3,t.get("mathGenErrorValidationEmpty"))})})).fail((function(e){r.setState({isLoadingData:!1,errors:V3({},W3,t.get("mathGenErrorValidationServerError"))}),console.error(e)}))})),V3(Y3(r),"generateMathGen",(function(){var e=r.context.i18n,t=r.state.generatedMath;if(!a().isEmpty(t)){var n=e.get("mathGenGenerateRegenerateWarning");if(!window.confirm(n))return}r.setState({generatedMath:null,isLoadingData:!0});var i=r.props.comms,o=r.state,s=o.parameters,l=o.validationData,u=l3(r.getQuestionJson(),s,l),c=i.request({url:"/mathgen",data:u}),d={isLoadingData:!1,generatedMath:null,errors:{}};c.done((function(t){t.data.mathgen?(d.generatedMath=t.data.mathgen,d.errors[z3]=null):d.errors[z3]=e.get("mathGenErrorGenerateEmpty")})).fail((function(t){d.errors[z3]=e.get("mathGenErrorGenerateServerError"),console.error(t)})).always((function(){r.setState(d)}))})),V3(Y3(r),"onApply",(function(){var e=r.props,t=e.qeManager,n=e.onApply,i=r.state,o=i.parameters,s=i.questionData,l=i.validationData,u=i.generatedMath,c=s.template,d=s.expression,f=function(e){if(a().isEmpty(e))return null;var t=e.paramTable,n=e.dataTable;return a().reduce(t,(function(e,t,r){if(0===r){var i=a().keys(t),o=a().keys(n[r]);e.cols=i.concat(o)}var s=a().values(t),l=a().values(n[r]);return e.rows[a().uuid()]={index:r,values:s.concat(l)},e}),{cols:null,rows:{}})}(u),p=f3(l);n({validationData:l,dynamicContentData:f,generatedMath:u,questionData:s,parameters:o}),t.setMathGenWidget({template:c,expression:d,validation:p})})),V3(Y3(r),"onChangePage",(function(e){r.setState({activePage:e}),e!==W3||r.hasAvailableValidationFormats||r.generateMathGenValidation(),e===U3&&r.setQeDynamicContentData()})),V3(Y3(r),"onChangeParameter",(function(e,t,n){r.setState((function(r){var i=r.parameters,o=Q3(r);return o.parameters=i.map((function(r,i){return i===n&&(r[t]=e),r})),o}))})),V3(Y3(r),"onCreateParameter",(function(){var e=r.generateNewParameter();r.props.setMathgenDirtyFlag(),r.setState((function(t){var n=t.parameters,r=Q3(t);return r.parameters=n.concat(e),r}))})),V3(Y3(r),"onRemoveParameter",(function(e){var t=r.context,n=t.i18n,i=t.updateA11yMessage;r.props.setMathgenDirtyFlag(),r.setState((function(t){var n=t.parameters,r=Q3(t);return r.parameters=n.filter((function(t,n){return n!==e})),r})),i(n.get("mathGenAriaLiveRemovedParameter"))})),V3(Y3(r),"onUpdateValidationOptions",(function(e,t){r.props.setMathgenDirtyFlag(),r.setState((function(n){var r=a().clone(n.validationData),i=r.options;return r.options=a().mapObject(i,(function(n,r){return r===t&&(n=e),n})),{validationData:r}}))})),V3(Y3(r),"onQuestionEditorChange",(function(){r.props.setMathgenDirtyFlag(),r.setQuestionDataFromQe(),r.workaroundQuestionEditorDelay()})),V3(Y3(r),"onQuestionEditorReady",(function(){var e=Y3(r).mathGenQe,t=r.state.questionData;a().isEmpty(t)&&r.setQuestionDataFromQe(),e.on("preview:changed",r.onQuestionEditorChange)})),V3(Y3(r),"onRemoveGeneratedMathRows",(function(e){r.props.setMathgenDirtyFlag(),r.setState((function(t){var n=a().cloneDeep(t.generatedMath);return["paramTable","data","dataTable"].forEach((function(t){var r=n[t];n[t]=a().reject(r,(function(t,n){return a().contains(e,n)}))})),n.count-=e.length,{generatedMath:n}}))})),V3(Y3(r),"onSaveAndQuit",(function(){(0,r.props.onSaveAndQuit)(a().pick.apply(a(),[r.state].concat(["parameters","questionData","validationData","generatedMath"])))})),V3(Y3(r),"onToggleValidationSelection",(function(e,t){r.props.setMathgenDirtyFlag(),r.setState((function(n){var r=a().clone(n.validationData),i=r.availableFormats;return r.availableFormats=i.map((function(n){var r=a().clone(n),i=r.name,o=r.isSelected,s=void 0!==o&&o;return r.isSelected=i===e?t:s,r})),{validationData:r,generatedMath:null}}))})),r.instanceNumber=$3,$3+=1,r.state={questionData:c,validationData:s,generatedMath:l,isLoadingData:!1,parameters:u||[],activePage:q3,errors:(n={},V3(n,W3,null),V3(n,z3,null),n)},r}return t=o,(n=[{key:"disabledNavigation",get:function(){return this.hasValidParameters?this.hasValidQuestionData?this.hasValidValidationData?[]:[z3]:[W3,z3]:[U3,W3,z3]}},{key:"hasAvailableValidationFormats",get:function(){var e=this.state.validationData.availableFormats;return!a().isEmpty(e)}},{key:"hasValidParameters",get:function(){var e=this.generateFormValidation().parameters,t=e.collection,n=e.permutations;return a().every(t,Z3)&&a().every(n,Z3)}},{key:"hasValidQuestionData",get:function(){var e=this.generateFormValidation().questionData,t=a().pluck(e,"isValid");return a().every(t,(function(e){return e}))}},{key:"hasValidValidationData",get:function(){var e=this.generateFormValidation().validationData;return a().every(e,J3)}},{key:"navigationStructure",get:function(){var e=this;return a().map(G3,(function(t){return{name:t,text:e.context.i18n.get(t)}}))}},{key:"questionEditorHook",get:function(){return"".concat("lrn_author_mathgen_qe_hook","_").concat(this.instanceNumber)}},{key:"validationMessage",get:function(){var e,t,n=this.state.activePage,r=this.generateFormValidation();if(n===q3){var i=r.parameters;return e=i,t=a().chain(e).map((function(e,t){return"permutations"===t?e.message:a().map(e,(function(e){return a().pluck(e,"message")}))})).flatten().filter((function(e){return e})).uniq().value().join(". "),a().isEmpty(t)?null:"".concat(t,".")}return n===U3?function(e){var t=a().chain(e).pluck("message").filter((function(e){return e})).value().join(". ");return a().isEmpty(t)?null:"".concat(t,".")}(r.questionData):n===W3?function(e){var t=a().chain(e).map((function(e,t){return"availableFormats"===t?e.message:a().pluck(e,"message")})).flatten().filter((function(e){return e})).value().join(". ");return a().isEmpty(t)?null:"".concat(t,".")}(r.validationData):null}},{key:"componentDidMount",value:function(){var e=this,t=this.context.i18n,n=this.onQuestionEditorReady,r=this.state.questionData,i=this.props.qeManager,o=S1;o.rich_text_editor={customButtons:[{name:"insertFunction",label:t.get("mathGenExpressionInsertButton"),icon:"expression.png",func:function(t,n){var r=e.mathGenQe.attribute("expression").getValue();n(r?'<span class="latex_ckwidget">\\('.concat(r,"\\)</span>"):"")}}]},r.expression&&((o=a().cloneDeep(o)).widget_json.expression=r.expression,o.widget_json.template=r.template),i&&i._consumerKey&&(o.configuration.consumer_key=i._consumerKey),Ld.loadLearnosityApi("questionEditor").then((function(){e.mathGenQe=window.LearnosityQuestionEditor.init(o,"#".concat(e.questionEditorHook),{readyListener:n},{})}))}},{key:"componentWillUnmount",value:function(){this.mathGenQe&&a().isFunction(this.mathGenQe.reset)&&this.mathGenQe.reset()}},{key:"render",value:function(){var e=this.state,t=e.activePage,n=e.parameters,r=e.generatedMath,i=e.questionData,o=e.validationData,s=e.isLoadingData,l=e.errors,u=this.navigationStructure,c=this.validationMessage,d=this.disabledNavigation,f=this.generateFormValidation(),p=null,h=[];if(!a().isEmpty(r)){var m=r.dataTable,g=r.paramTable;p=u3(m,g),h=B2(o)}return zt.createElement(i3,{activePage:t,disabledNavigation:d,navigationStructure:u,onApply:this.onApply,onChangePage:this.onChangePage,shouldDisableApplyButton:a().isEmpty(r)},zt.createElement(K8,{activePage:t,pageName:q3},zt.createElement(S8,{parameters:n,onCreate:this.onCreateParameter,onChange:this.onChangeParameter,onRemove:this.onRemoveParameter,formValidation:f.parameters})),zt.createElement(K8,{activePage:t,pageName:U3},zt.createElement("div",{id:this.questionEditorHook}),zt.createElement(A8,null)),zt.createElement(K8,{activePage:t,pageName:W3},zt.createElement(Z2,{onOptionChange:this.onUpdateValidationOptions,validationData:o,onToggleSelection:this.onToggleValidationSelection,onRetry:this.generateMathGenValidation,onSaveAndQuit:this.onSaveAndQuit,errorMessage:l[W3],isLoadingData:s,formValidation:f.validationData})),zt.createElement(K8,{activePage:t,pageName:z3},zt.createElement(k2,{generateMathGen:this.generateMathGen,tableData:p,selectedValidation:h,onRemoveGeneratedMathRows:this.onRemoveGeneratedMathRows,isLoadingData:s,errorMessage:l[z3],expression:i.expression,onSaveAndQuit:this.onSaveAndQuit})),!s&&zt.createElement(B8,{text:c}))}},{key:"generateFormValidation",value:function(){return L3(this.state,this.context.i18n)}},{key:"generateNewParameter",value:function(){var e=this.state.parameters,t="abcdefghijklmnopqrstuvwxyz".split(""),n=a().pluck(e,"name");return{name:a().difference(t,n)[0],min:1,max:5,step:1,type:"list",list:"1,2,3,4,5"}}},{key:"setQuestionDataFromQe",value:function(){var e=this.mathGenQe.getWidget();this.setState((function(t){var n=Q3(t);return n.questionData=a().pick(e,"expression","template"),n}))}},{key:"setQeDynamicContentData",value:function(){var e=this.mathGenQe,t=this.state.parameters,n={cols:a().pluck(t,"name"),rows:{}};e.setDynamicDataHandlers({get:function(){return n},set:a().noop})}},{key:"workaroundQuestionEditorDelay",value:function(){this.state.activePage===W3&&(this.hasValidQuestionData?this.hasAvailableValidationFormats||this.generateMathGenValidation():this.setState((function(){return{activePage:U3}})))}}])&&I3(t.prototype,n),r&&I3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);function Z3(e){return a().chain(e).pluck("isValid").every((function(e){return e})).value()}function J3(e,t){return"options"===t?Z3(e):e.isValid}function Q3(e){var t=a().cloneDeep(e),n=t.validationData,r=a().clone(n);return r.availableFormats=null,t.validationData=r,t.generatedMath=null,t}K3.contextTypes={i18n:jn().object,qeManager:jn().object,updateA11yMessage:jn().func};const X3=K3;function e6(e){return function(e){if(Array.isArray(e))return t6(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return t6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t6(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n6(e){var t=e.get(qh).getData().itemData.current.item;return a().getNested(t,"metadata.dynamic_content")?function(e){var t=e.metadata.dynamic_content,n=t.parameters,r=t.question_data,i=t.validation_data;return{parameters:n,generatedMath:r6(e),questionData:r,validationData:i}}(t):a().cloneDeep(EL)}function r6(e){var t=e.metadata.dynamic_content.generated_math;if(a().isEmpty(t))return{};var n=a().cloneDeep(t),r=function(e){var t=e.metadata.dynamic_content.validation_data.availableFormats;return a().chain(t).filter((function(e){return e.isSelected})).pluck("name").without("seed").value()}(e),i=function(e){var t=e.dynamic_content_data,n=t.cols,r=t.rows;return a().chain(r).map((function(e){return e})).sortBy("index").pluck("values").map((function(e){var t={};return n.forEach((function(n,r){t[n]=e[r]})),t})).value()}(e);return n.dataTable=i.map((function(e){return a().pick.apply(a(),[e,"seed"].concat(e6(r)))})),n.paramTable=i.map((function(e){return a().omit.apply(a(),[e,"seed"].concat(e6(r)))})),n}function i6(e,t){var n=e.get(qh),r=function(e){var t=a().cloneDeep(e);return a().isEmpty(t.generatedMath)||(delete t.generatedMath.dataTable,delete t.generatedMath.paramTable),t}(t),i=r.generatedMath,o=r.parameters,s=r.questionData,l=r.validationData;n.setDynamicContentMetadata({parameters:o,generated_math:i,question_data:s,validation_data:l})}function o6(e){return(o6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a6(){return(a6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l6(e,t){return(l6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u6(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f6(e);if(t){var i=f6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c6(this,n)}}function c6(e,t){if(t&&("object"===o6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d6(e)}function d6(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f6(e){return(f6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l6(e,t)}(o,e);var t,n,r,i=u6(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),p6(d6(n=i.call(this,e,t)),"isDirty",(function(){return n.state.isMathgenDirty})),p6(d6(n),"onApply",(function(e){var t=e.validationData,r=e.dynamicContentData,i=e.generatedMath,o=e.questionData,a=e.parameters;n.dynamicContentData=r,n.dynamicContentMetadata={generatedMath:i,parameters:a,questionData:o,validationData:t}})),p6(d6(n),"onClose",(function(){var e=n.props.i18n,t=n.state.isMathgenDirty,r=e.get("mathGenUnsavedChangesConfirmation");t&&!window.confirm(r)||n.setState({showMathGen:!1,isMathgenDirty:!1})})),p6(d6(n),"onLaunch",(function(){n.setState({showMathGen:!0})})),p6(d6(n),"onSaveAndQuit",(function(e){a().isEmpty(e.generatedMath)&&(n.dynamicContentData=null),n.dynamicContentMetadata=e,n.setState({showMathGen:!1})})),p6(d6(n),"setMathgenDirtyFlag",(function(){n.state.isMathgenDirty||n.setState({isMathgenDirty:!0})})),n.state={isMathgenDirty:!1,showMathGen:!1},n.childContext={},n.childContext.i18n=n.props.i18n,n.childContext.dom=n.props.dom,n.childContext.updateA11yMessage=n.props.updateA11yMessage,n}return t=o,(n=[{key:"dynamicContentMetadata",get:function(){return n6(this.props.componentRegister)},set:function(e){i6(this.props.componentRegister,e)}},{key:"hasPartialData",get:function(){var e=this.props.componentRegister.get(qh).getData().itemData.current.item,t=!!a().getNested(e,"metadata.dynamic_content");return a().isEmpty(e.dynamic_content_data)&&t}},{key:"dynamicContentData",set:function(e){this.props.componentRegister.get(qh).setDynamicContentData(e)}},{key:"componentDidMount",value:function(){this.props.componentRegister.add(kL,this)}},{key:"componentWillUnmount",value:function(){this.props.componentRegister.remove(kL,this)}},{key:"getChildContext",value:function(){return this.childContext}},{key:"render",value:function(){var e=this.dynamicContentMetadata,t=this.hasPartialData,n=this.onApply,r=this.onClose,i=this.onLaunch,o=this.onSaveAndQuit,a=e.generatedMath,s=e.validationData,l=this.props,u=l.comms,c=l.i18n,d=l.qeManager;return zt.createElement("div",{className:"lrn-author-mathgen"},a.context?zt.createElement(E1,{example:a.seed,questions:a.dataTable.length,validationType:a.response,validationOptions:s.options,onLaunch:i}):zt.createElement(v1,{onLaunch:i,hasPartialData:t}),this.state.showMathGen&&zt.createElement(iP,{title:c.get("mathGenTakeoverTitle"),onClose:r,className:"lrn-author-mathgen-takeover"},zt.createElement("div",{className:"lrn-author-mathgen"},zt.createElement(X3,a6({setMathgenDirtyFlag:this.setMathgenDirtyFlag,comms:u,qeManager:d,onApply:n,onSaveAndQuit:o},e)))))}}])&&s6(t.prototype,n),r&&s6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);h6.childContextTypes={dom:jn().instanceOf(HTMLElement),i18n:jn().object,updateA11yMessage:jn().func};const m6=h6;function g6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y6="audioplayer",v6="videoplayer",b6="clozeformula";const _6=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}var t,n,r;return t=e,(n=[{key:"buildCustomViews",value:function(){var e=this,t=a().cloneDeep(a().getNested(this.options,"initOptions.config.question_editor_api.eventOptions.customViews"))||{},n=[];return this.isUserMediaSupported()?(n.push(b6),this.options.initOptions.config.item_edit.item.enable_audio_recording&&n.push(y6),a().getNested(this.options.consumerSettings,"feature_flags.question_editor_flags.record_video")&&n.push(v6),0===n.length||a().each(n,(function(n){var r=e.buildCustomView(n);a().isArray(t[n])||(t[n]=[]),t[n].push(r)})),t):t}},{key:"buildCustomView",value:function(e){switch(e){case y6:return this.buildAudioPlayer();case v6:return this.buildVideoPlayer();case b6:return this.buildMathGenElement();default:return null}}},{key:"buildMathGenElement",value:function(){return{path:"is_dynamic_content",location:"any",handler:this.buildMathGenHandler()}}},{key:"buildAudioPlayer",value:function(){return{path:"src",location:"simplefeature",handler:this.buildHandler("audio")}}},{key:"buildVideoPlayer",value:function(){return{path:"src",location:"simplefeature",condition:{path:"player_type",values:["hosted-video"]},handler:this.buildHandler("video")}}},{key:"buildMathGenHandler",value:function(){var e=this;return function(t){var n=zt.createElement(m6,{comms:e.options.comms,componentRegister:e.options.componentRegister,hook:e.options.hook,i18n:e.options.i18n,metricsUtil:e.options.metricsUtil,value:t.value,onChangeValue:t.changeValue,qeManager:e.options.qeManager,dom:e.options.dom,updateA11yMessage:e.options.updateA11yMessage});t.onRemoveView((function(){Gt.unmountComponentAtNode(t.dom)})),Gt.render(n,t.dom)}}},{key:"buildHandler",value:function(e){var t=this;return function(n){var r=zt.createElement(p1,{mediaType:e,comms:t.options.comms,hook:t.options.hook,i18n:t.options.i18n,metricsUtil:t.options.metricsUtil,value:n.value,onChangeValue:n.changeValue});n.onRemoveView((function(){Gt.unmountComponentAtNode(n.dom)})),Gt.render(r,n.dom)}}},{key:"isUserMediaSupported",value:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&a().isFunction(navigator.mediaDevices.getUserMedia)}}])&&g6(t.prototype,n),r&&g6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w6(e){return(w6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x6(e,t){return(x6=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k6(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O6(e);if(t){var i=O6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T6(this,n)}}function T6(e,t){if(t&&("object"===w6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O6(e){return(O6=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x6(e,t)}(o,e);var t,n,r,i=k6(o);function o(){return E6(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props.a11yMessage;return zt.createElement("div",{className:"lrn-sr-only",role:"region","aria-live":"polite"},e||"")}}])&&S6(t.prototype,n),r&&S6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(zt.Component);const A6=Ln((function(e){return{a11yMessage:xh(e)}}))(C6);function P6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M6=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shellProvider=zt.createRef(),this.options=t,this.i18n=t.i18n,this.initOptions=a().cloneDeep(t.initOptions),this.store=BJ(t.app),this.setDomElement(t.dom),this.activityManager=new ik(a().getNested(this.initOptions,"config.dependencies.questions_api.init_options")||{},t.metricsUtil,this.authorApiReactContainer),this.createQuestionEditorManager();var n=a().getNested(this.initOptions,"config.global.ab_standards.aligned_tag_type");this.abAlignedTagTypeUtil=new rr(n),this.scrollPositionHelper=new Hn(this.authorApiElement),this.initializeView()}var t,n,r;return t=e,(n=[{key:"createQuestionEditorManager",value:function(){var e=this,t=a().getNested(this.initOptions,"config.dependencies.question_editor_api")||{};this.qeManager=new Aq({dom:this.options.dom,initOptions:t.init_options||{},qeVersion:t.version,consumerKey:this.options.comms.security.consumer_key,consumerSettings:this.options.consumerSettings,scrollIntoViewSelector:a().getNested(this.initOptions,"config.container.scroll_into_view_selector"),metricsUtil:this.options.metricsUtil,dataManager:this.options.dataManager,authorApiRootId:this.options.authorApiRootId,errorUtil:this.options.app.errorUtil});var n=new _6({initOptions:this.initOptions,componentRegister:this.options.componentRegister,consumerSettings:this.options.consumerSettings,comms:this.options.comms,hook:".".concat(this.qeManager.getClassName()),i18n:this.options.i18n,metricsUtil:this.options.metricsUtil,qeManager:this.qeManager,dom:this.authorApiReactContainer,updateA11yMessage:function(t){e.dispatch(lh(t))}});this.qeManager.setCustomViews(n.buildCustomViews()),t.preload&&this.initialiseQuestionEditor()}},{key:"initialiseQuestionEditor",value:function(){this.qeManager.getInstance()}},{key:"getState",value:function(){return this.store.getState()}},{key:"getMode",value:function(){return a().getNested(this.getState(),"ui.navigate.route.mode")}},{key:"initializeView",value:function(){Gt.unmountComponentAtNode(this.authorApiReactContainer);var e=this.options.app.component.triggerPublicEvent.bind(this.options.app.component),t=rc.constants.SELECT_MODES;Gt.render(zt.createElement(en,{store:this.store},zt.createElement(pr,{ref:this.shellProvider,i18n:this.i18n,metricsUtil:this.options.metricsUtil,app:this.options.app,dom:this.authorApiReactContainer,consumerSettings:this.options.consumerSettings,componentRegister:this.options.componentRegister,activityManager:this.activityManager,qeManager:this.qeManager,publicEvents:new aD(e),abAlignedTagTypeUtil:this.abAlignedTagTypeUtil,scrollPositionHelper:this.scrollPositionHelper},zt.createElement(gr.f6,null,zt.createElement(A6,null),zt.createElement(Uu,{selectMode:t.SINGLE}),zt.createElement(eR,null),zt.createElement(aQ,this.options)))),this.authorApiReactContainer)}},{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"setDomElement",value:function(e){this.authorApiElement=e,this.authorApiReactContainer=document.createElement("div"),this.authorApiReactContainer.className="".concat("lrn-author-api-react-container"," lrn-author-ui"),this.authorApiElement.appendChild(this.authorApiReactContainer)}},{key:"navigate",value:function(e){var t=this.canNavigate(e.currentLocation);return this.dispatch(yh(e,!0)),t?t.path:t}},{key:"canNavigate",value:function(e){var t=HZ(e);return t||!1}},{key:"subscribe",value:function(e){return this.store.subscribe(e)}},{key:"getContext",value:function(){return a().getNested(this,"shellProvider.current.childContext")}}])&&P6(t.prototype,n),r&&P6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const D6=function(e){var t=new M6(e);return{dispatch:t.dispatch.bind(t),getMode:t.getMode.bind(t),getState:t.getState.bind(t),navigate:t.navigate.bind(t),canNavigate:t.canNavigate.bind(t),subscribe:t.subscribe.bind(t),getQuestionEditorManager:function(){return t.qeManager},initQe:t.initialiseQuestionEditor.bind(t),getStore:function(){return t.store},getComponentRegister:function(){return t.options.componentRegister},getContext:t.getContext.bind(t)}};const R6=function(e){var t,n=0;if(0===e.length)return n.toString();for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n.toString()};const L6=function(e){return{type:RU,data:{externalSettings:e}}};const N6=function(e){return{type:sp,data:{tags:e}}};var I6=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={detail:e};try{var n=new CustomEvent("learnosity",t);document.dispatchEvent(n)}catch(t){var r=document.createEvent("CustomEvent");r.initCustomEvent("learnosity",!1,!1,e),document.dispatchEvent(r)}};function j6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B6(e,t,n){var r=e.data[0].workflow_states.map((function(e){return e.reference.toLowerCase()})),i=[];if(t.allowed_workflow_states&&t.allowed_workflow_states.forEach((function(e){-1===r.indexOf(e.toLowerCase())&&i.push(e)})),i.length){var o="The workflow state(s): ".concat(JSON.stringify(i)," provided in ")+"global.workflow.".concat(n.type,".allowed_workflow_states do not exist for the ")+'requested workflow with reference: "'.concat(t.reference,'"');throw new Error(o)}}function F6(e,t,n){var r=this,i=e.data[0];t.allowed_workflow_states&&(i.isFiltered=!0,i.allowed_workflow_states=t.allowed_workflow_states),i.workflow_states=i.workflow_states.map((function(e){var t=r.getWorkflowI18nLabel(e.reference);return t&&(e.label=t),e.workflow_transitions=e.workflow_transitions.map((function(e){var t=r.getWorkflowI18nLabel(e.to_state_reference);return t&&(e.to_state_label=t),e})),e})),this.initOptionsModel[n.setter](i)}const Y6=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.comms=t,this.errorUtil=n,this.i18n=r,this.initOptionsModel=i,this.workflowSettings=a().getNested(this.initOptionsModel,"attributes.config.global.workflow")}var t,n,r;return t=e,(n=[{key:"getWorkflowI18nLabel",value:function(e){return this.i18n.get("workflowState".concat(qs(e.toLowerCase())))}},{key:"hasWorkflowConfig",value:function(){return a().getNested(this.workflowSettings,"item.reference")||a().getNested(this.workflowSettings,"activity.reference")}},{key:"fetchWorkflow",value:function(){return this.hasWorkflowConfig()?this.comms.request({url:"/itembank/workflows"}):Promise.resolve({})}},{key:"validateAndConfigureWorkflow",value:function(e){var t=this;this.hasWorkflowConfig()&&[{type:"item",setter:"setItemWorkflow"},{type:"activity",setter:"setActivityWorkflow"}].forEach((function(n){var r=n.type,i=t.workflowSettings[r],o=e.data[0][r];if(a().isJsonObject(o)&&a().isArray(o.data)&&1===o.data.length)B6.call(t,o,i,n),F6.call(t,o,i,n);else if(i){var s=i.reference,l="No ".concat(r,' workflow was found with the reference: "').concat(s,'"');throw new Error(l)}}))}},{key:"handleWorkflowError",value:function(e){this.errorUtil.handle({id:1e4,message:e.message},!1),["item","activity"].forEach((function(t){var n=a().getNested(e,"data.".concat(t,".meta.message"));n&&console.error(n)}))}}])&&j6(t.prototype,n),r&&j6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var H6=qh,V6="widgetedit",q6="item_settings",U6=function(e,t,n){var r=this,i=e.security,o=e.metricsUtil;this.backboneEvents=a().extend({},c.Events),this.errorUtil=t,this.validationUtil=new _(this.errorUtil),i.domain=window.location.hostname;var s=new ji(i,t);s.setRequestData(e.requestString);var l=new Xs(a().getNested(e,"request.config.label_bundle")||{});this.i18n=l,kd.translateTemplatePresets(l);try{this.initOptionsModel=new CZ(e.request,e.events,{i18n:l}),this.validateSecurity(e.security)}catch(e){return t.handle(e)}this.rootId=a().uuid();var u=this.getHookElement(n||ZK.dom_id);this.component=new KK({initOptionsModel:this.initOptionsModel,i18n:l,comms:s,errorUtil:t,consumerKey:e.security.consumer_key,app:this,dom:u,uuid:this.originalHook.hash,metricsUtil:e.metricsUtil}),this.tagHelper=new Ay,this.tagsUtil=new A({comms:s}),this.componentRegister=new Fn,a().each(sd.EVENTS,(function(e){var t=a().bind((function(e){this.backboneEvents.trigger(e.name,e)}),this);this.backboneEvents.listenTo(this.component.publicEvents,e,t)}),this);var d=this,p=new Y6(s,t,l,this.initOptionsModel);p.fetchWorkflow().then((function(e){try{p.validateAndConfigureWorkflow(e),s.request({url:"/consumersettings"}).then((function(e){h(e)}))}catch(e){p.handleWorkflowError(e)}}));var h=function(e){d.initOptionsModel.setUser(e.data.current_user),d.initOptionsModel.setItembankSearchEnabled(e.data.itembank_search_enabled),d.initOptionsModel.setConsumerSettings(e.data.consumer_settings);var t=a().omit(d.initOptionsModel.attributes,"consumerSettings");d.shell=D6({initOptions:t,consumerSettings:d.initOptionsModel.getConsumerSettings(),metricsUtil:o,i18n:l,dom:u,comms:s,app:d,dataManager:r.component.dataManager,componentRegister:r.componentRegister,authorApiRootId:r.rootId}),d.backboneEvents.trigger("ready"),d.component.navigateToDefaultLocation(),!0!==r.initOptionsModel.getGlobalConfig().disable_onbeforeunload&&f()(window).on("beforeunload",a().bind((function(){if("item_edit"===this.shell.getMode()&&!this._authorAppFacade.safeToUnload())return l.get("unsavedChangesNavigateConfirm")}),d))};return this};a().extend(U6.prototype,{EXPOSED_METHODS:["addItem","changeItemMode","clearSelectedItems","closeItemSettings","createItem","displaySettingsDiscard","duplicateActivity","duplicateItem","editItem","editorApp","fetchActivities","fetchItems","getItem","getItemDescription","getItemDifficulty","getItemList","getItemNotes","getItemReference","getItemSource","getItemTitle","getLocation","getSearch","getSelectedItems","getScoringType","getStatus","getItemTags","getWidget","getWidgetMetadata","moveInstanceTo","navigate","off","on","once","questionsApp","safeToUnload","safeToUnloadComponent","save","saveActivity","setAttributes","setItem","setItemDescription","setItemDifficulty","setItemJson","setItemNotes","setItemReference","setItemSource","setItemTitle","setSafeToUnload","setScoringType","setStatus","setItemTags","setWidget","destroy","setActivity","getActivity","getActivityDescription","setActivityDescription","setActivityTags","getActivityTags","createActivity","changeActivityMode","setActivityStatus","getActivityStatus","getActivityReference","getActivityList","editActivity","getActivityItems","setActivityItems","getActivityTitle","setActivityTitle","backToItemEdit"],ACTIVITY_JSON_BLACKLIST:["metadata","activity_id","last_updated_by","authoring_workflow"],PUBLIC_EVENTS:sd.EVENTS,createFacade:function(e){var t=this,n={};return a().isObject(e)&&(n=e),a().each(t.EXPOSED_METHODS,(function(e){n[e]=function(){var n=Array.prototype.slice.call(arguments);if("navigate"===e){var r=arguments[0],i=HZ(r),o=t.component.router._findHandler(r),a=i?i.path:null,s=o?o.route:null,l=s||a;n[0]=l}return I6({app:window.LearnosityAuthor._internal.config.appContext,name:"publicMethod",publicMethod:e,args:n}),t[e].apply(t,arguments)}}),this),this._authorAppFacade=n,n},getFacade:function(){return this._authorAppFacade||this.createFacade(),this._authorAppFacade},getHookElement:function(e){var t,n,r=U.getTextDirection();if(dD(e))n=e;else{if(!a().isString(e))throw"Please provide a valid DOM hook element";if((t=document.querySelectorAll(e)).length||"#"===e[0]||"."===e[0]||(t=document.querySelectorAll("#"+e)),!t.length)throw"Could not find DOM element using selector "+e;n=t[0]}var i=document.createElement("div");return this.originalHook={domEl:n.cloneNode(),parent:n.parentElement},this._hashOriginalHook(),i.className="".concat(n.className," ").concat("lrn lrn-author"),i.setAttribute("data-authorapi-root-id",this.rootId),a().isNull(r)||i.setAttribute("dir",r),n.parentNode&&n.parentNode.replaceChild(i,n),i},_hashOriginalHook:function(){var e=this,t="",n="_";if(["id","tagName","className"].forEach((function(r){e.originalHook.domEl[r]&&(t+=n+e.originalHook.domEl[r]),e.originalHook.parent[r]&&(t+=n+e.originalHook.parent[r])})),this.originalHook.domEl.hasAttributes())for(var r=0;r<this.originalHook.domEl.attributes.length;r++){var i=this.originalHook.domEl.attributes[r];t+=n+i.name+n+i.value}if(this.originalHook.parent.hasAttributes())for(var o=0;o<this.originalHook.parent.attributes.length;o++){var a=this.originalHook.parent.attributes[o];t+=n+a.name+n+a.value}this.originalHook.hash=R6(t)},validateSecurity:function(e){var t,n=["consumer_key","timestamp","signature"],r=n.length;if(!a().isObject(e))throw"A security attribute must be provided and be an object when initializing the Author API";for(t=0;t<r;t++)if(!e.hasOwnProperty(n[t]))throw"A "+n[t]+" attribute must be provided when initializing the Author API"},getItem:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItem()},editorApp:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.editorApp()},getItemList:function(){return this.component.getItemList()},getActivityList:function(){return this.component.getActivityList()},setActivityItems:function(e){var t=this.shell.getState();return!Eh(t)&&(!!a().isArray(e)&&(!!this.isEditingActivity()&&(this.shell.dispatch(jU({data:{items:e}})),!0)))},getActivityItems:function(){if(this.isEditingActivity()){var e=this.shell.getState();return a().getNested(e,"activityEdit.activityJson.data.items")||!1}return!1},duplicateActivity:function(e){var t=this.shell.getState();if(!this.isEditingActivity()||this.isInItemPickerMode()||Eh(t))return!1;var n=a().getNested(t,"activityEdit.mode"),r=a().getNested(t,"activityEdit.newActivityJsonSet")||!1,i=this.initOptionsModel.getDuplicateActivityConfig(),o=a().isJsonObject(e)?e:{},s=a().getNested(t,"activityEdit.isDirty");if(r||"confirm_duplicate"===n)return!1;if(!0===o.showConfirmationScreen){if(s&&i.deepCopy)if(!confirm(this.i18n.get("duplicateActivityWarning")))return!1;return this.shell.dispatch(Cm("confirm_duplicate")),!0}if(a().isBoolean(o.deepCopy)||(o.deepCopy=!1),a().isBoolean(o.duplicateSharedPassages)||(o.duplicateSharedPassages=!1),o.deepCopy&&s)return!1;if(!a().isNull(o.reference)&&!a().isUndefined(o.reference)&&""!==o.reference&&!this.validationUtil.validateAttribute("reference",o.reference,"duplicateActivity"))return!1;if(o.reference){o.reference=o.reference.trim();var l=this;this.component.dataManager.fetchActivity(o.reference).then((function(e){a().getNested(e,"data.activity")?l.errorUtil.handle({id:l.errorUtil.errorsArray.length,method:"duplicateActivity",attribute:"reference",message:"An activity with reference ".concat(o.reference," ")+"already exists"},!0,!1):l.shell.dispatch(L6(o))}))}else this.shell.dispatch(L6(o));return!0},fetchActivities:function(e){return this.component.fetchActivities(e)},fetchItems:function(e){return this.component.fetchItems(e)},editItem:function(e,t){if(!e)return console.warn("in editItem() - `itemReference` parameter is required"),!1;if(this.isEditingActivity()){if(t)return console.warn("The second argument (create) is not supported when editItem() is called from Activity edit."),!1;var n=this.shell.getState(),r=kh(n);if(!function(e,t){var n=a().getNested(t.activityEdit.activityJson,"data.items")||[],r=a().map(n,(function(e){return e.reference}));return a().contains(r,e)}(e,n))return console.warn("in editItem() - Cannot find Item with reference "+"".concat(e," in the current activity (").concat(r,")")),!1;this.component.router.navigate("activities/".concat(r,"/items/").concat(e))}else this.component.setItem(e.trim(),{itemMustExist:!t})},setItem:function(e){console.warn("Method setItem(reference) is deprecated. Use editItem(reference, true) instead."),this.editItem(e,!0)},setItemJson:function(e){if(!a().isObject(e))return console.warn("The first argument passed to setItemJson must be an object"),!1;var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemJson(e)},setSafeToUnload:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[H6],r=this.componentRegister.get(H6);switch(e){case H6:return!!r&&r.moduleMethods.setSafeToUnload(t);default:return console.warn(["Warning: setSafeToUnload(componentName, isSafe) was called with",' unknown componentName "'.concat(e,'".')," Supported component names are: ".concat(n.map((function(e){return'"'.concat(e,'"')})).join(", "),".")].join("")),!1}},safeToUnload:function(e){var t=[H6];if("boolean"==typeof e){var n=e;return console.warn(["Warning: Calling safeToUnload(".concat(String(n),") is deprecated.")," Use setSafeToUnload(componentName, ".concat(String(n),") instead.")," Supported component names are: ".concat(t.map((function(e){return'"'.concat(e,'"')})).join(", "),".")].join("")),this.legacySafeToUnload(n)}return void 0===e?(console.warn(["Warning: Calling safeToUnload() without arguments is deprecated."," Use safeToUnload(componentName) instead."].join("")),this.legacySafeToUnload()):this.safeToUnloadComponent({name:e},!0)},legacySafeToUnload:function(e){var t=this.componentRegister.get(H6),n=this.shell.getState();if(Eh(n)){var r=a().getNested(n,"activityEdit.isDirty");return!0===e&&(this.shell.dispatch(Uv.createToggleDirtyState({isDirty:!1})),r=!1),t.moduleMethods.safeToUnload(e)&&!r}return t?t.moduleMethods.safeToUnload(e):!this.isEditingActivity()||(!0===e?(this.shell.dispatch(Uv.createToggleDirtyState({isDirty:!1})),!0):!a().getNested(n,"activityEdit.isDirty"))},warnIfInstanceIsUndefined:function(e,t,n){e||n||console.warn(["Warning: Calling safeToUnloadComponent({ name: '".concat(t,"' }) while the '").concat(t,"'")," view is not loaded"].join(""))},safeToUnloadComponent:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[H6,kL,q6],i=this.componentRegister.get(H6),o=this.componentRegister.get(kL);switch(t.name){case kL:this.warnIfInstanceIsUndefined(o,kL,n),e=!o||!o.isDirty();break;case H6:this.warnIfInstanceIsUndefined(i,H6,n);var a=!o||!o.isDirty(),s=!i||i.moduleMethods.safeToUnloadComponent({name:"item_settings"}),l=!i||i.moduleMethods.safeToUnload();e=a&&s&&l;break;case q6:this.warnIfInstanceIsUndefined(i,q6,n),e=!i||i.moduleMethods.safeToUnloadComponent(t);break;default:n||console.error(["safeToUnloadComponent(): Unknown value ",'"'.concat(t.name,'" for argument '),"'options.name'. Supported values are: ","".concat(r.map((function(e){return'"'.concat(e,'"')})).join(", "),".")].join("")),e=!1}return e},displaySettingsDiscard:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.displaySettingsDiscard(e)},save:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.save(e)},createItem:function(e){if(this.isEditingActivity())return!1;a().isString(e)?this.component.createItem(e.trim()):this.addItem()},duplicateItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.componentRegister.get(H6),r=this.shell.getState();return!Eh(r)&&(!!n&&n.moduleMethods.duplicateItem(e,t))},addItem:function(){this.component.router.navigate("items/new")},questionsApp:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.questionsApp()},setAttributes:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setAttributes(e)},setItemReference:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemReference(e)},getItemReference:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemReference()},getItemDescription:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemDescription()},setItemDescription:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemDescription(e)},getItemDifficulty:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemDifficulty()},setItemDifficulty:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemDifficulty(e)},getItemNotes:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemNotes()},setItemNotes:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemNotes(e)},getItemSource:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemSource()},setItemSource:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemSource(e)},getItemTitle:function(){var e=this.componentRegister.get(H6);return e?e.moduleMethods.getItemTitle():(console.warn("getItemTitle() can only be called in Item edit view"),!1)},setItemTitle:function(e){var t=this.componentRegister.get(H6);return t?t.moduleMethods.setItemTitle(e):(console.warn("setItemTitle() can only be called in Item edit view"),!1)},getLocation:function(){return this.component.getLocation(!0)},getStatus:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getStatus()},getSearch:function(e){return this.component.getSearch(e)},clearSelectedItems:function(){return this.component.clearSelectedItems()},getSelectedItems:function(){return this.component.getSelectedItems()},changeItemMode:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.changeItemMode(e)},setStatus:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setStatus(e)},getItemTags:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getItemTags()},setItemTags:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setItemTags(e)},getActivityDescription:function(){if(this.isEditingActivity()){var e=this.shell.getState();return a().getNested(e,"activityEdit.activityJson.description")}return console.warn("getActivityDescription() can only be called in Activity edit view"),!1},setActivityDescription:function(e){if(this.isEditingActivity()){if(!this.validationUtil.validateAttribute("description",e,"setActivityDescription"))return!1;var t=this.shell.getState(),n=a().getNested(t,"activityEdit.activityJson.description");if(a().isEqual(e,n))return console.warn("setActivityDescription() - the description passed is already set"),!1;var r=a().getNested(t,"activityEdit.activityJson")||{};return this.shell.dispatch(jU(a().deepExtend({},r,{description:e}))),!0}return console.warn("setActivityDescription() can only be called in Activity edit view"),!1},getActivityTags:function(){if(this.isEditingActivity()){var e=this.shell.getState();return a().getNested(e,"activityEdit.activityJson.tags")||!1}return!1},setActivityTags:function(e){if(this.isEditingActivity()){var t=this.shell.getState(),n=a().getNested(t,"activityEdit.activityJson.tags")||!1;return!(!this.tagHelper.isValidTagsV2(e)||a().isEqual(e,n))&&(this.shell.dispatch(N6(e)),!0)}return!1},getActivityTitle:function(){if(this.isEditingActivity()){var e=this.shell.getState();return a().getNested(e,"activityEdit.activityJson.title")}return console.warn("getActivityTitle() can only be called in Activity edit view"),!1},setActivityTitle:function(e){if(this.isEditingActivity()){if(!this.validationUtil.validateAttribute("title",e,"setActivityTitle"))return!1;var t=this.shell.getState(),n=a().getNested(t,"activityEdit.activityJson.title");if(a().isEqual(e,n))return console.warn("setActivityTitle() - the title passed is already set"),!1;var r=a().getNested(t,"activityEdit.activityJson")||{};return this.shell.dispatch(jU(a().deepExtend({},r,{title:e}))),!0}return console.warn("setActivityTitle() can only be called in Activity edit view"),!1},moveInstanceTo:function(e){return!!dD(e)&&(this.component.$el.appendTo(e),!0)},navigate:function(e){return this.component.router.navigate(e)},getWidget:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getWidget()},getWidgetMetadata:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getWidgetMetadata()},setWidget:function(e,t){var n=this.componentRegister.get(H6);return!!n&&n.moduleMethods.setWidget(e,t)},on:function(e,t,n){var r=this.getQEEventName(e);return r?this.shell.getQuestionEditorManager().attachEventListener(r,t,n,"on"):this.backboneEvents.on(e,t,n),this.getFacade()},once:function(e,t,n){var r=this.getQEEventName(e);return r?this.shell.getQuestionEditorManager().attachEventListener(r,t,n,"once"):this.backboneEvents.once(e,t,n),this.getFacade()},off:function(e){var t=this.getQEEventName(e);return t?this.shell.getQuestionEditorManager().offEvent(t):this.backboneEvents.off(e),this.getFacade()},getQEEventName:function(e){var t,n=e.split(":");return n[0]===V6&&a().each(n,(function(e){e!==V6&&(t?t+=":"+e:t=e)})),t},getScoringType:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.getScoringType()},setScoringType:function(e){var t=this.componentRegister.get(H6);return!!t&&t.moduleMethods.setScoringType(e)},destroy:function(){this.backboneEvents.off(),this.backboneEvents.stopListening(),this.originalHook.parent.appendChild(this.originalHook.domEl),this.component.removeComponentView(),this.component.remove(),delete this.component,delete this._authorAppFacade,delete this.errorUtil,delete this.initOptionsModel},isEditingActivity:function(){var e="item_for_activity_list"===(a().getNested(this.component,"componentView.mode")||null),t=this.shell.getState();return Sh(t)||e},isInItemPickerMode:function(){return"item_for_activity_list"===(a().getNested(this.component,"componentView.mode")||null)},setActivity:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.extend,r=void 0===n||n,i=this.shell.getState();return!(Eh(i)||!e||!a().isObject(e)||!r&&!this.validationUtil.validateAttribute("rendering_type",e.rendering_type,"setActivity"))&&(r?!!this.isEditingActivity()&&(this.shell.dispatch(jU({data:e})),!0):(this.shell.dispatch(AE(e)),!0))},getActivity:function(){if(this.isEditingActivity()){var e=this.shell.getState(),t=a().getNested(e,"activityEdit.activityJson")||!1;if(t)return a().omitDeep(t,this.ACTIVITY_JSON_BLACKLIST)}return!1},createActivity:function(e){if(a().isString(e)&&e.trim().length){var t=this;e=e.trim(),this.component.dataManager.fetchActivity(e).then((function(n){a().getNested(n,"data.activity")?t.errorUtil.handle("An activity with reference ".concat(e," ")+"already exists"):(t.shell.dispatch(Wp({reference:e,description:""})),t.component.router.navigateToActivity(e))}))}else this.shell.dispatch(Wp({reference:a().uuid(),description:""})),this.component.router.navigate("activities/new")},changeActivityMode:function(e){if(a().getNested(this.shell.getState(),"activityEdit.mode")!==e&&this.isEditingActivity()){var t=a().getNested(this.component,"componentView.mode")||null;return!(!a().isEmpty(e)&&!a().contains(["edit","preview"],e))&&("item_for_activity_list"!==t&&(this.shell.dispatch(Uv.createToggleMode({mode:e})),!0))}return!1},setActivityStatus:function(e){if(this.isEditingActivity()){if(!this.validationUtil.validateAttribute("status",e,"setStatus"))return!1;var t=this.shell.getState(),n=a().getNested(t,"activityEdit.activityJson")||{};return this.shell.dispatch(jU(a().deepExtend({},n,{status:e}))),e}return!1},getActivityStatus:function(){if(this.isEditingActivity()){var e=this.shell.getState();return a().getNested(e,"activityEdit.activityJson.status")||"published"}return!1},getActivityReference:function(){return this.isEditingActivity()&&kh(this.shell.getState())||!1},saveActivity:function(){if(this.isEditingActivity()){var e=this.shell.getState(),t=a().getNested(e,"activityEdit.isDirty")||!1;return Eh(e)?this.componentRegister.get(H6).moduleMethods.save():!(!t||e.activityEdit.isSaving)&&(this.shell.dispatch(Om({})),!0)}return!1},editActivity:function(e){if(a().isUndefined(e)||!a().isString(e))return this.errorUtil.handle("You need to specify the reference of the activity you want to edit"),!1;this.component.editActivity(e.trim())},closeItemSettings:function(){var e=this.componentRegister.get(H6);return!!e&&e.moduleMethods.closeItemSettings()},backToItemEdit:function(){var e=this.componentRegister.get(H6);return e?e.moduleMethods.backToItemEdit():(this.errorUtil.handle("The public method backToItemEdit() can only be called in the Item edit sub-views",!0),!1)}});const W6=U6;function z6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G6(e){return e.message||e.msg||e}const $6=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorsArray=t,this.errorHandler=n||this.errorHandler,this.handle=this.handle.bind(this)}var t,n,r;return t=e,(n=[{key:"handle",value:function(e,t,n){var r=(e=e||{}).meta?e.meta:e;n||(this.errorsArray.push(r),this.log(G6(r)+". View this error on LearnosityAuthor.errors["+(this.errorsArray.length-1)+"]")),this.errorHandler(r,!!t)}},{key:"log",value:function(e){if(console.error.apply)console.error(e);else for(var t=Array.prototype.slice.call(arguments),n=t.length-1;n>=0;n--)console.log(t[n])}},{key:"errorHandler",value:function(e,t){var n=G6(e);t||window.alert(n+"\n\nPlease contact your administrator if you require further assistance.")}}])&&z6(t.prototype,n),r&&z6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z6=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metricsContext=t,this.setContext=this.setContext.bind(this),this.getContext=this.getContext.bind(this)}var t,n,r;return t=e,(n=[{key:"setContext",value:function(e){this.metricsContext=e}},{key:"getContext",value:function(){return this.metricsContext}}])&&K6(t.prototype,n),r&&K6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),J6=[];function Q6(e){a().isFunction(e)&&a().defer(e)}const X6=a().extend({init:function(e){var t,n,r,i,o,s={},l=[];e=a().cloneDeep(e),a().each(arguments,(function(r){a().isString(r)||dD(r)?o=r:r.errorListener||r.readyListener||r.metricsContext?(t=r.readyListener,n=r.errorListener,l=a().clone(r.metricsContext)||[]):r.appStub&&(s=r.appStub),(r.customButtons||r.assetRequest)&&(e.events={},r.customButtons&&(e.events.customButtons=r.customButtons),r.assetRequest&&(e.events.assetRequest=r.assetRequest))})),Li.init({baseUrl:window.LearnosityAuthor._internal.config.apiHost,iframeBaseUrl:window.LearnosityAuthor._internal.config.apiHost}),r=new $6(J6,n),a().isString(e.request)?(e.requestString=e.request,e.request=JSON.parse(e.request)):e.requestString=JSON.stringify(e.request),l.push("authorapi");var u=new Z6(l);return e.metricsUtil=u,(i=new W6(e,r,o)).on("ready",(function(){Q6(t)})),i.createFacade(s),s},errors:J6});__webpack_require__.p=window.LearnosityAuthor._internal.config.assetsHost+"/dist/",function(){var e,t,n;if(window.LearnosityAuthor&&window.LearnosityAuthor._internal&&(window.LearnosityAuthor._internal._cachedInitCalls&&(e=window.LearnosityAuthor._internal._cachedInitCalls,delete window.LearnosityAuthor._internal._cachedInitCalls),X6._internal=window.LearnosityAuthor._internal,X6.version=window.LearnosityAuthor.version,X6.versions=window.LearnosityAuthor.versions,window.LearnosityAuthor=X6,e))for(n=0;n<e.length;n++)t=e[n],window.LearnosityAuthor.init.apply(window.LearnosityAuthor,t.args)}()})()})();
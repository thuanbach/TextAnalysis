!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e={options:{optionClass:"",dropdownClass:"",autoinit:!1,callback:!1,onSelected:!1,destroy:function(t){this.destroy(t)},dynamicOptLabel:"Add a new option..."},init:function(a){function o(o){if(!o.data("dropdownjs")&&o.is("select")){var i=o.attr("multiple"),n=o.attr("data-dynamic-opts"),s=t(),d=t("<div></div>");d.addClass("dropdownjs").addClass(a.dropdownClass),d.data("select",o);var l=t("<input type=text readonly class=fakeinput aria-labelledby=search-label-mobile>");t.material&&l.data("mdproc",!0),d.append(l);var r=t("<ul></ul>");r.data("select",o),d.append(r),l.attr("placeholder",o.attr("placeholder")),o.find("option").each(function(){var a=t(this);e._addOption(r,a)}),n&&((s=t("<li class=dropdownjs-add></li>")).append("<input>"),s.find("input").attr("placeholder",a.dynamicOptLabel),r.append(s));var c=d.find("li");if(i){var p=[],f=o.val();for(var u in f)p.push(f[u]);if(p.length>0){var h=d.find(function(){return-1!==t.inArray(t(this).data("value"),p)});h.removeClass("selected"),e._select(d,h)}}else{var v;v=o.find(":selected").length?o.find(":selected").last():o.find("option, li").first(),e._select(d,v)}l.addClass(o[0].className),o.hide().attr("data-dropdownjs",!0),o.after(d),a.callback&&a.callback(d),r.on("click","li:not(.dropdownjs-add)",function(a){e._select(d,t(this)),o.change()}),r.on("keydown","li:not(.dropdownjs-add)",function(a){return 27===a.which?(t(".dropdownjs > ul > li").attr("tabindex",-1),l.removeClass("focus").blur()):13!==a.which||t(a.target).is("input")?void 0:(e._select(d,t(this)),t(".dropdownjs > ul > li").attr("tabindex",-1),l.removeClass("focus").blur())}),t(".dropdownjs > ul >li").keydown(function(e){40===e.which&&(t(this).next("li").focus(),t(this).is(":last-child")&&t(".dropdownjs > ul >li:first-child").focus()),38===e.which&&(t(this).prev("li").focus(),t(this).is(":first-child")&&t(".dropdownjs > ul >li:last-child").focus())}),r.on("focus","li:not(.dropdownjs-add)",function(){o.is(":disabled")||l.addClass("focus")}),n&&n.length&&s.on("keydown",function(e){if(13===e.which){var a=t("<option>"),i=s.find("input").val();s.find("input").val(""),a.attr("value",i),a.text(i),o.append(a)}}),o.on("change",function(a){var n;t(a.target).val().length&&(i?e._select(d,o.find(":selected")):(n=o.find(":selected").length?o.find(":selected").last():o.find("option, li").first(),e._select(d,n)))}),o.on("DOMNodeInserted",function(a){var o=t(a.target);o.val().length&&(e._addOption(r,o),r.find("li").not(".dropdownjs-add").attr("tabindex",0))}),o.on("DOMNodeRemoved",function(a){var i,n=t(a.target).attr("value");r.find("li").filter(function(){return t(this).data("value")===n}).remove(),setTimeout(function(){i=o.find(":selected").length?o.find(":selected").last():o.find("option, li").first(),e._select(d,i)},100)}),o.on("change",function(a){t(a.target);if(i){var n=o.find(":selected"),s=t(this).val();c.removeClass("selected"),n.each(function(){c.filter(function(){return-1!==t.inArray(t(this).data("value"),s)}).addClass("selected")})}else{var l;l=o.find(":selected").length?o.find(":selected").last():o.find("option, li").first(),e._select(d,l)}}),l.on("click focus",function(e){if(e.stopPropagation(),!o.is(":disabled")){t(".dropdownjs > ul > li").attr("tabindex",-1),t(".dropdownjs > input").not(t(this)).removeClass("focus").blur(),t(".dropdownjs > ul > li").not(".dropdownjs-add").attr("tabindex",0);var a={top:t(this).offset().top-t(document).scrollTop(),left:t(this).offset().left-t(document).scrollLeft(),bottom:t(window).height()-(t(this).offset().top-t(document).scrollTop()),right:t(window).width()-(t(this).offset().left-t(document).scrollLeft())},i=a.bottom;i<200&&a.top>a.bottom?(i=a.top,r.attr({role:"listbox","aria-label":"select language"}).attr("placement",t("body").hasClass("rtl")?"top-right":"top-left")):r.attr({role:"listbox","aria-label":"select language"}).attr("placement",t("body").hasClass("rtl")?"bottom-right":"bottom-left"),t(this).next("ul").css("max-height",i-20),t(this).addClass("focus")}}),t(document).on("click",function(e){i&&t(e.target).parents(".dropdownjs").length||t(e.target).parents(".dropdownjs-add").length||t(e.target).is(".dropdownjs-add")||(t(".dropdownjs > ul > li").attr("tabindex",-1),t(e.target).hasClass("disabled")||l.removeClass("focus"))})}}(a=a?t.extend(e.options,a):e.options).autoinit&&t(document).on("DOMNodeInserted",function(e){var i=t(e.target);i.is("select")||(i=i.find("select")),i.each(function(){t(this).is(a.autoinit)&&o(t(this))})}),t(this).each(function(){o(t(this))})},select:function(a){var o=t(this).find(function(){return t(this).data("value")===a});e._select(t(this),o)},_select:function(e,a){if(!a.is(".dropdownjs-add")){var o=e.data("select"),i=e.find("input.fakeinput"),n=o.attr("multiple"),s=e.find("li");if(n){a.toggleClass("selected"),a.each(function(){var e="OPTION"===t(this).prop("tagName")?t(this).val():t(this).data("value");o.find('[value="'+e+'"]').prop("selected",t(this).hasClass("selected"))});var d=[];s.each(function(){t(this).hasClass("selected")&&d.push(t(this).text())}),i.val(d.join(", "))}if(!n){if(a.hasClass("disabled"))return;a.is("li")&&s.not(a).removeClass("selected"),a.addClass("selected").attr("aria-selected","true"),i.val(a.text().trim());var l="OPTION"===a.prop("tagName")?a.val():a.data("value");if(l===o.val())return;o.val(l)}t.material&&(i.val().trim()?o.removeClass("empty"):o.addClass("empty")),this.options.onSelected&&this.options.onSelected(a.data("value"))}},_addOption:function(e,a){var o=t("<li role=option></li>");o.addClass(this.options.optionClass),a.text()?o.text(a.text()):o.html("&nbsp;"),o.data("value",a.val()),e.data("select").attr("data-dynamic-opts")&&(o.append("<span class=close></span>"),o.find(".close").on("click",function(){o.remove(),a.remove()})),a.prop("selected")&&o.attr("selected",!0),a.prop("disabled")&&o.addClass("disabled"),e.find(".dropdownjs-add").length?e.find(".dropdownjs-add").before(o):e.append(o)},destroy:function(e){t(e).show().removeAttr("data-dropdownjs").next(".dropdownjs").remove()}};t.fn.dropdown=function(a){return"function"==typeof e[a]&&e[a](this),e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof a|!a?e.init.apply(this,arguments):void t.error("Method "+a+" does not exists on jQuery.dropdown")}});